================================================================================
NETRA AI PLATFORM - UNIFIED TEST RUNNER
================================================================================
[INFO] Enhanced Test Reporter enabled
Running unit tests: Unit tests for isolated components (1-2 minutes)
Purpose: Development validation, component testing
Timeout: 120s

============================================================
RUNNING BACKEND TESTS
============================================================
================================================================================
NETRA AI PLATFORM - BACKEND TEST RUNNER
================================================================================
Test Configuration:
  Category: unit
  Parallel: 4
  Coverage: enabled
  Fail Fast: enabled
  Environment: development

Running command:
  pytest app/tests/services app/tests/core -vv -n 4 -x --maxfail=1 --cov=app --cov-report=html:reports/coverage/html --cov-report=term-missing --cov-report=json:reports/coverage/coverage.json --cov-fail-under=70 -m not real_services --tb=short --asyncio-mode=auto --color=yes --strict-markers --disable-warnings -p no:warnings
================================================================================
[1m============================= test session starts =============================[0m
platform win32 -- Python 3.12.4, pytest-8.4.1, pluggy-1.6.0 -- C:\Users\antho\miniconda3\python.exe
cachedir: .pytest_cache
metadata: {'Python': '3.12.4', 'Platform': 'Windows-11-10.0.26100-SP0', 'Packages': {'pytest': '8.4.1', 'pluggy': '1.6.0'}, 'Plugins': {'anyio': '4.9.0', 'Faker': '37.4.2', 'langsmith': '0.4.10', 'asyncio': '0.21.1', 'cov': '6.2.1', 'html': '4.1.1', 'json-report': '1.5.0', 'metadata': '3.1.1', 'mock': '3.14.1', 'timeout': '2.4.0', 'xdist': '3.8.0', 'typeguard': '4.4.4'}}
rootdir: C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\app
configfile: pytest.ini
plugins: anyio-4.9.0, Faker-37.4.2, langsmith-0.4.10, asyncio-0.21.1, cov-6.2.1, html-4.1.1, json-report-1.5.0, metadata-3.1.1, mock-3.14.1, timeout-2.4.0, xdist-3.8.0, typeguard-4.4.4
asyncio: mode=Mode.AUTO
created: 4/4 workers
4 workers [1439 items]

scheduling tests via LoadScheduling

app\tests\services\agents\test_supervisor_service.py::test_supervisor_end_to_end 
app\tests\services\test_agent_service_orchestration.py::TestAgentErrorRecovery::test_agent_failure_recovery 
app\tests\services\test_generation_service_fixed.py::TestClickHouseOperationsMocked::test_get_corpus_from_clickhouse_mocked 
app\tests\services\test_database_repositories.py::TestBaseRepository::test_repository_bulk_create 
[gw3][36m [  0%] [0m[32mPASSED[0m app\tests\services\test_generation_service_fixed.py::TestClickHouseOperationsMocked::test_get_corpus_from_clickhouse_mocked 
app\tests\services\test_generation_service_fixed.py::TestClickHouseOperationsMocked::test_save_corpus_to_clickhouse_mocked 
[gw0][36m [  0%] [0m[32mPASSED[0m app\tests\services\agents\test_supervisor_service.py::test_supervisor_end_to_end 
app\tests\services\agents\test_tools.py::test_tool_dispatcher 
[gw3][36m [  0%] [0m[32mPASSED[0m app\tests\services\test_generation_service_fixed.py::TestClickHouseOperationsMocked::test_save_corpus_to_clickhouse_mocked 
[gw2][36m [  0%] [0m[32mPASSED[0m app\tests\services\test_database_repositories.py::TestBaseRepository::test_repository_bulk_create 
app\tests\services\test_job_store_service.py::TestJobStore::test_job_store_initialization 
app\tests\services\test_database_repositories.py::TestBaseRepository::test_repository_get_by_id 
[gw3][36m [  0%] [0m[32mPASSED[0m app\tests\services\test_job_store_service.py::TestJobStore::test_job_store_initialization 
app\tests\services\test_job_store_service.py::TestJobStore::test_set_and_get_job 
[gw3][36m [  0%] [0m[32mPASSED[0m app\tests\services\test_job_store_service.py::TestJobStore::test_set_and_get_job 
app\tests\services\test_job_store_service.py::TestJobStore::test_update_job_status 
[gw3][36m [  0%] [0m[32mPASSED[0m app\tests\services\test_job_store_service.py::TestJobStore::test_update_job_status 
[gw2][36m [  0%] [0m[32mPASSED[0m app\tests\services\test_database_repositories.py::TestBaseRepository::test_repository_get_by_id 
app\tests\services\test_job_store_service.py::TestJobStore::test_nonexistent_job 
app\tests\services\test_database_repositories.py::TestBaseRepository::test_repository_get_many 
[gw3][36m [  0%] [0m[32mPASSED[0m app\tests\services\test_job_store_service.py::TestJobStore::test_nonexistent_job 
app\tests\services\test_job_store_service.py::TestJobStore::test_global_job_store 
[gw3][36m [  0%] [0m[32mPASSED[0m app\tests\services\test_job_store_service.py::TestJobStore::test_global_job_store 
[gw0][36m [  0%] [0m[32mPASSED[0m app\tests\services\agents\test_tools.py::test_tool_dispatcher 
app\tests\services\test_key_manager.py::test_load_from_settings_success 
app\tests\services\agents\test_tools.py::test_tool_dispatcher_tool_not_found 
[gw2][36m [  0%] [0m[32mPASSED[0m app\tests\services\test_database_repositories.py::TestBaseRepository::test_repository_get_many 
app\tests\services\test_database_repositories.py::TestBaseRepository::test_repository_update 
[gw3][36m [  0%] [0m[32mPASSED[0m app\tests\services\test_key_manager.py::test_load_from_settings_success 
[gw0][36m [  0%] [0m[32mPASSED[0m app\tests\services\agents\test_tools.py::test_tool_dispatcher_tool_not_found 
app\tests\services\test_key_manager.py::test_load_from_settings_jwt_key_too_short 
app\tests\services\agents\test_tools.py::test_tool_dispatcher_tool_error 
[gw0][36m [  1%] [0m[32mPASSED[0m app\tests\services\agents\test_tools.py::test_tool_dispatcher_tool_error 
[gw3][36m [  1%] [0m[32mPASSED[0m app\tests\services\test_key_manager.py::test_load_from_settings_jwt_key_too_short 
app\tests\services\apex_optimizer_agent\test_tool_builder.py::test_tool_builder_and_dispatcher 
app\tests\services\test_llm_cache_service.py::test_llm_cache_service_initialization 
[gw3][36m [  1%] [0m[32mPASSED[0m app\tests\services\test_llm_cache_service.py::test_llm_cache_service_initialization 
[gw2][36m [  1%] [0m[32mPASSED[0m app\tests\services\test_database_repositories.py::TestBaseRepository::test_repository_update 
app\tests\services\test_llm_cache_service.py::test_cache_set_and_get 
app\tests\services\test_database_repositories.py::TestBaseRepository::test_repository_delete 
[gw3][36m [  1%] [0m[32mPASSED[0m app\tests\services\test_llm_cache_service.py::test_cache_set_and_get 
[gw0][36m [  1%] [0m[32mPASSED[0m app\tests\services\apex_optimizer_agent\test_tool_builder.py::test_tool_builder_and_dispatcher 
app\tests\services\apex_optimizer_agent\tools\test_advanced_optimization_for_core_function.py::test_advanced_optimization_for_core_function_tool 
app\tests\services\test_llm_cache_service.py::test_cache_expiration 
[gw0][36m [  1%] [0m[32mPASSED[0m app\tests\services\apex_optimizer_agent\tools\test_advanced_optimization_for_core_function.py::test_advanced_optimization_for_core_function_tool 
app\tests\services\apex_optimizer_agent\tools\test_base.py::TestToolMetadata::test_tool_metadata_creation_basic 
[gw0][36m [  1%] [0m[32mPASSED[0m app\tests\services\apex_optimizer_agent\tools\test_base.py::TestToolMetadata::test_tool_metadata_creation_basic 
app\tests\services\apex_optimizer_agent\tools\test_base.py::TestToolMetadata::test_tool_metadata_creation_full 
[gw0][36m [  1%] [0m[32mPASSED[0m app\tests\services\apex_optimizer_agent\tools\test_base.py::TestToolMetadata::test_tool_metadata_creation_full 
app\tests\services\apex_optimizer_agent\tools\test_base.py::TestToolMetadata::test_tool_metadata_validation_missing_required 
[gw0][36m [  1%] [0m[32mPASSED[0m app\tests\services\apex_optimizer_agent\tools\test_base.py::TestToolMetadata::test_tool_metadata_validation_missing_required 
app\tests\services\apex_optimizer_agent\tools\test_base.py::TestToolMetadata::test_tool_metadata_dict_conversion 
[gw0][36m [  1%] [0m[32mPASSED[0m app\tests\services\apex_optimizer_agent\tools\test_base.py::TestToolMetadata::test_tool_metadata_dict_conversion 
app\tests\services\apex_optimizer_agent\tools\test_base.py::TestToolMetadata::test_tool_metadata_json_serialization 
[gw0][36m [  1%] [0m[32mPASSED[0m app\tests\services\apex_optimizer_agent\tools\test_base.py::TestToolMetadata::test_tool_metadata_json_serialization 
app\tests\services\apex_optimizer_agent\tools\test_base.py::TestToolMetadata::test_tool_metadata_edge_cases 
[gw0][36m [  1%] [0m[32mPASSED[0m app\tests\services\apex_optimizer_agent\tools\test_base.py::TestToolMetadata::test_tool_metadata_edge_cases 
app\tests\services\apex_optimizer_agent\tools\test_base.py::TestBaseTool::test_base_tool_instantiation 
[gw0][36m [  1%] [0m[32mPASSED[0m app\tests\services\apex_optimizer_agent\tools\test_base.py::TestBaseTool::test_base_tool_instantiation 
app\tests\services\apex_optimizer_agent\tools\test_base.py::TestBaseTool::test_base_tool_get_metadata 
[gw0][36m [  2%] [0m[32mPASSED[0m app\tests\services\apex_optimizer_agent\tools\test_base.py::TestBaseTool::test_base_tool_get_metadata 
app\tests\services\apex_optimizer_agent\tools\test_base.py::TestBaseTool::test_base_tool_execute_wrapper 
[gw0][36m [  2%] [0m[32mPASSED[0m app\tests\services\apex_optimizer_agent\tools\test_base.py::TestBaseTool::test_base_tool_execute_wrapper 
app\tests\services\apex_optimizer_agent\tools\test_base.py::TestBaseTool::test_base_tool_execute_failure 
[gw0][36m [  2%] [0m[32mPASSED[0m app\tests\services\apex_optimizer_agent\tools\test_base.py::TestBaseTool::test_base_tool_execute_failure 
app\tests\services\apex_optimizer_agent\tools\test_base.py::TestBaseTool::test_concrete_tool_run_method 
[gw2][36m [  2%] [0m[31mFAILED[0m app\tests\services\test_database_repositories.py::TestBaseRepository::test_repository_delete 
[gw0][36m [  2%] [0m[32mPASSED[0m app\tests\services\apex_optimizer_agent\tools\test_base.py::TestBaseTool::test_concrete_tool_run_method 
app\tests\services\apex_optimizer_agent\tools\test_base.py::TestBaseTool::test_base_tool_with_llm_name 
[gw0][36m [  2%] [0m[32mPASSED[0m app\tests\services\apex_optimizer_agent\tools\test_base.py::TestBaseTool::test_base_tool_with_llm_name 
app\tests\services\apex_optimizer_agent\tools\test_base.py::TestBaseTool::test_base_tool_multiple_executions 
[gw0][36m [  2%] [0m[32mPASSED[0m app\tests\services\apex_optimizer_agent\tools\test_base.py::TestBaseTool::test_base_tool_multiple_executions 
app\tests\services\apex_optimizer_agent\tools\test_base.py::TestBaseTool::test_base_tool_concurrent_execution 
[gw0][36m [  2%] [0m[32mPASSED[0m app\tests\services\apex_optimizer_agent\tools\test_base.py::TestBaseTool::test_base_tool_concurrent_execution 
app\tests\services\apex_optimizer_agent\tools\test_base.py::TestBaseTool::test_base_tool_execute_without_metadata_attribute 
[gw0][36m [  2%] [0m[32mPASSED[0m app\tests\services\apex_optimizer_agent\tools\test_base.py::TestBaseTool::test_base_tool_execute_without_metadata_attribute 
app\tests\services\apex_optimizer_agent\tools\test_base.py::TestBaseTool::test_base_tool_inheritance_chain 
[gw0][36m [  2%] [0m[32mPASSED[0m app\tests\services\apex_optimizer_agent\tools\test_base.py::TestBaseTool::test_base_tool_inheritance_chain 
app\tests\services\apex_optimizer_agent\tools\test_base.py::TestBaseTool::test_base_tool_with_complex_kwargs 
[gw0][36m [  2%] [0m[32mPASSED[0m app\tests\services\apex_optimizer_agent\tools\test_base.py::TestBaseTool::test_base_tool_with_complex_kwargs 
app\tests\services\apex_optimizer_agent\tools\test_base.py::TestBaseTool::test_base_tool_exception_types 
[gw0][36m [  2%] [0m[32mPASSED[0m app\tests\services\apex_optimizer_agent\tools\test_base.py::TestBaseTool::test_base_tool_exception_types 
app\tests\services\apex_optimizer_agent\tools\test_base.py::TestBaseTool::test_base_tool_async_delay 
[gw1][36m [  2%] [0m[32mPASSED[0m app\tests\services\test_agent_service_orchestration.py::TestAgentErrorRecovery::test_agent_failure_recovery 
app\tests\services\test_agent_service_orchestration.py::TestAgentErrorRecovery::test_agent_timeout_handling 
[gw0][36m [  2%] [0m[32mPASSED[0m app\tests\services\apex_optimizer_agent\tools\test_base.py::TestBaseTool::test_base_tool_async_delay 
app\tests\services\apex_optimizer_agent\tools\test_cost_analyzer.py::TestCostAnalyzer::test_cost_analyzer_basic_functionality 
[gw0][36m [  2%] [0m[32mPASSED[0m app\tests\services\apex_optimizer_agent\tools\test_cost_analyzer.py::TestCostAnalyzer::test_cost_analyzer_basic_functionality 
[gw1][36m [  3%] [0m[32mPASSED[0m app\tests\services\test_agent_service_orchestration.py::TestAgentErrorRecovery::test_agent_timeout_handling 
app\tests\services\apex_optimizer_agent\tools\test_cost_analyzer.py::TestCostAnalyzer::test_cost_analyzer_empty_logs 
app\tests\services\test_agent_service_orchestration.py::TestAgentErrorRecovery::test_agent_resource_cleanup_on_error 
[gw0][36m [  3%] [0m[32mPASSED[0m app\tests\services\apex_optimizer_agent\tools\test_cost_analyzer.py::TestCostAnalyzer::test_cost_analyzer_empty_logs 
app\tests\services\apex_optimizer_agent\tools\test_cost_analyzer.py::TestCostAnalyzer::test_cost_analyzer_single_log 
[gw0][36m [  3%] [0m[32mPASSED[0m app\tests\services\apex_optimizer_agent\tools\test_cost_analyzer.py::TestCostAnalyzer::test_cost_analyzer_single_log 
app\tests\services\apex_optimizer_agent\tools\test_cost_analyzer.py::TestCostAnalyzer::test_cost_analyzer_large_costs 
[gw1][36m [  3%] [0m[32mPASSED[0m app\tests\services\test_agent_service_orchestration.py::TestAgentErrorRecovery::test_agent_resource_cleanup_on_error 
[gw0][36m [  3%] [0m[32mPASSED[0m app\tests\services\apex_optimizer_agent\tools\test_cost_analyzer.py::TestCostAnalyzer::test_cost_analyzer_large_costs 
app\tests\services\apex_optimizer_agent\tools\test_cost_analyzer.py::TestCostAnalyzer::test_cost_analyzer_zero_costs 
app\tests\services\test_agent_service_orchestration.py::TestAgentErrorRecovery::test_circuit_breaker_pattern 
[gw0][36m [  3%] [0m[32mPASSED[0m app\tests\services\apex_optimizer_agent\tools\test_cost_analyzer.py::TestCostAnalyzer::test_cost_analyzer_zero_costs 
app\tests\services\apex_optimizer_agent\tools\test_cost_analyzer.py::TestCostAnalyzer::test_cost_analyzer_fractional_cents 
[gw0][36m [  3%] [0m[32mPASSED[0m app\tests\services\apex_optimizer_agent\tools\test_cost_analyzer.py::TestCostAnalyzer::test_cost_analyzer_fractional_cents 
app\tests\services\apex_optimizer_agent\tools\test_cost_analyzer.py::TestCostAnalyzer::test_cost_analyzer_exception_handling 
[gw0][36m [  3%] [0m[32mPASSED[0m app\tests\services\apex_optimizer_agent\tools\test_cost_analyzer.py::TestCostAnalyzer::test_cost_analyzer_exception_handling 
app\tests\services\apex_optimizer_agent\tools\test_cost_analyzer.py::TestCostAnalyzer::test_cost_analyzer_async_execution 
[gw1][36m [  3%] [0m[32mPASSED[0m app\tests\services\test_agent_service_orchestration.py::TestAgentErrorRecovery::test_circuit_breaker_pattern 
app\tests\services\test_apex_optimizer_tool_selection.py::TestApexOptimizerToolSelection::test_tool_selection_cost_optimization 
[gw1][36m [  3%] [0m[32mPASSED[0m app\tests\services\test_apex_optimizer_tool_selection.py::TestApexOptimizerToolSelection::test_tool_selection_cost_optimization 
app\tests\services\test_apex_optimizer_tool_selection.py::TestApexOptimizerToolSelection::test_tool_selection_latency_optimization 
[gw1][36m [  3%] [0m[32mPASSED[0m app\tests\services\test_apex_optimizer_tool_selection.py::TestApexOptimizerToolSelection::test_tool_selection_latency_optimization 
app\tests\services\test_apex_optimizer_tool_selection.py::TestApexOptimizerToolSelection::test_tool_selection_cache_optimization 
[gw1][36m [  3%] [0m[32mPASSED[0m app\tests\services\test_apex_optimizer_tool_selection.py::TestApexOptimizerToolSelection::test_tool_selection_cache_optimization 
app\tests\services\test_apex_optimizer_tool_selection.py::TestApexOptimizerToolSelection::test_tool_selection_model_analysis 
[gw0][36m [  3%] [0m[32mPASSED[0m app\tests\services\apex_optimizer_agent\tools\test_cost_analyzer.py::TestCostAnalyzer::test_cost_analyzer_async_execution 
app\tests\services\apex_optimizer_agent\tools\test_cost_analyzer.py::TestCostAnalyzer::test_cost_analyzer_concurrent_logs 
[gw1][36m [  3%] [0m[32mPASSED[0m app\tests\services\test_apex_optimizer_tool_selection.py::TestApexOptimizerToolSelection::test_tool_selection_model_analysis 
[gw0][36m [  4%] [0m[32mPASSED[0m app\tests\services\apex_optimizer_agent\tools\test_cost_analyzer.py::TestCostAnalyzer::test_cost_analyzer_concurrent_logs 
app\tests\services\test_apex_optimizer_tool_selection.py::TestApexOptimizerToolSelection::test_tool_selection_multi_objective 
app\tests\services\apex_optimizer_agent\tools\test_cost_analyzer.py::TestCostAnalyzer::test_cost_analyzer_negative_costs 
[gw0][36m [  4%] [0m[32mPASSED[0m app\tests\services\apex_optimizer_agent\tools\test_cost_analyzer.py::TestCostAnalyzer::test_cost_analyzer_negative_costs 
app\tests\services\apex_optimizer_agent\tools\test_cost_analyzer.py::TestCostAnalyzer::test_cost_analyzer_mixed_model_types 
[gw0][36m [  4%] [0m[32mPASSED[0m app\tests\services\apex_optimizer_agent\tools\test_cost_analyzer.py::TestCostAnalyzer::test_cost_analyzer_mixed_model_types 
app\tests\services\apex_optimizer_agent\tools\test_cost_analyzer.py::TestCostAnalyzer::test_cost_analyzer_partial_failure 
[gw0][36m [  4%] [0m[32mPASSED[0m app\tests\services\apex_optimizer_agent\tools\test_cost_analyzer.py::TestCostAnalyzer::test_cost_analyzer_partial_failure 
app\tests\services\apex_optimizer_agent\tools\test_cost_analyzer.py::TestCostAnalyzer::test_cost_analyzer_rounding_edge_cases 
[gw0][36m [  4%] [0m[32mPASSED[0m app\tests\services\apex_optimizer_agent\tools\test_cost_analyzer.py::TestCostAnalyzer::test_cost_analyzer_rounding_edge_cases 
app\tests\services\apex_optimizer_agent\tools\test_cost_reduction_quality_preservation.py::test_cost_reduction_quality_preservation_tool 
[gw1][36m [  4%] [0m[31mFAILED[0m app\tests\services\test_apex_optimizer_tool_selection.py::TestApexOptimizerToolSelection::test_tool_selection_multi_objective 
[gw0][36m [  4%] [0m[32mPASSED[0m app\tests\services\apex_optimizer_agent\tools\test_cost_reduction_quality_preservation.py::test_cost_reduction_quality_preservation_tool 
app\tests\services\apex_optimizer_agent\tools\test_cost_simulation_for_increased_usage.py::test_cost_simulation_for_increased_usage_tool 
[gw0][36m [  4%] [0m[32mPASSED[0m app\tests\services\apex_optimizer_agent\tools\test_cost_simulation_for_increased_usage.py::test_cost_simulation_for_increased_usage_tool 
app\tests\services\apex_optimizer_agent\tools\test_kv_cache_optimization_audit.py::test_kv_cache_optimization_audit_tool 
[gw0][36m [  4%] [0m[32mPASSED[0m app\tests\services\apex_optimizer_agent\tools\test_kv_cache_optimization_audit.py::test_kv_cache_optimization_audit_tool 
app\tests\services\apex_optimizer_agent\tools\test_latency_analyzer.py::TestLatencyAnalyzer::test_latency_analyzer_basic_functionality 
[gw0][36m [  4%] [0m[32mPASSED[0m app\tests\services\apex_optimizer_agent\tools\test_latency_analyzer.py::TestLatencyAnalyzer::test_latency_analyzer_basic_functionality 
app\tests\services\apex_optimizer_agent\tools\test_latency_analyzer.py::TestLatencyAnalyzer::test_latency_analyzer_empty_logs 
[gw0][36m [  4%] [0m[32mPASSED[0m app\tests\services\apex_optimizer_agent\tools\test_latency_analyzer.py::TestLatencyAnalyzer::test_latency_analyzer_empty_logs 
app\tests\services\apex_optimizer_agent\tools\test_latency_analyzer.py::TestLatencyAnalyzer::test_latency_analyzer_single_log 
[gw0][36m [  4%] [0m[32mPASSED[0m app\tests\services\apex_optimizer_agent\tools\test_latency_analyzer.py::TestLatencyAnalyzer::test_latency_analyzer_single_log 
app\tests\services\apex_optimizer_agent\tools\test_latency_analyzer.py::TestLatencyAnalyzer::test_latency_analyzer_high_latency_values 
[gw0][36m [  4%] [0m[32mPASSED[0m app\tests\services\apex_optimizer_agent\tools\test_latency_analyzer.py::TestLatencyAnalyzer::test_latency_analyzer_high_latency_values 
app\tests\services\apex_optimizer_agent\tools\test_latency_analyzer.py::TestLatencyAnalyzer::test_latency_analyzer_zero_latency 
[gw0][36m [  4%] [0m[32mPASSED[0m app\tests\services\apex_optimizer_agent\tools\test_latency_analyzer.py::TestLatencyAnalyzer::test_latency_analyzer_zero_latency 
app\tests\services\apex_optimizer_agent\tools\test_latency_analyzer.py::TestLatencyAnalyzer::test_latency_analyzer_sub_millisecond_latency 
[gw0][36m [  5%] [0m[32mPASSED[0m app\tests\services\apex_optimizer_agent\tools\test_latency_analyzer.py::TestLatencyAnalyzer::test_latency_analyzer_sub_millisecond_latency 
app\tests\services\apex_optimizer_agent\tools\test_latency_analyzer.py::TestLatencyAnalyzer::test_latency_analyzer_exception_handling 
[gw0][36m [  5%] [0m[32mPASSED[0m app\tests\services\apex_optimizer_agent\tools\test_latency_analyzer.py::TestLatencyAnalyzer::test_latency_analyzer_exception_handling 
app\tests\services\apex_optimizer_agent\tools\test_latency_analyzer.py::TestLatencyAnalyzer::test_latency_analyzer_async_execution 
[gw0][36m [  5%] [0m[32mPASSED[0m app\tests\services\apex_optimizer_agent\tools\test_latency_analyzer.py::TestLatencyAnalyzer::test_latency_analyzer_async_execution 
app\tests\services\apex_optimizer_agent\tools\test_latency_analyzer.py::TestLatencyAnalyzer::test_latency_analyzer_large_dataset 
[gw0][36m [  5%] [0m[32mPASSED[0m app\tests\services\apex_optimizer_agent\tools\test_latency_analyzer.py::TestLatencyAnalyzer::test_latency_analyzer_large_dataset 
app\tests\services\apex_optimizer_agent\tools\test_latency_analyzer.py::TestLatencyAnalyzer::test_latency_analyzer_varied_latencies 
[gw0][36m [  5%] [0m[32mPASSED[0m app\tests\services\apex_optimizer_agent\tools\test_latency_analyzer.py::TestLatencyAnalyzer::test_latency_analyzer_varied_latencies 
app\tests\services\apex_optimizer_agent\tools\test_latency_analyzer.py::TestLatencyAnalyzer::test_latency_analyzer_partial_failure 
[gw0][36m [  5%] [0m[32mPASSED[0m app\tests\services\apex_optimizer_agent\tools\test_latency_analyzer.py::TestLatencyAnalyzer::test_latency_analyzer_partial_failure 
app\tests\services\apex_optimizer_agent\tools\test_latency_analyzer.py::TestLatencyAnalyzer::test_latency_analyzer_edge_case_rounding 
[gw0][36m [  5%] [0m[32mPASSED[0m app\tests\services\apex_optimizer_agent\tools\test_latency_analyzer.py::TestLatencyAnalyzer::test_latency_analyzer_edge_case_rounding 
app\tests\services\apex_optimizer_agent\tools\test_latency_analyzer.py::TestLatencyAnalyzer::test_latency_analyzer_negative_latencies 
[gw0][36m [  5%] [0m[32mPASSED[0m app\tests\services\apex_optimizer_agent\tools\test_latency_analyzer.py::TestLatencyAnalyzer::test_latency_analyzer_negative_latencies 
app\tests\services\apex_optimizer_agent\tools\test_latency_analyzer.py::TestLatencyAnalyzer::test_latency_analyzer_mixed_response_formats 
[gw0][36m [  5%] [0m[32mPASSED[0m app\tests\services\apex_optimizer_agent\tools\test_latency_analyzer.py::TestLatencyAnalyzer::test_latency_analyzer_mixed_response_formats 
app\tests\services\apex_optimizer_agent\tools\test_latency_analyzer.py::TestLatencyAnalyzer::test_latency_analyzer_extreme_values 
[gw0][36m [  5%] [0m[32mPASSED[0m app\tests\services\apex_optimizer_agent\tools\test_latency_analyzer.py::TestLatencyAnalyzer::test_latency_analyzer_extreme_values 
app\tests\services\apex_optimizer_agent\tools\test_latency_analyzer.py::TestLatencyAnalyzer::test_latency_analyzer_concurrent_execution_timing 
[gw0][36m [  5%] [0m[32mPASSED[0m app\tests\services\apex_optimizer_agent\tools\test_latency_analyzer.py::TestLatencyAnalyzer::test_latency_analyzer_concurrent_execution_timing 
app\tests\services\apex_optimizer_agent\tools\test_multi_objective_optimization.py::test_multi_objective_optimization_tool 
[gw0][36m [  5%] [0m[32mPASSED[0m app\tests\services\apex_optimizer_agent\tools\test_multi_objective_optimization.py::test_multi_objective_optimization_tool 
app\tests\services\apex_optimizer_agent\tools\test_new_model_effectiveness_analysis.py::test_new_model_effectiveness_analysis_tool 
[gw0][36m [  5%] [0m[32mPASSED[0m app\tests\services\apex_optimizer_agent\tools\test_new_model_effectiveness_analysis.py::test_new_model_effectiveness_analysis_tool 
app\tests\services\apex_optimizer_agent\tools\test_tool_latency_optimization.py::test_tool_latency_optimization_tool 
[gw0][36m [  5%] [0m[32mPASSED[0m app\tests\services\apex_optimizer_agent\tools\test_tool_latency_optimization.py::test_tool_latency_optimization_tool 
app\tests\services\test_agent_message_processing.py::TestAgentMessageProcessing::test_process_user_message 
[gw0][36m [  5%] [0m[32mPASSED[0m app\tests\services\test_agent_message_processing.py::TestAgentMessageProcessing::test_process_user_message 
app\tests\services\test_agent_message_processing.py::TestAgentMessageProcessing::test_handle_tool_execution 
[gw0][36m [  6%] [0m[32mPASSED[0m app\tests\services\test_agent_message_processing.py::TestAgentMessageProcessing::test_handle_tool_execution 
app\tests\services\test_agent_message_processing.py::TestAgentMessageProcessing::test_message_validation 
[gw0][36m [  6%] [0m[32mPASSED[0m app\tests\services\test_agent_message_processing.py::TestAgentMessageProcessing::test_message_validation 
app\tests\services\test_agent_service.py::test_run_agent 
[gw0][36m [  6%] [0m[32mPASSED[0m app\tests\services\test_agent_service.py::test_run_agent 
app\tests\services\test_agent_service_advanced.py::test_agent_service_initialization 
[gw0][36m [  6%] [0m[32mPASSED[0m app\tests\services\test_agent_service_advanced.py::test_agent_service_initialization 
app\tests\services\test_agent_service_advanced.py::test_agent_service_process_request 
[gw0][36m [  6%] [0m[32mPASSED[0m app\tests\services\test_agent_service_advanced.py::test_agent_service_process_request 
app\tests\services\test_agent_service_advanced.py::test_agent_service_websocket_message_handling 
[gw0][36m [  6%] [0m[32mPASSED[0m app\tests\services\test_agent_service_advanced.py::test_agent_service_websocket_message_handling 
app\tests\services\test_agent_service_orchestration.py::TestAgentServiceOrchestration::test_agent_service_initialization 
[gw0][36m [  6%] [0m[32mPASSED[0m app\tests\services\test_agent_service_orchestration.py::TestAgentServiceOrchestration::test_agent_service_initialization 
app\tests\services\test_agent_service_orchestration.py::TestAgentServiceOrchestration::test_agent_run_execution 
[gw0][36m [  6%] [0m[32mPASSED[0m app\tests\services\test_agent_service_orchestration.py::TestAgentServiceOrchestration::test_agent_run_execution 
app\tests\services\test_agent_service_orchestration.py::TestAgentServiceOrchestration::test_agent_run_with_model_dump_fallback 
[gw0][36m [  6%] [0m[32mPASSED[0m app\tests\services\test_agent_service_orchestration.py::TestAgentServiceOrchestration::test_agent_run_with_model_dump_fallback 
app\tests\services\test_agent_service_orchestration.py::TestAgentServiceOrchestration::test_websocket_message_handling_start_agent 
[gw0][36m [  6%] [0m[32mPASSED[0m app\tests\services\test_agent_service_orchestration.py::TestAgentServiceOrchestration::test_websocket_message_handling_start_agent 
app\tests\services\test_agent_service_orchestration.py::TestAgentServiceOrchestration::test_websocket_message_handling_user_message 
[gw0][36m [  6%] [0m[32mPASSED[0m app\tests\services\test_agent_service_orchestration.py::TestAgentServiceOrchestration::test_websocket_message_handling_user_message 
app\tests\services\test_agent_service_orchestration.py::TestAgentServiceOrchestration::test_websocket_message_handling_thread_operations 
[gw0][36m [  6%] [0m[32mPASSED[0m app\tests\services\test_agent_service_orchestration.py::TestAgentServiceOrchestration::test_websocket_message_handling_thread_operations 
app\tests\services\test_agent_service_orchestration.py::TestAgentServiceOrchestration::test_websocket_message_handling_stop_agent 
[gw0][36m [  6%] [0m[32mPASSED[0m app\tests\services\test_agent_service_orchestration.py::TestAgentServiceOrchestration::test_websocket_message_handling_stop_agent 
app\tests\services\test_agent_service_orchestration.py::TestAgentServiceOrchestration::test_websocket_message_handling_unknown_type 
[gw0][36m [  6%] [0m[32mPASSED[0m app\tests\services\test_agent_service_orchestration.py::TestAgentServiceOrchestration::test_websocket_message_handling_unknown_type 
app\tests\services\test_agent_service_orchestration.py::TestAgentServiceOrchestration::test_websocket_message_handling_json_error 
[gw0][36m [  7%] [0m[32mPASSED[0m app\tests\services\test_agent_service_orchestration.py::TestAgentServiceOrchestration::test_websocket_message_handling_json_error 
app\tests\services\test_agent_service_orchestration.py::TestAgentServiceOrchestration::test_websocket_disconnect_handling 
[gw0][36m [  7%] [0m[32mPASSED[0m app\tests\services\test_agent_service_orchestration.py::TestAgentServiceOrchestration::test_websocket_disconnect_handling 
app\tests\services\test_agent_service_orchestration.py::TestAgentServiceOrchestration::test_concurrent_agent_execution 
[gw0][36m [  7%] [0m[32mPASSED[0m app\tests\services\test_agent_service_orchestration.py::TestAgentServiceOrchestration::test_concurrent_agent_execution 
app\tests\services\test_agent_service_orchestration.py::TestAgentServiceOrchestration::test_message_parsing_string_input 
[gw0][36m [  7%] [0m[32mPASSED[0m app\tests\services\test_agent_service_orchestration.py::TestAgentServiceOrchestration::test_message_parsing_string_input 
app\tests\services\test_agent_service_orchestration.py::TestAgentServiceOrchestration::test_message_parsing_dict_input 
[gw0][36m [  7%] [0m[32mPASSED[0m app\tests\services\test_agent_service_orchestration.py::TestAgentServiceOrchestration::test_message_parsing_dict_input 
app\tests\services\test_agent_service_orchestration.py::TestAgentLifecycleManagement::test_agent_creation_and_assignment 
[gw0][36m [  7%] [0m[32mPASSED[0m app\tests\services\test_agent_service_orchestration.py::TestAgentLifecycleManagement::test_agent_creation_and_assignment 
app\tests\services\test_agent_service_orchestration.py::TestAgentLifecycleManagement::test_agent_reuse_for_same_user 
[gw0][36m [  7%] [0m[32mPASSED[0m app\tests\services\test_agent_service_orchestration.py::TestAgentLifecycleManagement::test_agent_reuse_for_same_user 
app\tests\services\test_agent_service_orchestration.py::TestAgentLifecycleManagement::test_agent_pool_management 
[gw0][36m [  7%] [0m[32mPASSED[0m app\tests\services\test_agent_service_orchestration.py::TestAgentLifecycleManagement::test_agent_pool_management 
app\tests\services\test_agent_service_orchestration.py::TestAgentLifecycleManagement::test_concurrent_agent_limit_enforcement 
[gw0][36m [  7%] [0m[32mPASSED[0m app\tests\services\test_agent_service_orchestration.py::TestAgentLifecycleManagement::test_concurrent_agent_limit_enforcement 
app\tests\services\test_agent_service_orchestration.py::TestAgentLifecycleManagement::test_agent_task_execution_tracking 
[gw0][36m [  7%] [0m[32mPASSED[0m app\tests\services\test_agent_service_orchestration.py::TestAgentLifecycleManagement::test_agent_task_execution_tracking 
app\tests\services\test_agent_service_orchestration.py::TestAgentLifecycleManagement::test_agent_task_failure_handling 
[gw0][36m [  7%] [0m[32mPASSED[0m app\tests\services\test_agent_service_orchestration.py::TestAgentLifecycleManagement::test_agent_task_failure_handling 
app\tests\services\test_agent_service_orchestration.py::TestAgentLifecycleManagement::test_concurrent_agent_orchestration 
[gw0][36m [  7%] [0m[32mPASSED[0m app\tests\services\test_agent_service_orchestration.py::TestAgentLifecycleManagement::test_concurrent_agent_orchestration 
app\tests\services\test_agent_service_orchestration.py::TestAgentLifecycleManagement::test_agent_state_transitions 
[gw0][36m [  7%] [0m[32mPASSED[0m app\tests\services\test_agent_service_orchestration.py::TestAgentLifecycleManagement::test_agent_state_transitions 
app\tests\services\test_agent_service_orchestration.py::TestAgentLifecycleManagement::test_orchestration_metrics_calculation 
[gw0][36m [  7%] [0m[32mPASSED[0m app\tests\services\test_agent_service_orchestration.py::TestAgentLifecycleManagement::test_orchestration_metrics_calculation 
[gw3][36m [  7%] [0m[32mPASSED[0m app\tests\services\test_llm_cache_service.py::test_cache_expiration 
app\tests\services\test_llm_cache_service.py::test_cache_size_limit 
[gw3][36m [  8%] [0m[32mPASSED[0m app\tests\services\test_llm_cache_service.py::test_cache_size_limit 
app\tests\services\test_llm_cache_service.py::test_cache_stats 
[gw3][36m [  8%] [0m[32mPASSED[0m app\tests\services\test_llm_cache_service.py::test_cache_stats 
app\tests\services\test_llm_manager_provider_switching.py::TestLLMManagerProviderSwitching::test_provider_registration 
[gw3][36m [  8%] [0m[32mPASSED[0m app\tests\services\test_llm_manager_provider_switching.py::TestLLMManagerProviderSwitching::test_provider_registration 
app\tests\services\test_llm_manager_provider_switching.py::TestLLMManagerProviderSwitching::test_provider_health_check_success 
[gw3][36m [  8%] [0m[32mPASSED[0m app\tests\services\test_llm_manager_provider_switching.py::TestLLMManagerProviderSwitching::test_provider_health_check_success 
app\tests\services\test_llm_manager_provider_switching.py::TestLLMManagerProviderSwitching::test_provider_health_check_failure 
[gw3][36m [  8%] [0m[32mPASSED[0m app\tests\services\test_llm_manager_provider_switching.py::TestLLMManagerProviderSwitching::test_provider_health_check_failure 
app\tests\services\test_llm_manager_provider_switching.py::TestLLMManagerProviderSwitching::test_round_robin_provider_selection 
[gw3][36m [  8%] [0m[32mPASSED[0m app\tests\services\test_llm_manager_provider_switching.py::TestLLMManagerProviderSwitching::test_round_robin_provider_selection 
app\tests\services\test_llm_manager_provider_switching.py::TestLLMManagerProviderSwitching::test_weighted_provider_selection 
[gw3][36m [  8%] [0m[32mPASSED[0m app\tests\services\test_llm_manager_provider_switching.py::TestLLMManagerProviderSwitching::test_weighted_provider_selection 
app\tests\services\test_llm_manager_provider_switching.py::TestLLMManagerProviderSwitching::test_failover_invoke_success 
[gw3][36m [  8%] [0m[32mPASSED[0m app\tests\services\test_llm_manager_provider_switching.py::TestLLMManagerProviderSwitching::test_failover_invoke_success 
app\tests\services\test_llm_manager_provider_switching.py::TestLLMManagerProviderSwitching::test_failover_invoke_preferred_provider 
[gw3][36m [  8%] [0m[32mPASSED[0m app\tests\services\test_llm_manager_provider_switching.py::TestLLMManagerProviderSwitching::test_failover_invoke_preferred_provider 
app\tests\services\test_llm_manager_provider_switching.py::TestLLMManagerProviderSwitching::test_failover_invoke_provider_failure 
[gw3][36m [  8%] [0m[32mPASSED[0m app\tests\services\test_llm_manager_provider_switching.py::TestLLMManagerProviderSwitching::test_failover_invoke_provider_failure 
app\tests\services\test_llm_manager_provider_switching.py::TestLLMManagerProviderSwitching::test_failover_all_providers_fail 
[gw3][36m [  8%] [0m[32mPASSED[0m app\tests\services\test_llm_manager_provider_switching.py::TestLLMManagerProviderSwitching::test_failover_all_providers_fail 
app\tests\services\test_llm_manager_provider_switching.py::TestLLMManagerProviderSwitching::test_provider_cooldown_period 
[gw3][36m [  8%] [0m[32mPASSED[0m app\tests\services\test_llm_manager_provider_switching.py::TestLLMManagerProviderSwitching::test_provider_cooldown_period 
app\tests\services\test_llm_manager_provider_switching.py::TestLLMManagerProviderSwitching::test_concurrent_provider_switching 
[gw3][36m [  8%] [0m[32mPASSED[0m app\tests\services\test_llm_manager_provider_switching.py::TestLLMManagerProviderSwitching::test_concurrent_provider_switching 
app\tests\services\test_llm_manager_provider_switching.py::TestLLMManagerProviderSwitching::test_provider_statistics_collection 
[gw3][36m [  8%] [0m[32mPASSED[0m app\tests\services\test_llm_manager_provider_switching.py::TestLLMManagerProviderSwitching::test_provider_statistics_collection 
app\tests\services\test_llm_manager_provider_switching.py::TestLLMManagerLoadBalancing::test_response_time_based_load_balancing 
[gw3][36m [  9%] [0m[32mPASSED[0m app\tests\services\test_llm_manager_provider_switching.py::TestLLMManagerLoadBalancing::test_response_time_based_load_balancing 
app\tests\services\test_llm_manager_provider_switching.py::TestLLMManagerLoadBalancing::test_adaptive_load_balancing 
[gw3][36m [  9%] [0m[32mPASSED[0m app\tests\services\test_llm_manager_provider_switching.py::TestLLMManagerLoadBalancing::test_adaptive_load_balancing 
app\tests\services\test_llm_manager_provider_switching.py::TestLLMManagerLoadBalancing::test_geographic_load_balancing 
[gw3][36m [  9%] [0m[32mPASSED[0m app\tests\services\test_llm_manager_provider_switching.py::TestLLMManagerLoadBalancing::test_geographic_load_balancing 
app\tests\services\test_llm_manager_provider_switching.py::TestLLMManagerStructuredOutput::test_structured_output_with_failover 
[gw3][36m [  9%] [0m[32mPASSED[0m app\tests\services\test_llm_manager_provider_switching.py::TestLLMManagerStructuredOutput::test_structured_output_with_failover 
app\tests\services\test_message_handlers.py::test_message_handler_service_initialization 
[gw3][36m [  9%] [0m[32mPASSED[0m app\tests\services\test_message_handlers.py::test_message_handler_service_initialization 
app\tests\services\test_message_handlers.py::test_handle_start_agent 
[gw3][36m [  9%] [0m[32mPASSED[0m app\tests\services\test_message_handlers.py::test_handle_start_agent 
app\tests\services\test_message_handlers.py::test_websocket_schema_imports 
[gw3][36m [  9%] [0m[32mPASSED[0m app\tests\services\test_message_handlers.py::test_websocket_schema_imports 
app\tests\services\test_overall_supervisor.py::test_overall_supervisor_workflow 
[gw3][36m [  9%] [0m[32mPASSED[0m app\tests\services\test_overall_supervisor.py::test_overall_supervisor_workflow 
app\tests\services\test_permission_service.py::TestPermissionServiceConstants::test_role_hierarchy_ordering 
[gw3][36m [  9%] [0m[32mPASSED[0m app\tests\services\test_permission_service.py::TestPermissionServiceConstants::test_role_hierarchy_ordering 
app\tests\services\test_permission_service.py::TestPermissionServiceConstants::test_role_permissions_inheritance 
[gw3][36m [  9%] [0m[32mPASSED[0m app\tests\services\test_permission_service.py::TestPermissionServiceConstants::test_role_permissions_inheritance 
app\tests\services\test_permission_service.py::TestPermissionServiceConstants::test_critical_permissions_restricted 
[gw3][36m [  9%] [0m[32mPASSED[0m app\tests\services\test_permission_service.py::TestPermissionServiceConstants::test_critical_permissions_restricted 
app\tests\services\test_permission_service.py::TestDetectDeveloperStatus::test_detect_developer_with_dev_mode_env 
[gw3][36m [  9%] [0m[32mPASSED[0m app\tests\services\test_permission_service.py::TestDetectDeveloperStatus::test_detect_developer_with_dev_mode_env 
app\tests\services\test_permission_service.py::TestDetectDeveloperStatus::test_detect_developer_with_netra_email 
[gw3][36m [  9%] [0m[32mPASSED[0m app\tests\services\test_permission_service.py::TestDetectDeveloperStatus::test_detect_developer_with_netra_email 
app\tests\services\test_permission_service.py::TestDetectDeveloperStatus::test_detect_developer_with_dev_environment 
[gw3][36m [  9%] [0m[32mPASSED[0m app\tests\services\test_permission_service.py::TestDetectDeveloperStatus::test_detect_developer_with_dev_environment 
app\tests\services\test_permission_service.py::TestDetectDeveloperStatus::test_detect_developer_priority_order 
[gw3][36m [ 10%] [0m[32mPASSED[0m app\tests\services\test_permission_service.py::TestDetectDeveloperStatus::test_detect_developer_priority_order 
app\tests\services\test_permission_service.py::TestDetectDeveloperStatus::test_detect_developer_with_none_email 
[gw3][36m [ 10%] [0m[32mPASSED[0m app\tests\services\test_permission_service.py::TestDetectDeveloperStatus::test_detect_developer_with_none_email 
app\tests\services\test_permission_service.py::TestUpdateUserRole::test_update_user_role_auto_elevate_to_developer 
[gw3][36m [ 10%] [0m[32mPASSED[0m app\tests\services\test_permission_service.py::TestUpdateUserRole::test_update_user_role_auto_elevate_to_developer 
app\tests\services\test_permission_service.py::TestUpdateUserRole::test_update_user_role_no_elevation_for_admin 
[gw3][36m [ 10%] [0m[32mPASSED[0m app\tests\services\test_permission_service.py::TestUpdateUserRole::test_update_user_role_no_elevation_for_admin 
app\tests\services\test_permission_service.py::TestUpdateUserRole::test_update_user_role_no_elevation_for_super_admin 
[gw3][36m [ 10%] [0m[32mPASSED[0m app\tests\services\test_permission_service.py::TestUpdateUserRole::test_update_user_role_no_elevation_for_super_admin 
app\tests\services\test_permission_service.py::TestUpdateUserRole::test_update_user_role_skip_developer_check 
[gw3][36m [ 10%] [0m[32mPASSED[0m app\tests\services\test_permission_service.py::TestUpdateUserRole::test_update_user_role_skip_developer_check 
app\tests\services\test_permission_service.py::TestUpdateUserRole::test_update_user_role_already_developer 
[gw3][36m [ 10%] [0m[32mPASSED[0m app\tests\services\test_permission_service.py::TestUpdateUserRole::test_update_user_role_already_developer 
app\tests\services\test_permission_service.py::TestUpdateUserRole::test_update_user_role_power_user_elevation 
[gw3][36m [ 10%] [0m[32mPASSED[0m app\tests\services\test_permission_service.py::TestUpdateUserRole::test_update_user_role_power_user_elevation 
app\tests\services\test_permission_service.py::TestCheckPermission::test_check_permission_standard_user 
[gw3][36m [ 10%] [0m[32mPASSED[0m app\tests\services\test_permission_service.py::TestCheckPermission::test_check_permission_standard_user 
app\tests\services\test_permission_service.py::TestCheckPermission::test_check_permission_super_admin 
[gw3][36m [ 10%] [0m[32mPASSED[0m app\tests\services\test_permission_service.py::TestCheckPermission::test_check_permission_super_admin 
app\tests\services\test_permission_service.py::TestCheckPermission::test_check_permission_developer 
[gw3][36m [ 10%] [0m[32mPASSED[0m app\tests\services\test_permission_service.py::TestCheckPermission::test_check_permission_developer 
app\tests\services\test_permission_service.py::TestCheckPermission::test_check_permission_invalid_role 
[gw3][36m [ 10%] [0m[32mPASSED[0m app\tests\services\test_permission_service.py::TestCheckPermission::test_check_permission_invalid_role 
app\tests\services\test_permission_service.py::TestCheckPermission::test_check_permission_none_role 
[gw3][36m [ 10%] [0m[32mPASSED[0m app\tests\services\test_permission_service.py::TestCheckPermission::test_check_permission_none_role 
app\tests\services\test_permission_service.py::TestGetUserPermissions::test_get_user_permissions_standard_user 
[gw3][36m [ 10%] [0m[32mPASSED[0m app\tests\services\test_permission_service.py::TestGetUserPermissions::test_get_user_permissions_standard_user 
app\tests\services\test_permission_service.py::TestGetUserPermissions::test_get_user_permissions_super_admin 
[gw3][36m [ 10%] [0m[32mPASSED[0m app\tests\services\test_permission_service.py::TestGetUserPermissions::test_get_user_permissions_super_admin 
app\tests\services\test_permission_service.py::TestGetUserPermissions::test_get_user_permissions_invalid_role 
[gw3][36m [ 11%] [0m[32mPASSED[0m app\tests\services\test_permission_service.py::TestGetUserPermissions::test_get_user_permissions_invalid_role 
app\tests\services\test_permission_service.py::TestAdminChecks::test_is_admin_or_higher 
[gw3][36m [ 11%] [0m[32mPASSED[0m app\tests\services\test_permission_service.py::TestAdminChecks::test_is_admin_or_higher 
app\tests\services\test_permission_service.py::TestAdminChecks::test_is_developer_or_higher 
[gw3][36m [ 11%] [0m[32mPASSED[0m app\tests\services\test_permission_service.py::TestAdminChecks::test_is_developer_or_higher 
app\tests\services\test_permission_service.py::TestPermissionGroups::test_has_any_permission 
[gw3][36m [ 11%] [0m[32mPASSED[0m app\tests\services\test_permission_service.py::TestPermissionGroups::test_has_any_permission 
app\tests\services\test_permission_service.py::TestPermissionGroups::test_has_all_permissions 
[gw3][36m [ 11%] [0m[32mPASSED[0m app\tests\services\test_permission_service.py::TestPermissionGroups::test_has_all_permissions 
app\tests\services\test_permission_service.py::TestSecurityEdgeCases::test_sql_injection_in_permission_check 
[gw3][36m [ 11%] [0m[32mPASSED[0m app\tests\services\test_permission_service.py::TestSecurityEdgeCases::test_sql_injection_in_permission_check 
app\tests\services\test_permission_service.py::TestSecurityEdgeCases::test_case_sensitivity_in_roles 
[gw3][36m [ 11%] [0m[32mPASSED[0m app\tests\services\test_permission_service.py::TestSecurityEdgeCases::test_case_sensitivity_in_roles 
app\tests\services\test_permission_service.py::TestSecurityEdgeCases::test_permission_escalation_attempt 
[gw3][36m [ 11%] [0m[32mPASSED[0m app\tests\services\test_permission_service.py::TestSecurityEdgeCases::test_permission_escalation_attempt 
app\tests\services\test_permission_service.py::TestIntegrationScenarios::test_new_user_onboarding_flow 
[gw3][36m [ 11%] [0m[32mPASSED[0m app\tests\services\test_permission_service.py::TestIntegrationScenarios::test_new_user_onboarding_flow 
app\tests\services\test_permission_service.py::TestIntegrationScenarios::test_production_environment_security 
[gw3][36m [ 11%] [0m[32mPASSED[0m app\tests\services\test_permission_service.py::TestIntegrationScenarios::test_production_environment_security 
app\tests\services\test_quality_gate_service.py::TestQualityGateService::test_validate_high_quality_optimization_content 
[gw3][36m [ 11%] [0m[32mPASSED[0m app\tests\services\test_quality_gate_service.py::TestQualityGateService::test_validate_high_quality_optimization_content 
app\tests\services\test_quality_gate_service.py::TestQualityGateService::test_validate_low_quality_generic_content 
[gw3][36m [ 11%] [0m[32mPASSED[0m app\tests\services\test_quality_gate_service.py::TestQualityGateService::test_validate_low_quality_generic_content 
app\tests\services\test_quality_gate_service.py::TestQualityGateService::test_detect_circular_reasoning 
[gw3][36m [ 11%] [0m[32mPASSED[0m app\tests\services\test_quality_gate_service.py::TestQualityGateService::test_detect_circular_reasoning 
app\tests\services\test_quality_gate_service.py::TestQualityGateService::test_validate_data_analysis_with_metrics 
[gw3][36m [ 11%] [0m[32mPASSED[0m app\tests\services\test_quality_gate_service.py::TestQualityGateService::test_validate_data_analysis_with_metrics 
app\tests\services\test_quality_gate_service.py::TestQualityGateService::test_validate_action_plan_completeness 
[gw3][36m [ 12%] [0m[32mPASSED[0m app\tests\services\test_quality_gate_service.py::TestQualityGateService::test_validate_action_plan_completeness 
app\tests\services\test_quality_gate_service.py::TestQualityGateService::test_validate_with_strict_mode 
[gw3][36m [ 12%] [0m[32mPASSED[0m app\tests\services\test_quality_gate_service.py::TestQualityGateService::test_validate_with_strict_mode 
app\tests\services\test_quality_gate_service.py::TestQualityGateService::test_validate_error_message_clarity 
[gw3][36m [ 12%] [0m[32mPASSED[0m app\tests\services\test_quality_gate_service.py::TestQualityGateService::test_validate_error_message_clarity 
app\tests\services\test_quality_gate_service.py::TestQualityGateService::test_validate_report_redundancy 
[gw3][36m [ 12%] [0m[32mPASSED[0m app\tests\services\test_quality_gate_service.py::TestQualityGateService::test_validate_report_redundancy 
app\tests\services\test_quality_gate_service.py::TestQualityGateService::test_domain_specific_term_recognition 
[gw3][36m [ 12%] [0m[32mPASSED[0m app\tests\services\test_quality_gate_service.py::TestQualityGateService::test_domain_specific_term_recognition 
app\tests\services\test_quality_gate_service.py::TestQualityGateService::test_caching_mechanism 
[gw3][36m [ 12%] [0m[32mPASSED[0m app\tests\services\test_quality_gate_service.py::TestQualityGateService::test_caching_mechanism 
app\tests\services\test_quality_gate_service.py::TestQualityGateService::test_retry_suggestions_for_failed_validation 
[gw3][36m [ 12%] [0m[32mPASSED[0m app\tests\services\test_quality_gate_service.py::TestQualityGateService::test_retry_suggestions_for_failed_validation 
app\tests\services\test_quality_gate_service.py::TestQualityGateService::test_hallucination_risk_detection 
[gw3][36m [ 12%] [0m[32mPASSED[0m app\tests\services\test_quality_gate_service.py::TestQualityGateService::test_hallucination_risk_detection 
app\tests\services\test_quality_gate_service.py::TestQualityGateService::test_triage_content_validation 
[gw3][36m [ 12%] [0m[32mPASSED[0m app\tests\services\test_quality_gate_service.py::TestQualityGateService::test_triage_content_validation 
app\tests\services\test_quality_gate_service.py::TestQualityGateService::test_context_aware_validation 
[gw3][36m [ 12%] [0m[32mPASSED[0m app\tests\services\test_quality_gate_service.py::TestQualityGateService::test_context_aware_validation 
app\tests\services\test_quality_gate_service.py::TestQualityGateService::test_quality_level_classification 
[gw3][36m [ 12%] [0m[32mPASSED[0m app\tests\services\test_quality_gate_service.py::TestQualityGateService::test_quality_level_classification 
app\tests\services\test_quality_gate_service.py::TestQualityGateService::test_calculate_specificity_scores 
[gw3][36m [ 12%] [0m[32mPASSED[0m app\tests\services\test_quality_gate_service.py::TestQualityGateService::test_calculate_specificity_scores 
app\tests\services\test_quality_gate_service.py::TestQualityGateService::test_calculate_actionability_scores 
[gw3][36m [ 12%] [0m[32mPASSED[0m app\tests\services\test_quality_gate_service.py::TestQualityGateService::test_calculate_actionability_scores 
app\tests\services\test_quality_gate_service.py::TestQualityGateService::test_calculate_quantification_scores 
[gw3][36m [ 12%] [0m[32mPASSED[0m app\tests\services\test_quality_gate_service.py::TestQualityGateService::test_calculate_quantification_scores 
app\tests\services\test_quality_gate_service.py::TestQualityGateService::test_calculate_relevance_with_context 
[gw3][36m [ 12%] [0m[32mPASSED[0m app\tests\services\test_quality_gate_service.py::TestQualityGateService::test_calculate_relevance_with_context 
app\tests\services\test_quality_gate_service.py::TestQualityGateService::test_calculate_completeness_by_content_type 
[gw3][36m [ 13%] [0m[32mPASSED[0m app\tests\services\test_quality_gate_service.py::TestQualityGateService::test_calculate_completeness_by_content_type 
app\tests\services\test_quality_gate_service.py::TestQualityGateService::test_calculate_novelty_with_redis 
[gw3][36m [ 13%] [0m[32mPASSED[0m app\tests\services\test_quality_gate_service.py::TestQualityGateService::test_calculate_novelty_with_redis 
app\tests\services\test_quality_gate_service.py::TestQualityGateService::test_calculate_clarity_scores 
[gw3][36m [ 13%] [0m[32mPASSED[0m app\tests\services\test_quality_gate_service.py::TestQualityGateService::test_calculate_clarity_scores 
app\tests\services\test_quality_gate_service.py::TestQualityGateService::test_calculate_redundancy_detection 
[gw3][36m [ 13%] [0m[32mPASSED[0m app\tests\services\test_quality_gate_service.py::TestQualityGateService::test_calculate_redundancy_detection 
app\tests\services\test_quality_gate_service.py::TestQualityGateService::test_calculate_hallucination_risk 
[gw3][36m [ 13%] [0m[32mPASSED[0m app\tests\services\test_quality_gate_service.py::TestQualityGateService::test_calculate_hallucination_risk 

================================== FAILURES ===================================
[31m[1m__________________ TestBaseRepository.test_repository_delete __________________[0m
[gw2] win32 -- Python 3.12.4 C:\Users\antho\miniconda3\python.exe
[1m[31mapp\tests\services\test_database_repositories.py[0m:579: in test_repository_delete
    [0m[94massert[39;49;00m retrieved [95mis[39;49;00m [94mNone[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: assert <AsyncMock id='2633751157248'> is None[0m
----------------------------- Captured log setup ------------------------------
[35mDEBUG   [0m asyncio:proactor_events.py:634 Using proactor: IocpProactor
---------------------------- Captured stderr call -----------------------------
2025-08-12 13:31:09.838 | ERROR    | app.services.database.unit_of_work:__aexit__:52 | UnitOfWork rolled back due to exception: assert <AsyncMock id='2633751157248'> is None
---------------------------- Captured log teardown ----------------------------
[35mDEBUG   [0m asyncio:proactor_events.py:634 Using proactor: IocpProactor
[31m[1m_____ TestApexOptimizerToolSelection.test_tool_selection_multi_objective ______[0m
[gw1] win32 -- Python 3.12.4 C:\Users\antho\miniconda3\python.exe
[1m[31mapp\tests\services\test_apex_optimizer_tool_selection.py[0m:437: in test_tool_selection_multi_objective
    [0mrequest = RequestModel(query=[33m"[39;49;00m[33mOptimize for both cost reduction and latency improvement[39;49;00m[33m"[39;49;00m)[90m[39;49;00m
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31mE   pydantic_core._pydantic_core.ValidationError: 2 validation errors for RequestModel[0m
[1m[31mE   user_id[0m
[1m[31mE     Field required [type=missing, input_value={'query': 'Optimize for b...nd latency improvement'}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.11/v/missing[0m
[1m[31mE   workloads[0m
[1m[31mE     Field required [type=missing, input_value={'query': 'Optimize for b...nd latency improvement'}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.11/v/missing[0m
----------------------------- Captured log setup ------------------------------
[35mDEBUG   [0m asyncio:proactor_events.py:634 Using proactor: IocpProactor
---------------------------- Captured log teardown ----------------------------
[35mDEBUG   [0m asyncio:proactor_events.py:634 Using proactor: IocpProactor
[36m[1m=========================== short test summary info ===========================[0m
[31mFAILED[0m app\tests\services\test_database_repositories.py::[1mTestBaseRepository::test_repository_delete[0m - AssertionError: assert <AsyncMock id='2633751157248'> is None
[31mFAILED[0m app\tests\services\test_apex_optimizer_tool_selection.py::[1mTestApexOptimizerToolSelection::test_tool_selection_multi_objective[0m - pydantic_core._pydantic_core.ValidationError: 2 validation errors for RequestModel
user_id
  Field required [type=missing, input_value={'query': 'Optimize for b...nd latency improvement'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
workloads
  Field required [type=missing, input_value={'query': 'Optimize for b...nd latency improvement'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
[31m!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 2 failures !!!!!!!!!!!!!!!!!!!!!!!!!![0m
!!!!!!!!!!!! xdist.dsession.Interrupted: stopping after 1 failures !!!!!!!!!!!!
[31m======================= [31m[1m2 failed[0m, [32m190 passed[0m[31m in 30.48s[0m[31m ========================[0m
================================================================================
[FAIL] TESTS FAILED with exit code 2 after 39.13s
[Coverage] Coverage Report: reports/coverage/html/index.html
================================================================================
FAIL __tests__/hooks/useWebSocketLifecycle.test.tsx
  \u25cf useWebSocket Hook Lifecycle  Hook Initialization and Cleanup  should initialize WebSocket connection on mount

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

    Ignored nodes: comments, script, style
    [36m<html>[39m
      [36m<head />[39m
      [36m<body>[39m
        [36m<div />[39m
      [36m</body>[39m
    [36m</html>[39m

    [0m [90m 88 |[39m
     [90m 89 |[39m       [36mawait[39m waitFor(() [33m=>[39m {
    [31m[1m>[22m[39m[90m 90 |[39m         expect(mockWebSocketService[33m.[39mconnect)[33m.[39mtoHaveBeenCalled()[33m;[39m
     [90m    |[39m                                              [31m[1m^[22m[39m
     [90m 91 |[39m       })[33m;[39m
     [90m 92 |[39m       
     [90m 93 |[39m       expect(result[33m.[39mcurrent[33m.[39mstatus)[33m.[39mtoBe([32m'CLOSED'[39m)[33m;[39m[0m

      at toHaveBeenCalled (__tests__/hooks/useWebSocketLifecycle.test.tsx:90:46)
      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)
      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)
      at node_modules/@testing-library/dom/dist/wait-for.js:82:9

  \u25cf useWebSocket Hook Lifecycle  Hook Initialization and Cleanup  should setup connection with token

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "token=test-token-123"

    Number of calls: 0

    Ignored nodes: comments, script, style
    [36m<html>[39m
      [36m<head />[39m
      [36m<body>[39m
        [36m<div />[39m
      [36m</body>[39m
    [36m</html>[39m

    [0m [90m  98 |[39m
     [90m  99 |[39m       [36mawait[39m waitFor(() [33m=>[39m {
    [31m[1m>[22m[39m[90m 100 |[39m         expect(mockWebSocketService[33m.[39mconnect)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                                              [31m[1m^[22m[39m
     [90m 101 |[39m           expect[33m.[39mstringContaining([32m'token=test-token-123'[39m)
     [90m 102 |[39m         )[33m;[39m
     [90m 103 |[39m       })[33m;[39m[0m

      at toHaveBeenCalledWith (__tests__/hooks/useWebSocketLifecycle.test.tsx:100:46)
      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)
      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)
      at node_modules/@testing-library/dom/dist/wait-for.js:82:9

  \u25cf useWebSocket Hook Lifecycle  Hook Initialization and Cleanup  should cleanup WebSocket connection on unmount

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

    [0m [90m 109 |[39m       unmount()[33m;[39m
     [90m 110 |[39m
    [31m[1m>[22m[39m[90m 111 |[39m       expect(mockWebSocketService[33m.[39mdisconnect)[33m.[39mtoHaveBeenCalled()[33m;[39m
     [90m     |[39m                                               [31m[1m^[22m[39m
     [90m 112 |[39m     })[33m;[39m
     [90m 113 |[39m
     [90m 114 |[39m     it([32m'should handle rapid mount/unmount cycles'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.toHaveBeenCalled (__tests__/hooks/useWebSocketLifecycle.test.tsx:111:47)

  \u25cf useWebSocket Hook Lifecycle  Hook Initialization and Cleanup  should handle rapid mount/unmount cycles

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 5
    Received number of calls: 0

    [0m [90m 125 |[39m
     [90m 126 |[39m       [90m// Should handle cleanup gracefully without errors[39m
    [31m[1m>[22m[39m[90m 127 |[39m       expect(mockWebSocketService[33m.[39mdisconnect)[33m.[39mtoHaveBeenCalledTimes([35m5[39m)[33m;[39m
     [90m     |[39m                                               [31m[1m^[22m[39m
     [90m 128 |[39m     })[33m;[39m
     [90m 129 |[39m
     [90m 130 |[39m     it([32m'should preserve connection across component re-renders'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.toHaveBeenCalledTimes (__tests__/hooks/useWebSocketLifecycle.test.tsx:127:47)

  \u25cf useWebSocket Hook Lifecycle  Hook Initialization and Cleanup  should preserve connection across component re-renders

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 1
    Received number of calls: 0

    Ignored nodes: comments, script, style
    [36m<html>[39m
      [36m<head />[39m
      [36m<body>[39m
        [36m<div />[39m
      [36m</body>[39m
    [36m</html>[39m

    [0m [90m 145 |[39m       [36mawait[39m waitFor(() [33m=>[39m {
     [90m 146 |[39m         [90m// Should only connect once[39m
    [31m[1m>[22m[39m[90m 147 |[39m         expect(mockWebSocketService[33m.[39mconnect)[33m.[39mtoHaveBeenCalledTimes([35m1[39m)[33m;[39m
     [90m     |[39m                                              [31m[1m^[22m[39m
     [90m 148 |[39m       })[33m;[39m
     [90m 149 |[39m     })[33m;[39m
     [90m 150 |[39m   })[33m;[39m[0m

      at toHaveBeenCalledTimes (__tests__/hooks/useWebSocketLifecycle.test.tsx:147:46)
      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)
      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)
      at node_modules/@testing-library/dom/dist/wait-for.js:82:9

  \u25cf useWebSocket Hook Lifecycle  Connection State Management  should track connection status

    expect(received).toBe(expected) // Object.is equality

    Expected: "CLOSED"
    Received: "OPEN"

    [0m [90m 155 |[39m
     [90m 156 |[39m       [90m// Initially closed[39m
    [31m[1m>[22m[39m[90m 157 |[39m       expect(result[33m.[39mcurrent[33m.[39mstatus)[33m.[39mtoBe([32m'CLOSED'[39m)[33m;[39m
     [90m     |[39m                                     [31m[1m^[22m[39m
     [90m 158 |[39m
     [90m 159 |[39m       [90m// Wait for the service to set up the callback[39m
     [90m 160 |[39m       [36mawait[39m waitFor(() [33m=>[39m {[0m

      at Object.toBe (__tests__/hooks/useWebSocketLifecycle.test.tsx:157:37)

  \u25cf useWebSocket Hook Lifecycle  Message Handling  should send messages through webSocketService

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"payload": {"data": "test"}, "type": "test"}

    Number of calls: 0

    [0m [90m 212 |[39m       })[33m;[39m
     [90m 213 |[39m
    [31m[1m>[22m[39m[90m 214 |[39m       expect(mockWebSocketService[33m.[39msendMessage)[33m.[39mtoHaveBeenCalledWith(testMessage)[33m;[39m
     [90m     |[39m                                                [31m[1m^[22m[39m
     [90m 215 |[39m     })[33m;[39m
     [90m 216 |[39m
     [90m 217 |[39m     it([32m'should accumulate received messages'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.toHaveBeenCalledWith (__tests__/hooks/useWebSocketLifecycle.test.tsx:214:48)

  \u25cf useWebSocket Hook Lifecycle  Message Handling  should accumulate received messages

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

    Ignored nodes: comments, script, style
    [36m<html>[39m
      [36m<head />[39m
      [36m<body>[39m
        [36m<div />[39m
      [36m</body>[39m
    [36m</html>[39m

    [0m [90m 222 |[39m       [90m// Wait for the service to set up the callback[39m
     [90m 223 |[39m       [36mawait[39m waitFor(() [33m=>[39m {
    [31m[1m>[22m[39m[90m 224 |[39m         expect(mockWebSocketService[33m.[39mconnect)[33m.[39mtoHaveBeenCalled()[33m;[39m
     [90m     |[39m                                              [31m[1m^[22m[39m
     [90m 225 |[39m       })[33m;[39m
     [90m 226 |[39m
     [90m 227 |[39m       [90m// Simulate receiving a message[39m[0m

      at toHaveBeenCalled (__tests__/hooks/useWebSocketLifecycle.test.tsx:224:46)
      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)
      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)
      at node_modules/@testing-library/dom/dist/wait-for.js:82:9

  \u25cf useWebSocket Hook Lifecycle  Error Handling and Edge Cases  should handle config fetch failure

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "Failed to fetch config and connect to WebSocket", Any<Error>

    Number of calls: 0

    Ignored nodes: comments, script, style
    [36m<html>[39m
      [36m<head />[39m
      [36m<body>[39m
        [36m<div />[39m
      [36m</body>[39m
    [36m</html>[39m

    [0m [90m 279 |[39m
     [90m 280 |[39m       [36mawait[39m waitFor(() [33m=>[39m {
    [31m[1m>[22m[39m[90m 281 |[39m         expect(consoleErrorSpy)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                                 [31m[1m^[22m[39m
     [90m 282 |[39m           [32m'Failed to fetch config and connect to WebSocket'[39m[33m,[39m
     [90m 283 |[39m           expect[33m.[39many([33mError[39m)
     [90m 284 |[39m         )[33m;[39m[0m

      at toHaveBeenCalledWith (__tests__/hooks/useWebSocketLifecycle.test.tsx:281:33)
      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)
      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)
      at node_modules/@testing-library/dom/dist/wait-for.js:82:9

FAIL __tests__/hooks/useWebSocket.test.tsx
  \u25cf useWebSocket  should return WebSocket context values

    expect(received).toEqual(expected) // deep equality

    - Expected  - 0
    + Received  + 5

    @@ -4,8 +4,13 @@
        "disconnect": [Function mockConstructor],
        "error": null,
        "isConnected": true,
        "lastMessage": null,
        "messageQueue": Array [],
    +   "messages": Array [],
        "reconnectAttempts": 0,
        "sendMessage": [Function mockConstructor],
    +   "status": "OPEN",
    +   "subscribe": [Function mockConstructor],
    +   "unsubscribe": [Function mockConstructor],
    +   "ws": null,
      }

    [0m [90m 56 |[39m     [36mconst[39m { result } [33m=[39m renderHook(() [33m=>[39m useWebSocket()[33m,[39m { wrapper })[33m;[39m
     [90m 57 |[39m     
    [31m[1m>[22m[39m[90m 58 |[39m     expect(result[33m.[39mcurrent)[33m.[39mtoEqual(mockContext)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 59 |[39m     expect(result[33m.[39mcurrent[33m.[39msendMessage)[33m.[39mtoBe(mockSendMessage)[33m;[39m
     [90m 60 |[39m     expect(result[33m.[39mcurrent[33m.[39misConnected)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 61 |[39m   })[33m;[39m[0m

      at Object.toEqual (__tests__/hooks/useWebSocket.test.tsx:58:28)

  \u25cf useWebSocket  should handle null context gracefully

    expect(received).toBeNull()

    Received: {"connect": [Function mockConstructor], "connectionState": "connected", "disconnect": [Function mockConstructor], "error": null, "isConnected": true, "lastMessage": null, "messageQueue": [], "messages": [], "reconnectAttempts": 0, "sendMessage": [Function mockConstructor], "status": "OPEN", "subscribe": [Function mockConstructor], "unsubscribe": [Function mockConstructor], "ws": null}

    [0m [90m 68 |[39m     [36mconst[39m { result } [33m=[39m renderHook(() [33m=>[39m useWebSocket()[33m,[39m { wrapper })[33m;[39m
     [90m 69 |[39m     
    [31m[1m>[22m[39m[90m 70 |[39m     expect(result[33m.[39mcurrent)[33m.[39mtoBeNull()[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 71 |[39m   })[33m;[39m
     [90m 72 |[39m
     [90m 73 |[39m   it([32m'should call sendMessage when invoked'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.toBeNull (__tests__/hooks/useWebSocket.test.tsx:70:28)

  \u25cf useWebSocket  should call sendMessage when invoked

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"payload": {"data": "test"}, "type": "test"}

    Number of calls: 0

    [0m [90m 79 |[39m     result[33m.[39mcurrent[33m.[39msendMessage(message)[33m;[39m
     [90m 80 |[39m     
    [31m[1m>[22m[39m[90m 81 |[39m     expect(mockSendMessage)[33m.[39mtoHaveBeenCalledWith(message)[33m;[39m
     [90m    |[39m                             [31m[1m^[22m[39m
     [90m 82 |[39m     expect(mockSendMessage)[33m.[39mtoHaveBeenCalledTimes([35m1[39m)[33m;[39m
     [90m 83 |[39m   })[33m;[39m
     [90m 84 |[39m[0m

      at Object.toHaveBeenCalledWith (__tests__/hooks/useWebSocket.test.tsx:81:29)

  \u25cf useWebSocket  should reflect connection state changes

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: true

    [0m [90m 100 |[39m     rerender()[33m;[39m
     [90m 101 |[39m     
    [31m[1m>[22m[39m[90m 102 |[39m     expect(result[33m.[39mcurrent[33m.[39misConnected)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
     [90m     |[39m                                        [31m[1m^[22m[39m
     [90m 103 |[39m     expect(result[33m.[39mcurrent[33m.[39mconnectionState)[33m.[39mtoBe([32m'disconnected'[39m)[33m;[39m
     [90m 104 |[39m   })[33m;[39m
     [90m 105 |[39m[0m

      at Object.toBe (__tests__/hooks/useWebSocket.test.tsx:102:40)

  \u25cf useWebSocket  should handle error states

    expect(received).toEqual(expected) // deep equality

    Expected: [Error: WebSocket connection failed]
    Received: null

    [0m [90m 118 |[39m     [36mconst[39m { result } [33m=[39m renderHook(() [33m=>[39m useWebSocket()[33m,[39m { wrapper })[33m;[39m
     [90m 119 |[39m     
    [31m[1m>[22m[39m[90m 120 |[39m     expect(result[33m.[39mcurrent[33m.[39merror)[33m.[39mtoEqual([36mnew[39m [33mError[39m([32m'WebSocket connection failed'[39m))[33m;[39m
     [90m     |[39m                                  [31m[1m^[22m[39m
     [90m 121 |[39m     expect(result[33m.[39mcurrent[33m.[39mconnectionState)[33m.[39mtoBe([32m'error'[39m)[33m;[39m
     [90m 122 |[39m   })[33m;[39m
     [90m 123 |[39m[0m

      at Object.toEqual (__tests__/hooks/useWebSocket.test.tsx:120:34)

  \u25cf useWebSocket  should handle reconnection attempts

    expect(received).toBe(expected) // Object.is equality

    Expected: 3
    Received: 0

    [0m [90m 136 |[39m     [36mconst[39m { result } [33m=[39m renderHook(() [33m=>[39m useWebSocket()[33m,[39m { wrapper })[33m;[39m
     [90m 137 |[39m     
    [31m[1m>[22m[39m[90m 138 |[39m     expect(result[33m.[39mcurrent[33m.[39mreconnectAttempts)[33m.[39mtoBe([35m3[39m)[33m;[39m
     [90m     |[39m                                              [31m[1m^[22m[39m
     [90m 139 |[39m     expect(result[33m.[39mcurrent[33m.[39mconnectionState)[33m.[39mtoBe([32m'reconnecting'[39m)[33m;[39m
     [90m 140 |[39m   })[33m;[39m
     [90m 141 |[39m[0m

      at Object.toBe (__tests__/hooks/useWebSocket.test.tsx:138:46)

  \u25cf useWebSocket  should handle message queue

    expect(received).toHaveLength(expected)

    Expected length: 2
    Received length: 0
    Received array:  []

    [0m [90m 155 |[39m     [36mconst[39m { result } [33m=[39m renderHook(() [33m=>[39m useWebSocket()[33m,[39m { wrapper })[33m;[39m
     [90m 156 |[39m     
    [31m[1m>[22m[39m[90m 157 |[39m     expect(result[33m.[39mcurrent[33m.[39mmessageQueue)[33m.[39mtoHaveLength([35m2[39m)[33m;[39m
     [90m     |[39m                                         [31m[1m^[22m[39m
     [90m 158 |[39m     expect(result[33m.[39mcurrent[33m.[39mmessageQueue[[35m0[39m][33m.[39mtype)[33m.[39mtoBe([32m'message1'[39m)[33m;[39m
     [90m 159 |[39m   })[33m;[39m
     [90m 160 |[39m[0m

      at Object.toHaveLength (__tests__/hooks/useWebSocket.test.tsx:157:41)

  \u25cf useWebSocket  should call connect method

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 1
    Received number of calls: 0

    [0m [90m 166 |[39m     result[33m.[39mcurrent[33m.[39mconnect()[33m;[39m
     [90m 167 |[39m     
    [31m[1m>[22m[39m[90m 168 |[39m     expect(mockConnect)[33m.[39mtoHaveBeenCalledTimes([35m1[39m)[33m;[39m
     [90m     |[39m                         [31m[1m^[22m[39m
     [90m 169 |[39m   })[33m;[39m
     [90m 170 |[39m
     [90m 171 |[39m   it([32m'should call disconnect method'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.toHaveBeenCalledTimes (__tests__/hooks/useWebSocket.test.tsx:168:25)

  \u25cf useWebSocket  should call disconnect method

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 1
    Received number of calls: 0

    [0m [90m 176 |[39m     result[33m.[39mcurrent[33m.[39mdisconnect()[33m;[39m
     [90m 177 |[39m     
    [31m[1m>[22m[39m[90m 178 |[39m     expect(mockDisconnect)[33m.[39mtoHaveBeenCalledTimes([35m1[39m)[33m;[39m
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 179 |[39m   })[33m;[39m
     [90m 180 |[39m
     [90m 181 |[39m   it([32m'should handle last message updates'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.toHaveBeenCalledTimes (__tests__/hooks/useWebSocket.test.tsx:178:28)

  \u25cf useWebSocket  should handle last message updates

    expect(received).toBe(expected) // Object.is equality

    Expected: "chat_message"
    Received: undefined

    [0m [90m 196 |[39m     
     [90m 197 |[39m     expect(result[33m.[39mcurrent[33m.[39mlastMessage)[33m.[39mtoBeDefined()[33m;[39m
    [31m[1m>[22m[39m[90m 198 |[39m     expect(result[33m.[39mcurrent[33m.[39mlastMessage[33m?[39m[33m.[39mtype)[33m.[39mtoBe([32m'chat_message'[39m)[33m;[39m
     [90m     |[39m                                              [31m[1m^[22m[39m
     [90m 199 |[39m     expect(result[33m.[39mcurrent[33m.[39mlastMessage[33m?[39m[33m.[39mpayload)[33m.[39mtoEqual({ text[33m:[39m [32m'Hello'[39m })[33m;[39m
     [90m 200 |[39m   })[33m;[39m
     [90m 201 |[39m })[33m;[39m[0m

      at Object.toBe (__tests__/hooks/useWebSocket.test.tsx:198:46)

FAIL __tests__/components/ChatHistory.test.tsx
  \u25cf ChatHistory Component  History Loading and Pagination  should load initial message history on mount

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  History Loading and Pagination  should display loading state during initial load

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  History Loading and Pagination  should display message history once loaded

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  History Loading and Pagination  should load more history when scrolled to top

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  History Loading and Pagination  should show "Load More" button when more history available

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  History Loading and Pagination  should handle "Load More" button click

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  History Loading and Pagination  should hide "Load More" when no more history available

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  History Loading and Pagination  should show loading state for pagination

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  History Loading and Pagination  should preserve scroll position when loading more history

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  History Loading and Pagination  should handle thread switching

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  History Loading and Pagination  should batch load requests to prevent excessive API calls

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  Message Display and Formatting  should display messages in chronological order

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  Message Display and Formatting  should format timestamps correctly

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  Message Display and Formatting  should group messages by date

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  Message Display and Formatting  should highlight search results

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  Message Display and Formatting  should show message metadata on hover

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  Message Display and Formatting  should render markdown content correctly

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  Message Display and Formatting  should handle empty message content gracefully

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  Message Search and Filtering  should provide search functionality

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  Message Search and Filtering  should display search results

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  Message Search and Filtering  should clear search results

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  Message Search and Filtering  should filter by message type

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  Message Search and Filtering  should filter by date range

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  Message Search and Filtering  should debounce search input

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  Message Management Actions  should allow deleting messages

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  Message Management Actions  should allow copying message content

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  Message Management Actions  should allow regenerating assistant messages

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  Message Management Actions  should show message edit functionality

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  Message Management Actions  should handle bulk message operations

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  Error Handling and Recovery  should display error state when history loading fails

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  Error Handling and Recovery  should allow retrying failed history loads

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  Error Handling and Recovery  should handle partial load failures

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  Error Handling and Recovery  should handle offline state gracefully

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  Error Handling and Recovery  should show cached messages when offline

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  Error Handling and Recovery  should handle malformed message data

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  Performance and Virtualization  should virtualize long message lists for performance

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  Performance and Virtualization  should cleanup observers on unmount

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  Performance and Virtualization  should optimize re-renders with message memoization

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  Accessibility  should have proper ARIA labels and roles

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  Accessibility  should support keyboard navigation

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  Accessibility  should announce dynamic content changes

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  Accessibility  should provide meaningful alt text for message actions

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

PASS __tests__/components/ThinkingIndicator.test.tsx
FAIL __tests__/components/chat/MessageInput.test.tsx
  \u25cf MessageInput  Input validation and sanitization  should trim whitespace from messages before sending

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Input validation and sanitization  should not send empty messages

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Input validation and sanitization  should enforce character limit

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Input validation and sanitization  should show character count warning at 80% capacity

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Input validation and sanitization  should sanitize HTML in messages

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Input validation and sanitization  should handle special characters correctly

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Input validation and sanitization  should handle unicode and emoji characters

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Input validation and sanitization  should prevent sending when processing

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Input validation and sanitization  should prevent sending when not authenticated

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Input validation and sanitization  should handle rapid successive sends correctly

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  File upload handling  should render file attachment button

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  File upload handling  should disable file attachment when processing

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  File upload handling  should show file attachment tooltip

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  File upload handling  should handle file attachment button click

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  File upload handling  should disable file attachment when not authenticated

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Keyboard shortcuts  should send message on Enter key

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Keyboard shortcuts  should insert newline on Shift+Enter

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Keyboard shortcuts  should navigate message history with arrow keys

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Keyboard shortcuts  should only navigate history when input is empty

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Keyboard shortcuts  should handle Ctrl+Enter for special actions

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Keyboard shortcuts  should show keyboard shortcuts hint

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Keyboard shortcuts  should hide keyboard shortcuts hint when typing

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Auto-resize textarea behavior  should start with single row

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Auto-resize textarea behavior  should expand textarea as content grows

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Auto-resize textarea behavior  should respect maximum rows limit

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Auto-resize textarea behavior  should reset to single row after sending

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Auto-resize textarea behavior  should handle paste of multiline content

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Auto-resize textarea behavior  should maintain scroll position during resize

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Voice input and emoji features  should render voice input button

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Voice input and emoji features  should disable voice input when processing

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Voice input and emoji features  should show voice input tooltip

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Voice input and emoji features  should handle voice button click

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Voice input and emoji features  should disable voice input when not authenticated

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Thread management  should create new thread if none exists

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Thread management  should use existing thread if available

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Thread management  should handle thread creation failure

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Thread management  should truncate long messages for thread title

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Send button states  should show send icon when not sending

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Send button states  should show loading spinner when sending

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Send button states  should disable send button when input is empty

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Send button states  should enable send button when input has content

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Send button states  should handle send button click

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Message history  should add sent messages to history

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Message history  should not add empty messages to history

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Message history  should maintain history across component lifecycle

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Focus management  should auto-focus on mount when authenticated

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Focus management  should not auto-focus when not authenticated

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Focus management  should maintain focus after sending message

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  UI state indicators  should show appropriate placeholder when authenticated

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  UI state indicators  should show sign-in prompt when not authenticated

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  UI state indicators  should show processing indicator when agent is thinking

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  UI state indicators  should show character limit warning in placeholder

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Accessibility  should have proper ARIA labels

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Accessibility  should have ARIA describedby for character count

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Accessibility  should handle keyboard navigation properly

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

FAIL __tests__/hooks/useAgent.test.tsx
  \u25cf useAgent  should send message successfully

    expect(received).toHaveBeenCalled()

    Matcher error: received value must be a mock or spy function

    Received has value: undefined

    [0m [90m  99 |[39m     })[33m;[39m
     [90m 100 |[39m     
    [31m[1m>[22m[39m[90m 101 |[39m     expect(mockWebSocketInstance[33m?[39m[33m.[39msend)[33m.[39mtoHaveBeenCalled()[33m;[39m
     [90m     |[39m                                         [31m[1m^[22m[39m
     [90m 102 |[39m     [36mconst[39m sentData [33m=[39m [33mJSON[39m[33m.[39mparse(mockWebSocketInstance[33m?[39m[33m.[39msend[33m.[39mmock[33m.[39mcalls[[35m0[39m][[35m0[39m])[33m;[39m
     [90m 103 |[39m     expect(sentData[33m.[39mtype)[33m.[39mtoBe([32m'user_message'[39m)[33m;[39m
     [90m 104 |[39m     expect(sentData[33m.[39mdata[33m.[39mtext)[33m.[39mtoBe([32m'Test message'[39m)[33m;[39m[0m

      at Object.toHaveBeenCalled (__tests__/hooks/useAgent.test.tsx:101:41)

  \u25cf useAgent  should handle API error

    TypeError: Cannot set properties of null (setting 'readyState')

    [0m [90m 115 |[39m     [90m// Simulate WebSocket error[39m
     [90m 116 |[39m     act(() [33m=>[39m {
    [31m[1m>[22m[39m[90m 117 |[39m       mockWebSocketInstance[33m.[39mreadyState [33m=[39m [33mWebSocket[39m[33m.[39m[33mCLOSED[39m[33m;[39m
     [90m     |[39m                                       [31m[1m^[22m[39m
     [90m 118 |[39m       result[33m.[39mcurrent[33m.[39msendUserMessage([32m'Test message'[39m)[33m;[39m
     [90m 119 |[39m     })[33m;[39m
     [90m 120 |[39m     [0m

      at __tests__/hooks/useAgent.test.tsx:117:39
      at node_modules/@testing-library/react/dist/act-compat.js:48:24
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:789:22)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at Object.<anonymous> (__tests__/hooks/useAgent.test.tsx:116:8)

  \u25cf useAgent  should handle network error

    expect(received).not.toHaveBeenCalled()

    Matcher error: received value must be a mock or spy function

    Received has value: undefined

    [0m [90m 139 |[39m     
     [90m 140 |[39m     [90m// Message should not be sent during error state[39m
    [31m[1m>[22m[39m[90m 141 |[39m     expect(mockWebSocketInstance[33m?[39m[33m.[39msend)[33m.[39mnot[33m.[39mtoHaveBeenCalled()[33m;[39m
     [90m     |[39m                                             [31m[1m^[22m[39m
     [90m 142 |[39m   })[33m;[39m
     [90m 143 |[39m
     [90m 144 |[39m   it([32m'should set loading state during message send'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.toHaveBeenCalled (__tests__/hooks/useAgent.test.tsx:141:45)

  \u25cf useAgent  should set loading state during message send

    expect(received).toHaveBeenCalled()

    Matcher error: received value must be a mock or spy function

    Received has value: undefined

    [0m [90m 154 |[39m     })[33m;[39m
     [90m 155 |[39m     
    [31m[1m>[22m[39m[90m 156 |[39m     expect(mockWebSocketInstance[33m?[39m[33m.[39msend)[33m.[39mtoHaveBeenCalled()[33m;[39m
     [90m     |[39m                                         [31m[1m^[22m[39m
     [90m 157 |[39m   })[33m;[39m
     [90m 158 |[39m
     [90m 159 |[39m   it([32m'should clear messages'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.toHaveBeenCalled (__tests__/hooks/useAgent.test.tsx:156:41)

  \u25cf useAgent  should handle empty message

    expect(received).toHaveBeenCalled()

    Matcher error: received value must be a mock or spy function

    Received has value: undefined

    [0m [90m 185 |[39m     
     [90m 186 |[39m     [90m// Empty message should still be sent (hook doesn't validate)[39m
    [31m[1m>[22m[39m[90m 187 |[39m     expect(mockWebSocketInstance[33m?[39m[33m.[39msend)[33m.[39mtoHaveBeenCalled()[33m;[39m
     [90m     |[39m                                         [31m[1m^[22m[39m
     [90m 188 |[39m   })[33m;[39m
     [90m 189 |[39m
     [90m 190 |[39m   it([32m'should handle whitespace-only message'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.toHaveBeenCalled (__tests__/hooks/useAgent.test.tsx:187:41)

  \u25cf useAgent  should handle whitespace-only message

    expect(received).toHaveBeenCalled()

    Matcher error: received value must be a mock or spy function

    Received has value: undefined

    [0m [90m 201 |[39m     
     [90m 202 |[39m     [90m// Whitespace message should still be sent (hook doesn't validate)[39m
    [31m[1m>[22m[39m[90m 203 |[39m     expect(mockWebSocketInstance[33m?[39m[33m.[39msend)[33m.[39mtoHaveBeenCalled()[33m;[39m
     [90m     |[39m                                         [31m[1m^[22m[39m
     [90m 204 |[39m   })[33m;[39m
     [90m 205 |[39m
     [90m 206 |[39m   it([32m'should maintain message history'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.toHaveBeenCalled (__tests__/hooks/useAgent.test.tsx:203:41)

  \u25cf useAgent  should maintain message history

    expect(received).toHaveBeenCalledTimes(expected)

    Matcher error: received value must be a mock or spy function

    Received has value: undefined

    [0m [90m 222 |[39m     })[33m;[39m
     [90m 223 |[39m     
    [31m[1m>[22m[39m[90m 224 |[39m     expect(mockWebSocketInstance[33m?[39m[33m.[39msend)[33m.[39mtoHaveBeenCalledTimes([35m2[39m)[33m;[39m
     [90m     |[39m                                         [31m[1m^[22m[39m
     [90m 225 |[39m   })[33m;[39m
     [90m 226 |[39m
     [90m 227 |[39m   it([32m'should handle concurrent messages'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.toHaveBeenCalledTimes (__tests__/hooks/useAgent.test.tsx:224:41)

  \u25cf useAgent  should handle concurrent messages

    expect(received).toHaveBeenCalledTimes(expected)

    Matcher error: received value must be a mock or spy function

    Received has value: undefined

    [0m [90m 240 |[39m     })[33m;[39m
     [90m 241 |[39m     
    [31m[1m>[22m[39m[90m 242 |[39m     expect(mockWebSocketInstance[33m?[39m[33m.[39msend)[33m.[39mtoHaveBeenCalledTimes([35m3[39m)[33m;[39m
     [90m     |[39m                                         [31m[1m^[22m[39m
     [90m 243 |[39m   })[33m;[39m
     [90m 244 |[39m
     [90m 245 |[39m   it([32m'should reset error on successful message'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.toHaveBeenCalledTimes (__tests__/hooks/useAgent.test.tsx:242:41)

  \u25cf useAgent  should reset error on successful message

    TypeError: Cannot set properties of null (setting 'readyState')

    [0m [90m 260 |[39m     [90m// Then reconnect and send message successfully[39m
     [90m 261 |[39m     act(() [33m=>[39m {
    [31m[1m>[22m[39m[90m 262 |[39m       mockWebSocketInstance[33m.[39mreadyState [33m=[39m [33mWebSocket[39m[33m.[39m[33mOPEN[39m[33m;[39m
     [90m     |[39m                                       [31m[1m^[22m[39m
     [90m 263 |[39m       result[33m.[39mcurrent[33m.[39msendUserMessage([32m'Test message'[39m)[33m;[39m
     [90m 264 |[39m     })[33m;[39m
     [90m 265 |[39m     [0m

      at __tests__/hooks/useAgent.test.tsx:262:39
      at node_modules/@testing-library/react/dist/act-compat.js:48:24
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:789:22)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at Object.<anonymous> (__tests__/hooks/useAgent.test.tsx:261:8)

PASS __tests__/components/chat/ExamplePrompts.test.tsx
FAIL __tests__/components/AgentStatusPanel.test.tsx
  \u25cf AgentStatusPanel Component  Agent Status Display  should render all agent status cards

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 58 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 59 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 61 |[39m   })[33m;[39m
     [90m 62 |[39m
     [90m 63 |[39m   afterEach(() [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/AgentStatusPanel.test.tsx:60:33)

  \u25cf AgentStatusPanel Component  Agent Status Display  should display idle status by default

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 58 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 59 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 61 |[39m   })[33m;[39m
     [90m 62 |[39m
     [90m 63 |[39m   afterEach(() [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/AgentStatusPanel.test.tsx:60:33)

  \u25cf AgentStatusPanel Component  Agent Status Display  should update status when agents become active

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 58 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 59 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 61 |[39m   })[33m;[39m
     [90m 62 |[39m
     [90m 63 |[39m   afterEach(() [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/AgentStatusPanel.test.tsx:60:33)

  \u25cf AgentStatusPanel Component  Agent Status Display  should show progress bars for active agents

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 58 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 59 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 61 |[39m   })[33m;[39m
     [90m 62 |[39m
     [90m 63 |[39m   afterEach(() [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/AgentStatusPanel.test.tsx:60:33)

  \u25cf AgentStatusPanel Component  Agent Status Display  should display current task descriptions

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 58 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 59 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 61 |[39m   })[33m;[39m
     [90m 62 |[39m
     [90m 63 |[39m   afterEach(() [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/AgentStatusPanel.test.tsx:60:33)

  \u25cf AgentStatusPanel Component  Agent Status Display  should show error states with appropriate styling

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 58 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 59 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 61 |[39m   })[33m;[39m
     [90m 62 |[39m
     [90m 63 |[39m   afterEach(() [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/AgentStatusPanel.test.tsx:60:33)

  \u25cf AgentStatusPanel Component  Agent Status Display  should display last activity timestamps

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 58 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 59 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 61 |[39m   })[33m;[39m
     [90m 62 |[39m
     [90m 63 |[39m   afterEach(() [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/AgentStatusPanel.test.tsx:60:33)

  \u25cf AgentStatusPanel Component  Agent Status Display  should handle agents in queue state

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 58 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 59 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 61 |[39m   })[33m;[39m
     [90m 62 |[39m
     [90m 63 |[39m   afterEach(() [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/AgentStatusPanel.test.tsx:60:33)

  \u25cf AgentStatusPanel Component  Real-time Updates  should update agent status from WebSocket messages

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 58 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 59 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 61 |[39m   })[33m;[39m
     [90m 62 |[39m
     [90m 63 |[39m   afterEach(() [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/AgentStatusPanel.test.tsx:60:33)

  \u25cf AgentStatusPanel Component  Real-time Updates  should handle batch status updates

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 58 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 59 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 61 |[39m   })[33m;[39m
     [90m 62 |[39m
     [90m 63 |[39m   afterEach(() [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/AgentStatusPanel.test.tsx:60:33)

  \u25cf AgentStatusPanel Component  Real-time Updates  should animate status transitions smoothly

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 58 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 59 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 61 |[39m   })[33m;[39m
     [90m 62 |[39m
     [90m 63 |[39m   afterEach(() [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/AgentStatusPanel.test.tsx:60:33)

  \u25cf AgentStatusPanel Component  Real-time Updates  should update progress bars smoothly

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 58 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 59 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 61 |[39m   })[33m;[39m
     [90m 62 |[39m
     [90m 63 |[39m   afterEach(() [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/AgentStatusPanel.test.tsx:60:33)

  \u25cf AgentStatusPanel Component  Real-time Updates  should refresh timestamps periodically

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 58 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 59 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 61 |[39m   })[33m;[39m
     [90m 62 |[39m
     [90m 63 |[39m   afterEach(() [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/AgentStatusPanel.test.tsx:60:33)

  \u25cf AgentStatusPanel Component  Real-time Updates  should handle rapid status changes without flickering

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 58 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 59 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 61 |[39m   })[33m;[39m
     [90m 62 |[39m
     [90m 63 |[39m   afterEach(() [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/AgentStatusPanel.test.tsx:60:33)

  \u25cf AgentStatusPanel Component  Real-time Updates  should debounce frequent updates

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 58 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 59 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 61 |[39m   })[33m;[39m
     [90m 62 |[39m
     [90m 63 |[39m   afterEach(() [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/AgentStatusPanel.test.tsx:60:33)

  \u25cf AgentStatusPanel Component  System Metrics Integration  should display overall system health

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 58 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 59 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 61 |[39m   })[33m;[39m
     [90m 62 |[39m
     [90m 63 |[39m   afterEach(() [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/AgentStatusPanel.test.tsx:60:33)

  \u25cf AgentStatusPanel Component  System Metrics Integration  should show performance metrics

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 58 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 59 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 61 |[39m   })[33m;[39m
     [90m 62 |[39m
     [90m 63 |[39m   afterEach(() [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/AgentStatusPanel.test.tsx:60:33)

  \u25cf AgentStatusPanel Component  System Metrics Integration  should highlight performance issues

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 58 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 59 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 61 |[39m   })[33m;[39m
     [90m 62 |[39m
     [90m 63 |[39m   afterEach(() [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/AgentStatusPanel.test.tsx:60:33)

  \u25cf AgentStatusPanel Component  User Interactions  should expand agent details on click

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 58 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 59 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 61 |[39m   })[33m;[39m
     [90m 62 |[39m
     [90m 63 |[39m   afterEach(() [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/AgentStatusPanel.test.tsx:60:33)

  \u25cf AgentStatusPanel Component  User Interactions  should allow pausing individual agents

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 58 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 59 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 61 |[39m   })[33m;[39m
     [90m 62 |[39m
     [90m 63 |[39m   afterEach(() [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/AgentStatusPanel.test.tsx:60:33)

  \u25cf AgentStatusPanel Component  User Interactions  should show agent logs when requested

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 58 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 59 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 61 |[39m   })[33m;[39m
     [90m 62 |[39m
     [90m 63 |[39m   afterEach(() [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/AgentStatusPanel.test.tsx:60:33)

  \u25cf AgentStatusPanel Component  User Interactions  should filter agents by status

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 58 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 59 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 61 |[39m   })[33m;[39m
     [90m 62 |[39m
     [90m 63 |[39m   afterEach(() [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/AgentStatusPanel.test.tsx:60:33)

  \u25cf AgentStatusPanel Component  User Interactions  should support bulk agent operations

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 58 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 59 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 61 |[39m   })[33m;[39m
     [90m 62 |[39m
     [90m 63 |[39m   afterEach(() [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/AgentStatusPanel.test.tsx:60:33)

  \u25cf AgentStatusPanel Component  Error Handling and Recovery  should handle WebSocket disconnection

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 58 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 59 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 61 |[39m   })[33m;[39m
     [90m 62 |[39m
     [90m 63 |[39m   afterEach(() [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/AgentStatusPanel.test.tsx:60:33)

  \u25cf AgentStatusPanel Component  Error Handling and Recovery  should show stale data warning

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 58 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 59 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 61 |[39m   })[33m;[39m
     [90m 62 |[39m
     [90m 63 |[39m   afterEach(() [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/AgentStatusPanel.test.tsx:60:33)

  \u25cf AgentStatusPanel Component  Error Handling and Recovery  should handle agent status fetch failures

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 58 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 59 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 61 |[39m   })[33m;[39m
     [90m 62 |[39m
     [90m 63 |[39m   afterEach(() [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/AgentStatusPanel.test.tsx:60:33)

  \u25cf AgentStatusPanel Component  Error Handling and Recovery  should maintain functionality during partial failures

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 58 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 59 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 61 |[39m   })[33m;[39m
     [90m 62 |[39m
     [90m 63 |[39m   afterEach(() [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/AgentStatusPanel.test.tsx:60:33)

  \u25cf AgentStatusPanel Component  Performance and Optimization  should memoize agent cards to prevent unnecessary rerenders

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 58 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 59 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 61 |[39m   })[33m;[39m
     [90m 62 |[39m
     [90m 63 |[39m   afterEach(() [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/AgentStatusPanel.test.tsx:60:33)

  \u25cf AgentStatusPanel Component  Performance and Optimization  should handle large numbers of status updates efficiently

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 58 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 59 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 61 |[39m   })[33m;[39m
     [90m 62 |[39m
     [90m 63 |[39m   afterEach(() [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/AgentStatusPanel.test.tsx:60:33)

  \u25cf AgentStatusPanel Component  Performance and Optimization  should cleanup timers and listeners on unmount

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 58 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 59 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 61 |[39m   })[33m;[39m
     [90m 62 |[39m
     [90m 63 |[39m   afterEach(() [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/AgentStatusPanel.test.tsx:60:33)

  \u25cf AgentStatusPanel Component  Accessibility  should have proper ARIA labels and roles

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 58 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 59 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 61 |[39m   })[33m;[39m
     [90m 62 |[39m
     [90m 63 |[39m   afterEach(() [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/AgentStatusPanel.test.tsx:60:33)

  \u25cf AgentStatusPanel Component  Accessibility  should announce status changes to screen readers

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 58 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 59 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 61 |[39m   })[33m;[39m
     [90m 62 |[39m
     [90m 63 |[39m   afterEach(() [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/AgentStatusPanel.test.tsx:60:33)

  \u25cf AgentStatusPanel Component  Accessibility  should support keyboard navigation

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 58 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 59 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 61 |[39m   })[33m;[39m
     [90m 62 |[39m
     [90m 63 |[39m   afterEach(() [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/AgentStatusPanel.test.tsx:60:33)

FAIL __tests__/components/ChatSidebar.test.tsx
  \u25cf ChatSidebar Component  Thread List Display  should render thread list when threads are available

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Thread List Display  should display thread metadata correctly

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Thread List Display  should show empty state when no threads exist

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Thread List Display  should display loading state while fetching threads

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Thread List Display  should show error state when thread loading fails

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Thread List Display  should group threads by date

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Thread List Display  should sort threads by last activity

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Thread List Display  should truncate long thread titles and messages

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Thread List Display  should show thread status indicators

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Thread Navigation and Switching  should switch to selected thread

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Thread Navigation and Switching  should highlight active thread correctly

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Thread Navigation and Switching  should support keyboard navigation

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Thread Navigation and Switching  should show thread preview on hover

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Thread Navigation and Switching  should handle rapid thread switching

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Thread Navigation and Switching  should persist navigation state across page reloads

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Thread Management Operations  should create new thread

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Thread Management Operations  should show thread creation dialog

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Thread Management Operations  should rename existing thread

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Thread Management Operations  should delete thread with confirmation

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Thread Management Operations  should archive and unarchive threads

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Thread Management Operations  should handle bulk thread operations

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Thread Management Operations  should export thread data

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Thread Search and Filtering  should provide search functionality

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Thread Search and Filtering  should filter threads based on search query

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Thread Search and Filtering  should clear search results

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Thread Search and Filtering  should filter by thread status

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Thread Search and Filtering  should filter by date range

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Thread Search and Filtering  should support advanced search with filters

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Thread Search and Filtering  should show search suggestions

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Error Handling and Recovery  should handle thread switching failures

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Error Handling and Recovery  should retry failed operations

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Error Handling and Recovery  should handle network disconnection gracefully

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Error Handling and Recovery  should handle partial load failures

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Performance and Optimization  should virtualize large thread lists

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Performance and Optimization  should debounce search input

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Performance and Optimization  should cleanup listeners on unmount

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Accessibility  should have proper ARIA labels and roles

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Accessibility  should support screen reader announcements

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Accessibility  should support high contrast mode

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Accessibility  should provide keyboard shortcuts info

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

PASS __tests__/auth/components.test.tsx
PASS __tests__/store/chatStore.test.ts
PASS __tests__/components/chat/layers/FastLayer.test.tsx
PASS __tests__/components/chat/ChatHeader.test.tsx
PASS __tests__/components/chat/MessageItem.test.tsx
PASS __tests__/components/ui/select.test.tsx
PASS __tests__/hooks/useChatWebSocket.test.ts
PASS __tests__/components/ChatWindow.test.tsx
PASS __tests__/components/SubAgentStatus.test.tsx
FAIL __tests__/hooks/additionalHooks.test.tsx
  \u25cf Console

    console.error
      Failed to establish WebSocket connection: TypeError: Cannot read properties of null (reading 'close')
          at close (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\hooks\useDemoWebSocket.ts:46:23)
          at connect (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\hooks\useDemoWebSocket.ts:160:5)
          at Object.react-stack-bottom-frame (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\react-dom\cjs\react-dom-client.development.js:23949:20)
          at runWithFiberInDEV (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\react-dom\cjs\react-dom-client.development.js:1522:13)
          at commitHookEffectListMount (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\react-dom\cjs\react-dom-client.development.js:11905:29)
          at commitHookPassiveMountEffects (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\react-dom\cjs\react-dom-client.development.js:12028:11)
          at commitPassiveMountOnFiber (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\react-dom\cjs\react-dom-client.development.js:13841:13)
          at recursivelyTraversePassiveMountEffects (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\react-dom\cjs\react-dom-client.development.js:13815:11)
          at commitPassiveMountOnFiber (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\react-dom\cjs\react-dom-client.development.js:13957:11)
          at recursivelyTraversePassiveMountEffects (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\react-dom\cjs\react-dom-client.development.js:13815:11)
          at commitPassiveMountOnFiber (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\react-dom\cjs\react-dom-client.development.js:13834:11)
          at recursivelyTraversePassiveMountEffects (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\react-dom\cjs\react-dom-client.development.js:13815:11)
          at commitPassiveMountOnFiber (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\react-dom\cjs\react-dom-client.development.js:13957:11)
          at recursivelyTraversePassiveMountEffects (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\react-dom\cjs\react-dom-client.development.js:13815:11)
          at commitPassiveMountOnFiber (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\react-dom\cjs\react-dom-client.development.js:13834:11)
          at recursivelyTraversePassiveMountEffects (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\react-dom\cjs\react-dom-client.development.js:13815:11)
          at commitPassiveMountOnFiber (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\react-dom\cjs\react-dom-client.development.js:13853:11)
          at flushPassiveEffects (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\react-dom\cjs\react-dom-client.development.js:15737:9)
          at C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\react-dom\cjs\react-dom-client.development.js:15379:15
          at flushActQueue (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\react\cjs\react.development.js:566:34)
          at process.env.NODE_ENV.exports.act (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\react\cjs\react.development.js:859:10)
          at C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\@testing-library\react\dist\act-compat.js:47:25
          at renderRoot (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\@testing-library\react\dist\pure.js:190:26)
          at render (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\@testing-library\react\dist\pure.js:292:10)
          at renderHook (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\@testing-library\react\dist\pure.js:340:7)
          at Object.<anonymous> (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\__tests__\hooks\additionalHooks.test.tsx:45:34)
          at Promise.finally.completed (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\jest-circus\build\jestAdapterInit.js:1559:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\jest-circus\build\jestAdapterInit.js:1499:10)
          at _callCircusTest (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\jest-circus\build\jestAdapterInit.js:1009:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\jest-circus\build\jestAdapterInit.js:949:3)
          at _runTestsForDescribeBlock (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\jest-circus\build\jestAdapterInit.js:839:13)
          at _runTestsForDescribeBlock (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\jest-circus\build\jestAdapterInit.js:829:11)
          at run (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\jest-circus\build\jestAdapterInit.js:757:3)
          at runAndTransformResultsToJestFormat (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\jest-circus\build\jestAdapterInit.js:1920:21)
          at jestAdapter (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\jest-circus\build\runner.js:101:19)
          at runTestInternal (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\jest-runner\build\testWorker.js:275:16)
          at runTest (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\jest-runner\build\testWorker.js:343:7)
          at Object.worker (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\jest-runner\build\testWorker.js:497:12)

    [0m [90m 121 |[39m       [36mreturn[39m[33m;[39m
     [90m 122 |[39m     }
    [31m[1m>[22m[39m[90m 123 |[39m     originalError[33m.[39mcall(console[33m,[39m [33m...[39margs)[33m;[39m
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 124 |[39m   }[33m;[39m
     [90m 125 |[39m   
     [90m 126 |[39m   console[33m.[39mwarn [33m=[39m ([33m...[39margs[33m:[39m any[]) [33m=>[39m {[0m

      at console.call [as error] (jest.setup.ts:123:19)
      at error (hooks/useDemoWebSocket.ts:106:15)
      at connect (hooks/useDemoWebSocket.ts:160:5)
      at Object.react-stack-bottom-frame (node_modules/react-dom/cjs/react-dom-client.development.js:23949:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:11905:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:12028:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13841:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13957:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13834:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13957:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13834:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13853:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15737:9)
      at node_modules/react-dom/cjs/react-dom-client.development.js:15379:15
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderHook (node_modules/@testing-library/react/dist/pure.js:340:7)
      at Object.<anonymous> (__tests__/hooks/additionalHooks.test.tsx:45:34)

    console.error
      Failed to establish WebSocket connection: TypeError: Cannot read properties of null (reading 'close')
          at close (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\hooks\useDemoWebSocket.ts:46:23)
          at connect (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\hooks\useDemoWebSocket.ts:160:5)
          at Object.react-stack-bottom-frame (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\react-dom\cjs\react-dom-client.development.js:23949:20)
          at runWithFiberInDEV (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\react-dom\cjs\react-dom-client.development.js:1522:13)
          at commitHookEffectListMount (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\react-dom\cjs\react-dom-client.development.js:11905:29)
          at commitHookPassiveMountEffects (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\react-dom\cjs\react-dom-client.development.js:12028:11)
          at commitPassiveMountOnFiber (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\react-dom\cjs\react-dom-client.development.js:13841:13)
          at recursivelyTraversePassiveMountEffects (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\react-dom\cjs\react-dom-client.development.js:13815:11)
          at commitPassiveMountOnFiber (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\react-dom\cjs\react-dom-client.development.js:13957:11)
          at recursivelyTraversePassiveMountEffects (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\react-dom\cjs\react-dom-client.development.js:13815:11)
          at commitPassiveMountOnFiber (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\react-dom\cjs\react-dom-client.development.js:13834:11)
          at recursivelyTraversePassiveMountEffects (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\react-dom\cjs\react-dom-client.development.js:13815:11)
          at commitPassiveMountOnFiber (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\react-dom\cjs\react-dom-client.development.js:13957:11)
          at recursivelyTraversePassiveMountEffects (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\react-dom\cjs\react-dom-client.development.js:13815:11)
          at commitPassiveMountOnFiber (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\react-dom\cjs\react-dom-client.development.js:13834:11)
          at recursivelyTraversePassiveMountEffects (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\react-dom\cjs\react-dom-client.development.js:13815:11)
          at commitPassiveMountOnFiber (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\react-dom\cjs\react-dom-client.development.js:13853:11)
          at flushPassiveEffects (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\react-dom\cjs\react-dom-client.development.js:15737:9)
          at C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\react-dom\cjs\react-dom-client.development.js:15379:15
          at flushActQueue (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\react\cjs\react.development.js:566:34)
          at process.env.NODE_ENV.exports.act (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\react\cjs\react.development.js:859:10)
          at C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\@testing-library\react\dist\act-compat.js:47:25
          at renderRoot (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\@testing-library\react\dist\pure.js:190:26)
          at render (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\@testing-library\react\dist\pure.js:292:10)
          at renderHook (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\@testing-library\react\dist\pure.js:340:7)
          at Object.<anonymous> (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\__tests__\hooks\additionalHooks.test.tsx:61:34)
          at Promise.finally.completed (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\jest-circus\build\jestAdapterInit.js:1559:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\jest-circus\build\jestAdapterInit.js:1499:10)
          at _callCircusTest (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\jest-circus\build\jestAdapterInit.js:1009:40)
          at _runTest (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\jest-circus\build\jestAdapterInit.js:949:3)
          at _runTestsForDescribeBlock (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\jest-circus\build\jestAdapterInit.js:839:13)
          at _runTestsForDescribeBlock (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\jest-circus\build\jestAdapterInit.js:829:11)
          at run (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\jest-circus\build\jestAdapterInit.js:757:3)
          at runAndTransformResultsToJestFormat (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\jest-circus\build\jestAdapterInit.js:1920:21)
          at jestAdapter (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\jest-circus\build\runner.js:101:19)
          at runTestInternal (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\jest-runner\build\testWorker.js:275:16)
          at runTest (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\jest-runner\build\testWorker.js:343:7)
          at Object.worker (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\jest-runner\build\testWorker.js:497:12)

    [0m [90m 121 |[39m       [36mreturn[39m[33m;[39m
     [90m 122 |[39m     }
    [31m[1m>[22m[39m[90m 123 |[39m     originalError[33m.[39mcall(console[33m,[39m [33m...[39margs)[33m;[39m
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 124 |[39m   }[33m;[39m
     [90m 125 |[39m   
     [90m 126 |[39m   console[33m.[39mwarn [33m=[39m ([33m...[39margs[33m:[39m any[]) [33m=>[39m {[0m

      at console.call [as error] (jest.setup.ts:123:19)
      at error (hooks/useDemoWebSocket.ts:106:15)
      at connect (hooks/useDemoWebSocket.ts:160:5)
      at Object.react-stack-bottom-frame (node_modules/react-dom/cjs/react-dom-client.development.js:23949:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:11905:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:12028:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13841:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13957:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13834:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13957:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13834:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13853:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15737:9)
      at node_modules/react-dom/cjs/react-dom-client.development.js:15379:15
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderHook (node_modules/@testing-library/react/dist/pure.js:340:7)
      at Object.<anonymous> (__tests__/hooks/additionalHooks.test.tsx:61:34)

    console.error
      Failed to establish WebSocket connection: TypeError: Cannot read properties of null (reading 'close')
          at close (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\hooks\useDemoWebSocket.ts:46:23)
          at connect (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\hooks\useDemoWebSocket.ts:160:5)
          at Object.react-stack-bottom-frame (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\react-dom\cjs\react-dom-client.development.js:23949:20)
          at runWithFiberInDEV (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\react-dom\cjs\react-dom-client.development.js:1522:13)
          at commitHookEffectListMount (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\react-dom\cjs\react-dom-client.development.js:11905:29)
          at commitHookPassiveMountEffects (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\react-dom\cjs\react-dom-client.development.js:12028:11)
          at commitPassiveMountOnFiber (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\react-dom\cjs\react-dom-client.development.js:13841:13)
          at recursivelyTraversePassiveMountEffects (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\react-dom\cjs\react-dom-client.development.js:13815:11)
          at commitPassiveMountOnFiber (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\react-dom\cjs\react-dom-client.development.js:13957:11)
          at recursivelyTraversePassiveMountEffects (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\react-dom\cjs\react-dom-client.development.js:13815:11)
          at commitPassiveMountOnFiber (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\react-dom\cjs\react-dom-client.development.js:13834:11)
          at recursivelyTraversePassiveMountEffects (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\react-dom\cjs\react-dom-client.development.js:13815:11)
          at commitPassiveMountOnFiber (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\react-dom\cjs\react-dom-client.development.js:13957:11)
          at recursivelyTraversePassiveMountEffects (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\react-dom\cjs\react-dom-client.development.js:13815:11)
          at commitPassiveMountOnFiber (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\react-dom\cjs\react-dom-client.development.js:13834:11)
          at recursivelyTraversePassiveMountEffects (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\react-dom\cjs\react-dom-client.development.js:13815:11)
          at commitPassiveMountOnFiber (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\react-dom\cjs\react-dom-client.development.js:13853:11)
          at flushPassiveEffects (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\react-dom\cjs\react-dom-client.development.js:15737:9)
          at C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\react-dom\cjs\react-dom-client.development.js:15379:15
          at flushActQueue (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\react\cjs\react.development.js:566:34)
          at process.env.NODE_ENV.exports.act (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\react\cjs\react.development.js:859:10)
          at C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\@testing-library\react\dist\act-compat.js:47:25
          at renderRoot (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\@testing-library\react\dist\pure.js:190:26)
          at render (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\@testing-library\react\dist\pure.js:292:10)
          at renderHook (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\@testing-library\react\dist\pure.js:340:7)
          at Object.<anonymous> (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\__tests__\hooks\additionalHooks.test.tsx:91:34)
          at Promise.finally.completed (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\jest-circus\build\jestAdapterInit.js:1559:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\jest-circus\build\jestAdapterInit.js:1499:10)
          at _callCircusTest (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\jest-circus\build\jestAdapterInit.js:1009:40)
          at _runTest (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\jest-circus\build\jestAdapterInit.js:949:3)
          at _runTestsForDescribeBlock (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\jest-circus\build\jestAdapterInit.js:839:13)
          at _runTestsForDescribeBlock (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\jest-circus\build\jestAdapterInit.js:829:11)
          at run (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\jest-circus\build\jestAdapterInit.js:757:3)
          at runAndTransformResultsToJestFormat (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\jest-circus\build\jestAdapterInit.js:1920:21)
          at jestAdapter (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\jest-circus\build\runner.js:101:19)
          at runTestInternal (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\jest-runner\build\testWorker.js:275:16)
          at runTest (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\jest-runner\build\testWorker.js:343:7)
          at Object.worker (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\jest-runner\build\testWorker.js:497:12)

    [0m [90m 121 |[39m       [36mreturn[39m[33m;[39m
     [90m 122 |[39m     }
    [31m[1m>[22m[39m[90m 123 |[39m     originalError[33m.[39mcall(console[33m,[39m [33m...[39margs)[33m;[39m
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 124 |[39m   }[33m;[39m
     [90m 125 |[39m   
     [90m 126 |[39m   console[33m.[39mwarn [33m=[39m ([33m...[39margs[33m:[39m any[]) [33m=>[39m {[0m

      at console.call [as error] (jest.setup.ts:123:19)
      at error (hooks/useDemoWebSocket.ts:106:15)
      at connect (hooks/useDemoWebSocket.ts:160:5)
      at Object.react-stack-bottom-frame (node_modules/react-dom/cjs/react-dom-client.development.js:23949:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:11905:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:12028:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13841:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13957:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13834:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13957:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13834:11)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13853:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15737:9)
      at node_modules/react-dom/cjs/react-dom-client.development.js:15379:15
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderHook (node_modules/@testing-library/react/dist/pure.js:340:7)
      at Object.<anonymous> (__tests__/hooks/additionalHooks.test.tsx:91:34)

  \u25cf test_useDemoWebSocket_connection  should establish demo WebSocket connection

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    Ignored nodes: comments, script, style
    [36m<html>[39m
      [36m<head />[39m
      [36m<body>[39m
        [36m<div />[39m
      [36m</body>[39m
    [36m</html>[39m

    [0m [90m 46 |[39m     
     [90m 47 |[39m     [36mawait[39m waitFor(() [33m=>[39m {
    [31m[1m>[22m[39m[90m 48 |[39m       expect(result[33m.[39mcurrent[33m.[39misConnected)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m    |[39m                                          [31m[1m^[22m[39m
     [90m 49 |[39m     })[33m;[39m
     [90m 50 |[39m     
     [90m 51 |[39m     expect(global[33m.[39m[33mWebSocket[39m)[33m.[39mtoHaveBeenCalledWith([0m

      at toBe (__tests__/hooks/additionalHooks.test.tsx:48:42)
      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)
      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)
      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)
      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)

  \u25cf test_useDemoWebSocket_connection  should handle message queuing when disconnected

    TypeError: Cannot read properties of null (reading 'send')

    [0m [90m 125 |[39m   [36mconst[39m sendMessage [33m=[39m useCallback((message[33m:[39m any) [33m=>[39m {
     [90m 126 |[39m     [36mif[39m (wsRef[33m.[39mcurrent[33m?[39m[33m.[39mreadyState [33m===[39m [33mWebSocket[39m[33m.[39m[33mOPEN[39m) {
    [31m[1m>[22m[39m[90m 127 |[39m       wsRef[33m.[39mcurrent[33m.[39msend([33mJSON[39m[33m.[39mstringify(message))
     [90m     |[39m                     [31m[1m^[22m[39m
     [90m 128 |[39m     } [36melse[39m {
     [90m 129 |[39m       console[33m.[39merror([32m'WebSocket is not connected'[39m)
     [90m 130 |[39m       setError([36mnew[39m [33mError[39m([32m'WebSocket is not connected'[39m))[0m

      at Object.send [as sendMessage] (hooks/useDemoWebSocket.ts:127:21)
      at sendMessage (__tests__/hooks/additionalHooks.test.tsx:64:22)
      at node_modules/@testing-library/react/dist/act-compat.js:48:24
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:789:22)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at Object.<anonymous> (__tests__/hooks/additionalHooks.test.tsx:63:8)

  \u25cf test_useMediaQuery_responsive  should handle debouncing for rapid changes

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: true

    [0m [90m 186 |[39m     
     [90m 187 |[39m     [90m// Should not update immediately[39m
    [31m[1m>[22m[39m[90m 188 |[39m     expect(result[33m.[39mcurrent)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 189 |[39m     
     [90m 190 |[39m     [90m// Wait for debounce[39m
     [90m 191 |[39m     [36mawait[39m waitFor(() [33m=>[39m {[0m

      at Object.toBe (__tests__/hooks/additionalHooks.test.tsx:188:28)

PASS __tests__/hooks/useError.test.ts
PASS __tests__/store/unified-chat.test.ts
  \u25cf Console

    console.log
      [UnifiedChat] WebSocket Event: agent_started {
        payload: {
          agent_name: 'Supervisor Agent',
          timestamp: 1755030695687,
          run_id: 'run-456'
        },
        currentFastLayer: null,
        currentMediumLayer: null,
        currentSlowLayer: null
      }

      at Object.log [as handleWebSocketEvent] (store/unified-chat.ts:141:17)

    console.log
      [UnifiedChat] WebSocket Event: tool_executing {
        payload: {
          tool_name: 'cost_optimizer',
          agent_name: 'Test Agent',
          timestamp: 1755030695699
        },
        currentFastLayer: {
          agentName: 'Test Agent',
          activeTools: [],
          timestamp: 1755030695699,
          runId: 'test-run'
        },
        currentMediumLayer: null,
        currentSlowLayer: null
      }

      at Object.log [as handleWebSocketEvent] (store/unified-chat.ts:141:17)

    console.log
      [UnifiedChat] WebSocket Event: agent_thinking {
        payload: {
          thought: 'Analyzing workload patterns...',
          agent_name: 'Analysis Agent',
          step_number: 2,
          total_steps: 5
        },
        currentFastLayer: null,
        currentMediumLayer: null,
        currentSlowLayer: null
      }

      at Object.log [as handleWebSocketEvent] (store/unified-chat.ts:141:17)

    console.log
      [UnifiedChat] WebSocket Event: partial_result {
        payload: {
          content: 'Initial analysis shows',
          agent_name: 'Analysis Agent',
          is_complete: false
        },
        currentFastLayer: null,
        currentMediumLayer: null,
        currentSlowLayer: null
      }

      at Object.log [as handleWebSocketEvent] (store/unified-chat.ts:141:17)

    console.log
      [UnifiedChat] WebSocket Event: partial_result {
        payload: {
          content: ' potential optimizations',
          agent_name: 'Analysis Agent',
          is_complete: false
        },
        currentFastLayer: null,
        currentMediumLayer: {
          thought: '',
          partialContent: 'Initial analysis shows',
          stepNumber: 0,
          totalSteps: 0,
          agentName: 'Analysis Agent'
        },
        currentSlowLayer: null
      }

      at Object.log [as handleWebSocketEvent] (store/unified-chat.ts:141:17)

    console.log
      [UnifiedChat] WebSocket Event: agent_completed {
        payload: {
          agent_name: 'Optimization Agent',
          duration_ms: 3000,
          result: { optimizations: [Array] },
          metrics: { tokens: 500 }
        },
        currentFastLayer: null,
        currentMediumLayer: null,
        currentSlowLayer: null
      }

      at Object.log [as handleWebSocketEvent] (store/unified-chat.ts:141:17)

    console.log
      [UnifiedChat] WebSocket Event: final_report {
        payload: {
          report: { summary: 'Complete analysis' },
          total_duration_ms: 10000,
          agent_metrics: [],
          recommendations: [ [Object] ],
          action_plan: [ [Object] ]
        },
        currentFastLayer: null,
        currentMediumLayer: null,
        currentSlowLayer: null
      }

      at Object.log [as handleWebSocketEvent] (store/unified-chat.ts:141:17)

    console.log
      [UnifiedChat] WebSocket Event: error {
        payload: {
          error_message: 'Connection timeout',
          error_code: 'TIMEOUT',
          agent_name: 'Network Agent',
          recoverable: false
        },
        currentFastLayer: null,
        currentMediumLayer: null,
        currentSlowLayer: null
      }

      at Object.log [as handleWebSocketEvent] (store/unified-chat.ts:141:17)

PASS __tests__/services/messageService.test.ts
PASS __tests__/components/chat/PersistentResponseCard.test.tsx
PASS __tests__/components/TestLoginComponent.tsx
PASS __tests__/components/AppWithLayout.test.tsx
FAIL __tests__/imports/internal-imports.test.tsx
  \u25cf Console

    console.log
      Demo components not found (optional)

      at Object.log (__tests__/imports/internal-imports.test.tsx:60:17)

    console.log
      Some additional stores not found (optional)

      at Object.log (__tests__/imports/internal-imports.test.tsx:117:17)

    console.log
      Some additional services not found (optional)

      at Object.log (__tests__/imports/internal-imports.test.tsx:151:17)

    console.log
      Some utility modules not found (optional)

      at Object.log (__tests__/imports/internal-imports.test.tsx:179:17)

    console.log
      Type file agent.ts not found

      at log (__tests__/imports/internal-imports.test.tsx:207:21)
          at Array.forEach (<anonymous>)

    console.log
      Type file auth.ts not found

      at log (__tests__/imports/internal-imports.test.tsx:207:21)
          at Array.forEach (<anonymous>)

    console.log
      Type file thread.ts not found

      at log (__tests__/imports/internal-imports.test.tsx:207:21)
          at Array.forEach (<anonymous>)

    console.log
      Type file message.ts not found

      at log (__tests__/imports/internal-imports.test.tsx:207:21)
          at Array.forEach (<anonymous>)

    console.log
      Type file websocket.ts not found

      at log (__tests__/imports/internal-imports.test.tsx:207:21)
          at Array.forEach (<anonymous>)

    console.log
      Some app pages not found (may use different structure)

      at Object.log (__tests__/imports/internal-imports.test.tsx:229:17)

  \u25cf Internal Frontend Module Import Tests  Component imports  should import chat components

    expect(received).not.toThrow()

    Error name:    "SyntaxError"
    Error message: "Unexpected token 'export'"

        [0m [90m 13 |[39m   [36mconst[39m lastUpdateRef [33m=[39m useRef[33m<[39m[33mnumber[39m[33m>[39m([33mDate[39m[33m.[39mnow())[33m;[39m
         [90m 14 |[39m   
        [31m[1m>[22m[39m[90m 15 |[39m   [90m// Stream content character by character using requestAnimationFrame[39m
         [90m    |[39m                                                               [31m[1m^[22m[39m
         [90m 16 |[39m   useEffect(() [33m=>[39m {
         [90m 17 |[39m     [36mif[39m ([33m![39mdata[33m?[39m[33m.[39mpartialContent) {
         [90m 18 |[39m       setDisplayedContent([32m''[39m)[33m;[39m[0m

      at Runtime.createScriptFromCode (node_modules/jest-runtime/build/index.js:1316:40)
      at Object.<anonymous> (components/chat/layers/MediumLayer.tsx:15:63)
      at Object.<anonymous> (components/chat/PersistentResponseCard.tsx:17:22)
      at Object.<anonymous> (components/chat/MainChat.tsx:17:33)
      at require (__tests__/imports/internal-imports.test.tsx:39:20)
      at Object.<anonymous> (node_modules/expect/build/index.js:1824:9)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:2235:93)
      at Object.toThrow (__tests__/imports/internal-imports.test.tsx:39:63)
      at Object.toThrow (__tests__/imports/internal-imports.test.tsx:39:63)

  \u25cf Internal Frontend Module Import Tests  Service imports  should import API services

    expect(received).toBeDefined()

    Received: undefined

    [0m [90m 154 |[39m       [90m// Verify service exports[39m
     [90m 155 |[39m       [36mconst[39m api [33m=[39m require([32m'@/services/api'[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 156 |[39m       expect(api[33m.[39mapiClient)[33m.[39mtoBeDefined()[33m;[39m
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 157 |[39m       
     [90m 158 |[39m       [36mconst[39m threadService [33m=[39m require([32m'@/services/threadService'[39m)[33m;[39m
     [90m 159 |[39m       expect(threadService[33m.[39mthreadService)[33m.[39mtoBeDefined()[33m;[39m[0m

      at Object.toBeDefined (__tests__/imports/internal-imports.test.tsx:156:29)

  \u25cf Internal Frontend Module Import Tests  Utility imports  should import configuration

    expect(received).not.toThrow()

    Error name:    ""
    Error message: "Configuration error:
    Could not locate module @/config/api mapped as:
    C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\$1.
    Please check your configuration for these entries:
    {
      \"moduleNameMapper\": {
        \"/^@\\/(.*)$/\": \"C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\$1\"
      },
      \"resolver\": undefined
    }"

        [0m [90m 182 |[39m
         [90m 183 |[39m     it([32m'should import configuration'[39m[33m,[39m () [33m=>[39m {
        [31m[1m>[22m[39m[90m 184 |[39m       expect(() [33m=>[39m require([32m'@/config/api'[39m))[33m.[39mnot[33m.[39mtoThrow()[33m;[39m
         [90m     |[39m                    [31m[1m^[22m[39m
         [90m 185 |[39m       
         [90m 186 |[39m       [36mconst[39m config [33m=[39m require([32m'@/config/api'[39m)[33m;[39m
         [90m 187 |[39m       expect(config[33m.[39m[33mAPI_BASE_URL[39m)[33m.[39mtoBeDefined()[33m;[39m[0m

      at createNoMappedModuleFoundError (node_modules/jest-resolve/build/index.js:1117:17)
      at require (__tests__/imports/internal-imports.test.tsx:184:20)
      at Object.<anonymous> (node_modules/expect/build/index.js:1824:9)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:2235:93)
      at Object.toThrow (__tests__/imports/internal-imports.test.tsx:184:49)
      at Object.toThrow (__tests__/imports/internal-imports.test.tsx:184:49)

  \u25cf Internal Frontend Module Import Tests  Critical internal imports batch test  should successfully import all critical internal modules

    expect(received).toEqual(expected) // deep equality

    - Expected  - 1
    + Received  + 5

    - Array []
    + Array [
    +   "@/components/chat/ChatInterface",
    +   "@/store/useThreadStore",
    +   "@/config/api",
    + ]

    [0m [90m 256 |[39m       })[33m;[39m
     [90m 257 |[39m
    [31m[1m>[22m[39m[90m 258 |[39m       expect(failedImports)[33m.[39mtoEqual([])[33m;[39m
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 259 |[39m     })[33m;[39m
     [90m 260 |[39m   })[33m;[39m
     [90m 261 |[39m[0m

      at Object.toEqual (__tests__/imports/internal-imports.test.tsx:258:29)

  \u25cf Internal Frontend Module Import Tests  Circular dependency check  should not have circular dependencies in critical modules

    Configuration error:

    Could not locate module @/store/useWebSocketStore mapped as:
    C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\store\$1.

    Please check your configuration for these entries:
    {
      "moduleNameMapper": {
        "/^@\/store\/(.*)$/": "C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\store\$1"
      },
      "resolver": undefined
    }

    [0m [90m 272 |[39m       [90m// Clear module cache[39m
     [90m 273 |[39m       modules[33m.[39mforEach(mod [33m=>[39m {
    [31m[1m>[22m[39m[90m 274 |[39m         [36mdelete[39m require[33m.[39mcache[require[33m.[39mresolve(mod)][33m;[39m
     [90m     |[39m                                      [31m[1m^[22m[39m
     [90m 275 |[39m       })[33m;[39m
     [90m 276 |[39m
     [90m 277 |[39m       [90m// Import in order A[39m[0m

      at createNoMappedModuleFoundError (node_modules/jest-resolve/build/index.js:1117:17)
      at resolve (__tests__/imports/internal-imports.test.tsx:274:38)
          at Array.forEach (<anonymous>)
      at Object.forEach (__tests__/imports/internal-imports.test.tsx:273:15)

  \u25cf Internal Frontend Module Import Tests  Component export verification  should export expected items from components

    Configuration error:

    Could not locate module @/components/ui/dialog mapped as:
    C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\components\$1.

    Please check your configuration for these entries:
    {
      "moduleNameMapper": {
        "/^@\/components\/(.*)$/": "C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\components\$1"
      },
      "resolver": undefined
    }

    [0m [90m 309 |[39m
     [90m 310 |[39m       [90m// Dialog component[39m
    [31m[1m>[22m[39m[90m 311 |[39m       [36mconst[39m dialog [33m=[39m require([32m'@/components/ui/dialog'[39m)[33m;[39m
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 312 |[39m       expect(dialog[33m.[39m[33mDialog[39m)[33m.[39mtoBeDefined()[33m;[39m
     [90m 313 |[39m       expect(dialog[33m.[39m[33mDialogTrigger[39m)[33m.[39mtoBeDefined()[33m;[39m
     [90m 314 |[39m       expect(dialog[33m.[39m[33mDialogContent[39m)[33m.[39mtoBeDefined()[33m;[39m[0m

      at createNoMappedModuleFoundError (node_modules/jest-resolve/build/index.js:1117:17)
      at Object.require (__tests__/imports/internal-imports.test.tsx:311:22)

  \u25cf Internal Frontend Module Import Tests  Store state verification  should have expected state and actions in stores

    Configuration error:

    Could not locate module @/store/useThreadStore mapped as:
    C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\store\$1.

    Please check your configuration for these entries:
    {
      "moduleNameMapper": {
        "/^@\/store\/(.*)$/": "C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\store\$1"
      },
      "resolver": undefined
    }

    [0m [90m 322 |[39m   describe([32m'Store state verification'[39m[33m,[39m () [33m=>[39m {
     [90m 323 |[39m     it([32m'should have expected state and actions in stores'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 324 |[39m       [36mconst[39m { useThreadStore } [33m=[39m require([32m'@/store/useThreadStore'[39m)[33m;[39m
     [90m     |[39m                                  [31m[1m^[22m[39m
     [90m 325 |[39m       [36mconst[39m store [33m=[39m useThreadStore[33m.[39mgetState()[33m;[39m
     [90m 326 |[39m       
     [90m 327 |[39m       [90m// Check for expected state properties[39m[0m

      at createNoMappedModuleFoundError (node_modules/jest-resolve/build/index.js:1117:17)
      at Object.require (__tests__/imports/internal-imports.test.tsx:324:34)

  \u25cf Internal Frontend Module Import Tests  Integration test imports  should import integration test files

    expect(received).not.toThrow()

    Error name:    "Error"
    Error message: "  [31mx[0m await isn't allowed in non-async function
         ,-[[36;1;4mC:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\__tests__\\integration\\critical-integration.test.tsx[0m:190:1]
     [2m187[0m |       }));
     [2m188[0m |
     [2m189[0m |       await waitFor(() => {
     [2m190[0m |         await waitFor(() => {
         : [35;1m        ^^^^^[0m
     [2m191[0m |         expect(screen.getByTestId('status')).toHaveTextContent('Processing');
     [2m192[0m |       });
     [2m192[0m |       });
         `----
    Caused by:
        Syntax Error"

        [0m [90m 337 |[39m   describe([32m'Integration test imports'[39m[33m,[39m () [33m=>[39m {
         [90m 338 |[39m     it([32m'should import integration test files'[39m[33m,[39m () [33m=>[39m {
        [31m[1m>[22m[39m[90m 339 |[39m       expect(() [33m=>[39m require([32m'../integration/critical-integration.test'[39m))[33m.[39mnot[33m.[39mtoThrow()[33m;[39m
         [90m     |[39m                    [31m[1m^[22m[39m
         [90m 340 |[39m       expect(() [33m=>[39m require([32m'../integration/advanced-integration.test'[39m))[33m.[39mnot[33m.[39mtoThrow()[33m;[39m
         [90m 341 |[39m       expect(() [33m=>[39m require([32m'../integration/comprehensive-integration.test'[39m))[33m.[39mnot[33m.[39mtoThrow()[33m;[39m
         [90m 342 |[39m     })[33m;[39m[0m

      at Object.transformSync (node_modules/next/src/build/swc/index.ts:1374:25)
      at transformSync (node_modules/next/src/build/swc/index.ts:1477:19)
      at Object.process (node_modules/next/src/build/swc/jest-transformer.ts:105:25)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/index.js:422:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/index.js:519:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/index.js:558:19)
      at require (__tests__/imports/internal-imports.test.tsx:339:20)
      at Object.<anonymous> (node_modules/expect/build/index.js:1824:9)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:2235:93)
      at Object.toThrow (__tests__/imports/internal-imports.test.tsx:339:77)
      at Object.toThrow (__tests__/imports/internal-imports.test.tsx:339:77)

FAIL __tests__/test-utils/providers.tsx
  \u25cf Test suite failed to run

    Your test suite must contain at least one test.

      at onResult (node_modules/@jest/core/build/index.js:1052:18)
      at node_modules/@jest/core/build/index.js:1122:165
      at node_modules/emittery/index.js:363:13
          at Array.map (<anonymous>)
      at Emittery.emit (node_modules/emittery/index.js:361:23)

FAIL __tests__/utils/test-utils.tsx
  \u25cf Test suite failed to run

    ReferenceError: TextEncoder is not defined

    [0m [90m 70 |[39m [36mexport[39m [33m*[39m [36mfrom[39m [32m'@testing-library/react'[39m[33m;[39m
     [90m 71 |[39m [36mexport[39m { customRender [36mas[39m render }[33m;[39m
    [31m[1m>[22m[39m[90m 72 |[39m
     [90m    |[39m [31m[1m^[22m[39m
     [90m 73 |[39m [90m// Utility to wrap component with router only[39m
     [90m 74 |[39m [36mexport[39m [36mfunction[39m withRouter(component[33m:[39m [33mReactElement[39m) {
     [90m 75 |[39m   [36mreturn[39m [33m<[39m[33mBrowserRouter[39m[33m>[39m{component}[33m<[39m[33m/[39m[33mBrowserRouter[39m[33m>[39m[33m;[39m[0m

      at Object.<anonymous> (node_modules/react-router/dist/development/index.js:328:31)
      at Object.<anonymous> (node_modules/react-router/dist/development/dom-export.js:19:20)
      at Object.<anonymous> (node_modules/react-router-dom/dist/index.js:38:18)
      at Object.<anonymous> (__tests__/utils/test-utils.tsx:72:25)

FAIL __tests__/components/UIComponents.test.tsx
  \u25cf Test suite failed to run

    ReferenceError: TextEncoder is not defined

    [0m [90m 70 |[39m [36mexport[39m [33m*[39m [36mfrom[39m [32m'@testing-library/react'[39m[33m;[39m
     [90m 71 |[39m [36mexport[39m { customRender [36mas[39m render }[33m;[39m
    [31m[1m>[22m[39m[90m 72 |[39m
     [90m    |[39m [31m[1m^[22m[39m
     [90m 73 |[39m [90m// Utility to wrap component with router only[39m
     [90m 74 |[39m [36mexport[39m [36mfunction[39m withRouter(component[33m:[39m [33mReactElement[39m) {
     [90m 75 |[39m   [36mreturn[39m [33m<[39m[33mBrowserRouter[39m[33m>[39m{component}[33m<[39m[33m/[39m[33mBrowserRouter[39m[33m>[39m[33m;[39m[0m

      at Object.<anonymous> (node_modules/react-router/dist/development/index.js:328:31)
      at Object.<anonymous> (node_modules/react-router/dist/development/dom-export.js:19:20)
      at Object.<anonymous> (node_modules/react-router-dom/dist/index.js:38:18)
      at Object.<anonymous> (__tests__/utils/test-utils.tsx:72:25)
      at Object.<anonymous> (__tests__/components/UIComponents.test.tsx:7:20)

FAIL __tests__/components/FinalReportView.test.tsx
  \u25cf Test suite failed to run

    Configuration error:

    Could not locate module @/components/charts/PerformanceChart mapped as:
    C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\components\$1.

    Please check your configuration for these entries:
    {
      "moduleNameMapper": {
        "/^@\/components\/(.*)$/": "C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\components\$1"
      },
      "resolver": undefined
    }

    [0m [90m 12 |[39m   [33mCardTitle[39m[33m:[39m ({ children }[33m:[39m any) [33m=>[39m [33m<[39m[33mh3[39m data[33m-[39mtestid[33m=[39m[32m"card-title"[39m[33m>[39m{children}[33m<[39m[33m/[39m[33mh3[39m[33m>[39m
     [90m 13 |[39m }))[33m;[39m
    [31m[1m>[22m[39m[90m 14 |[39m jest[33m.[39mmock([32m'@/components/charts/PerformanceChart'[39m[33m,[39m () [33m=>[39m ({
     [90m    |[39m      [31m[1m^[22m[39m
     [90m 15 |[39m   [33mPerformanceChart[39m[33m:[39m ({ data[33m,[39m type }[33m:[39m any) [33m=>[39m (
     [90m 16 |[39m     [33m<[39m[33mdiv[39m data[33m-[39mtestid[33m=[39m[32m"performance-chart"[39m data[33m-[39mchart[33m-[39mtype[33m=[39m{type}[33m>[39m
     [90m 17 |[39m       [33mChart[39m[33m:[39m {[33mJSON[39m[33m.[39mstringify(data)}[0m

      at createNoMappedModuleFoundError (node_modules/jest-resolve/build/index.js:1117:17)
      at Object.mock (__tests__/components/FinalReportView.test.tsx:14:6)

FAIL __tests__/integration/critical-integration.test.tsx
  \u25cf Test suite failed to run

      [31mx[0m await isn't allowed in non-async function
         ,-[[36;1;4mC:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\__tests__\integration\critical-integration.test.tsx[0m:190:1]
     [2m187[0m |       }));
     [2m188[0m |       
     [2m189[0m |       await waitFor(() => {
     [2m190[0m |         await waitFor(() => {
         : [35;1m        ^^^^^[0m
     [2m191[0m |         expect(screen.getByTestId('status')).toHaveTextContent('Processing');
     [2m192[0m |       });
     [2m192[0m |       });
         `----


    Caused by:
        Syntax Error

      at Object.transformSync (node_modules/next/src/build/swc/index.ts:1374:25)
      at transformSync (node_modules/next/src/build/swc/index.ts:1477:19)
      at Object.process (node_modules/next/src/build/swc/jest-transformer.ts:105:25)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/index.js:422:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/index.js:519:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/index.js:558:19)

PASS __tests__/hooks/useKeyboardShortcuts.test.tsx
FAIL __tests__/services/webSocketService.test.ts
  \u25cf Test suite failed to run

    Configuration error:

    Could not locate module @/lib/websocket-manager mapped as:
    C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\lib\$1.

    Please check your configuration for these entries:
    {
      "moduleNameMapper": {
        "/^@\/lib\/(.*)$/": "C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\lib\$1"
      },
      "resolver": undefined
    }

    [0m [90m 3 |[39m
     [90m 4 |[39m [90m// Mock WebSocketManager[39m
    [31m[1m>[22m[39m[90m 5 |[39m jest[33m.[39mmock([32m'@/lib/websocket-manager'[39m)[33m;[39m
     [90m   |[39m      [31m[1m^[22m[39m
     [90m 6 |[39m
     [90m 7 |[39m describe([32m'webSocketService'[39m[33m,[39m () [33m=>[39m {
     [90m 8 |[39m   [36mlet[39m mockWebSocketManager[33m:[39m jest[33m.[39m[33mMocked[39m[33m<[39m[33mWebSocketManager[39m[33m>[39m[33m;[39m[0m

      at createNoMappedModuleFoundError (node_modules/jest-resolve/build/index.js:1117:17)
      at Object.mock (__tests__/services/webSocketService.test.ts:5:6)

FAIL __tests__/auth/service.test.ts
  \u25cf Test suite failed to run

    TypeError: Cannot redefine property: location
        at Object.defineProperty (<anonymous>)

    [0m [90m 49 |[39m
     [90m 50 |[39m [90m// Use Object.defineProperty to properly mock location in jsdom[39m
    [31m[1m>[22m[39m[90m 51 |[39m [33mObject[39m[33m.[39mdefineProperty(window[33m,[39m [32m'location'[39m[33m,[39m {
     [90m    |[39m        [31m[1m^[22m[39m
     [90m 52 |[39m   configurable[33m:[39m [36mtrue[39m[33m,[39m
     [90m 53 |[39m   writable[33m:[39m [36mtrue[39m[33m,[39m
     [90m 54 |[39m   value[33m:[39m {[0m

      at Object.defineProperty (__tests__/auth/service.test.ts:51:8)

FAIL __tests__/unified-chat-v5.test.tsx
  \u25cf Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
      If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
      If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
      To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
      If you need a custom transformation, specify a "transform" option in your config.
      If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\react-markdown\index.js:10
    export {
    ^^^^^^

    SyntaxError: Unexpected token 'export'

    [0m [90m 13 |[39m   [36mconst[39m lastUpdateRef [33m=[39m useRef[33m<[39m[33mnumber[39m[33m>[39m([33mDate[39m[33m.[39mnow())[33m;[39m
     [90m 14 |[39m   
    [31m[1m>[22m[39m[90m 15 |[39m   [90m// Stream content character by character using requestAnimationFrame[39m
     [90m    |[39m                                                               [31m[1m^[22m[39m
     [90m 16 |[39m   useEffect(() [33m=>[39m {
     [90m 17 |[39m     [36mif[39m ([33m![39mdata[33m?[39m[33m.[39mpartialContent) {
     [90m 18 |[39m       setDisplayedContent([32m''[39m)[33m;[39m[0m

      at Runtime.createScriptFromCode (node_modules/jest-runtime/build/index.js:1316:40)
      at Object.<anonymous> (components/chat/layers/MediumLayer.tsx:15:63)
      at Object.<anonymous> (components/chat/PersistentResponseCard.tsx:17:22)
      at Object.<anonymous> (__tests__/unified-chat-v5.test.tsx:8:33)

FAIL __tests__/chat/chatUIUXComprehensive.test.tsx
  \u25cf Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
      If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
      If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
      To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
      If you need a custom transformation, specify a "transform" option in your config.
      If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\react-markdown\index.js:10
    export {
    ^^^^^^

    SyntaxError: Unexpected token 'export'

    [0m [90m 13 |[39m   [36mconst[39m lastUpdateRef [33m=[39m useRef[33m<[39m[33mnumber[39m[33m>[39m([33mDate[39m[33m.[39mnow())[33m;[39m
     [90m 14 |[39m   
    [31m[1m>[22m[39m[90m 15 |[39m   [90m// Stream content character by character using requestAnimationFrame[39m
     [90m    |[39m                                                               [31m[1m^[22m[39m
     [90m 16 |[39m   useEffect(() [33m=>[39m {
     [90m 17 |[39m     [36mif[39m ([33m![39mdata[33m?[39m[33m.[39mpartialContent) {
     [90m 18 |[39m       setDisplayedContent([32m''[39m)[33m;[39m[0m

      at Runtime.createScriptFromCode (node_modules/jest-runtime/build/index.js:1316:40)
      at Object.<anonymous> (components/chat/layers/MediumLayer.tsx:15:63)
      at Object.<anonymous> (components/chat/PersistentResponseCard.tsx:17:22)
      at Object.<anonymous> (components/chat/MainChat.tsx:17:33)
      at Object.<anonymous> (__tests__/chat/chatUIUXComprehensive.test.tsx:23:19)

C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\components\chat\ThreadSidebar.tsx:87
            setLoading(false);
            ^

[TypeError: setLoading is not a function]

Node.js v24.4.1
FAIL __tests__/integration/advanced-integration.test.tsx
  \u25cf Console

    console.error
      An update to AsyncValidationComponent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

    [0m [90m 121 |[39m       [36mreturn[39m[33m;[39m
     [90m 122 |[39m     }
    [31m[1m>[22m[39m[90m 123 |[39m     originalError[33m.[39mcall(console[33m,[39m [33m...[39margs)[33m;[39m
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 124 |[39m   }[33m;[39m
     [90m 125 |[39m   
     [90m 126 |[39m   console[33m.[39mwarn [33m=[39m ([33m...[39margs[33m:[39m any[]) [33m=>[39m {[0m

      at console.call [as error] (jest.setup.ts:123:19)
      at node_modules/react-dom/cjs/react-dom-client.development.js:16023:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:16022:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:14396:11)
      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:6969:13)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:6927:7)
      at setIsValidating (__tests__/integration/advanced-integration.test.tsx:235:11)
      at validateEmail (__tests__/integration/advanced-integration.test.tsx:253:24)
      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)

  \u25cf Advanced Frontend Integration Tests  27. Advanced Error Boundaries  should report errors to monitoring service

    Monitored error

    [0m [90m 1419 |[39m         [36mconst[39m handleError [33m=[39m () [33m=>[39m {
     [90m 1420 |[39m           [36mtry[39m {
    [31m[1m>[22m[39m[90m 1421 |[39m             [36mthrow[39m [36mnew[39m [33mError[39m([32m'Monitored error'[39m)[33m;[39m
     [90m      |[39m                   [31m[1m^[22m[39m
     [90m 1422 |[39m           } [36mcatch[39m (error) {
     [90m 1423 |[39m             reportError(error)[33m;[39m
     [90m 1424 |[39m             [36mthrow[39m error[33m;[39m[0m

      at handleError (__tests__/integration/advanced-integration.test.tsx:1421:19)
      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)
      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9
      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)
      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)
      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)
      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)
      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)
      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)
      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
      at node_modules/@testing-library/dom/dist/events.js:19:20
      at node_modules/@testing-library/react/dist/pure.js:108:16
      at node_modules/@testing-library/react/dist/act-compat.js:48:24
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:789:22)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)
      at fireEvent (node_modules/@testing-library/dom/dist/events.js:12:35)
      at fireEvent.<computed> [as click] (node_modules/@testing-library/dom/dist/events.js:110:36)
      at fireEvent.<computed> [as click] (node_modules/@testing-library/react/dist/fire-event.js:15:52)
      at Object.click (__tests__/integration/advanced-integration.test.tsx:1441:19)

  \u25cf Advanced Frontend Integration Tests  29. WebSocket Resilience Integration  should handle WebSocket message buffering during reconnection

    expect(element).toHaveTextContent()

    Expected element to have text content:
      1 buffered
    Received:
      0 buffered

    [0m [90m 1608 |[39m       
     [90m 1609 |[39m       expect(messageBuffer)[33m.[39mtoHaveLength([35m1[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 1610 |[39m       expect(getByTestId([32m'buffer-size'[39m))[33m.[39mtoHaveTextContent([32m'1 buffered'[39m)[33m;[39m
     [90m      |[39m                                          [31m[1m^[22m[39m
     [90m 1611 |[39m     })[33m;[39m
     [90m 1612 |[39m
     [90m 1613 |[39m     it([32m'should implement exponential backoff for reconnection'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.toHaveTextContent (__tests__/integration/advanced-integration.test.tsx:1610:42)

FAIL __tests__/imports/external-imports.test.tsx
  \u25cf Console

    console.log
      ESLint config packages not available (dev dependencies)

      at Object.log (__tests__/imports/external-imports.test.tsx:289:17)

    console.log
      Optional dependencies not installed: [
        'Optional dependency @tanstack/react-query not installed',
        'Optional dependency react-query not installed',
        'Optional dependency @emotion/react not installed',
        'Optional dependency @emotion/styled not installed'
      ]

      at Object.log (__tests__/imports/external-imports.test.tsx:345:17)

  \u25cf External NPM Dependencies Import Tests  Core React and Next.js imports  should import React DOM

    expect(received).toBeDefined()

    Received: undefined

    [0m [90m 24 |[39m       [36mconst[39m [33mReactDOM[39m [33m=[39m require([32m'react-dom'[39m)[33m;[39m
     [90m 25 |[39m       expect([33mReactDOM[39m)[33m.[39mtoBeDefined()[33m;[39m
    [31m[1m>[22m[39m[90m 26 |[39m       expect([33mReactDOM[39m[33m.[39mcreateRoot)[33m.[39mtoBeDefined()[33m;[39m
     [90m    |[39m                                   [31m[1m^[22m[39m
     [90m 27 |[39m     })[33m;[39m
     [90m 28 |[39m
     [90m 29 |[39m     it([32m'should import Next.js core modules'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.toBeDefined (__tests__/imports/external-imports.test.tsx:26:35)

  \u25cf External NPM Dependencies Import Tests  UI library imports  should import Radix UI components

    Cannot find module '@radix-ui/react-popover' from '__tests__/imports/external-imports.test.tsx'

    [0m [90m  95 |[39m       expect(radixProgress)[33m.[39mtoBeDefined()[33m;[39m
     [90m  96 |[39m
    [31m[1m>[22m[39m[90m  97 |[39m       [36mconst[39m radixPopover [33m=[39m require([32m'@radix-ui/react-popover'[39m)[33m;[39m
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m  98 |[39m       expect(radixPopover)[33m.[39mtoBeDefined()[33m;[39m
     [90m  99 |[39m
     [90m 100 |[39m       [36mconst[39m radixAvatar [33m=[39m require([32m'@radix-ui/react-avatar'[39m)[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.require (__tests__/imports/external-imports.test.tsx:97:28)

  \u25cf External NPM Dependencies Import Tests  Markdown and code highlighting imports  should import React Markdown

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
      If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
      If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
      To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
      If you need a custom transformation, specify a "transform" option in your config.
      If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\react-markdown\index.js:10
    export {
    ^^^^^^

    SyntaxError: Unexpected token 'export'

    [0m [90m 181 |[39m   describe([32m'Markdown and code highlighting imports'[39m[33m,[39m () [33m=>[39m {
     [90m 182 |[39m     it([32m'should import React Markdown'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 183 |[39m       [36mconst[39m reactMarkdown [33m=[39m require([32m'react-markdown'[39m)[33m;[39m
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 184 |[39m       expect(reactMarkdown)[33m.[39mtoBeDefined()[33m;[39m
     [90m 185 |[39m     })[33m;[39m
     [90m 186 |[39m[0m

      at Runtime.createScriptFromCode (node_modules/jest-runtime/build/index.js:1316:40)
      at Object.require (__tests__/imports/external-imports.test.tsx:183:29)

  \u25cf External NPM Dependencies Import Tests  Markdown and code highlighting imports  should import remark-gfm

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
      If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
      If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
      To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
      If you need a custom transformation, specify a "transform" option in your config.
      If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\remark-gfm\index.js:2
    export {default} from './lib/index.js'
    ^^^^^^

    SyntaxError: Unexpected token 'export'

    [0m [90m 186 |[39m
     [90m 187 |[39m     it([32m'should import remark-gfm'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 188 |[39m       [36mconst[39m remarkGfm [33m=[39m require([32m'remark-gfm'[39m)[33m;[39m
     [90m     |[39m                         [31m[1m^[22m[39m
     [90m 189 |[39m       expect(remarkGfm)[33m.[39mtoBeDefined()[33m;[39m
     [90m 190 |[39m     })[33m;[39m
     [90m 191 |[39m[0m

      at Runtime.createScriptFromCode (node_modules/jest-runtime/build/index.js:1316:40)
      at Object.require (__tests__/imports/external-imports.test.tsx:188:25)

  \u25cf External NPM Dependencies Import Tests  Markdown and code highlighting imports  should import syntax highlighter styles

    expect(received).toBeDefined()

    Received: undefined

    [0m [90m 200 |[39m       expect(styles)[33m.[39mtoBeDefined()[33m;[39m
     [90m 201 |[39m       expect(styles[33m.[39moneDark)[33m.[39mtoBeDefined()[33m;[39m
    [31m[1m>[22m[39m[90m 202 |[39m       expect(styles[33m.[39moneLight)[33m.[39mtoBeDefined()[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 203 |[39m     })[33m;[39m
     [90m 204 |[39m   })[33m;[39m
     [90m 205 |[39m[0m

      at Object.toBeDefined (__tests__/imports/external-imports.test.tsx:202:31)

  \u25cf External NPM Dependencies Import Tests  Development and testing imports  should import React Testing Library

    Hooks cannot be defined inside tests. Hook of type "afterEach" is nested within "should import React Testing Library".

    [0m [90m 236 |[39m
     [90m 237 |[39m     it([32m'should import React Testing Library'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 238 |[39m       [36mconst[39m rtl [33m=[39m require([32m'@testing-library/react'[39m)[33m;[39m
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 239 |[39m       expect(rtl)[33m.[39mtoBeDefined()[33m;[39m
     [90m 240 |[39m       expect(rtl[33m.[39mrender)[33m.[39mtoBeDefined()[33m;[39m
     [90m 241 |[39m       expect(rtl[33m.[39mscreen)[33m.[39mtoBeDefined()[33m;[39m[0m

      at eventHandler (node_modules/jest-circus/build/jestAdapterInit.js:111:44)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/index.js:27:5)
      at Object.require (__tests__/imports/external-imports.test.tsx:238:19)

  \u25cf External NPM Dependencies Import Tests  Development and testing imports  should import React Testing Library

    Hooks cannot be defined inside tests. Hook of type "beforeAll" is nested within "should import React Testing Library".

    [0m [90m 236 |[39m
     [90m 237 |[39m     it([32m'should import React Testing Library'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 238 |[39m       [36mconst[39m rtl [33m=[39m require([32m'@testing-library/react'[39m)[33m;[39m
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 239 |[39m       expect(rtl)[33m.[39mtoBeDefined()[33m;[39m
     [90m 240 |[39m       expect(rtl[33m.[39mrender)[33m.[39mtoBeDefined()[33m;[39m
     [90m 241 |[39m       expect(rtl[33m.[39mscreen)[33m.[39mtoBeDefined()[33m;[39m[0m

      at eventHandler (node_modules/jest-circus/build/jestAdapterInit.js:111:44)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/index.js:44:5)
      at Object.require (__tests__/imports/external-imports.test.tsx:238:19)

  \u25cf External NPM Dependencies Import Tests  Development and testing imports  should import React Testing Library

    Hooks cannot be defined inside tests. Hook of type "afterAll" is nested within "should import React Testing Library".

    [0m [90m 236 |[39m
     [90m 237 |[39m     it([32m'should import React Testing Library'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 238 |[39m       [36mconst[39m rtl [33m=[39m require([32m'@testing-library/react'[39m)[33m;[39m
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 239 |[39m       expect(rtl)[33m.[39mtoBeDefined()[33m;[39m
     [90m 240 |[39m       expect(rtl[33m.[39mrender)[33m.[39mtoBeDefined()[33m;[39m
     [90m 241 |[39m       expect(rtl[33m.[39mscreen)[33m.[39mtoBeDefined()[33m;[39m[0m

      at eventHandler (node_modules/jest-circus/build/jestAdapterInit.js:111:44)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/index.js:48:5)
      at Object.require (__tests__/imports/external-imports.test.tsx:238:19)

  \u25cf External NPM Dependencies Import Tests  Development and testing imports  should import Testing Library user-event

    Hooks cannot be defined inside tests. Hook of type "afterEach" is nested within "should import Testing Library user-event".

    [0m [90m 247 |[39m
     [90m 248 |[39m     it([32m'should import Testing Library user-event'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 249 |[39m       [36mconst[39m userEvent [33m=[39m require([32m'@testing-library/user-event'[39m)[33m;[39m
     [90m     |[39m                         [31m[1m^[22m[39m
     [90m 250 |[39m       expect(userEvent)[33m.[39mtoBeDefined()[33m;[39m
     [90m 251 |[39m       expect(userEvent[33m.[39m[36mdefault[39m)[33m.[39mtoBeDefined()[33m;[39m
     [90m 252 |[39m     })[33m;[39m[0m

      at eventHandler (node_modules/jest-circus/build/jestAdapterInit.js:111:44)
      at Object.<anonymous> (node_modules/@testing-library/user-event/dist/cjs/utils/dataTransfer/Clipboard.js:158:7)
      at Object.<anonymous> (node_modules/@testing-library/user-event/dist/cjs/event/behavior/click.js:4:1)
      at Object.<anonymous> (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:3:1)
      at Object.<anonymous> (node_modules/@testing-library/user-event/dist/cjs/document/patchFocus.js:3:21)
      at Object.<anonymous> (node_modules/@testing-library/user-event/dist/cjs/setup/setup.js:3:18)
      at Object.<anonymous> (node_modules/@testing-library/user-event/dist/cjs/setup/index.js:3:13)
      at Object.<anonymous> (node_modules/@testing-library/user-event/dist/cjs/index.js:5:13)
      at Object.require (__tests__/imports/external-imports.test.tsx:249:25)

  \u25cf External NPM Dependencies Import Tests  Development and testing imports  should import Testing Library user-event

    Hooks cannot be defined inside tests. Hook of type "afterAll" is nested within "should import Testing Library user-event".

    [0m [90m 247 |[39m
     [90m 248 |[39m     it([32m'should import Testing Library user-event'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 249 |[39m       [36mconst[39m userEvent [33m=[39m require([32m'@testing-library/user-event'[39m)[33m;[39m
     [90m     |[39m                         [31m[1m^[22m[39m
     [90m 250 |[39m       expect(userEvent)[33m.[39mtoBeDefined()[33m;[39m
     [90m 251 |[39m       expect(userEvent[33m.[39m[36mdefault[39m)[33m.[39mtoBeDefined()[33m;[39m
     [90m 252 |[39m     })[33m;[39m[0m

      at eventHandler (node_modules/jest-circus/build/jestAdapterInit.js:111:44)
      at Object.<anonymous> (node_modules/@testing-library/user-event/dist/cjs/utils/dataTransfer/Clipboard.js:161:7)
      at Object.<anonymous> (node_modules/@testing-library/user-event/dist/cjs/event/behavior/click.js:4:1)
      at Object.<anonymous> (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:3:1)
      at Object.<anonymous> (node_modules/@testing-library/user-event/dist/cjs/document/patchFocus.js:3:21)
      at Object.<anonymous> (node_modules/@testing-library/user-event/dist/cjs/setup/setup.js:3:18)
      at Object.<anonymous> (node_modules/@testing-library/user-event/dist/cjs/setup/index.js:3:13)
      at Object.<anonymous> (node_modules/@testing-library/user-event/dist/cjs/index.js:5:13)
      at Object.require (__tests__/imports/external-imports.test.tsx:249:25)

  \u25cf External NPM Dependencies Import Tests  TypeScript type imports  should import TypeScript type packages

    expect(received).not.toThrow()

    Error name:    "Error"
    Error message: "Cannot find module '@types/react' from '__tests__/imports/external-imports.test.tsx'"

        [0m [90m 267 |[39m     it([32m'should import TypeScript type packages'[39m[33m,[39m () [33m=>[39m {
         [90m 268 |[39m       [90m// These are type-only packages, so we just check they don't throw[39m
        [31m[1m>[22m[39m[90m 269 |[39m       expect(() [33m=>[39m require([32m'@types/react'[39m))[33m.[39mnot[33m.[39mtoThrow()[33m;[39m
         [90m     |[39m                    [31m[1m^[22m[39m
         [90m 270 |[39m       expect(() [33m=>[39m require([32m'@types/react-dom'[39m))[33m.[39mnot[33m.[39mtoThrow()[33m;[39m
         [90m 271 |[39m       expect(() [33m=>[39m require([32m'@types/node'[39m))[33m.[39mnot[33m.[39mtoThrow()[33m;[39m
         [90m 272 |[39m     })[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at require (__tests__/imports/external-imports.test.tsx:269:20)
      at Object.<anonymous> (node_modules/expect/build/index.js:1824:9)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:2235:93)
      at Object.toThrow (__tests__/imports/external-imports.test.tsx:269:49)
      at Object.toThrow (__tests__/imports/external-imports.test.tsx:269:49)

  \u25cf External NPM Dependencies Import Tests  Critical imports batch test  should successfully import all critical dependencies

    expect(received).toEqual(expected) // deep equality

    - Expected  - 1
    + Received  + 3

    - Array []
    + Array [
    +   "react-markdown",
    + ]

    [0m [90m 318 |[39m       })[33m;[39m
     [90m 319 |[39m
    [31m[1m>[22m[39m[90m 320 |[39m       expect(failedImports)[33m.[39mtoEqual([])[33m;[39m
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 321 |[39m     })[33m;[39m
     [90m 322 |[39m   })[33m;[39m
     [90m 323 |[39m[0m

      at Object.toEqual (__tests__/imports/external-imports.test.tsx:320:29)

FAIL __tests__/auth/context.test.tsx
  \u25cf Console

    console.log
      Development mode detected. Has logged out: false

      at log (auth/context.tsx:65:17)

    console.log
      Attempting auto dev login...

      at log (auth/context.tsx:69:19)

    console.error
      Failed to fetch auth config: Error: Network error
          at Object.<anonymous> (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\__tests__\auth\context.test.tsx:283:66)
          at Promise.finally.completed (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\jest-circus\build\jestAdapterInit.js:1559:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\jest-circus\build\jestAdapterInit.js:1499:10)
          at _callCircusTest (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\jest-circus\build\jestAdapterInit.js:1009:40)
          at runNextTicks (node:internal/process/task_queues:65:5)
          at listOnTimeout (node:internal/timers:569:9)
          at processTimers (node:internal/timers:543:7)
          at _runTest (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\jest-circus\build\jestAdapterInit.js:949:3)
          at _runTestsForDescribeBlock (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\jest-circus\build\jestAdapterInit.js:839:13)
          at _runTestsForDescribeBlock (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\jest-circus\build\jestAdapterInit.js:829:11)
          at _runTestsForDescribeBlock (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\jest-circus\build\jestAdapterInit.js:829:11)
          at run (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\jest-circus\build\jestAdapterInit.js:757:3)
          at runAndTransformResultsToJestFormat (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\jest-circus\build\jestAdapterInit.js:1920:21)
          at jestAdapter (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\jest-circus\build\runner.js:101:19)
          at runTestInternal (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\jest-runner\build\testWorker.js:275:16)
          at runTest (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\jest-runner\build\testWorker.js:343:7)
          at Object.worker (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\jest-runner\build\testWorker.js:497:12)

    [0m [90m 121 |[39m       [36mreturn[39m[33m;[39m
     [90m 122 |[39m     }
    [31m[1m>[22m[39m[90m 123 |[39m     originalError[33m.[39mcall(console[33m,[39m [33m...[39margs)[33m;[39m
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 124 |[39m   }[33m;[39m
     [90m 125 |[39m   
     [90m 126 |[39m   console[33m.[39mwarn [33m=[39m ([33m...[39margs[33m:[39m any[]) [33m=>[39m {[0m

      at console.call [as error] (jest.setup.ts:123:19)
      at error (auth/context.tsx:83:15)

    console.log
      Development mode detected. Has logged out: false

      at log (auth/context.tsx:65:17)

    console.log
      Attempting auto dev login...

      at log (auth/context.tsx:69:19)

    console.error
      Failed to fetch auth config: Error: Network error
          at Object.<anonymous> (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\__tests__\auth\context.test.tsx:355:66)
          at Promise.finally.completed (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\jest-circus\build\jestAdapterInit.js:1559:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\jest-circus\build\jestAdapterInit.js:1499:10)
          at _callCircusTest (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\jest-circus\build\jestAdapterInit.js:1009:40)
          at _runTest (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\jest-circus\build\jestAdapterInit.js:949:3)
          at _runTestsForDescribeBlock (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\jest-circus\build\jestAdapterInit.js:839:13)
          at _runTestsForDescribeBlock (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\jest-circus\build\jestAdapterInit.js:829:11)
          at _runTestsForDescribeBlock (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\jest-circus\build\jestAdapterInit.js:829:11)
          at run (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\jest-circus\build\jestAdapterInit.js:757:3)
          at runAndTransformResultsToJestFormat (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\jest-circus\build\jestAdapterInit.js:1920:21)
          at jestAdapter (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\jest-circus\build\runner.js:101:19)
          at runTestInternal (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\jest-runner\build\testWorker.js:275:16)
          at runTest (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\jest-runner\build\testWorker.js:343:7)
          at Object.worker (C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\jest-runner\build\testWorker.js:497:12)

    [0m [90m 121 |[39m       [36mreturn[39m[33m;[39m
     [90m 122 |[39m     }
    [31m[1m>[22m[39m[90m 123 |[39m     originalError[33m.[39mcall(console[33m,[39m [33m...[39margs)[33m;[39m
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 124 |[39m   }[33m;[39m
     [90m 125 |[39m   
     [90m 126 |[39m   console[33m.[39mwarn [33m=[39m ([33m...[39margs[33m:[39m any[]) [33m=>[39m {[0m

      at console.call [as error] (jest.setup.ts:123:19)
      at error (auth/context.tsx:83:15)

    console.error
      You seem to have overlapping act() calls, this is not supported. Be sure to await previous act() calls before making a new one.

    [0m [90m 121 |[39m       [36mreturn[39m[33m;[39m
     [90m 122 |[39m     }
    [31m[1m>[22m[39m[90m 123 |[39m     originalError[33m.[39mcall(console[33m,[39m [33m...[39margs)[33m;[39m
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 124 |[39m   }[33m;[39m
     [90m 125 |[39m   
     [90m 126 |[39m   console[33m.[39mwarn [33m=[39m ([33m...[39margs[33m:[39m any[]) [33m=>[39m {[0m

      at console.call [as error] (jest.setup.ts:123:19)
      at popActScope (node_modules/react/cjs/react.development.js:532:17)
      at node_modules/react/cjs/react.development.js:819:17

    console.error
      You seem to have overlapping act() calls, this is not supported. Be sure to await previous act() calls before making a new one.

    [0m [90m 121 |[39m       [36mreturn[39m[33m;[39m
     [90m 122 |[39m     }
    [31m[1m>[22m[39m[90m 123 |[39m     originalError[33m.[39mcall(console[33m,[39m [33m...[39margs)[33m;[39m
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 124 |[39m   }[33m;[39m
     [90m 125 |[39m   
     [90m 126 |[39m   console[33m.[39mwarn [33m=[39m ([33m...[39margs[33m:[39m any[]) [33m=>[39m {[0m

      at console.call [as error] (jest.setup.ts:123:19)
      at popActScope (node_modules/react/cjs/react.development.js:532:17)
      at node_modules/react/cjs/react.development.js:819:17

    console.error
      You seem to have overlapping act() calls, this is not supported. Be sure to await previous act() calls before making a new one.

    [0m [90m 121 |[39m       [36mreturn[39m[33m;[39m
     [90m 122 |[39m     }
    [31m[1m>[22m[39m[90m 123 |[39m     originalError[33m.[39mcall(console[33m,[39m [33m...[39margs)[33m;[39m
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 124 |[39m   }[33m;[39m
     [90m 125 |[39m   
     [90m 126 |[39m   console[33m.[39mwarn [33m=[39m ([33m...[39margs[33m:[39m any[]) [33m=>[39m {[0m

      at console.call [as error] (jest.setup.ts:123:19)
      at popActScope (node_modules/react/cjs/react.development.js:532:17)
      at node_modules/react/cjs/react.development.js:819:17

  \u25cf AuthContext  Token Management  should handle token refresh mechanism

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "mock-jwt-token-123"

    Number of calls: 0

    Ignored nodes: comments, script, style
    [36m<html>[39m
      [36m<head />[39m
      [36m<body>[39m
        [36m<div>[39m
          [36m<div>[39m
            [0mTest Content[0m
          [36m</div>[39m
        [36m</div>[39m
      [36m</body>[39m
    [36m</html>[39m

    [0m [90m 190 |[39m       
     [90m 191 |[39m       [36mawait[39m waitFor(() [33m=>[39m {
    [31m[1m>[22m[39m[90m 192 |[39m         expect(jwtDecode)[33m.[39mtoHaveBeenCalledWith(mockToken)[33m;[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 193 |[39m       })[33m;[39m
     [90m 194 |[39m     })[33m;[39m
     [90m 195 |[39m   })[33m;[39m[0m

      at toHaveBeenCalledWith (__tests__/auth/context.test.tsx:192:27)
      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)
      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)
      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)
      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)

  \u25cf AuthContext  Development Mode  should auto-login in development mode when not logged out

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"development_mode": true, "endpoints": {"callback": "http://localhost:8000/auth/callback", "dev_login": "http://localhost:8000/auth/dev-login", "login": "http://localhost:8000/auth/login", "logout": "http://localhost:8000/auth/logout"}}

    Number of calls: 0

    Ignored nodes: comments, script, style
    [36m<html>[39m
      [36m<head />[39m
      [36m<body>[39m
        [36m<div>[39m
          [36m<div>[39m
            [0mTest Content[0m
          [36m</div>[39m
        [36m</div>[39m
      [36m</body>[39m
    [36m</html>[39m

    [0m [90m 211 |[39m       
     [90m 212 |[39m       [36mawait[39m waitFor(() [33m=>[39m {
    [31m[1m>[22m[39m[90m 213 |[39m         expect(authService[33m.[39mhandleDevLogin)[33m.[39mtoHaveBeenCalledWith(devConfig)[33m;[39m
     [90m     |[39m                                            [31m[1m^[22m[39m
     [90m 214 |[39m         expect(jwtDecode)[33m.[39mtoHaveBeenCalledWith(mockToken)[33m;[39m
     [90m 215 |[39m         expect(mockAuthStore[33m.[39mlogin)[33m.[39mtoHaveBeenCalled()[33m;[39m
     [90m 216 |[39m       })[33m;[39m[0m

      at toHaveBeenCalledWith (__tests__/auth/context.test.tsx:213:44)
      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)
      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)
      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)
      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)

  \u25cf AuthContext  Login Functionality  should handle login action

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

    [0m [90m 276 |[39m       })[33m;[39m
     [90m 277 |[39m       
    [31m[1m>[22m[39m[90m 278 |[39m       expect(authService[33m.[39mclearDevLogoutFlag)[33m.[39mtoHaveBeenCalled()[33m;[39m
     [90m     |[39m                                              [31m[1m^[22m[39m
     [90m 279 |[39m       expect(authService[33m.[39mhandleLogin)[33m.[39mtoHaveBeenCalledWith(mockAuthConfig)[33m;[39m
     [90m 280 |[39m     })[33m;[39m
     [90m 281 |[39m[0m

      at Object.toHaveBeenCalled (__tests__/auth/context.test.tsx:278:46)

  \u25cf AuthContext  Logout Functionality  should handle logout action

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"development_mode": false, "endpoints": {"callback": "http://localhost:8000/auth/callback", "dev_login": "http://localhost:8000/auth/dev-login", "login": "http://localhost:8000/auth/login", "logout": "http://localhost:8000/auth/logout"}}

    Number of calls: 0

    [0m [90m 323 |[39m       })[33m;[39m
     [90m 324 |[39m       
    [31m[1m>[22m[39m[90m 325 |[39m       expect(authService[33m.[39mhandleLogout)[33m.[39mtoHaveBeenCalledWith(mockAuthConfig)[33m;[39m
     [90m     |[39m                                        [31m[1m^[22m[39m
     [90m 326 |[39m       expect(mockAuthStore[33m.[39mlogout)[33m.[39mtoHaveBeenCalled()[33m;[39m
     [90m 327 |[39m     })[33m;[39m
     [90m 328 |[39m[0m

      at Object.toHaveBeenCalledWith (__tests__/auth/context.test.tsx:325:40)

  \u25cf AuthContext  Logout Functionality  should set dev logout flag in development mode

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

    [0m [90m 348 |[39m       })[33m;[39m
     [90m 349 |[39m       
    [31m[1m>[22m[39m[90m 350 |[39m       expect(authService[33m.[39msetDevLogoutFlag)[33m.[39mtoHaveBeenCalled()[33m;[39m
     [90m     |[39m                                            [31m[1m^[22m[39m
     [90m 351 |[39m       expect(authService[33m.[39mhandleLogout)[33m.[39mtoHaveBeenCalledWith(devConfig)[33m;[39m
     [90m 352 |[39m     })[33m;[39m
     [90m 353 |[39m[0m

      at Object.toHaveBeenCalled (__tests__/auth/context.test.tsx:350:44)

  \u25cf AuthContext  Sync with Auth Store  should sync logout with Zustand store

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

    [0m [90m 513 |[39m       })[33m;[39m
     [90m 514 |[39m       
    [31m[1m>[22m[39m[90m 515 |[39m       expect(mockAuthStore[33m.[39mlogout)[33m.[39mtoHaveBeenCalled()[33m;[39m
     [90m     |[39m                                    [31m[1m^[22m[39m
     [90m 516 |[39m     })[33m;[39m
     [90m 517 |[39m   })[33m;[39m
     [90m 518 |[39m[0m

      at Object.toHaveBeenCalled (__tests__/auth/context.test.tsx:515:36)

  \u25cf AuthContext  Edge Cases  should handle concurrent auth operations

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

    [0m [90m 584 |[39m       
     [90m 585 |[39m       [90m// Verify operations were called[39m
    [31m[1m>[22m[39m[90m 586 |[39m       expect(authService[33m.[39mhandleLogin)[33m.[39mtoHaveBeenCalled()[33m;[39m
     [90m     |[39m                                       [31m[1m^[22m[39m
     [90m 587 |[39m       expect(authService[33m.[39mhandleLogout)[33m.[39mtoHaveBeenCalled()[33m;[39m
     [90m 588 |[39m     })[33m;[39m
     [90m 589 |[39m   })[33m;[39m[0m

      at Object.toHaveBeenCalled (__tests__/auth/context.test.tsx:586:39)

C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\components\chat\MessageInput.tsx:146
            const thread = await _threadService.ThreadService.getThread(threadId);
                                                              ^

[TypeError: _threadService.ThreadService.getThread is not a function]

Node.js v24.4.1
C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\components\chat\ThreadSidebar.tsx:87
            setLoading(false);
            ^

[TypeError: setLoading is not a function]

Node.js v24.4.1
C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\components\chat\MessageInput.tsx:146
            const thread = await _threadService.ThreadService.getThread(threadId);
                                                              ^

[TypeError: _threadService.ThreadService.getThread is not a function]

Node.js v24.4.1
FAIL __tests__/components/ChatHistorySection.test.tsx (8.596 s)
  \u25cf Console

    console.error
      Failed to load threads: Network error

    [0m [90m 121 |[39m       [36mreturn[39m[33m;[39m
     [90m 122 |[39m     }
    [31m[1m>[22m[39m[90m 123 |[39m     originalError[33m.[39mcall(console[33m,[39m [33m...[39margs)[33m;[39m
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 124 |[39m   }[33m;[39m
     [90m 125 |[39m   
     [90m 126 |[39m   console[33m.[39mwarn [33m=[39m ([33m...[39margs[33m:[39m any[]) [33m=>[39m {[0m

      at console.call [as error] (jest.setup.ts:123:19)
      at error (components/ChatHistorySection.tsx:54:15)

    console.error
      Failed to delete thread: Failed to delete

    [0m [90m 121 |[39m       [36mreturn[39m[33m;[39m
     [90m 122 |[39m     }
    [31m[1m>[22m[39m[90m 123 |[39m     originalError[33m.[39mcall(console[33m,[39m [33m...[39margs)[33m;[39m
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 124 |[39m   }[33m;[39m
     [90m 125 |[39m   
     [90m 126 |[39m   console[33m.[39mwarn [33m=[39m ([33m...[39margs[33m:[39m any[]) [33m=>[39m {[0m

      at console.call [as error] (jest.setup.ts:123:19)
      at error (components/ChatHistorySection.tsx:130:15)

    console.error
      Failed to delete thread: Failed to delete

    [0m [90m 121 |[39m       [36mreturn[39m[33m;[39m
     [90m 122 |[39m     }
    [31m[1m>[22m[39m[90m 123 |[39m     originalError[33m.[39mcall(console[33m,[39m [33m...[39margs)[33m;[39m
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 124 |[39m   }[33m;[39m
     [90m 125 |[39m   
     [90m 126 |[39m   console[33m.[39mwarn [33m=[39m ([33m...[39margs[33m:[39m any[]) [33m=>[39m {[0m

      at console.call [as error] (jest.setup.ts:123:19)
      at error (components/ChatHistorySection.tsx:130:15)

    console.error
      Failed to load thread messages: Failed to load messages

    [0m [90m 121 |[39m       [36mreturn[39m[33m;[39m
     [90m 122 |[39m     }
    [31m[1m>[22m[39m[90m 123 |[39m     originalError[33m.[39mcall(console[33m,[39m [33m...[39margs)[33m;[39m
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 124 |[39m   }[33m;[39m
     [90m 125 |[39m   
     [90m 126 |[39m   console[33m.[39mwarn [33m=[39m ([33m...[39margs[33m:[39m any[]) [33m=>[39m {[0m

      at console.call [as error] (jest.setup.ts:123:19)
      at error (components/ChatHistorySection.tsx:95:15)

    console.error
      Failed to load thread messages: Cannot read properties of undefined (reading 'messages')

    [0m [90m 121 |[39m       [36mreturn[39m[33m;[39m
     [90m 122 |[39m     }
    [31m[1m>[22m[39m[90m 123 |[39m     originalError[33m.[39mcall(console[33m,[39m [33m...[39margs)[33m;[39m
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 124 |[39m   }[33m;[39m
     [90m 125 |[39m   
     [90m 126 |[39m   console[33m.[39mwarn [33m=[39m ([33m...[39margs[33m:[39m any[]) [33m=>[39m {[0m

      at console.call [as error] (jest.setup.ts:123:19)
      at error (components/ChatHistorySection.tsx:95:15)

    console.error
      Failed to create thread: Failed to create thread

    [0m [90m 121 |[39m       [36mreturn[39m[33m;[39m
     [90m 122 |[39m     }
    [31m[1m>[22m[39m[90m 123 |[39m     originalError[33m.[39mcall(console[33m,[39m [33m...[39margs)[33m;[39m
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 124 |[39m   }[33m;[39m
     [90m 125 |[39m   
     [90m 126 |[39m   console[33m.[39mwarn [33m=[39m ([33m...[39margs[33m:[39m any[]) [33m=>[39m {[0m

      at console.call [as error] (jest.setup.ts:123:19)
      at error (components/ChatHistorySection.tsx:69:15)

    console.error
      Failed to update thread title: Cannot read properties of undefined (reading 'title')

    [0m [90m 121 |[39m       [36mreturn[39m[33m;[39m
     [90m 122 |[39m     }
    [31m[1m>[22m[39m[90m 123 |[39m     originalError[33m.[39mcall(console[33m,[39m [33m...[39margs)[33m;[39m
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 124 |[39m   }[33m;[39m
     [90m 125 |[39m   
     [90m 126 |[39m   console[33m.[39mwarn [33m=[39m ([33m...[39margs[33m:[39m any[]) [33m=>[39m {[0m

      at console.call [as error] (jest.setup.ts:123:19)
      at error (components/ChatHistorySection.tsx:113:15)

    console.error
      Failed to create thread: Cannot read properties of undefined (reading 'id')

    [0m [90m 121 |[39m       [36mreturn[39m[33m;[39m
     [90m 122 |[39m     }
    [31m[1m>[22m[39m[90m 123 |[39m     originalError[33m.[39mcall(console[33m,[39m [33m...[39margs)[33m;[39m
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 124 |[39m   }[33m;[39m
     [90m 125 |[39m   
     [90m 126 |[39m   console[33m.[39mwarn [33m=[39m ([33m...[39margs[33m:[39m any[]) [33m=>[39m {[0m

      at console.call [as error] (jest.setup.ts:123:19)
      at error (components/ChatHistorySection.tsx:69:15)

    console.error
      Failed to load threads: _threadService.ThreadService.listThreads is not a function

    [0m [90m 121 |[39m       [36mreturn[39m[33m;[39m
     [90m 122 |[39m     }
    [31m[1m>[22m[39m[90m 123 |[39m     originalError[33m.[39mcall(console[33m,[39m [33m...[39margs)[33m;[39m
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 124 |[39m   }[33m;[39m
     [90m 125 |[39m   
     [90m 126 |[39m   console[33m.[39mwarn [33m=[39m ([33m...[39margs[33m:[39m any[]) [33m=>[39m {[0m

      at console.call [as error] (jest.setup.ts:123:19)
      at error (components/ChatHistorySection.tsx:54:15)
      at loadThreads (components/ChatHistorySection.tsx:42:7)
      at Object.react-stack-bottom-frame (node_modules/react-dom/cjs/react-dom-client.development.js:23949:20)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:11905:29)
      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:12028:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13841:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)
      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13853:11)
      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15737:9)
      at node_modules/react-dom/cjs/react-dom-client.development.js:15379:15
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (__tests__/components/ChatHistorySection.test.tsx:1520:35)

  \u25cf ChatHistorySection  Edge Cases and Complete Coverage  should handle router push failure

    Navigation failed

    [0m [90m 1280 |[39m       
     [90m 1281 |[39m       [90m// Set up the rejection after render but before click[39m
    [31m[1m>[22m[39m[90m 1282 |[39m       mockRouter[33m.[39mpush[33m.[39mmockRejectedValueOnce([36mnew[39m [33mError[39m([32m'Navigation failed'[39m))[33m;[39m
     [90m      |[39m                                             [31m[1m^[22m[39m
     [90m 1283 |[39m       
     [90m 1284 |[39m       [36mconst[39m secondThread [33m=[39m screen[33m.[39mgetByText([32m'Second Conversation'[39m)[33m.[39mclosest([32m'.group'[39m)[33m;[39m
     [90m 1285 |[39m       fireEvent[33m.[39mclick(secondThread[33m![39m)[33m;[39m[0m

      at Object.<anonymous> (__tests__/components/ChatHistorySection.test.tsx:1282:45)

  \u25cf ChatHistorySection  Edge Cases and Complete Coverage  should handle router push failure

    Navigation failed

    [0m [90m 1280 |[39m       
     [90m 1281 |[39m       [90m// Set up the rejection after render but before click[39m
    [31m[1m>[22m[39m[90m 1282 |[39m       mockRouter[33m.[39mpush[33m.[39mmockRejectedValueOnce([36mnew[39m [33mError[39m([32m'Navigation failed'[39m))[33m;[39m
     [90m      |[39m                                             [31m[1m^[22m[39m
     [90m 1283 |[39m       
     [90m 1284 |[39m       [36mconst[39m secondThread [33m=[39m screen[33m.[39mgetByText([32m'Second Conversation'[39m)[33m.[39mclosest([32m'.group'[39m)[33m;[39m
     [90m 1285 |[39m       fireEvent[33m.[39mclick(secondThread[33m![39m)[33m;[39m[0m

      at Object.<anonymous> (__tests__/components/ChatHistorySection.test.tsx:1282:45)

  \u25cf ChatHistorySection  Edge Cases and Complete Coverage  should handle router push failure

    Navigation failed

    [0m [90m 1280 |[39m       
     [90m 1281 |[39m       [90m// Set up the rejection after render but before click[39m
    [31m[1m>[22m[39m[90m 1282 |[39m       mockRouter[33m.[39mpush[33m.[39mmockRejectedValueOnce([36mnew[39m [33mError[39m([32m'Navigation failed'[39m))[33m;[39m
     [90m      |[39m                                             [31m[1m^[22m[39m
     [90m 1283 |[39m       
     [90m 1284 |[39m       [36mconst[39m secondThread [33m=[39m screen[33m.[39mgetByText([32m'Second Conversation'[39m)[33m.[39mclosest([32m'.group'[39m)[33m;[39m
     [90m 1285 |[39m       fireEvent[33m.[39mclick(secondThread[33m![39m)[33m;[39m[0m

      at Object.<anonymous> (__tests__/components/ChatHistorySection.test.tsx:1282:45)

  \u25cf ChatHistorySection  Edge Cases and Complete Coverage  should handle router push failure

    Navigation failed

    [0m [90m 1280 |[39m       
     [90m 1281 |[39m       [90m// Set up the rejection after render but before click[39m
    [31m[1m>[22m[39m[90m 1282 |[39m       mockRouter[33m.[39mpush[33m.[39mmockRejectedValueOnce([36mnew[39m [33mError[39m([32m'Navigation failed'[39m))[33m;[39m
     [90m      |[39m                                             [31m[1m^[22m[39m
     [90m 1283 |[39m       
     [90m 1284 |[39m       [36mconst[39m secondThread [33m=[39m screen[33m.[39mgetByText([32m'Second Conversation'[39m)[33m.[39mclosest([32m'.group'[39m)[33m;[39m
     [90m 1285 |[39m       fireEvent[33m.[39mclick(secondThread[33m![39m)[33m;[39m[0m

      at Object.<anonymous> (__tests__/components/ChatHistorySection.test.tsx:1282:45)

C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\components\chat\ThreadSidebar.tsx:87
            setLoading(false);
            ^

[TypeError: setLoading is not a function]

Node.js v24.4.1
C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\components\chat\MessageInput.tsx:146
            const thread = await _threadService.ThreadService.getThread(threadId);
                                                              ^

[TypeError: _threadService.ThreadService.getThread is not a function]

Node.js v24.4.1
C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\components\chat\ThreadSidebar.tsx:87
            setLoading(false);
            ^

[TypeError: setLoading is not a function]

Node.js v24.4.1
FAIL __tests__/chat/chatUIUXCore.test.tsx
  \u25cf Test suite failed to run

    Jest worker encountered 4 child process exceptions, exceeding retry limit

      at ChildProcessWorker.initialize (node_modules/jest-worker/build/index.js:805:21)

FAIL __tests__/components/chat/MainChat.test.tsx (12.848 s)
  \u25cf MainChat  Agent status updates  should handle toggle collapse manually

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 361 |[39m     })[33m;[39m
     [90m 362 |[39m
    [31m[1m>[22m[39m[90m 363 |[39m     it([32m'should handle toggle collapse manually'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 364 |[39m       (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m 365 |[39m         [33m...[39mmockStore[33m,[39m
     [90m 366 |[39m         isProcessing[33m:[39m [36mtrue[39m[33m,[39m[0m

      at it (__tests__/components/chat/MainChat.test.tsx:363:5)
      at describe (__tests__/components/chat/MainChat.test.tsx:240:3)
      at Object.describe (__tests__/components/chat/MainChat.test.tsx:34:1)

  \u25cf MainChat  Error recovery and reconnection  should handle store errors gracefully

    expect(received).not.toThrow()

    Error name:    "Error"
    Error message: "Store initialization failed"

        [0m [90m 388 |[39m     it([32m'should handle store errors gracefully'[39m[33m,[39m () [33m=>[39m {
         [90m 389 |[39m       (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockImplementation(() [33m=>[39m {
        [31m[1m>[22m[39m[90m 390 |[39m         [36mthrow[39m [36mnew[39m [33mError[39m([32m'Store initialization failed'[39m)[33m;[39m
         [90m     |[39m               [31m[1m^[22m[39m
         [90m 391 |[39m       })[33m;[39m
         [90m 392 |[39m       
         [90m 393 |[39m       [90m// Should not crash the component[39m[0m

      at __tests__/components/chat/MainChat.test.tsx:390:15
      at MainChat (components/chat/MainChat.tsx:22:26)
      at Object.react-stack-bottom-frame (node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at __tests__/components/chat/MainChat.test.tsx:394:26
      at Object.<anonymous> (node_modules/expect/build/index.js:1824:9)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:2235:93)
      at Object.toThrow (__tests__/components/chat/MainChat.test.tsx:394:46)
      at Object.toThrow (__tests__/components/chat/MainChat.test.tsx:394:46)

  \u25cf MainChat  Message history loading  should update history when new messages arrive

    expect(element).not.toBeInTheDocument()

    expected document not to contain element, found <div data-testid="example-prompts">Example Prompts</div> instead

    [0m [90m 567 |[39m       
     [90m 568 |[39m       [90m// Example prompts should disappear[39m
    [31m[1m>[22m[39m[90m 569 |[39m       expect(screen[33m.[39mqueryByTestId([32m'example-prompts'[39m))[33m.[39mnot[33m.[39mtoBeInTheDocument()[33m;[39m
     [90m     |[39m                                                           [31m[1m^[22m[39m
     [90m 570 |[39m     })[33m;[39m
     [90m 571 |[39m
     [90m 572 |[39m     it([32m'should handle message deletion from history'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.toBeInTheDocument (__tests__/components/chat/MainChat.test.tsx:569:59)

  \u25cf MainChat  UI layout and responsiveness  should apply correct CSS classes

    expect(element).toHaveClass("flex flex-col h-full")

    Expected the element to have class:
      flex flex-col h-full
    Received:
      flex h-full bg-gradient-to-br from-gray-50 via-white to-gray-50

    [0m [90m 611 |[39m       
     [90m 612 |[39m       [36mconst[39m mainContainer [33m=[39m container[33m.[39mfirstChild[33m;[39m
    [31m[1m>[22m[39m[90m 613 |[39m       expect(mainContainer)[33m.[39mtoHaveClass([32m'flex'[39m[33m,[39m [32m'flex-col'[39m[33m,[39m [32m'h-full'[39m)[33m;[39m
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 614 |[39m     })[33m;[39m
     [90m 615 |[39m
     [90m 616 |[39m     it([32m'should handle window resize'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.toHaveClass (__tests__/components/chat/MainChat.test.tsx:613:29)

  \u25cf MainChat  Performance and optimization  should clean up timers on unmount

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

    [0m [90m 708 |[39m       
     [90m 709 |[39m       [90m// Any active timers should be cleared[39m
    [31m[1m>[22m[39m[90m 710 |[39m       expect(clearTimeoutSpy)[33m.[39mtoHaveBeenCalled()[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 711 |[39m       
     [90m 712 |[39m       clearTimeoutSpy[33m.[39mmockRestore()[33m;[39m
     [90m 713 |[39m     })[33m;[39m[0m

      at Object.toHaveBeenCalled (__tests__/components/chat/MainChat.test.tsx:710:31)

  \u25cf MainChat  Integration with store and hooks  should handle store reset

    expect(element).not.toBeInTheDocument()

    expected document not to contain element, found <div data-collapsed="false" data-testid="response-card"><button>Toggle</button>Response Card</div> instead

    [0m [90m 777 |[39m       [90m// Should show example prompts again[39m
     [90m 778 |[39m       expect(screen[33m.[39mgetByTestId([32m'example-prompts'[39m))[33m.[39mtoBeInTheDocument()[33m;[39m
    [31m[1m>[22m[39m[90m 779 |[39m       expect(screen[33m.[39mqueryByTestId([32m'response-card'[39m))[33m.[39mnot[33m.[39mtoBeInTheDocument()[33m;[39m
     [90m     |[39m                                                         [31m[1m^[22m[39m
     [90m 780 |[39m     })[33m;[39m
     [90m 781 |[39m   })[33m;[39m
     [90m 782 |[39m[0m

      at Object.toBeInTheDocument (__tests__/components/chat/MainChat.test.tsx:779:57)

  \u25cf MainChat  Accessibility  should support keyboard navigation

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 789 |[39m     })[33m;[39m
     [90m 790 |[39m
    [31m[1m>[22m[39m[90m 791 |[39m     it([32m'should support keyboard navigation'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 792 |[39m       render([33m<[39m[33mMainChat[39m [33m/[39m[33m>[39m)[33m;[39m
     [90m 793 |[39m       
     [90m 794 |[39m       [90m// Tab through components[39m[0m

      at it (__tests__/components/chat/MainChat.test.tsx:791:5)
      at describe (__tests__/components/chat/MainChat.test.tsx:783:3)
      at Object.describe (__tests__/components/chat/MainChat.test.tsx:34:1)

FAIL __tests__/system/startup.test.tsx (13.58 s)
  \u25cf Frontend System Startup  WebSocket Connectivity  should establish WebSocket connection on startup

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "ws://localhost:8000"

    Number of calls: 0

    Ignored nodes: comments, script, style
    [36m<html>[39m
      [36m<head />[39m
      [36m<body>[39m
        [36m<div>[39m
          [36m<div>[39m
            [0mTest App[0m
          [36m</div>[39m
        [36m</div>[39m
      [36m</body>[39m
    [36m</html>[39m

    [0m [90m 167 |[39m       
     [90m 168 |[39m       [36mawait[39m waitFor(() [33m=>[39m {
    [31m[1m>[22m[39m[90m 169 |[39m         expect(global[33m.[39m[33mWebSocket[39m)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                                  [31m[1m^[22m[39m
     [90m 170 |[39m           expect[33m.[39mstringContaining([32m'ws://localhost:8000'[39m)
     [90m 171 |[39m         )[33m;[39m
     [90m 172 |[39m       })[33m;[39m[0m

      at toHaveBeenCalledWith (__tests__/system/startup.test.tsx:169:34)
      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)
      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)
      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)
      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)

  \u25cf Frontend System Startup  WebSocket Connectivity  should handle WebSocket heartbeat

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "{\"type\":\"ping\"}"

    Number of calls: 0

    Ignored nodes: comments, script, style
    [36m<html>[39m
      [36m<head />[39m
      [36m<body>[39m
        [36m<div>[39m
          [36m<div>[39m
            [0mTest[0m
          [36m</div>[39m
        [36m</div>[39m
      [36m</body>[39m
    [36m</html>[39m

    [0m [90m 198 |[39m       
     [90m 199 |[39m       [36mawait[39m waitFor(() [33m=>[39m {
    [31m[1m>[22m[39m[90m 200 |[39m         expect(mockWebSocket[33m.[39msend)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                                    [31m[1m^[22m[39m
     [90m 201 |[39m           [33mJSON[39m[33m.[39mstringify({ type[33m:[39m [32m'ping'[39m })
     [90m 202 |[39m         )[33m;[39m
     [90m 203 |[39m       })[33m;[39m[0m

      at toHaveBeenCalledWith (__tests__/system/startup.test.tsx:200:36)
      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)
      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)
      at node_modules/@testing-library/dom/dist/wait-for.js:82:9

  \u25cf Frontend System Startup  WebSocket Connectivity  should reconnect on connection loss

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 2
    Received number of calls: 0

    Ignored nodes: comments, script, style
    [36m<html>[39m
      [36m<head />[39m
      [36m<body>[39m
        [36m<div>[39m
          [36m<div>[39m
            [0mTest[0m
          [36m</div>[39m
        [36m</div>[39m
      [36m</body>[39m
    [36m</html>[39m

    [0m [90m 226 |[39m       [90m// Should attempt reconnection[39m
     [90m 227 |[39m       [36mawait[39m waitFor(() [33m=>[39m {
    [31m[1m>[22m[39m[90m 228 |[39m         expect(global[33m.[39m[33mWebSocket[39m)[33m.[39mtoHaveBeenCalledTimes([35m2[39m)[33m;[39m
     [90m     |[39m                                  [31m[1m^[22m[39m
     [90m 229 |[39m       })[33m;[39m
     [90m 230 |[39m     })[33m;[39m
     [90m 231 |[39m   })[33m;[39m[0m

      at toHaveBeenCalledTimes (__tests__/system/startup.test.tsx:228:34)
      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)
      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)
      at node_modules/@testing-library/dom/dist/wait-for.js:82:9

  \u25cf Frontend System Startup  Store Initialization  should restore persisted state

    expect(received).toBe(expected) // Object.is equality

    Expected: "test-token"
    Received: null

    [0m [90m 273 |[39m       
     [90m 274 |[39m       [90m// Verify restored state[39m
    [31m[1m>[22m[39m[90m 275 |[39m       expect(state[33m.[39mtoken)[33m.[39mtoBe([32m'test-token'[39m)[33m;[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 276 |[39m       expect(state[33m.[39muser)[33m.[39mtoEqual(mockUser)[33m;[39m
     [90m 277 |[39m       expect(state[33m.[39misAuthenticated)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 278 |[39m     })[33m;[39m[0m

      at Object.toBe (__tests__/system/startup.test.tsx:275:27)

  \u25cf Frontend System Startup  Error Boundary  should catch and handle startup errors

    Startup error

    [0m [90m 332 |[39m       
     [90m 333 |[39m       [36mconst[39m [33mThrowError[39m [33m=[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 334 |[39m         [36mthrow[39m [36mnew[39m [33mError[39m([32m'Startup error'[39m)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 335 |[39m       }[33m;[39m
     [90m 336 |[39m       
     [90m 337 |[39m       [90m// Suppress console.error for this test[39m[0m

      at ThrowError (__tests__/system/startup.test.tsx:334:15)
      at Object.react-stack-bottom-frame (node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (__tests__/system/startup.test.tsx:341:35)

  \u25cf Frontend System Startup  Performance Monitoring  should measure startup performance

    thrown: "Exceeded timeout of 10000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 353 |[39m
     [90m 354 |[39m   describe([32m'Performance Monitoring'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 355 |[39m     it([32m'should measure startup performance'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 356 |[39m       [36mconst[39m startTime [33m=[39m performance[33m.[39mnow()[33m;[39m
     [90m 357 |[39m       
     [90m 358 |[39m       [90m// Simulate startup operations[39m[0m

      at it (__tests__/system/startup.test.tsx:355:5)
      at describe (__tests__/system/startup.test.tsx:354:3)
      at Object.describe (__tests__/system/startup.test.tsx:30:1)

C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\components\chat\MessageInput.tsx:146
            const thread = await _threadService.ThreadService.getThread(threadId);
                                                              ^

[TypeError: _threadService.ThreadService.getThread is not a function]

Node.js v24.4.1
FAIL __tests__/chat/ui-improvements.test.tsx
  \u25cf Test suite failed to run

    Jest worker encountered 4 child process exceptions, exceeding retry limit

      at ChildProcessWorker.initialize (node_modules/jest-worker/build/index.js:805:21)

FAIL __tests__/components/ChatComponents.test.tsx (26.927 s)
  \u25cf test_MessageList_virtualization  should implement virtual scrolling for large lists

    TestingLibraryElementError: Unable to find an element by: [data-testid="/message-/"]

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"relative overflow-hidden h-[calc(100vh-250px)] px-6 py-4 overflow-y-auto"[39m
          [33mdir[39m=[32m"ltr"[39m
          [33mstyle[39m=[32m"position: relative; --radix-scroll-area-corner-width: 0px; --radix-scroll-area-corner-height: 0px;"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"h-full w-full rounded-[inherit]"[39m
            [33mdata-radix-scroll-area-viewport[39m=[32m""[39m
            [33mstyle[39m=[32m"overflow-x: hidden; overflow-y: scroll;"[39m
          [36m>[39m
            [36m<div[39m
              [33mstyle[39m=[32m"min-width: 100%; display: table;"[39m
            [36m>[39m
              [36m<div[39m
                [33mstyle[39m=[32m"opacity: 1; transform: none;"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"mb-4 flex justify-start"[39m
                  [33mstyle[39m=[32m"opacity: 1; transform: none;"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"rounded-lg border text-card-foreground w-full max-w-3xl shadow-sm hover:shadow-md transition-shadow duration-200 bg-white border-gray-200"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"flex flex-col space-y-1.5 p-6 pb-3 pt-4 px-5"[39m
                    [36m>[39m
                      [36m<div[39m
                        [33mclass[39m=[32m"flex items-start justify-between"[39m
                      [36m>[39m
                        [36m<div[39m
                          [33mclass[39m=[32m"flex items-center space-x-3"[39m
                        [36m>[39m
                          [36m<span[39m
                            [33mclass[39m=[32m"relative flex shrink-0 overflow-hidden rounded-full w-9 h-9 border-2 border-white shadow-sm"[39m
                          [36m>[39m
                            [36m<span[39m
                              [33mclass[39m=[32m"flex h-full w-full items-center justify-center rounded-full bg-muted font-bold text-sm bg-gradient-to-r from-purple-600 to-pink-600 text-white"[39m
                            [36m>[39m
                              [0mAI[0m
                            [36m</span>[39m
                          [36m</span>[39m
                          [36m<div>[39m
                            [36m<div[39m
                              [33mclass[39m=[32m"flex items-center space-x-2"[39m
                            [36m>[39m
                              [36m<svg[39m
                                [33maria-hidden[39m=[32m"true"[39m
                                [33mclass[39m=[32m"lucide lucide-bot w-4 h-4"[39m
                                [33mfill[39m=[32m"none"[39m
                                [33mheight[39m=[32m"24"[39m
                                [33mstroke[39m=[32m"currentColor"[39m
                                [33mstroke-linecap[39m=[32m"round"[39m
                                [33mstroke-linejoin[39m=[32m"round"[39m
                                [33mstroke-width[39m=[32m"2"[39m
                                [33mviewBox[39m=[32m"0 0 24 24"[39m
                                [33mwidth[39m=[32m"24"[39m
                                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                              [36m>[39m
                                [36m<path[39m
                                  [33md[39m=[32m"M12 8V4H8"[39m
                                [36m/>[39m
                                [36m<rect[39m
                                  [33mheight[39m=[32m"12"[39m
                                  [33mrx[39m=[32m"2"[39m
                                  [33mwidth[39m=[32m"16"[39m
                                  [33mx[39m=[32m"4"[39m
                                  [33my[39m=[32m"8"[39m
                                [36m/>[39m
                                [36m<path[39m
                                  [33md[39m=[32m"M2 14h2"[39m
                                [36m/>[39m
                                [36m<path[39m
                                  [33md[39m=[32m"M20 14h2"[39m
                                [36m/>[39m
                                [36m<path[39m
                                  [33md[39m=[32m"M15 13v2"[39m
                                [36m/>[39m
                                [36m<path[39m
                                  [33md[39m=[32m"M9 13v2"[39m
                                [36m/>[39m
                              [36m</svg>[39m
                              [36m<h3[39m
                                [33mclass[39m=[32m"tracking-tight text-base font-semibold text-gray-900"[39m
                              [36m>[39m
                                [0mNetra Agent[0m
                              [36m</h3>[39m
                            [36m</div>[39m
                          [36m</div>[39m
                        [36m</div>[39m
                        [36m<div[39m
                          [33mclass[39m=[32m"flex items-center space-x-2 text-xs text-gray-500"[39m
                        [36m>[39m
                          [36m<svg[39m
                            [33maria-hidden[39m=[32m"true"[39m
                            [33mclass[39m=[32m"lucide lucide-clock w-3 h-3"[39m
                            [33mfill[39m=[32m"none"[39m
                            [33mheight[39m=[32m"24"[39m
                            [33mstroke[39m=[32m"currentColor"[39m
                            [33mstroke-linecap[39m=[32m"round"[39m
                            [33mstroke-linejoin[39m=[32m"round"[39m
                            [33mstroke-width[39m=[32m"2"[39m
                            [33mviewBox[39m=[32m"0 0 24 24"[39m
                            [33mwidth[39m=[32m"24"[39m
                            [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                          [36m>[39m
                            [36m<path[39m
                              [33md[39m=[32m"M12 6v6l4 2"[39m
                            [36m/>[39m
                            [36m<circle[39m
                              [33mcx[39m=[32m"12"[39m
                              [33mcy[39m=[32m"12"[39m
                              [33mr[39m=[32m"10"[39m
                            [36m/>[39m
                          [36m</svg>[39m
                          [36m<span>[39m
                            [0m01:31:35 PM[0m
                          [36m</span>[39m
                        [36m</div>[39m
                      [36m</div>[39m
                    [36m</div>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"p-6 pt-0 px-5 pb-4"[39m
                    [36m>[39m
                      [36m<div[39m
                        [33mclass[39m=[32m"space-y-3"[39m
                      [36m>[39m
                        [36m<p[39m
                          [33mclass[39m=[32m"text-gray-800 leading-relaxed whitespace-pre-wrap"[39m
                        [36m>[39m
                          [0mMessage 0[0m
                        [36m</p>[39m
                      [36m</div>[39m
       ...

    [0m [90m 33 |[39m     
     [90m 34 |[39m     [90m// MessageList renders all messages by default (no virtualization currently)[39m
    [31m[1m>[22m[39m[90m 35 |[39m     [36mconst[39m renderedMessages [33m=[39m screen[33m.[39mgetAllByTestId([35m/message-/[39m)[33m;[39m
     [90m    |[39m                                     [31m[1m^[22m[39m
     [90m 36 |[39m     expect(renderedMessages[33m.[39mlength)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m 37 |[39m   })[33m;[39m
     [90m 38 |[39m[0m

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:109:15
      at Object.getAllByTestId (__tests__/components/ChatComponents.test.tsx:35:37)

  \u25cf test_MessageList_virtualization  should maintain performance with large message lists

    expect(received).toBeLessThan(expected)

    Expected: < 5000
    Received:   12593.858299999998

    [0m [90m 57 |[39m     
     [90m 58 |[39m     [90m// Should render in reasonable time[39m
    [31m[1m>[22m[39m[90m 59 |[39m     expect(renderTime)[33m.[39mtoBeLessThan([35m5000[39m)[33m;[39m
     [90m    |[39m                        [31m[1m^[22m[39m
     [90m 60 |[39m   })[33m;[39m
     [90m 61 |[39m
     [90m 62 |[39m   it([32m'should handle scroll to bottom correctly'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.toBeLessThan (__tests__/components/ChatComponents.test.tsx:59:24)

  \u25cf test_MessageInput_validation  should validate input length

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 114 |[39m   })[33m;[39m
     [90m 115 |[39m
    [31m[1m>[22m[39m[90m 116 |[39m   it([32m'should validate input length'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m     |[39m   [31m[1m^[22m[39m
     [90m 117 |[39m     render([33m<[39m[33mMessageInput[39m [33m/[39m[33m>[39m)[33m;[39m
     [90m 118 |[39m     
     [90m 119 |[39m     [36mconst[39m input [33m=[39m screen[33m.[39mgetByRole([32m'textbox'[39m)[33m;[39m[0m

      at it (__tests__/components/ChatComponents.test.tsx:116:3)
      at Object.describe (__tests__/components/ChatComponents.test.tsx:107:1)

  \u25cf test_MessageInput_validation  should handle text input and sending

    TypeError: useWebSocket.mockReturnValue is not a function

    [0m [90m 130 |[39m     [36mconst[39m mockSendMessage [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 131 |[39m     [36mconst[39m useWebSocket [33m=[39m require([32m'@/hooks/useWebSocket'[39m)[33m.[39museWebSocket [36mas[39m jest[33m.[39m[33mMock[39m[33m;[39m
    [31m[1m>[22m[39m[90m 132 |[39m     useWebSocket[33m.[39mmockReturnValue({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 133 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 134 |[39m     })[33m;[39m
     [90m 135 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/ChatComponents.test.tsx:132:18)

  \u25cf test_MessageInput_validation  should handle keyboard shortcuts

    expect(received).toBe(expected) // Object.is equality

    Expected: "Test message"
    Received: "aaaTaeasata amaeasasaaagaeaa"

    [0m [90m 155 |[39m     
     [90m 156 |[39m     [90m// Message should still be in input (requires Ctrl+Enter to send)[39m
    [31m[1m>[22m[39m[90m 157 |[39m     expect(input[33m.[39mvalue)[33m.[39mtoBe([32m'Test message'[39m)[33m;[39m
     [90m     |[39m                         [31m[1m^[22m[39m
     [90m 158 |[39m   })[33m;[39m
     [90m 159 |[39m
     [90m 160 |[39m   it([32m'should prevent empty message submission'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.toBe (__tests__/components/ChatComponents.test.tsx:157:25)

  \u25cf test_MessageInput_validation  should prevent empty message submission

    TypeError: useWebSocket.mockReturnValue is not a function

    [0m [90m 161 |[39m     [36mconst[39m mockSendMessage [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 162 |[39m     [36mconst[39m useWebSocket [33m=[39m require([32m'@/hooks/useWebSocket'[39m)[33m.[39museWebSocket [36mas[39m jest[33m.[39m[33mMock[39m[33m;[39m
    [31m[1m>[22m[39m[90m 163 |[39m     useWebSocket[33m.[39mmockReturnValue({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 164 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 165 |[39m     })[33m;[39m
     [90m 166 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/ChatComponents.test.tsx:163:18)

FAIL __tests__/integration/comprehensive-integration.test.tsx (33.387 s)
  \u25cf Comprehensive Frontend Integration Tests  1. Corpus Management Integration  should upload documents to corpus and process with embeddings

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 0
    Received array:  []

    [0m [90m 134 |[39m       
     [90m 135 |[39m       expect(result[33m.[39mid)[33m.[39mtoBe([32m'doc-123'[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 136 |[39m       expect(useCorpusStore[33m.[39mgetState()[33m.[39mdocuments)[33m.[39mtoHaveLength([35m1[39m)[33m;[39m
     [90m     |[39m                                                   [31m[1m^[22m[39m
     [90m 137 |[39m     })[33m;[39m
     [90m 138 |[39m
     [90m 139 |[39m     it([32m'should search corpus with semantic similarity'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.toHaveLength (__tests__/integration/comprehensive-integration.test.tsx:136:51)

  \u25cf Comprehensive Frontend Integration Tests  2. Synthetic Data Generation Flow  should generate synthetic data based on templates

    TypeError: useSyntheticDataStore is not a function

    [0m [90m 177 |[39m       
     [90m 178 |[39m       [36mconst[39m [33mTestComponent[39m [33m=[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 179 |[39m         [36mconst[39m { generateData[33m,[39m jobs } [33m=[39m useSyntheticDataStore()[33m;[39m
     [90m     |[39m                                        [31m[1m^[22m[39m
     [90m 180 |[39m         
     [90m 181 |[39m         [36mreturn[39m (
     [90m 182 |[39m           [33m<[39m[33mdiv[39m[33m>[39m[0m

      at useSyntheticDataStore (__tests__/integration/comprehensive-integration.test.tsx:179:40)
      at Object.react-stack-bottom-frame (node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (__tests__/integration/comprehensive-integration.test.tsx:193:13)

  \u25cf Comprehensive Frontend Integration Tests  3. LLM Cache Management Integration  should cache and retrieve LLM responses

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 260 |[39m       [90m// Second call - cache hit[39m
     [90m 261 |[39m       [36mconst[39m response2 [33m=[39m [36mawait[39m llmCacheService[33m.[39mquery([32m'test prompt'[39m[33m,[39m [32m'gpt-4'[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 262 |[39m       expect(response2[33m.[39mcached)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                                [31m[1m^[22m[39m
     [90m 263 |[39m     })[33m;[39m
     [90m 264 |[39m
     [90m 265 |[39m     it([32m'should manage cache invalidation and TTL'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.toBe (__tests__/integration/comprehensive-integration.test.tsx:262:32)

  \u25cf Comprehensive Frontend Integration Tests  3. LLM Cache Management Integration  should manage cache invalidation and TTL

    TypeError: useLLMCacheStore is not a function

    [0m [90m 265 |[39m     it([32m'should manage cache invalidation and TTL'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m 266 |[39m       [36mconst[39m [33mTestComponent[39m [33m=[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 267 |[39m         [36mconst[39m { cacheSize[33m,[39m clearCache[33m,[39m setCacheTTL } [33m=[39m useLLMCacheStore()[33m;[39m
     [90m     |[39m                                                        [31m[1m^[22m[39m
     [90m 268 |[39m         
     [90m 269 |[39m         [36mreturn[39m (
     [90m 270 |[39m           [33m<[39m[33mdiv[39m[33m>[39m[0m

      at useLLMCacheStore (__tests__/integration/comprehensive-integration.test.tsx:267:56)
      at Object.react-stack-bottom-frame (node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (__tests__/integration/comprehensive-integration.test.tsx:283:35)

  \u25cf Comprehensive Frontend Integration Tests  4. Supply Catalog Integration  should browse and select AI models from catalog

    expect(received).toHaveLength(expected)

    Expected length: 2
    Received length: 0
    Received array:  []

    [0m [90m 313 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m loadCatalog()[33m;[39m
     [90m 314 |[39m       
    [31m[1m>[22m[39m[90m 315 |[39m       expect(result[33m.[39mmodels)[33m.[39mtoHaveLength([35m2[39m)[33m;[39m
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 316 |[39m       expect(useSupplyStore[33m.[39mgetState()[33m.[39mcatalog[33m.[39mmodels)[33m.[39mtoHaveLength([35m2[39m)[33m;[39m
     [90m 317 |[39m     })[33m;[39m
     [90m 318 |[39m[0m

      at Object.toHaveLength (__tests__/integration/comprehensive-integration.test.tsx:315:29)

  \u25cf Comprehensive Frontend Integration Tests  4. Supply Catalog Integration  should switch between model providers dynamically

    TypeError: useSupplyStore is not a function

    [0m [90m 319 |[39m     it([32m'should switch between model providers dynamically'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m 320 |[39m       [36mconst[39m [33mTestComponent[39m [33m=[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 321 |[39m         [36mconst[39m { activeModel[33m,[39m switchModel } [33m=[39m useSupplyStore()[33m;[39m
     [90m     |[39m                                              [31m[1m^[22m[39m
     [90m 322 |[39m         
     [90m 323 |[39m         [36mreturn[39m (
     [90m 324 |[39m           [33m<[39m[33mdiv[39m[33m>[39m[0m

      at useSupplyStore (__tests__/integration/comprehensive-integration.test.tsx:321:46)
      at Object.react-stack-bottom-frame (node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (__tests__/integration/comprehensive-integration.test.tsx:338:48)

  \u25cf Comprehensive Frontend Integration Tests  5. Reference Management with Embeddings  should manage document references with vector search

    expect(received).toBe(expected) // Object.is equality

    Expected: "ref-789"
    Received: "ref-1"

    [0m [90m 371 |[39m       })[33m;[39m
     [90m 372 |[39m       
    [31m[1m>[22m[39m[90m 373 |[39m       expect(result[33m.[39mid)[33m.[39mtoBe([32m'ref-789'[39m)[33m;[39m
     [90m     |[39m                         [31m[1m^[22m[39m
     [90m 374 |[39m       expect(result[33m.[39membedding)[33m.[39mtoHaveLength([35m4[39m)[33m;[39m
     [90m 375 |[39m     })[33m;[39m
     [90m 376 |[39m[0m

      at Object.toBe (__tests__/integration/comprehensive-integration.test.tsx:373:25)

  \u25cf Comprehensive Frontend Integration Tests  5. Reference Management with Embeddings  should find similar references using embeddings

    expect(received).toHaveLength(expected)

    Expected length: 2
    Received length: 0
    Received array:  []

    [0m [90m 393 |[39m       [36mconst[39m results [33m=[39m [36mawait[39m findSimilar([32m'ref-789'[39m)[33m;[39m
     [90m 394 |[39m       
    [31m[1m>[22m[39m[90m 395 |[39m       expect(results)[33m.[39mtoHaveLength([35m2[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 396 |[39m       expect(results[[35m0[39m][33m.[39msimilarity)[33m.[39mtoBeGreaterThan([35m0.9[39m)[33m;[39m
     [90m 397 |[39m     })[33m;[39m
     [90m 398 |[39m   })[33m;[39m[0m

      at Object.toHaveLength (__tests__/integration/comprehensive-integration.test.tsx:395:23)

  \u25cf Comprehensive Frontend Integration Tests  6. Admin Functionality Integration  should manage users and permissions

    expect(element).toHaveTextContent()

    Expected element to have text content:
      2
    Received:
      0

    Ignored nodes: comments, script, style
    [36m<html>[39m
      [36m<head />[39m
      [36m<body>[39m
        [36m<div>[39m
          [36m<div>[39m
            [36m<button>[39m
              [0mLoad Users[0m
            [36m</button>[39m
            [36m<div[39m
              [33mdata-testid[39m=[32m"user-count"[39m
            [36m>[39m
              [0m0[0m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</body>[39m
    [36m</html>[39m

    [0m [90m 431 |[39m       
     [90m 432 |[39m       [36mawait[39m waitFor(() [33m=>[39m {
    [31m[1m>[22m[39m[90m 433 |[39m         expect(getByTestId([32m'user-count'[39m))[33m.[39mtoHaveTextContent([32m'2'[39m)[33m;[39m
     [90m     |[39m                                           [31m[1m^[22m[39m
     [90m 434 |[39m       })[33m;[39m
     [90m 435 |[39m     })[33m;[39m
     [90m 436 |[39m[0m

      at toHaveTextContent (__tests__/integration/comprehensive-integration.test.tsx:433:43)
      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)
      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)
      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)
      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)

  \u25cf Comprehensive Frontend Integration Tests  6. Admin Functionality Integration  should monitor system metrics and usage

    expect(received).toBe(expected) // Object.is equality

    Expected: 10000
    Received: undefined

    [0m [90m 456 |[39m       [36mconst[39m metrics [33m=[39m [36mawait[39m getSystemMetrics()[33m;[39m
     [90m 457 |[39m       
    [31m[1m>[22m[39m[90m 458 |[39m       expect(metrics[33m.[39mtotal_requests)[33m.[39mtoBe([35m10000[39m)[33m;[39m
     [90m     |[39m                                      [31m[1m^[22m[39m
     [90m 459 |[39m       expect(metrics[33m.[39merror_rate)[33m.[39mtoBeLessThan([35m0.05[39m)[33m;[39m
     [90m 460 |[39m     })[33m;[39m
     [90m 461 |[39m   })[33m;[39m[0m

      at Object.toBe (__tests__/integration/comprehensive-integration.test.tsx:458:38)

  \u25cf Comprehensive Frontend Integration Tests  7. Health Check Monitoring  should monitor service health status

    TypeError: Cannot read properties of undefined (reading 'database')

    [0m [90m 487 |[39m       
     [90m 488 |[39m       expect(health[33m.[39mstatus)[33m.[39mtoBe([32m'healthy'[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 489 |[39m       expect(health[33m.[39mservices[33m.[39mdatabase)[33m.[39mtoBe([32m'up'[39m)[33m;[39m
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 490 |[39m     })[33m;[39m
     [90m 491 |[39m
     [90m 492 |[39m     it([32m'should handle degraded service states'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.database (__tests__/integration/comprehensive-integration.test.tsx:489:30)

  \u25cf Comprehensive Frontend Integration Tests  7. Health Check Monitoring  should handle degraded service states

    Unable to find an element by: [data-testid="alert"]

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div>[39m
          [36m<div[39m
            [33mdata-testid[39m=[32m"health-status"[39m
          [36m>[39m
            [0mchecking[0m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

    [0m [90m 525 |[39m       [36mconst[39m { getByTestId } [33m=[39m render([33m<[39m[33mTestComponent[39m [33m/[39m[33m>[39m)[33m;[39m
     [90m 526 |[39m       
    [31m[1m>[22m[39m[90m 527 |[39m       [36mawait[39m waitFor(() [33m=>[39m {
     [90m     |[39m                    [31m[1m^[22m[39m
     [90m 528 |[39m         expect(getByTestId([32m'alert'[39m))[33m.[39mtoBeInTheDocument()[33m;[39m
     [90m 529 |[39m       })[33m;[39m
     [90m 530 |[39m     })[33m;[39m[0m

      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)
      at Object.<anonymous> (__tests__/integration/comprehensive-integration.test.tsx:527:20)

  \u25cf Comprehensive Frontend Integration Tests  8. Configuration Management  should load and apply dynamic configurations

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

    [0m [90m 558 |[39m       [36mconst[39m config [33m=[39m [36mawait[39m loadConfig()[33m;[39m
     [90m 559 |[39m       
    [31m[1m>[22m[39m[90m 560 |[39m       expect(config[33m.[39mfeatures[33m.[39mdark_mode)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                                         [31m[1m^[22m[39m
     [90m 561 |[39m       expect(useConfigStore[33m.[39mgetState()[33m.[39mconfig[33m.[39mlimits[33m.[39mmax_threads)[33m.[39mtoBe([35m100[39m)[33m;[39m
     [90m 562 |[39m     })[33m;[39m
     [90m 563 |[39m[0m

      at Object.toBe (__tests__/integration/comprehensive-integration.test.tsx:560:41)

  \u25cf Comprehensive Frontend Integration Tests  8. Configuration Management  should update configuration and propagate changes

    TypeError: useConfigStore is not a function

    [0m [90m 564 |[39m     it([32m'should update configuration and propagate changes'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m 565 |[39m       [36mconst[39m [33mTestComponent[39m [33m=[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 566 |[39m         [36mconst[39m { config[33m,[39m updateConfig } [33m=[39m useConfigStore()[33m;[39m
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 567 |[39m         
     [90m 568 |[39m         [36mreturn[39m (
     [90m 569 |[39m           [33m<[39m[33mdiv[39m[33m>[39m[0m

      at useConfigStore (__tests__/integration/comprehensive-integration.test.tsx:566:42)
      at Object.react-stack-bottom-frame (node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (__tests__/integration/comprehensive-integration.test.tsx:585:48)

  \u25cf Comprehensive Frontend Integration Tests  9. Generation Service Integration  should handle content generation with streaming

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 594 |[39m
     [90m 595 |[39m   describe([32m'9. Generation Service Integration'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 596 |[39m     it([32m'should handle content generation with streaming'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 597 |[39m       [36mconst[39m [33mTestComponent[39m [33m=[39m () [33m=>[39m {
     [90m 598 |[39m         [36mconst[39m [content[33m,[39m setContent] [33m=[39m [33mReact[39m[33m.[39museState([32m''[39m)[33m;[39m
     [90m 599 |[39m         [0m

      at it (__tests__/integration/comprehensive-integration.test.tsx:596:5)
      at describe (__tests__/integration/comprehensive-integration.test.tsx:595:3)
      at Object.describe (__tests__/integration/comprehensive-integration.test.tsx:83:1)

  \u25cf Comprehensive Frontend Integration Tests  9. Generation Service Integration  should handle generation templates and parameters

    expect(received).toContain(expected) // indexOf

    Expected substring: "Generated email"
    Received string:    ""

    [0m [90m 669 |[39m       })[33m;[39m
     [90m 670 |[39m       
    [31m[1m>[22m[39m[90m 671 |[39m       expect(result[33m.[39mcontent)[33m.[39mtoContain([32m'Generated email'[39m)[33m;[39m
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 672 |[39m       expect(result[33m.[39mtokens_used)[33m.[39mtoBeLessThan([35m200[39m)[33m;[39m
     [90m 673 |[39m     })[33m;[39m
     [90m 674 |[39m   })[33m;[39m[0m

      at Object.toContain (__tests__/integration/comprehensive-integration.test.tsx:671:30)

  \u25cf Comprehensive Frontend Integration Tests  11. Multi-Model Provider Switching  should switch between providers based on availability

    TestingLibraryElementError: Unable to find an element with the text: Send Request. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div />[39m
    [36m</body>[39m

    [0m [90m 749 |[39m       [36mconst[39m { getByText[33m,[39m getByTestId } [33m=[39m render([33m<[39m[33mTestComponent[39m [33m/[39m[33m>[39m)[33m;[39m
     [90m 750 |[39m       
    [31m[1m>[22m[39m[90m 751 |[39m       fireEvent[33m.[39mclick(getByText([32m'Send Request'[39m))[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 752 |[39m       
     [90m 753 |[39m       [36mawait[39m waitFor(() [33m=>[39m {
     [90m 754 |[39m         expect(getByTestId([32m'fallback'[39m))[33m.[39mtoBeInTheDocument()[33m;[39m[0m

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (__tests__/integration/comprehensive-integration.test.tsx:751:23)

  \u25cf Comprehensive Frontend Integration Tests  12. Cost Tracking and Budgeting  should track API usage costs in real-time

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 781 |[39m
     [90m 782 |[39m   describe([32m'12. Cost Tracking and Budgeting'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 783 |[39m     it([32m'should track API usage costs in real-time'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 784 |[39m       [36mconst[39m [33mTestComponent[39m [33m=[39m () [33m=>[39m {
     [90m 785 |[39m         [36mconst[39m [costs[33m,[39m setCosts] [33m=[39m [33mReact[39m[33m.[39museState({ total[33m:[39m [35m0[39m[33m,[39m breakdown[33m:[39m {} })[33m;[39m
     [90m 786 |[39m         [0m

      at it (__tests__/integration/comprehensive-integration.test.tsx:783:5)
      at describe (__tests__/integration/comprehensive-integration.test.tsx:782:3)
      at Object.describe (__tests__/integration/comprehensive-integration.test.tsx:83:1)

  \u25cf Comprehensive Frontend Integration Tests  13. Database Repository Pattern Integration  should handle unit of work pattern for transactions

    TestingLibraryElementError: Unable to find an element with the text: Execute Transaction. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div />[39m
    [36m</body>[39m

    [0m [90m 899 |[39m       [36mconst[39m { getByText[33m,[39m getByTestId } [33m=[39m render([33m<[39m[33mTestComponent[39m [33m/[39m[33m>[39m)[33m;[39m
     [90m 900 |[39m       
    [31m[1m>[22m[39m[90m 901 |[39m       fireEvent[33m.[39mclick(getByText([32m'Execute Transaction'[39m))[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 902 |[39m       
     [90m 903 |[39m       [36mawait[39m waitFor(() [33m=>[39m {
     [90m 904 |[39m         expect(getByTestId([32m'status'[39m))[33m.[39mtoHaveTextContent([32m'committed'[39m)[33m;[39m[0m

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (__tests__/integration/comprehensive-integration.test.tsx:901:23)

  \u25cf Comprehensive Frontend Integration Tests  14. Migration Handling  should handle migration rollback on failure

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: true

    [0m [90m 978 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m applyMigration([32m'004'[39m)[33m;[39m
     [90m 979 |[39m       
    [31m[1m>[22m[39m[90m 980 |[39m       expect(result[33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 981 |[39m       expect(result[33m.[39mrolled_back)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 982 |[39m     })[33m;[39m
     [90m 983 |[39m   })[33m;[39m[0m

      at Object.toBe (__tests__/integration/comprehensive-integration.test.tsx:980:30)

  \u25cf Comprehensive Frontend Integration Tests  15. Background Task Processing  should queue and process background tasks

    TestingLibraryElementError: Unable to find an element with the text: Queue Task. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div />[39m
    [36m</body>[39m

    [0m [90m 1039 |[39m       [36mconst[39m { getByText[33m,[39m getByTestId } [33m=[39m render([33m<[39m[33mTestComponent[39m [33m/[39m[33m>[39m)[33m;[39m
     [90m 1040 |[39m       
    [31m[1m>[22m[39m[90m 1041 |[39m       fireEvent[33m.[39mclick(getByText([32m'Queue Task'[39m))[33m;[39m
     [90m      |[39m                       [31m[1m^[22m[39m
     [90m 1042 |[39m       
     [90m 1043 |[39m       [36mawait[39m waitFor(() [33m=>[39m {
     [90m 1044 |[39m         expect(getByTestId([32m'task-status'[39m))[33m.[39mtoHaveTextContent([32m'completed'[39m)[33m;[39m[0m

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (__tests__/integration/comprehensive-integration.test.tsx:1041:23)

  \u25cf Comprehensive Frontend Integration Tests  18. Error Context and Tracing  should propagate trace IDs through requests

    TestingLibraryElementError: Unable to find an element with the text: Make Request. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div />[39m
    [36m</body>[39m

    [0m [90m 1221 |[39m       [36mconst[39m { getByText[33m,[39m getByTestId } [33m=[39m render([33m<[39m[33mTestComponent[39m [33m/[39m[33m>[39m)[33m;[39m
     [90m 1222 |[39m       
    [31m[1m>[22m[39m[90m 1223 |[39m       fireEvent[33m.[39mclick(getByText([32m'Make Request'[39m))[33m;[39m
     [90m      |[39m                       [31m[1m^[22m[39m
     [90m 1224 |[39m       
     [90m 1225 |[39m       [36mawait[39m waitFor(() [33m=>[39m {
     [90m 1226 |[39m         expect(getByTestId([32m'trace-id'[39m))[33m.[39mtoHaveTextContent(traceId)[33m;[39m[0m

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (__tests__/integration/comprehensive-integration.test.tsx:1223:23)

  \u25cf Comprehensive Frontend Integration Tests  18. Error Context and Tracing  should capture error context with stack traces

    TestingLibraryElementError: Unable to find an element with the text: Trigger Error. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div />[39m
    [36m</body>[39m

    [0m [90m 1267 |[39m       [36mconst[39m { getByText[33m,[39m getByTestId } [33m=[39m render([33m<[39m[33mTestComponent[39m [33m/[39m[33m>[39m)[33m;[39m
     [90m 1268 |[39m       
    [31m[1m>[22m[39m[90m 1269 |[39m       fireEvent[33m.[39mclick(getByText([32m'Trigger Error'[39m))[33m;[39m
     [90m      |[39m                       [31m[1m^[22m[39m
     [90m 1270 |[39m       
     [90m 1271 |[39m       [36mawait[39m waitFor(() [33m=>[39m {
     [90m 1272 |[39m         expect(getByTestId([32m'error-trace'[39m))[33m.[39mtoHaveTextContent([32m'trace-error-123'[39m)[33m;[39m[0m

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (__tests__/integration/comprehensive-integration.test.tsx:1269:23)

  \u25cf Comprehensive Frontend Integration Tests  20. Key Manager Integration  should rotate API keys periodically

    TestingLibraryElementError: Unable to find an element by: [data-testid="rotation-status"]

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div />[39m
    [36m</body>[39m

    [0m [90m 1400 |[39m       
     [90m 1401 |[39m       [90m// Component would handle rotation in production[39m
    [31m[1m>[22m[39m[90m 1402 |[39m       expect(screen[33m.[39mgetByTestId([32m'rotation-status'[39m))[33m.[39mtoBeInTheDocument()[33m;[39m
     [90m      |[39m                     [31m[1m^[22m[39m
     [90m 1403 |[39m     })[33m;[39m
     [90m 1404 |[39m   })[33m;[39m
     [90m 1405 |[39m[0m

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByTestId (__tests__/integration/comprehensive-integration.test.tsx:1402:21)

  \u25cf Comprehensive Frontend Integration Tests  21. Demo Mode Functionality  should restrict features in demo mode

    TestingLibraryElementError: Unable to find an element with the text: Delete. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div />[39m
    [36m</body>[39m

    [0m [90m 1431 |[39m       [36mconst[39m { getByText[33m,[39m getByTestId } [33m=[39m render([33m<[39m[33mTestComponent[39m [33m/[39m[33m>[39m)[33m;[39m
     [90m 1432 |[39m       
    [31m[1m>[22m[39m[90m 1433 |[39m       fireEvent[33m.[39mclick(getByText([32m'Delete'[39m))[33m;[39m
     [90m      |[39m                       [31m[1m^[22m[39m
     [90m 1434 |[39m       
     [90m 1435 |[39m       [36mawait[39m waitFor(() [33m=>[39m {
     [90m 1436 |[39m         expect(getByTestId([32m'message'[39m))[33m.[39mtoHaveTextContent([32m'disabled in demo mode'[39m)[33m;[39m[0m

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (__tests__/integration/comprehensive-integration.test.tsx:1433:23)

  \u25cf Comprehensive Frontend Integration Tests  22. Enterprise Demo Features  should handle team collaboration workflows

    TestingLibraryElementError: Unable to find an element with the text: Share Thread. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div />[39m
    [36m</body>[39m

    [0m [90m 1533 |[39m       [36mconst[39m { getByText[33m,[39m getByTestId } [33m=[39m render([33m<[39m[33mTestComponent[39m [33m/[39m[33m>[39m)[33m;[39m
     [90m 1534 |[39m       
    [31m[1m>[22m[39m[90m 1535 |[39m       fireEvent[33m.[39mclick(getByText([32m'Share Thread'[39m))[33m;[39m
     [90m      |[39m                       [31m[1m^[22m[39m
     [90m 1536 |[39m       
     [90m 1537 |[39m       [36mawait[39m waitFor(() [33m=>[39m {
     [90m 1538 |[39m         expect(getByTestId([32m'shared-status'[39m))[33m.[39mtoBeInTheDocument()[33m;[39m[0m

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (__tests__/integration/comprehensive-integration.test.tsx:1535:23)

  \u25cf Comprehensive Frontend Integration Tests  25. Export Functionality  should export data in multiple formats

    TestingLibraryElementError: Unable to find an element with the text: Export JSON. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div />[39m
    [36m</body>[39m

    [0m [90m 1705 |[39m       [36mconst[39m { getByText[33m,[39m getByTestId } [33m=[39m render([33m<[39m[33mTestComponent[39m [33m/[39m[33m>[39m)[33m;[39m
     [90m 1706 |[39m       
    [31m[1m>[22m[39m[90m 1707 |[39m       fireEvent[33m.[39mclick(getByText([32m'Export JSON'[39m))[33m;[39m
     [90m      |[39m                       [31m[1m^[22m[39m
     [90m 1708 |[39m       
     [90m 1709 |[39m       [36mawait[39m waitFor(() [33m=>[39m {
     [90m 1710 |[39m         expect(getByTestId([32m'export-status'[39m))[33m.[39mtoHaveTextContent([32m'completed'[39m)[33m;[39m[0m

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (__tests__/integration/comprehensive-integration.test.tsx:1707:23)

  \u25cf Comprehensive Frontend Integration Tests  25. Export Functionality  should handle large data exports with progress

    TestingLibraryElementError: Unable to find an element by: [data-testid="progress"]

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div />[39m
    [36m</body>[39m

    [0m [90m 1740 |[39m       
     [90m 1741 |[39m       [90m// In real scenario, SSE would update progress[39m
    [31m[1m>[22m[39m[90m 1742 |[39m       expect(screen[33m.[39mgetByTestId([32m'progress'[39m))[33m.[39mtoBeInTheDocument()[33m;[39m
     [90m      |[39m                     [31m[1m^[22m[39m
     [90m 1743 |[39m     })[33m;[39m
     [90m 1744 |[39m   })[33m;[39m
     [90m 1745 |[39m[0m

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByTestId (__tests__/integration/comprehensive-integration.test.tsx:1742:21)

  \u25cf Comprehensive Frontend Integration Tests  27. Collaboration Features  should handle real-time collaborative editing

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 1814 |[39m
     [90m 1815 |[39m   describe([32m'27. Collaboration Features'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 1816 |[39m     it([32m'should handle real-time collaborative editing'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m      |[39m     [31m[1m^[22m[39m
     [90m 1817 |[39m       [36mconst[39m [33mTestComponent[39m [33m=[39m () [33m=>[39m {
     [90m 1818 |[39m         [36mconst[39m [collaborators[33m,[39m setCollaborators] [33m=[39m [33mReact[39m[33m.[39museState([])[33m;[39m
     [90m 1819 |[39m         [36mconst[39m [content[33m,[39m setContent] [33m=[39m [33mReact[39m[33m.[39museState([32m''[39m)[33m;[39m[0m

      at it (__tests__/integration/comprehensive-integration.test.tsx:1816:5)
      at describe (__tests__/integration/comprehensive-integration.test.tsx:1815:3)
      at Object.describe (__tests__/integration/comprehensive-integration.test.tsx:83:1)

  \u25cf Comprehensive Frontend Integration Tests  27. Collaboration Features  should synchronize cursor positions between users

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 1857 |[39m     })[33m;[39m
     [90m 1858 |[39m
    [31m[1m>[22m[39m[90m 1859 |[39m     it([32m'should synchronize cursor positions between users'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m      |[39m     [31m[1m^[22m[39m
     [90m 1860 |[39m       [36mconst[39m [33mTestComponent[39m [33m=[39m () [33m=>[39m {
     [90m 1861 |[39m         [36mconst[39m [cursors[33m,[39m setCursors] [33m=[39m [33mReact[39m[33m.[39museState({})[33m;[39m
     [90m 1862 |[39m         [0m

      at it (__tests__/integration/comprehensive-integration.test.tsx:1859:5)
      at describe (__tests__/integration/comprehensive-integration.test.tsx:1815:3)
      at Object.describe (__tests__/integration/comprehensive-integration.test.tsx:83:1)

  \u25cf Comprehensive Frontend Integration Tests  28. Real-time Metrics Dashboard  should display live performance metrics

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 1917 |[39m
     [90m 1918 |[39m   describe([32m'28. Real-time Metrics Dashboard'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 1919 |[39m     it([32m'should display live performance metrics'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m      |[39m     [31m[1m^[22m[39m
     [90m 1920 |[39m       [36mconst[39m [33mTestComponent[39m [33m=[39m () [33m=>[39m {
     [90m 1921 |[39m         [36mconst[39m [metrics[33m,[39m setMetrics] [33m=[39m [33mReact[39m[33m.[39museState({
     [90m 1922 |[39m           requests_per_second[33m:[39m [35m0[39m[33m,[39m[0m

      at it (__tests__/integration/comprehensive-integration.test.tsx:1919:5)
      at describe (__tests__/integration/comprehensive-integration.test.tsx:1918:3)
      at Object.describe (__tests__/integration/comprehensive-integration.test.tsx:83:1)

  \u25cf Comprehensive Frontend Integration Tests  29. Agent Tool Dispatcher Integration  should handle tool chaining and dependencies

    TestingLibraryElementError: Unable to find an element with the text: Execute Chain. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div />[39m
    [36m</body>[39m

    [0m [90m 2063 |[39m       [36mconst[39m { getByText[33m,[39m getByTestId } [33m=[39m render([33m<[39m[33mTestComponent[39m [33m/[39m[33m>[39m)[33m;[39m
     [90m 2064 |[39m       
    [31m[1m>[22m[39m[90m 2065 |[39m       fireEvent[33m.[39mclick(getByText([32m'Execute Chain'[39m))[33m;[39m
     [90m      |[39m                       [31m[1m^[22m[39m
     [90m 2066 |[39m       
     [90m 2067 |[39m       [36mawait[39m waitFor(() [33m=>[39m {
     [90m 2068 |[39m         expect(getByTestId([32m'chain-status'[39m))[33m.[39mtoHaveTextContent([0m

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (__tests__/integration/comprehensive-integration.test.tsx:2065:23)

  \u25cf Comprehensive Frontend Integration Tests  30. State Persistence and Recovery  should recover from corrupted state gracefully

    TestingLibraryElementError: Unable to find an element with the text: Load State. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div />[39m
    [36m</body>[39m

    [0m [90m 2172 |[39m       [36mconst[39m { getByText[33m,[39m getByTestId } [33m=[39m render([33m<[39m[33mTestComponent[39m [33m/[39m[33m>[39m)[33m;[39m
     [90m 2173 |[39m       
    [31m[1m>[22m[39m[90m 2174 |[39m       fireEvent[33m.[39mclick(getByText([32m'Load State'[39m))[33m;[39m
     [90m      |[39m                       [31m[1m^[22m[39m
     [90m 2175 |[39m       
     [90m 2176 |[39m       [36mawait[39m waitFor(() [33m=>[39m {
     [90m 2177 |[39m         expect(getByTestId([32m'error'[39m))[33m.[39mtoHaveTextContent([32m'State corrupted, using defaults'[39m)[33m;[39m[0m

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (__tests__/integration/comprehensive-integration.test.tsx:2174:23)

Summary of all failing tests
FAIL __tests__/hooks/useWebSocketLifecycle.test.tsx
  \u25cf useWebSocket Hook Lifecycle  Hook Initialization and Cleanup  should initialize WebSocket connection on mount

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

    Ignored nodes: comments, script, style
    [36m<html>[39m
      [36m<head />[39m
      [36m<body>[39m
        [36m<div />[39m
      [36m</body>[39m
    [36m</html>[39m

    [0m [90m 88 |[39m
     [90m 89 |[39m       [36mawait[39m waitFor(() [33m=>[39m {
    [31m[1m>[22m[39m[90m 90 |[39m         expect(mockWebSocketService[33m.[39mconnect)[33m.[39mtoHaveBeenCalled()[33m;[39m
     [90m    |[39m                                              [31m[1m^[22m[39m
     [90m 91 |[39m       })[33m;[39m
     [90m 92 |[39m       
     [90m 93 |[39m       expect(result[33m.[39mcurrent[33m.[39mstatus)[33m.[39mtoBe([32m'CLOSED'[39m)[33m;[39m[0m

      at toHaveBeenCalled (__tests__/hooks/useWebSocketLifecycle.test.tsx:90:46)
      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)
      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)
      at node_modules/@testing-library/dom/dist/wait-for.js:82:9

  \u25cf useWebSocket Hook Lifecycle  Hook Initialization and Cleanup  should setup connection with token

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "token=test-token-123"

    Number of calls: 0

    Ignored nodes: comments, script, style
    [36m<html>[39m
      [36m<head />[39m
      [36m<body>[39m
        [36m<div />[39m
      [36m</body>[39m
    [36m</html>[39m

    [0m [90m  98 |[39m
     [90m  99 |[39m       [36mawait[39m waitFor(() [33m=>[39m {
    [31m[1m>[22m[39m[90m 100 |[39m         expect(mockWebSocketService[33m.[39mconnect)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                                              [31m[1m^[22m[39m
     [90m 101 |[39m           expect[33m.[39mstringContaining([32m'token=test-token-123'[39m)
     [90m 102 |[39m         )[33m;[39m
     [90m 103 |[39m       })[33m;[39m[0m

      at toHaveBeenCalledWith (__tests__/hooks/useWebSocketLifecycle.test.tsx:100:46)
      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)
      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)
      at node_modules/@testing-library/dom/dist/wait-for.js:82:9

  \u25cf useWebSocket Hook Lifecycle  Hook Initialization and Cleanup  should cleanup WebSocket connection on unmount

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

    [0m [90m 109 |[39m       unmount()[33m;[39m
     [90m 110 |[39m
    [31m[1m>[22m[39m[90m 111 |[39m       expect(mockWebSocketService[33m.[39mdisconnect)[33m.[39mtoHaveBeenCalled()[33m;[39m
     [90m     |[39m                                               [31m[1m^[22m[39m
     [90m 112 |[39m     })[33m;[39m
     [90m 113 |[39m
     [90m 114 |[39m     it([32m'should handle rapid mount/unmount cycles'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.toHaveBeenCalled (__tests__/hooks/useWebSocketLifecycle.test.tsx:111:47)

  \u25cf useWebSocket Hook Lifecycle  Hook Initialization and Cleanup  should handle rapid mount/unmount cycles

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 5
    Received number of calls: 0

    [0m [90m 125 |[39m
     [90m 126 |[39m       [90m// Should handle cleanup gracefully without errors[39m
    [31m[1m>[22m[39m[90m 127 |[39m       expect(mockWebSocketService[33m.[39mdisconnect)[33m.[39mtoHaveBeenCalledTimes([35m5[39m)[33m;[39m
     [90m     |[39m                                               [31m[1m^[22m[39m
     [90m 128 |[39m     })[33m;[39m
     [90m 129 |[39m
     [90m 130 |[39m     it([32m'should preserve connection across component re-renders'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.toHaveBeenCalledTimes (__tests__/hooks/useWebSocketLifecycle.test.tsx:127:47)

  \u25cf useWebSocket Hook Lifecycle  Hook Initialization and Cleanup  should preserve connection across component re-renders

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 1
    Received number of calls: 0

    Ignored nodes: comments, script, style
    [36m<html>[39m
      [36m<head />[39m
      [36m<body>[39m
        [36m<div />[39m
      [36m</body>[39m
    [36m</html>[39m

    [0m [90m 145 |[39m       [36mawait[39m waitFor(() [33m=>[39m {
     [90m 146 |[39m         [90m// Should only connect once[39m
    [31m[1m>[22m[39m[90m 147 |[39m         expect(mockWebSocketService[33m.[39mconnect)[33m.[39mtoHaveBeenCalledTimes([35m1[39m)[33m;[39m
     [90m     |[39m                                              [31m[1m^[22m[39m
     [90m 148 |[39m       })[33m;[39m
     [90m 149 |[39m     })[33m;[39m
     [90m 150 |[39m   })[33m;[39m[0m

      at toHaveBeenCalledTimes (__tests__/hooks/useWebSocketLifecycle.test.tsx:147:46)
      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)
      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)
      at node_modules/@testing-library/dom/dist/wait-for.js:82:9

  \u25cf useWebSocket Hook Lifecycle  Connection State Management  should track connection status

    expect(received).toBe(expected) // Object.is equality

    Expected: "CLOSED"
    Received: "OPEN"

    [0m [90m 155 |[39m
     [90m 156 |[39m       [90m// Initially closed[39m
    [31m[1m>[22m[39m[90m 157 |[39m       expect(result[33m.[39mcurrent[33m.[39mstatus)[33m.[39mtoBe([32m'CLOSED'[39m)[33m;[39m
     [90m     |[39m                                     [31m[1m^[22m[39m
     [90m 158 |[39m
     [90m 159 |[39m       [90m// Wait for the service to set up the callback[39m
     [90m 160 |[39m       [36mawait[39m waitFor(() [33m=>[39m {[0m

      at Object.toBe (__tests__/hooks/useWebSocketLifecycle.test.tsx:157:37)

  \u25cf useWebSocket Hook Lifecycle  Message Handling  should send messages through webSocketService

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"payload": {"data": "test"}, "type": "test"}

    Number of calls: 0

    [0m [90m 212 |[39m       })[33m;[39m
     [90m 213 |[39m
    [31m[1m>[22m[39m[90m 214 |[39m       expect(mockWebSocketService[33m.[39msendMessage)[33m.[39mtoHaveBeenCalledWith(testMessage)[33m;[39m
     [90m     |[39m                                                [31m[1m^[22m[39m
     [90m 215 |[39m     })[33m;[39m
     [90m 216 |[39m
     [90m 217 |[39m     it([32m'should accumulate received messages'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.toHaveBeenCalledWith (__tests__/hooks/useWebSocketLifecycle.test.tsx:214:48)

  \u25cf useWebSocket Hook Lifecycle  Message Handling  should accumulate received messages

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

    Ignored nodes: comments, script, style
    [36m<html>[39m
      [36m<head />[39m
      [36m<body>[39m
        [36m<div />[39m
      [36m</body>[39m
    [36m</html>[39m

    [0m [90m 222 |[39m       [90m// Wait for the service to set up the callback[39m
     [90m 223 |[39m       [36mawait[39m waitFor(() [33m=>[39m {
    [31m[1m>[22m[39m[90m 224 |[39m         expect(mockWebSocketService[33m.[39mconnect)[33m.[39mtoHaveBeenCalled()[33m;[39m
     [90m     |[39m                                              [31m[1m^[22m[39m
     [90m 225 |[39m       })[33m;[39m
     [90m 226 |[39m
     [90m 227 |[39m       [90m// Simulate receiving a message[39m[0m

      at toHaveBeenCalled (__tests__/hooks/useWebSocketLifecycle.test.tsx:224:46)
      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)
      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)
      at node_modules/@testing-library/dom/dist/wait-for.js:82:9

  \u25cf useWebSocket Hook Lifecycle  Error Handling and Edge Cases  should handle config fetch failure

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "Failed to fetch config and connect to WebSocket", Any<Error>

    Number of calls: 0

    Ignored nodes: comments, script, style
    [36m<html>[39m
      [36m<head />[39m
      [36m<body>[39m
        [36m<div />[39m
      [36m</body>[39m
    [36m</html>[39m

    [0m [90m 279 |[39m
     [90m 280 |[39m       [36mawait[39m waitFor(() [33m=>[39m {
    [31m[1m>[22m[39m[90m 281 |[39m         expect(consoleErrorSpy)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                                 [31m[1m^[22m[39m
     [90m 282 |[39m           [32m'Failed to fetch config and connect to WebSocket'[39m[33m,[39m
     [90m 283 |[39m           expect[33m.[39many([33mError[39m)
     [90m 284 |[39m         )[33m;[39m[0m

      at toHaveBeenCalledWith (__tests__/hooks/useWebSocketLifecycle.test.tsx:281:33)
      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)
      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)
      at node_modules/@testing-library/dom/dist/wait-for.js:82:9

FAIL __tests__/hooks/useWebSocket.test.tsx
  \u25cf useWebSocket  should return WebSocket context values

    expect(received).toEqual(expected) // deep equality

    - Expected  - 0
    + Received  + 5

    @@ -4,8 +4,13 @@
        "disconnect": [Function mockConstructor],
        "error": null,
        "isConnected": true,
        "lastMessage": null,
        "messageQueue": Array [],
    +   "messages": Array [],
        "reconnectAttempts": 0,
        "sendMessage": [Function mockConstructor],
    +   "status": "OPEN",
    +   "subscribe": [Function mockConstructor],
    +   "unsubscribe": [Function mockConstructor],
    +   "ws": null,
      }

    [0m [90m 56 |[39m     [36mconst[39m { result } [33m=[39m renderHook(() [33m=>[39m useWebSocket()[33m,[39m { wrapper })[33m;[39m
     [90m 57 |[39m     
    [31m[1m>[22m[39m[90m 58 |[39m     expect(result[33m.[39mcurrent)[33m.[39mtoEqual(mockContext)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 59 |[39m     expect(result[33m.[39mcurrent[33m.[39msendMessage)[33m.[39mtoBe(mockSendMessage)[33m;[39m
     [90m 60 |[39m     expect(result[33m.[39mcurrent[33m.[39misConnected)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 61 |[39m   })[33m;[39m[0m

      at Object.toEqual (__tests__/hooks/useWebSocket.test.tsx:58:28)

  \u25cf useWebSocket  should handle null context gracefully

    expect(received).toBeNull()

    Received: {"connect": [Function mockConstructor], "connectionState": "connected", "disconnect": [Function mockConstructor], "error": null, "isConnected": true, "lastMessage": null, "messageQueue": [], "messages": [], "reconnectAttempts": 0, "sendMessage": [Function mockConstructor], "status": "OPEN", "subscribe": [Function mockConstructor], "unsubscribe": [Function mockConstructor], "ws": null}

    [0m [90m 68 |[39m     [36mconst[39m { result } [33m=[39m renderHook(() [33m=>[39m useWebSocket()[33m,[39m { wrapper })[33m;[39m
     [90m 69 |[39m     
    [31m[1m>[22m[39m[90m 70 |[39m     expect(result[33m.[39mcurrent)[33m.[39mtoBeNull()[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 71 |[39m   })[33m;[39m
     [90m 72 |[39m
     [90m 73 |[39m   it([32m'should call sendMessage when invoked'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.toBeNull (__tests__/hooks/useWebSocket.test.tsx:70:28)

  \u25cf useWebSocket  should call sendMessage when invoked

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"payload": {"data": "test"}, "type": "test"}

    Number of calls: 0

    [0m [90m 79 |[39m     result[33m.[39mcurrent[33m.[39msendMessage(message)[33m;[39m
     [90m 80 |[39m     
    [31m[1m>[22m[39m[90m 81 |[39m     expect(mockSendMessage)[33m.[39mtoHaveBeenCalledWith(message)[33m;[39m
     [90m    |[39m                             [31m[1m^[22m[39m
     [90m 82 |[39m     expect(mockSendMessage)[33m.[39mtoHaveBeenCalledTimes([35m1[39m)[33m;[39m
     [90m 83 |[39m   })[33m;[39m
     [90m 84 |[39m[0m

      at Object.toHaveBeenCalledWith (__tests__/hooks/useWebSocket.test.tsx:81:29)

  \u25cf useWebSocket  should reflect connection state changes

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: true

    [0m [90m 100 |[39m     rerender()[33m;[39m
     [90m 101 |[39m     
    [31m[1m>[22m[39m[90m 102 |[39m     expect(result[33m.[39mcurrent[33m.[39misConnected)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
     [90m     |[39m                                        [31m[1m^[22m[39m
     [90m 103 |[39m     expect(result[33m.[39mcurrent[33m.[39mconnectionState)[33m.[39mtoBe([32m'disconnected'[39m)[33m;[39m
     [90m 104 |[39m   })[33m;[39m
     [90m 105 |[39m[0m

      at Object.toBe (__tests__/hooks/useWebSocket.test.tsx:102:40)

  \u25cf useWebSocket  should handle error states

    expect(received).toEqual(expected) // deep equality

    Expected: [Error: WebSocket connection failed]
    Received: null

    [0m [90m 118 |[39m     [36mconst[39m { result } [33m=[39m renderHook(() [33m=>[39m useWebSocket()[33m,[39m { wrapper })[33m;[39m
     [90m 119 |[39m     
    [31m[1m>[22m[39m[90m 120 |[39m     expect(result[33m.[39mcurrent[33m.[39merror)[33m.[39mtoEqual([36mnew[39m [33mError[39m([32m'WebSocket connection failed'[39m))[33m;[39m
     [90m     |[39m                                  [31m[1m^[22m[39m
     [90m 121 |[39m     expect(result[33m.[39mcurrent[33m.[39mconnectionState)[33m.[39mtoBe([32m'error'[39m)[33m;[39m
     [90m 122 |[39m   })[33m;[39m
     [90m 123 |[39m[0m

      at Object.toEqual (__tests__/hooks/useWebSocket.test.tsx:120:34)

  \u25cf useWebSocket  should handle reconnection attempts

    expect(received).toBe(expected) // Object.is equality

    Expected: 3
    Received: 0

    [0m [90m 136 |[39m     [36mconst[39m { result } [33m=[39m renderHook(() [33m=>[39m useWebSocket()[33m,[39m { wrapper })[33m;[39m
     [90m 137 |[39m     
    [31m[1m>[22m[39m[90m 138 |[39m     expect(result[33m.[39mcurrent[33m.[39mreconnectAttempts)[33m.[39mtoBe([35m3[39m)[33m;[39m
     [90m     |[39m                                              [31m[1m^[22m[39m
     [90m 139 |[39m     expect(result[33m.[39mcurrent[33m.[39mconnectionState)[33m.[39mtoBe([32m'reconnecting'[39m)[33m;[39m
     [90m 140 |[39m   })[33m;[39m
     [90m 141 |[39m[0m

      at Object.toBe (__tests__/hooks/useWebSocket.test.tsx:138:46)

  \u25cf useWebSocket  should handle message queue

    expect(received).toHaveLength(expected)

    Expected length: 2
    Received length: 0
    Received array:  []

    [0m [90m 155 |[39m     [36mconst[39m { result } [33m=[39m renderHook(() [33m=>[39m useWebSocket()[33m,[39m { wrapper })[33m;[39m
     [90m 156 |[39m     
    [31m[1m>[22m[39m[90m 157 |[39m     expect(result[33m.[39mcurrent[33m.[39mmessageQueue)[33m.[39mtoHaveLength([35m2[39m)[33m;[39m
     [90m     |[39m                                         [31m[1m^[22m[39m
     [90m 158 |[39m     expect(result[33m.[39mcurrent[33m.[39mmessageQueue[[35m0[39m][33m.[39mtype)[33m.[39mtoBe([32m'message1'[39m)[33m;[39m
     [90m 159 |[39m   })[33m;[39m
     [90m 160 |[39m[0m

      at Object.toHaveLength (__tests__/hooks/useWebSocket.test.tsx:157:41)

  \u25cf useWebSocket  should call connect method

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 1
    Received number of calls: 0

    [0m [90m 166 |[39m     result[33m.[39mcurrent[33m.[39mconnect()[33m;[39m
     [90m 167 |[39m     
    [31m[1m>[22m[39m[90m 168 |[39m     expect(mockConnect)[33m.[39mtoHaveBeenCalledTimes([35m1[39m)[33m;[39m
     [90m     |[39m                         [31m[1m^[22m[39m
     [90m 169 |[39m   })[33m;[39m
     [90m 170 |[39m
     [90m 171 |[39m   it([32m'should call disconnect method'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.toHaveBeenCalledTimes (__tests__/hooks/useWebSocket.test.tsx:168:25)

  \u25cf useWebSocket  should call disconnect method

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 1
    Received number of calls: 0

    [0m [90m 176 |[39m     result[33m.[39mcurrent[33m.[39mdisconnect()[33m;[39m
     [90m 177 |[39m     
    [31m[1m>[22m[39m[90m 178 |[39m     expect(mockDisconnect)[33m.[39mtoHaveBeenCalledTimes([35m1[39m)[33m;[39m
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 179 |[39m   })[33m;[39m
     [90m 180 |[39m
     [90m 181 |[39m   it([32m'should handle last message updates'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.toHaveBeenCalledTimes (__tests__/hooks/useWebSocket.test.tsx:178:28)

  \u25cf useWebSocket  should handle last message updates

    expect(received).toBe(expected) // Object.is equality

    Expected: "chat_message"
    Received: undefined

    [0m [90m 196 |[39m     
     [90m 197 |[39m     expect(result[33m.[39mcurrent[33m.[39mlastMessage)[33m.[39mtoBeDefined()[33m;[39m
    [31m[1m>[22m[39m[90m 198 |[39m     expect(result[33m.[39mcurrent[33m.[39mlastMessage[33m?[39m[33m.[39mtype)[33m.[39mtoBe([32m'chat_message'[39m)[33m;[39m
     [90m     |[39m                                              [31m[1m^[22m[39m
     [90m 199 |[39m     expect(result[33m.[39mcurrent[33m.[39mlastMessage[33m?[39m[33m.[39mpayload)[33m.[39mtoEqual({ text[33m:[39m [32m'Hello'[39m })[33m;[39m
     [90m 200 |[39m   })[33m;[39m
     [90m 201 |[39m })[33m;[39m[0m

      at Object.toBe (__tests__/hooks/useWebSocket.test.tsx:198:46)

FAIL __tests__/components/ChatHistory.test.tsx
  \u25cf ChatHistory Component  History Loading and Pagination  should load initial message history on mount

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  History Loading and Pagination  should display loading state during initial load

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  History Loading and Pagination  should display message history once loaded

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  History Loading and Pagination  should load more history when scrolled to top

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  History Loading and Pagination  should show "Load More" button when more history available

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  History Loading and Pagination  should handle "Load More" button click

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  History Loading and Pagination  should hide "Load More" when no more history available

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  History Loading and Pagination  should show loading state for pagination

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  History Loading and Pagination  should preserve scroll position when loading more history

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  History Loading and Pagination  should handle thread switching

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  History Loading and Pagination  should batch load requests to prevent excessive API calls

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  Message Display and Formatting  should display messages in chronological order

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  Message Display and Formatting  should format timestamps correctly

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  Message Display and Formatting  should group messages by date

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  Message Display and Formatting  should highlight search results

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  Message Display and Formatting  should show message metadata on hover

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  Message Display and Formatting  should render markdown content correctly

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  Message Display and Formatting  should handle empty message content gracefully

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  Message Search and Filtering  should provide search functionality

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  Message Search and Filtering  should display search results

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  Message Search and Filtering  should clear search results

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  Message Search and Filtering  should filter by message type

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  Message Search and Filtering  should filter by date range

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  Message Search and Filtering  should debounce search input

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  Message Management Actions  should allow deleting messages

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  Message Management Actions  should allow copying message content

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  Message Management Actions  should allow regenerating assistant messages

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  Message Management Actions  should show message edit functionality

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  Message Management Actions  should handle bulk message operations

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  Error Handling and Recovery  should display error state when history loading fails

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  Error Handling and Recovery  should allow retrying failed history loads

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  Error Handling and Recovery  should handle partial load failures

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  Error Handling and Recovery  should handle offline state gracefully

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  Error Handling and Recovery  should show cached messages when offline

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  Error Handling and Recovery  should handle malformed message data

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  Performance and Virtualization  should virtualize long message lists for performance

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  Performance and Virtualization  should cleanup observers on unmount

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  Performance and Virtualization  should optimize re-renders with message memoization

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  Accessibility  should have proper ARIA labels and roles

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  Accessibility  should support keyboard navigation

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  Accessibility  should announce dynamic content changes

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

  \u25cf ChatHistory Component  Accessibility  should provide meaningful alt text for message actions

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 72 |[39m     jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 73 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 74 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 75 |[39m     (chatService [36mas[39m any)[33m.[39mmockReturnValue(mockChatService)[33m;[39m
     [90m 76 |[39m   })[33m;[39m
     [90m 77 |[39m[0m

      at Object.mockReturnValue (__tests__/components/ChatHistory.test.tsx:74:33)

FAIL __tests__/components/chat/MessageInput.test.tsx
  \u25cf MessageInput  Input validation and sanitization  should trim whitespace from messages before sending

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Input validation and sanitization  should not send empty messages

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Input validation and sanitization  should enforce character limit

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Input validation and sanitization  should show character count warning at 80% capacity

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Input validation and sanitization  should sanitize HTML in messages

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Input validation and sanitization  should handle special characters correctly

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Input validation and sanitization  should handle unicode and emoji characters

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Input validation and sanitization  should prevent sending when processing

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Input validation and sanitization  should prevent sending when not authenticated

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Input validation and sanitization  should handle rapid successive sends correctly

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  File upload handling  should render file attachment button

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  File upload handling  should disable file attachment when processing

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  File upload handling  should show file attachment tooltip

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  File upload handling  should handle file attachment button click

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  File upload handling  should disable file attachment when not authenticated

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Keyboard shortcuts  should send message on Enter key

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Keyboard shortcuts  should insert newline on Shift+Enter

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Keyboard shortcuts  should navigate message history with arrow keys

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Keyboard shortcuts  should only navigate history when input is empty

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Keyboard shortcuts  should handle Ctrl+Enter for special actions

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Keyboard shortcuts  should show keyboard shortcuts hint

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Keyboard shortcuts  should hide keyboard shortcuts hint when typing

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Auto-resize textarea behavior  should start with single row

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Auto-resize textarea behavior  should expand textarea as content grows

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Auto-resize textarea behavior  should respect maximum rows limit

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Auto-resize textarea behavior  should reset to single row after sending

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Auto-resize textarea behavior  should handle paste of multiline content

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Auto-resize textarea behavior  should maintain scroll position during resize

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Voice input and emoji features  should render voice input button

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Voice input and emoji features  should disable voice input when processing

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Voice input and emoji features  should show voice input tooltip

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Voice input and emoji features  should handle voice button click

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Voice input and emoji features  should disable voice input when not authenticated

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Thread management  should create new thread if none exists

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Thread management  should use existing thread if available

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Thread management  should handle thread creation failure

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Thread management  should truncate long messages for thread title

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Send button states  should show send icon when not sending

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Send button states  should show loading spinner when sending

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Send button states  should disable send button when input is empty

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Send button states  should enable send button when input has content

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Send button states  should handle send button click

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Message history  should add sent messages to history

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Message history  should not add empty messages to history

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Message history  should maintain history across component lifecycle

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Focus management  should auto-focus on mount when authenticated

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Focus management  should not auto-focus when not authenticated

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Focus management  should maintain focus after sending message

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  UI state indicators  should show appropriate placeholder when authenticated

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  UI state indicators  should show sign-in prompt when not authenticated

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  UI state indicators  should show processing indicator when agent is thinking

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  UI state indicators  should show character limit warning in placeholder

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Accessibility  should have proper ARIA labels

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Accessibility  should have ARIA describedby for character count

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

  \u25cf MessageInput  Accessibility  should handle keyboard navigation properly

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 29 |[39m     
     [90m 30 |[39m     [90m// Setup default mocks[39m
    [31m[1m>[22m[39m[90m 31 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 32 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 33 |[39m     })[33m;[39m
     [90m 34 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/chat/MessageInput.test.tsx:31:33)

FAIL __tests__/hooks/useAgent.test.tsx
  \u25cf useAgent  should send message successfully

    expect(received).toHaveBeenCalled()

    Matcher error: received value must be a mock or spy function

    Received has value: undefined

    [0m [90m  99 |[39m     })[33m;[39m
     [90m 100 |[39m     
    [31m[1m>[22m[39m[90m 101 |[39m     expect(mockWebSocketInstance[33m?[39m[33m.[39msend)[33m.[39mtoHaveBeenCalled()[33m;[39m
     [90m     |[39m                                         [31m[1m^[22m[39m
     [90m 102 |[39m     [36mconst[39m sentData [33m=[39m [33mJSON[39m[33m.[39mparse(mockWebSocketInstance[33m?[39m[33m.[39msend[33m.[39mmock[33m.[39mcalls[[35m0[39m][[35m0[39m])[33m;[39m
     [90m 103 |[39m     expect(sentData[33m.[39mtype)[33m.[39mtoBe([32m'user_message'[39m)[33m;[39m
     [90m 104 |[39m     expect(sentData[33m.[39mdata[33m.[39mtext)[33m.[39mtoBe([32m'Test message'[39m)[33m;[39m[0m

      at Object.toHaveBeenCalled (__tests__/hooks/useAgent.test.tsx:101:41)

  \u25cf useAgent  should handle API error

    TypeError: Cannot set properties of null (setting 'readyState')

    [0m [90m 115 |[39m     [90m// Simulate WebSocket error[39m
     [90m 116 |[39m     act(() [33m=>[39m {
    [31m[1m>[22m[39m[90m 117 |[39m       mockWebSocketInstance[33m.[39mreadyState [33m=[39m [33mWebSocket[39m[33m.[39m[33mCLOSED[39m[33m;[39m
     [90m     |[39m                                       [31m[1m^[22m[39m
     [90m 118 |[39m       result[33m.[39mcurrent[33m.[39msendUserMessage([32m'Test message'[39m)[33m;[39m
     [90m 119 |[39m     })[33m;[39m
     [90m 120 |[39m     [0m

      at __tests__/hooks/useAgent.test.tsx:117:39
      at node_modules/@testing-library/react/dist/act-compat.js:48:24
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:789:22)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at Object.<anonymous> (__tests__/hooks/useAgent.test.tsx:116:8)

  \u25cf useAgent  should handle network error

    expect(received).not.toHaveBeenCalled()

    Matcher error: received value must be a mock or spy function

    Received has value: undefined

    [0m [90m 139 |[39m     
     [90m 140 |[39m     [90m// Message should not be sent during error state[39m
    [31m[1m>[22m[39m[90m 141 |[39m     expect(mockWebSocketInstance[33m?[39m[33m.[39msend)[33m.[39mnot[33m.[39mtoHaveBeenCalled()[33m;[39m
     [90m     |[39m                                             [31m[1m^[22m[39m
     [90m 142 |[39m   })[33m;[39m
     [90m 143 |[39m
     [90m 144 |[39m   it([32m'should set loading state during message send'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.toHaveBeenCalled (__tests__/hooks/useAgent.test.tsx:141:45)

  \u25cf useAgent  should set loading state during message send

    expect(received).toHaveBeenCalled()

    Matcher error: received value must be a mock or spy function

    Received has value: undefined

    [0m [90m 154 |[39m     })[33m;[39m
     [90m 155 |[39m     
    [31m[1m>[22m[39m[90m 156 |[39m     expect(mockWebSocketInstance[33m?[39m[33m.[39msend)[33m.[39mtoHaveBeenCalled()[33m;[39m
     [90m     |[39m                                         [31m[1m^[22m[39m
     [90m 157 |[39m   })[33m;[39m
     [90m 158 |[39m
     [90m 159 |[39m   it([32m'should clear messages'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.toHaveBeenCalled (__tests__/hooks/useAgent.test.tsx:156:41)

  \u25cf useAgent  should handle empty message

    expect(received).toHaveBeenCalled()

    Matcher error: received value must be a mock or spy function

    Received has value: undefined

    [0m [90m 185 |[39m     
     [90m 186 |[39m     [90m// Empty message should still be sent (hook doesn't validate)[39m
    [31m[1m>[22m[39m[90m 187 |[39m     expect(mockWebSocketInstance[33m?[39m[33m.[39msend)[33m.[39mtoHaveBeenCalled()[33m;[39m
     [90m     |[39m                                         [31m[1m^[22m[39m
     [90m 188 |[39m   })[33m;[39m
     [90m 189 |[39m
     [90m 190 |[39m   it([32m'should handle whitespace-only message'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.toHaveBeenCalled (__tests__/hooks/useAgent.test.tsx:187:41)

  \u25cf useAgent  should handle whitespace-only message

    expect(received).toHaveBeenCalled()

    Matcher error: received value must be a mock or spy function

    Received has value: undefined

    [0m [90m 201 |[39m     
     [90m 202 |[39m     [90m// Whitespace message should still be sent (hook doesn't validate)[39m
    [31m[1m>[22m[39m[90m 203 |[39m     expect(mockWebSocketInstance[33m?[39m[33m.[39msend)[33m.[39mtoHaveBeenCalled()[33m;[39m
     [90m     |[39m                                         [31m[1m^[22m[39m
     [90m 204 |[39m   })[33m;[39m
     [90m 205 |[39m
     [90m 206 |[39m   it([32m'should maintain message history'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.toHaveBeenCalled (__tests__/hooks/useAgent.test.tsx:203:41)

  \u25cf useAgent  should maintain message history

    expect(received).toHaveBeenCalledTimes(expected)

    Matcher error: received value must be a mock or spy function

    Received has value: undefined

    [0m [90m 222 |[39m     })[33m;[39m
     [90m 223 |[39m     
    [31m[1m>[22m[39m[90m 224 |[39m     expect(mockWebSocketInstance[33m?[39m[33m.[39msend)[33m.[39mtoHaveBeenCalledTimes([35m2[39m)[33m;[39m
     [90m     |[39m                                         [31m[1m^[22m[39m
     [90m 225 |[39m   })[33m;[39m
     [90m 226 |[39m
     [90m 227 |[39m   it([32m'should handle concurrent messages'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.toHaveBeenCalledTimes (__tests__/hooks/useAgent.test.tsx:224:41)

  \u25cf useAgent  should handle concurrent messages

    expect(received).toHaveBeenCalledTimes(expected)

    Matcher error: received value must be a mock or spy function

    Received has value: undefined

    [0m [90m 240 |[39m     })[33m;[39m
     [90m 241 |[39m     
    [31m[1m>[22m[39m[90m 242 |[39m     expect(mockWebSocketInstance[33m?[39m[33m.[39msend)[33m.[39mtoHaveBeenCalledTimes([35m3[39m)[33m;[39m
     [90m     |[39m                                         [31m[1m^[22m[39m
     [90m 243 |[39m   })[33m;[39m
     [90m 244 |[39m
     [90m 245 |[39m   it([32m'should reset error on successful message'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.toHaveBeenCalledTimes (__tests__/hooks/useAgent.test.tsx:242:41)

  \u25cf useAgent  should reset error on successful message

    TypeError: Cannot set properties of null (setting 'readyState')

    [0m [90m 260 |[39m     [90m// Then reconnect and send message successfully[39m
     [90m 261 |[39m     act(() [33m=>[39m {
    [31m[1m>[22m[39m[90m 262 |[39m       mockWebSocketInstance[33m.[39mreadyState [33m=[39m [33mWebSocket[39m[33m.[39m[33mOPEN[39m[33m;[39m
     [90m     |[39m                                       [31m[1m^[22m[39m
     [90m 263 |[39m       result[33m.[39mcurrent[33m.[39msendUserMessage([32m'Test message'[39m)[33m;[39m
     [90m 264 |[39m     })[33m;[39m
     [90m 265 |[39m     [0m

      at __tests__/hooks/useAgent.test.tsx:262:39
      at node_modules/@testing-library/react/dist/act-compat.js:48:24
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:789:22)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at Object.<anonymous> (__tests__/hooks/useAgent.test.tsx:261:8)

FAIL __tests__/components/AgentStatusPanel.test.tsx
  \u25cf AgentStatusPanel Component  Agent Status Display  should render all agent status cards

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 58 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 59 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 61 |[39m   })[33m;[39m
     [90m 62 |[39m
     [90m 63 |[39m   afterEach(() [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/AgentStatusPanel.test.tsx:60:33)

  \u25cf AgentStatusPanel Component  Agent Status Display  should display idle status by default

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 58 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 59 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 61 |[39m   })[33m;[39m
     [90m 62 |[39m
     [90m 63 |[39m   afterEach(() [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/AgentStatusPanel.test.tsx:60:33)

  \u25cf AgentStatusPanel Component  Agent Status Display  should update status when agents become active

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 58 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 59 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 61 |[39m   })[33m;[39m
     [90m 62 |[39m
     [90m 63 |[39m   afterEach(() [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/AgentStatusPanel.test.tsx:60:33)

  \u25cf AgentStatusPanel Component  Agent Status Display  should show progress bars for active agents

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 58 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 59 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 61 |[39m   })[33m;[39m
     [90m 62 |[39m
     [90m 63 |[39m   afterEach(() [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/AgentStatusPanel.test.tsx:60:33)

  \u25cf AgentStatusPanel Component  Agent Status Display  should display current task descriptions

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 58 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 59 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 61 |[39m   })[33m;[39m
     [90m 62 |[39m
     [90m 63 |[39m   afterEach(() [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/AgentStatusPanel.test.tsx:60:33)

  \u25cf AgentStatusPanel Component  Agent Status Display  should show error states with appropriate styling

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 58 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 59 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 61 |[39m   })[33m;[39m
     [90m 62 |[39m
     [90m 63 |[39m   afterEach(() [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/AgentStatusPanel.test.tsx:60:33)

  \u25cf AgentStatusPanel Component  Agent Status Display  should display last activity timestamps

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 58 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 59 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 61 |[39m   })[33m;[39m
     [90m 62 |[39m
     [90m 63 |[39m   afterEach(() [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/AgentStatusPanel.test.tsx:60:33)

  \u25cf AgentStatusPanel Component  Agent Status Display  should handle agents in queue state

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 58 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 59 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 61 |[39m   })[33m;[39m
     [90m 62 |[39m
     [90m 63 |[39m   afterEach(() [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/AgentStatusPanel.test.tsx:60:33)

  \u25cf AgentStatusPanel Component  Real-time Updates  should update agent status from WebSocket messages

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 58 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 59 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 61 |[39m   })[33m;[39m
     [90m 62 |[39m
     [90m 63 |[39m   afterEach(() [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/AgentStatusPanel.test.tsx:60:33)

  \u25cf AgentStatusPanel Component  Real-time Updates  should handle batch status updates

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 58 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 59 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 61 |[39m   })[33m;[39m
     [90m 62 |[39m
     [90m 63 |[39m   afterEach(() [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/AgentStatusPanel.test.tsx:60:33)

  \u25cf AgentStatusPanel Component  Real-time Updates  should animate status transitions smoothly

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 58 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 59 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 61 |[39m   })[33m;[39m
     [90m 62 |[39m
     [90m 63 |[39m   afterEach(() [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/AgentStatusPanel.test.tsx:60:33)

  \u25cf AgentStatusPanel Component  Real-time Updates  should update progress bars smoothly

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 58 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 59 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 61 |[39m   })[33m;[39m
     [90m 62 |[39m
     [90m 63 |[39m   afterEach(() [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/AgentStatusPanel.test.tsx:60:33)

  \u25cf AgentStatusPanel Component  Real-time Updates  should refresh timestamps periodically

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 58 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 59 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 61 |[39m   })[33m;[39m
     [90m 62 |[39m
     [90m 63 |[39m   afterEach(() [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/AgentStatusPanel.test.tsx:60:33)

  \u25cf AgentStatusPanel Component  Real-time Updates  should handle rapid status changes without flickering

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 58 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 59 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 61 |[39m   })[33m;[39m
     [90m 62 |[39m
     [90m 63 |[39m   afterEach(() [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/AgentStatusPanel.test.tsx:60:33)

  \u25cf AgentStatusPanel Component  Real-time Updates  should debounce frequent updates

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 58 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 59 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 61 |[39m   })[33m;[39m
     [90m 62 |[39m
     [90m 63 |[39m   afterEach(() [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/AgentStatusPanel.test.tsx:60:33)

  \u25cf AgentStatusPanel Component  System Metrics Integration  should display overall system health

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 58 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 59 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 61 |[39m   })[33m;[39m
     [90m 62 |[39m
     [90m 63 |[39m   afterEach(() [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/AgentStatusPanel.test.tsx:60:33)

  \u25cf AgentStatusPanel Component  System Metrics Integration  should show performance metrics

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 58 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 59 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 61 |[39m   })[33m;[39m
     [90m 62 |[39m
     [90m 63 |[39m   afterEach(() [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/AgentStatusPanel.test.tsx:60:33)

  \u25cf AgentStatusPanel Component  System Metrics Integration  should highlight performance issues

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 58 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 59 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 61 |[39m   })[33m;[39m
     [90m 62 |[39m
     [90m 63 |[39m   afterEach(() [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/AgentStatusPanel.test.tsx:60:33)

  \u25cf AgentStatusPanel Component  User Interactions  should expand agent details on click

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 58 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 59 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 61 |[39m   })[33m;[39m
     [90m 62 |[39m
     [90m 63 |[39m   afterEach(() [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/AgentStatusPanel.test.tsx:60:33)

  \u25cf AgentStatusPanel Component  User Interactions  should allow pausing individual agents

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 58 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 59 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 61 |[39m   })[33m;[39m
     [90m 62 |[39m
     [90m 63 |[39m   afterEach(() [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/AgentStatusPanel.test.tsx:60:33)

  \u25cf AgentStatusPanel Component  User Interactions  should show agent logs when requested

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 58 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 59 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 61 |[39m   })[33m;[39m
     [90m 62 |[39m
     [90m 63 |[39m   afterEach(() [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/AgentStatusPanel.test.tsx:60:33)

  \u25cf AgentStatusPanel Component  User Interactions  should filter agents by status

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 58 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 59 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 61 |[39m   })[33m;[39m
     [90m 62 |[39m
     [90m 63 |[39m   afterEach(() [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/AgentStatusPanel.test.tsx:60:33)

  \u25cf AgentStatusPanel Component  User Interactions  should support bulk agent operations

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 58 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 59 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 61 |[39m   })[33m;[39m
     [90m 62 |[39m
     [90m 63 |[39m   afterEach(() [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/AgentStatusPanel.test.tsx:60:33)

  \u25cf AgentStatusPanel Component  Error Handling and Recovery  should handle WebSocket disconnection

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 58 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 59 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 61 |[39m   })[33m;[39m
     [90m 62 |[39m
     [90m 63 |[39m   afterEach(() [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/AgentStatusPanel.test.tsx:60:33)

  \u25cf AgentStatusPanel Component  Error Handling and Recovery  should show stale data warning

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 58 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 59 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 61 |[39m   })[33m;[39m
     [90m 62 |[39m
     [90m 63 |[39m   afterEach(() [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/AgentStatusPanel.test.tsx:60:33)

  \u25cf AgentStatusPanel Component  Error Handling and Recovery  should handle agent status fetch failures

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 58 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 59 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 61 |[39m   })[33m;[39m
     [90m 62 |[39m
     [90m 63 |[39m   afterEach(() [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/AgentStatusPanel.test.tsx:60:33)

  \u25cf AgentStatusPanel Component  Error Handling and Recovery  should maintain functionality during partial failures

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 58 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 59 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 61 |[39m   })[33m;[39m
     [90m 62 |[39m
     [90m 63 |[39m   afterEach(() [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/AgentStatusPanel.test.tsx:60:33)

  \u25cf AgentStatusPanel Component  Performance and Optimization  should memoize agent cards to prevent unnecessary rerenders

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 58 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 59 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 61 |[39m   })[33m;[39m
     [90m 62 |[39m
     [90m 63 |[39m   afterEach(() [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/AgentStatusPanel.test.tsx:60:33)

  \u25cf AgentStatusPanel Component  Performance and Optimization  should handle large numbers of status updates efficiently

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 58 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 59 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 61 |[39m   })[33m;[39m
     [90m 62 |[39m
     [90m 63 |[39m   afterEach(() [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/AgentStatusPanel.test.tsx:60:33)

  \u25cf AgentStatusPanel Component  Performance and Optimization  should cleanup timers and listeners on unmount

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 58 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 59 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 61 |[39m   })[33m;[39m
     [90m 62 |[39m
     [90m 63 |[39m   afterEach(() [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/AgentStatusPanel.test.tsx:60:33)

  \u25cf AgentStatusPanel Component  Accessibility  should have proper ARIA labels and roles

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 58 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 59 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 61 |[39m   })[33m;[39m
     [90m 62 |[39m
     [90m 63 |[39m   afterEach(() [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/AgentStatusPanel.test.tsx:60:33)

  \u25cf AgentStatusPanel Component  Accessibility  should announce status changes to screen readers

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 58 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 59 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 61 |[39m   })[33m;[39m
     [90m 62 |[39m
     [90m 63 |[39m   afterEach(() [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/AgentStatusPanel.test.tsx:60:33)

  \u25cf AgentStatusPanel Component  Accessibility  should support keyboard navigation

    TypeError: _useWebSocket.useWebSocket.mockReturnValue is not a function

    [0m [90m 58 |[39m     jest[33m.[39museFakeTimers()[33m;[39m
     [90m 59 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
    [31m[1m>[22m[39m[90m 60 |[39m     (useWebSocket [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockWebSocket)[33m;[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 61 |[39m   })[33m;[39m
     [90m 62 |[39m
     [90m 63 |[39m   afterEach(() [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/AgentStatusPanel.test.tsx:60:33)

FAIL __tests__/components/ChatSidebar.test.tsx
  \u25cf ChatSidebar Component  Thread List Display  should render thread list when threads are available

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Thread List Display  should display thread metadata correctly

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Thread List Display  should show empty state when no threads exist

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Thread List Display  should display loading state while fetching threads

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Thread List Display  should show error state when thread loading fails

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Thread List Display  should group threads by date

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Thread List Display  should sort threads by last activity

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Thread List Display  should truncate long thread titles and messages

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Thread List Display  should show thread status indicators

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Thread Navigation and Switching  should switch to selected thread

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Thread Navigation and Switching  should highlight active thread correctly

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Thread Navigation and Switching  should support keyboard navigation

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Thread Navigation and Switching  should show thread preview on hover

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Thread Navigation and Switching  should handle rapid thread switching

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Thread Navigation and Switching  should persist navigation state across page reloads

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Thread Management Operations  should create new thread

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Thread Management Operations  should show thread creation dialog

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Thread Management Operations  should rename existing thread

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Thread Management Operations  should delete thread with confirmation

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Thread Management Operations  should archive and unarchive threads

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Thread Management Operations  should handle bulk thread operations

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Thread Management Operations  should export thread data

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Thread Search and Filtering  should provide search functionality

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Thread Search and Filtering  should filter threads based on search query

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Thread Search and Filtering  should clear search results

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Thread Search and Filtering  should filter by thread status

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Thread Search and Filtering  should filter by date range

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Thread Search and Filtering  should support advanced search with filters

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Thread Search and Filtering  should show search suggestions

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Error Handling and Recovery  should handle thread switching failures

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Error Handling and Recovery  should retry failed operations

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Error Handling and Recovery  should handle network disconnection gracefully

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Error Handling and Recovery  should handle partial load failures

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Performance and Optimization  should virtualize large thread lists

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Performance and Optimization  should debounce search input

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Performance and Optimization  should cleanup listeners on unmount

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Accessibility  should have proper ARIA labels and roles

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Accessibility  should support screen reader announcements

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Accessibility  should support high contrast mode

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

  \u25cf ChatSidebar Component  Accessibility  should provide keyboard shortcuts info

    TypeError: Cannot read properties of undefined (reading 'mockReturnValue')

    [0m [90m 77 |[39m     (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockChatStore)[33m;[39m
     [90m 78 |[39m     (useThreads [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue(mockThreadsHook)[33m;[39m
    [31m[1m>[22m[39m[90m 79 |[39m     (threadService [36mas[39m any)[33m.[39mmockReturnValue(mockThreadService)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 80 |[39m   })[33m;[39m
     [90m 81 |[39m
     [90m 82 |[39m   [36mconst[39m renderWithProvider [33m=[39m (component[33m:[39m [33mReact[39m[33m.[39m[33mReactElement[39m) [33m=>[39m {[0m

      at Object.mockReturnValue (__tests__/components/ChatSidebar.test.tsx:79:28)

FAIL __tests__/hooks/additionalHooks.test.tsx
  \u25cf test_useDemoWebSocket_connection  should establish demo WebSocket connection

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    Ignored nodes: comments, script, style
    [36m<html>[39m
      [36m<head />[39m
      [36m<body>[39m
        [36m<div />[39m
      [36m</body>[39m
    [36m</html>[39m

    [0m [90m 46 |[39m     
     [90m 47 |[39m     [36mawait[39m waitFor(() [33m=>[39m {
    [31m[1m>[22m[39m[90m 48 |[39m       expect(result[33m.[39mcurrent[33m.[39misConnected)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m    |[39m                                          [31m[1m^[22m[39m
     [90m 49 |[39m     })[33m;[39m
     [90m 50 |[39m     
     [90m 51 |[39m     expect(global[33m.[39m[33mWebSocket[39m)[33m.[39mtoHaveBeenCalledWith([0m

      at toBe (__tests__/hooks/additionalHooks.test.tsx:48:42)
      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)
      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)
      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)
      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)

  \u25cf test_useDemoWebSocket_connection  should handle message queuing when disconnected

    TypeError: Cannot read properties of null (reading 'send')

    [0m [90m 125 |[39m   [36mconst[39m sendMessage [33m=[39m useCallback((message[33m:[39m any) [33m=>[39m {
     [90m 126 |[39m     [36mif[39m (wsRef[33m.[39mcurrent[33m?[39m[33m.[39mreadyState [33m===[39m [33mWebSocket[39m[33m.[39m[33mOPEN[39m) {
    [31m[1m>[22m[39m[90m 127 |[39m       wsRef[33m.[39mcurrent[33m.[39msend([33mJSON[39m[33m.[39mstringify(message))
     [90m     |[39m                     [31m[1m^[22m[39m
     [90m 128 |[39m     } [36melse[39m {
     [90m 129 |[39m       console[33m.[39merror([32m'WebSocket is not connected'[39m)
     [90m 130 |[39m       setError([36mnew[39m [33mError[39m([32m'WebSocket is not connected'[39m))[0m

      at Object.send [as sendMessage] (hooks/useDemoWebSocket.ts:127:21)
      at sendMessage (__tests__/hooks/additionalHooks.test.tsx:64:22)
      at node_modules/@testing-library/react/dist/act-compat.js:48:24
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:789:22)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at Object.<anonymous> (__tests__/hooks/additionalHooks.test.tsx:63:8)

  \u25cf test_useMediaQuery_responsive  should handle debouncing for rapid changes

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: true

    [0m [90m 186 |[39m     
     [90m 187 |[39m     [90m// Should not update immediately[39m
    [31m[1m>[22m[39m[90m 188 |[39m     expect(result[33m.[39mcurrent)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 189 |[39m     
     [90m 190 |[39m     [90m// Wait for debounce[39m
     [90m 191 |[39m     [36mawait[39m waitFor(() [33m=>[39m {[0m

      at Object.toBe (__tests__/hooks/additionalHooks.test.tsx:188:28)

FAIL __tests__/imports/internal-imports.test.tsx
  \u25cf Internal Frontend Module Import Tests  Component imports  should import chat components

    expect(received).not.toThrow()

    Error name:    "SyntaxError"
    Error message: "Unexpected token 'export'"

        [0m [90m 13 |[39m   [36mconst[39m lastUpdateRef [33m=[39m useRef[33m<[39m[33mnumber[39m[33m>[39m([33mDate[39m[33m.[39mnow())[33m;[39m
         [90m 14 |[39m   
        [31m[1m>[22m[39m[90m 15 |[39m   [90m// Stream content character by character using requestAnimationFrame[39m
         [90m    |[39m                                                               [31m[1m^[22m[39m
         [90m 16 |[39m   useEffect(() [33m=>[39m {
         [90m 17 |[39m     [36mif[39m ([33m![39mdata[33m?[39m[33m.[39mpartialContent) {
         [90m 18 |[39m       setDisplayedContent([32m''[39m)[33m;[39m[0m

      at Runtime.createScriptFromCode (node_modules/jest-runtime/build/index.js:1316:40)
      at Object.<anonymous> (components/chat/layers/MediumLayer.tsx:15:63)
      at Object.<anonymous> (components/chat/PersistentResponseCard.tsx:17:22)
      at Object.<anonymous> (components/chat/MainChat.tsx:17:33)
      at require (__tests__/imports/internal-imports.test.tsx:39:20)
      at Object.<anonymous> (node_modules/expect/build/index.js:1824:9)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:2235:93)
      at Object.toThrow (__tests__/imports/internal-imports.test.tsx:39:63)
      at Object.toThrow (__tests__/imports/internal-imports.test.tsx:39:63)

  \u25cf Internal Frontend Module Import Tests  Service imports  should import API services

    expect(received).toBeDefined()

    Received: undefined

    [0m [90m 154 |[39m       [90m// Verify service exports[39m
     [90m 155 |[39m       [36mconst[39m api [33m=[39m require([32m'@/services/api'[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 156 |[39m       expect(api[33m.[39mapiClient)[33m.[39mtoBeDefined()[33m;[39m
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 157 |[39m       
     [90m 158 |[39m       [36mconst[39m threadService [33m=[39m require([32m'@/services/threadService'[39m)[33m;[39m
     [90m 159 |[39m       expect(threadService[33m.[39mthreadService)[33m.[39mtoBeDefined()[33m;[39m[0m

      at Object.toBeDefined (__tests__/imports/internal-imports.test.tsx:156:29)

  \u25cf Internal Frontend Module Import Tests  Utility imports  should import configuration

    expect(received).not.toThrow()

    Error name:    ""
    Error message: "Configuration error:
    Could not locate module @/config/api mapped as:
    C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\$1.
    Please check your configuration for these entries:
    {
      \"moduleNameMapper\": {
        \"/^@\\/(.*)$/\": \"C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\$1\"
      },
      \"resolver\": undefined
    }"

        [0m [90m 182 |[39m
         [90m 183 |[39m     it([32m'should import configuration'[39m[33m,[39m () [33m=>[39m {
        [31m[1m>[22m[39m[90m 184 |[39m       expect(() [33m=>[39m require([32m'@/config/api'[39m))[33m.[39mnot[33m.[39mtoThrow()[33m;[39m
         [90m     |[39m                    [31m[1m^[22m[39m
         [90m 185 |[39m       
         [90m 186 |[39m       [36mconst[39m config [33m=[39m require([32m'@/config/api'[39m)[33m;[39m
         [90m 187 |[39m       expect(config[33m.[39m[33mAPI_BASE_URL[39m)[33m.[39mtoBeDefined()[33m;[39m[0m

      at createNoMappedModuleFoundError (node_modules/jest-resolve/build/index.js:1117:17)
      at require (__tests__/imports/internal-imports.test.tsx:184:20)
      at Object.<anonymous> (node_modules/expect/build/index.js:1824:9)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:2235:93)
      at Object.toThrow (__tests__/imports/internal-imports.test.tsx:184:49)
      at Object.toThrow (__tests__/imports/internal-imports.test.tsx:184:49)

  \u25cf Internal Frontend Module Import Tests  Critical internal imports batch test  should successfully import all critical internal modules

    expect(received).toEqual(expected) // deep equality

    - Expected  - 1
    + Received  + 5

    - Array []
    + Array [
    +   "@/components/chat/ChatInterface",
    +   "@/store/useThreadStore",
    +   "@/config/api",
    + ]

    [0m [90m 256 |[39m       })[33m;[39m
     [90m 257 |[39m
    [31m[1m>[22m[39m[90m 258 |[39m       expect(failedImports)[33m.[39mtoEqual([])[33m;[39m
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 259 |[39m     })[33m;[39m
     [90m 260 |[39m   })[33m;[39m
     [90m 261 |[39m[0m

      at Object.toEqual (__tests__/imports/internal-imports.test.tsx:258:29)

  \u25cf Internal Frontend Module Import Tests  Circular dependency check  should not have circular dependencies in critical modules

    Configuration error:

    Could not locate module @/store/useWebSocketStore mapped as:
    C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\store\$1.

    Please check your configuration for these entries:
    {
      "moduleNameMapper": {
        "/^@\/store\/(.*)$/": "C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\store\$1"
      },
      "resolver": undefined
    }

    [0m [90m 272 |[39m       [90m// Clear module cache[39m
     [90m 273 |[39m       modules[33m.[39mforEach(mod [33m=>[39m {
    [31m[1m>[22m[39m[90m 274 |[39m         [36mdelete[39m require[33m.[39mcache[require[33m.[39mresolve(mod)][33m;[39m
     [90m     |[39m                                      [31m[1m^[22m[39m
     [90m 275 |[39m       })[33m;[39m
     [90m 276 |[39m
     [90m 277 |[39m       [90m// Import in order A[39m[0m

      at createNoMappedModuleFoundError (node_modules/jest-resolve/build/index.js:1117:17)
      at resolve (__tests__/imports/internal-imports.test.tsx:274:38)
          at Array.forEach (<anonymous>)
      at Object.forEach (__tests__/imports/internal-imports.test.tsx:273:15)

  \u25cf Internal Frontend Module Import Tests  Component export verification  should export expected items from components

    Configuration error:

    Could not locate module @/components/ui/dialog mapped as:
    C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\components\$1.

    Please check your configuration for these entries:
    {
      "moduleNameMapper": {
        "/^@\/components\/(.*)$/": "C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\components\$1"
      },
      "resolver": undefined
    }

    [0m [90m 309 |[39m
     [90m 310 |[39m       [90m// Dialog component[39m
    [31m[1m>[22m[39m[90m 311 |[39m       [36mconst[39m dialog [33m=[39m require([32m'@/components/ui/dialog'[39m)[33m;[39m
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 312 |[39m       expect(dialog[33m.[39m[33mDialog[39m)[33m.[39mtoBeDefined()[33m;[39m
     [90m 313 |[39m       expect(dialog[33m.[39m[33mDialogTrigger[39m)[33m.[39mtoBeDefined()[33m;[39m
     [90m 314 |[39m       expect(dialog[33m.[39m[33mDialogContent[39m)[33m.[39mtoBeDefined()[33m;[39m[0m

      at createNoMappedModuleFoundError (node_modules/jest-resolve/build/index.js:1117:17)
      at Object.require (__tests__/imports/internal-imports.test.tsx:311:22)

  \u25cf Internal Frontend Module Import Tests  Store state verification  should have expected state and actions in stores

    Configuration error:

    Could not locate module @/store/useThreadStore mapped as:
    C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\store\$1.

    Please check your configuration for these entries:
    {
      "moduleNameMapper": {
        "/^@\/store\/(.*)$/": "C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\store\$1"
      },
      "resolver": undefined
    }

    [0m [90m 322 |[39m   describe([32m'Store state verification'[39m[33m,[39m () [33m=>[39m {
     [90m 323 |[39m     it([32m'should have expected state and actions in stores'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 324 |[39m       [36mconst[39m { useThreadStore } [33m=[39m require([32m'@/store/useThreadStore'[39m)[33m;[39m
     [90m     |[39m                                  [31m[1m^[22m[39m
     [90m 325 |[39m       [36mconst[39m store [33m=[39m useThreadStore[33m.[39mgetState()[33m;[39m
     [90m 326 |[39m       
     [90m 327 |[39m       [90m// Check for expected state properties[39m[0m

      at createNoMappedModuleFoundError (node_modules/jest-resolve/build/index.js:1117:17)
      at Object.require (__tests__/imports/internal-imports.test.tsx:324:34)

  \u25cf Internal Frontend Module Import Tests  Integration test imports  should import integration test files

    expect(received).not.toThrow()

    Error name:    "Error"
    Error message: "  [31mx[0m await isn't allowed in non-async function
         ,-[[36;1;4mC:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\__tests__\\integration\\critical-integration.test.tsx[0m:190:1]
     [2m187[0m |       }));
     [2m188[0m |
     [2m189[0m |       await waitFor(() => {
     [2m190[0m |         await waitFor(() => {
         : [35;1m        ^^^^^[0m
     [2m191[0m |         expect(screen.getByTestId('status')).toHaveTextContent('Processing');
     [2m192[0m |       });
     [2m192[0m |       });
         `----
    Caused by:
        Syntax Error"

        [0m [90m 337 |[39m   describe([32m'Integration test imports'[39m[33m,[39m () [33m=>[39m {
         [90m 338 |[39m     it([32m'should import integration test files'[39m[33m,[39m () [33m=>[39m {
        [31m[1m>[22m[39m[90m 339 |[39m       expect(() [33m=>[39m require([32m'../integration/critical-integration.test'[39m))[33m.[39mnot[33m.[39mtoThrow()[33m;[39m
         [90m     |[39m                    [31m[1m^[22m[39m
         [90m 340 |[39m       expect(() [33m=>[39m require([32m'../integration/advanced-integration.test'[39m))[33m.[39mnot[33m.[39mtoThrow()[33m;[39m
         [90m 341 |[39m       expect(() [33m=>[39m require([32m'../integration/comprehensive-integration.test'[39m))[33m.[39mnot[33m.[39mtoThrow()[33m;[39m
         [90m 342 |[39m     })[33m;[39m[0m

      at Object.transformSync (node_modules/next/src/build/swc/index.ts:1374:25)
      at transformSync (node_modules/next/src/build/swc/index.ts:1477:19)
      at Object.process (node_modules/next/src/build/swc/jest-transformer.ts:105:25)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/index.js:422:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/index.js:519:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/index.js:558:19)
      at require (__tests__/imports/internal-imports.test.tsx:339:20)
      at Object.<anonymous> (node_modules/expect/build/index.js:1824:9)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:2235:93)
      at Object.toThrow (__tests__/imports/internal-imports.test.tsx:339:77)
      at Object.toThrow (__tests__/imports/internal-imports.test.tsx:339:77)

FAIL __tests__/test-utils/providers.tsx
  \u25cf Test suite failed to run

    Your test suite must contain at least one test.

      at onResult (node_modules/@jest/core/build/index.js:1052:18)
      at node_modules/@jest/core/build/index.js:1122:165
      at node_modules/emittery/index.js:363:13
          at Array.map (<anonymous>)
      at Emittery.emit (node_modules/emittery/index.js:361:23)

FAIL __tests__/utils/test-utils.tsx
  \u25cf Test suite failed to run

    ReferenceError: TextEncoder is not defined

    [0m [90m 70 |[39m [36mexport[39m [33m*[39m [36mfrom[39m [32m'@testing-library/react'[39m[33m;[39m
     [90m 71 |[39m [36mexport[39m { customRender [36mas[39m render }[33m;[39m
    [31m[1m>[22m[39m[90m 72 |[39m
     [90m    |[39m [31m[1m^[22m[39m
     [90m 73 |[39m [90m// Utility to wrap component with router only[39m
     [90m 74 |[39m [36mexport[39m [36mfunction[39m withRouter(component[33m:[39m [33mReactElement[39m) {
     [90m 75 |[39m   [36mreturn[39m [33m<[39m[33mBrowserRouter[39m[33m>[39m{component}[33m<[39m[33m/[39m[33mBrowserRouter[39m[33m>[39m[33m;[39m[0m

      at Object.<anonymous> (node_modules/react-router/dist/development/index.js:328:31)
      at Object.<anonymous> (node_modules/react-router/dist/development/dom-export.js:19:20)
      at Object.<anonymous> (node_modules/react-router-dom/dist/index.js:38:18)
      at Object.<anonymous> (__tests__/utils/test-utils.tsx:72:25)

FAIL __tests__/components/UIComponents.test.tsx
  \u25cf Test suite failed to run

    ReferenceError: TextEncoder is not defined

    [0m [90m 70 |[39m [36mexport[39m [33m*[39m [36mfrom[39m [32m'@testing-library/react'[39m[33m;[39m
     [90m 71 |[39m [36mexport[39m { customRender [36mas[39m render }[33m;[39m
    [31m[1m>[22m[39m[90m 72 |[39m
     [90m    |[39m [31m[1m^[22m[39m
     [90m 73 |[39m [90m// Utility to wrap component with router only[39m
     [90m 74 |[39m [36mexport[39m [36mfunction[39m withRouter(component[33m:[39m [33mReactElement[39m) {
     [90m 75 |[39m   [36mreturn[39m [33m<[39m[33mBrowserRouter[39m[33m>[39m{component}[33m<[39m[33m/[39m[33mBrowserRouter[39m[33m>[39m[33m;[39m[0m

      at Object.<anonymous> (node_modules/react-router/dist/development/index.js:328:31)
      at Object.<anonymous> (node_modules/react-router/dist/development/dom-export.js:19:20)
      at Object.<anonymous> (node_modules/react-router-dom/dist/index.js:38:18)
      at Object.<anonymous> (__tests__/utils/test-utils.tsx:72:25)
      at Object.<anonymous> (__tests__/components/UIComponents.test.tsx:7:20)

FAIL __tests__/components/FinalReportView.test.tsx
  \u25cf Test suite failed to run

    Configuration error:

    Could not locate module @/components/charts/PerformanceChart mapped as:
    C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\components\$1.

    Please check your configuration for these entries:
    {
      "moduleNameMapper": {
        "/^@\/components\/(.*)$/": "C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\components\$1"
      },
      "resolver": undefined
    }

    [0m [90m 12 |[39m   [33mCardTitle[39m[33m:[39m ({ children }[33m:[39m any) [33m=>[39m [33m<[39m[33mh3[39m data[33m-[39mtestid[33m=[39m[32m"card-title"[39m[33m>[39m{children}[33m<[39m[33m/[39m[33mh3[39m[33m>[39m
     [90m 13 |[39m }))[33m;[39m
    [31m[1m>[22m[39m[90m 14 |[39m jest[33m.[39mmock([32m'@/components/charts/PerformanceChart'[39m[33m,[39m () [33m=>[39m ({
     [90m    |[39m      [31m[1m^[22m[39m
     [90m 15 |[39m   [33mPerformanceChart[39m[33m:[39m ({ data[33m,[39m type }[33m:[39m any) [33m=>[39m (
     [90m 16 |[39m     [33m<[39m[33mdiv[39m data[33m-[39mtestid[33m=[39m[32m"performance-chart"[39m data[33m-[39mchart[33m-[39mtype[33m=[39m{type}[33m>[39m
     [90m 17 |[39m       [33mChart[39m[33m:[39m {[33mJSON[39m[33m.[39mstringify(data)}[0m

      at createNoMappedModuleFoundError (node_modules/jest-resolve/build/index.js:1117:17)
      at Object.mock (__tests__/components/FinalReportView.test.tsx:14:6)

FAIL __tests__/integration/critical-integration.test.tsx
  \u25cf Test suite failed to run

      [31mx[0m await isn't allowed in non-async function
         ,-[[36;1;4mC:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\__tests__\integration\critical-integration.test.tsx[0m:190:1]
     [2m187[0m |       }));
     [2m188[0m |       
     [2m189[0m |       await waitFor(() => {
     [2m190[0m |         await waitFor(() => {
         : [35;1m        ^^^^^[0m
     [2m191[0m |         expect(screen.getByTestId('status')).toHaveTextContent('Processing');
     [2m192[0m |       });
     [2m192[0m |       });
         `----


    Caused by:
        Syntax Error

      at Object.transformSync (node_modules/next/src/build/swc/index.ts:1374:25)
      at transformSync (node_modules/next/src/build/swc/index.ts:1477:19)
      at Object.process (node_modules/next/src/build/swc/jest-transformer.ts:105:25)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/index.js:422:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/index.js:519:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/index.js:558:19)

FAIL __tests__/services/webSocketService.test.ts
  \u25cf Test suite failed to run

    Configuration error:

    Could not locate module @/lib/websocket-manager mapped as:
    C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\lib\$1.

    Please check your configuration for these entries:
    {
      "moduleNameMapper": {
        "/^@\/lib\/(.*)$/": "C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\lib\$1"
      },
      "resolver": undefined
    }

    [0m [90m 3 |[39m
     [90m 4 |[39m [90m// Mock WebSocketManager[39m
    [31m[1m>[22m[39m[90m 5 |[39m jest[33m.[39mmock([32m'@/lib/websocket-manager'[39m)[33m;[39m
     [90m   |[39m      [31m[1m^[22m[39m
     [90m 6 |[39m
     [90m 7 |[39m describe([32m'webSocketService'[39m[33m,[39m () [33m=>[39m {
     [90m 8 |[39m   [36mlet[39m mockWebSocketManager[33m:[39m jest[33m.[39m[33mMocked[39m[33m<[39m[33mWebSocketManager[39m[33m>[39m[33m;[39m[0m

      at createNoMappedModuleFoundError (node_modules/jest-resolve/build/index.js:1117:17)
      at Object.mock (__tests__/services/webSocketService.test.ts:5:6)

FAIL __tests__/auth/service.test.ts
  \u25cf Test suite failed to run

    TypeError: Cannot redefine property: location
        at Object.defineProperty (<anonymous>)

    [0m [90m 49 |[39m
     [90m 50 |[39m [90m// Use Object.defineProperty to properly mock location in jsdom[39m
    [31m[1m>[22m[39m[90m 51 |[39m [33mObject[39m[33m.[39mdefineProperty(window[33m,[39m [32m'location'[39m[33m,[39m {
     [90m    |[39m        [31m[1m^[22m[39m
     [90m 52 |[39m   configurable[33m:[39m [36mtrue[39m[33m,[39m
     [90m 53 |[39m   writable[33m:[39m [36mtrue[39m[33m,[39m
     [90m 54 |[39m   value[33m:[39m {[0m

      at Object.defineProperty (__tests__/auth/service.test.ts:51:8)

FAIL __tests__/unified-chat-v5.test.tsx
  \u25cf Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
      If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
      If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
      To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
      If you need a custom transformation, specify a "transform" option in your config.
      If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\react-markdown\index.js:10
    export {
    ^^^^^^

    SyntaxError: Unexpected token 'export'

    [0m [90m 13 |[39m   [36mconst[39m lastUpdateRef [33m=[39m useRef[33m<[39m[33mnumber[39m[33m>[39m([33mDate[39m[33m.[39mnow())[33m;[39m
     [90m 14 |[39m   
    [31m[1m>[22m[39m[90m 15 |[39m   [90m// Stream content character by character using requestAnimationFrame[39m
     [90m    |[39m                                                               [31m[1m^[22m[39m
     [90m 16 |[39m   useEffect(() [33m=>[39m {
     [90m 17 |[39m     [36mif[39m ([33m![39mdata[33m?[39m[33m.[39mpartialContent) {
     [90m 18 |[39m       setDisplayedContent([32m''[39m)[33m;[39m[0m

      at Runtime.createScriptFromCode (node_modules/jest-runtime/build/index.js:1316:40)
      at Object.<anonymous> (components/chat/layers/MediumLayer.tsx:15:63)
      at Object.<anonymous> (components/chat/PersistentResponseCard.tsx:17:22)
      at Object.<anonymous> (__tests__/unified-chat-v5.test.tsx:8:33)

FAIL __tests__/chat/chatUIUXComprehensive.test.tsx
  \u25cf Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
      If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
      If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
      To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
      If you need a custom transformation, specify a "transform" option in your config.
      If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\react-markdown\index.js:10
    export {
    ^^^^^^

    SyntaxError: Unexpected token 'export'

    [0m [90m 13 |[39m   [36mconst[39m lastUpdateRef [33m=[39m useRef[33m<[39m[33mnumber[39m[33m>[39m([33mDate[39m[33m.[39mnow())[33m;[39m
     [90m 14 |[39m   
    [31m[1m>[22m[39m[90m 15 |[39m   [90m// Stream content character by character using requestAnimationFrame[39m
     [90m    |[39m                                                               [31m[1m^[22m[39m
     [90m 16 |[39m   useEffect(() [33m=>[39m {
     [90m 17 |[39m     [36mif[39m ([33m![39mdata[33m?[39m[33m.[39mpartialContent) {
     [90m 18 |[39m       setDisplayedContent([32m''[39m)[33m;[39m[0m

      at Runtime.createScriptFromCode (node_modules/jest-runtime/build/index.js:1316:40)
      at Object.<anonymous> (components/chat/layers/MediumLayer.tsx:15:63)
      at Object.<anonymous> (components/chat/PersistentResponseCard.tsx:17:22)
      at Object.<anonymous> (components/chat/MainChat.tsx:17:33)
      at Object.<anonymous> (__tests__/chat/chatUIUXComprehensive.test.tsx:23:19)

FAIL __tests__/integration/advanced-integration.test.tsx
  \u25cf Advanced Frontend Integration Tests  27. Advanced Error Boundaries  should report errors to monitoring service

    Monitored error

    [0m [90m 1419 |[39m         [36mconst[39m handleError [33m=[39m () [33m=>[39m {
     [90m 1420 |[39m           [36mtry[39m {
    [31m[1m>[22m[39m[90m 1421 |[39m             [36mthrow[39m [36mnew[39m [33mError[39m([32m'Monitored error'[39m)[33m;[39m
     [90m      |[39m                   [31m[1m^[22m[39m
     [90m 1422 |[39m           } [36mcatch[39m (error) {
     [90m 1423 |[39m             reportError(error)[33m;[39m
     [90m 1424 |[39m             [36mthrow[39m error[33m;[39m[0m

      at handleError (__tests__/integration/advanced-integration.test.tsx:1421:19)
      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)
      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9
      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)
      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)
      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)
      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)
      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)
      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)
      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
      at node_modules/@testing-library/dom/dist/events.js:19:20
      at node_modules/@testing-library/react/dist/pure.js:108:16
      at node_modules/@testing-library/react/dist/act-compat.js:48:24
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:789:22)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)
      at fireEvent (node_modules/@testing-library/dom/dist/events.js:12:35)
      at fireEvent.<computed> [as click] (node_modules/@testing-library/dom/dist/events.js:110:36)
      at fireEvent.<computed> [as click] (node_modules/@testing-library/react/dist/fire-event.js:15:52)
      at Object.click (__tests__/integration/advanced-integration.test.tsx:1441:19)

  \u25cf Advanced Frontend Integration Tests  29. WebSocket Resilience Integration  should handle WebSocket message buffering during reconnection

    expect(element).toHaveTextContent()

    Expected element to have text content:
      1 buffered
    Received:
      0 buffered

    [0m [90m 1608 |[39m       
     [90m 1609 |[39m       expect(messageBuffer)[33m.[39mtoHaveLength([35m1[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 1610 |[39m       expect(getByTestId([32m'buffer-size'[39m))[33m.[39mtoHaveTextContent([32m'1 buffered'[39m)[33m;[39m
     [90m      |[39m                                          [31m[1m^[22m[39m
     [90m 1611 |[39m     })[33m;[39m
     [90m 1612 |[39m
     [90m 1613 |[39m     it([32m'should implement exponential backoff for reconnection'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.toHaveTextContent (__tests__/integration/advanced-integration.test.tsx:1610:42)

FAIL __tests__/imports/external-imports.test.tsx
  \u25cf External NPM Dependencies Import Tests  Core React and Next.js imports  should import React DOM

    expect(received).toBeDefined()

    Received: undefined

    [0m [90m 24 |[39m       [36mconst[39m [33mReactDOM[39m [33m=[39m require([32m'react-dom'[39m)[33m;[39m
     [90m 25 |[39m       expect([33mReactDOM[39m)[33m.[39mtoBeDefined()[33m;[39m
    [31m[1m>[22m[39m[90m 26 |[39m       expect([33mReactDOM[39m[33m.[39mcreateRoot)[33m.[39mtoBeDefined()[33m;[39m
     [90m    |[39m                                   [31m[1m^[22m[39m
     [90m 27 |[39m     })[33m;[39m
     [90m 28 |[39m
     [90m 29 |[39m     it([32m'should import Next.js core modules'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.toBeDefined (__tests__/imports/external-imports.test.tsx:26:35)

  \u25cf External NPM Dependencies Import Tests  UI library imports  should import Radix UI components

    Cannot find module '@radix-ui/react-popover' from '__tests__/imports/external-imports.test.tsx'

    [0m [90m  95 |[39m       expect(radixProgress)[33m.[39mtoBeDefined()[33m;[39m
     [90m  96 |[39m
    [31m[1m>[22m[39m[90m  97 |[39m       [36mconst[39m radixPopover [33m=[39m require([32m'@radix-ui/react-popover'[39m)[33m;[39m
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m  98 |[39m       expect(radixPopover)[33m.[39mtoBeDefined()[33m;[39m
     [90m  99 |[39m
     [90m 100 |[39m       [36mconst[39m radixAvatar [33m=[39m require([32m'@radix-ui/react-avatar'[39m)[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.require (__tests__/imports/external-imports.test.tsx:97:28)

  \u25cf External NPM Dependencies Import Tests  Markdown and code highlighting imports  should import React Markdown

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
      If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
      If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
      To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
      If you need a custom transformation, specify a "transform" option in your config.
      If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\react-markdown\index.js:10
    export {
    ^^^^^^

    SyntaxError: Unexpected token 'export'

    [0m [90m 181 |[39m   describe([32m'Markdown and code highlighting imports'[39m[33m,[39m () [33m=>[39m {
     [90m 182 |[39m     it([32m'should import React Markdown'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 183 |[39m       [36mconst[39m reactMarkdown [33m=[39m require([32m'react-markdown'[39m)[33m;[39m
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 184 |[39m       expect(reactMarkdown)[33m.[39mtoBeDefined()[33m;[39m
     [90m 185 |[39m     })[33m;[39m
     [90m 186 |[39m[0m

      at Runtime.createScriptFromCode (node_modules/jest-runtime/build/index.js:1316:40)
      at Object.require (__tests__/imports/external-imports.test.tsx:183:29)

  \u25cf External NPM Dependencies Import Tests  Markdown and code highlighting imports  should import remark-gfm

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
      If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
      If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
      To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
      If you need a custom transformation, specify a "transform" option in your config.
      If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\frontend\node_modules\remark-gfm\index.js:2
    export {default} from './lib/index.js'
    ^^^^^^

    SyntaxError: Unexpected token 'export'

    [0m [90m 186 |[39m
     [90m 187 |[39m     it([32m'should import remark-gfm'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 188 |[39m       [36mconst[39m remarkGfm [33m=[39m require([32m'remark-gfm'[39m)[33m;[39m
     [90m     |[39m                         [31m[1m^[22m[39m
     [90m 189 |[39m       expect(remarkGfm)[33m.[39mtoBeDefined()[33m;[39m
     [90m 190 |[39m     })[33m;[39m
     [90m 191 |[39m[0m

      at Runtime.createScriptFromCode (node_modules/jest-runtime/build/index.js:1316:40)
      at Object.require (__tests__/imports/external-imports.test.tsx:188:25)

  \u25cf External NPM Dependencies Import Tests  Markdown and code highlighting imports  should import syntax highlighter styles

    expect(received).toBeDefined()

    Received: undefined

    [0m [90m 200 |[39m       expect(styles)[33m.[39mtoBeDefined()[33m;[39m
     [90m 201 |[39m       expect(styles[33m.[39moneDark)[33m.[39mtoBeDefined()[33m;[39m
    [31m[1m>[22m[39m[90m 202 |[39m       expect(styles[33m.[39moneLight)[33m.[39mtoBeDefined()[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 203 |[39m     })[33m;[39m
     [90m 204 |[39m   })[33m;[39m
     [90m 205 |[39m[0m

      at Object.toBeDefined (__tests__/imports/external-imports.test.tsx:202:31)

  \u25cf External NPM Dependencies Import Tests  Development and testing imports  should import React Testing Library

    Hooks cannot be defined inside tests. Hook of type "afterEach" is nested within "should import React Testing Library".

    [0m [90m 236 |[39m
     [90m 237 |[39m     it([32m'should import React Testing Library'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 238 |[39m       [36mconst[39m rtl [33m=[39m require([32m'@testing-library/react'[39m)[33m;[39m
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 239 |[39m       expect(rtl)[33m.[39mtoBeDefined()[33m;[39m
     [90m 240 |[39m       expect(rtl[33m.[39mrender)[33m.[39mtoBeDefined()[33m;[39m
     [90m 241 |[39m       expect(rtl[33m.[39mscreen)[33m.[39mtoBeDefined()[33m;[39m[0m

      at eventHandler (node_modules/jest-circus/build/jestAdapterInit.js:111:44)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/index.js:27:5)
      at Object.require (__tests__/imports/external-imports.test.tsx:238:19)

  \u25cf External NPM Dependencies Import Tests  Development and testing imports  should import React Testing Library

    Hooks cannot be defined inside tests. Hook of type "beforeAll" is nested within "should import React Testing Library".

    [0m [90m 236 |[39m
     [90m 237 |[39m     it([32m'should import React Testing Library'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 238 |[39m       [36mconst[39m rtl [33m=[39m require([32m'@testing-library/react'[39m)[33m;[39m
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 239 |[39m       expect(rtl)[33m.[39mtoBeDefined()[33m;[39m
     [90m 240 |[39m       expect(rtl[33m.[39mrender)[33m.[39mtoBeDefined()[33m;[39m
     [90m 241 |[39m       expect(rtl[33m.[39mscreen)[33m.[39mtoBeDefined()[33m;[39m[0m

      at eventHandler (node_modules/jest-circus/build/jestAdapterInit.js:111:44)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/index.js:44:5)
      at Object.require (__tests__/imports/external-imports.test.tsx:238:19)

  \u25cf External NPM Dependencies Import Tests  Development and testing imports  should import React Testing Library

    Hooks cannot be defined inside tests. Hook of type "afterAll" is nested within "should import React Testing Library".

    [0m [90m 236 |[39m
     [90m 237 |[39m     it([32m'should import React Testing Library'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 238 |[39m       [36mconst[39m rtl [33m=[39m require([32m'@testing-library/react'[39m)[33m;[39m
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 239 |[39m       expect(rtl)[33m.[39mtoBeDefined()[33m;[39m
     [90m 240 |[39m       expect(rtl[33m.[39mrender)[33m.[39mtoBeDefined()[33m;[39m
     [90m 241 |[39m       expect(rtl[33m.[39mscreen)[33m.[39mtoBeDefined()[33m;[39m[0m

      at eventHandler (node_modules/jest-circus/build/jestAdapterInit.js:111:44)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/index.js:48:5)
      at Object.require (__tests__/imports/external-imports.test.tsx:238:19)

  \u25cf External NPM Dependencies Import Tests  Development and testing imports  should import Testing Library user-event

    Hooks cannot be defined inside tests. Hook of type "afterEach" is nested within "should import Testing Library user-event".

    [0m [90m 247 |[39m
     [90m 248 |[39m     it([32m'should import Testing Library user-event'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 249 |[39m       [36mconst[39m userEvent [33m=[39m require([32m'@testing-library/user-event'[39m)[33m;[39m
     [90m     |[39m                         [31m[1m^[22m[39m
     [90m 250 |[39m       expect(userEvent)[33m.[39mtoBeDefined()[33m;[39m
     [90m 251 |[39m       expect(userEvent[33m.[39m[36mdefault[39m)[33m.[39mtoBeDefined()[33m;[39m
     [90m 252 |[39m     })[33m;[39m[0m

      at eventHandler (node_modules/jest-circus/build/jestAdapterInit.js:111:44)
      at Object.<anonymous> (node_modules/@testing-library/user-event/dist/cjs/utils/dataTransfer/Clipboard.js:158:7)
      at Object.<anonymous> (node_modules/@testing-library/user-event/dist/cjs/event/behavior/click.js:4:1)
      at Object.<anonymous> (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:3:1)
      at Object.<anonymous> (node_modules/@testing-library/user-event/dist/cjs/document/patchFocus.js:3:21)
      at Object.<anonymous> (node_modules/@testing-library/user-event/dist/cjs/setup/setup.js:3:18)
      at Object.<anonymous> (node_modules/@testing-library/user-event/dist/cjs/setup/index.js:3:13)
      at Object.<anonymous> (node_modules/@testing-library/user-event/dist/cjs/index.js:5:13)
      at Object.require (__tests__/imports/external-imports.test.tsx:249:25)

  \u25cf External NPM Dependencies Import Tests  Development and testing imports  should import Testing Library user-event

    Hooks cannot be defined inside tests. Hook of type "afterAll" is nested within "should import Testing Library user-event".

    [0m [90m 247 |[39m
     [90m 248 |[39m     it([32m'should import Testing Library user-event'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 249 |[39m       [36mconst[39m userEvent [33m=[39m require([32m'@testing-library/user-event'[39m)[33m;[39m
     [90m     |[39m                         [31m[1m^[22m[39m
     [90m 250 |[39m       expect(userEvent)[33m.[39mtoBeDefined()[33m;[39m
     [90m 251 |[39m       expect(userEvent[33m.[39m[36mdefault[39m)[33m.[39mtoBeDefined()[33m;[39m
     [90m 252 |[39m     })[33m;[39m[0m

      at eventHandler (node_modules/jest-circus/build/jestAdapterInit.js:111:44)
      at Object.<anonymous> (node_modules/@testing-library/user-event/dist/cjs/utils/dataTransfer/Clipboard.js:161:7)
      at Object.<anonymous> (node_modules/@testing-library/user-event/dist/cjs/event/behavior/click.js:4:1)
      at Object.<anonymous> (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:3:1)
      at Object.<anonymous> (node_modules/@testing-library/user-event/dist/cjs/document/patchFocus.js:3:21)
      at Object.<anonymous> (node_modules/@testing-library/user-event/dist/cjs/setup/setup.js:3:18)
      at Object.<anonymous> (node_modules/@testing-library/user-event/dist/cjs/setup/index.js:3:13)
      at Object.<anonymous> (node_modules/@testing-library/user-event/dist/cjs/index.js:5:13)
      at Object.require (__tests__/imports/external-imports.test.tsx:249:25)

  \u25cf External NPM Dependencies Import Tests  TypeScript type imports  should import TypeScript type packages

    expect(received).not.toThrow()

    Error name:    "Error"
    Error message: "Cannot find module '@types/react' from '__tests__/imports/external-imports.test.tsx'"

        [0m [90m 267 |[39m     it([32m'should import TypeScript type packages'[39m[33m,[39m () [33m=>[39m {
         [90m 268 |[39m       [90m// These are type-only packages, so we just check they don't throw[39m
        [31m[1m>[22m[39m[90m 269 |[39m       expect(() [33m=>[39m require([32m'@types/react'[39m))[33m.[39mnot[33m.[39mtoThrow()[33m;[39m
         [90m     |[39m                    [31m[1m^[22m[39m
         [90m 270 |[39m       expect(() [33m=>[39m require([32m'@types/react-dom'[39m))[33m.[39mnot[33m.[39mtoThrow()[33m;[39m
         [90m 271 |[39m       expect(() [33m=>[39m require([32m'@types/node'[39m))[33m.[39mnot[33m.[39mtoThrow()[33m;[39m
         [90m 272 |[39m     })[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at require (__tests__/imports/external-imports.test.tsx:269:20)
      at Object.<anonymous> (node_modules/expect/build/index.js:1824:9)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:2235:93)
      at Object.toThrow (__tests__/imports/external-imports.test.tsx:269:49)
      at Object.toThrow (__tests__/imports/external-imports.test.tsx:269:49)

  \u25cf External NPM Dependencies Import Tests  Critical imports batch test  should successfully import all critical dependencies

    expect(received).toEqual(expected) // deep equality

    - Expected  - 1
    + Received  + 3

    - Array []
    + Array [
    +   "react-markdown",
    + ]

    [0m [90m 318 |[39m       })[33m;[39m
     [90m 319 |[39m
    [31m[1m>[22m[39m[90m 320 |[39m       expect(failedImports)[33m.[39mtoEqual([])[33m;[39m
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 321 |[39m     })[33m;[39m
     [90m 322 |[39m   })[33m;[39m
     [90m 323 |[39m[0m

      at Object.toEqual (__tests__/imports/external-imports.test.tsx:320:29)

FAIL __tests__/auth/context.test.tsx
  \u25cf AuthContext  Token Management  should handle token refresh mechanism

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "mock-jwt-token-123"

    Number of calls: 0

    Ignored nodes: comments, script, style
    [36m<html>[39m
      [36m<head />[39m
      [36m<body>[39m
        [36m<div>[39m
          [36m<div>[39m
            [0mTest Content[0m
          [36m</div>[39m
        [36m</div>[39m
      [36m</body>[39m
    [36m</html>[39m

    [0m [90m 190 |[39m       
     [90m 191 |[39m       [36mawait[39m waitFor(() [33m=>[39m {
    [31m[1m>[22m[39m[90m 192 |[39m         expect(jwtDecode)[33m.[39mtoHaveBeenCalledWith(mockToken)[33m;[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 193 |[39m       })[33m;[39m
     [90m 194 |[39m     })[33m;[39m
     [90m 195 |[39m   })[33m;[39m[0m

      at toHaveBeenCalledWith (__tests__/auth/context.test.tsx:192:27)
      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)
      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)
      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)
      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)

  \u25cf AuthContext  Development Mode  should auto-login in development mode when not logged out

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"development_mode": true, "endpoints": {"callback": "http://localhost:8000/auth/callback", "dev_login": "http://localhost:8000/auth/dev-login", "login": "http://localhost:8000/auth/login", "logout": "http://localhost:8000/auth/logout"}}

    Number of calls: 0

    Ignored nodes: comments, script, style
    [36m<html>[39m
      [36m<head />[39m
      [36m<body>[39m
        [36m<div>[39m
          [36m<div>[39m
            [0mTest Content[0m
          [36m</div>[39m
        [36m</div>[39m
      [36m</body>[39m
    [36m</html>[39m

    [0m [90m 211 |[39m       
     [90m 212 |[39m       [36mawait[39m waitFor(() [33m=>[39m {
    [31m[1m>[22m[39m[90m 213 |[39m         expect(authService[33m.[39mhandleDevLogin)[33m.[39mtoHaveBeenCalledWith(devConfig)[33m;[39m
     [90m     |[39m                                            [31m[1m^[22m[39m
     [90m 214 |[39m         expect(jwtDecode)[33m.[39mtoHaveBeenCalledWith(mockToken)[33m;[39m
     [90m 215 |[39m         expect(mockAuthStore[33m.[39mlogin)[33m.[39mtoHaveBeenCalled()[33m;[39m
     [90m 216 |[39m       })[33m;[39m[0m

      at toHaveBeenCalledWith (__tests__/auth/context.test.tsx:213:44)
      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)
      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)
      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)
      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)

  \u25cf AuthContext  Login Functionality  should handle login action

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

    [0m [90m 276 |[39m       })[33m;[39m
     [90m 277 |[39m       
    [31m[1m>[22m[39m[90m 278 |[39m       expect(authService[33m.[39mclearDevLogoutFlag)[33m.[39mtoHaveBeenCalled()[33m;[39m
     [90m     |[39m                                              [31m[1m^[22m[39m
     [90m 279 |[39m       expect(authService[33m.[39mhandleLogin)[33m.[39mtoHaveBeenCalledWith(mockAuthConfig)[33m;[39m
     [90m 280 |[39m     })[33m;[39m
     [90m 281 |[39m[0m

      at Object.toHaveBeenCalled (__tests__/auth/context.test.tsx:278:46)

  \u25cf AuthContext  Logout Functionality  should handle logout action

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"development_mode": false, "endpoints": {"callback": "http://localhost:8000/auth/callback", "dev_login": "http://localhost:8000/auth/dev-login", "login": "http://localhost:8000/auth/login", "logout": "http://localhost:8000/auth/logout"}}

    Number of calls: 0

    [0m [90m 323 |[39m       })[33m;[39m
     [90m 324 |[39m       
    [31m[1m>[22m[39m[90m 325 |[39m       expect(authService[33m.[39mhandleLogout)[33m.[39mtoHaveBeenCalledWith(mockAuthConfig)[33m;[39m
     [90m     |[39m                                        [31m[1m^[22m[39m
     [90m 326 |[39m       expect(mockAuthStore[33m.[39mlogout)[33m.[39mtoHaveBeenCalled()[33m;[39m
     [90m 327 |[39m     })[33m;[39m
     [90m 328 |[39m[0m

      at Object.toHaveBeenCalledWith (__tests__/auth/context.test.tsx:325:40)

  \u25cf AuthContext  Logout Functionality  should set dev logout flag in development mode

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

    [0m [90m 348 |[39m       })[33m;[39m
     [90m 349 |[39m       
    [31m[1m>[22m[39m[90m 350 |[39m       expect(authService[33m.[39msetDevLogoutFlag)[33m.[39mtoHaveBeenCalled()[33m;[39m
     [90m     |[39m                                            [31m[1m^[22m[39m
     [90m 351 |[39m       expect(authService[33m.[39mhandleLogout)[33m.[39mtoHaveBeenCalledWith(devConfig)[33m;[39m
     [90m 352 |[39m     })[33m;[39m
     [90m 353 |[39m[0m

      at Object.toHaveBeenCalled (__tests__/auth/context.test.tsx:350:44)

  \u25cf AuthContext  Sync with Auth Store  should sync logout with Zustand store

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

    [0m [90m 513 |[39m       })[33m;[39m
     [90m 514 |[39m       
    [31m[1m>[22m[39m[90m 515 |[39m       expect(mockAuthStore[33m.[39mlogout)[33m.[39mtoHaveBeenCalled()[33m;[39m
     [90m     |[39m                                    [31m[1m^[22m[39m
     [90m 516 |[39m     })[33m;[39m
     [90m 517 |[39m   })[33m;[39m
     [90m 518 |[39m[0m

      at Object.toHaveBeenCalled (__tests__/auth/context.test.tsx:515:36)

  \u25cf AuthContext  Edge Cases  should handle concurrent auth operations

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

    [0m [90m 584 |[39m       
     [90m 585 |[39m       [90m// Verify operations were called[39m
    [31m[1m>[22m[39m[90m 586 |[39m       expect(authService[33m.[39mhandleLogin)[33m.[39mtoHaveBeenCalled()[33m;[39m
     [90m     |[39m                                       [31m[1m^[22m[39m
     [90m 587 |[39m       expect(authService[33m.[39mhandleLogout)[33m.[39mtoHaveBeenCalled()[33m;[39m
     [90m 588 |[39m     })[33m;[39m
     [90m 589 |[39m   })[33m;[39m[0m

      at Object.toHaveBeenCalled (__tests__/auth/context.test.tsx:586:39)

FAIL __tests__/components/ChatHistorySection.test.tsx (8.596 s)
  \u25cf ChatHistorySection  Edge Cases and Complete Coverage  should handle router push failure

    Navigation failed

    [0m [90m 1280 |[39m       
     [90m 1281 |[39m       [90m// Set up the rejection after render but before click[39m
    [31m[1m>[22m[39m[90m 1282 |[39m       mockRouter[33m.[39mpush[33m.[39mmockRejectedValueOnce([36mnew[39m [33mError[39m([32m'Navigation failed'[39m))[33m;[39m
     [90m      |[39m                                             [31m[1m^[22m[39m
     [90m 1283 |[39m       
     [90m 1284 |[39m       [36mconst[39m secondThread [33m=[39m screen[33m.[39mgetByText([32m'Second Conversation'[39m)[33m.[39mclosest([32m'.group'[39m)[33m;[39m
     [90m 1285 |[39m       fireEvent[33m.[39mclick(secondThread[33m![39m)[33m;[39m[0m

      at Object.<anonymous> (__tests__/components/ChatHistorySection.test.tsx:1282:45)

  \u25cf ChatHistorySection  Edge Cases and Complete Coverage  should handle router push failure

    Navigation failed

    [0m [90m 1280 |[39m       
     [90m 1281 |[39m       [90m// Set up the rejection after render but before click[39m
    [31m[1m>[22m[39m[90m 1282 |[39m       mockRouter[33m.[39mpush[33m.[39mmockRejectedValueOnce([36mnew[39m [33mError[39m([32m'Navigation failed'[39m))[33m;[39m
     [90m      |[39m                                             [31m[1m^[22m[39m
     [90m 1283 |[39m       
     [90m 1284 |[39m       [36mconst[39m secondThread [33m=[39m screen[33m.[39mgetByText([32m'Second Conversation'[39m)[33m.[39mclosest([32m'.group'[39m)[33m;[39m
     [90m 1285 |[39m       fireEvent[33m.[39mclick(secondThread[33m![39m)[33m;[39m[0m

      at Object.<anonymous> (__tests__/components/ChatHistorySection.test.tsx:1282:45)

  \u25cf ChatHistorySection  Edge Cases and Complete Coverage  should handle router push failure

    Navigation failed

    [0m [90m 1280 |[39m       
     [90m 1281 |[39m       [90m// Set up the rejection after render but before click[39m
    [31m[1m>[22m[39m[90m 1282 |[39m       mockRouter[33m.[39mpush[33m.[39mmockRejectedValueOnce([36mnew[39m [33mError[39m([32m'Navigation failed'[39m))[33m;[39m
     [90m      |[39m                                             [31m[1m^[22m[39m
     [90m 1283 |[39m       
     [90m 1284 |[39m       [36mconst[39m secondThread [33m=[39m screen[33m.[39mgetByText([32m'Second Conversation'[39m)[33m.[39mclosest([32m'.group'[39m)[33m;[39m
     [90m 1285 |[39m       fireEvent[33m.[39mclick(secondThread[33m![39m)[33m;[39m[0m

      at Object.<anonymous> (__tests__/components/ChatHistorySection.test.tsx:1282:45)

  \u25cf ChatHistorySection  Edge Cases and Complete Coverage  should handle router push failure

    Navigation failed

    [0m [90m 1280 |[39m       
     [90m 1281 |[39m       [90m// Set up the rejection after render but before click[39m
    [31m[1m>[22m[39m[90m 1282 |[39m       mockRouter[33m.[39mpush[33m.[39mmockRejectedValueOnce([36mnew[39m [33mError[39m([32m'Navigation failed'[39m))[33m;[39m
     [90m      |[39m                                             [31m[1m^[22m[39m
     [90m 1283 |[39m       
     [90m 1284 |[39m       [36mconst[39m secondThread [33m=[39m screen[33m.[39mgetByText([32m'Second Conversation'[39m)[33m.[39mclosest([32m'.group'[39m)[33m;[39m
     [90m 1285 |[39m       fireEvent[33m.[39mclick(secondThread[33m![39m)[33m;[39m[0m

      at Object.<anonymous> (__tests__/components/ChatHistorySection.test.tsx:1282:45)

FAIL __tests__/chat/chatUIUXCore.test.tsx
  \u25cf Test suite failed to run

    Jest worker encountered 4 child process exceptions, exceeding retry limit

      at ChildProcessWorker.initialize (node_modules/jest-worker/build/index.js:805:21)

FAIL __tests__/components/chat/MainChat.test.tsx (12.848 s)
  \u25cf MainChat  Agent status updates  should handle toggle collapse manually

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 361 |[39m     })[33m;[39m
     [90m 362 |[39m
    [31m[1m>[22m[39m[90m 363 |[39m     it([32m'should handle toggle collapse manually'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 364 |[39m       (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({
     [90m 365 |[39m         [33m...[39mmockStore[33m,[39m
     [90m 366 |[39m         isProcessing[33m:[39m [36mtrue[39m[33m,[39m[0m

      at it (__tests__/components/chat/MainChat.test.tsx:363:5)
      at describe (__tests__/components/chat/MainChat.test.tsx:240:3)
      at Object.describe (__tests__/components/chat/MainChat.test.tsx:34:1)

  \u25cf MainChat  Error recovery and reconnection  should handle store errors gracefully

    expect(received).not.toThrow()

    Error name:    "Error"
    Error message: "Store initialization failed"

        [0m [90m 388 |[39m     it([32m'should handle store errors gracefully'[39m[33m,[39m () [33m=>[39m {
         [90m 389 |[39m       (useUnifiedChatStore [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockImplementation(() [33m=>[39m {
        [31m[1m>[22m[39m[90m 390 |[39m         [36mthrow[39m [36mnew[39m [33mError[39m([32m'Store initialization failed'[39m)[33m;[39m
         [90m     |[39m               [31m[1m^[22m[39m
         [90m 391 |[39m       })[33m;[39m
         [90m 392 |[39m       
         [90m 393 |[39m       [90m// Should not crash the component[39m[0m

      at __tests__/components/chat/MainChat.test.tsx:390:15
      at MainChat (components/chat/MainChat.tsx:22:26)
      at Object.react-stack-bottom-frame (node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at __tests__/components/chat/MainChat.test.tsx:394:26
      at Object.<anonymous> (node_modules/expect/build/index.js:1824:9)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:2235:93)
      at Object.toThrow (__tests__/components/chat/MainChat.test.tsx:394:46)
      at Object.toThrow (__tests__/components/chat/MainChat.test.tsx:394:46)

  \u25cf MainChat  Message history loading  should update history when new messages arrive

    expect(element).not.toBeInTheDocument()

    expected document not to contain element, found <div data-testid="example-prompts">Example Prompts</div> instead

    [0m [90m 567 |[39m       
     [90m 568 |[39m       [90m// Example prompts should disappear[39m
    [31m[1m>[22m[39m[90m 569 |[39m       expect(screen[33m.[39mqueryByTestId([32m'example-prompts'[39m))[33m.[39mnot[33m.[39mtoBeInTheDocument()[33m;[39m
     [90m     |[39m                                                           [31m[1m^[22m[39m
     [90m 570 |[39m     })[33m;[39m
     [90m 571 |[39m
     [90m 572 |[39m     it([32m'should handle message deletion from history'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.toBeInTheDocument (__tests__/components/chat/MainChat.test.tsx:569:59)

  \u25cf MainChat  UI layout and responsiveness  should apply correct CSS classes

    expect(element).toHaveClass("flex flex-col h-full")

    Expected the element to have class:
      flex flex-col h-full
    Received:
      flex h-full bg-gradient-to-br from-gray-50 via-white to-gray-50

    [0m [90m 611 |[39m       
     [90m 612 |[39m       [36mconst[39m mainContainer [33m=[39m container[33m.[39mfirstChild[33m;[39m
    [31m[1m>[22m[39m[90m 613 |[39m       expect(mainContainer)[33m.[39mtoHaveClass([32m'flex'[39m[33m,[39m [32m'flex-col'[39m[33m,[39m [32m'h-full'[39m)[33m;[39m
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 614 |[39m     })[33m;[39m
     [90m 615 |[39m
     [90m 616 |[39m     it([32m'should handle window resize'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.toHaveClass (__tests__/components/chat/MainChat.test.tsx:613:29)

  \u25cf MainChat  Performance and optimization  should clean up timers on unmount

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

    [0m [90m 708 |[39m       
     [90m 709 |[39m       [90m// Any active timers should be cleared[39m
    [31m[1m>[22m[39m[90m 710 |[39m       expect(clearTimeoutSpy)[33m.[39mtoHaveBeenCalled()[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 711 |[39m       
     [90m 712 |[39m       clearTimeoutSpy[33m.[39mmockRestore()[33m;[39m
     [90m 713 |[39m     })[33m;[39m[0m

      at Object.toHaveBeenCalled (__tests__/components/chat/MainChat.test.tsx:710:31)

  \u25cf MainChat  Integration with store and hooks  should handle store reset

    expect(element).not.toBeInTheDocument()

    expected document not to contain element, found <div data-collapsed="false" data-testid="response-card"><button>Toggle</button>Response Card</div> instead

    [0m [90m 777 |[39m       [90m// Should show example prompts again[39m
     [90m 778 |[39m       expect(screen[33m.[39mgetByTestId([32m'example-prompts'[39m))[33m.[39mtoBeInTheDocument()[33m;[39m
    [31m[1m>[22m[39m[90m 779 |[39m       expect(screen[33m.[39mqueryByTestId([32m'response-card'[39m))[33m.[39mnot[33m.[39mtoBeInTheDocument()[33m;[39m
     [90m     |[39m                                                         [31m[1m^[22m[39m
     [90m 780 |[39m     })[33m;[39m
     [90m 781 |[39m   })[33m;[39m
     [90m 782 |[39m[0m

      at Object.toBeInTheDocument (__tests__/components/chat/MainChat.test.tsx:779:57)

  \u25cf MainChat  Accessibility  should support keyboard navigation

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 789 |[39m     })[33m;[39m
     [90m 790 |[39m
    [31m[1m>[22m[39m[90m 791 |[39m     it([32m'should support keyboard navigation'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 792 |[39m       render([33m<[39m[33mMainChat[39m [33m/[39m[33m>[39m)[33m;[39m
     [90m 793 |[39m       
     [90m 794 |[39m       [90m// Tab through components[39m[0m

      at it (__tests__/components/chat/MainChat.test.tsx:791:5)
      at describe (__tests__/components/chat/MainChat.test.tsx:783:3)
      at Object.describe (__tests__/components/chat/MainChat.test.tsx:34:1)

FAIL __tests__/system/startup.test.tsx (13.58 s)
  \u25cf Frontend System Startup  WebSocket Connectivity  should establish WebSocket connection on startup

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "ws://localhost:8000"

    Number of calls: 0

    Ignored nodes: comments, script, style
    [36m<html>[39m
      [36m<head />[39m
      [36m<body>[39m
        [36m<div>[39m
          [36m<div>[39m
            [0mTest App[0m
          [36m</div>[39m
        [36m</div>[39m
      [36m</body>[39m
    [36m</html>[39m

    [0m [90m 167 |[39m       
     [90m 168 |[39m       [36mawait[39m waitFor(() [33m=>[39m {
    [31m[1m>[22m[39m[90m 169 |[39m         expect(global[33m.[39m[33mWebSocket[39m)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                                  [31m[1m^[22m[39m
     [90m 170 |[39m           expect[33m.[39mstringContaining([32m'ws://localhost:8000'[39m)
     [90m 171 |[39m         )[33m;[39m
     [90m 172 |[39m       })[33m;[39m[0m

      at toHaveBeenCalledWith (__tests__/system/startup.test.tsx:169:34)
      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)
      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)
      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)
      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)

  \u25cf Frontend System Startup  WebSocket Connectivity  should handle WebSocket heartbeat

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "{\"type\":\"ping\"}"

    Number of calls: 0

    Ignored nodes: comments, script, style
    [36m<html>[39m
      [36m<head />[39m
      [36m<body>[39m
        [36m<div>[39m
          [36m<div>[39m
            [0mTest[0m
          [36m</div>[39m
        [36m</div>[39m
      [36m</body>[39m
    [36m</html>[39m

    [0m [90m 198 |[39m       
     [90m 199 |[39m       [36mawait[39m waitFor(() [33m=>[39m {
    [31m[1m>[22m[39m[90m 200 |[39m         expect(mockWebSocket[33m.[39msend)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                                    [31m[1m^[22m[39m
     [90m 201 |[39m           [33mJSON[39m[33m.[39mstringify({ type[33m:[39m [32m'ping'[39m })
     [90m 202 |[39m         )[33m;[39m
     [90m 203 |[39m       })[33m;[39m[0m

      at toHaveBeenCalledWith (__tests__/system/startup.test.tsx:200:36)
      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)
      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)
      at node_modules/@testing-library/dom/dist/wait-for.js:82:9

  \u25cf Frontend System Startup  WebSocket Connectivity  should reconnect on connection loss

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 2
    Received number of calls: 0

    Ignored nodes: comments, script, style
    [36m<html>[39m
      [36m<head />[39m
      [36m<body>[39m
        [36m<div>[39m
          [36m<div>[39m
            [0mTest[0m
          [36m</div>[39m
        [36m</div>[39m
      [36m</body>[39m
    [36m</html>[39m

    [0m [90m 226 |[39m       [90m// Should attempt reconnection[39m
     [90m 227 |[39m       [36mawait[39m waitFor(() [33m=>[39m {
    [31m[1m>[22m[39m[90m 228 |[39m         expect(global[33m.[39m[33mWebSocket[39m)[33m.[39mtoHaveBeenCalledTimes([35m2[39m)[33m;[39m
     [90m     |[39m                                  [31m[1m^[22m[39m
     [90m 229 |[39m       })[33m;[39m
     [90m 230 |[39m     })[33m;[39m
     [90m 231 |[39m   })[33m;[39m[0m

      at toHaveBeenCalledTimes (__tests__/system/startup.test.tsx:228:34)
      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)
      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)
      at node_modules/@testing-library/dom/dist/wait-for.js:82:9

  \u25cf Frontend System Startup  Store Initialization  should restore persisted state

    expect(received).toBe(expected) // Object.is equality

    Expected: "test-token"
    Received: null

    [0m [90m 273 |[39m       
     [90m 274 |[39m       [90m// Verify restored state[39m
    [31m[1m>[22m[39m[90m 275 |[39m       expect(state[33m.[39mtoken)[33m.[39mtoBe([32m'test-token'[39m)[33m;[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 276 |[39m       expect(state[33m.[39muser)[33m.[39mtoEqual(mockUser)[33m;[39m
     [90m 277 |[39m       expect(state[33m.[39misAuthenticated)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 278 |[39m     })[33m;[39m[0m

      at Object.toBe (__tests__/system/startup.test.tsx:275:27)

  \u25cf Frontend System Startup  Error Boundary  should catch and handle startup errors

    Startup error

    [0m [90m 332 |[39m       
     [90m 333 |[39m       [36mconst[39m [33mThrowError[39m [33m=[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 334 |[39m         [36mthrow[39m [36mnew[39m [33mError[39m([32m'Startup error'[39m)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 335 |[39m       }[33m;[39m
     [90m 336 |[39m       
     [90m 337 |[39m       [90m// Suppress console.error for this test[39m[0m

      at ThrowError (__tests__/system/startup.test.tsx:334:15)
      at Object.react-stack-bottom-frame (node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (__tests__/system/startup.test.tsx:341:35)

  \u25cf Frontend System Startup  Performance Monitoring  should measure startup performance

    thrown: "Exceeded timeout of 10000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 353 |[39m
     [90m 354 |[39m   describe([32m'Performance Monitoring'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 355 |[39m     it([32m'should measure startup performance'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 356 |[39m       [36mconst[39m startTime [33m=[39m performance[33m.[39mnow()[33m;[39m
     [90m 357 |[39m       
     [90m 358 |[39m       [90m// Simulate startup operations[39m[0m

      at it (__tests__/system/startup.test.tsx:355:5)
      at describe (__tests__/system/startup.test.tsx:354:3)
      at Object.describe (__tests__/system/startup.test.tsx:30:1)

FAIL __tests__/chat/ui-improvements.test.tsx
  \u25cf Test suite failed to run

    Jest worker encountered 4 child process exceptions, exceeding retry limit

      at ChildProcessWorker.initialize (node_modules/jest-worker/build/index.js:805:21)

FAIL __tests__/components/ChatComponents.test.tsx (26.927 s)
  \u25cf test_MessageList_virtualization  should implement virtual scrolling for large lists

    TestingLibraryElementError: Unable to find an element by: [data-testid="/message-/"]

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"relative overflow-hidden h-[calc(100vh-250px)] px-6 py-4 overflow-y-auto"[39m
          [33mdir[39m=[32m"ltr"[39m
          [33mstyle[39m=[32m"position: relative; --radix-scroll-area-corner-width: 0px; --radix-scroll-area-corner-height: 0px;"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"h-full w-full rounded-[inherit]"[39m
            [33mdata-radix-scroll-area-viewport[39m=[32m""[39m
            [33mstyle[39m=[32m"overflow-x: hidden; overflow-y: scroll;"[39m
          [36m>[39m
            [36m<div[39m
              [33mstyle[39m=[32m"min-width: 100%; display: table;"[39m
            [36m>[39m
              [36m<div[39m
                [33mstyle[39m=[32m"opacity: 1; transform: none;"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"mb-4 flex justify-start"[39m
                  [33mstyle[39m=[32m"opacity: 1; transform: none;"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"rounded-lg border text-card-foreground w-full max-w-3xl shadow-sm hover:shadow-md transition-shadow duration-200 bg-white border-gray-200"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"flex flex-col space-y-1.5 p-6 pb-3 pt-4 px-5"[39m
                    [36m>[39m
                      [36m<div[39m
                        [33mclass[39m=[32m"flex items-start justify-between"[39m
                      [36m>[39m
                        [36m<div[39m
                          [33mclass[39m=[32m"flex items-center space-x-3"[39m
                        [36m>[39m
                          [36m<span[39m
                            [33mclass[39m=[32m"relative flex shrink-0 overflow-hidden rounded-full w-9 h-9 border-2 border-white shadow-sm"[39m
                          [36m>[39m
                            [36m<span[39m
                              [33mclass[39m=[32m"flex h-full w-full items-center justify-center rounded-full bg-muted font-bold text-sm bg-gradient-to-r from-purple-600 to-pink-600 text-white"[39m
                            [36m>[39m
                              [0mAI[0m
                            [36m</span>[39m
                          [36m</span>[39m
                          [36m<div>[39m
                            [36m<div[39m
                              [33mclass[39m=[32m"flex items-center space-x-2"[39m
                            [36m>[39m
                              [36m<svg[39m
                                [33maria-hidden[39m=[32m"true"[39m
                                [33mclass[39m=[32m"lucide lucide-bot w-4 h-4"[39m
                                [33mfill[39m=[32m"none"[39m
                                [33mheight[39m=[32m"24"[39m
                                [33mstroke[39m=[32m"currentColor"[39m
                                [33mstroke-linecap[39m=[32m"round"[39m
                                [33mstroke-linejoin[39m=[32m"round"[39m
                                [33mstroke-width[39m=[32m"2"[39m
                                [33mviewBox[39m=[32m"0 0 24 24"[39m
                                [33mwidth[39m=[32m"24"[39m
                                [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                              [36m>[39m
                                [36m<path[39m
                                  [33md[39m=[32m"M12 8V4H8"[39m
                                [36m/>[39m
                                [36m<rect[39m
                                  [33mheight[39m=[32m"12"[39m
                                  [33mrx[39m=[32m"2"[39m
                                  [33mwidth[39m=[32m"16"[39m
                                  [33mx[39m=[32m"4"[39m
                                  [33my[39m=[32m"8"[39m
                                [36m/>[39m
                                [36m<path[39m
                                  [33md[39m=[32m"M2 14h2"[39m
                                [36m/>[39m
                                [36m<path[39m
                                  [33md[39m=[32m"M20 14h2"[39m
                                [36m/>[39m
                                [36m<path[39m
                                  [33md[39m=[32m"M15 13v2"[39m
                                [36m/>[39m
                                [36m<path[39m
                                  [33md[39m=[32m"M9 13v2"[39m
                                [36m/>[39m
                              [36m</svg>[39m
                              [36m<h3[39m
                                [33mclass[39m=[32m"tracking-tight text-base font-semibold text-gray-900"[39m
                              [36m>[39m
                                [0mNetra Agent[0m
                              [36m</h3>[39m
                            [36m</div>[39m
                          [36m</div>[39m
                        [36m</div>[39m
                        [36m<div[39m
                          [33mclass[39m=[32m"flex items-center space-x-2 text-xs text-gray-500"[39m
                        [36m>[39m
                          [36m<svg[39m
                            [33maria-hidden[39m=[32m"true"[39m
                            [33mclass[39m=[32m"lucide lucide-clock w-3 h-3"[39m
                            [33mfill[39m=[32m"none"[39m
                            [33mheight[39m=[32m"24"[39m
                            [33mstroke[39m=[32m"currentColor"[39m
                            [33mstroke-linecap[39m=[32m"round"[39m
                            [33mstroke-linejoin[39m=[32m"round"[39m
                            [33mstroke-width[39m=[32m"2"[39m
                            [33mviewBox[39m=[32m"0 0 24 24"[39m
                            [33mwidth[39m=[32m"24"[39m
                            [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                          [36m>[39m
                            [36m<path[39m
                              [33md[39m=[32m"M12 6v6l4 2"[39m
                            [36m/>[39m
                            [36m<circle[39m
                              [33mcx[39m=[32m"12"[39m
                              [33mcy[39m=[32m"12"[39m
                              [33mr[39m=[32m"10"[39m
                            [36m/>[39m
                          [36m</svg>[39m
                          [36m<span>[39m
                            [0m01:31:35 PM[0m
                          [36m</span>[39m
                        [36m</div>[39m
                      [36m</div>[39m
                    [36m</div>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"p-6 pt-0 px-5 pb-4"[39m
                    [36m>[39m
                      [36m<div[39m
                        [33mclass[39m=[32m"space-y-3"[39m
                      [36m>[39m
                        [36m<p[39m
                          [33mclass[39m=[32m"text-gray-800 leading-relaxed whitespace-pre-wrap"[39m
                        [36m>[39m
                          [0mMessage 0[0m
                        [36m</p>[39m
                      [36m</div>[39m
       ...

    [0m [90m 33 |[39m     
     [90m 34 |[39m     [90m// MessageList renders all messages by default (no virtualization currently)[39m
    [31m[1m>[22m[39m[90m 35 |[39m     [36mconst[39m renderedMessages [33m=[39m screen[33m.[39mgetAllByTestId([35m/message-/[39m)[33m;[39m
     [90m    |[39m                                     [31m[1m^[22m[39m
     [90m 36 |[39m     expect(renderedMessages[33m.[39mlength)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m 37 |[39m   })[33m;[39m
     [90m 38 |[39m[0m

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:109:15
      at Object.getAllByTestId (__tests__/components/ChatComponents.test.tsx:35:37)

  \u25cf test_MessageList_virtualization  should maintain performance with large message lists

    expect(received).toBeLessThan(expected)

    Expected: < 5000
    Received:   12593.858299999998

    [0m [90m 57 |[39m     
     [90m 58 |[39m     [90m// Should render in reasonable time[39m
    [31m[1m>[22m[39m[90m 59 |[39m     expect(renderTime)[33m.[39mtoBeLessThan([35m5000[39m)[33m;[39m
     [90m    |[39m                        [31m[1m^[22m[39m
     [90m 60 |[39m   })[33m;[39m
     [90m 61 |[39m
     [90m 62 |[39m   it([32m'should handle scroll to bottom correctly'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.toBeLessThan (__tests__/components/ChatComponents.test.tsx:59:24)

  \u25cf test_MessageInput_validation  should validate input length

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 114 |[39m   })[33m;[39m
     [90m 115 |[39m
    [31m[1m>[22m[39m[90m 116 |[39m   it([32m'should validate input length'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m     |[39m   [31m[1m^[22m[39m
     [90m 117 |[39m     render([33m<[39m[33mMessageInput[39m [33m/[39m[33m>[39m)[33m;[39m
     [90m 118 |[39m     
     [90m 119 |[39m     [36mconst[39m input [33m=[39m screen[33m.[39mgetByRole([32m'textbox'[39m)[33m;[39m[0m

      at it (__tests__/components/ChatComponents.test.tsx:116:3)
      at Object.describe (__tests__/components/ChatComponents.test.tsx:107:1)

  \u25cf test_MessageInput_validation  should handle text input and sending

    TypeError: useWebSocket.mockReturnValue is not a function

    [0m [90m 130 |[39m     [36mconst[39m mockSendMessage [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 131 |[39m     [36mconst[39m useWebSocket [33m=[39m require([32m'@/hooks/useWebSocket'[39m)[33m.[39museWebSocket [36mas[39m jest[33m.[39m[33mMock[39m[33m;[39m
    [31m[1m>[22m[39m[90m 132 |[39m     useWebSocket[33m.[39mmockReturnValue({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 133 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 134 |[39m     })[33m;[39m
     [90m 135 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/ChatComponents.test.tsx:132:18)

  \u25cf test_MessageInput_validation  should handle keyboard shortcuts

    expect(received).toBe(expected) // Object.is equality

    Expected: "Test message"
    Received: "aaaTaeasata amaeasasaaagaeaa"

    [0m [90m 155 |[39m     
     [90m 156 |[39m     [90m// Message should still be in input (requires Ctrl+Enter to send)[39m
    [31m[1m>[22m[39m[90m 157 |[39m     expect(input[33m.[39mvalue)[33m.[39mtoBe([32m'Test message'[39m)[33m;[39m
     [90m     |[39m                         [31m[1m^[22m[39m
     [90m 158 |[39m   })[33m;[39m
     [90m 159 |[39m
     [90m 160 |[39m   it([32m'should prevent empty message submission'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.toBe (__tests__/components/ChatComponents.test.tsx:157:25)

  \u25cf test_MessageInput_validation  should prevent empty message submission

    TypeError: useWebSocket.mockReturnValue is not a function

    [0m [90m 161 |[39m     [36mconst[39m mockSendMessage [33m=[39m jest[33m.[39mfn()[33m;[39m
     [90m 162 |[39m     [36mconst[39m useWebSocket [33m=[39m require([32m'@/hooks/useWebSocket'[39m)[33m.[39museWebSocket [36mas[39m jest[33m.[39m[33mMock[39m[33m;[39m
    [31m[1m>[22m[39m[90m 163 |[39m     useWebSocket[33m.[39mmockReturnValue({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 164 |[39m       sendMessage[33m:[39m mockSendMessage[33m,[39m
     [90m 165 |[39m     })[33m;[39m
     [90m 166 |[39m     [0m

      at Object.mockReturnValue (__tests__/components/ChatComponents.test.tsx:163:18)

FAIL __tests__/integration/comprehensive-integration.test.tsx (33.387 s)
  \u25cf Comprehensive Frontend Integration Tests  1. Corpus Management Integration  should upload documents to corpus and process with embeddings

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 0
    Received array:  []

    [0m [90m 134 |[39m       
     [90m 135 |[39m       expect(result[33m.[39mid)[33m.[39mtoBe([32m'doc-123'[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 136 |[39m       expect(useCorpusStore[33m.[39mgetState()[33m.[39mdocuments)[33m.[39mtoHaveLength([35m1[39m)[33m;[39m
     [90m     |[39m                                                   [31m[1m^[22m[39m
     [90m 137 |[39m     })[33m;[39m
     [90m 138 |[39m
     [90m 139 |[39m     it([32m'should search corpus with semantic similarity'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.toHaveLength (__tests__/integration/comprehensive-integration.test.tsx:136:51)

  \u25cf Comprehensive Frontend Integration Tests  2. Synthetic Data Generation Flow  should generate synthetic data based on templates

    TypeError: useSyntheticDataStore is not a function

    [0m [90m 177 |[39m       
     [90m 178 |[39m       [36mconst[39m [33mTestComponent[39m [33m=[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 179 |[39m         [36mconst[39m { generateData[33m,[39m jobs } [33m=[39m useSyntheticDataStore()[33m;[39m
     [90m     |[39m                                        [31m[1m^[22m[39m
     [90m 180 |[39m         
     [90m 181 |[39m         [36mreturn[39m (
     [90m 182 |[39m           [33m<[39m[33mdiv[39m[33m>[39m[0m

      at useSyntheticDataStore (__tests__/integration/comprehensive-integration.test.tsx:179:40)
      at Object.react-stack-bottom-frame (node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (__tests__/integration/comprehensive-integration.test.tsx:193:13)

  \u25cf Comprehensive Frontend Integration Tests  3. LLM Cache Management Integration  should cache and retrieve LLM responses

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 260 |[39m       [90m// Second call - cache hit[39m
     [90m 261 |[39m       [36mconst[39m response2 [33m=[39m [36mawait[39m llmCacheService[33m.[39mquery([32m'test prompt'[39m[33m,[39m [32m'gpt-4'[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 262 |[39m       expect(response2[33m.[39mcached)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                                [31m[1m^[22m[39m
     [90m 263 |[39m     })[33m;[39m
     [90m 264 |[39m
     [90m 265 |[39m     it([32m'should manage cache invalidation and TTL'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.toBe (__tests__/integration/comprehensive-integration.test.tsx:262:32)

  \u25cf Comprehensive Frontend Integration Tests  3. LLM Cache Management Integration  should manage cache invalidation and TTL

    TypeError: useLLMCacheStore is not a function

    [0m [90m 265 |[39m     it([32m'should manage cache invalidation and TTL'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m 266 |[39m       [36mconst[39m [33mTestComponent[39m [33m=[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 267 |[39m         [36mconst[39m { cacheSize[33m,[39m clearCache[33m,[39m setCacheTTL } [33m=[39m useLLMCacheStore()[33m;[39m
     [90m     |[39m                                                        [31m[1m^[22m[39m
     [90m 268 |[39m         
     [90m 269 |[39m         [36mreturn[39m (
     [90m 270 |[39m           [33m<[39m[33mdiv[39m[33m>[39m[0m

      at useLLMCacheStore (__tests__/integration/comprehensive-integration.test.tsx:267:56)
      at Object.react-stack-bottom-frame (node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (__tests__/integration/comprehensive-integration.test.tsx:283:35)

  \u25cf Comprehensive Frontend Integration Tests  4. Supply Catalog Integration  should browse and select AI models from catalog

    expect(received).toHaveLength(expected)

    Expected length: 2
    Received length: 0
    Received array:  []

    [0m [90m 313 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m loadCatalog()[33m;[39m
     [90m 314 |[39m       
    [31m[1m>[22m[39m[90m 315 |[39m       expect(result[33m.[39mmodels)[33m.[39mtoHaveLength([35m2[39m)[33m;[39m
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 316 |[39m       expect(useSupplyStore[33m.[39mgetState()[33m.[39mcatalog[33m.[39mmodels)[33m.[39mtoHaveLength([35m2[39m)[33m;[39m
     [90m 317 |[39m     })[33m;[39m
     [90m 318 |[39m[0m

      at Object.toHaveLength (__tests__/integration/comprehensive-integration.test.tsx:315:29)

  \u25cf Comprehensive Frontend Integration Tests  4. Supply Catalog Integration  should switch between model providers dynamically

    TypeError: useSupplyStore is not a function

    [0m [90m 319 |[39m     it([32m'should switch between model providers dynamically'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m 320 |[39m       [36mconst[39m [33mTestComponent[39m [33m=[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 321 |[39m         [36mconst[39m { activeModel[33m,[39m switchModel } [33m=[39m useSupplyStore()[33m;[39m
     [90m     |[39m                                              [31m[1m^[22m[39m
     [90m 322 |[39m         
     [90m 323 |[39m         [36mreturn[39m (
     [90m 324 |[39m           [33m<[39m[33mdiv[39m[33m>[39m[0m

      at useSupplyStore (__tests__/integration/comprehensive-integration.test.tsx:321:46)
      at Object.react-stack-bottom-frame (node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (__tests__/integration/comprehensive-integration.test.tsx:338:48)

  \u25cf Comprehensive Frontend Integration Tests  5. Reference Management with Embeddings  should manage document references with vector search

    expect(received).toBe(expected) // Object.is equality

    Expected: "ref-789"
    Received: "ref-1"

    [0m [90m 371 |[39m       })[33m;[39m
     [90m 372 |[39m       
    [31m[1m>[22m[39m[90m 373 |[39m       expect(result[33m.[39mid)[33m.[39mtoBe([32m'ref-789'[39m)[33m;[39m
     [90m     |[39m                         [31m[1m^[22m[39m
     [90m 374 |[39m       expect(result[33m.[39membedding)[33m.[39mtoHaveLength([35m4[39m)[33m;[39m
     [90m 375 |[39m     })[33m;[39m
     [90m 376 |[39m[0m

      at Object.toBe (__tests__/integration/comprehensive-integration.test.tsx:373:25)

  \u25cf Comprehensive Frontend Integration Tests  5. Reference Management with Embeddings  should find similar references using embeddings

    expect(received).toHaveLength(expected)

    Expected length: 2
    Received length: 0
    Received array:  []

    [0m [90m 393 |[39m       [36mconst[39m results [33m=[39m [36mawait[39m findSimilar([32m'ref-789'[39m)[33m;[39m
     [90m 394 |[39m       
    [31m[1m>[22m[39m[90m 395 |[39m       expect(results)[33m.[39mtoHaveLength([35m2[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 396 |[39m       expect(results[[35m0[39m][33m.[39msimilarity)[33m.[39mtoBeGreaterThan([35m0.9[39m)[33m;[39m
     [90m 397 |[39m     })[33m;[39m
     [90m 398 |[39m   })[33m;[39m[0m

      at Object.toHaveLength (__tests__/integration/comprehensive-integration.test.tsx:395:23)

  \u25cf Comprehensive Frontend Integration Tests  6. Admin Functionality Integration  should manage users and permissions

    expect(element).toHaveTextContent()

    Expected element to have text content:
      2
    Received:
      0

    Ignored nodes: comments, script, style
    [36m<html>[39m
      [36m<head />[39m
      [36m<body>[39m
        [36m<div>[39m
          [36m<div>[39m
            [36m<button>[39m
              [0mLoad Users[0m
            [36m</button>[39m
            [36m<div[39m
              [33mdata-testid[39m=[32m"user-count"[39m
            [36m>[39m
              [0m0[0m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</body>[39m
    [36m</html>[39m

    [0m [90m 431 |[39m       
     [90m 432 |[39m       [36mawait[39m waitFor(() [33m=>[39m {
    [31m[1m>[22m[39m[90m 433 |[39m         expect(getByTestId([32m'user-count'[39m))[33m.[39mtoHaveTextContent([32m'2'[39m)[33m;[39m
     [90m     |[39m                                           [31m[1m^[22m[39m
     [90m 434 |[39m       })[33m;[39m
     [90m 435 |[39m     })[33m;[39m
     [90m 436 |[39m[0m

      at toHaveTextContent (__tests__/integration/comprehensive-integration.test.tsx:433:43)
      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)
      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)
      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)
      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)

  \u25cf Comprehensive Frontend Integration Tests  6. Admin Functionality Integration  should monitor system metrics and usage

    expect(received).toBe(expected) // Object.is equality

    Expected: 10000
    Received: undefined

    [0m [90m 456 |[39m       [36mconst[39m metrics [33m=[39m [36mawait[39m getSystemMetrics()[33m;[39m
     [90m 457 |[39m       
    [31m[1m>[22m[39m[90m 458 |[39m       expect(metrics[33m.[39mtotal_requests)[33m.[39mtoBe([35m10000[39m)[33m;[39m
     [90m     |[39m                                      [31m[1m^[22m[39m
     [90m 459 |[39m       expect(metrics[33m.[39merror_rate)[33m.[39mtoBeLessThan([35m0.05[39m)[33m;[39m
     [90m 460 |[39m     })[33m;[39m
     [90m 461 |[39m   })[33m;[39m[0m

      at Object.toBe (__tests__/integration/comprehensive-integration.test.tsx:458:38)

  \u25cf Comprehensive Frontend Integration Tests  7. Health Check Monitoring  should monitor service health status

    TypeError: Cannot read properties of undefined (reading 'database')

    [0m [90m 487 |[39m       
     [90m 488 |[39m       expect(health[33m.[39mstatus)[33m.[39mtoBe([32m'healthy'[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 489 |[39m       expect(health[33m.[39mservices[33m.[39mdatabase)[33m.[39mtoBe([32m'up'[39m)[33m;[39m
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 490 |[39m     })[33m;[39m
     [90m 491 |[39m
     [90m 492 |[39m     it([32m'should handle degraded service states'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.database (__tests__/integration/comprehensive-integration.test.tsx:489:30)

  \u25cf Comprehensive Frontend Integration Tests  7. Health Check Monitoring  should handle degraded service states

    Unable to find an element by: [data-testid="alert"]

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div>[39m
          [36m<div[39m
            [33mdata-testid[39m=[32m"health-status"[39m
          [36m>[39m
            [0mchecking[0m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

    [0m [90m 525 |[39m       [36mconst[39m { getByTestId } [33m=[39m render([33m<[39m[33mTestComponent[39m [33m/[39m[33m>[39m)[33m;[39m
     [90m 526 |[39m       
    [31m[1m>[22m[39m[90m 527 |[39m       [36mawait[39m waitFor(() [33m=>[39m {
     [90m     |[39m                    [31m[1m^[22m[39m
     [90m 528 |[39m         expect(getByTestId([32m'alert'[39m))[33m.[39mtoBeInTheDocument()[33m;[39m
     [90m 529 |[39m       })[33m;[39m
     [90m 530 |[39m     })[33m;[39m[0m

      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)
      at Object.<anonymous> (__tests__/integration/comprehensive-integration.test.tsx:527:20)

  \u25cf Comprehensive Frontend Integration Tests  8. Configuration Management  should load and apply dynamic configurations

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

    [0m [90m 558 |[39m       [36mconst[39m config [33m=[39m [36mawait[39m loadConfig()[33m;[39m
     [90m 559 |[39m       
    [31m[1m>[22m[39m[90m 560 |[39m       expect(config[33m.[39mfeatures[33m.[39mdark_mode)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                                         [31m[1m^[22m[39m
     [90m 561 |[39m       expect(useConfigStore[33m.[39mgetState()[33m.[39mconfig[33m.[39mlimits[33m.[39mmax_threads)[33m.[39mtoBe([35m100[39m)[33m;[39m
     [90m 562 |[39m     })[33m;[39m
     [90m 563 |[39m[0m

      at Object.toBe (__tests__/integration/comprehensive-integration.test.tsx:560:41)

  \u25cf Comprehensive Frontend Integration Tests  8. Configuration Management  should update configuration and propagate changes

    TypeError: useConfigStore is not a function

    [0m [90m 564 |[39m     it([32m'should update configuration and propagate changes'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m 565 |[39m       [36mconst[39m [33mTestComponent[39m [33m=[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 566 |[39m         [36mconst[39m { config[33m,[39m updateConfig } [33m=[39m useConfigStore()[33m;[39m
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 567 |[39m         
     [90m 568 |[39m         [36mreturn[39m (
     [90m 569 |[39m           [33m<[39m[33mdiv[39m[33m>[39m[0m

      at useConfigStore (__tests__/integration/comprehensive-integration.test.tsx:566:42)
      at Object.react-stack-bottom-frame (node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (__tests__/integration/comprehensive-integration.test.tsx:585:48)

  \u25cf Comprehensive Frontend Integration Tests  9. Generation Service Integration  should handle content generation with streaming

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 594 |[39m
     [90m 595 |[39m   describe([32m'9. Generation Service Integration'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 596 |[39m     it([32m'should handle content generation with streaming'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 597 |[39m       [36mconst[39m [33mTestComponent[39m [33m=[39m () [33m=>[39m {
     [90m 598 |[39m         [36mconst[39m [content[33m,[39m setContent] [33m=[39m [33mReact[39m[33m.[39museState([32m''[39m)[33m;[39m
     [90m 599 |[39m         [0m

      at it (__tests__/integration/comprehensive-integration.test.tsx:596:5)
      at describe (__tests__/integration/comprehensive-integration.test.tsx:595:3)
      at Object.describe (__tests__/integration/comprehensive-integration.test.tsx:83:1)

  \u25cf Comprehensive Frontend Integration Tests  9. Generation Service Integration  should handle generation templates and parameters

    expect(received).toContain(expected) // indexOf

    Expected substring: "Generated email"
    Received string:    ""

    [0m [90m 669 |[39m       })[33m;[39m
     [90m 670 |[39m       
    [31m[1m>[22m[39m[90m 671 |[39m       expect(result[33m.[39mcontent)[33m.[39mtoContain([32m'Generated email'[39m)[33m;[39m
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 672 |[39m       expect(result[33m.[39mtokens_used)[33m.[39mtoBeLessThan([35m200[39m)[33m;[39m
     [90m 673 |[39m     })[33m;[39m
     [90m 674 |[39m   })[33m;[39m[0m

      at Object.toContain (__tests__/integration/comprehensive-integration.test.tsx:671:30)

  \u25cf Comprehensive Frontend Integration Tests  11. Multi-Model Provider Switching  should switch between providers based on availability

    TestingLibraryElementError: Unable to find an element with the text: Send Request. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div />[39m
    [36m</body>[39m

    [0m [90m 749 |[39m       [36mconst[39m { getByText[33m,[39m getByTestId } [33m=[39m render([33m<[39m[33mTestComponent[39m [33m/[39m[33m>[39m)[33m;[39m
     [90m 750 |[39m       
    [31m[1m>[22m[39m[90m 751 |[39m       fireEvent[33m.[39mclick(getByText([32m'Send Request'[39m))[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 752 |[39m       
     [90m 753 |[39m       [36mawait[39m waitFor(() [33m=>[39m {
     [90m 754 |[39m         expect(getByTestId([32m'fallback'[39m))[33m.[39mtoBeInTheDocument()[33m;[39m[0m

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (__tests__/integration/comprehensive-integration.test.tsx:751:23)

  \u25cf Comprehensive Frontend Integration Tests  12. Cost Tracking and Budgeting  should track API usage costs in real-time

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 781 |[39m
     [90m 782 |[39m   describe([32m'12. Cost Tracking and Budgeting'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 783 |[39m     it([32m'should track API usage costs in real-time'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 784 |[39m       [36mconst[39m [33mTestComponent[39m [33m=[39m () [33m=>[39m {
     [90m 785 |[39m         [36mconst[39m [costs[33m,[39m setCosts] [33m=[39m [33mReact[39m[33m.[39museState({ total[33m:[39m [35m0[39m[33m,[39m breakdown[33m:[39m {} })[33m;[39m
     [90m 786 |[39m         [0m

      at it (__tests__/integration/comprehensive-integration.test.tsx:783:5)
      at describe (__tests__/integration/comprehensive-integration.test.tsx:782:3)
      at Object.describe (__tests__/integration/comprehensive-integration.test.tsx:83:1)

  \u25cf Comprehensive Frontend Integration Tests  13. Database Repository Pattern Integration  should handle unit of work pattern for transactions

    TestingLibraryElementError: Unable to find an element with the text: Execute Transaction. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div />[39m
    [36m</body>[39m

    [0m [90m 899 |[39m       [36mconst[39m { getByText[33m,[39m getByTestId } [33m=[39m render([33m<[39m[33mTestComponent[39m [33m/[39m[33m>[39m)[33m;[39m
     [90m 900 |[39m       
    [31m[1m>[22m[39m[90m 901 |[39m       fireEvent[33m.[39mclick(getByText([32m'Execute Transaction'[39m))[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 902 |[39m       
     [90m 903 |[39m       [36mawait[39m waitFor(() [33m=>[39m {
     [90m 904 |[39m         expect(getByTestId([32m'status'[39m))[33m.[39mtoHaveTextContent([32m'committed'[39m)[33m;[39m[0m

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (__tests__/integration/comprehensive-integration.test.tsx:901:23)

  \u25cf Comprehensive Frontend Integration Tests  14. Migration Handling  should handle migration rollback on failure

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: true

    [0m [90m 978 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m applyMigration([32m'004'[39m)[33m;[39m
     [90m 979 |[39m       
    [31m[1m>[22m[39m[90m 980 |[39m       expect(result[33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 981 |[39m       expect(result[33m.[39mrolled_back)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 982 |[39m     })[33m;[39m
     [90m 983 |[39m   })[33m;[39m[0m

      at Object.toBe (__tests__/integration/comprehensive-integration.test.tsx:980:30)

  \u25cf Comprehensive Frontend Integration Tests  15. Background Task Processing  should queue and process background tasks

    TestingLibraryElementError: Unable to find an element with the text: Queue Task. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div />[39m
    [36m</body>[39m

    [0m [90m 1039 |[39m       [36mconst[39m { getByText[33m,[39m getByTestId } [33m=[39m render([33m<[39m[33mTestComponent[39m [33m/[39m[33m>[39m)[33m;[39m
     [90m 1040 |[39m       
    [31m[1m>[22m[39m[90m 1041 |[39m       fireEvent[33m.[39mclick(getByText([32m'Queue Task'[39m))[33m;[39m
     [90m      |[39m                       [31m[1m^[22m[39m
     [90m 1042 |[39m       
     [90m 1043 |[39m       [36mawait[39m waitFor(() [33m=>[39m {
     [90m 1044 |[39m         expect(getByTestId([32m'task-status'[39m))[33m.[39mtoHaveTextContent([32m'completed'[39m)[33m;[39m[0m

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (__tests__/integration/comprehensive-integration.test.tsx:1041:23)

  \u25cf Comprehensive Frontend Integration Tests  18. Error Context and Tracing  should propagate trace IDs through requests

    TestingLibraryElementError: Unable to find an element with the text: Make Request. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div />[39m
    [36m</body>[39m

    [0m [90m 1221 |[39m       [36mconst[39m { getByText[33m,[39m getByTestId } [33m=[39m render([33m<[39m[33mTestComponent[39m [33m/[39m[33m>[39m)[33m;[39m
     [90m 1222 |[39m       
    [31m[1m>[22m[39m[90m 1223 |[39m       fireEvent[33m.[39mclick(getByText([32m'Make Request'[39m))[33m;[39m
     [90m      |[39m                       [31m[1m^[22m[39m
     [90m 1224 |[39m       
     [90m 1225 |[39m       [36mawait[39m waitFor(() [33m=>[39m {
     [90m 1226 |[39m         expect(getByTestId([32m'trace-id'[39m))[33m.[39mtoHaveTextContent(traceId)[33m;[39m[0m

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (__tests__/integration/comprehensive-integration.test.tsx:1223:23)

  \u25cf Comprehensive Frontend Integration Tests  18. Error Context and Tracing  should capture error context with stack traces

    TestingLibraryElementError: Unable to find an element with the text: Trigger Error. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div />[39m
    [36m</body>[39m

    [0m [90m 1267 |[39m       [36mconst[39m { getByText[33m,[39m getByTestId } [33m=[39m render([33m<[39m[33mTestComponent[39m [33m/[39m[33m>[39m)[33m;[39m
     [90m 1268 |[39m       
    [31m[1m>[22m[39m[90m 1269 |[39m       fireEvent[33m.[39mclick(getByText([32m'Trigger Error'[39m))[33m;[39m
     [90m      |[39m                       [31m[1m^[22m[39m
     [90m 1270 |[39m       
     [90m 1271 |[39m       [36mawait[39m waitFor(() [33m=>[39m {
     [90m 1272 |[39m         expect(getByTestId([32m'error-trace'[39m))[33m.[39mtoHaveTextContent([32m'trace-error-123'[39m)[33m;[39m[0m

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (__tests__/integration/comprehensive-integration.test.tsx:1269:23)

  \u25cf Comprehensive Frontend Integration Tests  20. Key Manager Integration  should rotate API keys periodically

    TestingLibraryElementError: Unable to find an element by: [data-testid="rotation-status"]

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div />[39m
    [36m</body>[39m

    [0m [90m 1400 |[39m       
     [90m 1401 |[39m       [90m// Component would handle rotation in production[39m
    [31m[1m>[22m[39m[90m 1402 |[39m       expect(screen[33m.[39mgetByTestId([32m'rotation-status'[39m))[33m.[39mtoBeInTheDocument()[33m;[39m
     [90m      |[39m                     [31m[1m^[22m[39m
     [90m 1403 |[39m     })[33m;[39m
     [90m 1404 |[39m   })[33m;[39m
     [90m 1405 |[39m[0m

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByTestId (__tests__/integration/comprehensive-integration.test.tsx:1402:21)

  \u25cf Comprehensive Frontend Integration Tests  21. Demo Mode Functionality  should restrict features in demo mode

    TestingLibraryElementError: Unable to find an element with the text: Delete. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div />[39m
    [36m</body>[39m

    [0m [90m 1431 |[39m       [36mconst[39m { getByText[33m,[39m getByTestId } [33m=[39m render([33m<[39m[33mTestComponent[39m [33m/[39m[33m>[39m)[33m;[39m
     [90m 1432 |[39m       
    [31m[1m>[22m[39m[90m 1433 |[39m       fireEvent[33m.[39mclick(getByText([32m'Delete'[39m))[33m;[39m
     [90m      |[39m                       [31m[1m^[22m[39m
     [90m 1434 |[39m       
     [90m 1435 |[39m       [36mawait[39m waitFor(() [33m=>[39m {
     [90m 1436 |[39m         expect(getByTestId([32m'message'[39m))[33m.[39mtoHaveTextContent([32m'disabled in demo mode'[39m)[33m;[39m[0m

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (__tests__/integration/comprehensive-integration.test.tsx:1433:23)

  \u25cf Comprehensive Frontend Integration Tests  22. Enterprise Demo Features  should handle team collaboration workflows

    TestingLibraryElementError: Unable to find an element with the text: Share Thread. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div />[39m
    [36m</body>[39m

    [0m [90m 1533 |[39m       [36mconst[39m { getByText[33m,[39m getByTestId } [33m=[39m render([33m<[39m[33mTestComponent[39m [33m/[39m[33m>[39m)[33m;[39m
     [90m 1534 |[39m       
    [31m[1m>[22m[39m[90m 1535 |[39m       fireEvent[33m.[39mclick(getByText([32m'Share Thread'[39m))[33m;[39m
     [90m      |[39m                       [31m[1m^[22m[39m
     [90m 1536 |[39m       
     [90m 1537 |[39m       [36mawait[39m waitFor(() [33m=>[39m {
     [90m 1538 |[39m         expect(getByTestId([32m'shared-status'[39m))[33m.[39mtoBeInTheDocument()[33m;[39m[0m

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (__tests__/integration/comprehensive-integration.test.tsx:1535:23)

  \u25cf Comprehensive Frontend Integration Tests  25. Export Functionality  should export data in multiple formats

    TestingLibraryElementError: Unable to find an element with the text: Export JSON. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div />[39m
    [36m</body>[39m

    [0m [90m 1705 |[39m       [36mconst[39m { getByText[33m,[39m getByTestId } [33m=[39m render([33m<[39m[33mTestComponent[39m [33m/[39m[33m>[39m)[33m;[39m
     [90m 1706 |[39m       
    [31m[1m>[22m[39m[90m 1707 |[39m       fireEvent[33m.[39mclick(getByText([32m'Export JSON'[39m))[33m;[39m
     [90m      |[39m                       [31m[1m^[22m[39m
     [90m 1708 |[39m       
     [90m 1709 |[39m       [36mawait[39m waitFor(() [33m=>[39m {
     [90m 1710 |[39m         expect(getByTestId([32m'export-status'[39m))[33m.[39mtoHaveTextContent([32m'completed'[39m)[33m;[39m[0m

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (__tests__/integration/comprehensive-integration.test.tsx:1707:23)

  \u25cf Comprehensive Frontend Integration Tests  25. Export Functionality  should handle large data exports with progress

    TestingLibraryElementError: Unable to find an element by: [data-testid="progress"]

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div />[39m
    [36m</body>[39m

    [0m [90m 1740 |[39m       
     [90m 1741 |[39m       [90m// In real scenario, SSE would update progress[39m
    [31m[1m>[22m[39m[90m 1742 |[39m       expect(screen[33m.[39mgetByTestId([32m'progress'[39m))[33m.[39mtoBeInTheDocument()[33m;[39m
     [90m      |[39m                     [31m[1m^[22m[39m
     [90m 1743 |[39m     })[33m;[39m
     [90m 1744 |[39m   })[33m;[39m
     [90m 1745 |[39m[0m

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByTestId (__tests__/integration/comprehensive-integration.test.tsx:1742:21)

  \u25cf Comprehensive Frontend Integration Tests  27. Collaboration Features  should handle real-time collaborative editing

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 1814 |[39m
     [90m 1815 |[39m   describe([32m'27. Collaboration Features'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 1816 |[39m     it([32m'should handle real-time collaborative editing'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m      |[39m     [31m[1m^[22m[39m
     [90m 1817 |[39m       [36mconst[39m [33mTestComponent[39m [33m=[39m () [33m=>[39m {
     [90m 1818 |[39m         [36mconst[39m [collaborators[33m,[39m setCollaborators] [33m=[39m [33mReact[39m[33m.[39museState([])[33m;[39m
     [90m 1819 |[39m         [36mconst[39m [content[33m,[39m setContent] [33m=[39m [33mReact[39m[33m.[39museState([32m''[39m)[33m;[39m[0m

      at it (__tests__/integration/comprehensive-integration.test.tsx:1816:5)
      at describe (__tests__/integration/comprehensive-integration.test.tsx:1815:3)
      at Object.describe (__tests__/integration/comprehensive-integration.test.tsx:83:1)

  \u25cf Comprehensive Frontend Integration Tests  27. Collaboration Features  should synchronize cursor positions between users

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 1857 |[39m     })[33m;[39m
     [90m 1858 |[39m
    [31m[1m>[22m[39m[90m 1859 |[39m     it([32m'should synchronize cursor positions between users'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m      |[39m     [31m[1m^[22m[39m
     [90m 1860 |[39m       [36mconst[39m [33mTestComponent[39m [33m=[39m () [33m=>[39m {
     [90m 1861 |[39m         [36mconst[39m [cursors[33m,[39m setCursors] [33m=[39m [33mReact[39m[33m.[39museState({})[33m;[39m
     [90m 1862 |[39m         [0m

      at it (__tests__/integration/comprehensive-integration.test.tsx:1859:5)
      at describe (__tests__/integration/comprehensive-integration.test.tsx:1815:3)
      at Object.describe (__tests__/integration/comprehensive-integration.test.tsx:83:1)

  \u25cf Comprehensive Frontend Integration Tests  28. Real-time Metrics Dashboard  should display live performance metrics

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 1917 |[39m
     [90m 1918 |[39m   describe([32m'28. Real-time Metrics Dashboard'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 1919 |[39m     it([32m'should display live performance metrics'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m      |[39m     [31m[1m^[22m[39m
     [90m 1920 |[39m       [36mconst[39m [33mTestComponent[39m [33m=[39m () [33m=>[39m {
     [90m 1921 |[39m         [36mconst[39m [metrics[33m,[39m setMetrics] [33m=[39m [33mReact[39m[33m.[39museState({
     [90m 1922 |[39m           requests_per_second[33m:[39m [35m0[39m[33m,[39m[0m

      at it (__tests__/integration/comprehensive-integration.test.tsx:1919:5)
      at describe (__tests__/integration/comprehensive-integration.test.tsx:1918:3)
      at Object.describe (__tests__/integration/comprehensive-integration.test.tsx:83:1)

  \u25cf Comprehensive Frontend Integration Tests  29. Agent Tool Dispatcher Integration  should handle tool chaining and dependencies

    TestingLibraryElementError: Unable to find an element with the text: Execute Chain. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div />[39m
    [36m</body>[39m

    [0m [90m 2063 |[39m       [36mconst[39m { getByText[33m,[39m getByTestId } [33m=[39m render([33m<[39m[33mTestComponent[39m [33m/[39m[33m>[39m)[33m;[39m
     [90m 2064 |[39m       
    [31m[1m>[22m[39m[90m 2065 |[39m       fireEvent[33m.[39mclick(getByText([32m'Execute Chain'[39m))[33m;[39m
     [90m      |[39m                       [31m[1m^[22m[39m
     [90m 2066 |[39m       
     [90m 2067 |[39m       [36mawait[39m waitFor(() [33m=>[39m {
     [90m 2068 |[39m         expect(getByTestId([32m'chain-status'[39m))[33m.[39mtoHaveTextContent([0m

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (__tests__/integration/comprehensive-integration.test.tsx:2065:23)

  \u25cf Comprehensive Frontend Integration Tests  30. State Persistence and Recovery  should recover from corrupted state gracefully

    TestingLibraryElementError: Unable to find an element with the text: Load State. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div />[39m
    [36m</body>[39m

    [0m [90m 2172 |[39m       [36mconst[39m { getByText[33m,[39m getByTestId } [33m=[39m render([33m<[39m[33mTestComponent[39m [33m/[39m[33m>[39m)[33m;[39m
     [90m 2173 |[39m       
    [31m[1m>[22m[39m[90m 2174 |[39m       fireEvent[33m.[39mclick(getByText([32m'Load State'[39m))[33m;[39m
     [90m      |[39m                       [31m[1m^[22m[39m
     [90m 2175 |[39m       
     [90m 2176 |[39m       [36mawait[39m waitFor(() [33m=>[39m {
     [90m 2177 |[39m         expect(getByTestId([32m'error'[39m))[33m.[39mtoHaveTextContent([32m'State corrupted, using defaults'[39m)[33m;[39m[0m

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (__tests__/integration/comprehensive-integration.test.tsx:2174:23)


Test Suites: 28 failed, 18 passed, 46 total
Tests:       280 failed, 428 passed, 708 total
Snapshots:   0 total
Time:        37.264 s
Ran all test suites.


[FAIL] Backend tests completed in 39.93s

============================================================
RUNNING FRONTEND TESTS
============================================================

> netra-frontend-apex-v1@0.1.0 test
> jest __tests__/unit components/**/*.test.tsx hooks/**/*.test.ts

  Invalid testPattern __tests__/unit|components/**/*.test.tsx|hooks/**/*.test.ts supplied. Running all tests instead.
  Invalid testPattern __tests__/unit|components/**/*.test.tsx|hooks/**/*.test.ts supplied. Running all tests instead.
================================================================================
NETRA AI PLATFORM - FRONTEND TEST RUNNER
================================================================================

================================================================================
Running Jest Tests
--------------------------------------------------------------------------------
Running: npm run test -- __tests__/unit components/**/*.test.tsx hooks/**/*.test.ts
--------------------------------------------------------------------------------

================================================================================
[FAIL] CHECKS FAILED with exit code 1
================================================================================

[FAIL] Frontend tests completed in 38.85s

[REPORT] Report saved:
  [LATEST] C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\test_reports\latest\unit_report.md
  [METRICS] C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\test_reports\metrics\unit_metrics.json
  [HISTORY] C:\Users\antho\OneDrive\Desktop\Netra\netra-core-generation-1\test_reports\history

============================================================
TEST SUMMARY
============================================================
Total Tests: 518
  Passed:    208
  Failed:    310
  Skipped:   0
  Errors:    0
============================================================
Backend:  [FAILED] (192 tests, 39.93s)
Frontend: [FAILED] (326 tests, 38.85s)
Overall:  [FAILED] (78.78s)
============================================================
