<?xml version="1.0" encoding="utf-8"?><testsuites name="pytest tests"><testsuite name="pytest" errors="22" failures="57" skipped="0" tests="182" time="48.028" timestamp="2025-09-07T10:47:28.656803-07:00" hostname="Anthony"><testcase classname="tests.unit.test_database_models_comprehensive.TestAuthUserModel" name="test_auth_user_model_creation" time="0.251" /><testcase classname="tests.unit.test_database_models_comprehensive.TestAuthUserModel" name="test_auth_user_model_defaults" time="0.019" /><testcase classname="tests.unit.test_database_models_comprehensive.TestAuthUserModel" name="test_auth_user_email_uniqueness" time="0.019" /><testcase classname="tests.unit.test_database_models_comprehensive.TestAuthUserModel" name="test_auth_user_oauth_fields" time="0.015" /><testcase classname="tests.unit.test_database_models_comprehensive.TestAuthUserModel" name="test_auth_user_security_fields" time="0.016" /><testcase classname="tests.unit.test_database_models_comprehensive.TestAuthUserModel" name="test_auth_user_timestamps" time="0.209"><failure message="sqlalchemy.exc.MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)">auth_service\tests\unit\test_database_models_comprehensive.py:190: in test_auth_user_timestamps
    assert user.updated_at &gt; original_updated
           ^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\attributes.py:569: in __get__
    return self.impl.get(state, dict_)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\attributes.py:1096: in get
    value = self._fire_loader_callables(state, key, passive)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\attributes.py:1126: in _fire_loader_callables
    return state._load_expired(state, passive)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\state.py:803: in _load_expired
    self.manager.expired_attribute_loader(self, toload, passive)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\loading.py:1674: in load_scalar_attributes
    result = load_on_ident(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\loading.py:510: in load_on_ident
    return load_on_pk_identity(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\loading.py:695: in load_on_pk_identity
    session.execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\session.py:2365: in execute
    return self._execute_internal(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\session.py:2241: in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\session.py:2110: in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
&lt;string&gt;:2: in _connection_for_bind
    ???
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\state_changes.py:137: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\session.py:1189: in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:3277: in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:143: in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:3301: in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\pool\base.py:447: in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\pool\base.py:1363: in _checkout
    with util.safe_reraise():
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\pool\base.py:1301: in _checkout
    result = pool._dialect._do_ping_w_event(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\default.py:728: in _do_ping_w_event
    return self.do_ping(dbapi_connection)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\default.py:752: in do_ping
    cursor.execute(self._dialect_specific_select_one)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:177: in execute
    self._adapt_connection._handle_exception(error)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:337: in _handle_exception
    raise error
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:154: in execute
    _cursor: AsyncIODBAPICursor = self.await_(self._connection.cursor())  # type: ignore[arg-type] # noqa: E501
                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:123: in await_only
    raise exc.MissingGreenlet(
E   sqlalchemy.exc.MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)</failure></testcase><testcase classname="tests.unit.test_database_models_comprehensive.TestAuthUserModel" name="test_auth_user_json_provider_data" time="0.006"><error message="failed on setup with &quot;sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: auth_users&#10;[SQL: DELETE FROM auth_users WHERE email LIKE 'test_%@example.com']&#10;(Background on this error at: https://sqlalche.me/e/20/e3q8)&quot;">..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:177: in execute
    self._adapt_connection._handle_exception(error)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:337: in _handle_exception
    raise error
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:159: in execute
    self.await_(_cursor.execute(operation, parameters))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:48: in execute
    await self._execute(self._cursor.execute, sql, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:40: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:133: in _execute
    return await future
           ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:106: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.OperationalError: no such table: auth_users

The above exception was the direct cause of the following exception:
auth_service\tests\unit\test_database_models_comprehensive.py:37: in setup_method
    await session.execute(text("DELETE FROM auth_users WHERE email LIKE 'test_%@example.com'"))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\ext\asyncio\session.py:463: in execute
    result = await greenlet_spawn(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:201: in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\session.py:2365: in execute
    return self._execute_internal(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\session.py:2260: in _execute_internal
    result = conn.execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1419: in execute
    return meth(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\sql\elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1846: in _execute_context
    return self._exec_single_context(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:177: in execute
    self._adapt_connection._handle_exception(error)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:337: in _handle_exception
    raise error
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:159: in execute
    self.await_(_cursor.execute(operation, parameters))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:48: in execute
    await self._execute(self._cursor.execute, sql, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:40: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:133: in _execute
    return await future
           ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:106: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: auth_users
E   [SQL: DELETE FROM auth_users WHERE email LIKE 'test_%@example.com']
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)</error></testcase><testcase classname="tests.unit.test_database_models_comprehensive.TestAuthSessionModel" name="test_auth_session_model_creation" time="0.008"><error message="failed on setup with &quot;sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: auth_sessions&#10;[SQL: DELETE FROM auth_sessions WHERE device_id LIKE 'test_%']&#10;(Background on this error at: https://sqlalche.me/e/20/e3q8)&quot;">..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:177: in execute
    self._adapt_connection._handle_exception(error)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:337: in _handle_exception
    raise error
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:159: in execute
    self.await_(_cursor.execute(operation, parameters))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:48: in execute
    await self._execute(self._cursor.execute, sql, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:40: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:133: in _execute
    return await future
           ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:106: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.OperationalError: no such table: auth_sessions

The above exception was the direct cause of the following exception:
auth_service\tests\unit\test_database_models_comprehensive.py:238: in setup_method
    await session.execute(text("DELETE FROM auth_sessions WHERE device_id LIKE 'test_%'"))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\ext\asyncio\session.py:463: in execute
    result = await greenlet_spawn(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:201: in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\session.py:2365: in execute
    return self._execute_internal(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\session.py:2260: in _execute_internal
    result = conn.execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1419: in execute
    return meth(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\sql\elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1846: in _execute_context
    return self._exec_single_context(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:177: in execute
    self._adapt_connection._handle_exception(error)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:337: in _handle_exception
    raise error
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:159: in execute
    self.await_(_cursor.execute(operation, parameters))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:48: in execute
    await self._execute(self._cursor.execute, sql, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:40: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:133: in _execute
    return await future
           ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:106: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: auth_sessions
E   [SQL: DELETE FROM auth_sessions WHERE device_id LIKE 'test_%']
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)</error></testcase><testcase classname="tests.unit.test_database_models_comprehensive.TestAuthSessionModel" name="test_auth_session_model_defaults" time="0.009"><error message="failed on setup with &quot;sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: auth_sessions&#10;[SQL: DELETE FROM auth_sessions WHERE device_id LIKE 'test_%']&#10;(Background on this error at: https://sqlalche.me/e/20/e3q8)&quot;">..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:177: in execute
    self._adapt_connection._handle_exception(error)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:337: in _handle_exception
    raise error
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:159: in execute
    self.await_(_cursor.execute(operation, parameters))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:48: in execute
    await self._execute(self._cursor.execute, sql, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:40: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:133: in _execute
    return await future
           ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:106: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.OperationalError: no such table: auth_sessions

The above exception was the direct cause of the following exception:
auth_service\tests\unit\test_database_models_comprehensive.py:238: in setup_method
    await session.execute(text("DELETE FROM auth_sessions WHERE device_id LIKE 'test_%'"))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\ext\asyncio\session.py:463: in execute
    result = await greenlet_spawn(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:201: in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\session.py:2365: in execute
    return self._execute_internal(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\session.py:2260: in _execute_internal
    result = conn.execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1419: in execute
    return meth(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\sql\elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1846: in _execute_context
    return self._exec_single_context(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:177: in execute
    self._adapt_connection._handle_exception(error)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:337: in _handle_exception
    raise error
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:159: in execute
    self.await_(_cursor.execute(operation, parameters))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:48: in execute
    await self._execute(self._cursor.execute, sql, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:40: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:133: in _execute
    return await future
           ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:106: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: auth_sessions
E   [SQL: DELETE FROM auth_sessions WHERE device_id LIKE 'test_%']
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)</error></testcase><testcase classname="tests.unit.test_database_models_comprehensive.TestAuthSessionModel" name="test_auth_session_revocation" time="0.009"><error message="failed on setup with &quot;sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: auth_sessions&#10;[SQL: DELETE FROM auth_sessions WHERE device_id LIKE 'test_%']&#10;(Background on this error at: https://sqlalche.me/e/20/e3q8)&quot;">..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:177: in execute
    self._adapt_connection._handle_exception(error)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:337: in _handle_exception
    raise error
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:159: in execute
    self.await_(_cursor.execute(operation, parameters))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:48: in execute
    await self._execute(self._cursor.execute, sql, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:40: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:133: in _execute
    return await future
           ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:106: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.OperationalError: no such table: auth_sessions

The above exception was the direct cause of the following exception:
auth_service\tests\unit\test_database_models_comprehensive.py:238: in setup_method
    await session.execute(text("DELETE FROM auth_sessions WHERE device_id LIKE 'test_%'"))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\ext\asyncio\session.py:463: in execute
    result = await greenlet_spawn(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:201: in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\session.py:2365: in execute
    return self._execute_internal(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\session.py:2260: in _execute_internal
    result = conn.execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1419: in execute
    return meth(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\sql\elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1846: in _execute_context
    return self._exec_single_context(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:177: in execute
    self._adapt_connection._handle_exception(error)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:337: in _handle_exception
    raise error
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:159: in execute
    self.await_(_cursor.execute(operation, parameters))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:48: in execute
    await self._execute(self._cursor.execute, sql, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:40: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:133: in _execute
    return await future
           ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:106: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: auth_sessions
E   [SQL: DELETE FROM auth_sessions WHERE device_id LIKE 'test_%']
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)</error></testcase><testcase classname="tests.unit.test_database_models_comprehensive.TestAuthSessionModel" name="test_auth_session_multiple_per_user" time="0.010"><error message="failed on setup with &quot;sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: auth_sessions&#10;[SQL: DELETE FROM auth_sessions WHERE device_id LIKE 'test_%']&#10;(Background on this error at: https://sqlalche.me/e/20/e3q8)&quot;">..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:177: in execute
    self._adapt_connection._handle_exception(error)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:337: in _handle_exception
    raise error
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:159: in execute
    self.await_(_cursor.execute(operation, parameters))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:48: in execute
    await self._execute(self._cursor.execute, sql, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:40: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:133: in _execute
    return await future
           ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:106: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.OperationalError: no such table: auth_sessions

The above exception was the direct cause of the following exception:
auth_service\tests\unit\test_database_models_comprehensive.py:238: in setup_method
    await session.execute(text("DELETE FROM auth_sessions WHERE device_id LIKE 'test_%'"))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\ext\asyncio\session.py:463: in execute
    result = await greenlet_spawn(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:201: in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\session.py:2365: in execute
    return self._execute_internal(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\session.py:2260: in _execute_internal
    result = conn.execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1419: in execute
    return meth(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\sql\elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1846: in _execute_context
    return self._exec_single_context(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:177: in execute
    self._adapt_connection._handle_exception(error)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:337: in _handle_exception
    raise error
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:159: in execute
    self.await_(_cursor.execute(operation, parameters))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:48: in execute
    await self._execute(self._cursor.execute, sql, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:40: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:133: in _execute
    return await future
           ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:106: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: auth_sessions
E   [SQL: DELETE FROM auth_sessions WHERE device_id LIKE 'test_%']
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)</error></testcase><testcase classname="tests.unit.test_database_models_comprehensive.TestAuthAuditLogModel" name="test_auth_audit_log_model_creation" time="0.010"><error message="failed on setup with &quot;sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: auth_audit_logs&#10;[SQL: DELETE FROM auth_audit_logs WHERE event_type LIKE 'test_%']&#10;(Background on this error at: https://sqlalche.me/e/20/e3q8)&quot;">..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:177: in execute
    self._adapt_connection._handle_exception(error)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:337: in _handle_exception
    raise error
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:159: in execute
    self.await_(_cursor.execute(operation, parameters))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:48: in execute
    await self._execute(self._cursor.execute, sql, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:40: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:133: in _execute
    return await future
           ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:106: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.OperationalError: no such table: auth_audit_logs

The above exception was the direct cause of the following exception:
auth_service\tests\unit\test_database_models_comprehensive.py:366: in setup_method
    await session.execute(text("DELETE FROM auth_audit_logs WHERE event_type LIKE 'test_%'"))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\ext\asyncio\session.py:463: in execute
    result = await greenlet_spawn(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:201: in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\session.py:2365: in execute
    return self._execute_internal(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\session.py:2260: in _execute_internal
    result = conn.execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1419: in execute
    return meth(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\sql\elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1846: in _execute_context
    return self._exec_single_context(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:177: in execute
    self._adapt_connection._handle_exception(error)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:337: in _handle_exception
    raise error
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:159: in execute
    self.await_(_cursor.execute(operation, parameters))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:48: in execute
    await self._execute(self._cursor.execute, sql, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:40: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:133: in _execute
    return await future
           ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:106: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: auth_audit_logs
E   [SQL: DELETE FROM auth_audit_logs WHERE event_type LIKE 'test_%']
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)</error></testcase><testcase classname="tests.unit.test_database_models_comprehensive.TestAuthAuditLogModel" name="test_auth_audit_log_failure_case" time="0.013"><error message="failed on setup with &quot;sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: auth_audit_logs&#10;[SQL: DELETE FROM auth_audit_logs WHERE event_type LIKE 'test_%']&#10;(Background on this error at: https://sqlalche.me/e/20/e3q8)&quot;">..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:177: in execute
    self._adapt_connection._handle_exception(error)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:337: in _handle_exception
    raise error
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:159: in execute
    self.await_(_cursor.execute(operation, parameters))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:48: in execute
    await self._execute(self._cursor.execute, sql, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:40: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:133: in _execute
    return await future
           ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:106: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.OperationalError: no such table: auth_audit_logs

The above exception was the direct cause of the following exception:
auth_service\tests\unit\test_database_models_comprehensive.py:366: in setup_method
    await session.execute(text("DELETE FROM auth_audit_logs WHERE event_type LIKE 'test_%'"))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\ext\asyncio\session.py:463: in execute
    result = await greenlet_spawn(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:201: in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\session.py:2365: in execute
    return self._execute_internal(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\session.py:2260: in _execute_internal
    result = conn.execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1419: in execute
    return meth(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\sql\elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1846: in _execute_context
    return self._exec_single_context(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:177: in execute
    self._adapt_connection._handle_exception(error)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:337: in _handle_exception
    raise error
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:159: in execute
    self.await_(_cursor.execute(operation, parameters))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:48: in execute
    await self._execute(self._cursor.execute, sql, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:40: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:133: in _execute
    return await future
           ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:106: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: auth_audit_logs
E   [SQL: DELETE FROM auth_audit_logs WHERE event_type LIKE 'test_%']
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)</error></testcase><testcase classname="tests.unit.test_database_models_comprehensive.TestAuthAuditLogModel" name="test_auth_audit_log_without_user" time="0.011"><error message="failed on setup with &quot;sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: auth_audit_logs&#10;[SQL: DELETE FROM auth_audit_logs WHERE event_type LIKE 'test_%']&#10;(Background on this error at: https://sqlalche.me/e/20/e3q8)&quot;">..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:177: in execute
    self._adapt_connection._handle_exception(error)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:337: in _handle_exception
    raise error
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:159: in execute
    self.await_(_cursor.execute(operation, parameters))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:48: in execute
    await self._execute(self._cursor.execute, sql, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:40: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:133: in _execute
    return await future
           ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:106: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.OperationalError: no such table: auth_audit_logs

The above exception was the direct cause of the following exception:
auth_service\tests\unit\test_database_models_comprehensive.py:366: in setup_method
    await session.execute(text("DELETE FROM auth_audit_logs WHERE event_type LIKE 'test_%'"))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\ext\asyncio\session.py:463: in execute
    result = await greenlet_spawn(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:201: in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\session.py:2365: in execute
    return self._execute_internal(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\session.py:2260: in _execute_internal
    result = conn.execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1419: in execute
    return meth(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\sql\elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1846: in _execute_context
    return self._exec_single_context(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:177: in execute
    self._adapt_connection._handle_exception(error)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:337: in _handle_exception
    raise error
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:159: in execute
    self.await_(_cursor.execute(operation, parameters))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:48: in execute
    await self._execute(self._cursor.execute, sql, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:40: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:133: in _execute
    return await future
           ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:106: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: auth_audit_logs
E   [SQL: DELETE FROM auth_audit_logs WHERE event_type LIKE 'test_%']
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)</error></testcase><testcase classname="tests.unit.test_database_models_comprehensive.TestAuthAuditLogModel" name="test_auth_audit_log_json_metadata" time="0.011"><error message="failed on setup with &quot;sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: auth_audit_logs&#10;[SQL: DELETE FROM auth_audit_logs WHERE event_type LIKE 'test_%']&#10;(Background on this error at: https://sqlalche.me/e/20/e3q8)&quot;">..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:177: in execute
    self._adapt_connection._handle_exception(error)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:337: in _handle_exception
    raise error
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:159: in execute
    self.await_(_cursor.execute(operation, parameters))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:48: in execute
    await self._execute(self._cursor.execute, sql, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:40: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:133: in _execute
    return await future
           ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:106: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.OperationalError: no such table: auth_audit_logs

The above exception was the direct cause of the following exception:
auth_service\tests\unit\test_database_models_comprehensive.py:366: in setup_method
    await session.execute(text("DELETE FROM auth_audit_logs WHERE event_type LIKE 'test_%'"))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\ext\asyncio\session.py:463: in execute
    result = await greenlet_spawn(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:201: in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\session.py:2365: in execute
    return self._execute_internal(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\session.py:2260: in _execute_internal
    result = conn.execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1419: in execute
    return meth(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\sql\elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1846: in _execute_context
    return self._exec_single_context(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:177: in execute
    self._adapt_connection._handle_exception(error)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:337: in _handle_exception
    raise error
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:159: in execute
    self.await_(_cursor.execute(operation, parameters))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:48: in execute
    await self._execute(self._cursor.execute, sql, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:40: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:133: in _execute
    return await future
           ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:106: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: auth_audit_logs
E   [SQL: DELETE FROM auth_audit_logs WHERE event_type LIKE 'test_%']
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)</error></testcase><testcase classname="tests.unit.test_database_models_comprehensive.TestPasswordResetTokenModel" name="test_password_reset_token_creation" time="0.009"><error message="failed on setup with &quot;sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: password_reset_tokens&#10;[SQL: DELETE FROM password_reset_tokens WHERE email LIKE 'reset_%@example.com']&#10;(Background on this error at: https://sqlalche.me/e/20/e3q8)&quot;">..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:177: in execute
    self._adapt_connection._handle_exception(error)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:337: in _handle_exception
    raise error
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:159: in execute
    self.await_(_cursor.execute(operation, parameters))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:48: in execute
    await self._execute(self._cursor.execute, sql, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:40: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:133: in _execute
    return await future
           ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:106: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.OperationalError: no such table: password_reset_tokens

The above exception was the direct cause of the following exception:
auth_service\tests\unit\test_database_models_comprehensive.py:492: in setup_method
    await session.execute(text("DELETE FROM password_reset_tokens WHERE email LIKE 'reset_%@example.com'"))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\ext\asyncio\session.py:463: in execute
    result = await greenlet_spawn(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:201: in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\session.py:2365: in execute
    return self._execute_internal(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\session.py:2260: in _execute_internal
    result = conn.execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1419: in execute
    return meth(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\sql\elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1846: in _execute_context
    return self._exec_single_context(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:177: in execute
    self._adapt_connection._handle_exception(error)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:337: in _handle_exception
    raise error
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:159: in execute
    self.await_(_cursor.execute(operation, parameters))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:48: in execute
    await self._execute(self._cursor.execute, sql, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:40: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:133: in _execute
    return await future
           ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:106: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: password_reset_tokens
E   [SQL: DELETE FROM password_reset_tokens WHERE email LIKE 'reset_%@example.com']
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)</error></testcase><testcase classname="tests.unit.test_database_models_comprehensive.TestPasswordResetTokenModel" name="test_password_reset_token_defaults" time="0.008"><error message="failed on setup with &quot;sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: password_reset_tokens&#10;[SQL: DELETE FROM password_reset_tokens WHERE email LIKE 'reset_%@example.com']&#10;(Background on this error at: https://sqlalche.me/e/20/e3q8)&quot;">..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:177: in execute
    self._adapt_connection._handle_exception(error)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:337: in _handle_exception
    raise error
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:159: in execute
    self.await_(_cursor.execute(operation, parameters))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:48: in execute
    await self._execute(self._cursor.execute, sql, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:40: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:133: in _execute
    return await future
           ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:106: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.OperationalError: no such table: password_reset_tokens

The above exception was the direct cause of the following exception:
auth_service\tests\unit\test_database_models_comprehensive.py:492: in setup_method
    await session.execute(text("DELETE FROM password_reset_tokens WHERE email LIKE 'reset_%@example.com'"))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\ext\asyncio\session.py:463: in execute
    result = await greenlet_spawn(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:201: in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\session.py:2365: in execute
    return self._execute_internal(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\session.py:2260: in _execute_internal
    result = conn.execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1419: in execute
    return meth(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\sql\elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1846: in _execute_context
    return self._exec_single_context(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:177: in execute
    self._adapt_connection._handle_exception(error)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:337: in _handle_exception
    raise error
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:159: in execute
    self.await_(_cursor.execute(operation, parameters))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:48: in execute
    await self._execute(self._cursor.execute, sql, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:40: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:133: in _execute
    return await future
           ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:106: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: password_reset_tokens
E   [SQL: DELETE FROM password_reset_tokens WHERE email LIKE 'reset_%@example.com']
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)</error></testcase><testcase classname="tests.unit.test_database_models_comprehensive.TestPasswordResetTokenModel" name="test_password_reset_token_usage" time="0.010"><error message="failed on setup with &quot;sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: password_reset_tokens&#10;[SQL: DELETE FROM password_reset_tokens WHERE email LIKE 'reset_%@example.com']&#10;(Background on this error at: https://sqlalche.me/e/20/e3q8)&quot;">..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:177: in execute
    self._adapt_connection._handle_exception(error)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:337: in _handle_exception
    raise error
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:159: in execute
    self.await_(_cursor.execute(operation, parameters))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:48: in execute
    await self._execute(self._cursor.execute, sql, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:40: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:133: in _execute
    return await future
           ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:106: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.OperationalError: no such table: password_reset_tokens

The above exception was the direct cause of the following exception:
auth_service\tests\unit\test_database_models_comprehensive.py:492: in setup_method
    await session.execute(text("DELETE FROM password_reset_tokens WHERE email LIKE 'reset_%@example.com'"))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\ext\asyncio\session.py:463: in execute
    result = await greenlet_spawn(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:201: in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\session.py:2365: in execute
    return self._execute_internal(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\session.py:2260: in _execute_internal
    result = conn.execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1419: in execute
    return meth(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\sql\elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1846: in _execute_context
    return self._exec_single_context(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:177: in execute
    self._adapt_connection._handle_exception(error)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:337: in _handle_exception
    raise error
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:159: in execute
    self.await_(_cursor.execute(operation, parameters))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:48: in execute
    await self._execute(self._cursor.execute, sql, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:40: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:133: in _execute
    return await future
           ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:106: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: password_reset_tokens
E   [SQL: DELETE FROM password_reset_tokens WHERE email LIKE 'reset_%@example.com']
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)</error></testcase><testcase classname="tests.unit.test_database_models_comprehensive.TestPasswordResetTokenModel" name="test_password_reset_token_uniqueness" time="0.009"><error message="failed on setup with &quot;sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: password_reset_tokens&#10;[SQL: DELETE FROM password_reset_tokens WHERE email LIKE 'reset_%@example.com']&#10;(Background on this error at: https://sqlalche.me/e/20/e3q8)&quot;">..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:177: in execute
    self._adapt_connection._handle_exception(error)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:337: in _handle_exception
    raise error
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:159: in execute
    self.await_(_cursor.execute(operation, parameters))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:48: in execute
    await self._execute(self._cursor.execute, sql, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:40: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:133: in _execute
    return await future
           ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:106: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.OperationalError: no such table: password_reset_tokens

The above exception was the direct cause of the following exception:
auth_service\tests\unit\test_database_models_comprehensive.py:492: in setup_method
    await session.execute(text("DELETE FROM password_reset_tokens WHERE email LIKE 'reset_%@example.com'"))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\ext\asyncio\session.py:463: in execute
    result = await greenlet_spawn(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:201: in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\session.py:2365: in execute
    return self._execute_internal(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\session.py:2260: in _execute_internal
    result = conn.execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1419: in execute
    return meth(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\sql\elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1846: in _execute_context
    return self._exec_single_context(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:177: in execute
    self._adapt_connection._handle_exception(error)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:337: in _handle_exception
    raise error
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:159: in execute
    self.await_(_cursor.execute(operation, parameters))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:48: in execute
    await self._execute(self._cursor.execute, sql, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:40: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:133: in _execute
    return await future
           ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:106: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: password_reset_tokens
E   [SQL: DELETE FROM password_reset_tokens WHERE email LIKE 'reset_%@example.com']
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)</error></testcase><testcase classname="tests.unit.test_database_models_comprehensive.TestDatabaseModelIntegration" name="test_user_session_audit_integration" time="0.009"><error message="failed on setup with &quot;sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: auth_audit_logs&#10;[SQL: DELETE FROM auth_audit_logs WHERE event_type LIKE 'integration_%']&#10;(Background on this error at: https://sqlalche.me/e/20/e3q8)&quot;">..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:177: in execute
    self._adapt_connection._handle_exception(error)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:337: in _handle_exception
    raise error
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:159: in execute
    self.await_(_cursor.execute(operation, parameters))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:48: in execute
    await self._execute(self._cursor.execute, sql, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:40: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:133: in _execute
    return await future
           ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:106: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.OperationalError: no such table: auth_audit_logs

The above exception was the direct cause of the following exception:
auth_service\tests\unit\test_database_models_comprehensive.py:616: in setup_method
    await session.execute(text("DELETE FROM auth_audit_logs WHERE event_type LIKE 'integration_%'"))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\ext\asyncio\session.py:463: in execute
    result = await greenlet_spawn(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:201: in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\session.py:2365: in execute
    return self._execute_internal(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\session.py:2260: in _execute_internal
    result = conn.execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1419: in execute
    return meth(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\sql\elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1846: in _execute_context
    return self._exec_single_context(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:177: in execute
    self._adapt_connection._handle_exception(error)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:337: in _handle_exception
    raise error
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:159: in execute
    self.await_(_cursor.execute(operation, parameters))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:48: in execute
    await self._execute(self._cursor.execute, sql, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:40: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:133: in _execute
    return await future
           ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:106: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: auth_audit_logs
E   [SQL: DELETE FROM auth_audit_logs WHERE event_type LIKE 'integration_%']
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)</error></testcase><testcase classname="tests.unit.test_database_models_comprehensive.TestDatabaseModelIntegration" name="test_user_password_reset_integration" time="0.008"><error message="failed on setup with &quot;sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: auth_audit_logs&#10;[SQL: DELETE FROM auth_audit_logs WHERE event_type LIKE 'integration_%']&#10;(Background on this error at: https://sqlalche.me/e/20/e3q8)&quot;">..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:177: in execute
    self._adapt_connection._handle_exception(error)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:337: in _handle_exception
    raise error
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:159: in execute
    self.await_(_cursor.execute(operation, parameters))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:48: in execute
    await self._execute(self._cursor.execute, sql, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:40: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:133: in _execute
    return await future
           ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:106: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.OperationalError: no such table: auth_audit_logs

The above exception was the direct cause of the following exception:
auth_service\tests\unit\test_database_models_comprehensive.py:616: in setup_method
    await session.execute(text("DELETE FROM auth_audit_logs WHERE event_type LIKE 'integration_%'"))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\ext\asyncio\session.py:463: in execute
    result = await greenlet_spawn(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:201: in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\session.py:2365: in execute
    return self._execute_internal(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\session.py:2260: in _execute_internal
    result = conn.execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1419: in execute
    return meth(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\sql\elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1846: in _execute_context
    return self._exec_single_context(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:177: in execute
    self._adapt_connection._handle_exception(error)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:337: in _handle_exception
    raise error
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:159: in execute
    self.await_(_cursor.execute(operation, parameters))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:48: in execute
    await self._execute(self._cursor.execute, sql, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:40: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:133: in _execute
    return await future
           ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:106: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: auth_audit_logs
E   [SQL: DELETE FROM auth_audit_logs WHERE event_type LIKE 'integration_%']
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)</error></testcase><testcase classname="tests.unit.test_database_models_comprehensive.TestDatabaseModelIntegration" name="test_model_cascade_behavior" time="0.009"><error message="failed on setup with &quot;sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: auth_audit_logs&#10;[SQL: DELETE FROM auth_audit_logs WHERE event_type LIKE 'integration_%']&#10;(Background on this error at: https://sqlalche.me/e/20/e3q8)&quot;">..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:177: in execute
    self._adapt_connection._handle_exception(error)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:337: in _handle_exception
    raise error
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:159: in execute
    self.await_(_cursor.execute(operation, parameters))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:48: in execute
    await self._execute(self._cursor.execute, sql, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:40: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:133: in _execute
    return await future
           ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:106: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.OperationalError: no such table: auth_audit_logs

The above exception was the direct cause of the following exception:
auth_service\tests\unit\test_database_models_comprehensive.py:616: in setup_method
    await session.execute(text("DELETE FROM auth_audit_logs WHERE event_type LIKE 'integration_%'"))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\ext\asyncio\session.py:463: in execute
    result = await greenlet_spawn(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:201: in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\session.py:2365: in execute
    return self._execute_internal(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\session.py:2260: in _execute_internal
    result = conn.execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1419: in execute
    return meth(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\sql\elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1846: in _execute_context
    return self._exec_single_context(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:177: in execute
    self._adapt_connection._handle_exception(error)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:337: in _handle_exception
    raise error
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:159: in execute
    self.await_(_cursor.execute(operation, parameters))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:48: in execute
    await self._execute(self._cursor.execute, sql, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:40: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:133: in _execute
    return await future
           ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:106: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: auth_audit_logs
E   [SQL: DELETE FROM auth_audit_logs WHERE event_type LIKE 'integration_%']
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)</error></testcase><testcase classname="tests.unit.test_database_models_comprehensive.TestDatabaseModelConstraintsAndEdgeCases" name="test_email_case_sensitivity" time="0.008"><error message="failed on setup with &quot;sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: auth_users&#10;[SQL: DELETE FROM auth_users WHERE email LIKE 'edge_%@example.com']&#10;(Background on this error at: https://sqlalche.me/e/20/e3q8)&quot;">..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:177: in execute
    self._adapt_connection._handle_exception(error)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:337: in _handle_exception
    raise error
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:159: in execute
    self.await_(_cursor.execute(operation, parameters))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:48: in execute
    await self._execute(self._cursor.execute, sql, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:40: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:133: in _execute
    return await future
           ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:106: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.OperationalError: no such table: auth_users

The above exception was the direct cause of the following exception:
auth_service\tests\unit\test_database_models_comprehensive.py:746: in setup_method
    await session.execute(text("DELETE FROM auth_users WHERE email LIKE 'edge_%@example.com'"))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\ext\asyncio\session.py:463: in execute
    result = await greenlet_spawn(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:201: in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\session.py:2365: in execute
    return self._execute_internal(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\session.py:2260: in _execute_internal
    result = conn.execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1419: in execute
    return meth(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\sql\elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1846: in _execute_context
    return self._exec_single_context(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:177: in execute
    self._adapt_connection._handle_exception(error)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:337: in _handle_exception
    raise error
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:159: in execute
    self.await_(_cursor.execute(operation, parameters))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:48: in execute
    await self._execute(self._cursor.execute, sql, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:40: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:133: in _execute
    return await future
           ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:106: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: auth_users
E   [SQL: DELETE FROM auth_users WHERE email LIKE 'edge_%@example.com']
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)</error></testcase><testcase classname="tests.unit.test_database_models_comprehensive.TestDatabaseModelConstraintsAndEdgeCases" name="test_long_text_fields" time="0.007"><error message="failed on setup with &quot;sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: auth_users&#10;[SQL: DELETE FROM auth_users WHERE email LIKE 'edge_%@example.com']&#10;(Background on this error at: https://sqlalche.me/e/20/e3q8)&quot;">..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:177: in execute
    self._adapt_connection._handle_exception(error)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:337: in _handle_exception
    raise error
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:159: in execute
    self.await_(_cursor.execute(operation, parameters))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:48: in execute
    await self._execute(self._cursor.execute, sql, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:40: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:133: in _execute
    return await future
           ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:106: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.OperationalError: no such table: auth_users

The above exception was the direct cause of the following exception:
auth_service\tests\unit\test_database_models_comprehensive.py:746: in setup_method
    await session.execute(text("DELETE FROM auth_users WHERE email LIKE 'edge_%@example.com'"))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\ext\asyncio\session.py:463: in execute
    result = await greenlet_spawn(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:201: in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\session.py:2365: in execute
    return self._execute_internal(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\session.py:2260: in _execute_internal
    result = conn.execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1419: in execute
    return meth(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\sql\elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1846: in _execute_context
    return self._exec_single_context(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:177: in execute
    self._adapt_connection._handle_exception(error)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:337: in _handle_exception
    raise error
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:159: in execute
    self.await_(_cursor.execute(operation, parameters))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:48: in execute
    await self._execute(self._cursor.execute, sql, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:40: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:133: in _execute
    return await future
           ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:106: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: auth_users
E   [SQL: DELETE FROM auth_users WHERE email LIKE 'edge_%@example.com']
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)</error></testcase><testcase classname="tests.unit.test_database_models_comprehensive.TestDatabaseModelConstraintsAndEdgeCases" name="test_null_handling" time="0.007"><error message="failed on setup with &quot;sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: auth_users&#10;[SQL: DELETE FROM auth_users WHERE email LIKE 'edge_%@example.com']&#10;(Background on this error at: https://sqlalche.me/e/20/e3q8)&quot;">..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:177: in execute
    self._adapt_connection._handle_exception(error)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:337: in _handle_exception
    raise error
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:159: in execute
    self.await_(_cursor.execute(operation, parameters))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:48: in execute
    await self._execute(self._cursor.execute, sql, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:40: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:133: in _execute
    return await future
           ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:106: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.OperationalError: no such table: auth_users

The above exception was the direct cause of the following exception:
auth_service\tests\unit\test_database_models_comprehensive.py:746: in setup_method
    await session.execute(text("DELETE FROM auth_users WHERE email LIKE 'edge_%@example.com'"))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\ext\asyncio\session.py:463: in execute
    result = await greenlet_spawn(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:201: in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\session.py:2365: in execute
    return self._execute_internal(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\session.py:2260: in _execute_internal
    result = conn.execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1419: in execute
    return meth(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\sql\elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1846: in _execute_context
    return self._exec_single_context(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:177: in execute
    self._adapt_connection._handle_exception(error)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:337: in _handle_exception
    raise error
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:159: in execute
    self.await_(_cursor.execute(operation, parameters))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:48: in execute
    await self._execute(self._cursor.execute, sql, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:40: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:133: in _execute
    return await future
           ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:106: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: auth_users
E   [SQL: DELETE FROM auth_users WHERE email LIKE 'edge_%@example.com']
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)</error></testcase><testcase classname="tests.unit.test_database_models_comprehensive.TestDatabaseModelConstraintsAndEdgeCases" name="test_timezone_handling" time="0.008"><error message="failed on setup with &quot;sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: auth_users&#10;[SQL: DELETE FROM auth_users WHERE email LIKE 'edge_%@example.com']&#10;(Background on this error at: https://sqlalche.me/e/20/e3q8)&quot;">..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:177: in execute
    self._adapt_connection._handle_exception(error)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:337: in _handle_exception
    raise error
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:159: in execute
    self.await_(_cursor.execute(operation, parameters))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:48: in execute
    await self._execute(self._cursor.execute, sql, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:40: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:133: in _execute
    return await future
           ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:106: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.OperationalError: no such table: auth_users

The above exception was the direct cause of the following exception:
auth_service\tests\unit\test_database_models_comprehensive.py:746: in setup_method
    await session.execute(text("DELETE FROM auth_users WHERE email LIKE 'edge_%@example.com'"))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\ext\asyncio\session.py:463: in execute
    result = await greenlet_spawn(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:201: in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\session.py:2365: in execute
    return self._execute_internal(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\session.py:2260: in _execute_internal
    result = conn.execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1419: in execute
    return meth(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\sql\elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1846: in _execute_context
    return self._exec_single_context(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:177: in execute
    self._adapt_connection._handle_exception(error)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:337: in _handle_exception
    raise error
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:159: in execute
    self.await_(_cursor.execute(operation, parameters))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:48: in execute
    await self._execute(self._cursor.execute, sql, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:40: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:133: in _execute
    return await future
           ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:106: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: auth_users
E   [SQL: DELETE FROM auth_users WHERE email LIKE 'edge_%@example.com']
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)</error></testcase><testcase classname="tests.unit.test_database_connection_comprehensive.TestAuthDatabaseConnectionInitialization" name="test_database_connection_initialization" time="0.053" /><testcase classname="tests.unit.test_database_connection_comprehensive.TestAuthDatabaseConnectionInitialization" name="test_database_connection_idempotent_initialization" time="0.047" /><testcase classname="tests.unit.test_database_connection_comprehensive.TestAuthDatabaseConnectionInitialization" name="test_database_connection_environment_detection" time="0.005" /><testcase classname="tests.unit.test_database_connection_comprehensive.TestAuthDatabaseConnectionInitialization" name="test_database_connection_test_mode" time="0.045" /><testcase classname="tests.unit.test_database_connection_comprehensive.TestAuthDatabaseConnectionInitialization" name="test_database_connection_timeout_handling" time="0.043" /><testcase classname="tests.unit.test_database_connection_comprehensive.TestAuthDatabaseConnectionInitialization" name="test_database_connection_initialization_failure" time="0.008"><failure message="AttributeError: &lt;module 'auth_service.auth_core.database.connection' from 'C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\auth_service\\auth_core\\database\\connection.py'&gt; does not have the attribute 'AuthConfig'">auth_service\tests\unit\test_database_connection_comprehensive.py:127: in test_database_connection_initialization_failure
    with patch('auth_service.auth_core.database.connection.AuthConfig') as mock_config:
..\..\..\..\miniconda3\Lib\unittest\mock.py:1458: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
..\..\..\..\miniconda3\Lib\unittest\mock.py:1431: in get_original
    raise AttributeError(
E   AttributeError: &lt;module 'auth_service.auth_core.database.connection' from 'C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\auth_service\\auth_core\\database\\connection.py'&gt; does not have the attribute 'AuthConfig'</failure></testcase><testcase classname="tests.unit.test_database_connection_comprehensive.TestAuthDatabaseConnectionSessionManagement" name="test_get_session_context_manager" time="0.008" /><testcase classname="tests.unit.test_database_connection_comprehensive.TestAuthDatabaseConnectionSessionManagement" name="test_session_transaction_commit" time="0.010"><failure message="sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: auth_users&#10;[SQL: INSERT INTO auth_users (id, email, full_name, hashed_password, auth_provider, provider_user_id, is_active, is_verified, created_at, updated_at, last_login_at, failed_login_attempts, locked_until) VALUES (?, ?, ?, ?, ?, ?, ?, ?, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, ?, ?, ?) RETURNING created_at, updated_at]&#10;[parameters: ('b071e995-aa9d-4cd0-a6f6-b78e8f32f01d', 'session_commit_test@example.com', None, None, 'local', None, 1, 0, None, 0, None)]&#10;(Background on this error at: https://sqlalche.me/e/20/e3q8)">..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:177: in execute
    self._adapt_connection._handle_exception(error)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:337: in _handle_exception
    raise error
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:159: in execute
    self.await_(_cursor.execute(operation, parameters))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:48: in execute
    await self._execute(self._cursor.execute, sql, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:40: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:133: in _execute
    return await future
           ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:106: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.OperationalError: no such table: auth_users

The above exception was the direct cause of the following exception:
auth_service\tests\unit\test_database_connection_comprehensive.py:170: in test_session_transaction_commit
    await session.commit()
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\ext\asyncio\session.py:1014: in commit
    await greenlet_spawn(self.sync_session.commit)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\session.py:2032: in commit
    trans.commit(_to_root=True)
&lt;string&gt;:2: in commit
    ???
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\state_changes.py:137: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\session.py:1313: in commit
    self._prepare_impl()
&lt;string&gt;:2: in _prepare_impl
    ???
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\state_changes.py:137: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\session.py:1288: in _prepare_impl
    self.session.flush()
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\session.py:4345: in flush
    self._flush(objects)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\session.py:4480: in _flush
    with util.safe_reraise():
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\session.py:4441: in _flush
    flush_context.execute()
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\unitofwork.py:466: in execute
    rec.execute(self)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\persistence.py:93: in save_obj
    _emit_insert_statements(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\persistence.py:1233: in _emit_insert_statements
    result = connection.execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1419: in execute
    return meth(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\sql\elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1846: in _execute_context
    return self._exec_single_context(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:177: in execute
    self._adapt_connection._handle_exception(error)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:337: in _handle_exception
    raise error
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:159: in execute
    self.await_(_cursor.execute(operation, parameters))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:48: in execute
    await self._execute(self._cursor.execute, sql, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:40: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:133: in _execute
    return await future
           ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:106: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: auth_users
E   [SQL: INSERT INTO auth_users (id, email, full_name, hashed_password, auth_provider, provider_user_id, is_active, is_verified, created_at, updated_at, last_login_at, failed_login_attempts, locked_until) VALUES (?, ?, ?, ?, ?, ?, ?, ?, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, ?, ?, ?) RETURNING created_at, updated_at]
E   [parameters: ('b071e995-aa9d-4cd0-a6f6-b78e8f32f01d', 'session_commit_test@example.com', None, None, 'local', None, 1, 0, None, 0, None)]
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)</failure></testcase><testcase classname="tests.unit.test_database_connection_comprehensive.TestAuthDatabaseConnectionSessionManagement" name="test_session_transaction_rollback" time="0.015"><failure message="assert 'Test error to trigger rollback' in &quot;(sqlite3.OperationalError) no such table: auth_users\n[SQL: INSERT INTO auth_users (id, email, full_name, hashed_password, auth_provider, provider_user_id, is_active, is_verified, created_at, updated_at, last_login_at, failed_login_attempts, locked_until) VALUES (?, ?, ?, ?, ?, ?, ?, ?, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, ?, ?, ?) RETURNING created_at, updated_at]\n[parameters: ('31be6b5b-0d36-4e1f-91a8-b56622b44cd8', 'session_rollback_test@example.com', None, None, 'local', None, 1, 0, None, 0, None)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)&quot;&#10; +  where &quot;(sqlite3.OperationalError) no such table: auth_users\n[SQL: INSERT INTO auth_users (id, email, full_name, hashed_password, auth_provider, provider_user_id, is_active, is_verified, created_at, updated_at, last_login_at, failed_login_attempts, locked_until) VALUES (?, ?, ?, ?, ?, ?, ?, ?, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, ?, ?, ?) RETURNING created_at, updated_at]\n[parameters: ('31be6b5b-0d36-4e1f-91a8-b56622b44cd8', 'session_rollback_test@example.com', None, None, 'local', None, 1, 0, None, 0, None)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)&quot; = str(OperationalError('(sqlite3.OperationalError) no such table: auth_users'))">..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:177: in execute
    self._adapt_connection._handle_exception(error)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:337: in _handle_exception
    raise error
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:159: in execute
    self.await_(_cursor.execute(operation, parameters))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:48: in execute
    await self._execute(self._cursor.execute, sql, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:40: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:133: in _execute
    return await future
           ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:106: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.OperationalError: no such table: auth_users

The above exception was the direct cause of the following exception:
auth_service\tests\unit\test_database_connection_comprehensive.py:193: in test_session_transaction_rollback
    await session.flush()  # Get ID without committing
    ^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\ext\asyncio\session.py:801: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\session.py:4345: in flush
    self._flush(objects)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\session.py:4480: in _flush
    with util.safe_reraise():
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\session.py:4441: in _flush
    flush_context.execute()
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\unitofwork.py:466: in execute
    rec.execute(self)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\persistence.py:93: in save_obj
    _emit_insert_statements(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\persistence.py:1233: in _emit_insert_statements
    result = connection.execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1419: in execute
    return meth(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\sql\elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1846: in _execute_context
    return self._exec_single_context(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:177: in execute
    self._adapt_connection._handle_exception(error)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:337: in _handle_exception
    raise error
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:159: in execute
    self.await_(_cursor.execute(operation, parameters))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:48: in execute
    await self._execute(self._cursor.execute, sql, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:40: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:133: in _execute
    return await future
           ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:106: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: auth_users
E   [SQL: INSERT INTO auth_users (id, email, full_name, hashed_password, auth_provider, provider_user_id, is_active, is_verified, created_at, updated_at, last_login_at, failed_login_attempts, locked_until) VALUES (?, ?, ?, ?, ?, ?, ?, ?, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, ?, ?, ?) RETURNING created_at, updated_at]
E   [parameters: ('31be6b5b-0d36-4e1f-91a8-b56622b44cd8', 'session_rollback_test@example.com', None, None, 'local', None, 1, 0, None, 0, None)]
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)

During handling of the above exception, another exception occurred:
auth_service\tests\unit\test_database_connection_comprehensive.py:199: in test_session_transaction_rollback
    assert "Test error to trigger rollback" in str(e)
E   assert 'Test error to trigger rollback' in "(sqlite3.OperationalError) no such table: auth_users\n[SQL: INSERT INTO auth_users (id, email, full_name, hashed_password, auth_provider, provider_user_id, is_active, is_verified, created_at, updated_at, last_login_at, failed_login_attempts, locked_until) VALUES (?, ?, ?, ?, ?, ?, ?, ?, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, ?, ?, ?) RETURNING created_at, updated_at]\n[parameters: ('31be6b5b-0d36-4e1f-91a8-b56622b44cd8', 'session_rollback_test@example.com', None, None, 'local', None, 1, 0, None, 0, None)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)"
E    +  where "(sqlite3.OperationalError) no such table: auth_users\n[SQL: INSERT INTO auth_users (id, email, full_name, hashed_password, auth_provider, provider_user_id, is_active, is_verified, created_at, updated_at, last_login_at, failed_login_attempts, locked_until) VALUES (?, ?, ?, ?, ?, ?, ?, ?, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, ?, ?, ?) RETURNING created_at, updated_at]\n[parameters: ('31be6b5b-0d36-4e1f-91a8-b56622b44cd8', 'session_rollback_test@example.com', None, None, 'local', None, 1, 0, None, 0, None)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)" = str(OperationalError('(sqlite3.OperationalError) no such table: auth_users'))</failure></testcase><testcase classname="tests.unit.test_database_connection_comprehensive.TestAuthDatabaseConnectionSessionManagement" name="test_session_isolation" time="0.008"><failure message="sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: auth_users&#10;[SQL: INSERT INTO auth_users (id, email, full_name, hashed_password, auth_provider, provider_user_id, is_active, is_verified, created_at, updated_at, last_login_at, failed_login_attempts, locked_until) VALUES (?, ?, ?, ?, ?, ?, ?, ?, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, ?, ?, ?) RETURNING created_at, updated_at]&#10;[parameters: ('3c513765-c2b0-4f2f-93a5-a0f3d785853b', 'session_isolation_test@example.com', None, None, 'local', None, 1, 0, None, 0, None)]&#10;(Background on this error at: https://sqlalche.me/e/20/e3q8)">..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:177: in execute
    self._adapt_connection._handle_exception(error)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:337: in _handle_exception
    raise error
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:159: in execute
    self.await_(_cursor.execute(operation, parameters))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:48: in execute
    await self._execute(self._cursor.execute, sql, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:40: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:133: in _execute
    return await future
           ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:106: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.OperationalError: no such table: auth_users

The above exception was the direct cause of the following exception:
auth_service\tests\unit\test_database_connection_comprehensive.py:214: in test_session_isolation
    await session1.flush()  # Don't commit yet
    ^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\ext\asyncio\session.py:801: in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\session.py:4345: in flush
    self._flush(objects)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\session.py:4480: in _flush
    with util.safe_reraise():
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\session.py:4441: in _flush
    flush_context.execute()
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\unitofwork.py:466: in execute
    rec.execute(self)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\persistence.py:93: in save_obj
    _emit_insert_statements(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\persistence.py:1233: in _emit_insert_statements
    result = connection.execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1419: in execute
    return meth(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\sql\elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1846: in _execute_context
    return self._exec_single_context(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:177: in execute
    self._adapt_connection._handle_exception(error)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:337: in _handle_exception
    raise error
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:159: in execute
    self.await_(_cursor.execute(operation, parameters))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:48: in execute
    await self._execute(self._cursor.execute, sql, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:40: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:133: in _execute
    return await future
           ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:106: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: auth_users
E   [SQL: INSERT INTO auth_users (id, email, full_name, hashed_password, auth_provider, provider_user_id, is_active, is_verified, created_at, updated_at, last_login_at, failed_login_attempts, locked_until) VALUES (?, ?, ?, ?, ?, ?, ?, ?, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, ?, ?, ?) RETURNING created_at, updated_at]
E   [parameters: ('3c513765-c2b0-4f2f-93a5-a0f3d785853b', 'session_isolation_test@example.com', None, None, 'local', None, 1, 0, None, 0, None)]
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)</failure></testcase><testcase classname="tests.unit.test_database_connection_comprehensive.TestAuthDatabaseConnectionSessionManagement" name="test_session_concurrent_access" time="0.015"><failure message="sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: auth_users&#10;[SQL: INSERT INTO auth_users (id, email, full_name, hashed_password, auth_provider, provider_user_id, is_active, is_verified, created_at, updated_at, last_login_at, failed_login_attempts, locked_until) VALUES (?, ?, ?, ?, ?, ?, ?, ?, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, ?, ?, ?) RETURNING created_at, updated_at]&#10;[parameters: ('ddd77363-873f-4fa8-b67e-500e1cdee77c', 'concurrent_test_3@example.com', None, None, 'local', None, 1, 0, None, 0, None)]&#10;(Background on this error at: https://sqlalche.me/e/20/e3q8)">..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:177: in execute
    self._adapt_connection._handle_exception(error)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:337: in _handle_exception
    raise error
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:159: in execute
    self.await_(_cursor.execute(operation, parameters))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:48: in execute
    await self._execute(self._cursor.execute, sql, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:40: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:133: in _execute
    return await future
           ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:106: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.OperationalError: no such table: auth_users

The above exception was the direct cause of the following exception:
auth_service\tests\unit\test_database_connection_comprehensive.py:249: in test_session_concurrent_access
    user_ids = await asyncio.gather(
auth_service\tests\unit\test_database_connection_comprehensive.py:245: in create_user
    await session.commit()
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\ext\asyncio\session.py:1014: in commit
    await greenlet_spawn(self.sync_session.commit)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:203: in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\session.py:2032: in commit
    trans.commit(_to_root=True)
&lt;string&gt;:2: in commit
    ???
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\state_changes.py:137: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\session.py:1313: in commit
    self._prepare_impl()
&lt;string&gt;:2: in _prepare_impl
    ???
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\state_changes.py:137: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\session.py:1288: in _prepare_impl
    self.session.flush()
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\session.py:4345: in flush
    self._flush(objects)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\session.py:4480: in _flush
    with util.safe_reraise():
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\session.py:4441: in _flush
    flush_context.execute()
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\unitofwork.py:466: in execute
    rec.execute(self)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\persistence.py:93: in save_obj
    _emit_insert_statements(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\orm\persistence.py:1233: in _emit_insert_statements
    result = connection.execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1419: in execute
    return meth(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\sql\elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1846: in _execute_context
    return self._exec_single_context(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:177: in execute
    self._adapt_connection._handle_exception(error)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:337: in _handle_exception
    raise error
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:159: in execute
    self.await_(_cursor.execute(operation, parameters))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:48: in execute
    await self._execute(self._cursor.execute, sql, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:40: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:133: in _execute
    return await future
           ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:106: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: auth_users
E   [SQL: INSERT INTO auth_users (id, email, full_name, hashed_password, auth_provider, provider_user_id, is_active, is_verified, created_at, updated_at, last_login_at, failed_login_attempts, locked_until) VALUES (?, ?, ?, ?, ?, ?, ?, ?, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, ?, ?, ?) RETURNING created_at, updated_at]
E   [parameters: ('ddd77363-873f-4fa8-b67e-500e1cdee77c', 'concurrent_test_3@example.com', None, None, 'local', None, 1, 0, None, 0, None)]
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)</failure></testcase><testcase classname="tests.unit.test_database_connection_comprehensive.TestAuthDatabaseConnectionSessionManagement" name="test_get_db_session_dependency" time="0.008" /><testcase classname="tests.unit.test_database_connection_comprehensive.TestAuthDatabaseConnectionPoolingAndPerformance" name="test_connection_pooling_multiple_sessions" time="0.021" /><testcase classname="tests.unit.test_database_connection_comprehensive.TestAuthDatabaseConnectionPoolingAndPerformance" name="test_connection_reuse" time="0.015" /><testcase classname="tests.unit.test_database_connection_comprehensive.TestAuthDatabaseConnectionPoolingAndPerformance" name="test_session_cleanup_on_error" time="0.008" /><testcase classname="tests.unit.test_database_connection_comprehensive.TestAuthDatabaseConnectionHealthAndMonitoring" name="test_test_connection" time="0.009" /><testcase classname="tests.unit.test_database_connection_comprehensive.TestAuthDatabaseConnectionHealthAndMonitoring" name="test_test_connection_with_timeout" time="0.008" /><testcase classname="tests.unit.test_database_connection_comprehensive.TestAuthDatabaseConnectionHealthAndMonitoring" name="test_is_ready" time="0.009" /><testcase classname="tests.unit.test_database_connection_comprehensive.TestAuthDatabaseConnectionHealthAndMonitoring" name="test_is_ready_with_timeout" time="0.008" /><testcase classname="tests.unit.test_database_connection_comprehensive.TestAuthDatabaseConnectionHealthAndMonitoring" name="test_get_status" time="0.004"><failure message="AttributeError: type object 'AuthDatabaseManager' has no attribute 'is_cloud_sql_environment'">auth_service\tests\unit\test_database_connection_comprehensive.py:408: in test_get_status
    status = auth_db.get_status()
             ^^^^^^^^^^^^^^^^^^^^
auth_service\auth_core\database\connection.py:398: in get_status
    "is_cloud_sql": AuthDatabaseManager.is_cloud_sql_environment(),
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: type object 'AuthDatabaseManager' has no attribute 'is_cloud_sql_environment'</failure></testcase><testcase classname="tests.unit.test_database_connection_comprehensive.TestAuthDatabaseConnectionHealthAndMonitoring" name="test_get_connection_health" time="0.011"><failure message="AssertionError: assert 'failed' == 'passed'&#10;  &#10;  - passed&#10;  + failed">auth_service\tests\unit\test_database_connection_comprehensive.py:433: in test_get_connection_health
    assert health["connectivity_test"] == "passed"
E   AssertionError: assert 'failed' == 'passed'
E     
E     - passed
E     + failed</failure></testcase><testcase classname="tests.unit.test_database_connection_comprehensive.TestAuthDatabaseConnectionHealthAndMonitoring" name="test_get_connection_health_uninitialized" time="0.003" /><testcase classname="tests.unit.test_database_connection_comprehensive.TestAuthDatabaseConnectionErrorHandling" name="test_mock_engine_handling" time="0.005" /><testcase classname="tests.unit.test_database_connection_comprehensive.TestAuthDatabaseConnectionErrorHandling" name="test_connection_validation_with_mock" time="0.004" /><testcase classname="tests.unit.test_database_connection_comprehensive.TestAuthDatabaseConnectionErrorHandling" name="test_cleanup_partial_initialization" time="0.005" /><testcase classname="tests.unit.test_database_connection_comprehensive.TestAuthDatabaseConnectionErrorHandling" name="test_close_with_timeout" time="0.005" /><testcase classname="tests.unit.test_database_connection_comprehensive.TestAuthDatabaseConnectionErrorHandling" name="test_close_already_closed" time="0.003" /><testcase classname="tests.unit.test_database_connection_comprehensive.TestAuthDatabaseConnectionErrorHandling" name="test_close_with_dispose_error" time="0.006" /><testcase classname="tests.unit.test_database_connection_comprehensive.TestAuthDatabaseConnectionErrorHandling" name="test_session_error_handling_edge_cases" time="0.009" /><testcase classname="tests.unit.test_database_connection_comprehensive.TestAuthDatabaseConnectionErrorHandling" name="test_test_connection_failure" time="0.010"><failure message="pytest.PytestUnraisableExceptionWarning: Exception ignored in: &lt;coroutine object AsyncMockMixin._execute_mock_call at 0x00000246AB364140&gt;&#10;Enable tracemalloc to get traceback where the object was allocated.&#10;See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.">..\..\..\..\miniconda3\Lib\warnings.py:555: in _warn_unawaited_coroutine
    warn(msg, category=RuntimeWarning, stacklevel=2, source=coro)
E   RuntimeWarning: coroutine 'AsyncMockMixin._execute_mock_call' was never awaited

The above exception was the direct cause of the following exception:
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\_pytest\runner.py:344: in from_call
    result: TResult | None = func()
                             ^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\_pytest\runner.py:246: in &lt;lambda&gt;
    lambda: runtest_hook(item=item, **kwds), when=when, reraise=reraise
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\pluggy\_hooks.py:512: in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\pluggy\_manager.py:120: in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\_pytest\logging.py:850: in pytest_runtest_call
    yield
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\pluggy\_callers.py:53: in run_old_style_hookwrapper
    return result.get_result()
           ^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\pluggy\_callers.py:38: in run_old_style_hookwrapper
    res = yield
          ^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\_pytest\capture.py:900: in pytest_runtest_call
    return (yield)
            ^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\pluggy\_callers.py:53: in run_old_style_hookwrapper
    return result.get_result()
           ^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\pluggy\_callers.py:38: in run_old_style_hookwrapper
    res = yield
          ^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\pluggy\_callers.py:53: in run_old_style_hookwrapper
    return result.get_result()
           ^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\pluggy\_callers.py:38: in run_old_style_hookwrapper
    res = yield
          ^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\_pytest\skipping.py:263: in pytest_runtest_call
    return (yield)
            ^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\_pytest\unraisableexception.py:158: in pytest_runtest_call
    collect_unraisable(item.config)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\_pytest\unraisableexception.py:79: in collect_unraisable
    raise errors[0]
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\_pytest\unraisableexception.py:67: in collect_unraisable
    warnings.warn(pytest.PytestUnraisableExceptionWarning(msg))
E   pytest.PytestUnraisableExceptionWarning: Exception ignored in: &lt;coroutine object AsyncMockMixin._execute_mock_call at 0x00000246AB364140&gt;
E   Enable tracemalloc to get traceback where the object was allocated.
E   See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.</failure></testcase><testcase classname="tests.unit.test_database_connection_comprehensive.TestAuthDatabaseConnectionErrorHandling" name="test_test_connection_timeout" time="0.008"><failure message="pytest.PytestUnraisableExceptionWarning: Exception ignored in: &lt;coroutine object AsyncMockMixin._execute_mock_call at 0x00000246AB364840&gt;&#10;Enable tracemalloc to get traceback where the object was allocated.&#10;See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.">..\..\..\..\miniconda3\Lib\warnings.py:555: in _warn_unawaited_coroutine
    warn(msg, category=RuntimeWarning, stacklevel=2, source=coro)
E   RuntimeWarning: coroutine 'AsyncMockMixin._execute_mock_call' was never awaited

The above exception was the direct cause of the following exception:
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\_pytest\runner.py:344: in from_call
    result: TResult | None = func()
                             ^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\_pytest\runner.py:246: in &lt;lambda&gt;
    lambda: runtest_hook(item=item, **kwds), when=when, reraise=reraise
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\pluggy\_hooks.py:512: in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\pluggy\_manager.py:120: in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\_pytest\logging.py:850: in pytest_runtest_call
    yield
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\pluggy\_callers.py:53: in run_old_style_hookwrapper
    return result.get_result()
           ^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\pluggy\_callers.py:38: in run_old_style_hookwrapper
    res = yield
          ^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\_pytest\capture.py:900: in pytest_runtest_call
    return (yield)
            ^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\pluggy\_callers.py:53: in run_old_style_hookwrapper
    return result.get_result()
           ^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\pluggy\_callers.py:38: in run_old_style_hookwrapper
    res = yield
          ^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\pluggy\_callers.py:53: in run_old_style_hookwrapper
    return result.get_result()
           ^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\pluggy\_callers.py:38: in run_old_style_hookwrapper
    res = yield
          ^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\_pytest\skipping.py:263: in pytest_runtest_call
    return (yield)
            ^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\_pytest\unraisableexception.py:158: in pytest_runtest_call
    collect_unraisable(item.config)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\_pytest\unraisableexception.py:79: in collect_unraisable
    raise errors[0]
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\_pytest\unraisableexception.py:67: in collect_unraisable
    warnings.warn(pytest.PytestUnraisableExceptionWarning(msg))
E   pytest.PytestUnraisableExceptionWarning: Exception ignored in: &lt;coroutine object AsyncMockMixin._execute_mock_call at 0x00000246AB364840&gt;
E   Enable tracemalloc to get traceback where the object was allocated.
E   See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.</failure></testcase><testcase classname="tests.unit.test_database_connection_comprehensive.TestAuthDatabaseConnectionErrorHandling" name="test_is_ready_timeout" time="0.004" /><testcase classname="tests.unit.test_database_connection_comprehensive.TestAuthDatabaseConnectionTableManagement" name="test_create_tables_idempotent" time="0.060" /><testcase classname="tests.unit.test_database_connection_comprehensive.TestAuthDatabaseConnectionTableManagement" name="test_create_tables_with_mock_engine" time="0.007" /><testcase classname="tests.unit.test_database_connection_comprehensive.TestAuthDatabaseConnectionTableManagement" name="test_table_existence_check" time="0.048"><failure message="sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) near &quot;FROM&quot;: syntax error&#10;[SQL: &#10;                SELECT EXISTS (&#10;                    SELECT FROM information_schema.tables &#10;                    WHERE table_schema = 'public' &#10;                    AND table_name = 'auth_users'&#10;                );&#10;            ]&#10;(Background on this error at: https://sqlalche.me/e/20/e3q8)">..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:177: in execute
    self._adapt_connection._handle_exception(error)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:337: in _handle_exception
    raise error
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:159: in execute
    self.await_(_cursor.execute(operation, parameters))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:48: in execute
    await self._execute(self._cursor.execute, sql, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:40: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:133: in _execute
    return await future
           ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:106: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.OperationalError: near "FROM": syntax error

The above exception was the direct cause of the following exception:
auth_service\tests\unit\test_database_connection_comprehensive.py:635: in test_table_existence_check
    result = await conn.execute(text("""
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\ext\asyncio\engine.py:658: in execute
    result = await greenlet_spawn(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:201: in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1419: in execute
    return meth(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\sql\elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1846: in _execute_context
    return self._exec_single_context(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:177: in execute
    self._adapt_connection._handle_exception(error)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:337: in _handle_exception
    raise error
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:159: in execute
    self.await_(_cursor.execute(operation, parameters))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:48: in execute
    await self._execute(self._cursor.execute, sql, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:40: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:133: in _execute
    return await future
           ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:106: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) near "FROM": syntax error
E   [SQL: 
E                   SELECT EXISTS (
E                       SELECT FROM information_schema.tables 
E                       WHERE table_schema = 'public' 
E                       AND table_name = 'auth_users'
E                   );
E               ]
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)</failure></testcase><testcase classname="tests.unit.test_database_connection_comprehensive.TestAuthDatabaseConnectionCompatibilityAliases" name="test_compatibility_aliases" time="0.001" /><testcase classname="tests.unit.test_database_connection_comprehensive.TestAuthDatabaseConnectionCompatibilityAliases" name="test_global_auth_db_instance" time="0.006" /><testcase classname="tests.unit.test_database_manager_comprehensive.TestAuthDatabaseManagerEngineCreation" name="test_create_async_engine" time="0.009" /><testcase classname="tests.unit.test_database_manager_comprehensive.TestAuthDatabaseManagerEngineCreation" name="test_create_async_engine_with_kwargs" time="0.004"><failure message="TypeError: sqlalchemy.ext.asyncio.engine.create_async_engine() got multiple values for keyword argument 'echo'">auth_service\tests\unit\test_database_manager_comprehensive.py:56: in test_create_async_engine_with_kwargs
    engine = AuthDatabaseManager.create_async_engine(
auth_service\auth_core\database\database_manager.py:31: in create_async_engine
    return create_async_engine(
E   TypeError: sqlalchemy.ext.asyncio.engine.create_async_engine() got multiple values for keyword argument 'echo'</failure></testcase><testcase classname="tests.unit.test_database_manager_comprehensive.TestAuthDatabaseManagerEngineCreation" name="test_create_async_engine_no_url_error" time="0.005" /><testcase classname="tests.unit.test_database_manager_comprehensive.TestAuthDatabaseManagerEngineCreation" name="test_create_async_engine_empty_url_error" time="0.004" /><testcase classname="tests.unit.test_database_manager_comprehensive.TestAuthDatabaseManagerURLConstruction" name="test_get_database_url_normal_mode" time="0.003"><failure message="AssertionError: assert False&#10; +  where False = &lt;built-in method startswith of str object at 0x0000024680E57D20&gt;(('postgresql://', 'postgres://'))&#10; +    where &lt;built-in method startswith of str object at 0x0000024680E57D20&gt; = 'sqlite+aiosqlite:///:memory:'.startswith">auth_service\tests\unit\test_database_manager_comprehensive.py:98: in test_get_database_url_normal_mode
    assert url.startswith(("postgresql://", "postgres://"))
E   AssertionError: assert False
E    +  where False = &lt;built-in method startswith of str object at 0x0000024680E57D20&gt;(('postgresql://', 'postgres://'))
E    +    where &lt;built-in method startswith of str object at 0x0000024680E57D20&gt; = 'sqlite+aiosqlite:///:memory:'.startswith</failure></testcase><testcase classname="tests.unit.test_database_manager_comprehensive.TestAuthDatabaseManagerURLConstruction" name="test_get_database_url_fast_test_mode" time="0.002" /><testcase classname="tests.unit.test_database_manager_comprehensive.TestAuthDatabaseManagerURLConstruction" name="test_get_database_url_environment_variables" time="0.005"><failure message="AssertionError: assert 'postgresql+asyncpg://test_user:test_pass@localhost:5432/test_db' == 'postgresql://test_user:test_pass@localhost:5432/test_db'&#10;  &#10;  - postgresql://test_user:test_pass@localhost:5432/test_db&#10;  + postgresql+asyncpg://test_user:test_pass@localhost:5432/test_db&#10;  ?           ++++++++">auth_service\tests\unit\test_database_manager_comprehensive.py:141: in test_get_database_url_environment_variables
    assert url == "postgresql://test_user:test_pass@localhost:5432/test_db"
E   AssertionError: assert 'postgresql+asyncpg://test_user:test_pass@localhost:5432/test_db' == 'postgresql://test_user:test_pass@localhost:5432/test_db'
E     
E     - postgresql://test_user:test_pass@localhost:5432/test_db
E     + postgresql+asyncpg://test_user:test_pass@localhost:5432/test_db
E     ?           ++++++++</failure></testcase><testcase classname="tests.unit.test_database_manager_comprehensive.TestAuthDatabaseManagerURLConstruction" name="test_get_database_url_validation_failure" time="0.006"><failure message="Failed: DID NOT RAISE &lt;class 'ValueError'&gt;">auth_service\tests\unit\test_database_manager_comprehensive.py:164: in test_get_database_url_validation_failure
    with pytest.raises(ValueError, match="Database configuration error"):
E   Failed: DID NOT RAISE &lt;class 'ValueError'&gt;</failure></testcase><testcase classname="tests.unit.test_database_manager_comprehensive.TestAuthDatabaseManagerURLConstruction" name="test_get_database_url_no_url_generated" time="0.012"><failure message="Failed: DID NOT RAISE &lt;class 'ValueError'&gt;">auth_service\tests\unit\test_database_manager_comprehensive.py:183: in test_get_database_url_no_url_generated
    with pytest.raises(ValueError, match="DatabaseURLBuilder failed to generate URL"):
E   Failed: DID NOT RAISE &lt;class 'ValueError'&gt;</failure></testcase><testcase classname="tests.unit.test_database_manager_comprehensive.TestAuthDatabaseManagerEnvironmentHandling" name="test_environment_detection_development" time="0.005"><failure message="TypeError: 'NoneType' object is not subscriptable">auth_service\tests\unit\test_database_manager_comprehensive.py:208: in test_environment_detection_development
    call_args = mock_builder_class.call_args[0][0]
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: 'NoneType' object is not subscriptable</failure></testcase><testcase classname="tests.unit.test_database_manager_comprehensive.TestAuthDatabaseManagerEnvironmentHandling" name="test_environment_detection_staging" time="0.005"><failure message="ValueError: Database configuration error in staging environment: Missing required variables for staging: POSTGRES_HOST, POSTGRES_USER, POSTGRES_DB, POSTGRES_PASSWORD. DatabaseURLBuilder must be able to construct a valid URL. Check your environment variables.">auth_service\tests\unit\test_database_manager_comprehensive.py:226: in test_environment_detection_staging
    url = AuthDatabaseManager.get_database_url()
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
auth_service\auth_core\database\database_manager.py:72: in get_database_url
    raise ValueError(
E   ValueError: Database configuration error in staging environment: Missing required variables for staging: POSTGRES_HOST, POSTGRES_USER, POSTGRES_DB, POSTGRES_PASSWORD. DatabaseURLBuilder must be able to construct a valid URL. Check your environment variables.</failure></testcase><testcase classname="tests.unit.test_database_manager_comprehensive.TestAuthDatabaseManagerEnvironmentHandling" name="test_environment_detection_production" time="0.004"><failure message="ValueError: Database configuration error in production environment: Missing required variables for production: POSTGRES_HOST, POSTGRES_USER, POSTGRES_DB, POSTGRES_PASSWORD. DatabaseURLBuilder must be able to construct a valid URL. Check your environment variables.">auth_service\tests\unit\test_database_manager_comprehensive.py:247: in test_environment_detection_production
    url = AuthDatabaseManager.get_database_url()
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
auth_service\auth_core\database\database_manager.py:72: in get_database_url
    raise ValueError(
E   ValueError: Database configuration error in production environment: Missing required variables for production: POSTGRES_HOST, POSTGRES_USER, POSTGRES_DB, POSTGRES_PASSWORD. DatabaseURLBuilder must be able to construct a valid URL. Check your environment variables.</failure></testcase><testcase classname="tests.unit.test_database_manager_comprehensive.TestAuthDatabaseManagerEnvironmentHandling" name="test_environment_detection_default" time="0.005"><failure message="TypeError: 'NoneType' object is not subscriptable">auth_service\tests\unit\test_database_manager_comprehensive.py:271: in test_environment_detection_default
    call_args = mock_builder_class.call_args[0][0]
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: 'NoneType' object is not subscriptable</failure></testcase><testcase classname="tests.unit.test_database_manager_comprehensive.TestAuthDatabaseManagerIntegrationWithSharedComponents" name="test_integration_with_database_url_builder" time="0.005" /><testcase classname="tests.unit.test_database_manager_comprehensive.TestAuthDatabaseManagerIntegrationWithSharedComponents" name="test_integration_with_isolated_environment" time="0.005" /><testcase classname="tests.unit.test_database_manager_comprehensive.TestAuthDatabaseManagerIntegrationWithSharedComponents" name="test_url_masking_for_logging" time="0.006"><failure message="AssertionError: expected call not found.&#10;Expected: mask_url_for_logging('postgresql://user:password@host:5432/db')&#10;  Actual: mask_url_for_logging('sqlite+aiosqlite:///:memory:')&#10;&#10;pytest introspection follows:&#10;&#10;Args:&#10;assert ('sqlite+aiosqlite:///:memory:',) == ('postgresql://user:password@host:5432/db',)&#10;  &#10;  At index 0 diff: 'sqlite+aiosqlite:///:memory:' != 'postgresql://user:password@host:5432/db'&#10;  &#10;  Full diff:&#10;    (&#10;  -     'postgresql://user:password@host:5432/db',&#10;  +     'sqlite+aiosqlite:///:memory:',&#10;    )">..\..\..\..\miniconda3\Lib\unittest\mock.py:944: in assert_called_with
    raise AssertionError(_error_message()) from cause
E   AssertionError: expected call not found.
E   Expected: mask_url_for_logging('postgresql://user:password@host:5432/db')
E     Actual: mask_url_for_logging('sqlite+aiosqlite:///:memory:')

During handling of the above exception, another exception occurred:
..\..\..\..\miniconda3\Lib\unittest\mock.py:956: in assert_called_once_with
    return self.assert_called_with(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AssertionError: expected call not found.
E   Expected: mask_url_for_logging('postgresql://user:password@host:5432/db')
E     Actual: mask_url_for_logging('sqlite+aiosqlite:///:memory:')
E   
E   pytest introspection follows:
E   
E   Args:
E   assert ('sqlite+aiosqlite:///:memory:',) == ('postgresql://user:password@host:5432/db',)
E     
E     At index 0 diff: 'sqlite+aiosqlite:///:memory:' != 'postgresql://user:password@host:5432/db'
E     
E     Full diff:
E       (
E     -     'postgresql://user:password@host:5432/db',
E     +     'sqlite+aiosqlite:///:memory:',
E       )

During handling of the above exception, another exception occurred:
auth_service\tests\unit\test_database_manager_comprehensive.py:352: in test_url_masking_for_logging
    mock_mask.assert_called_once_with("postgresql://user:password@host:5432/db")
E   AssertionError: expected call not found.
E   Expected: mask_url_for_logging('postgresql://user:password@host:5432/db')
E     Actual: mask_url_for_logging('sqlite+aiosqlite:///:memory:')
E   
E   pytest introspection follows:
E   
E   Args:
E   assert ('sqlite+aiosqlite:///:memory:',) == ('postgresql://user:password@host:5432/db',)
E     
E     At index 0 diff: 'sqlite+aiosqlite:///:memory:' != 'postgresql://user:password@host:5432/db'
E     
E     Full diff:
E       (
E     -     'postgresql://user:password@host:5432/db',
E     +     'sqlite+aiosqlite:///:memory:',
E       )</failure></testcase><testcase classname="tests.unit.test_database_manager_comprehensive.TestAuthDatabaseManagerErrorHandlingAndEdgeCases" name="test_missing_environment_variables" time="0.003"><failure message="AttributeError: 'NoneType' object has no attribute 'lower'">auth_service\tests\unit\test_database_manager_comprehensive.py:371: in test_missing_environment_variables
    AuthDatabaseManager.get_database_url()
auth_service\auth_core\database\database_manager.py:44: in get_database_url
    fast_test_mode = env.get("AUTH_FAST_TEST_MODE", "false").lower() == "true"
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'NoneType' object has no attribute 'lower'</failure></testcase><testcase classname="tests.unit.test_database_manager_comprehensive.TestAuthDatabaseManagerErrorHandlingAndEdgeCases" name="test_invalid_environment_values" time="0.004"><failure message="Failed: DID NOT RAISE &lt;class 'ValueError'&gt;">auth_service\tests\unit\test_database_manager_comprehensive.py:391: in test_invalid_environment_values
    with pytest.raises(ValueError, match="Database configuration error"):
E   Failed: DID NOT RAISE &lt;class 'ValueError'&gt;</failure></testcase><testcase classname="tests.unit.test_database_manager_comprehensive.TestAuthDatabaseManagerErrorHandlingAndEdgeCases" name="test_database_url_builder_exception" time="0.004"><failure message="Failed: DID NOT RAISE &lt;class 'Exception'&gt;">auth_service\tests\unit\test_database_manager_comprehensive.py:406: in test_database_url_builder_exception
    with pytest.raises(Exception, match="Builder initialization failed"):
E   Failed: DID NOT RAISE &lt;class 'Exception'&gt;</failure></testcase><testcase classname="tests.unit.test_database_manager_comprehensive.TestAuthDatabaseManagerErrorHandlingAndEdgeCases" name="test_fast_test_mode_variations" time="0.007"><failure message="AssertionError: assert 'sqlite+aiosqlite:///:memory:' == 'postgresql://test'&#10;  &#10;  - postgresql://test&#10;  + sqlite+aiosqlite:///:memory:">auth_service\tests\unit\test_database_manager_comprehensive.py:444: in test_fast_test_mode_variations
    assert url == "postgresql://test"
E   AssertionError: assert 'sqlite+aiosqlite:///:memory:' == 'postgresql://test'
E     
E     - postgresql://test
E     + sqlite+aiosqlite:///:memory:</failure></testcase><testcase classname="tests.unit.test_database_manager_comprehensive.TestAuthDatabaseManagerRealWorldScenarios" name="test_engine_creation_full_flow" time="0.013"><failure message="sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such function: version&#10;[SQL: SELECT version()]&#10;(Background on this error at: https://sqlalche.me/e/20/e3q8)">..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:177: in execute
    self._adapt_connection._handle_exception(error)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:337: in _handle_exception
    raise error
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:159: in execute
    self.await_(_cursor.execute(operation, parameters))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:48: in execute
    await self._execute(self._cursor.execute, sql, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:40: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:133: in _execute
    return await future
           ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:106: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.OperationalError: no such function: version

The above exception was the direct cause of the following exception:
auth_service\tests\unit\test_database_manager_comprehensive.py:464: in test_engine_creation_full_flow
    result = await conn.execute(text("SELECT version()"))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\ext\asyncio\engine.py:658: in execute
    result = await greenlet_spawn(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:201: in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1419: in execute
    return meth(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\sql\elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1846: in _execute_context
    return self._exec_single_context(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:177: in execute
    self._adapt_connection._handle_exception(error)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:337: in _handle_exception
    raise error
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:159: in execute
    self.await_(_cursor.execute(operation, parameters))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:48: in execute
    await self._execute(self._cursor.execute, sql, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:40: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:133: in _execute
    return await future
           ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:106: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such function: version
E   [SQL: SELECT version()]
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)</failure></testcase><testcase classname="tests.unit.test_database_manager_comprehensive.TestAuthDatabaseManagerRealWorldScenarios" name="test_multiple_engine_creation" time="0.030" /><testcase classname="tests.unit.test_database_manager_comprehensive.TestAuthDatabaseManagerRealWorldScenarios" name="test_engine_with_custom_configuration" time="0.005"><failure message="TypeError: sqlalchemy.ext.asyncio.engine.create_async_engine() got multiple values for keyword argument 'echo'">auth_service\tests\unit\test_database_manager_comprehensive.py:498: in test_engine_with_custom_configuration
    engine = AuthDatabaseManager.create_async_engine(
auth_service\auth_core\database\database_manager.py:31: in create_async_engine
    return create_async_engine(
E   TypeError: sqlalchemy.ext.asyncio.engine.create_async_engine() got multiple values for keyword argument 'echo'</failure></testcase><testcase classname="tests.unit.test_database_manager_comprehensive.TestAuthDatabaseManagerRealWorldScenarios" name="test_environment_specific_url_construction" time="0.004"><failure message="AssertionError: assert 'postgresql+asyncpg://postgres:postgres@localhost:5432/netra_dev' == 'postgresql://development_url'&#10;  &#10;  - postgresql://development_url&#10;  + postgresql+asyncpg://postgres:postgres@localhost:5432/netra_dev">auth_service\tests\unit\test_database_manager_comprehensive.py:537: in test_environment_specific_url_construction
    assert url == f"postgresql://{env}_url"
E   AssertionError: assert 'postgresql+asyncpg://postgres:postgres@localhost:5432/netra_dev' == 'postgresql://development_url'
E     
E     - postgresql://development_url
E     + postgresql+asyncpg://postgres:postgres@localhost:5432/netra_dev</failure></testcase><testcase classname="tests.unit.test_database_connection_events_comprehensive.TestAuthDatabaseConfig" name="test_auth_database_config_constants" time="0.002" /><testcase classname="tests.unit.test_database_connection_events_comprehensive.TestAuthDatabaseConfig" name="test_auth_database_config_values_reasonable" time="0.001" /><testcase classname="tests.unit.test_database_connection_events_comprehensive.TestGetSettings" name="test_get_settings_with_auth_config" time="0.002"><failure message="AttributeError: &lt;module 'auth_service.auth_core.database.connection_events' from 'C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\auth_service\\auth_core\\database\\connection_events.py'&gt; does not have the attribute 'AuthConfig'">auth_service\tests\unit\test_database_connection_events_comprehensive.py:80: in test_get_settings_with_auth_config
    with patch('auth_service.auth_core.database.connection_events.AuthConfig') as mock_config:
..\..\..\..\miniconda3\Lib\unittest\mock.py:1458: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
..\..\..\..\miniconda3\Lib\unittest\mock.py:1431: in get_original
    raise AttributeError(
E   AttributeError: &lt;module 'auth_service.auth_core.database.connection_events' from 'C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\auth_service\\auth_core\\database\\connection_events.py'&gt; does not have the attribute 'AuthConfig'</failure></testcase><testcase classname="tests.unit.test_database_connection_events_comprehensive.TestGetSettings" name="test_get_settings_with_partial_auth_config" time="0.002"><failure message="AttributeError: &lt;module 'auth_service.auth_core.database.connection_events' from 'C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\auth_service\\auth_core\\database\\connection_events.py'&gt; does not have the attribute 'AuthConfig'">auth_service\tests\unit\test_database_connection_events_comprehensive.py:95: in test_get_settings_with_partial_auth_config
    with patch('auth_service.auth_core.database.connection_events.AuthConfig') as mock_config:
..\..\..\..\miniconda3\Lib\unittest\mock.py:1458: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
..\..\..\..\miniconda3\Lib\unittest\mock.py:1431: in get_original
    raise AttributeError(
E   AttributeError: &lt;module 'auth_service.auth_core.database.connection_events' from 'C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\auth_service\\auth_core\\database\\connection_events.py'&gt; does not have the attribute 'AuthConfig'</failure></testcase><testcase classname="tests.unit.test_database_connection_events_comprehensive.TestGetSettings" name="test_get_settings_import_error" time="0.001"><failure message="AttributeError: &lt;module 'auth_service.auth_core.database.connection_events' from 'C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\auth_service\\auth_core\\database\\connection_events.py'&gt; does not have the attribute 'AuthConfig'">auth_service\tests\unit\test_database_connection_events_comprehensive.py:111: in test_get_settings_import_error
    with patch('auth_service.auth_core.database.connection_events.AuthConfig', side_effect=ImportError):
..\..\..\..\miniconda3\Lib\unittest\mock.py:1458: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
..\..\..\..\miniconda3\Lib\unittest\mock.py:1431: in get_original
    raise AttributeError(
E   AttributeError: &lt;module 'auth_service.auth_core.database.connection_events' from 'C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\auth_service\\auth_core\\database\\connection_events.py'&gt; does not have the attribute 'AuthConfig'</failure></testcase><testcase classname="tests.unit.test_database_connection_events_comprehensive.TestGetSettings" name="test_get_settings_module_level_initialization" time="0.001" /><testcase classname="tests.unit.test_database_connection_events_comprehensive.TestTimeoutConfiguration" name="test_execute_auth_timeout_statements" time="0.001" /><testcase classname="tests.unit.test_database_connection_events_comprehensive.TestTimeoutConfiguration" name="test_close_cursor_safely_success" time="0.001" /><testcase classname="tests.unit.test_database_connection_events_comprehensive.TestTimeoutConfiguration" name="test_close_cursor_safely_error" time="0.002" /><testcase classname="tests.unit.test_database_connection_events_comprehensive.TestTimeoutConfiguration" name="test_configure_auth_connection_timeouts_success" time="0.002" /><testcase classname="tests.unit.test_database_connection_events_comprehensive.TestTimeoutConfiguration" name="test_configure_auth_connection_timeouts_error" time="0.002" /><testcase classname="tests.unit.test_database_connection_events_comprehensive.TestConnectionPIDHandling" name="test_set_auth_connection_pid_with_backend_pid" time="0.003" /><testcase classname="tests.unit.test_database_connection_events_comprehensive.TestConnectionPIDHandling" name="test_set_auth_connection_pid_no_backend_pid" time="0.001" /><testcase classname="tests.unit.test_database_connection_events_comprehensive.TestConnectionPIDHandling" name="test_set_auth_connection_pid_error" time="0.002" /><testcase classname="tests.unit.test_database_connection_events_comprehensive.TestPoolMonitoring" name="test_monitor_auth_pool_usage_no_pool" time="0.001" /><testcase classname="tests.unit.test_database_connection_events_comprehensive.TestPoolMonitoring" name="test_monitor_auth_pool_usage_normal_usage" time="0.002" /><testcase classname="tests.unit.test_database_connection_events_comprehensive.TestPoolMonitoring" name="test_monitor_auth_pool_usage_high_usage" time="0.003"><failure message="AssertionError: Expected 'warning' to have been called.">..\..\..\..\miniconda3\Lib\unittest\mock.py:913: in assert_called
    raise AssertionError(msg)
E   AssertionError: Expected 'warning' to have been called.

During handling of the above exception, another exception occurred:
auth_service\tests\unit\test_database_connection_events_comprehensive.py:276: in test_monitor_auth_pool_usage_high_usage
    mock_logger.warning.assert_called()
E   AssertionError: Expected 'warning' to have been called.</failure></testcase><testcase classname="tests.unit.test_database_connection_events_comprehensive.TestPoolMonitoring" name="test_monitor_auth_pool_usage_missing_methods" time="0.001" /><testcase classname="tests.unit.test_database_connection_events_comprehensive.TestPoolMonitoring" name="test_monitor_auth_pool_usage_error" time="0.002" /><testcase classname="tests.unit.test_database_connection_events_comprehensive.TestConnectionLogging" name="test_log_auth_connection_established_with_settings" time="0.004" /><testcase classname="tests.unit.test_database_connection_events_comprehensive.TestConnectionLogging" name="test_log_auth_connection_established_no_settings" time="0.002" /><testcase classname="tests.unit.test_database_connection_events_comprehensive.TestConnectionLogging" name="test_log_auth_checkout_if_enabled_enabled" time="0.004" /><testcase classname="tests.unit.test_database_connection_events_comprehensive.TestConnectionLogging" name="test_log_auth_checkout_if_enabled_disabled" time="0.004" /><testcase classname="tests.unit.test_database_connection_events_comprehensive.TestEngineEventSetup" name="test_setup_auth_async_engine_events_success" time="0.007" /><testcase classname="tests.unit.test_database_connection_events_comprehensive.TestEngineEventSetup" name="test_setup_auth_async_engine_events_none_engine" time="0.003" /><testcase classname="tests.unit.test_database_connection_events_comprehensive.TestEngineEventSetup" name="test_setup_auth_async_engine_events_error" time="0.003" /><testcase classname="tests.unit.test_database_connection_events_comprehensive.TestEventHandlersIntegration" name="test_connect_event_handler_postgresql" time="0.005" /><testcase classname="tests.unit.test_database_connection_events_comprehensive.TestEventHandlersIntegration" name="test_connect_event_handler_sqlite" time="0.003" /><testcase classname="tests.unit.test_database_connection_events_comprehensive.TestEventHandlersIntegration" name="test_checkout_event_handler" time="0.005" /><testcase classname="tests.unit.test_database_connection_events_comprehensive.TestRealEngineIntegration" name="test_setup_events_on_real_engine" time="0.014" /><testcase classname="tests.unit.test_database_connection_events_comprehensive.TestRealEngineIntegration" name="test_events_trigger_on_real_connections" time="0.013"><failure message="sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such function: current_database&#10;[SQL: SELECT current_database()]&#10;(Background on this error at: https://sqlalche.me/e/20/e3q8)">..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:177: in execute
    self._adapt_connection._handle_exception(error)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:337: in _handle_exception
    raise error
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:159: in execute
    self.await_(_cursor.execute(operation, parameters))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:48: in execute
    await self._execute(self._cursor.execute, sql, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:40: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:133: in _execute
    return await future
           ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:106: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.OperationalError: no such function: current_database

The above exception was the direct cause of the following exception:
auth_service\tests\unit\test_database_connection_events_comprehensive.py:539: in test_events_trigger_on_real_connections
    result = await conn.execute(text("SELECT current_database()"))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\ext\asyncio\engine.py:658: in execute
    result = await greenlet_spawn(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:201: in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1419: in execute
    return meth(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\sql\elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1846: in _execute_context
    return self._exec_single_context(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:177: in execute
    self._adapt_connection._handle_exception(error)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:337: in _handle_exception
    raise error
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:159: in execute
    self.await_(_cursor.execute(operation, parameters))
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:132: in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\sqlalchemy\util\_concurrency_py3k.py:196: in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:48: in execute
    await self._execute(self._cursor.execute, sql, parameters)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\cursor.py:40: in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:133: in _execute
    return await future
           ^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\aiosqlite\core.py:106: in run
    result = function()
             ^^^^^^^^^^
E   sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such function: current_database
E   [SQL: SELECT current_database()]
E   (Background on this error at: https://sqlalche.me/e/20/e3q8)</failure></testcase><testcase classname="tests.unit.test_database_connection_events_comprehensive.TestRealEngineIntegration" name="test_multiple_connections_with_events" time="0.019" /><testcase classname="tests.unit.test_database_connection_events_comprehensive.TestEventHandlerEdgeCases" name="test_pool_events_setup" time="0.003" /><testcase classname="tests.unit.test_database_connection_events_comprehensive.TestEventHandlerEdgeCases" name="test_connection_info_logging" time="0.002" /><testcase classname="tests.unit.test_database_connection_events_comprehensive.TestEventHandlerEdgeCases" name="test_event_handler_exception_handling" time="0.002" /><testcase classname="tests.unit.test_database_connection_events_comprehensive.TestEventHandlerEdgeCases" name="test_module_exports" time="0.001" /><testcase classname="tests.unit.test_database_staging_validation_comprehensive.TestStagingDatabaseValidatorURLFormat" name="test_validate_empty_url" time="0.001" /><testcase classname="tests.unit.test_database_staging_validation_comprehensive.TestStagingDatabaseValidatorURLFormat" name="test_validate_none_url" time="0.001" /><testcase classname="tests.unit.test_database_staging_validation_comprehensive.TestStagingDatabaseValidatorURLFormat" name="test_validate_invalid_scheme" time="0.001" /><testcase classname="tests.unit.test_database_staging_validation_comprehensive.TestStagingDatabaseValidatorURLFormat" name="test_validate_postgresql_scheme" time="0.002" /><testcase classname="tests.unit.test_database_staging_validation_comprehensive.TestStagingDatabaseValidatorURLFormat" name="test_validate_postgres_scheme" time="0.001" /><testcase classname="tests.unit.test_database_staging_validation_comprehensive.TestStagingDatabaseValidatorURLFormat" name="test_validate_cloud_sql_url" time="0.003" /><testcase classname="tests.unit.test_database_staging_validation_comprehensive.TestStagingDatabaseValidatorURLFormat" name="test_validate_cloud_sql_url_with_ssl_params" time="0.002"><failure message="AssertionError: assert 'SSL parameters will be automatically removed' in ['SSL parameters will be automatically removed for Cloud SQL Unix sockets']">auth_service\tests\unit\test_database_staging_validation_comprehensive.py:94: in test_validate_cloud_sql_url_with_ssl_params
    assert "SSL parameters will be automatically removed" in result["recommendations"]
E   AssertionError: assert 'SSL parameters will be automatically removed' in ['SSL parameters will be automatically removed for Cloud SQL Unix sockets']</failure></testcase><testcase classname="tests.unit.test_database_staging_validation_comprehensive.TestStagingDatabaseValidatorURLFormat" name="test_validate_tcp_url_with_sslmode" time="0.002"><failure message="AssertionError: assert 'sslmode will be converted to ssl' in ['sslmode will be converted to ssl for asyncpg compatibility']">auth_service\tests\unit\test_database_staging_validation_comprehensive.py:105: in test_validate_tcp_url_with_sslmode
    assert "sslmode will be converted to ssl" in result["recommendations"]
E   AssertionError: assert 'sslmode will be converted to ssl' in ['sslmode will be converted to ssl for asyncpg compatibility']</failure></testcase><testcase classname="tests.unit.test_database_staging_validation_comprehensive.TestStagingDatabaseValidatorURLFormat" name="test_validate_tcp_url_with_ssl_param" time="0.002" /><testcase classname="tests.unit.test_database_staging_validation_comprehensive.TestStagingDatabaseValidatorURLFormat" name="test_validate_tcp_url_no_ssl" time="0.002"><failure message="AssertionError: assert 'No SSL parameters specified' in ['No SSL parameters specified for TCP connection']">auth_service\tests\unit\test_database_staging_validation_comprehensive.py:126: in test_validate_tcp_url_no_ssl
    assert "No SSL parameters specified" in result["warnings"]
E   AssertionError: assert 'No SSL parameters specified' in ['No SSL parameters specified for TCP connection']</failure></testcase><testcase classname="tests.unit.test_database_staging_validation_comprehensive.TestStagingDatabaseValidatorURLFormat" name="test_validate_localhost_warning" time="0.002" /><testcase classname="tests.unit.test_database_staging_validation_comprehensive.TestStagingDatabaseValidatorURLFormat" name="test_validate_no_port_warning" time="0.003"><failure message="AssertionError: assert 'Port not specified' in ['No SSL parameters specified for TCP connection', 'Port not specified, will use default']">auth_service\tests\unit\test_database_staging_validation_comprehensive.py:146: in test_validate_no_port_warning
    assert "Port not specified" in result["warnings"]
E   AssertionError: assert 'Port not specified' in ['No SSL parameters specified for TCP connection', 'Port not specified, will use default']</failure></testcase><testcase classname="tests.unit.test_database_staging_validation_comprehensive.TestStagingDatabaseValidatorURLFormat" name="test_validate_no_hostname" time="0.001" /><testcase classname="tests.unit.test_database_staging_validation_comprehensive.TestStagingDatabaseValidatorURLFormat" name="test_validate_malformed_cloud_sql_path" time="0.001" /><testcase classname="tests.unit.test_database_staging_validation_comprehensive.TestStagingDatabaseValidatorURLFormat" name="test_validate_cloud_sql_missing_db_name" time="0.002"><failure message="AssertionError: assert 'Database name not specified' in []">auth_service\tests\unit\test_database_staging_validation_comprehensive.py:175: in test_validate_cloud_sql_missing_db_name
    assert "Database name not specified" in result["warnings"]
E   AssertionError: assert 'Database name not specified' in []</failure></testcase><testcase classname="tests.unit.test_database_staging_validation_comprehensive.TestStagingDatabaseValidatorCredentials" name="test_validate_credentials_no_username" time="0.007" /><testcase classname="tests.unit.test_database_staging_validation_comprehensive.TestStagingDatabaseValidatorCredentials" name="test_validate_credentials_no_password" time="0.002" /><testcase classname="tests.unit.test_database_staging_validation_comprehensive.TestStagingDatabaseValidatorCredentials" name="test_validate_credentials_problematic_username_pattern" time="0.001"><failure message="assert &quot;Invalid username pattern 'user_pr-4'&quot; in [&quot;Invalid username pattern 'user_pr-4' - this will cause authentication failures&quot;, 'Using insecure default password']">auth_service\tests\unit\test_database_staging_validation_comprehensive.py:209: in test_validate_credentials_problematic_username_pattern
    assert "Invalid username pattern 'user_pr-4'" in result["credential_issues"]
E   assert "Invalid username pattern 'user_pr-4'" in ["Invalid username pattern 'user_pr-4' - this will cause authentication failures", 'Using insecure default password']</failure></testcase><testcase classname="tests.unit.test_database_staging_validation_comprehensive.TestStagingDatabaseValidatorCredentials" name="test_validate_credentials_pr_pattern_username" time="0.002"><failure message="assert 'appears to be misconfigured PR-specific user' in [&quot;Invalid username pattern 'user_pr-123' - appears to be misconfigured PR-specific user&quot;, 'Using insecure default password']">auth_service\tests\unit\test_database_staging_validation_comprehensive.py:219: in test_validate_credentials_pr_pattern_username
    assert "appears to be misconfigured PR-specific user" in result["credential_issues"]
E   assert 'appears to be misconfigured PR-specific user' in ["Invalid username pattern 'user_pr-123' - appears to be misconfigured PR-specific user", 'Using insecure default password']</failure></testcase><testcase classname="tests.unit.test_database_staging_validation_comprehensive.TestStagingDatabaseValidatorCredentials" name="test_validate_credentials_postgres_username" time="0.001"><failure message="assert &quot;Username 'postgres' is acceptable for Cloud SQL&quot; in [&quot;Username 'postgres' is acceptable for Cloud SQL but ensure password is secure&quot;]">auth_service\tests\unit\test_database_staging_validation_comprehensive.py:229: in test_validate_credentials_postgres_username
    assert "Username 'postgres' is acceptable for Cloud SQL" in result["recommendations"]
E   assert "Username 'postgres' is acceptable for Cloud SQL" in ["Username 'postgres' is acceptable for Cloud SQL but ensure password is secure"]</failure></testcase><testcase classname="tests.unit.test_database_staging_validation_comprehensive.TestStagingDatabaseValidatorCredentials" name="test_validate_credentials_root_username" time="0.002"><failure message="assert False is True">auth_service\tests\unit\test_database_staging_validation_comprehensive.py:237: in test_validate_credentials_root_username
    assert result["valid"] is True
E   assert False is True</failure></testcase><testcase classname="tests.unit.test_database_staging_validation_comprehensive.TestStagingDatabaseValidatorCredentials" name="test_validate_credentials_insecure_password" time="0.001" /><testcase classname="tests.unit.test_database_staging_validation_comprehensive.TestStagingDatabaseValidatorCredentials" name="test_validate_credentials_short_password" time="0.002"><failure message="AssertionError: assert 'Use password with at least 8 characters' in ['Use password with at least 8 characters for security']">auth_service\tests\unit\test_database_staging_validation_comprehensive.py:259: in test_validate_credentials_short_password
    assert "Use password with at least 8 characters" in result["recommendations"]
E   AssertionError: assert 'Use password with at least 8 characters' in ['Use password with at least 8 characters for security']</failure></testcase><testcase classname="tests.unit.test_database_staging_validation_comprehensive.TestStagingDatabaseValidatorCredentials" name="test_validate_credentials_numeric_password" time="0.002"><failure message="AssertionError: assert 'Password contains only numbers' in ['Using insecure default password']">auth_service\tests\unit\test_database_staging_validation_comprehensive.py:268: in test_validate_credentials_numeric_password
    assert "Password contains only numbers" in result["credential_issues"]
E   AssertionError: assert 'Password contains only numbers' in ['Using insecure default password']</failure></testcase><testcase classname="tests.unit.test_database_staging_validation_comprehensive.TestStagingDatabaseValidatorCredentials" name="test_validate_credentials_test_password" time="0.002"><failure message="AssertionError: assert 'appears to be a test/development password' in ['Password appears to be a test/development password']">auth_service\tests\unit\test_database_staging_validation_comprehensive.py:278: in test_validate_credentials_test_password
    assert "appears to be a test/development password" in result["credential_issues"]
E   AssertionError: assert 'appears to be a test/development password' in ['Password appears to be a test/development password']</failure></testcase><testcase classname="tests.unit.test_database_staging_validation_comprehensive.TestStagingDatabaseValidatorCredentials" name="test_validate_credentials_placeholder_password" time="0.001" /><testcase classname="tests.unit.test_database_staging_validation_comprehensive.TestStagingDatabaseValidatorCredentials" name="test_validate_credentials_variable_placeholder" time="0.001" /><testcase classname="tests.unit.test_database_staging_validation_comprehensive.TestStagingDatabaseValidatorCredentials" name="test_validate_credentials_staging_specific_checks" time="0.001"><failure message="assert 'Username appears to be development-specific' in ['Username appears to be development-specific in staging environment', &quot;Password contains 'dev' which may indicate development credentials&quot;]">auth_service\tests\unit\test_database_staging_validation_comprehensive.py:306: in test_validate_credentials_staging_specific_checks
    assert "Username appears to be development-specific" in result["warnings"]
E   assert 'Username appears to be development-specific' in ['Username appears to be development-specific in staging environment', "Password contains 'dev' which may indicate development credentials"]</failure></testcase><testcase classname="tests.unit.test_database_staging_validation_comprehensive.TestStagingDatabaseValidatorCredentials" name="test_validate_credentials_secure_example" time="0.002" /><testcase classname="tests.unit.test_database_staging_validation_comprehensive.TestStagingDatabaseValidatorCredentials" name="test_validate_credentials_parsing_error" time="0.001"><failure message="KeyError: 'error'">auth_service\tests\unit\test_database_staging_validation_comprehensive.py:327: in test_validate_credentials_parsing_error
    assert "Credential validation failed" in result["error"]
                                             ^^^^^^^^^^^^^^^
E   KeyError: 'error'</failure></testcase><testcase classname="tests.unit.test_database_staging_validation_comprehensive.TestStagingDatabaseValidatorSSLCompatibility" name="test_ssl_compatibility_cloud_sql_with_ssl_params" time="0.004" /><testcase classname="tests.unit.test_database_staging_validation_comprehensive.TestStagingDatabaseValidatorSSLCompatibility" name="test_ssl_compatibility_cloud_sql_ssl_not_removed" time="0.002" /><testcase classname="tests.unit.test_database_staging_validation_comprehensive.TestStagingDatabaseValidatorSSLCompatibility" name="test_ssl_compatibility_tcp_sslmode_conversion" time="0.002" /><testcase classname="tests.unit.test_database_staging_validation_comprehensive.TestStagingDatabaseValidatorSSLCompatibility" name="test_ssl_compatibility_tcp_sslmode_not_converted" time="0.003"><failure message="ModuleNotFoundError: No module named 'str'">auth_service\tests\unit\test_database_staging_validation_comprehensive.py:369: in test_ssl_compatibility_tcp_sslmode_not_converted
    with patch('str.replace', return_value=tcp_url):
..\..\..\..\miniconda3\Lib\unittest\mock.py:1442: in __enter__
    self.target = self.getter()
                  ^^^^^^^^^^^^^
..\..\..\..\miniconda3\Lib\pkgutil.py:513: in resolve_name
    mod = importlib.import_module(modname)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\miniconda3\Lib\importlib\__init__.py:90: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
&lt;frozen importlib._bootstrap&gt;:1387: in _gcd_import
    ???
&lt;frozen importlib._bootstrap&gt;:1360: in _find_and_load
    ???
&lt;frozen importlib._bootstrap&gt;:1324: in _find_and_load_unlocked
    ???
E   ModuleNotFoundError: No module named 'str'</failure></testcase><testcase classname="tests.unit.test_database_staging_validation_comprehensive.TestStagingDatabaseValidatorSSLCompatibility" name="test_ssl_compatibility_tcp_with_ssl_param" time="0.001" /><testcase classname="tests.unit.test_database_staging_validation_comprehensive.TestStagingDatabaseValidatorSSLCompatibility" name="test_ssl_compatibility_error_handling" time="0.002"><failure message="assert True is False">auth_service\tests\unit\test_database_staging_validation_comprehensive.py:391: in test_ssl_compatibility_error_handling
    assert result["valid"] is False
E   assert True is False</failure></testcase><testcase classname="tests.unit.test_database_staging_validation_comprehensive.TestStagingDatabaseValidatorPreDeployment" name="test_pre_deployment_validation_with_url" time="0.002" /><testcase classname="tests.unit.test_database_staging_validation_comprehensive.TestStagingDatabaseValidatorPreDeployment" name="test_pre_deployment_validation_without_url" time="0.004"><failure message="AssertionError: assert 'postgresql://env_user:env_pass@env_host:5432/env_d...' == 'postgresql://env_user:env_pass@env_host:5432/env_db'&#10;  &#10;  - postgresql://env_user:env_pass@env_host:5432/env_db&#10;  ?                                                   ^&#10;  + postgresql://env_user:env_pass@env_host:5432/env_d...&#10;  ?                                                   ^^^">auth_service\tests\unit\test_database_staging_validation_comprehensive.py:429: in test_pre_deployment_validation_without_url
    assert report["database_url"] == "postgresql://env_user:env_pass@env_host:5432/env_db"
E   AssertionError: assert 'postgresql://env_user:env_pass@env_host:5432/env_d...' == 'postgresql://env_user:env_pass@env_host:5432/env_db'
E     
E     - postgresql://env_user:env_pass@env_host:5432/env_db
E     ?                                                   ^
E     + postgresql://env_user:env_pass@env_host:5432/env_d...
E     ?                                                   ^^^</failure></testcase><testcase classname="tests.unit.test_database_staging_validation_comprehensive.TestStagingDatabaseValidatorPreDeployment" name="test_pre_deployment_validation_url_format_failure" time="0.001" /><testcase classname="tests.unit.test_database_staging_validation_comprehensive.TestStagingDatabaseValidatorPreDeployment" name="test_pre_deployment_validation_credential_failure" time="0.002" /><testcase classname="tests.unit.test_database_staging_validation_comprehensive.TestStagingDatabaseValidatorPreDeployment" name="test_pre_deployment_validation_ssl_failure" time="0.003" /><testcase classname="tests.unit.test_database_staging_validation_comprehensive.TestStagingDatabaseValidatorPreDeployment" name="test_pre_deployment_validation_warnings_only" time="0.002" /><testcase classname="tests.unit.test_database_staging_validation_comprehensive.TestStagingDatabaseValidatorPreDeployment" name="test_pre_deployment_validation_success" time="0.001" /><testcase classname="tests.unit.test_database_staging_validation_comprehensive.TestStagingDatabaseValidatorPreDeployment" name="test_pre_deployment_validation_long_url_truncation" time="0.001" /><testcase classname="tests.unit.test_database_staging_validation_comprehensive.TestStagingDatabaseValidatorReporting" name="test_print_validation_report_passed" time="0.002" /><testcase classname="tests.unit.test_database_staging_validation_comprehensive.TestStagingDatabaseValidatorReporting" name="test_print_validation_report_failed" time="0.002" /><testcase classname="tests.unit.test_database_staging_validation_comprehensive.TestStagingDatabaseValidatorReporting" name="test_print_validation_report_warning" time="0.002" /><testcase classname="tests.unit.test_database_staging_validation_comprehensive.TestStagingDatabaseValidatorReporting" name="test_print_validation_report_unknown_status" time="0.001" /><testcase classname="tests.unit.test_database_staging_validation_comprehensive.TestValidateStagingDeploymentFunction" name="test_validate_staging_deployment_success" time="0.002"><failure message="AssertionError: assert 'Validation passed' in 'Validating Auth Service for Staging Deployment...\n\nAuth Service Staging Validation Report\n==================================================\nOverall Status: PASS PASSED\nDatabase URL: postgresql://secure_url\n\n==================================================\n'&#10; +  where 'Validating Auth Service for Staging Deployment...\n\nAuth Service Staging Validation Report\n==================================================\nOverall Status: PASS PASSED\nDatabase URL: postgresql://secure_url\n\n==================================================\n' = CaptureResult(out='Validating Auth Service for Staging Deployment...\n\nAuth Service Staging Validation Report\n==================================================\nOverall Status: PASS PASSED\nDatabase URL: postgresql://secure_url\n\n==================================================\n', err='').out">auth_service\tests\unit\test_database_staging_validation_comprehensive.py:598: in test_validate_staging_deployment_success
    assert "Validation passed" in captured.out
E   AssertionError: assert 'Validation passed' in 'Validating Auth Service for Staging Deployment...\n\nAuth Service Staging Validation Report\n==================================================\nOverall Status: PASS PASSED\nDatabase URL: postgresql://secure_url\n\n==================================================\n'
E    +  where 'Validating Auth Service for Staging Deployment...\n\nAuth Service Staging Validation Report\n==================================================\nOverall Status: PASS PASSED\nDatabase URL: postgresql://secure_url\n\n==================================================\n' = CaptureResult(out='Validating Auth Service for Staging Deployment...\n\nAuth Service Staging Validation Report\n==================================================\nOverall Status: PASS PASSED\nDatabase URL: postgresql://secure_url\n\n==================================================\n', err='').out</failure></testcase><testcase classname="tests.unit.test_database_staging_validation_comprehensive.TestValidateStagingDeploymentFunction" name="test_validate_staging_deployment_warning" time="0.003"><failure message="AssertionError: assert 'Validation passed' in 'Validating Auth Service for Staging Deployment...\n\nAuth Service Staging Validation Report\n==================================================\nOverall Status: WARN WARNING\nDatabase URL: postgresql://localhost_url\n\nWarnings (1):\n  ! Using localhost\n\n==================================================\n'&#10; +  where 'Validating Auth Service for Staging Deployment...\n\nAuth Service Staging Validation Report\n==================================================\nOverall Status: WARN WARNING\nDatabase URL: postgresql://localhost_url\n\nWarnings (1):\n  ! Using localhost\n\n==================================================\n' = CaptureResult(out='Validating Auth Service for Staging Deployment...\n\nAuth Service Staging Validation Report\n==================================================\nOverall Status: WARN WARNING\nDatabase URL: postgresql://localhost_url\n\nWarnings (1):\n  ! Using localhost\n\n==================================================\n', err='').out">auth_service\tests\unit\test_database_staging_validation_comprehensive.py:616: in test_validate_staging_deployment_warning
    assert "Validation passed" in captured.out
E   AssertionError: assert 'Validation passed' in 'Validating Auth Service for Staging Deployment...\n\nAuth Service Staging Validation Report\n==================================================\nOverall Status: WARN WARNING\nDatabase URL: postgresql://localhost_url\n\nWarnings (1):\n  ! Using localhost\n\n==================================================\n'
E    +  where 'Validating Auth Service for Staging Deployment...\n\nAuth Service Staging Validation Report\n==================================================\nOverall Status: WARN WARNING\nDatabase URL: postgresql://localhost_url\n\nWarnings (1):\n  ! Using localhost\n\n==================================================\n' = CaptureResult(out='Validating Auth Service for Staging Deployment...\n\nAuth Service Staging Validation Report\n==================================================\nOverall Status: WARN WARNING\nDatabase URL: postgresql://localhost_url\n\nWarnings (1):\n  ! Using localhost\n\n==================================================\n', err='').out</failure></testcase><testcase classname="tests.unit.test_database_staging_validation_comprehensive.TestValidateStagingDeploymentFunction" name="test_validate_staging_deployment_failure" time="0.002" /><testcase classname="tests.unit.test_database_staging_validation_comprehensive.TestStagingDatabaseValidatorEdgeCases" name="test_url_format_validation_exception" time="0.002"><failure message="AssertionError: assert 'URL parsing failed: Parse error' in 'Invalid scheme: '">auth_service\tests\unit\test_database_staging_validation_comprehensive.py:646: in test_url_format_validation_exception
    assert "URL parsing failed: Parse error" in result["error"]
E   AssertionError: assert 'URL parsing failed: Parse error' in 'Invalid scheme: '</failure></testcase><testcase classname="tests.unit.test_database_staging_validation_comprehensive.TestStagingDatabaseValidatorEdgeCases" name="test_credential_validation_exception" time="0.002"><failure message="KeyError: 'error'">auth_service\tests\unit\test_database_staging_validation_comprehensive.py:655: in test_credential_validation_exception
    assert "Credential validation failed: Parse error" in result["error"]
                                                          ^^^^^^^^^^^^^^^
E   KeyError: 'error'</failure></testcase><testcase classname="tests.unit.test_database_staging_validation_comprehensive.TestStagingDatabaseValidatorEdgeCases" name="test_cloud_sql_database_name_extraction_edge_cases" time="0.001"><failure message="AssertionError: assert 'Database name not specified' in []">auth_service\tests\unit\test_database_staging_validation_comprehensive.py:668: in test_cloud_sql_database_name_extraction_edge_cases
    assert "Database name not specified" in result2["warnings"]
E   AssertionError: assert 'Database name not specified' in []</failure></testcase><testcase classname="tests.unit.test_database_staging_validation_comprehensive.TestStagingDatabaseValidatorEdgeCases" name="test_regex_patterns_comprehensive" time="0.002" /><testcase classname="tests.unit.test_database_staging_validation_comprehensive.TestStagingDatabaseValidatorEdgeCases" name="test_environment_specific_validation_branches" time="0.002" /><testcase classname="tests.unit.test_database_staging_validation_comprehensive.TestStagingDatabaseValidatorEdgeCases" name="test_password_security_checks_comprehensive" time="0.002" /><testcase classname="tests.unit.test_database_staging_validation_comprehensive.TestMainModuleBehavior" name="test_main_module_success" time="0.002"><failure message="  File &quot;&lt;string&gt;&quot;, line 3&#10;    success = validate_staging_deployment()&#10;IndentationError: unexpected indent">auth_service\tests\unit\test_database_staging_validation_comprehensive.py:743: in test_main_module_success
    exec(open('auth_service/auth_core/database/staging_validation.py').read().split('if __name__ == "__main__":')[1])
E     File "&lt;string&gt;", line 3
E       success = validate_staging_deployment()
E   IndentationError: unexpected indent</failure></testcase><testcase classname="tests.unit.test_database_staging_validation_comprehensive.TestMainModuleBehavior" name="test_main_module_success" time="0.001"><error message="failed on teardown with &quot;pytest.PytestUnraisableExceptionWarning: Exception ignored in: &lt;_io.FileIO name='auth_service/auth_core/database/staging_validation.py' mode='rb' closefd=True&gt;&#10;Enable tracemalloc to get traceback where the object was allocated.&#10;See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.&quot;">auth_service\tests\unit\test_database_staging_validation_comprehensive.py:743: in test_main_module_success
    exec(open('auth_service/auth_core/database/staging_validation.py').read().split('if __name__ == "__main__":')[1])
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   ResourceWarning: unclosed file &lt;_io.TextIOWrapper name='auth_service/auth_core/database/staging_validation.py' mode='r' encoding='cp1252'&gt;

The above exception was the direct cause of the following exception:
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\_pytest\runner.py:344: in from_call
    result: TResult | None = func()
                             ^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\_pytest\runner.py:246: in &lt;lambda&gt;
    lambda: runtest_hook(item=item, **kwds), when=when, reraise=reraise
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\pluggy\_hooks.py:512: in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\pluggy\_manager.py:120: in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\_pytest\logging.py:858: in pytest_runtest_teardown
    yield
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\_pytest\capture.py:905: in pytest_runtest_teardown
    return (yield)
            ^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\_pytest\unraisableexception.py:163: in pytest_runtest_teardown
    collect_unraisable(item.config)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\_pytest\unraisableexception.py:79: in collect_unraisable
    raise errors[0]
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\_pytest\unraisableexception.py:67: in collect_unraisable
    warnings.warn(pytest.PytestUnraisableExceptionWarning(msg))
E   pytest.PytestUnraisableExceptionWarning: Exception ignored in: &lt;_io.FileIO name='auth_service/auth_core/database/staging_validation.py' mode='rb' closefd=True&gt;
E   Enable tracemalloc to get traceback where the object was allocated.
E   See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.</error></testcase><testcase classname="tests.unit.test_database_staging_validation_comprehensive.TestMainModuleBehavior" name="test_main_module_failure" time="0.003"><failure message="  File &quot;&lt;string&gt;&quot;, line 3&#10;    success = validate_staging_deployment()&#10;IndentationError: unexpected indent">auth_service\tests\unit\test_database_staging_validation_comprehensive.py:756: in test_main_module_failure
    exec(open('auth_service/auth_core/database/staging_validation.py').read().split('if __name__ == "__main__":')[1])
E     File "&lt;string&gt;", line 3
E       success = validate_staging_deployment()
E   IndentationError: unexpected indent</failure></testcase><testcase classname="tests.unit.test_database_staging_validation_comprehensive.TestMainModuleBehavior" name="test_main_module_failure" time="0.004"><error message="failed on teardown with &quot;pytest.PytestUnraisableExceptionWarning: Exception ignored in: &lt;_io.FileIO name='auth_service/auth_core/database/staging_validation.py' mode='rb' closefd=True&gt;&#10;Enable tracemalloc to get traceback where the object was allocated.&#10;See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.&quot;">auth_service\tests\unit\test_database_staging_validation_comprehensive.py:756: in test_main_module_failure
    exec(open('auth_service/auth_core/database/staging_validation.py').read().split('if __name__ == "__main__":')[1])
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   ResourceWarning: unclosed file &lt;_io.TextIOWrapper name='auth_service/auth_core/database/staging_validation.py' mode='r' encoding='cp1252'&gt;

The above exception was the direct cause of the following exception:
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\_pytest\runner.py:344: in from_call
    result: TResult | None = func()
                             ^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\_pytest\runner.py:246: in &lt;lambda&gt;
    lambda: runtest_hook(item=item, **kwds), when=when, reraise=reraise
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\pluggy\_hooks.py:512: in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\pluggy\_manager.py:120: in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\_pytest\logging.py:858: in pytest_runtest_teardown
    yield
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\_pytest\capture.py:905: in pytest_runtest_teardown
    return (yield)
            ^^^^^
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\_pytest\unraisableexception.py:163: in pytest_runtest_teardown
    collect_unraisable(item.config)
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\_pytest\unraisableexception.py:79: in collect_unraisable
    raise errors[0]
..\..\..\..\AppData\Roaming\Python\Python312\site-packages\_pytest\unraisableexception.py:67: in collect_unraisable
    warnings.warn(pytest.PytestUnraisableExceptionWarning(msg))
E   pytest.PytestUnraisableExceptionWarning: Exception ignored in: &lt;_io.FileIO name='auth_service/auth_core/database/staging_validation.py' mode='rb' closefd=True&gt;
E   Enable tracemalloc to get traceback where the object was allocated.
E   See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.</error></testcase></testsuite></testsuites>