# Netra Staging Environment Configuration Template
# CRITICAL: Each environment MUST have separate OAuth credentials to prevent credential leakage
# Last Updated: 2025-09-05

# ============================================
# ENVIRONMENT IDENTIFICATION
# ============================================
ENVIRONMENT=staging

# ============================================
# CRITICAL OAUTH CONFIGURATION - STAGING
# ============================================
# SECURITY: Staging MUST have its own OAuth app, not shared with dev/test/prod
# Configure OAuth app redirect URI to: https://staging.netrasystems.ai/auth/callback
GOOGLE_OAUTH_CLIENT_ID_STAGING=your-staging-client-id.apps.googleusercontent.com
GOOGLE_OAUTH_CLIENT_SECRET_STAGING=your-staging-client-secret-replace-me

# GitHub OAuth (if enabled)
GITHUB_CLIENT_ID_STAGING=your-staging-github-client-id
GITHUB_CLIENT_SECRET_STAGING=your-staging-github-client-secret

# ============================================
# JWT CONFIGURATION - STAGING
# ============================================
# CRITICAL: Use Secret Manager in GCP for these values
# SSOT STANDARD: JWT_SECRET_KEY is the canonical name across all environments
JWT_SECRET_KEY=staging-jwt-secret-minimum-32-chars-from-secret-manager
# DEPRECATED: JWT_SECRET_STAGING kept for backward compatibility during migration
JWT_SECRET_STAGING=staging-jwt-secret-minimum-32-chars-from-secret-manager
SECRET_KEY=staging-secret-key-minimum-32-chars-from-secret-manager

# ============================================
# DATABASE CONFIGURATION - STAGING
# ============================================
# Component-based configuration (REQUIRED for staging)
DATABASE_HOST=your-cloud-sql-ip-or-connection-name
DATABASE_PORT=5432
DATABASE_NAME=netra_staging
DATABASE_USER=netra_staging_user
DATABASE_PASSWORD=use-secret-manager-for-this

# Alternative names (for compatibility)
POSTGRES_HOST=${DATABASE_HOST}
POSTGRES_PORT=${DATABASE_PORT}
POSTGRES_DB=${DATABASE_NAME}
POSTGRES_USER=${DATABASE_USER}
POSTGRES_PASSWORD=${DATABASE_PASSWORD}

# ============================================
# REDIS CONFIGURATION - STAGING
# ============================================
# Component-based configuration (REQUIRED for staging)
REDIS_HOST=your-redis-instance-ip
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=use-secret-manager-for-this

# ============================================
# SERVICE URLS - STAGING
# ============================================
# CRITICAL: Use proper domain names, not Cloud Run URLs (Issue #1278 fix)
FRONTEND_URL=https://staging.netrasystems.ai
BACKEND_URL=https://api-staging.netrasystems.ai
AUTH_SERVICE_URL=https://staging.netrasystems.ai
AUTH_REDIRECT_URI=https://staging.netrasystems.ai/auth/callback
AUTH_CALLBACK_URL=https://staging.netrasystems.ai/auth/callback

# ============================================
# LLM CONFIGURATION - STAGING
# ============================================
# REQUIRED: At least GEMINI must be configured
GEMINI_API_KEY=use-secret-manager-for-gemini-key
ANTHROPIC_API_KEY=use-secret-manager-for-anthropic-key
OPENAI_API_KEY=use-secret-manager-for-openai-key
PERPLEXITY_API_KEY=use-secret-manager-for-perplexity-key

# ============================================
# SECURITY CONFIGURATION - STAGING
# ============================================
SERVICE_SECRET=use-secret-manager-minimum-32-chars
FERNET_KEY=use-secret-manager-fernet-key

# ============================================
# MONITORING & ANALYTICS - STAGING
# ============================================
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/STAGING/WEBHOOK
SLACK_CHANNEL=#staging-alerts
LANGSMITH_API_KEY=use-secret-manager-if-enabled
LANGSMITH_PROJECT=netra-staging
LANGSMITH_ENDPOINT=https://api.smith.langchain.com
MIXPANEL_PROJECT_TOKEN=your-staging-mixpanel-token
MIXPANEL_API_SECRET=your-staging-mixpanel-secret
NEXT_PUBLIC_SENTRY_DSN=https://your-staging-sentry-dsn@sentry.io/project-id
NEXT_PUBLIC_ENVIRONMENT=staging
NEXT_PUBLIC_VERSION=v1.0.0-staging

# ============================================
# AWS CONFIGURATION - STAGING
# ============================================
AWS_ACCESS_KEY_ID=use-service-account-or-workload-identity
AWS_SECRET_ACCESS_KEY=use-service-account-or-workload-identity
AWS_S3_BUCKET=netra-staging-uploads
AWS_REGION=us-east-1

# ============================================
# EMAIL CONFIGURATION - STAGING
# ============================================
EMAIL_HOST=smtp.sendgrid.net
EMAIL_PORT=587
EMAIL_HOST_USER=apikey
EMAIL_HOST_PASSWORD=use-secret-manager-for-sendgrid-key
EMAIL_USE_TLS=true
EMAIL_FROM_ADDRESS=noreply@netrasystems.ai

# ============================================
# STAGING FLAGS
# ============================================
DEBUG=false
LOG_LEVEL=INFO
ALLOW_DEV_OAUTH_SIMULATION=false
RATE_LIMIT_ENABLED=true
CORS_ORIGINS=https://staging.netrasystems.ai
ALLOWED_HOSTS=.netrasystems.ai

# ============================================
# GCP SPECIFIC - STAGING
# ============================================
GCP_PROJECT=netra-staging
GCP_REGION=us-central1
GOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account.json

# ============================================
# CRITICAL NOTES FOR STAGING
# ============================================
# 1. NEVER use development/test credentials in staging
# 2. NEVER use production credentials in staging
# 3. Use GCP Secret Manager for all sensitive values
# 4. OAuth redirect URIs must match domain configuration
# 5. Database and Redis should use Cloud SQL and Memorystore
# 6. Monitor closely - staging should mirror production setup
# 7. See CONFIG_REGRESSION_PREVENTION_PLAN.md for migration guidance
# 8. Review OAUTH_REGRESSION_ANALYSIS_20250905.md for OAuth setup