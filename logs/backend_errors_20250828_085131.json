{
  "scan_timestamp": "2025-08-28T08:51:31.885788",
  "since_timestamp": "2025-08-28 15:42:48",
  "total_errors": 5,
  "unique_errors": 5,
  "summary": {
    "CRITICAL": 3,
    "HIGH": 0,
    "MEDIUM": 0,
    "LOW": 1
  },
  "error_types": {
    "Warning": 1,
    "Application Error": 1,
    "Unknown Exception": 3
  },
  "errors": [
    {
      "line_number": 4966,
      "timestamp": "2025-08-28T15:42:48.331589592Z",
      "severity": "LOW",
      "error_type": "Warning",
      "pattern": "WARNING.*",
      "log_line": "2025-08-28T15:42:48.331589592Z \u001b[32m2025-08-28 15:42:48.328\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[33m\u001b[1mUsing dev user: dev@example.com\u001b[0m",
      "log_content": "\u001b[32m2025-08-28 15:42:48.328\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[33m\u001b[1mUsing dev user: dev@example.com\u001b[0m",
      "signature": "95568203caae7a0f5ea6d7a36c84be61"
    },
    {
      "line_number": 5006,
      "timestamp": "2025-08-28T15:42:49.965290577Z",
      "severity": "ERROR",
      "error_type": "Application Error",
      "pattern": "ERROR.*",
      "log_line": "2025-08-28T15:42:49.965290577Z \u001b[32m2025-08-28 15:42:49.954\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[31m\u001b[1mTask exception was never retrieved",
      "log_content": "\u001b[32m2025-08-28 15:42:49.954\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[31m\u001b[1mTask exception was never retrieved",
      "signature": "2ba017de449297d470cbee95be303865"
    },
    {
      "line_number": 5008,
      "timestamp": "2025-08-28T15:42:49.965335288Z",
      "severity": "CRITICAL",
      "error_type": "Unknown Exception",
      "pattern": "Traceback",
      "log_line": "2025-08-28T15:42:49.965335288Z \u001b[33m\u001b[1mTraceback (most recent call last):\u001b[0m",
      "log_content": "2025-08-28T15:42:49.965335288Z \u001b[33m\u001b[1mTraceback (most recent call last):\u001b[0m\n2025-08-28T15:42:49.965336588Z > File \"\u001b[32m/app/netra_backend/app/database/\u001b[0m\u001b[32m\u001b[1m__init__.py\u001b[0m\", line \u001b[33m49\u001b[0m, in \u001b[35mpostgres_session\u001b[0m\n2025-08-28T15:42:49.965338210Z     \u001b[35m\u001b[1masync\u001b[0m \u001b[35m\u001b[1mwith\u001b[0m \u001b[1masync_session_factory\u001b[0m\u001b[1m(\u001b[0m\u001b[1m)\u001b[0m \u001b[35m\u001b[1mas\u001b[0m \u001b[1msession\u001b[0m\u001b[1m:\u001b[0m\n2025-08-28T15:42:49.965339984Z   File \"/usr/local/lib/python3.11/site-packages/sqlalchemy/ext/asyncio/session.py\", line 1085, in __aexit__\n2025-08-28T15:42:49.965341286Z     await asyncio.shield(task)\n2025-08-28T15:42:49.965342355Z   File \"/usr/local/lib/python3.11/site-packages/sqlalchemy/ext/asyncio/session.py\", line 1030, in close\n2025-08-28T15:42:49.965343714Z     await greenlet_spawn(self.sync_session.close)\n2025-08-28T15:42:49.965344803Z   File \"/usr/local/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py\", line 190, in greenlet_spawn\n2025-08-28T15:42:49.965345991Z     result = context.switch(*args, **kwargs)\n2025-08-28T15:42:49.965347076Z   File \"/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 2521, in close\n2025-08-28T15:42:49.965348220Z     self._close_impl(invalidate=False)\n2025-08-28T15:42:49.965349279Z   File \"/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 2590, in _close_impl\n2025-08-28T15:42:49.965350428Z     transaction.close(invalidate)\n2025-08-28T15:42:49.965351436Z   File \"<string>\", line 2, in close\n2025-08-28T15:42:49.965352690Z   File \"/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py\", line 119, in _go\n2025-08-28T15:42:49.965353847Z     raise sa_exc.IllegalStateChangeError(\n2025-08-28T15:42:49.965354928Z \u001b[31m\u001b[1msqlalchemy.exc.IllegalStateChangeError\u001b[0m:\u001b[1m Method 'close()' can't be called here; method '_connection_for_bind()' is already in progress and this would cause an unexpected state change to <SessionTransactionState.CLOSED: 5> (Background on this error at: https://sqlalche.me/e/20/isce)\u001b[0m\n2025-08-28T15:42:49.988552279Z \u001b[32m2025-08-28 15:42:49.987\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.database.base_crud\u001b[0m:\u001b[36m_create_entity\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1mCreated Thread with id: thread_dev-temp-cc173c1d\u001b[0m\n2025-08-28T15:42:50.022623413Z \u001b[32m2025-08-28 15:42:50.020\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.database.base_crud\u001b[0m:\u001b[36m_create_entity\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1mCreated Message with id: msg_f2fd2906-9d96-4c9a-91f3-4ddbe07afaaf\u001b[0m\n2025-08-28T15:42:50.035549635Z \u001b[32m2025-08-28 15:42:50.033\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.database.base_crud\u001b[0m:\u001b[36m_create_entity\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1mCreated Run with id: run_9f5d282b-ac2c-4745-ab6c-1b8418427760\u001b[0m\n2025-08-28T15:42:50.043154066Z \u001b[32m2025-08-28 15:42:50.040\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"flow_started\", \"flow_id\": \"flow_0a86afc5\", \"correlation_id\": \"run_9f5d282b-ac2c-4745-ab6c-1b8418427760\", \"timestamp\": 1756395770.0403755, \"state_summary\": {\"total_steps\": 4, \"completed_steps\": 0, \"current_phase\": \"initialization\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:50.043204968Z \u001b[32m2025-08-28 15:42:50.040\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_started\", \"flow_id\": \"flow_0a86afc5\", \"correlation_id\": \"run_9f5d282b-ac2c-4745-ab6c-1b8418427760\", \"timestamp\": 1756395770.0407774, \"step_name\": \"create_context\", \"step_type\": \"initialization\", \"state_summary\": {\"total_steps\": 4, \"completed_steps\": 0, \"current_phase\": \"create_context\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:50.043208658Z \u001b[32m2025-08-28 15:42:50.041\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_completed\", \"flow_id\": \"flow_0a86afc5\", \"correlation_id\": \"run_9f5d282b-ac2c-4745-ab6c-1b8418427760\", \"timestamp\": 1756395770.0410018, \"step_name\": \"create_context\", \"step_type\": \"initialization\", \"state_summary\": {\"total_steps\": 4, \"completed_steps\": 1, \"current_phase\": \"create_context\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:50.043305377Z \u001b[32m2025-08-28 15:42:50.041\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_started\", \"flow_id\": \"flow_0a86afc5\", \"correlation_id\": \"run_9f5d282b-ac2c-4745-ab6c-1b8418427760\", \"timestamp\": 1756395770.0411406, \"step_name\": \"initialize_state\", \"step_type\": \"state_management\", \"state_summary\": {\"total_steps\": 4, \"completed_steps\": 1, \"current_phase\": \"initialize_state\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:50.043531932Z \u001b[32m2025-08-28 15:42:50.041\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.services.state_persistence\u001b[0m:\u001b[36m_handle_no_session_warning\u001b[0m:\u001b[36m136\u001b[0m | \u001b[33m\u001b[1mNo state found for run run_9f5d282b-ac2c-4745-ab6c-1b8418427760\u001b[0m\n2025-08-28T15:42:50.053800128Z \u001b[32m2025-08-28 15:42:50.052\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.state_persistence\u001b[0m:\u001b[36m_ensure_user_exists_for_snapshot\u001b[0m:\u001b[36m433\u001b[0m | \u001b[1mAuto-creating dev/test user for state persistence: dev-temp-cc173c1d\u001b[0m\n2025-08-28T15:42:50.065277165Z \u001b[32m2025-08-28 15:42:50.064\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.services.state_persistence\u001b[0m:\u001b[36m_ensure_user_exists_for_snapshot\u001b[0m:\u001b[36m449\u001b[0m | \u001b[33m\u001b[1mCould not auto-create dev user dev-temp-cc173c1d: 1 validation error for UserCreate\n2025-08-28T15:42:50.065341880Z email\n2025-08-28T15:42:50.065343984Z   value is not a valid email address: The part after the @-sign is a special-use or reserved name that cannot be used with email. [type=value_error, input_value='dev-temp-cc173c1d@dev.local', input_type=str]\u001b[0m\n2025-08-28T15:42:50.086968709Z \u001b[32m2025-08-28 15:42:50.079\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.services.state_persistence\u001b[0m:\u001b[36m_handle_save_error\u001b[0m:\u001b[36m402\u001b[0m | \u001b[31m\u001b[1mFailed to save state for run run_9f5d282b-ac2c-4745-ab6c-1b8418427760: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.ForeignKeyViolationError'>: insert or update on table \"agent_state_snapshots\" violates foreign key constraint \"agent_state_snapshots_user_id_fkey\"\n2025-08-28T15:42:50.087147643Z DETAIL:  Key (user_id)=(dev-temp-cc173c1d) is not present in table \"userbase\".\n2025-08-28T15:42:50.087152039Z [SQL: INSERT INTO agent_state_snapshots (id, run_id, thread_id, user_id, version, schema_version, checkpoint_type, state_data, serialization_format, compression_type, step_count, agent_phase, execution_context, created_at, expires_at, is_recovery_point, recovery_reason, parent_snapshot_id) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::JSON, $9::VARCHAR, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13::JSON, now(), $14::TIMESTAMP WITH TIME ZONE, $15::BOOLEAN, $16::VARCHAR, $17::VARCHAR) RETURNING agent_state_snapshots.created_at]\n2025-08-28T15:42:50.087154409Z [parameters: ('6223a5ac-3703-4531-a250-c8751da6df87', 'run_9f5d282b-ac2c-4745-ab6c-1b8418427760', 'thread_dev-temp-cc173c1d', 'dev-temp-cc173c1d', '1.0', '1.0', 'auto', '{\"user_request\": \"My chatbot response time is too slow at 3 seconds. Can you optimize it to under 1 second without increasing costs?\", \"chat_thread_i ... (436 characters truncated) ... 0:00\", \"execution_context\": {}, \"custom_fields\": {}, \"priority\": null, \"retry_count\": 0, \"parent_agent_id\": null, \"tags\": []}, \"quality_metrics\": {}}', 'json', None, 0, 'initialization', '{\"step_count\": 0}', datetime.datetime(2025, 9, 4, 15, 42, 50, 65277, tzinfo=datetime.timezone.utc), True, None, None)]\n2025-08-28T15:42:50.087158145Z (Background on this error at: https://sqlalche.me/e/20/gkpj)\u001b[0m\n2025-08-28T15:42:50.102739724Z \u001b[32m2025-08-28 15:42:50.080\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_completed\", \"flow_id\": \"flow_0a86afc5\", \"correlation_id\": \"run_9f5d282b-ac2c-4745-ab6c-1b8418427760\", \"timestamp\": 1756395770.0803273, \"step_name\": \"initialize_state\", \"step_type\": \"state_management\", \"state_summary\": {\"total_steps\": 4, \"completed_steps\": 2, \"current_phase\": \"initialize_state\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:50.113810647Z \u001b[32m2025-08-28 15:42:50.081\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_started\", \"flow_id\": \"flow_0a86afc5\", \"correlation_id\": \"run_9f5d282b-ac2c-4745-ab6c-1b8418427760\", \"timestamp\": 1756395770.0814297, \"step_name\": \"build_pipeline\", \"step_type\": \"planning\", \"state_summary\": {\"total_steps\": 4, \"completed_steps\": 2, \"current_phase\": \"build_pipeline\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:50.114774287Z \u001b[32m2025-08-28 15:42:50.082\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_completed\", \"flow_id\": \"flow_0a86afc5\", \"correlation_id\": \"run_9f5d282b-ac2c-4745-ab6c-1b8418427760\", \"timestamp\": 1756395770.0824182, \"step_name\": \"build_pipeline\", \"step_type\": \"planning\", \"state_summary\": {\"total_steps\": 4, \"completed_steps\": 3, \"current_phase\": \"build_pipeline\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:50.115397010Z \u001b[32m2025-08-28 15:42:50.083\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_started\", \"flow_id\": \"flow_0a86afc5\", \"correlation_id\": \"run_9f5d282b-ac2c-4745-ab6c-1b8418427760\", \"timestamp\": 1756395770.083185, \"step_name\": \"execute_pipeline\", \"step_type\": \"execution\", \"state_summary\": {\"total_steps\": 4, \"completed_steps\": 3, \"current_phase\": \"execute_pipeline\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:50.118717203Z \u001b[32m2025-08-28 15:42:50.084\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"flow_started\", \"flow_id\": \"flow_d1bc8fb9\", \"correlation_id\": \"64682067-3f5b-4b78-9aad-50e6b7833c8a\", \"timestamp\": 1756395770.0841777, \"state_summary\": {\"total_steps\": 5, \"completed_steps\": 0, \"current_phase\": \"initialization\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:50.118810498Z \u001b[32m2025-08-28 15:42:50.084\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor parallel execution: {\"type\": \"supervisor_parallel\", \"flow_id\": \"flow_d1bc8fb9\", \"correlation_id\": \"64682067-3f5b-4b78-9aad-50e6b7833c8a\", \"agent_names\": [\"triage\", \"data\", \"optimization\", \"actions\", \"reporting\"], \"agent_count\": 5, \"timestamp\": 1756395770.0845637}\u001b[0m\n2025-08-28T15:42:50.118814118Z \u001b[32m2025-08-28 15:42:50.084\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_started\", \"flow_id\": \"flow_d1bc8fb9\", \"correlation_id\": \"64682067-3f5b-4b78-9aad-50e6b7833c8a\", \"timestamp\": 1756395770.0847251, \"step_name\": \"triage\", \"step_type\": \"agent\", \"state_summary\": {\"total_steps\": 5, \"completed_steps\": 0, \"current_phase\": \"triage\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:50.118816952Z \u001b[32m2025-08-28 15:42:50.084\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_started\", \"flow_id\": \"flow_d1bc8fb9\", \"correlation_id\": \"64682067-3f5b-4b78-9aad-50e6b7833c8a\", \"timestamp\": 1756395770.0848799, \"step_name\": \"data\", \"step_type\": \"agent\", \"state_summary\": {\"total_steps\": 5, \"completed_steps\": 0, \"current_phase\": \"data\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:50.118851729Z \u001b[32m2025-08-28 15:42:50.085\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_started\", \"flow_id\": \"flow_d1bc8fb9\", \"correlation_id\": \"64682067-3f5b-4b78-9aad-50e6b7833c8a\", \"timestamp\": 1756395770.0850263, \"step_name\": \"optimization\", \"step_type\": \"agent\", \"state_summary\": {\"total_steps\": 5, \"completed_steps\": 0, \"current_phase\": \"optimization\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:50.118853919Z \u001b[32m2025-08-28 15:42:50.085\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_started\", \"flow_id\": \"flow_d1bc8fb9\", \"correlation_id\": \"64682067-3f5b-4b78-9aad-50e6b7833c8a\", \"timestamp\": 1756395770.0851753, \"step_name\": \"actions\", \"step_type\": \"agent\", \"state_summary\": {\"total_steps\": 5, \"completed_steps\": 0, \"current_phase\": \"actions\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:50.118896849Z \u001b[32m2025-08-28 15:42:50.085\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_started\", \"flow_id\": \"flow_d1bc8fb9\", \"correlation_id\": \"64682067-3f5b-4b78-9aad-50e6b7833c8a\", \"timestamp\": 1756395770.0853379, \"step_name\": \"reporting\", \"step_type\": \"agent\", \"state_summary\": {\"total_steps\": 5, \"completed_steps\": 0, \"current_phase\": \"reporting\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:50.118911421Z \u001b[32m2025-08-28 15:42:50.089\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.llm.subagent_logger\u001b[0m:\u001b[36m_log_communication_json\u001b[0m:\u001b[36m72\u001b[0m | \u001b[1mAgent communication: {\"type\": \"agent_communication\", \"from_agent\": \"Supervisor\", \"to_agent\": \"OptimizationsCoreSubAgent\", \"correlation_id\": \"run_9f5d282b-ac2c-4745-ab6c-1b8418427760\", \"message_type\": \"execute_request\", \"timestamp\": 1756395770.089098}\u001b[0m\n2025-08-28T15:42:50.118990003Z \u001b[32m2025-08-28 15:42:50.090\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.llm.subagent_logger\u001b[0m:\u001b[36m_log_communication_json\u001b[0m:\u001b[36m72\u001b[0m | \u001b[1mAgent communication: {\"type\": \"agent_communication\", \"from_agent\": \"Supervisor\", \"to_agent\": \"ActionsToMeetGoalsSubAgent\", \"correlation_id\": \"run_9f5d282b-ac2c-4745-ab6c-1b8418427760\", \"message_type\": \"execute_request\", \"timestamp\": 1756395770.0901606}\u001b[0m\n2025-08-28T15:42:50.119073980Z \u001b[32m2025-08-28 15:42:50.091\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.llm.subagent_logger\u001b[0m:\u001b[36m_log_communication_json\u001b[0m:\u001b[36m72\u001b[0m | \u001b[1mAgent communication: {\"type\": \"agent_communication\", \"from_agent\": \"Supervisor\", \"to_agent\": \"ReportingSubAgent\", \"correlation_id\": \"run_9f5d282b-ac2c-4745-ab6c-1b8418427760\", \"message_type\": \"execute_request\", \"timestamp\": 1756395770.0917597}\u001b[0m\n2025-08-28T15:42:50.119079465Z \u001b[32m2025-08-28 15:42:50.094\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.agents.optimizations_core_sub_agent\u001b[0m:\u001b[36m_create_fallback_result\u001b[0m:\u001b[36m165\u001b[0m | \u001b[33m\u001b[1mUsing fallback optimization for run_id: run_9f5d282b-ac2c-4745-ab6c-1b8418427760\u001b[0m\n2025-08-28T15:42:50.119278308Z \u001b[32m2025-08-28 15:42:50.096\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36msend_to_user\u001b[0m:\u001b[36m242\u001b[0m | \u001b[33m\u001b[1mNo connections found for user run_9f5d282b-ac2c-4745-ab6c-1b8418427760\u001b[0m\n2025-08-28T15:42:50.119316708Z \u001b[32m2025-08-28 15:42:50.097\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.llm.subagent_logger\u001b[0m:\u001b[36m_log_input_json\u001b[0m:\u001b[36m91\u001b[0m | \u001b[1mAgent input: {\"type\": \"agent_input\", \"from_agent\": \"ReportingSubAgent\", \"to_agent\": \"LLM\", \"data_size\": 7696, \"correlation_id\": \"1538615a-57f4-4065-82f3-6f5b594ef398\", \"timestamp\": 1756395770.097524}\u001b[0m\n2025-08-28T15:42:50.119321399Z \u001b[32m2025-08-28 15:42:50.098\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.triage_sub_agent.executor\u001b[0m:\u001b[36m_log_execution_start\u001b[0m:\u001b[36m247\u001b[0m | \u001b[1mTriageSubAgent starting execution for run_id: run_9f5d282b-ac2c-4745-ab6c-1b8418427760\u001b[0m\n2025-08-28T15:42:50.119444626Z \u001b[32m2025-08-28 15:42:50.100\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36msend_to_user\u001b[0m:\u001b[36m242\u001b[0m | \u001b[33m\u001b[1mNo connections found for user run_9f5d282b-ac2c-4745-ab6c-1b8418427760\u001b[0m\n2025-08-28T15:42:50.119555796Z \u001b[32m2025-08-28 15:42:50.101\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.agents.data_sub_agent.execution_engine\u001b[0m:\u001b[36mexecute_analysis\u001b[0m:\u001b[36m210\u001b[0m | \u001b[31m\u001b[1mData analysis failed: 'ModernClickHouseOperations' object has no attribute 'analyze_performance_metrics'\u001b[0m\n2025-08-28T15:42:50.119664362Z \u001b[32m2025-08-28 15:42:50.109\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36msend_to_user\u001b[0m:\u001b[36m242\u001b[0m | \u001b[33m\u001b[1mNo connections found for user run_9f5d282b-ac2c-4745-ab6c-1b8418427760\u001b[0m\n2025-08-28T15:42:50.119783653Z \u001b[32m2025-08-28 15:42:50.113\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.llm.subagent_logger\u001b[0m:\u001b[36m_log_communication_json\u001b[0m:\u001b[36m72\u001b[0m | \u001b[1mAgent communication: {\"type\": \"agent_communication\", \"from_agent\": \"OptimizationsCoreSubAgent\", \"to_agent\": \"Supervisor\", \"correlation_id\": \"run_9f5d282b-ac2c-4745-ab6c-1b8418427760\", \"message_type\": \"execute_response\", \"timestamp\": 1756395770.1131532}\u001b[0m\n2025-08-28T15:42:50.119933666Z \u001b[32m2025-08-28 15:42:50.113\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.agents.actions_to_meet_goals_sub_agent\u001b[0m:\u001b[36m_handle_execution_failure\u001b[0m:\u001b[36m230\u001b[0m | \u001b[31m\u001b[1mExecution failed: UNKNOWN: Agent Missing required state: optimizations_result and data_result required execution failed in Missing required state: optimizations_result and data_result required\u001b[0m\n2025-08-28T15:42:50.120593723Z \u001b[32m2025-08-28 15:42:50.114\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.llm.subagent_logger\u001b[0m:\u001b[36m_log_communication_json\u001b[0m:\u001b[36m72\u001b[0m | \u001b[1mAgent communication: {\"type\": \"agent_communication\", \"from_agent\": \"ActionsToMeetGoalsSubAgent\", \"to_agent\": \"Supervisor\", \"correlation_id\": \"run_9f5d282b-ac2c-4745-ab6c-1b8418427760\", \"message_type\": \"execute_response\", \"timestamp\": 1756395770.1142128}\u001b[0m\n2025-08-28T15:42:50.120625122Z \u001b[32m2025-08-28 15:42:50.114\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.llm.subagent_logger\u001b[0m:\u001b[36m_log_input_json\u001b[0m:\u001b[36m91\u001b[0m | \u001b[1mAgent input: {\"type\": \"agent_input\", \"from_agent\": \"TriageSubAgent\", \"to_agent\": \"LLM\", \"data_size\": 3091, \"correlation_id\": \"cc4f9c21-b8b5-4910-a2a8-0d54ef281afb\", \"timestamp\": 1756395770.1146708}\u001b[0m\n2025-08-28T15:42:50.120628813Z \u001b[32m2025-08-28 15:42:50.115\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.llm.llm_structured_operations\u001b[0m:\u001b[36m_fallback_structured_parse\u001b[0m:\u001b[36m103\u001b[0m | \u001b[31m\u001b[1mStructured generation failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:42:50.120977344Z \u001b[32m2025-08-28 15:42:50.115\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.llm.llm_structured_operations\u001b[0m:\u001b[36m_handle_fallback_failure\u001b[0m:\u001b[36m119\u001b[0m | \u001b[31m\u001b[1mFallback parsing also failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:42:50.121029462Z \u001b[32m2025-08-28 15:42:50.115\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.llm.subagent_logger\u001b[0m:\u001b[36m_log_output_json\u001b[0m:\u001b[36m110\u001b[0m | \u001b[1mAgent output: {\"type\": \"agent_output\", \"to_agent\": \"LLM\", \"from_agent\": \"TriageSubAgent\", \"correlation_id\": \"cc4f9c21-b8b5-4910-a2a8-0d54ef281afb\", \"timestamp\": 1756395770.1159153, \"data_size\": 0, \"status\": \"error\"}\u001b[0m\n2025-08-28T15:42:50.122200101Z \u001b[32m2025-08-28 15:42:50.116\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.llm.subagent_logger\u001b[0m:\u001b[36m_log_input_json\u001b[0m:\u001b[36m91\u001b[0m | \u001b[1mAgent input: {\"type\": \"agent_input\", \"from_agent\": \"TriageSubAgent-Fallback\", \"to_agent\": \"LLM\", \"data_size\": 3144, \"correlation_id\": \"34091f8e-0bf0-45e8-9691-ebf58000be40\", \"timestamp\": 1756395770.1160934}\u001b[0m\n2025-08-28T15:42:50.125717669Z \u001b[32m2025-08-28 15:42:50.121\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.llm.subagent_logger\u001b[0m:\u001b[36m_log_output_json\u001b[0m:\u001b[36m110\u001b[0m | \u001b[1mAgent output: {\"type\": \"agent_output\", \"to_agent\": \"LLM\", \"from_agent\": \"ReportingSubAgent\", \"correlation_id\": \"1538615a-57f4-4065-82f3-6f5b594ef398\", \"timestamp\": 1756395770.1213894, \"data_size\": 0, \"status\": \"error\"}\u001b[0m\n2025-08-28T15:42:50.126307908Z \u001b[32m2025-08-28 15:42:50.122\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.core.reliability\u001b[0m:\u001b[36m_log_fallback_attempt\u001b[0m:\u001b[36m239\u001b[0m | \u001b[33m\u001b[1mReportingSubAgent.execute_reporting: Primary operation failed, trying fallback: 'RetryConfig' object has no attribute 'exponential_base'\u001b[0m\n2025-08-28T15:42:50.128540465Z \u001b[32m2025-08-28 15:42:50.122\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.agents.reporting_sub_agent\u001b[0m:\u001b[36m_fallback_reporting\u001b[0m:\u001b[36m181\u001b[0m | \u001b[33m\u001b[1mUsing fallback reporting for run_id: run_9f5d282b-ac2c-4745-ab6c-1b8418427760\u001b[0m\n2025-08-28T15:42:50.128633820Z \u001b[32m2025-08-28 15:42:50.123\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36msend_to_user\u001b[0m:\u001b[36m242\u001b[0m | \u001b[33m\u001b[1mNo connections found for user run_9f5d282b-ac2c-4745-ab6c-1b8418427760\u001b[0m\n2025-08-28T15:42:50.128685822Z \u001b[32m2025-08-28 15:42:50.124\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.llm.subagent_logger\u001b[0m:\u001b[36m_log_communication_json\u001b[0m:\u001b[36m72\u001b[0m | \u001b[1mAgent communication: {\"type\": \"agent_communication\", \"from_agent\": \"ReportingSubAgent\", \"to_agent\": \"Supervisor\", \"correlation_id\": \"run_9f5d282b-ac2c-4745-ab6c-1b8418427760\", \"message_type\": \"execute_response\", \"timestamp\": 1756395770.1242654}\u001b[0m\n2025-08-28T15:42:50.131104009Z \u001b[32m2025-08-28 15:42:50.129\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.agents.triage_sub_agent.llm_processor\u001b[0m:\u001b[36m_handle_fallback_error\u001b[0m:\u001b[36m234\u001b[0m | \u001b[31m\u001b[1mLLM fallback processing failed for run_9f5d282b-ac2c-4745-ab6c-1b8418427760: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:42:50.134031712Z \u001b[32m2025-08-28 15:42:50.131\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.llm.fallback_strategies\u001b[0m:\u001b[36m_log_retry_warning\u001b[0m:\u001b[36m102\u001b[0m | \u001b[33m\u001b[1mLLM operation triage_analysis failed (attempt 1/3): None. Retrying in 1.17s\u001b[0m\n2025-08-28T15:42:51.306409239Z \u001b[32m2025-08-28 15:42:51.305\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36msend_to_user\u001b[0m:\u001b[36m242\u001b[0m | \u001b[33m\u001b[1mNo connections found for user run_9f5d282b-ac2c-4745-ab6c-1b8418427760\u001b[0m\n2025-08-28T15:42:51.308281393Z \u001b[32m2025-08-28 15:42:51.306\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.llm.subagent_logger\u001b[0m:\u001b[36m_log_input_json\u001b[0m:\u001b[36m91\u001b[0m | \u001b[1mAgent input: {\"type\": \"agent_input\", \"from_agent\": \"TriageSubAgent\", \"to_agent\": \"LLM\", \"data_size\": 3091, \"correlation_id\": \"71ba5184-1f03-4644-8216-72eb40856296\", \"timestamp\": 1756395771.306283}\u001b[0m\n2025-08-28T15:42:51.308313236Z \u001b[32m2025-08-28 15:42:51.306\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.llm.llm_structured_operations\u001b[0m:\u001b[36m_fallback_structured_parse\u001b[0m:\u001b[36m103\u001b[0m | \u001b[31m\u001b[1mStructured generation failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:42:51.308316713Z \u001b[32m2025-08-28 15:42:51.307\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.llm.llm_structured_operations\u001b[0m:\u001b[36m_handle_fallback_failure\u001b[0m:\u001b[36m119\u001b[0m | \u001b[31m\u001b[1mFallback parsing also failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:42:51.308738579Z \u001b[32m2025-08-28 15:42:51.307\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.llm.subagent_logger\u001b[0m:\u001b[36m_log_output_json\u001b[0m:\u001b[36m110\u001b[0m | \u001b[1mAgent output: {\"type\": \"agent_output\", \"to_agent\": \"LLM\", \"from_agent\": \"TriageSubAgent\", \"correlation_id\": \"71ba5184-1f03-4644-8216-72eb40856296\", \"timestamp\": 1756395771.3072233, \"data_size\": 0, \"status\": \"error\"}\u001b[0m\n2025-08-28T15:42:51.308842906Z \u001b[32m2025-08-28 15:42:51.307\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.llm.subagent_logger\u001b[0m:\u001b[36m_log_input_json\u001b[0m:\u001b[36m91\u001b[0m | \u001b[1mAgent input: {\"type\": \"agent_input\", \"from_agent\": \"TriageSubAgent-Fallback\", \"to_agent\": \"LLM\", \"data_size\": 3144, \"correlation_id\": \"19e43d2c-7f0d-486a-8f1e-ae51f8807b29\", \"timestamp\": 1756395771.307429}\u001b[0m\n2025-08-28T15:42:51.312344262Z \u001b[32m2025-08-28 15:42:51.311\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.agents.triage_sub_agent.llm_processor\u001b[0m:\u001b[36m_handle_fallback_error\u001b[0m:\u001b[36m234\u001b[0m | \u001b[31m\u001b[1mLLM fallback processing failed for run_9f5d282b-ac2c-4745-ab6c-1b8418427760: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:42:51.312369793Z \u001b[32m2025-08-28 15:42:51.311\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.llm.fallback_strategies\u001b[0m:\u001b[36m_log_retry_warning\u001b[0m:\u001b[36m102\u001b[0m | \u001b[33m\u001b[1mLLM operation triage_analysis failed (attempt 2/3): None. Retrying in 2.43s\u001b[0m\n2025-08-28T15:42:51.312372018Z \u001b[32m2025-08-28 15:42:51.311\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.core.resilience.unified_circuit_breaker\u001b[0m:\u001b[36m_transition_to_open\u001b[0m:\u001b[36m513\u001b[0m | \u001b[33m\u001b[1mCircuit breaker 'CircuitConfig(name='llm_fallback_triage', failure_threshold=3, recovery_timeout=30.0, half_open_max_calls=3, timeout_seconds=10.0, adaptive_threshold=True, slow_call_threshold=5.0, sliding_window_size=100)' -> OPEN\u001b[0m\n2025-08-28T15:42:52.977190124Z \u001b[32m2025-08-28 15:42:52.973\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m41\u001b[0m | \u001b[1mSecurityResponseMiddleware processing: /health\u001b[0m\n2025-08-28T15:42:52.980167245Z \u001b[32m2025-08-28 15:42:52.976\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.request_context\u001b[0m:\u001b[36mlog_request_details\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mRequest: GET /health | Status: 200 | Duration: 2.15ms | Trace: trace_ad21d30ffd764658\u001b[0m\n2025-08-28T15:42:52.980304007Z \u001b[32m2025-08-28 15:42:52.977\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m47\u001b[0m | \u001b[1mResponse for /health: status=200, is_api=False, has_auth=False\u001b[0m\n2025-08-28T15:42:52.980313191Z \u001b[32m2025-08-28 15:42:52.978\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m127.0.0.1:55088 - \"GET /health HTTP/1.1\" 200\u001b[0m\n2025-08-28T15:42:53.741982972Z \u001b[32m2025-08-28 15:42:53.741\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36msend_to_user\u001b[0m:\u001b[36m242\u001b[0m | \u001b[33m\u001b[1mNo connections found for user run_9f5d282b-ac2c-4745-ab6c-1b8418427760\u001b[0m\n2025-08-28T15:42:53.742230166Z \u001b[32m2025-08-28 15:42:53.741\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.llm.subagent_logger\u001b[0m:\u001b[36m_log_input_json\u001b[0m:\u001b[36m91\u001b[0m | \u001b[1mAgent input: {\"type\": \"agent_input\", \"from_agent\": \"TriageSubAgent\", \"to_agent\": \"LLM\", \"data_size\": 3091, \"correlation_id\": \"d75f281d-1807-4e39-826d-ee2af74ffe2b\", \"timestamp\": 1756395773.74172}\u001b[0m\n2025-08-28T15:42:53.743501397Z \u001b[32m2025-08-28 15:42:53.742\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.llm.llm_structured_operations\u001b[0m:\u001b[36m_fallback_structured_parse\u001b[0m:\u001b[36m103\u001b[0m | \u001b[31m\u001b[1mStructured generation failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:42:53.743978245Z \u001b[32m2025-08-28 15:42:53.742\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.llm.llm_structured_operations\u001b[0m:\u001b[36m_handle_fallback_failure\u001b[0m:\u001b[36m119\u001b[0m | \u001b[31m\u001b[1mFallback parsing also failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:42:53.743985976Z \u001b[32m2025-08-28 15:42:53.742\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.llm.subagent_logger\u001b[0m:\u001b[36m_log_output_json\u001b[0m:\u001b[36m110\u001b[0m | \u001b[1mAgent output: {\"type\": \"agent_output\", \"to_agent\": \"LLM\", \"from_agent\": \"TriageSubAgent\", \"correlation_id\": \"d75f281d-1807-4e39-826d-ee2af74ffe2b\", \"timestamp\": 1756395773.7426498, \"data_size\": 0, \"status\": \"error\"}\u001b[0m\n2025-08-28T15:42:53.743988453Z \u001b[32m2025-08-28 15:42:53.742\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.llm.subagent_logger\u001b[0m:\u001b[36m_log_input_json\u001b[0m:\u001b[36m91\u001b[0m | \u001b[1mAgent input: {\"type\": \"agent_input\", \"from_agent\": \"TriageSubAgent-Fallback\", \"to_agent\": \"LLM\", \"data_size\": 3144, \"correlation_id\": \"2aef3fc1-5c7a-4c44-87f6-80c8e315e81d\", \"timestamp\": 1756395773.7427936}\u001b[0m\n2025-08-28T15:42:53.747657474Z \u001b[32m2025-08-28 15:42:53.745\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.agents.triage_sub_agent.llm_processor\u001b[0m:\u001b[36m_handle_fallback_error\u001b[0m:\u001b[36m234\u001b[0m | \u001b[31m\u001b[1mLLM fallback processing failed for run_9f5d282b-ac2c-4745-ab6c-1b8418427760: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:42:53.747733785Z \u001b[32m2025-08-28 15:42:53.745\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.llm.retry_helpers\u001b[0m:\u001b[36mlog_final_failure\u001b[0m:\u001b[36m51\u001b[0m | \u001b[31m\u001b[1mLLM operation triage_analysis failed after 3 attempts: None\u001b[0m\n2025-08-28T15:42:53.747982900Z \u001b[32m2025-08-28 15:42:53.746\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36msend_to_user\u001b[0m:\u001b[36m242\u001b[0m | \u001b[33m\u001b[1mNo connections found for user run_9f5d282b-ac2c-4745-ab6c-1b8418427760\u001b[0m\n2025-08-28T15:42:53.748230727Z /usr/local/lib/python3.11/site-packages/pydantic/main.py:463: UserWarning: Pydantic serializer warnings:\n2025-08-28T15:42:53.748268411Z   PydanticSerializationUnexpectedValue(Expected `TriageResult` - serialized value may not be as expected [input_value={'category': 'Error', 'se...equire_approval': False}, input_type=dict])\n2025-08-28T15:42:53.748275604Z   return self.__pydantic_serializer__.to_python(\n2025-08-28T15:42:53.748278761Z \u001b[32m2025-08-28 15:42:53.746\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.core.resilience.unified_circuit_breaker\u001b[0m:\u001b[36m_transition_to_open\u001b[0m:\u001b[36m513\u001b[0m | \u001b[33m\u001b[1mCircuit breaker 'CircuitConfig(name='llm_fallback_triage', failure_threshold=3, recovery_timeout=30.0, half_open_max_calls=3, timeout_seconds=10.0, adaptive_threshold=True, slow_call_threshold=5.0, sliding_window_size=100)' -> OPEN\u001b[0m\n2025-08-28T15:42:53.748299254Z \u001b[32m2025-08-28 15:42:53.746\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_completed\", \"flow_id\": \"flow_d1bc8fb9\", \"correlation_id\": \"64682067-3f5b-4b78-9aad-50e6b7833c8a\", \"timestamp\": 1756395773.7467895, \"step_name\": \"triage\", \"step_type\": \"agent\", \"state_summary\": {\"total_steps\": 5, \"completed_steps\": 1, \"current_phase\": \"reporting\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:53.748322179Z \u001b[32m2025-08-28 15:42:53.746\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_completed\", \"flow_id\": \"flow_d1bc8fb9\", \"correlation_id\": \"64682067-3f5b-4b78-9aad-50e6b7833c8a\", \"timestamp\": 1756395773.7469342, \"step_name\": \"data\", \"step_type\": \"agent\", \"state_summary\": {\"total_steps\": 5, \"completed_steps\": 2, \"current_phase\": \"reporting\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:53.748382196Z \u001b[32m2025-08-28 15:42:53.747\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_completed\", \"flow_id\": \"flow_d1bc8fb9\", \"correlation_id\": \"64682067-3f5b-4b78-9aad-50e6b7833c8a\", \"timestamp\": 1756395773.7470486, \"step_name\": \"optimization\", \"step_type\": \"agent\", \"state_summary\": {\"total_steps\": 5, \"completed_steps\": 3, \"current_phase\": \"reporting\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:53.750036497Z \u001b[32m2025-08-28 15:42:53.747\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_completed\", \"flow_id\": \"flow_d1bc8fb9\", \"correlation_id\": \"64682067-3f5b-4b78-9aad-50e6b7833c8a\", \"timestamp\": 1756395773.7471519, \"step_name\": \"actions\", \"step_type\": \"agent\", \"state_summary\": {\"total_steps\": 5, \"completed_steps\": 4, \"current_phase\": \"reporting\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:53.750270775Z \u001b[32m2025-08-28 15:42:53.747\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_completed\", \"flow_id\": \"flow_d1bc8fb9\", \"correlation_id\": \"64682067-3f5b-4b78-9aad-50e6b7833c8a\", \"timestamp\": 1756395773.747252, \"step_name\": \"reporting\", \"step_type\": \"agent\", \"state_summary\": {\"total_steps\": 5, \"completed_steps\": 5, \"current_phase\": \"reporting\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:53.750378996Z \u001b[32m2025-08-28 15:42:53.748\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.pipeline_executor\u001b[0m:\u001b[36m_persist_batched_state\u001b[0m:\u001b[36m201\u001b[0m | \u001b[31m\u001b[1mError in batched state persistence: PIPELINE_COMPLETE\u001b[0m\n2025-08-28T15:42:53.750399156Z \u001b[32m2025-08-28 15:42:53.749\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"flow_completed\", \"flow_id\": \"flow_d1bc8fb9\", \"correlation_id\": \"64682067-3f5b-4b78-9aad-50e6b7833c8a\", \"timestamp\": 1756395773.749105, \"state_summary\": {\"total_steps\": 5, \"completed_steps\": 5, \"current_phase\": \"reporting\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:53.754121465Z \u001b[32m2025-08-28 15:42:53.751\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.state_persistence\u001b[0m:\u001b[36m_ensure_user_exists_for_snapshot\u001b[0m:\u001b[36m433\u001b[0m | \u001b[1mAuto-creating dev/test user for state persistence: dev-temp-cc173c1d\u001b[0m\n2025-08-28T15:42:53.754182672Z \u001b[32m2025-08-28 15:42:53.752\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.services.state_persistence\u001b[0m:\u001b[36m_ensure_user_exists_for_snapshot\u001b[0m:\u001b[36m449\u001b[0m | \u001b[33m\u001b[1mCould not auto-create dev user dev-temp-cc173c1d: 1 validation error for UserCreate\n2025-08-28T15:42:53.754190016Z email\n2025-08-28T15:42:53.754192893Z   value is not a valid email address: The part after the @-sign is a special-use or reserved name that cannot be used with email. [type=value_error, input_value='dev-temp-cc173c1d@dev.local', input_type=str]\u001b[0m\n2025-08-28T15:42:53.757384618Z \u001b[32m2025-08-28 15:42:53.755\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.services.state_persistence\u001b[0m:\u001b[36m_handle_save_error\u001b[0m:\u001b[36m402\u001b[0m | \u001b[31m\u001b[1mFailed to save state for run run_9f5d282b-ac2c-4745-ab6c-1b8418427760: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.ForeignKeyViolationError'>: insert or update on table \"agent_state_snapshots\" violates foreign key constraint \"agent_state_snapshots_user_id_fkey\"\n2025-08-28T15:42:53.757435577Z DETAIL:  Key (user_id)=(dev-temp-cc173c1d) is not present in table \"userbase\".\n2025-08-28T15:42:53.757443579Z [SQL: INSERT INTO agent_state_snapshots (id, run_id, thread_id, user_id, version, schema_version, checkpoint_type, state_data, serialization_format, compression_type, step_count, agent_phase, execution_context, created_at, expires_at, is_recovery_point, recovery_reason, parent_snapshot_id) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::JSON, $9::VARCHAR, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13::JSON, now(), $14::TIMESTAMP WITH TIME ZONE, $15::BOOLEAN, $16::VARCHAR, $17::VARCHAR) RETURNING agent_state_snapshots.created_at]\n2025-08-28T15:42:53.757447879Z [parameters: ('bf5bf752-f507-4956-bfc6-286de3d6649c', 'run_9f5d282b-ac2c-4745-ab6c-1b8418427760', 'thread_dev-temp-cc173c1d', 'dev-temp-cc173c1d', '1.0', '1.0', 'auto', '{\"user_request\": \"My chatbot response time is too slow at 3 seconds. Can you optimize it to under 1 second without increasing costs?\", \"chat_thread_i ... (3152 characters truncated) ... \", \"last_updated\": \"2025-08-28T15:42:50.041463Z\", \"execution_context\": {}, \"custom_fields\": {}, \"retry_count\": 0, \"tags\": []}, \"quality_metrics\": {}}', 'compressed_json', None, 0, None, '{}', datetime.datetime(2025, 9, 4, 15, 42, 53, 752690, tzinfo=datetime.timezone.utc), False, None, None)]\n2025-08-28T15:42:53.757451984Z (Background on this error at: https://sqlalche.me/e/20/gkpj)\u001b[0m\n2025-08-28T15:42:53.758398186Z \u001b[32m2025-08-28 15:42:53.756\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36msend_to_thread\u001b[0m:\u001b[36m300\u001b[0m | \u001b[33m\u001b[1mNo active connections found for thread thread_dev-temp-cc173c1d\u001b[0m\n2025-08-28T15:42:53.758779920Z \u001b[32m2025-08-28 15:42:53.756\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_completed\", \"flow_id\": \"flow_0a86afc5\", \"correlation_id\": \"run_9f5d282b-ac2c-4745-ab6c-1b8418427760\", \"timestamp\": 1756395773.7566242, \"step_name\": \"execute_pipeline\", \"step_type\": \"execution\", \"state_summary\": {\"total_steps\": 4, \"completed_steps\": 4, \"current_phase\": \"execute_pipeline\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:53.758938616Z \u001b[32m2025-08-28 15:42:53.756\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"flow_completed\", \"flow_id\": \"flow_0a86afc5\", \"correlation_id\": \"run_9f5d282b-ac2c-4745-ab6c-1b8418427760\", \"timestamp\": 1756395773.756865, \"state_summary\": {\"total_steps\": 4, \"completed_steps\": 4, \"current_phase\": \"execute_pipeline\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:53.761394711Z \u001b[32m2025-08-28 15:42:53.760\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.database.base_crud\u001b[0m:\u001b[36m_create_entity\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1mCreated Message with id: msg_69fa3c56-5ede-47da-8259-a9f128e85c14\u001b[0m\n2025-08-28T15:42:53.769504533Z \u001b[32m2025-08-28 15:42:53.768\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.database.base_crud\u001b[0m:\u001b[36m_execute_update_operation\u001b[0m:\u001b[36m129\u001b[0m | \u001b[1mUpdated Run with id: run_9f5d282b-ac2c-4745-ab6c-1b8418427760\u001b[0m\n2025-08-28T15:42:53.771278982Z \u001b[32m2025-08-28 15:42:53.770\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36m_send_to_connection\u001b[0m:\u001b[36m374\u001b[0m | \u001b[31m\u001b[1mError sending to connection conn_dev-temp-cc173c1d_3052f606: Object of type DeepAgentState is not JSON serializable\u001b[0m\n2025-08-28T15:42:53.775558713Z \u001b[32m2025-08-28 15:42:53.773\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36m_cleanup_connection\u001b[0m:\u001b[36m220\u001b[0m | \u001b[1mWebSocket closed for connection conn_dev-temp-cc173c1d_3052f606: 1011 - Send error\u001b[0m\n2025-08-28T15:42:53.775600892Z \u001b[32m2025-08-28 15:42:53.774\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.agent_handler\u001b[0m:\u001b[36m_handle_start_agent\u001b[0m:\u001b[36m123\u001b[0m | \u001b[1mSuccessfully processed start_agent for dev-temp-cc173c1d\u001b[0m\n2025-08-28T15:42:53.775603778Z \u001b[32m2025-08-28 15:42:53.774\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mconnection closed\u001b[0m\n2025-08-28T15:42:53.775605350Z \u001b[32m2025-08-28 15:42:53.774\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mconnection closed\u001b[0m\n2025-08-28T15:42:53.775606896Z \u001b[32m2025-08-28 15:42:53.775\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36m_handle_websocket_messages\u001b[0m:\u001b[36m368\u001b[0m | \u001b[31m\u001b[1mMessage handling error for conn_dev-temp-cc173c1d_3052f606: WebSocket is not connected. Need to call \"accept\" first.\u001b[0m\n2025-08-28T15:42:53.876730656Z \u001b[32m2025-08-28 15:42:53.875\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36m_handle_websocket_messages\u001b[0m:\u001b[36m368\u001b[0m | \u001b[31m\u001b[1mMessage handling error for conn_dev-temp-cc173c1d_3052f606: WebSocket is not connected. Need to call \"accept\" first.\u001b[0m\n2025-08-28T15:42:54.078450324Z \u001b[32m2025-08-28 15:42:54.077\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36m_handle_websocket_messages\u001b[0m:\u001b[36m368\u001b[0m | \u001b[31m\u001b[1mMessage handling error for conn_dev-temp-cc173c1d_3052f606: WebSocket is not connected. Need to call \"accept\" first.\u001b[0m\n2025-08-28T15:42:54.478300503Z \u001b[32m2025-08-28 15:42:54.477\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36m_handle_websocket_messages\u001b[0m:\u001b[36m368\u001b[0m | \u001b[31m\u001b[1mMessage handling error for conn_dev-temp-cc173c1d_3052f606: WebSocket is not connected. Need to call \"accept\" first.\u001b[0m\n2025-08-28T15:42:55.280205451Z \u001b[32m2025-08-28 15:42:55.279\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36m_handle_websocket_messages\u001b[0m:\u001b[36m368\u001b[0m | \u001b[31m\u001b[1mMessage handling error for conn_dev-temp-cc173c1d_3052f606: WebSocket is not connected. Need to call \"accept\" first.\u001b[0m\n2025-08-28T15:42:55.280733356Z \u001b[32m2025-08-28 15:42:55.279\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36m_handle_websocket_messages\u001b[0m:\u001b[36m371\u001b[0m | \u001b[31m\u001b[1mToo many errors, closing connection conn_dev-temp-cc173c1d_3052f606\u001b[0m\n2025-08-28T15:42:55.280757385Z \u001b[32m2025-08-28 15:42:55.279\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36m_handle_websocket_messages\u001b[0m:\u001b[36m383\u001b[0m | \u001b[1mExiting message handling loop for connection: conn_dev-temp-cc173c1d_3052f606 | Duration: 7.7s | Messages processed: 1 | Errors: 5 | User: dev-temp-cc173c1d\u001b[0m\n2025-08-28T15:42:55.280759785Z \u001b[32m2025-08-28 15:42:55.279\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36mwebsocket_endpoint\u001b[0m:\u001b[36m198\u001b[0m | \u001b[1mMessage handling loop ended for connection: conn_dev-temp-cc173c1d_3052f606\u001b[0m\n2025-08-28T15:42:55.280761275Z \u001b[32m2025-08-28 15:42:55.279\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.auth\u001b[0m:\u001b[36mcleanup\u001b[0m:\u001b[36m349\u001b[0m | \u001b[1mWebSocket authenticator cleanup completed\u001b[0m\n2025-08-28T15:42:55.280763080Z \u001b[32m2025-08-28 15:42:55.280\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36mwebsocket_endpoint\u001b[0m:\u001b[36m255\u001b[0m | \u001b[1mWebSocket cleanup completed: conn_dev-temp-cc173c1d_3052f606\u001b[0m\n2025-08-28T15:42:57.043440799Z \u001b[32m2025-08-28 15:42:57.040\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_index_optimization_background\u001b[0m:\u001b[36m232\u001b[0m | \u001b[1mStarting background database index optimization...\u001b[0m\n2025-08-28T15:42:57.043469781Z \u001b[32m2025-08-28 15:42:57.041\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.db.database_index_manager\u001b[0m:\u001b[36moptimize_all_databases\u001b[0m:\u001b[36m129\u001b[0m | \u001b[1mStarting database optimization across all databases\u001b[0m\n2025-08-28T15:42:57.043471912Z \u001b[32m2025-08-28 15:42:57.041\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.db.index_optimizer_core\u001b[0m:\u001b[36mlog_engine_unavailable\u001b[0m:\u001b[36m52\u001b[0m | \u001b[33m\u001b[1mAsync engine not available, skipping index creation\u001b[0m\n2025-08-28T15:42:57.043489839Z \u001b[32m2025-08-28 15:42:57.042\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.db.clickhouse\u001b[0m:\u001b[36m_create_mock_client\u001b[0m:\u001b[36m132\u001b[0m | \u001b[1m[ClickHouse] Using MOCK client for development\u001b[0m\n2025-08-28T15:42:57.043491391Z \u001b[32m2025-08-28 15:42:57.042\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.db.clickhouse\u001b[0m:\u001b[36m_create_mock_client\u001b[0m:\u001b[36m132\u001b[0m | \u001b[1m[ClickHouse] Using MOCK client for development\u001b[0m\n2025-08-28T15:42:57.043492707Z \u001b[32m2025-08-28 15:42:57.042\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.db.database_index_manager\u001b[0m:\u001b[36moptimize_all_databases\u001b[0m:\u001b[36m138\u001b[0m | \u001b[1mDatabase optimization completed - PostgreSQL: True, ClickHouse: True\u001b[0m\n2025-08-28T15:42:57.043507810Z \u001b[32m2025-08-28 15:42:57.042\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_index_optimization_background\u001b[0m:\u001b[36m239\u001b[0m | \u001b[1mBackground database optimization completed successfully: {'postgres': {'indexes_created': {}, 'recommendations': [{'table_name': 'userbase', 'columns': ['email'], 'index_type': 'btree', 'reason': 'Frequent user lookups by email', 'estimated_benefit': 0.0, 'priority': 1}, {'table_name': 'corpus_audit_logs', 'columns': ['timestamp'], 'index_type': 'btree', 'reason': 'Time-based audit queries', 'estimated_benefit': 0.0, 'priority': 1}, {'table_name': 'corpus_audit_logs', 'columns': ['user_id', 'action'], 'index_type': 'btree', 'reason': 'User action filtering', 'estimated_benefit': 0.0, 'priority': 2}, {'table_name': 'secret', 'columns': ['user_id'], 'index_type': 'btree', 'reason': 'User secret lookups', 'estimated_benefit': 0.0, 'priority': 2}, {'table_name': 'agent_states', 'columns': ['session_id'], 'index_type': 'btree', 'reason': 'Session-based state lookups', 'estimated_benefit': 0.0, 'priority': 2}], 'usage_stats': {}}, 'clickhouse': {'table_optimizations': {'netra_content_corpus': False, 'netra_audit_events': False, 'netra_performance_metrics': False, 'netra_agent_logs': False}, 'materialized_views': {'user_daily_activity': False, 'hourly_performance_metrics': False}}, 'recommendations': []}\u001b[0m\n2025-08-28T15:42:58.788054099Z \u001b[32m2025-08-28 15:42:58.783\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m('172.18.0.1', 45122) - \"WebSocket /ws\" [accepted]\u001b[0m\n2025-08-28T15:42:58.789787861Z \u001b[32m2025-08-28 15:42:58.784\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m('172.18.0.1', 45122) - \"WebSocket /ws\" [accepted]\u001b[0m\n2025-08-28T15:42:58.789849108Z \u001b[32m2025-08-28 15:42:58.784\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36mwebsocket_endpoint\u001b[0m:\u001b[36m121\u001b[0m | \u001b[1mWebSocket accepted with subprotocol: jwt-auth\u001b[0m\n2025-08-28T15:42:58.790894704Z \u001b[32m2025-08-28 15:42:58.784\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.websocket_cors\u001b[0m:\u001b[36mget_websocket_cors_handler\u001b[0m:\u001b[36m566\u001b[0m | \u001b[1mWebSocket CORS: Detected environment from config: 'development'\u001b[0m\n2025-08-28T15:42:58.790922301Z \u001b[32m2025-08-28 15:42:58.785\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.websocket_cors\u001b[0m:\u001b[36mvalidate_websocket_origin\u001b[0m:\u001b[36m360\u001b[0m | \u001b[1mWebSocket connection allowed from origin: http://127.0.0.1:3000 in development environment\u001b[0m\n2025-08-28T15:42:58.790960911Z \u001b[32m2025-08-28 15:42:58.785\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mStarted trace span: websocket_jwt_validation (trace_id: 0217894fc9d24d0794cc38ecb7fc2441)\u001b[0m\n2025-08-28T15:42:58.790975119Z \u001b[32m2025-08-28 15:42:58.788\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mconnection open\u001b[0m\n2025-08-28T15:42:58.790976408Z \u001b[32m2025-08-28 15:42:58.788\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mconnection open\u001b[0m\n2025-08-28T15:42:58.798260268Z \u001b[32m2025-08-28 15:42:58.794\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mHTTP Request: POST http://auth:8081/auth/check-blacklist \"HTTP/1.1 200 OK\"\u001b[0m\n2025-08-28T15:42:58.798833549Z \u001b[32m2025-08-28 15:42:58.797\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mCompleted trace span: websocket_jwt_validation\u001b[0m\n2025-08-28T15:42:58.798844459Z \u001b[32m2025-08-28 15:42:58.797\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.auth\u001b[0m:\u001b[36mauthenticate_websocket\u001b[0m:\u001b[36m121\u001b[0m | \u001b[1mWebSocket authenticated: dev-temp-cc173c1d\u001b[0m\n2025-08-28T15:42:58.798846696Z \u001b[32m2025-08-28 15:42:58.797\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36mwebsocket_endpoint\u001b[0m:\u001b[36m154\u001b[0m | \u001b[1mWebSocket authenticated for user: dev-temp-cc173c1d at 2025-08-28T15:42:58.797582+00:00\u001b[0m\n2025-08-28T15:42:58.800372426Z \u001b[32m2025-08-28 15:42:58.798\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36mconnect_user\u001b[0m:\u001b[36m124\u001b[0m | \u001b[1mWebSocket connected: conn_dev-temp-cc173c1d_9dda8614 for user dev-temp-cc173c1d\u001b[0m\n2025-08-28T15:42:58.800571420Z \u001b[32m2025-08-28 15:42:58.798\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36mwebsocket_endpoint\u001b[0m:\u001b[36m188\u001b[0m | \u001b[1mWebSocket ready: conn_dev-temp-cc173c1d_9dda8614\u001b[0m\n2025-08-28T15:42:58.800672069Z \u001b[32m2025-08-28 15:42:58.799\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36mwebsocket_endpoint\u001b[0m:\u001b[36m191\u001b[0m | \u001b[1mStarting message handling loop for connection: conn_dev-temp-cc173c1d_9dda8614\u001b[0m\n2025-08-28T15:42:58.800775551Z \u001b[32m2025-08-28 15:42:58.799\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36mwebsocket_endpoint\u001b[0m:\u001b[36m193\u001b[0m | \u001b[1mWebSocket state before loop - client_state: WebSocketState.CONNECTED, application_state: WebSocketState.CONNECTED\u001b[0m\n2025-08-28T15:42:58.800822170Z \u001b[32m2025-08-28 15:42:58.799\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36m_handle_websocket_messages\u001b[0m:\u001b[36m276\u001b[0m | \u001b[1mEntering message handling loop for connection: conn_dev-temp-cc173c1d_9dda8614 (user: dev-temp-cc173c1d)\u001b[0m\n2025-08-28T15:42:58.801002709Z \u001b[32m2025-08-28 15:42:58.799\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36m_handle_websocket_messages\u001b[0m:\u001b[36m279\u001b[0m | \u001b[1mWebSocket state at loop entry - client_state: WebSocketState.CONNECTED, application_state: WebSocketState.CONNECTED\u001b[0m\n2025-08-28T15:42:58.801048026Z \u001b[32m2025-08-28 15:42:58.799\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36m_handle_websocket_messages\u001b[0m:\u001b[36m285\u001b[0m | \u001b[1mFirst loop iteration for conn_dev-temp-cc173c1d_9dda8614, WebSocket is_connected returned True\u001b[0m\n2025-08-28T15:43:23.077202836Z \u001b[32m2025-08-28 15:43:23.071\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m41\u001b[0m | \u001b[1mSecurityResponseMiddleware processing: /health\u001b[0m\n2025-08-28T15:43:23.077304912Z \u001b[32m2025-08-28 15:43:23.073\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.request_context\u001b[0m:\u001b[36mlog_request_details\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mRequest: GET /health | Status: 200 | Duration: 2.00ms | Trace: trace_6336f17a9bb54e1a\u001b[0m\n2025-08-28T15:43:23.077320907Z \u001b[32m2025-08-28 15:43:23.074\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m47\u001b[0m | \u001b[1mResponse for /health: status=200, is_api=False, has_auth=False\u001b[0m\n2025-08-28T15:43:23.077326250Z \u001b[32m2025-08-28 15:43:23.075\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m127.0.0.1:53330 - \"GET /health HTTP/1.1\" 200\u001b[0m\n2025-08-28T15:43:26.913423173Z WARNING:  WatchFiles detected changes in 'netra_backend/tests/services/test_optimized_persistence_integration.py'. Reloading...\n2025-08-28T15:43:26.961407461Z \u001b[32m2025-08-28 15:43:26.960\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mShutting down\u001b[0m\n2025-08-28T15:43:26.963223688Z \u001b[32m2025-08-28 15:43:26.960\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mShutting down\u001b[0m\n2025-08-28T15:43:26.963269205Z \u001b[32m2025-08-28 15:43:26.961\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mconnection closed\u001b[0m\n2025-08-28T15:43:26.963388630Z \u001b[32m2025-08-28 15:43:26.961\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mconnection closed\u001b[0m\n2025-08-28T15:43:26.963436905Z \u001b[32m2025-08-28 15:43:26.961\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36m_handle_websocket_messages\u001b[0m:\u001b[36m362\u001b[0m | \u001b[1mWebSocket disconnect: {'connection_id': 'conn_dev-temp-cc173c1d_9dda8614', 'user_id': 'dev-temp-cc173c1d', 'disconnect_code': 1012, 'disconnect_reason': 'No reason provided', 'connection_duration': 'Unknown'}\u001b[0m\n2025-08-28T15:43:26.963442127Z \u001b[32m2025-08-28 15:43:26.962\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36m_handle_websocket_messages\u001b[0m:\u001b[36m383\u001b[0m | \u001b[1mExiting message handling loop for connection: conn_dev-temp-cc173c1d_9dda8614 | Duration: 28.2s | Messages processed: 0 | Errors: 0 | User: dev-temp-cc173c1d\u001b[0m\n2025-08-28T15:43:26.963527976Z \u001b[32m2025-08-28 15:43:26.962\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36mwebsocket_endpoint\u001b[0m:\u001b[36m198\u001b[0m | \u001b[1mMessage handling loop ended for connection: conn_dev-temp-cc173c1d_9dda8614\u001b[0m\n2025-08-28T15:43:26.963540135Z \u001b[32m2025-08-28 15:43:26.962\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.auth\u001b[0m:\u001b[36mcleanup\u001b[0m:\u001b[36m349\u001b[0m | \u001b[1mWebSocket authenticator cleanup completed\u001b[0m\n2025-08-28T15:43:26.963543977Z \u001b[32m2025-08-28 15:43:26.962\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36mdisconnect_user\u001b[0m:\u001b[36m135\u001b[0m | \u001b[1mWebSocket disconnected: conn_dev-temp-cc173c1d_9dda8614 (1000: Normal closure)\u001b[0m\n2025-08-28T15:43:26.963640789Z \u001b[32m2025-08-28 15:43:26.962\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36mwebsocket_endpoint\u001b[0m:\u001b[36m255\u001b[0m | \u001b[1mWebSocket cleanup completed: conn_dev-temp-cc173c1d_9dda8614\u001b[0m\n2025-08-28T15:43:27.063004058Z \u001b[32m2025-08-28 15:43:27.061\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mWaiting for application shutdown.\u001b[0m\n2025-08-28T15:43:27.063046743Z \u001b[32m2025-08-28 15:43:27.061\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mWaiting for application shutdown.\u001b[0m\n2025-08-28T15:43:27.063049259Z \u001b[32m2025-08-28 15:43:27.061\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.shutdown\u001b[0m:\u001b[36mshutdown_cleanup\u001b[0m:\u001b[36m20\u001b[0m | \u001b[1mApplication shutdown initiated...\u001b[0m\n2025-08-28T15:43:27.063050923Z \u001b[32m2025-08-28 15:43:27.061\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.utils.multiprocessing_cleanup\u001b[0m:\u001b[36mcleanup_all\u001b[0m:\u001b[36m90\u001b[0m | \u001b[1mMultiprocessing resources cleaned up\u001b[0m\n2025-08-28T15:43:27.063052413Z \u001b[32m2025-08-28 15:43:27.062\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.shutdown\u001b[0m:\u001b[36mrun_complete_shutdown\u001b[0m:\u001b[36m120\u001b[0m | \u001b[1mShutting down background task manager...\u001b[0m\n2025-08-28T15:43:27.063130622Z \u001b[32m2025-08-28 15:43:27.062\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mShutting down BackgroundTaskManager...\u001b[0m\n2025-08-28T15:43:27.063146181Z \u001b[32m2025-08-28 15:43:27.062\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mBackgroundTaskManager shutdown complete\u001b[0m\n2025-08-28T15:43:27.063150014Z \u001b[32m2025-08-28 15:43:27.062\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.shutdown\u001b[0m:\u001b[36mrun_complete_shutdown\u001b[0m:\u001b[36m122\u001b[0m | \u001b[1mBackground task manager shutdown complete\u001b[0m\n2025-08-28T15:43:27.063173101Z \u001b[32m2025-08-28 15:43:27.062\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.shutdown\u001b[0m:\u001b[36mstop_monitoring\u001b[0m:\u001b[36m48\u001b[0m | \u001b[31m\u001b[1mError stopping monitoring and optimizations: 'ExecutionMonitor' object has no attribute 'stop_monitoring'\u001b[0m\n2025-08-28T15:43:27.166084905Z \u001b[32m2025-08-28 15:43:27.163\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mShutting down BackgroundTaskManager...\u001b[0m\n2025-08-28T15:43:27.166129898Z \u001b[32m2025-08-28 15:43:27.163\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mBackgroundTaskManager shutdown complete\u001b[0m\n2025-08-28T15:43:27.166132242Z \u001b[32m2025-08-28 15:43:27.164\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.base_agent\u001b[0m:\u001b[36mshutdown\u001b[0m:\u001b[36m68\u001b[0m | \u001b[1mShutting down Supervisor\u001b[0m\n2025-08-28T15:43:27.166133654Z \u001b[32m2025-08-28 15:43:27.164\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36mshutdown\u001b[0m:\u001b[36m737\u001b[0m | \u001b[1mShutting down WebSocket manager with 0 connections\u001b[0m\n2025-08-28T15:43:27.166134921Z \u001b[32m2025-08-28 15:43:27.164\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36mshutdown\u001b[0m:\u001b[36m752\u001b[0m | \u001b[1mWebSocket manager shutdown complete\u001b[0m\n2025-08-28T15:43:27.166136115Z \u001b[32m2025-08-28 15:43:27.164\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.shutdown\u001b[0m:\u001b[36mcleanup_resources\u001b[0m:\u001b[36m101\u001b[0m | \u001b[1mWebSocket manager shutdown completed\u001b[0m\n2025-08-28T15:43:27.169954441Z \u001b[32m2025-08-28 15:43:27.166\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.shutdown\u001b[0m:\u001b[36mrun_complete_shutdown\u001b[0m:\u001b[36m135\u001b[0m | \u001b[1mApplication shutdown complete.\u001b[0m\n2025-08-28T15:43:27.170342611Z \u001b[32m2025-08-28 15:43:27.167\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mApplication shutdown complete.\u001b[0m\n2025-08-28T15:43:27.171773900Z \u001b[32m2025-08-28 15:43:27.167\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mApplication shutdown complete.\u001b[0m\n2025-08-28T15:43:27.171884481Z \u001b[32m2025-08-28 15:43:27.168\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mFinished server process [1113]\u001b[0m\n2025-08-28T15:43:27.172019334Z \u001b[32m2025-08-28 15:43:27.168\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mFinished server process [1113]\u001b[0m\n2025-08-28T15:43:27.175429488Z \u001b[32m2025-08-28 15:43:27.174\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.utils.multiprocessing_cleanup\u001b[0m:\u001b[36mcleanup_all\u001b[0m:\u001b[36m90\u001b[0m | \u001b[1mMultiprocessing resources cleaned up\u001b[0m\n2025-08-28T15:43:29.285640110Z Critical environment variables already set - skipping .env loading\n2025-08-28T15:43:33.781559479Z \u001b[32m2025-08-28 15:43:33.780\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.configuration.database\u001b[0m:\u001b[36m_get_postgres_url\u001b[0m:\u001b[36m184\u001b[0m | \u001b[1mUsing PostgreSQL URL from development configuration\u001b[0m\n2025-08-28T15:43:33.794889790Z \u001b[32m2025-08-28 15:43:33.793\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[33m\u001b[1mGoogle Cloud Secret Manager not available: cannot import name 'secretmanager' from 'google.cloud' (unknown location)\u001b[0m\n2025-08-28T15:43:33.794980960Z \u001b[32m2025-08-28 15:43:33.794\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.configuration.database\u001b[0m:\u001b[36m_populate_redis_config\u001b[0m:\u001b[36m138\u001b[0m | \u001b[1mRedis Configuration (development/URL/No SSL): redis://redis:6379/0, Pool: 10, DB: 0\u001b[0m\n2025-08-28T15:43:33.799466773Z \u001b[32m2025-08-28 15:43:33.797\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.configuration.secrets\u001b[0m:\u001b[36mpopulate_secrets\u001b[0m:\u001b[36m198\u001b[0m | \u001b[1mPopulated secrets for development\u001b[0m\n2025-08-28T15:43:37.145835446Z \u001b[32m2025-08-28 15:43:37.143\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mCORS Configuration for development:\u001b[0m\n2025-08-28T15:43:37.145915062Z \u001b[32m2025-08-28 15:43:37.144\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m  Origins count: 41\u001b[0m\n2025-08-28T15:43:37.145922204Z \u001b[32m2025-08-28 15:43:37.144\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m  Allow credentials: True\u001b[0m\n2025-08-28T15:43:37.145925502Z \u001b[32m2025-08-28 15:43:37.144\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m  First 3 origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:3002']\u001b[0m\n2025-08-28T15:43:37.145932402Z \u001b[32m2025-08-28 15:43:37.145\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mCORS middleware configured for environment: development\u001b[0m\n2025-08-28T15:43:37.210505266Z \u001b[32m2025-08-28 15:43:37.209\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mAuthentication middleware configured with WebSocket exclusions\u001b[0m\n2025-08-28T15:43:37.210555508Z \u001b[32m2025-08-28 15:43:37.210\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mSession middleware config: same_site=lax, https_only=False, environment=development\u001b[0m\n2025-08-28T15:43:41.071500981Z \u001b[32m2025-08-28 15:43:41.070\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.state_persistence_optimized\u001b[0m:\u001b[36m__init__\u001b[0m:\u001b[36m52\u001b[0m | \u001b[1mOptimized state persistence service initialized\u001b[0m\n2025-08-28T15:43:43.316731460Z \u001b[32m2025-08-28 15:43:43.312\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.health.telemetry\u001b[0m:\u001b[36mregister_service\u001b[0m:\u001b[36m340\u001b[0m | \u001b[1mRegistered telemetry for service: netra-ai-platform\u001b[0m\n2025-08-28T15:43:43.933865685Z \u001b[32m2025-08-28 15:43:43.926\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.fallback_response.response_generator\u001b[0m:\u001b[36m__init__\u001b[0m:\u001b[36m30\u001b[0m | \u001b[1mResponse Generator initialized\u001b[0m\n2025-08-28T15:43:43.934202163Z \u001b[32m2025-08-28 15:43:43.928\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.quality_gate.quality_gate_core\u001b[0m:\u001b[36m__init__\u001b[0m:\u001b[36m38\u001b[0m | \u001b[1mQuality Gate Service initialized\u001b[0m\n2025-08-28T15:43:43.934254014Z \u001b[32m2025-08-28 15:43:43.928\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.quality_monitoring.service\u001b[0m:\u001b[36m__init__\u001b[0m:\u001b[36m51\u001b[0m | \u001b[1mQuality Monitoring Service initialized\u001b[0m\n2025-08-28T15:43:43.934263718Z \u001b[32m2025-08-28 15:43:43.928\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.fallback_response.response_generator\u001b[0m:\u001b[36m__init__\u001b[0m:\u001b[36m30\u001b[0m | \u001b[1mResponse Generator initialized\u001b[0m\n2025-08-28T15:43:48.369570441Z \u001b[32m2025-08-28 15:43:48.368\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mStarted server process [1160]\u001b[0m\n2025-08-28T15:43:48.369608922Z \u001b[32m2025-08-28 15:43:48.368\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mStarted server process [1160]\u001b[0m\n2025-08-28T15:43:48.369611235Z \u001b[32m2025-08-28 15:43:48.368\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mWaiting for application startup.\u001b[0m\n2025-08-28T15:43:48.369613056Z \u001b[32m2025-08-28 15:43:48.369\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mWaiting for application startup.\u001b[0m\n2025-08-28T15:43:48.394359091Z \u001b[32m2025-08-28 15:43:48.393\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.fastapi_auth_middleware\u001b[0m:\u001b[36m_get_jwt_secret_with_validation\u001b[0m:\u001b[36m677\u001b[0m | \u001b[1mJWT secret configured: 32 characters\u001b[0m\n2025-08-28T15:43:48.394392777Z \u001b[32m2025-08-28 15:43:48.393\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.fastapi_auth_middleware\u001b[0m:\u001b[36m__init__\u001b[0m:\u001b[36m76\u001b[0m | \u001b[1mFastAPIAuthMiddleware initialized with 12 excluded paths\u001b[0m\n2025-08-28T15:43:48.394394948Z \u001b[32m2025-08-28 15:43:48.393\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_headers_middleware\u001b[0m:\u001b[36m_log_initialization\u001b[0m:\u001b[36m43\u001b[0m | \u001b[1mSecurity headers middleware initialized for development environment\u001b[0m\n2025-08-28T15:43:48.394396268Z \u001b[32m2025-08-28 15:43:48.393\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36m__init__\u001b[0m:\u001b[36m36\u001b[0m | \u001b[1mSecurityResponseMiddleware initialized\u001b[0m\n2025-08-28T15:43:48.394397429Z \u001b[32m2025-08-28 15:43:48.393\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mCORSFixMiddleware initialized with 41 origins for development\u001b[0m\n2025-08-28T15:43:48.394398719Z \u001b[32m2025-08-28 15:43:48.393\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36mrun_complete_startup\u001b[0m:\u001b[36m941\u001b[0m | \u001b[1mUsing robust startup manager with dependency resolution...\u001b[0m\n2025-08-28T15:43:48.394447784Z \u001b[32m2025-08-28 15:43:48.394\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36mrun_complete_startup\u001b[0m:\u001b[36m951\u001b[0m | \u001b[1mStartup in progress flags set - health endpoint will report startup in progress\u001b[0m\n2025-08-28T15:43:48.438302662Z \u001b[32m2025-08-28 15:43:48.436\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36mrun_complete_startup\u001b[0m:\u001b[36m983\u001b[0m | \u001b[31m\u001b[1mError in robust startup: cannot access local variable 'logger' where it is not associated with a value\u001b[0m\n2025-08-28T15:43:48.438336005Z \u001b[32m2025-08-28 15:43:48.436\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36mrun_complete_startup\u001b[0m:\u001b[36m989\u001b[0m | \u001b[33m\u001b[1mFalling back to legacy startup sequence...\u001b[0m\n2025-08-28T15:43:48.438338013Z \u001b[32m2025-08-28 15:43:48.436\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36minitialize_logging\u001b[0m:\u001b[36m251\u001b[0m | \u001b[1mApplication startup...\u001b[0m\n2025-08-28T15:43:48.438339413Z \u001b[32m2025-08-28 15:43:48.437\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.utils.multiprocessing_cleanup\u001b[0m:\u001b[36msetup_multiprocessing\u001b[0m:\u001b[36m108\u001b[0m | \u001b[1mMultiprocessing configured with method: forkserver\u001b[0m\n2025-08-28T15:43:48.438349981Z \u001b[32m2025-08-28 15:43:48.437\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.database_env_service\u001b[0m:\u001b[36mvalidate_database_environment\u001b[0m:\u001b[36m49\u001b[0m | \u001b[1mDatabase environment validation passed for development\u001b[0m\n2025-08-28T15:43:48.438547835Z \u001b[32m2025-08-28 15:43:48.437\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_check_and_run_migrations\u001b[0m:\u001b[36m354\u001b[0m | \u001b[1mChecking database migrations...\u001b[0m\n2025-08-28T15:43:48.452500352Z \u001b[32m2025-08-28 15:43:48.449\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mContext impl PostgresqlImpl.\u001b[0m\n2025-08-28T15:43:48.452533789Z \u001b[32m2025-08-28 15:43:48.449\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mWill assume transactional DDL.\u001b[0m\n2025-08-28T15:43:48.455912006Z \u001b[32m2025-08-28 15:43:48.455\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_perform_migration\u001b[0m:\u001b[36m364\u001b[0m | \u001b[1mCurrent revision: add_deleted_at_001\u001b[0m\n2025-08-28T15:43:49.038390238Z \u001b[32m2025-08-28 15:43:49.037\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.db.migration_utils\u001b[0m:\u001b[36mlog_migration_status\u001b[0m:\u001b[36m199\u001b[0m | \u001b[1mDatabase is up to date\u001b[0m\n2025-08-28T15:43:49.040514471Z \u001b[32m2025-08-28 15:43:49.037\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_legacy_startup\u001b[0m:\u001b[36m1007\u001b[0m | \u001b[1mLegacy startup in progress flags set\u001b[0m\n2025-08-28T15:43:49.042136866Z \u001b[32m2025-08-28 15:43:49.037\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36msetup_database_connections\u001b[0m:\u001b[36m430\u001b[0m | \u001b[1mSetting up database connections...\u001b[0m\n2025-08-28T15:43:49.042160821Z \u001b[32m2025-08-28 15:43:49.038\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.db.postgres_core\u001b[0m:\u001b[36minitialize_postgres\u001b[0m:\u001b[36m578\u001b[0m | \u001b[1mInitializing async engine and session factory...\u001b[0m\n2025-08-28T15:43:49.042162826Z \u001b[32m2025-08-28 15:43:49.039\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.db.postgres_core\u001b[0m:\u001b[36m_create_and_setup_engine\u001b[0m:\u001b[36m514\u001b[0m | \u001b[1mPostgreSQL async engine created with resilient AsyncAdaptedQueuePool connection pooling\u001b[0m\n2025-08-28T15:43:49.042164285Z \u001b[32m2025-08-28 15:43:49.040\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_ensure_database_tables_exist\u001b[0m:\u001b[36m56\u001b[0m | \u001b[1mImporting database models to register tables...\u001b[0m\n2025-08-28T15:43:49.042165772Z \u001b[32m2025-08-28 15:43:49.040\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_ensure_database_tables_exist\u001b[0m:\u001b[36m59\u001b[0m | \u001b[1mChecking if database tables exist...\u001b[0m\n2025-08-28T15:43:49.055995344Z \u001b[32m2025-08-28 15:43:49.055\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_ensure_database_tables_exist\u001b[0m:\u001b[36m114\u001b[0m | \u001b[1mAll 26 database tables are present\u001b[0m\n2025-08-28T15:43:49.061089494Z \u001b[32m2025-08-28 15:43:49.058\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36msetup_database_connections\u001b[0m:\u001b[36m474\u001b[0m | \u001b[1mDatabase session factory successfully set on app.state\u001b[0m\n2025-08-28T15:43:49.061117951Z \u001b[32m2025-08-28 15:43:49.058\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36minitialize_core_services\u001b[0m:\u001b[36m509\u001b[0m | \u001b[1mLoading key manager...\u001b[0m\n2025-08-28T15:43:49.061119986Z \u001b[32m2025-08-28 15:43:49.058\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36minitialize_core_services\u001b[0m:\u001b[36m511\u001b[0m | \u001b[1mKey manager loaded.\u001b[0m\n2025-08-28T15:43:49.061121296Z \u001b[32m2025-08-28 15:43:49.059\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36minitialize_clickhouse\u001b[0m:\u001b[36m544\u001b[0m | \u001b[1mSkipping ClickHouse initialization in development environment (optional service - may not be available)\u001b[0m\n2025-08-28T15:43:49.061182609Z \u001b[32m2025-08-28 15:43:49.059\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_startup_phase_two\u001b[0m:\u001b[36m889\u001b[0m | \u001b[1mInitializing background task manager with 2-minute timeout...\u001b[0m\n2025-08-28T15:43:49.061190798Z \u001b[32m2025-08-28 15:43:49.059\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_startup_phase_two\u001b[0m:\u001b[36m891\u001b[0m | \u001b[1mBackground task manager initialized successfully\u001b[0m\n2025-08-28T15:43:49.061202823Z \u001b[32m2025-08-28 15:43:49.059\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_startup_phase_two\u001b[0m:\u001b[36m894\u001b[0m | \u001b[1mApplying startup fixes for critical cold start issues...\u001b[0m\n2025-08-28T15:43:49.061204393Z \u001b[32m2025-08-28 15:43:49.059\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mRunning comprehensive startup fixes verification...\u001b[0m\n2025-08-28T15:43:49.061205759Z \u001b[32m2025-08-28 15:43:49.059\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mApplied Redis mode default with fallback capability\u001b[0m\n2025-08-28T15:43:49.061278892Z \u001b[32m2025-08-28 15:43:49.059\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mService discovery disabled for microservice independence\u001b[0m\n2025-08-28T15:43:49.061286330Z \u001b[32m2025-08-28 15:43:49.059\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mDynamic port allocation is configured\u001b[0m\n2025-08-28T15:43:49.061287970Z \u001b[32m2025-08-28 15:43:49.059\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mBackground task timeout properly configured: 120s\u001b[0m\n2025-08-28T15:43:49.061289148Z \u001b[32m2025-08-28 15:43:49.060\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mRedis local fallback is configured\u001b[0m\n2025-08-28T15:43:49.061290334Z \u001b[32m2025-08-28 15:43:49.060\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mDatabase transaction rollback fix is available\u001b[0m\n2025-08-28T15:43:49.061291472Z \u001b[32m2025-08-28 15:43:49.060\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mStartup fixes verification complete: 4/5 fixes applied\u001b[0m\n2025-08-28T15:43:49.061346641Z \u001b[32m2025-08-28 15:43:49.060\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_startup_phase_two\u001b[0m:\u001b[36m898\u001b[0m | \u001b[1mStartup fixes applied: 4/5 fixes\u001b[0m\n2025-08-28T15:43:49.061348428Z \u001b[32m2025-08-28 15:43:49.060\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_startup_phase_two\u001b[0m:\u001b[36m901\u001b[0m | \u001b[33m\u001b[1mSome startup fixes could not be applied - check system configuration\u001b[0m\n2025-08-28T15:43:49.061350209Z \u001b[32m2025-08-28 15:43:49.060\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_startup_phase_two\u001b[0m:\u001b[36m902\u001b[0m | \u001b[1mStartup Fixes Status: 4/5 applied\n2025-08-28T15:43:49.061351518Z \n2025-08-28T15:43:49.061352383Z \u2705 Applied fixes:\n2025-08-28T15:43:49.061353593Z   \u2022 Environment variable mapping (CLICKHOUSE_PASSWORD)\n2025-08-28T15:43:49.061354559Z   \u2022 Background task timeout (2-minute limit)\n2025-08-28T15:43:49.061355404Z   \u2022 Database transaction rollback handling\n2025-08-28T15:43:49.061362762Z   \u2022 Redis local fallback capability\n2025-08-28T15:43:49.061363704Z \n2025-08-28T15:43:49.061364519Z \u274c Missing fixes:\n2025-08-28T15:43:49.061365363Z   \u2022 Service port conflict resolution\u001b[0m\n2025-08-28T15:43:49.061366354Z \u001b[32m2025-08-28 15:43:49.060\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36mstartup_health_checks\u001b[0m:\u001b[36m738\u001b[0m | \u001b[1mStarting comprehensive startup health checks...\u001b[0m\n2025-08-28T15:43:49.247586250Z \u001b[32m2025-08-28 15:43:49.245\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m58\u001b[0m | \u001b[1mPreparing to run 10 startup checks:\u001b[0m\n2025-08-28T15:43:49.247610705Z \u001b[32m2025-08-28 15:43:49.246\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  1. check_environment_variables\u001b[0m\n2025-08-28T15:43:49.247612590Z \u001b[32m2025-08-28 15:43:49.246\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  2. check_configuration\u001b[0m\n2025-08-28T15:43:49.247613992Z \u001b[32m2025-08-28 15:43:49.246\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  3. check_file_permissions\u001b[0m\n2025-08-28T15:43:49.247618100Z \u001b[32m2025-08-28 15:43:49.246\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  4. check_database_connection\u001b[0m\n2025-08-28T15:43:49.247619388Z \u001b[32m2025-08-28 15:43:49.246\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  5. check_redis\u001b[0m\n2025-08-28T15:43:49.247703446Z \u001b[32m2025-08-28 15:43:49.246\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  6. check_clickhouse\u001b[0m\n2025-08-28T15:43:49.247713419Z \u001b[32m2025-08-28 15:43:49.246\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  7. check_llm_providers\u001b[0m\n2025-08-28T15:43:49.247715011Z \u001b[32m2025-08-28 15:43:49.246\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  8. check_memory_and_resources\u001b[0m\n2025-08-28T15:43:49.247718363Z \u001b[32m2025-08-28 15:43:49.246\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  9. check_network_connectivity\u001b[0m\n2025-08-28T15:43:49.247919600Z \u001b[32m2025-08-28 15:43:49.246\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  10. check_or_create_assistant\u001b[0m\n2025-08-28T15:43:49.248021291Z \u001b[32m2025-08-28 15:43:49.247\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_environment_variables\u001b[0m\n2025-08-28T15:43:49.248031168Z \u001b[32m2025-08-28 15:43:49.247\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_configuration\u001b[0m\n2025-08-28T15:43:49.248039732Z \u001b[32m2025-08-28 15:43:49.247\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_file_permissions\u001b[0m\n2025-08-28T15:43:49.255201552Z \u001b[32m2025-08-28 15:43:49.254\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_database_connection\u001b[0m\n2025-08-28T15:43:49.276907057Z \u001b[32m2025-08-28 15:43:49.276\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_redis\u001b[0m\n2025-08-28T15:43:49.278234797Z \u001b[32m2025-08-28 15:43:49.277\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.redis_manager\u001b[0m:\u001b[36m_test_redis_connection\u001b[0m:\u001b[36m114\u001b[0m | \u001b[1mRedis connected successfully\u001b[0m\n2025-08-28T15:43:49.280959372Z \u001b[32m2025-08-28 15:43:49.279\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_clickhouse\u001b[0m\n2025-08-28T15:43:49.283339460Z \u001b[32m2025-08-28 15:43:49.280\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.db.clickhouse\u001b[0m:\u001b[36m_create_mock_client\u001b[0m:\u001b[36m132\u001b[0m | \u001b[1m[ClickHouse] Using MOCK client for development\u001b[0m\n2025-08-28T15:43:49.283371253Z \u001b[32m2025-08-28 15:43:49.280\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.service_checks\u001b[0m:\u001b[36m_log_clickhouse_warning_if_needed\u001b[0m:\u001b[36m242\u001b[0m | \u001b[33m\u001b[1mClickHouse not available - analytics features limited\u001b[0m\n2025-08-28T15:43:49.283375683Z \u001b[32m2025-08-28 15:43:49.280\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_llm_providers\u001b[0m\n2025-08-28T15:43:49.283585388Z \u001b[32m2025-08-28 15:43:49.281\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.service_checks\u001b[0m:\u001b[36m_handle_llm_test_failure\u001b[0m:\u001b[36m197\u001b[0m | \u001b[1mLLM 'default' failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:43:49.283772192Z \u001b[32m2025-08-28 15:43:49.281\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.service_checks\u001b[0m:\u001b[36m_handle_llm_test_failure\u001b[0m:\u001b[36m197\u001b[0m | \u001b[1mLLM 'analysis' failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:43:49.284199815Z \u001b[32m2025-08-28 15:43:49.281\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.service_checks\u001b[0m:\u001b[36m_handle_llm_test_failure\u001b[0m:\u001b[36m197\u001b[0m | \u001b[1mLLM 'triage' failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:43:49.284242726Z \u001b[32m2025-08-28 15:43:49.282\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.service_checks\u001b[0m:\u001b[36m_handle_llm_test_failure\u001b[0m:\u001b[36m197\u001b[0m | \u001b[1mLLM 'data' failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:43:49.284250474Z \u001b[32m2025-08-28 15:43:49.282\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.service_checks\u001b[0m:\u001b[36m_handle_llm_test_failure\u001b[0m:\u001b[36m197\u001b[0m | \u001b[1mLLM 'optimizations_core' failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:43:49.284254105Z \u001b[32m2025-08-28 15:43:49.282\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.service_checks\u001b[0m:\u001b[36m_handle_llm_test_failure\u001b[0m:\u001b[36m197\u001b[0m | \u001b[1mLLM 'actions_to_meet_goals' failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:43:49.284256564Z \u001b[32m2025-08-28 15:43:49.282\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.service_checks\u001b[0m:\u001b[36m_handle_llm_test_failure\u001b[0m:\u001b[36m197\u001b[0m | \u001b[1mLLM 'reporting' failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:43:49.284258912Z \u001b[32m2025-08-28 15:43:49.282\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_memory_and_resources\u001b[0m\n2025-08-28T15:43:49.284264139Z \u001b[32m2025-08-28 15:43:49.283\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_network_connectivity\u001b[0m\n2025-08-28T15:43:49.285276721Z \u001b[32m2025-08-28 15:43:49.284\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_or_create_assistant\u001b[0m\n2025-08-28T15:43:49.285434402Z /usr/local/lib/python3.11/contextlib.py:210: DeprecationWarning: postgres_session.get_async_db() is deprecated. Use 'from netra_backend.app.database import get_db' instead.\n2025-08-28T15:43:49.285443454Z   return await anext(self.gen)\n2025-08-28T15:43:49.353116347Z \u001b[32m2025-08-28 15:43:49.350\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m140\u001b[0m | \u001b[1m=== STARTUP CHECKS SUMMARY ===\u001b[0m\n2025-08-28T15:43:49.353500780Z \u001b[32m2025-08-28 15:43:49.350\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m141\u001b[0m | \u001b[1mTotal checks: 10\u001b[0m\n2025-08-28T15:43:49.353518347Z \u001b[32m2025-08-28 15:43:49.350\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m142\u001b[0m | \u001b[1mPassed: 8\u001b[0m\n2025-08-28T15:43:49.353625444Z \u001b[32m2025-08-28 15:43:49.350\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m143\u001b[0m | \u001b[1mFailed (critical): 0\u001b[0m\n2025-08-28T15:43:49.353632842Z \u001b[32m2025-08-28 15:43:49.350\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m144\u001b[0m | \u001b[1mFailed (non-critical): 2\u001b[0m\n2025-08-28T15:43:49.353745445Z \u001b[32m2025-08-28 15:43:49.350\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m145\u001b[0m | \u001b[1mTotal duration: 104.66ms\u001b[0m\n2025-08-28T15:43:49.353812545Z \u001b[32m2025-08-28 15:43:49.351\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  PASS: environment_variables (0.05ms) - Development mode - using default configs (Optional missing: GOOGLE_CLIENT_ID, GOOGLE_CLIENT_SECRET)\u001b[0m\n2025-08-28T15:43:49.353815963Z \u001b[32m2025-08-28 15:43:49.351\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  PASS: configuration (0.02ms) - Configuration valid for development environment\u001b[0m\n2025-08-28T15:43:49.353879268Z \u001b[32m2025-08-28 15:43:49.351\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  PASS: file_permissions (7.01ms) - All required directories are accessible\u001b[0m\n2025-08-28T15:43:49.353894935Z \u001b[32m2025-08-28 15:43:49.351\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  PASS: database_connection (21.46ms) - PostgreSQL connected and schema valid\u001b[0m\n2025-08-28T15:43:49.353901104Z \u001b[32m2025-08-28 15:43:49.351\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  PASS: redis_connection (3.53ms) - Redis connected and operational\u001b[0m\n2025-08-28T15:43:49.353903006Z \u001b[32m2025-08-28 15:43:49.351\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  FAIL-WARN: clickhouse_connection (0.61ms) - ClickHouse check failed: Missing ClickHouse tables: ['workload_events']\u001b[0m\n2025-08-28T15:43:49.353967822Z \u001b[32m2025-08-28 15:43:49.351\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  FAIL-WARN: llm_providers (2.27ms) - No LLM providers available\u001b[0m\n2025-08-28T15:43:49.354469068Z \u001b[32m2025-08-28 15:43:49.351\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  PASS: system_resources (0.68ms) - Resources OK: 27.3GB RAM, 876.2GB disk, 20 CPUs\u001b[0m\n2025-08-28T15:43:49.354674119Z \u001b[32m2025-08-28 15:43:49.351\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  PASS: network_connectivity (0.94ms) - All network endpoints reachable\u001b[0m\n2025-08-28T15:43:49.354697185Z \u001b[32m2025-08-28 15:43:49.351\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  PASS: netra_assistant (65.33ms) - Netra assistant already exists\u001b[0m\n2025-08-28T15:43:49.354807720Z \u001b[32m2025-08-28 15:43:49.352\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.utils\u001b[0m:\u001b[36m_log_startup_results\u001b[0m:\u001b[36m32\u001b[0m | \u001b[1mStartup checks completed in 105ms\u001b[0m\n2025-08-28T15:43:49.354810895Z \u001b[32m2025-08-28 15:43:49.352\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.utils\u001b[0m:\u001b[36m_log_startup_results\u001b[0m:\u001b[36m33\u001b[0m | \u001b[1mResults: 8/10 passed\u001b[0m\n2025-08-28T15:43:49.354850569Z \u001b[32m2025-08-28 15:43:49.352\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.utils\u001b[0m:\u001b[36m_log_non_critical_failures\u001b[0m:\u001b[36m48\u001b[0m | \u001b[33m\u001b[1mNon-critical startup checks failed:\u001b[0m\n2025-08-28T15:43:49.355133924Z \u001b[32m2025-08-28 15:43:49.352\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.utils\u001b[0m:\u001b[36m_log_non_critical_failures\u001b[0m:\u001b[36m51\u001b[0m | \u001b[33m\u001b[1m  - clickhouse_connection: ClickHouse check failed: Missing ClickHouse tables: ['workload_events']\u001b[0m\n2025-08-28T15:43:49.356769145Z \u001b[32m2025-08-28 15:43:49.352\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.utils\u001b[0m:\u001b[36m_log_non_critical_failures\u001b[0m:\u001b[36m51\u001b[0m | \u001b[33m\u001b[1m  - llm_providers: No LLM providers available\u001b[0m\n2025-08-28T15:43:49.356904162Z \u001b[32m2025-08-28 15:43:49.352\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36mstartup_health_checks\u001b[0m:\u001b[36m749\u001b[0m | \u001b[1mStartup checks completed: 8/10 passed\u001b[0m\n2025-08-28T15:43:49.356913100Z \u001b[32m2025-08-28 15:43:49.352\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36mstartup_health_checks\u001b[0m:\u001b[36m754\u001b[0m | \u001b[33m\u001b[1mSome startup checks failed (2), but continuing in graceful mode\u001b[0m\n2025-08-28T15:43:49.390126954Z \u001b[32m2025-08-28 15:43:49.389\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.services.schema_validation_service\u001b[0m:\u001b[36m_log_missing_columns\u001b[0m:\u001b[36m107\u001b[0m | \u001b[31m\u001b[1mMissing columns in table research_sessions: ['error_message', 'completed_at']\u001b[0m\n2025-08-28T15:43:49.390171466Z \u001b[32m2025-08-28 15:43:49.389\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.services.schema_validation_service\u001b[0m:\u001b[36m_log_warnings\u001b[0m:\u001b[36m113\u001b[0m | \u001b[33m\u001b[1mExtra tables in database not defined in models: {'auth_audit_logs', 'password_reset_tokens', 'alembic_version', 'auth_users', 'userbase', 'auth_sessions'}\u001b[0m\n2025-08-28T15:43:49.390622883Z \u001b[32m2025-08-28 15:43:49.390\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.services.schema_validation_service\u001b[0m:\u001b[36mrun_comprehensive_validation\u001b[0m:\u001b[36m234\u001b[0m | \u001b[31m\u001b[1mSchema validation failed: {'passed': False, 'missing_tables': [], 'missing_columns': {'research_sessions': ['error_message', 'completed_at']}, 'type_mismatches': {}, 'warnings': [\"Extra tables in database not defined in models: {'auth_audit_logs', 'password_reset_tokens', 'alembic_version', 'auth_users', 'userbase', 'auth_sessions'}\"]}\u001b[0m\n2025-08-28T15:43:49.390653997Z \u001b[32m2025-08-28 15:43:49.390\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_handle_schema_validation_result\u001b[0m:\u001b[36m824\u001b[0m | \u001b[31m\u001b[1mSchema validation failed. The application might not work as expected.\u001b[0m\n2025-08-28T15:43:49.407845885Z \u001b[32m2025-08-28 15:43:49.407\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36minitialize_websocket_components\u001b[0m:\u001b[36m718\u001b[0m | \u001b[1mWebSocket components initialized\u001b[0m\n2025-08-28T15:43:50.716235497Z \u001b[32m2025-08-28 15:43:50.714\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: triage\u001b[0m\n2025-08-28T15:43:50.718769702Z \u001b[32m2025-08-28 15:43:50.715\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: data\u001b[0m\n2025-08-28T15:43:50.718781148Z \u001b[32m2025-08-28 15:43:50.715\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: optimization\u001b[0m\n2025-08-28T15:43:50.718782881Z \u001b[32m2025-08-28 15:43:50.715\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: actions\u001b[0m\n2025-08-28T15:43:50.718784094Z \u001b[32m2025-08-28 15:43:50.715\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: reporting\u001b[0m\n2025-08-28T15:43:50.718785220Z \u001b[32m2025-08-28 15:43:50.716\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: synthetic_data\u001b[0m\n2025-08-28T15:43:50.718786588Z \u001b[32m2025-08-28 15:43:50.716\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: corpus_admin\u001b[0m\n2025-08-28T15:43:50.718787716Z \u001b[32m2025-08-28 15:43:50.716\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_create_agent_supervisor\u001b[0m:\u001b[36m656\u001b[0m | \u001b[1mAgent supervisor created successfully\u001b[0m\n2025-08-28T15:43:50.718813915Z \u001b[32m2025-08-28 15:43:50.716\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.database.health_checker\u001b[0m:\u001b[36mstart_monitoring\u001b[0m:\u001b[36m29\u001b[0m | \u001b[1mStarting database connection monitoring\u001b[0m\n2025-08-28T15:43:50.719013913Z \u001b[32m2025-08-28 15:43:50.716\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.base.monitoring\u001b[0m:\u001b[36mstart_monitoring\u001b[0m:\u001b[36m318\u001b[0m | \u001b[1mExecution monitoring started\u001b[0m\n2025-08-28T15:43:50.719313457Z \u001b[32m2025-08-28 15:43:50.716\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_create_monitoring_task\u001b[0m:\u001b[36m848\u001b[0m | \u001b[1mComprehensive monitoring started\u001b[0m\n2025-08-28T15:43:50.719331921Z \u001b[32m2025-08-28 15:43:50.717\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.performance_optimization_manager\u001b[0m:\u001b[36minitialize\u001b[0m:\u001b[36m43\u001b[0m | \u001b[1mPerformance optimization manager initialized\u001b[0m\n2025-08-28T15:43:50.719335450Z \u001b[32m2025-08-28 15:43:50.717\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mCreated background task 'database_index_optimization' (ID: 153401e8-07fd-438e-b905-6bddb7d419af) with 120s timeout\u001b[0m\n2025-08-28T15:43:50.719338560Z \u001b[32m2025-08-28 15:43:50.717\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_schedule_background_optimizations\u001b[0m:\u001b[36m224\u001b[0m | \u001b[1mDatabase index optimization scheduled as background task (ID: 153401e8-07fd-438e-b905-6bddb7d419af)\u001b[0m\n2025-08-28T15:43:50.719340841Z \u001b[32m2025-08-28 15:43:50.717\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_initialize_performance_optimizations\u001b[0m:\u001b[36m194\u001b[0m | \u001b[1mPerformance optimizations initialized successfully\u001b[0m\n2025-08-28T15:43:50.719342960Z \u001b[32m2025-08-28 15:43:50.717\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_legacy_startup\u001b[0m:\u001b[36m1016\u001b[0m | \u001b[1mLegacy startup completion flags set - health endpoint will report healthy\u001b[0m\n2025-08-28T15:43:50.719383834Z \u001b[32m2025-08-28 15:43:50.717\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36mlog_startup_complete\u001b[0m:\u001b[36m869\u001b[0m | \u001b[1mSystem Ready (Took 2.28s).\u001b[0m\n2025-08-28T15:43:50.720514991Z \u001b[32m2025-08-28 15:43:50.719\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mApplication startup complete.\u001b[0m\n2025-08-28T15:43:50.720534193Z \u001b[32m2025-08-28 15:43:50.720\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mApplication startup complete.\u001b[0m\n2025-08-28T15:43:50.724468510Z \u001b[32m2025-08-28 15:43:50.723\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m41\u001b[0m | \u001b[1mSecurityResponseMiddleware processing: /api/mcp/servers\u001b[0m\n2025-08-28T15:43:50.724858047Z /usr/local/lib/python3.11/site-packages/websockets/legacy/server.py:1178: DeprecationWarning: remove second argument of ws_handler\n2025-08-28T15:43:50.724877121Z   warnings.warn(\"remove second argument of ws_handler\", DeprecationWarning)\n2025-08-28T15:43:50.725541243Z \u001b[32m2025-08-28 15:43:50.725\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m41\u001b[0m | \u001b[1mSecurityResponseMiddleware processing: /api/mcp/tools\u001b[0m\n2025-08-28T15:43:50.726863057Z \u001b[32m2025-08-28 15:43:50.726\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m('172.18.0.1', 55140) - \"WebSocket /ws\" [accepted]\u001b[0m\n2025-08-28T15:43:50.726878841Z \u001b[32m2025-08-28 15:43:50.726\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m('172.18.0.1', 55140) - \"WebSocket /ws\" [accepted]\u001b[0m\n2025-08-28T15:43:50.726880618Z \u001b[32m2025-08-28 15:43:50.726\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36mwebsocket_endpoint\u001b[0m:\u001b[36m121\u001b[0m | \u001b[1mWebSocket accepted with subprotocol: jwt-auth\u001b[0m\n2025-08-28T15:43:50.746768167Z \u001b[32m2025-08-28 15:43:50.743\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.websocket_cors\u001b[0m:\u001b[36mget_websocket_cors_handler\u001b[0m:\u001b[36m566\u001b[0m | \u001b[1mWebSocket CORS: Detected environment from config: 'development'\u001b[0m\n2025-08-28T15:43:50.746791357Z \u001b[32m2025-08-28 15:43:50.743\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.websocket_cors\u001b[0m:\u001b[36mget_environment_origins_for_environment\u001b[0m:\u001b[36m441\u001b[0m | \u001b[1mWebSocket CORS configured for environment 'development' with 41 allowed origins\u001b[0m\n2025-08-28T15:43:50.746793242Z \u001b[32m2025-08-28 15:43:50.743\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.websocket_cors\u001b[0m:\u001b[36mget_environment_origins_for_environment\u001b[0m:\u001b[36m450\u001b[0m | \u001b[1mWebSocket CORS: Running in DEVELOPMENT mode with permissive origins\u001b[0m\n2025-08-28T15:43:50.746794505Z \u001b[32m2025-08-28 15:43:50.743\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.websocket_cors\u001b[0m:\u001b[36mget_websocket_cors_handler\u001b[0m:\u001b[36m583\u001b[0m | \u001b[1mWebSocket CORS: Creating handler for environment 'development' with 41 origins\u001b[0m\n2025-08-28T15:43:50.746795742Z \u001b[32m2025-08-28 15:43:50.745\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.websocket_cors\u001b[0m:\u001b[36mvalidate_websocket_origin\u001b[0m:\u001b[36m360\u001b[0m | \u001b[1mWebSocket connection allowed from origin: http://127.0.0.1:3000 in development environment\u001b[0m\n2025-08-28T15:43:50.746799073Z \u001b[32m2025-08-28 15:43:50.745\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mStarted trace span: websocket_jwt_validation (trace_id: 5af34d30d8fc426c9cc9a75a34ef16fc)\u001b[0m\n2025-08-28T15:43:50.746878318Z \u001b[32m2025-08-28 15:43:50.746\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mconnection open\u001b[0m\n2025-08-28T15:43:50.747142730Z \u001b[32m2025-08-28 15:43:50.746\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mconnection open\u001b[0m\n2025-08-28T15:43:50.757418529Z \u001b[32m2025-08-28 15:43:50.751\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m41\u001b[0m | \u001b[1mSecurityResponseMiddleware processing: /api/mcp/servers\u001b[0m\n2025-08-28T15:43:50.766705998Z \u001b[32m2025-08-28 15:43:50.752\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m41\u001b[0m | \u001b[1mSecurityResponseMiddleware processing: /api/mcp/tools\u001b[0m\n2025-08-28T15:43:50.771874612Z \u001b[32m2025-08-28 15:43:50.758\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: triage\u001b[0m\n2025-08-28T15:43:50.792256273Z \u001b[32m2025-08-28 15:43:50.758\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: data\u001b[0m\n2025-08-28T15:43:50.794175057Z \u001b[32m2025-08-28 15:43:50.758\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: optimization\u001b[0m\n2025-08-28T15:43:50.802129315Z \u001b[32m2025-08-28 15:43:50.759\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: actions\u001b[0m\n2025-08-28T15:43:50.802638214Z \u001b[32m2025-08-28 15:43:50.759\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: reporting\u001b[0m\n2025-08-28T15:43:50.818211594Z \u001b[32m2025-08-28 15:43:50.759\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: synthetic_data\u001b[0m\n2025-08-28T15:43:50.820409686Z \u001b[32m2025-08-28 15:43:50.759\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: corpus_admin\u001b[0m\n2025-08-28T15:43:50.825875458Z \u001b[32m2025-08-28 15:43:50.773\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: triage\u001b[0m\n2025-08-28T15:43:50.829377634Z \u001b[32m2025-08-28 15:43:50.774\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: data\u001b[0m\n2025-08-28T15:43:50.829409436Z \u001b[32m2025-08-28 15:43:50.774\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: optimization\u001b[0m\n2025-08-28T15:43:50.829413537Z \u001b[32m2025-08-28 15:43:50.774\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: actions\u001b[0m\n2025-08-28T15:43:50.829416179Z \u001b[32m2025-08-28 15:43:50.775\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: reporting\u001b[0m\n2025-08-28T15:43:50.829418521Z \u001b[32m2025-08-28 15:43:50.775\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: synthetic_data\u001b[0m\n2025-08-28T15:43:50.829435279Z \u001b[32m2025-08-28 15:43:50.775\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: corpus_admin\u001b[0m\n2025-08-28T15:43:50.829438236Z \u001b[32m2025-08-28 15:43:50.791\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.netra_mcp.modules.netra_mcp_core\u001b[0m:\u001b[36m_register_components\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mMCP Server components registered\u001b[0m\n2025-08-28T15:43:50.829440578Z \u001b[32m2025-08-28 15:43:50.791\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.netra_mcp.modules.netra_mcp_core\u001b[0m:\u001b[36mset_services\u001b[0m:\u001b[36m56\u001b[0m | \u001b[1mMCP Server services configured\u001b[0m\n2025-08-28T15:43:50.829442891Z \u001b[32m2025-08-28 15:43:50.791\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.mcp_service\u001b[0m:\u001b[36m_initialize_session_storage\u001b[0m:\u001b[36m106\u001b[0m | \u001b[1mMCP Service initialized with FastMCP 2\u001b[0m\n2025-08-28T15:43:50.829445682Z \u001b[32m2025-08-28 15:43:50.793\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.netra_mcp.modules.netra_mcp_core\u001b[0m:\u001b[36m_register_components\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mMCP Server components registered\u001b[0m\n2025-08-28T15:43:50.829448938Z \u001b[32m2025-08-28 15:43:50.793\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.netra_mcp.modules.netra_mcp_core\u001b[0m:\u001b[36mset_services\u001b[0m:\u001b[36m56\u001b[0m | \u001b[1mMCP Server services configured\u001b[0m\n2025-08-28T15:43:50.829458253Z \u001b[32m2025-08-28 15:43:50.793\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.mcp_service\u001b[0m:\u001b[36m_initialize_session_storage\u001b[0m:\u001b[36m106\u001b[0m | \u001b[1mMCP Service initialized with FastMCP 2\u001b[0m\n2025-08-28T15:43:50.829461300Z \u001b[32m2025-08-28 15:43:50.795\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: triage\u001b[0m\n2025-08-28T15:43:50.829463725Z \u001b[32m2025-08-28 15:43:50.795\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: data\u001b[0m\n2025-08-28T15:43:50.829469981Z \u001b[32m2025-08-28 15:43:50.795\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: optimization\u001b[0m\n2025-08-28T15:43:50.829584148Z \u001b[32m2025-08-28 15:43:50.795\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: actions\u001b[0m\n2025-08-28T15:43:50.829594501Z \u001b[32m2025-08-28 15:43:50.796\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: reporting\u001b[0m\n2025-08-28T15:43:50.829596403Z \u001b[32m2025-08-28 15:43:50.796\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: synthetic_data\u001b[0m\n2025-08-28T15:43:50.829606424Z \u001b[32m2025-08-28 15:43:50.796\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: corpus_admin\u001b[0m\n2025-08-28T15:43:50.829607758Z \u001b[32m2025-08-28 15:43:50.802\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: triage\u001b[0m\n2025-08-28T15:43:50.829608990Z \u001b[32m2025-08-28 15:43:50.803\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: data\u001b[0m\n2025-08-28T15:43:50.829610274Z \u001b[32m2025-08-28 15:43:50.803\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: optimization\u001b[0m\n2025-08-28T15:43:50.829615046Z \u001b[32m2025-08-28 15:43:50.803\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: actions\u001b[0m\n2025-08-28T15:43:50.829616377Z \u001b[32m2025-08-28 15:43:50.803\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: reporting\u001b[0m\n2025-08-28T15:43:50.829692323Z \u001b[32m2025-08-28 15:43:50.804\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: synthetic_data\u001b[0m\n2025-08-28T15:43:50.829697941Z \u001b[32m2025-08-28 15:43:50.804\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: corpus_admin\u001b[0m\n2025-08-28T15:43:50.829699396Z \u001b[32m2025-08-28 15:43:50.817\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.netra_mcp.modules.netra_mcp_core\u001b[0m:\u001b[36m_register_components\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mMCP Server components registered\u001b[0m\n2025-08-28T15:43:50.829700720Z \u001b[32m2025-08-28 15:43:50.817\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.netra_mcp.modules.netra_mcp_core\u001b[0m:\u001b[36mset_services\u001b[0m:\u001b[36m56\u001b[0m | \u001b[1mMCP Server services configured\u001b[0m\n2025-08-28T15:43:50.829702057Z \u001b[32m2025-08-28 15:43:50.817\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.mcp_service\u001b[0m:\u001b[36m_initialize_session_storage\u001b[0m:\u001b[36m106\u001b[0m | \u001b[1mMCP Service initialized with FastMCP 2\u001b[0m\n2025-08-28T15:43:50.829703518Z \u001b[32m2025-08-28 15:43:50.828\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.netra_mcp.modules.netra_mcp_core\u001b[0m:\u001b[36m_register_components\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mMCP Server components registered\u001b[0m\n2025-08-28T15:43:50.829704963Z \u001b[32m2025-08-28 15:43:50.828\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.netra_mcp.modules.netra_mcp_core\u001b[0m:\u001b[36mset_services\u001b[0m:\u001b[36m56\u001b[0m | \u001b[1mMCP Server services configured\u001b[0m\n2025-08-28T15:43:50.829716968Z \u001b[32m2025-08-28 15:43:50.828\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.mcp_service\u001b[0m:\u001b[36m_initialize_session_storage\u001b[0m:\u001b[36m106\u001b[0m | \u001b[1mMCP Service initialized with FastMCP 2\u001b[0m\n2025-08-28T15:43:50.833415254Z \u001b[32m2025-08-28 15:43:50.832\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mHTTP Request: POST http://auth:8081/auth/check-blacklist \"HTTP/1.1 200 OK\"\u001b[0m\n2025-08-28T15:43:50.841100331Z \u001b[32m2025-08-28 15:43:50.839\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mHTTP Request: POST http://auth:8081/auth/validate \"HTTP/1.1 200 OK\"\u001b[0m\n2025-08-28T15:43:50.842762180Z \u001b[32m2025-08-28 15:43:50.841\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mCompleted trace span: websocket_jwt_validation\u001b[0m\n2025-08-28T15:43:50.843989828Z \u001b[32m2025-08-28 15:43:50.842\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.auth\u001b[0m:\u001b[36mauthenticate_websocket\u001b[0m:\u001b[36m121\u001b[0m | \u001b[1mWebSocket authenticated: dev-temp-cc173c1d\u001b[0m\n2025-08-28T15:43:50.844011824Z \u001b[32m2025-08-28 15:43:50.842\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36mwebsocket_endpoint\u001b[0m:\u001b[36m154\u001b[0m | \u001b[1mWebSocket authenticated for user: dev-temp-cc173c1d at 2025-08-28T15:43:50.842175+00:00\u001b[0m\n2025-08-28T15:43:50.844014117Z \u001b[32m2025-08-28 15:43:50.842\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36mconnect_user\u001b[0m:\u001b[36m124\u001b[0m | \u001b[1mWebSocket connected: conn_dev-temp-cc173c1d_fd987ed8 for user dev-temp-cc173c1d\u001b[0m\n2025-08-28T15:43:50.844015701Z \u001b[32m2025-08-28 15:43:50.842\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36mwebsocket_endpoint\u001b[0m:\u001b[36m188\u001b[0m | \u001b[1mWebSocket ready: conn_dev-temp-cc173c1d_fd987ed8\u001b[0m\n2025-08-28T15:43:50.844122489Z \u001b[32m2025-08-28 15:43:50.842\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36mwebsocket_endpoint\u001b[0m:\u001b[36m191\u001b[0m | \u001b[1mStarting message handling loop for connection: conn_dev-temp-cc173c1d_fd987ed8\u001b[0m\n2025-08-28T15:43:50.848925185Z \u001b[32m2025-08-28 15:43:50.842\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36mwebsocket_endpoint\u001b[0m:\u001b[36m193\u001b[0m | \u001b[1mWebSocket state before loop - client_state: WebSocketState.CONNECTED, application_state: WebSocketState.CONNECTED\u001b[0m\n2025-08-28T15:43:50.848963898Z \u001b[32m2025-08-28 15:43:50.843\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36m_handle_websocket_messages\u001b[0m:\u001b[36m276\u001b[0m | \u001b[1mEntering message handling loop for connection: conn_dev-temp-cc173c1d_fd987ed8 (user: dev-temp-cc173c1d)\u001b[0m\n2025-08-28T15:43:50.848966139Z \u001b[32m2025-08-28 15:43:50.843\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36m_handle_websocket_messages\u001b[0m:\u001b[36m279\u001b[0m | \u001b[1mWebSocket state at loop entry - client_state: WebSocketState.CONNECTED, application_state: WebSocketState.CONNECTED\u001b[0m\n2025-08-28T15:43:50.849015874Z \u001b[32m2025-08-28 15:43:50.843\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36m_handle_websocket_messages\u001b[0m:\u001b[36m285\u001b[0m | \u001b[1mFirst loop iteration for conn_dev-temp-cc173c1d_fd987ed8, WebSocket is_connected returned True\u001b[0m\n2025-08-28T15:43:50.850190065Z \u001b[32m2025-08-28 15:43:50.844\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mHTTP Request: POST http://auth:8081/auth/check-blacklist \"HTTP/1.1 200 OK\"\u001b[0m\n2025-08-28T15:43:50.851733139Z \u001b[32m2025-08-28 15:43:50.845\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mHTTP Request: POST http://auth:8081/auth/check-blacklist \"HTTP/1.1 200 OK\"\u001b[0m\n2025-08-28T15:43:50.857376881Z \u001b[32m2025-08-28 15:43:50.848\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mHTTP Request: POST http://auth:8081/auth/check-blacklist \"HTTP/1.1 200 OK\"\u001b[0m\n2025-08-28T15:43:50.857410195Z \u001b[32m2025-08-28 15:43:50.850\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mHTTP Request: POST http://auth:8081/auth/check-blacklist \"HTTP/1.1 200 OK\"\u001b[0m\n2025-08-28T15:43:50.857412491Z \u001b[32m2025-08-28 15:43:50.853\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mHTTP Request: POST http://auth:8081/auth/validate \"HTTP/1.1 200 OK\"\u001b[0m\n2025-08-28T15:43:50.858881393Z \u001b[32m2025-08-28 15:43:50.855\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mHTTP Request: POST http://auth:8081/auth/validate \"HTTP/1.1 200 OK\"\u001b[0m\n2025-08-28T15:43:50.861137132Z \u001b[32m2025-08-28 15:43:50.860\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mHTTP Request: POST http://auth:8081/auth/validate \"HTTP/1.1 200 OK\"\u001b[0m\n2025-08-28T15:43:50.864214951Z \u001b[32m2025-08-28 15:43:50.863\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mHTTP Request: POST http://auth:8081/auth/validate \"HTTP/1.1 200 OK\"\u001b[0m\n2025-08-28T15:43:50.998153774Z \u001b[32m2025-08-28 15:43:50.994\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[33m\u001b[1mUsing dev user: dev@example.com\u001b[0m\n2025-08-28T15:43:51.140968786Z \u001b[32m2025-08-28 15:43:50.999\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[33m\u001b[1mUsing dev user: dev@example.com\u001b[0m\n2025-08-28T15:43:51.141620195Z \u001b[32m2025-08-28 15:43:51.001\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[33m\u001b[1mUsing dev user: dev@example.com\u001b[0m\n2025-08-28T15:43:51.145321152Z \u001b[32m2025-08-28 15:43:51.003\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[33m\u001b[1mUsing dev user: dev@example.com\u001b[0m\n2025-08-28T15:43:51.145979787Z \u001b[32m2025-08-28 15:43:51.005\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.request_context\u001b[0m:\u001b[36mlog_request_details\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mRequest: GET /api/mcp/tools | Status: 200 | Duration: 249.88ms | Trace: trace_5b3b561675814d87\u001b[0m\n2025-08-28T15:43:51.150585311Z \u001b[32m2025-08-28 15:43:51.009\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.request_context\u001b[0m:\u001b[36mlog_request_details\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mRequest: GET /api/mcp/tools | Status: 200 | Duration: 257.04ms | Trace: trace_74a1f28f055b4dad\u001b[0m\n2025-08-28T15:43:51.154925647Z \u001b[32m2025-08-28 15:43:51.010\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.request_context\u001b[0m:\u001b[36mlog_request_details\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mRequest: GET /api/mcp/servers | Status: 200 | Duration: 255.94ms | Trace: trace_65c176f4cfb34472\u001b[0m\n2025-08-28T15:43:51.154952270Z \u001b[32m2025-08-28 15:43:51.144\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.request_context\u001b[0m:\u001b[36mlog_request_details\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mRequest: GET /api/mcp/servers | Status: 200 | Duration: 398.16ms | Trace: trace_335493a2644e4c20\u001b[0m\n2025-08-28T15:43:51.154954367Z \u001b[32m2025-08-28 15:43:51.144\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m47\u001b[0m | \u001b[1mResponse for /api/mcp/tools: status=200, is_api=True, has_auth=False\u001b[0m\n2025-08-28T15:43:51.154955965Z \u001b[32m2025-08-28 15:43:51.146\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m172.18.0.7:55996 - \"GET /api/mcp/tools HTTP/1.1\" 200\u001b[0m\n2025-08-28T15:43:51.154957468Z \u001b[32m2025-08-28 15:43:51.146\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m47\u001b[0m | \u001b[1mResponse for /api/mcp/tools: status=200, is_api=True, has_auth=False\u001b[0m\n2025-08-28T15:43:51.154958909Z \u001b[32m2025-08-28 15:43:51.147\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m47\u001b[0m | \u001b[1mResponse for /api/mcp/servers: status=200, is_api=True, has_auth=False\u001b[0m\n2025-08-28T15:43:51.155062052Z \u001b[32m2025-08-28 15:43:51.148\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m47\u001b[0m | \u001b[1mResponse for /api/mcp/servers: status=200, is_api=True, has_auth=False\u001b[0m\n2025-08-28T15:43:51.155064269Z \u001b[32m2025-08-28 15:43:51.148\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m172.18.0.7:50540 - \"GET /api/mcp/tools HTTP/1.1\" 200\u001b[0m\n2025-08-28T15:43:51.158083880Z \u001b[32m2025-08-28 15:43:51.149\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m172.18.0.7:55980 - \"GET /api/mcp/servers HTTP/1.1\" 200\u001b[0m\n2025-08-28T15:43:51.159526370Z \u001b[32m2025-08-28 15:43:51.151\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m172.18.0.7:50538 - \"GET /api/mcp/servers HTTP/1.1\" 200\u001b[0m\n2025-08-28T15:43:53.154903838Z \u001b[32m2025-08-28 15:43:53.150\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m41\u001b[0m | \u001b[1mSecurityResponseMiddleware processing: /health\u001b[0m\n2025-08-28T15:43:53.154936010Z \u001b[32m2025-08-28 15:43:53.152\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.request_context\u001b[0m:\u001b[36mlog_request_details\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mRequest: GET /health | Status: 200 | Duration: 1.58ms | Trace: trace_232cf23287bb4a62\u001b[0m\n2025-08-28T15:43:53.154938026Z \u001b[32m2025-08-28 15:43:53.153\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m47\u001b[0m | \u001b[1mResponse for /health: status=200, is_api=False, has_auth=False\u001b[0m\n2025-08-28T15:43:53.154939404Z \u001b[32m2025-08-28 15:43:53.153\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m127.0.0.1:47330 - \"GET /health HTTP/1.1\" 200\u001b[0m\n2025-08-28T15:44:20.718154728Z \u001b[32m2025-08-28 15:44:20.716\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_index_optimization_background\u001b[0m:\u001b[36m232\u001b[0m | \u001b[1mStarting background database index optimization...\u001b[0m\n2025-08-28T15:44:20.718783498Z \u001b[32m2025-08-28 15:44:20.716\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.db.database_index_manager\u001b[0m:\u001b[36moptimize_all_databases\u001b[0m:\u001b[36m129\u001b[0m | \u001b[1mStarting database optimization across all databases\u001b[0m\n2025-08-28T15:44:20.718956326Z \u001b[32m2025-08-28 15:44:20.717\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.db.index_optimizer_core\u001b[0m:\u001b[36mlog_engine_unavailable\u001b[0m:\u001b[36m52\u001b[0m | \u001b[33m\u001b[1mAsync engine not available, skipping index creation\u001b[0m\n2025-08-28T15:44:20.718973095Z \u001b[32m2025-08-28 15:44:20.717\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.db.clickhouse\u001b[0m:\u001b[36m_create_mock_client\u001b[0m:\u001b[36m132\u001b[0m | \u001b[1m[ClickHouse] Using MOCK client for development\u001b[0m\n2025-08-28T15:44:20.719092916Z \u001b[32m2025-08-28 15:44:20.717\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.db.clickhouse\u001b[0m:\u001b[36m_create_mock_client\u001b[0m:\u001b[36m132\u001b[0m | \u001b[1m[ClickHouse] Using MOCK client for development\u001b[0m\n2025-08-28T15:44:20.719109361Z \u001b[32m2025-08-28 15:44:20.718\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.db.database_index_manager\u001b[0m:\u001b[36moptimize_all_databases\u001b[0m:\u001b[36m138\u001b[0m | \u001b[1mDatabase optimization completed - PostgreSQL: True, ClickHouse: True\u001b[0m\n2025-08-28T15:44:20.719119447Z \u001b[32m2025-08-28 15:44:20.718\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_index_optimization_background\u001b[0m:\u001b[36m239\u001b[0m | \u001b[1mBackground database optimization completed successfully: {'postgres': {'indexes_created': {}, 'recommendations': [{'table_name': 'userbase', 'columns': ['email'], 'index_type': 'btree', 'reason': 'Frequent user lookups by email', 'estimated_benefit': 0.0, 'priority': 1}, {'table_name': 'corpus_audit_logs', 'columns': ['timestamp'], 'index_type': 'btree', 'reason': 'Time-based audit queries', 'estimated_benefit': 0.0, 'priority': 1}, {'table_name': 'corpus_audit_logs', 'columns': ['user_id', 'action'], 'index_type': 'btree', 'reason': 'User action filtering', 'estimated_benefit': 0.0, 'priority': 2}, {'table_name': 'secret', 'columns': ['user_id'], 'index_type': 'btree', 'reason': 'User secret lookups', 'estimated_benefit': 0.0, 'priority': 2}, {'table_name': 'agent_states', 'columns': ['session_id'], 'index_type': 'btree', 'reason': 'Session-based state lookups', 'estimated_benefit': 0.0, 'priority': 2}], 'usage_stats': {}}, 'clickhouse': {'table_optimizations': {'netra_content_corpus': False, 'netra_audit_events': False, 'netra_performance_metrics': False, 'netra_agent_logs': False}, 'materialized_views': {'user_daily_activity': False, 'hourly_performance_metrics': False}}, 'recommendations': []}\u001b[0m\n2025-08-28T15:44:23.212206129Z \u001b[32m2025-08-28 15:44:23.206\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m41\u001b[0m | \u001b[1mSecurityResponseMiddleware processing: /health\u001b[0m\n2025-08-28T15:44:23.213077849Z \u001b[32m2025-08-28 15:44:23.209\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.request_context\u001b[0m:\u001b[36mlog_request_details\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mRequest: GET /health | Status: 200 | Duration: 1.78ms | Trace: trace_d4386c470bea4fbb\u001b[0m\n2025-08-28T15:44:23.213091188Z \u001b[32m2025-08-28 15:44:23.210\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m47\u001b[0m | \u001b[1mResponse for /health: status=200, is_api=False, has_auth=False\u001b[0m\n2025-08-28T15:44:23.213147312Z \u001b[32m2025-08-28 15:44:23.211\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m127.0.0.1:34106 - \"GET /health HTTP/1.1\" 200\u001b[0m\n2025-08-28T15:44:53.285592286Z \u001b[32m2025-08-28 15:44:53.280\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m41\u001b[0m | \u001b[1mSecurityResponseMiddleware processing: /health\u001b[0m\n2025-08-28T15:44:53.286671840Z \u001b[32m2025-08-28 15:44:53.283\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.request_context\u001b[0m:\u001b[36mlog_request_details\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mRequest: GET /health | Status: 200 | Duration: 1.38ms | Trace: trace_834dae41186b48a0\u001b[0m\n2025-08-28T15:44:53.286702198Z \u001b[32m2025-08-28 15:44:53.284\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m47\u001b[0m | \u001b[1mResponse for /health: status=200, is_api=False, has_auth=False\u001b[0m\n2025-08-28T15:44:53.286752513Z \u001b[32m2025-08-28 15:44:53.284\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m127.0.0.1:37948 - \"GET /health HTTP/1.1\" 200\u001b[0m\n2025-08-28T15:45:20.839211068Z \u001b[32m2025-08-28 15:45:20.838\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.utils\u001b[0m:\u001b[36m_heartbeat_loop\u001b[0m:\u001b[36m240\u001b[0m | \u001b[33m\u001b[1mWebSocket heartbeat timeout\u001b[0m\n2025-08-28T15:45:23.349858877Z \u001b[32m2025-08-28 15:45:23.346\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m41\u001b[0m | \u001b[1mSecurityResponseMiddleware processing: /health\u001b[0m\n2025-08-28T15:45:23.354400611Z \u001b[32m2025-08-28 15:45:23.350\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.request_context\u001b[0m:\u001b[36mlog_request_details\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mRequest: GET /health | Status: 200 | Duration: 3.04ms | Trace: trace_a25062c4037d40cf\u001b[0m\n2025-08-28T15:45:23.354438863Z \u001b[32m2025-08-28 15:45:23.351\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m47\u001b[0m | \u001b[1mResponse for /health: status=200, is_api=False, has_auth=False\u001b[0m\n2025-08-28T15:45:23.354444031Z \u001b[32m2025-08-28 15:45:23.352\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m127.0.0.1:37568 - \"GET /health HTTP/1.1\" 200\u001b[0m\n2025-08-28T15:45:53.421021128Z \u001b[32m2025-08-28 15:45:53.413\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m41\u001b[0m | \u001b[1mSecurityResponseMiddleware processing: /health\u001b[0m\n2025-08-28T15:45:53.421061721Z \u001b[32m2025-08-28 15:45:53.418\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.request_context\u001b[0m:\u001b[36mlog_request_details\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mRequest: GET /health | Status: 200 | Duration: 1.57ms | Trace: trace_530f54aa66ed46d4\u001b[0m\n2025-08-28T15:45:53.421359987Z \u001b[32m2025-08-28 15:45:53.419\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m47\u001b[0m | \u001b[1mResponse for /health: status=200, is_api=False, has_auth=False\u001b[0m\n2025-08-28T15:45:53.421451499Z \u001b[32m2025-08-28 15:45:53.419\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m127.0.0.1:43604 - \"GET /health HTTP/1.1\" 200\u001b[0m\n2025-08-28T15:46:23.472293735Z \u001b[32m2025-08-28 15:46:23.468\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m41\u001b[0m | \u001b[1mSecurityResponseMiddleware processing: /health\u001b[0m\n2025-08-28T15:46:23.474306802Z \u001b[32m2025-08-28 15:46:23.470\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.request_context\u001b[0m:\u001b[36mlog_request_details\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mRequest: GET /health | Status: 200 | Duration: 1.47ms | Trace: trace_1dfc0e700ef64fea\u001b[0m\n2025-08-28T15:46:23.474333082Z \u001b[32m2025-08-28 15:46:23.471\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m47\u001b[0m | \u001b[1mResponse for /health: status=200, is_api=False, has_auth=False\u001b[0m\n2025-08-28T15:46:23.474335349Z \u001b[32m2025-08-28 15:46:23.472\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m127.0.0.1:44934 - \"GET /health HTTP/1.1\" 200\u001b[0m\n2025-08-28T15:46:53.536501685Z \u001b[32m2025-08-28 15:46:53.530\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m41\u001b[0m | \u001b[1mSecurityResponseMiddleware processing: /health\u001b[0m\n2025-08-28T15:46:53.536633505Z \u001b[32m2025-08-28 15:46:53.533\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.request_context\u001b[0m:\u001b[36mlog_request_details\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mRequest: GET /health | Status: 200 | Duration: 1.29ms | Trace: trace_70e06cb3fc104390\u001b[0m\n2025-08-28T15:46:53.536657002Z \u001b[32m2025-08-28 15:46:53.533\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m47\u001b[0m | \u001b[1mResponse for /health: status=200, is_api=False, has_auth=False\u001b[0m\n2025-08-28T15:46:53.536661061Z \u001b[32m2025-08-28 15:46:53.534\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m127.0.0.1:60912 - \"GET /health HTTP/1.1\" 200\u001b[0m\n2025-08-28T15:47:23.601012766Z \u001b[32m2025-08-28 15:47:23.596\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m41\u001b[0m | \u001b[1mSecurityResponseMiddleware processing: /health\u001b[0m\n2025-08-28T15:47:23.601054642Z \u001b[32m2025-08-28 15:47:23.598\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.request_context\u001b[0m:\u001b[36mlog_request_details\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mRequest: GET /health | Status: 200 | Duration: 1.43ms | Trace: trace_81bc8f13301f4e1b\u001b[0m\n2025-08-28T15:47:23.601089156Z \u001b[32m2025-08-28 15:47:23.599\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m47\u001b[0m | \u001b[1mResponse for /health: status=200, is_api=False, has_auth=False\u001b[0m\n2025-08-28T15:47:23.601097042Z \u001b[32m2025-08-28 15:47:23.599\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m127.0.0.1:48646 - \"GET /health HTTP/1.1\" 200\u001b[0m\n2025-08-28T15:47:53.657699496Z \u001b[32m2025-08-28 15:47:53.651\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m41\u001b[0m | \u001b[1mSecurityResponseMiddleware processing: /health\u001b[0m\n2025-08-28T15:47:53.657733764Z \u001b[32m2025-08-28 15:47:53.654\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.request_context\u001b[0m:\u001b[36mlog_request_details\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mRequest: GET /health | Status: 200 | Duration: 1.41ms | Trace: trace_7937c53cdc824f15\u001b[0m\n2025-08-28T15:47:53.657739279Z \u001b[32m2025-08-28 15:47:53.655\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m47\u001b[0m | \u001b[1mResponse for /health: status=200, is_api=False, has_auth=False\u001b[0m\n2025-08-28T15:47:53.657743356Z \u001b[32m2025-08-28 15:47:53.655\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m127.0.0.1:55734 - \"GET /health HTTP/1.1\" 200\u001b[0m\n2025-08-28T15:48:23.709023475Z \u001b[32m2025-08-28 15:48:23.702\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m41\u001b[0m | \u001b[1mSecurityResponseMiddleware processing: /health\u001b[0m\n2025-08-28T15:48:23.709305156Z \u001b[32m2025-08-28 15:48:23.705\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.request_context\u001b[0m:\u001b[36mlog_request_details\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mRequest: GET /health | Status: 200 | Duration: 2.12ms | Trace: trace_9b79c98fc80243ef\u001b[0m\n2025-08-28T15:48:23.709796748Z \u001b[32m2025-08-28 15:48:23.706\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m47\u001b[0m | \u001b[1mResponse for /health: status=200, is_api=False, has_auth=False\u001b[0m\n2025-08-28T15:48:23.709880526Z \u001b[32m2025-08-28 15:48:23.707\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m127.0.0.1:40406 - \"GET /health HTTP/1.1\" 200\u001b[0m\n2025-08-28T15:48:36.317363335Z WARNING:  WatchFiles detected changes in 'scripts/docker_log_remediation_loop.py'. Reloading...\n2025-08-28T15:48:36.328010345Z \u001b[32m2025-08-28 15:48:36.325\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mShutting down\u001b[0m\n2025-08-28T15:48:36.328050438Z \u001b[32m2025-08-28 15:48:36.325\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mShutting down\u001b[0m\n2025-08-28T15:48:36.328130999Z \u001b[32m2025-08-28 15:48:36.326\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mconnection closed\u001b[0m\n2025-08-28T15:48:36.328147567Z \u001b[32m2025-08-28 15:48:36.326\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mconnection closed\u001b[0m\n2025-08-28T15:48:36.328151814Z \u001b[32m2025-08-28 15:48:36.326\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36m_handle_websocket_messages\u001b[0m:\u001b[36m362\u001b[0m | \u001b[1mWebSocket disconnect: {'connection_id': 'conn_dev-temp-cc173c1d_fd987ed8', 'user_id': 'dev-temp-cc173c1d', 'disconnect_code': 1012, 'disconnect_reason': 'No reason provided', 'connection_duration': 'Unknown'}\u001b[0m\n2025-08-28T15:48:36.328167340Z \u001b[32m2025-08-28 15:48:36.326\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36m_handle_websocket_messages\u001b[0m:\u001b[36m383\u001b[0m | \u001b[1mExiting message handling loop for connection: conn_dev-temp-cc173c1d_fd987ed8 | Duration: 285.5s | Messages processed: 9 | Errors: 0 | User: dev-temp-cc173c1d\u001b[0m\n2025-08-28T15:48:36.328169595Z \u001b[32m2025-08-28 15:48:36.327\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36mwebsocket_endpoint\u001b[0m:\u001b[36m198\u001b[0m | \u001b[1mMessage handling loop ended for connection: conn_dev-temp-cc173c1d_fd987ed8\u001b[0m\n2025-08-28T15:48:36.328189033Z \u001b[32m2025-08-28 15:48:36.327\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.auth\u001b[0m:\u001b[36mcleanup\u001b[0m:\u001b[36m349\u001b[0m | \u001b[1mWebSocket authenticator cleanup completed\u001b[0m\n2025-08-28T15:48:36.328220231Z \u001b[32m2025-08-28 15:48:36.327\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36mdisconnect_user\u001b[0m:\u001b[36m135\u001b[0m | \u001b[1mWebSocket disconnected: conn_dev-temp-cc173c1d_fd987ed8 (1000: Normal closure)\u001b[0m\n2025-08-28T15:48:36.328224490Z \u001b[32m2025-08-28 15:48:36.327\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36mwebsocket_endpoint\u001b[0m:\u001b[36m255\u001b[0m | \u001b[1mWebSocket cleanup completed: conn_dev-temp-cc173c1d_fd987ed8\u001b[0m\n2025-08-28T15:48:36.427346423Z \u001b[32m2025-08-28 15:48:36.425\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mWaiting for application shutdown.\u001b[0m\n2025-08-28T15:48:36.427387621Z \u001b[32m2025-08-28 15:48:36.426\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mWaiting for application shutdown.\u001b[0m\n2025-08-28T15:48:36.427389864Z \u001b[32m2025-08-28 15:48:36.426\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.shutdown\u001b[0m:\u001b[36mshutdown_cleanup\u001b[0m:\u001b[36m20\u001b[0m | \u001b[1mApplication shutdown initiated...\u001b[0m\n2025-08-28T15:48:36.427391164Z \u001b[32m2025-08-28 15:48:36.426\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.utils.multiprocessing_cleanup\u001b[0m:\u001b[36mcleanup_all\u001b[0m:\u001b[36m90\u001b[0m | \u001b[1mMultiprocessing resources cleaned up\u001b[0m\n2025-08-28T15:48:36.427392358Z \u001b[32m2025-08-28 15:48:36.426\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.shutdown\u001b[0m:\u001b[36mrun_complete_shutdown\u001b[0m:\u001b[36m120\u001b[0m | \u001b[1mShutting down background task manager...\u001b[0m\n2025-08-28T15:48:36.427393527Z \u001b[32m2025-08-28 15:48:36.426\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mShutting down BackgroundTaskManager...\u001b[0m\n2025-08-28T15:48:36.427480617Z \u001b[32m2025-08-28 15:48:36.426\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mBackgroundTaskManager shutdown complete\u001b[0m\n2025-08-28T15:48:36.427520053Z \u001b[32m2025-08-28 15:48:36.426\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.shutdown\u001b[0m:\u001b[36mrun_complete_shutdown\u001b[0m:\u001b[36m122\u001b[0m | \u001b[1mBackground task manager shutdown complete\u001b[0m\n2025-08-28T15:48:36.427522322Z \u001b[32m2025-08-28 15:48:36.427\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.shutdown\u001b[0m:\u001b[36mstop_monitoring\u001b[0m:\u001b[36m48\u001b[0m | \u001b[31m\u001b[1mError stopping monitoring and optimizations: 'ExecutionMonitor' object has no attribute 'stop_monitoring'\u001b[0m\n2025-08-28T15:48:36.529040877Z \u001b[32m2025-08-28 15:48:36.527\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mShutting down BackgroundTaskManager...\u001b[0m\n2025-08-28T15:48:36.529066554Z \u001b[32m2025-08-28 15:48:36.527\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mBackgroundTaskManager shutdown complete\u001b[0m\n2025-08-28T15:48:36.529068734Z \u001b[32m2025-08-28 15:48:36.527\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.base_agent\u001b[0m:\u001b[36mshutdown\u001b[0m:\u001b[36m68\u001b[0m | \u001b[1mShutting down Supervisor\u001b[0m\n2025-08-28T15:48:36.529081188Z \u001b[32m2025-08-28 15:48:36.528\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36mshutdown\u001b[0m:\u001b[36m737\u001b[0m | \u001b[1mShutting down WebSocket manager with 0 connections\u001b[0m\n2025-08-28T15:48:36.529082442Z \u001b[32m2025-08-28 15:48:36.528\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36mshutdown\u001b[0m:\u001b[36m752\u001b[0m | \u001b[1mWebSocket manager shutdown complete\u001b[0m\n2025-08-28T15:48:36.529087070Z \u001b[32m2025-08-28 15:48:36.528\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.shutdown\u001b[0m:\u001b[36mcleanup_resources\u001b[0m:\u001b[36m101\u001b[0m | \u001b[1mWebSocket manager shutdown completed\u001b[0m\n2025-08-28T15:48:36.530329832Z \u001b[32m2025-08-28 15:48:36.529\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.shutdown\u001b[0m:\u001b[36mrun_complete_shutdown\u001b[0m:\u001b[36m135\u001b[0m | \u001b[1mApplication shutdown complete.\u001b[0m\n2025-08-28T15:48:36.530339604Z \u001b[32m2025-08-28 15:48:36.529\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mApplication shutdown complete.\u001b[0m\n2025-08-28T15:48:36.530436861Z \u001b[32m2025-08-28 15:48:36.529\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mApplication shutdown complete.\u001b[0m\n2025-08-28T15:48:36.530989739Z \u001b[32m2025-08-28 15:48:36.529\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mFinished server process [1160]\u001b[0m\n2025-08-28T15:48:36.531138116Z \u001b[32m2025-08-28 15:48:36.529\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mFinished server process [1160]\u001b[0m\n2025-08-28T15:48:36.532511435Z \u001b[32m2025-08-28 15:48:36.532\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.utils.multiprocessing_cleanup\u001b[0m:\u001b[36mcleanup_all\u001b[0m:\u001b[36m90\u001b[0m | \u001b[1mMultiprocessing resources cleaned up\u001b[0m\n2025-08-28T15:48:37.636318225Z Critical environment variables already set - skipping .env loading\n2025-08-28T15:48:41.126821911Z \u001b[32m2025-08-28 15:48:41.126\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.configuration.database\u001b[0m:\u001b[36m_get_postgres_url\u001b[0m:\u001b[36m184\u001b[0m | \u001b[1mUsing PostgreSQL URL from development configuration\u001b[0m\n2025-08-28T15:48:41.139186253Z \u001b[32m2025-08-28 15:48:41.137\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[33m\u001b[1mGoogle Cloud Secret Manager not available: cannot import name 'secretmanager' from 'google.cloud' (unknown location)\u001b[0m\n2025-08-28T15:48:41.139251517Z \u001b[32m2025-08-28 15:48:41.138\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.configuration.database\u001b[0m:\u001b[36m_populate_redis_config\u001b[0m:\u001b[36m138\u001b[0m | \u001b[1mRedis Configuration (development/URL/No SSL): redis://redis:6379/0, Pool: 10, DB: 0\u001b[0m\n2025-08-28T15:48:41.143590733Z \u001b[32m2025-08-28 15:48:41.141\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.configuration.secrets\u001b[0m:\u001b[36mpopulate_secrets\u001b[0m:\u001b[36m198\u001b[0m | \u001b[1mPopulated secrets for development\u001b[0m\n2025-08-28T15:48:44.969829786Z \u001b[32m2025-08-28 15:48:44.968\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mCORS Configuration for development:\u001b[0m\n2025-08-28T15:48:44.969894753Z \u001b[32m2025-08-28 15:48:44.969\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m  Origins count: 41\u001b[0m\n2025-08-28T15:48:44.969903147Z \u001b[32m2025-08-28 15:48:44.969\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m  Allow credentials: True\u001b[0m\n2025-08-28T15:48:44.969906575Z \u001b[32m2025-08-28 15:48:44.969\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m  First 3 origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:3002']\u001b[0m\n2025-08-28T15:48:44.969908997Z \u001b[32m2025-08-28 15:48:44.969\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mCORS middleware configured for environment: development\u001b[0m\n2025-08-28T15:48:45.018708600Z \u001b[32m2025-08-28 15:48:45.017\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mAuthentication middleware configured with WebSocket exclusions\u001b[0m\n2025-08-28T15:48:45.018747539Z \u001b[32m2025-08-28 15:48:45.018\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mSession middleware config: same_site=lax, https_only=False, environment=development\u001b[0m\n2025-08-28T15:48:48.730861752Z \u001b[32m2025-08-28 15:48:48.730\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.state_persistence_optimized\u001b[0m:\u001b[36m__init__\u001b[0m:\u001b[36m52\u001b[0m | \u001b[1mOptimized state persistence service initialized\u001b[0m\n2025-08-28T15:48:51.230819479Z \u001b[32m2025-08-28 15:48:51.226\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.health.telemetry\u001b[0m:\u001b[36mregister_service\u001b[0m:\u001b[36m340\u001b[0m | \u001b[1mRegistered telemetry for service: netra-ai-platform\u001b[0m\n2025-08-28T15:48:52.208228954Z \u001b[32m2025-08-28 15:48:52.200\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.fallback_response.response_generator\u001b[0m:\u001b[36m__init__\u001b[0m:\u001b[36m30\u001b[0m | \u001b[1mResponse Generator initialized\u001b[0m\n2025-08-28T15:48:52.208262111Z \u001b[32m2025-08-28 15:48:52.201\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.quality_gate.quality_gate_core\u001b[0m:\u001b[36m__init__\u001b[0m:\u001b[36m38\u001b[0m | \u001b[1mQuality Gate Service initialized\u001b[0m\n2025-08-28T15:48:52.208264481Z \u001b[32m2025-08-28 15:48:52.201\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.quality_monitoring.service\u001b[0m:\u001b[36m__init__\u001b[0m:\u001b[36m51\u001b[0m | \u001b[1mQuality Monitoring Service initialized\u001b[0m\n2025-08-28T15:48:52.208266324Z \u001b[32m2025-08-28 15:48:52.202\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.fallback_response.response_generator\u001b[0m:\u001b[36m__init__\u001b[0m:\u001b[36m30\u001b[0m | \u001b[1mResponse Generator initialized\u001b[0m\n2025-08-28T15:48:58.296363968Z \u001b[32m2025-08-28 15:48:58.295\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mStarted server process [1250]\u001b[0m\n2025-08-28T15:48:58.296402092Z \u001b[32m2025-08-28 15:48:58.295\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mStarted server process [1250]\u001b[0m\n2025-08-28T15:48:58.296404273Z \u001b[32m2025-08-28 15:48:58.295\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mWaiting for application startup.\u001b[0m\n2025-08-28T15:48:58.296405562Z \u001b[32m2025-08-28 15:48:58.295\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mWaiting for application startup.\u001b[0m\n2025-08-28T15:48:58.338538399Z \u001b[32m2025-08-28 15:48:58.336\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.fastapi_auth_middleware\u001b[0m:\u001b[36m_get_jwt_secret_with_validation\u001b[0m:\u001b[36m677\u001b[0m | \u001b[1mJWT secret configured: 32 characters\u001b[0m\n2025-08-28T15:48:58.338614968Z \u001b[32m2025-08-28 15:48:58.336\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.fastapi_auth_middleware\u001b[0m:\u001b[36m__init__\u001b[0m:\u001b[36m76\u001b[0m | \u001b[1mFastAPIAuthMiddleware initialized with 12 excluded paths\u001b[0m\n2025-08-28T15:48:58.338625458Z \u001b[32m2025-08-28 15:48:58.337\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_headers_middleware\u001b[0m:\u001b[36m_log_initialization\u001b[0m:\u001b[36m43\u001b[0m | \u001b[1mSecurity headers middleware initialized for development environment\u001b[0m\n2025-08-28T15:48:58.338629901Z \u001b[32m2025-08-28 15:48:58.337\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36m__init__\u001b[0m:\u001b[36m36\u001b[0m | \u001b[1mSecurityResponseMiddleware initialized\u001b[0m\n2025-08-28T15:48:58.338632826Z \u001b[32m2025-08-28 15:48:58.337\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mCORSFixMiddleware initialized with 41 origins for development\u001b[0m\n2025-08-28T15:48:58.338635672Z \u001b[32m2025-08-28 15:48:58.337\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36mrun_complete_startup\u001b[0m:\u001b[36m941\u001b[0m | \u001b[1mUsing robust startup manager with dependency resolution...\u001b[0m\n2025-08-28T15:48:58.338671272Z \u001b[32m2025-08-28 15:48:58.337\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36mrun_complete_startup\u001b[0m:\u001b[36m951\u001b[0m | \u001b[1mStartup in progress flags set - health endpoint will report startup in progress\u001b[0m\n2025-08-28T15:48:58.379203532Z \u001b[32m2025-08-28 15:48:58.377\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36mrun_complete_startup\u001b[0m:\u001b[36m983\u001b[0m | \u001b[31m\u001b[1mError in robust startup: cannot access local variable 'logger' where it is not associated with a value\u001b[0m\n2025-08-28T15:48:58.379249664Z \u001b[32m2025-08-28 15:48:58.377\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36mrun_complete_startup\u001b[0m:\u001b[36m989\u001b[0m | \u001b[33m\u001b[1mFalling back to legacy startup sequence...\u001b[0m\n2025-08-28T15:48:58.379251923Z \u001b[32m2025-08-28 15:48:58.377\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36minitialize_logging\u001b[0m:\u001b[36m251\u001b[0m | \u001b[1mApplication startup...\u001b[0m\n2025-08-28T15:48:58.379253272Z \u001b[32m2025-08-28 15:48:58.378\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.utils.multiprocessing_cleanup\u001b[0m:\u001b[36msetup_multiprocessing\u001b[0m:\u001b[36m108\u001b[0m | \u001b[1mMultiprocessing configured with method: forkserver\u001b[0m\n2025-08-28T15:48:58.379327822Z \u001b[32m2025-08-28 15:48:58.378\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.database_env_service\u001b[0m:\u001b[36mvalidate_database_environment\u001b[0m:\u001b[36m49\u001b[0m | \u001b[1mDatabase environment validation passed for development\u001b[0m\n2025-08-28T15:48:58.379719007Z \u001b[32m2025-08-28 15:48:58.378\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_check_and_run_migrations\u001b[0m:\u001b[36m354\u001b[0m | \u001b[1mChecking database migrations...\u001b[0m\n2025-08-28T15:48:58.393451143Z \u001b[32m2025-08-28 15:48:58.390\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mContext impl PostgresqlImpl.\u001b[0m\n2025-08-28T15:48:58.393488919Z \u001b[32m2025-08-28 15:48:58.391\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mWill assume transactional DDL.\u001b[0m\n2025-08-28T15:48:58.397429628Z \u001b[32m2025-08-28 15:48:58.396\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_perform_migration\u001b[0m:\u001b[36m364\u001b[0m | \u001b[1mCurrent revision: add_deleted_at_001\u001b[0m\n2025-08-28T15:48:59.111455020Z \u001b[32m2025-08-28 15:48:59.110\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.db.migration_utils\u001b[0m:\u001b[36mlog_migration_status\u001b[0m:\u001b[36m199\u001b[0m | \u001b[1mDatabase is up to date\u001b[0m\n2025-08-28T15:48:59.112786119Z \u001b[32m2025-08-28 15:48:59.110\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_legacy_startup\u001b[0m:\u001b[36m1007\u001b[0m | \u001b[1mLegacy startup in progress flags set\u001b[0m\n2025-08-28T15:48:59.113832073Z \u001b[32m2025-08-28 15:48:59.110\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36msetup_database_connections\u001b[0m:\u001b[36m430\u001b[0m | \u001b[1mSetting up database connections...\u001b[0m\n2025-08-28T15:48:59.113849941Z \u001b[32m2025-08-28 15:48:59.111\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.db.postgres_core\u001b[0m:\u001b[36minitialize_postgres\u001b[0m:\u001b[36m578\u001b[0m | \u001b[1mInitializing async engine and session factory...\u001b[0m\n2025-08-28T15:48:59.113851778Z \u001b[32m2025-08-28 15:48:59.112\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.db.postgres_core\u001b[0m:\u001b[36m_create_and_setup_engine\u001b[0m:\u001b[36m514\u001b[0m | \u001b[1mPostgreSQL async engine created with resilient AsyncAdaptedQueuePool connection pooling\u001b[0m\n2025-08-28T15:48:59.113863105Z \u001b[32m2025-08-28 15:48:59.112\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_ensure_database_tables_exist\u001b[0m:\u001b[36m56\u001b[0m | \u001b[1mImporting database models to register tables...\u001b[0m\n2025-08-28T15:48:59.113878628Z \u001b[32m2025-08-28 15:48:59.112\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_ensure_database_tables_exist\u001b[0m:\u001b[36m59\u001b[0m | \u001b[1mChecking if database tables exist...\u001b[0m\n2025-08-28T15:48:59.126351544Z \u001b[32m2025-08-28 15:48:59.125\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_ensure_database_tables_exist\u001b[0m:\u001b[36m114\u001b[0m | \u001b[1mAll 26 database tables are present\u001b[0m\n2025-08-28T15:48:59.130783687Z \u001b[32m2025-08-28 15:48:59.128\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36msetup_database_connections\u001b[0m:\u001b[36m474\u001b[0m | \u001b[1mDatabase session factory successfully set on app.state\u001b[0m\n2025-08-28T15:48:59.130804190Z \u001b[32m2025-08-28 15:48:59.128\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36minitialize_core_services\u001b[0m:\u001b[36m509\u001b[0m | \u001b[1mLoading key manager...\u001b[0m\n2025-08-28T15:48:59.130806269Z \u001b[32m2025-08-28 15:48:59.128\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36minitialize_core_services\u001b[0m:\u001b[36m511\u001b[0m | \u001b[1mKey manager loaded.\u001b[0m\n2025-08-28T15:48:59.130807544Z \u001b[32m2025-08-28 15:48:59.128\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36minitialize_clickhouse\u001b[0m:\u001b[36m544\u001b[0m | \u001b[1mSkipping ClickHouse initialization in development environment (optional service - may not be available)\u001b[0m\n2025-08-28T15:48:59.130808796Z \u001b[32m2025-08-28 15:48:59.129\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_startup_phase_two\u001b[0m:\u001b[36m889\u001b[0m | \u001b[1mInitializing background task manager with 2-minute timeout...\u001b[0m\n2025-08-28T15:48:59.130809919Z \u001b[32m2025-08-28 15:48:59.129\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_startup_phase_two\u001b[0m:\u001b[36m891\u001b[0m | \u001b[1mBackground task manager initialized successfully\u001b[0m\n2025-08-28T15:48:59.130859934Z \u001b[32m2025-08-28 15:48:59.129\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_startup_phase_two\u001b[0m:\u001b[36m894\u001b[0m | \u001b[1mApplying startup fixes for critical cold start issues...\u001b[0m\n2025-08-28T15:48:59.130867738Z \u001b[32m2025-08-28 15:48:59.129\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mRunning comprehensive startup fixes verification...\u001b[0m\n2025-08-28T15:48:59.130869325Z \u001b[32m2025-08-28 15:48:59.129\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mApplied Redis mode default with fallback capability\u001b[0m\n2025-08-28T15:48:59.130872932Z \u001b[32m2025-08-28 15:48:59.129\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mService discovery disabled for microservice independence\u001b[0m\n2025-08-28T15:48:59.130923999Z \u001b[32m2025-08-28 15:48:59.129\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mDynamic port allocation is configured\u001b[0m\n2025-08-28T15:48:59.130941509Z \u001b[32m2025-08-28 15:48:59.129\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mBackground task timeout properly configured: 120s\u001b[0m\n2025-08-28T15:48:59.130999360Z \u001b[32m2025-08-28 15:48:59.130\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mRedis local fallback is configured\u001b[0m\n2025-08-28T15:48:59.131002442Z \u001b[32m2025-08-28 15:48:59.130\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mDatabase transaction rollback fix is available\u001b[0m\n2025-08-28T15:48:59.131020148Z \u001b[32m2025-08-28 15:48:59.130\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mStartup fixes verification complete: 4/5 fixes applied\u001b[0m\n2025-08-28T15:48:59.131026390Z \u001b[32m2025-08-28 15:48:59.130\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_startup_phase_two\u001b[0m:\u001b[36m898\u001b[0m | \u001b[1mStartup fixes applied: 4/5 fixes\u001b[0m\n2025-08-28T15:48:59.131045268Z \u001b[32m2025-08-28 15:48:59.130\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_startup_phase_two\u001b[0m:\u001b[36m901\u001b[0m | \u001b[33m\u001b[1mSome startup fixes could not be applied - check system configuration\u001b[0m\n2025-08-28T15:48:59.131094633Z \u001b[32m2025-08-28 15:48:59.130\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_startup_phase_two\u001b[0m:\u001b[36m902\u001b[0m | \u001b[1mStartup Fixes Status: 4/5 applied\n2025-08-28T15:48:59.131098146Z \n2025-08-28T15:48:59.131099597Z \u2705 Applied fixes:\n2025-08-28T15:48:59.131101474Z   \u2022 Background task timeout (2-minute limit)\n2025-08-28T15:48:59.131102674Z   \u2022 Redis local fallback capability\n2025-08-28T15:48:59.131103874Z   \u2022 Environment variable mapping (CLICKHOUSE_PASSWORD)\n2025-08-28T15:48:59.131115085Z   \u2022 Database transaction rollback handling\n2025-08-28T15:48:59.131116027Z \n2025-08-28T15:48:59.131116806Z \u274c Missing fixes:\n2025-08-28T15:48:59.131117714Z   \u2022 Service port conflict resolution\u001b[0m\n2025-08-28T15:48:59.131118664Z \u001b[32m2025-08-28 15:48:59.130\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36mstartup_health_checks\u001b[0m:\u001b[36m738\u001b[0m | \u001b[1mStarting comprehensive startup health checks...\u001b[0m\n2025-08-28T15:48:59.389092740Z \u001b[32m2025-08-28 15:48:59.387\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m58\u001b[0m | \u001b[1mPreparing to run 10 startup checks:\u001b[0m\n2025-08-28T15:48:59.389166608Z \u001b[32m2025-08-28 15:48:59.387\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  1. check_environment_variables\u001b[0m\n2025-08-28T15:48:59.389176149Z \u001b[32m2025-08-28 15:48:59.387\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  2. check_configuration\u001b[0m\n2025-08-28T15:48:59.389179899Z \u001b[32m2025-08-28 15:48:59.387\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  3. check_file_permissions\u001b[0m\n2025-08-28T15:48:59.389182281Z \u001b[32m2025-08-28 15:48:59.387\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  4. check_database_connection\u001b[0m\n2025-08-28T15:48:59.389184883Z \u001b[32m2025-08-28 15:48:59.387\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  5. check_redis\u001b[0m\n2025-08-28T15:48:59.389187169Z \u001b[32m2025-08-28 15:48:59.387\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  6. check_clickhouse\u001b[0m\n2025-08-28T15:48:59.389189484Z \u001b[32m2025-08-28 15:48:59.387\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  7. check_llm_providers\u001b[0m\n2025-08-28T15:48:59.389191837Z \u001b[32m2025-08-28 15:48:59.388\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  8. check_memory_and_resources\u001b[0m\n2025-08-28T15:48:59.389273033Z \u001b[32m2025-08-28 15:48:59.388\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  9. check_network_connectivity\u001b[0m\n2025-08-28T15:48:59.389282852Z \u001b[32m2025-08-28 15:48:59.388\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  10. check_or_create_assistant\u001b[0m\n2025-08-28T15:48:59.389284797Z \u001b[32m2025-08-28 15:48:59.388\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_environment_variables\u001b[0m\n2025-08-28T15:48:59.389286394Z \u001b[32m2025-08-28 15:48:59.388\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_configuration\u001b[0m\n2025-08-28T15:48:59.389287748Z \u001b[32m2025-08-28 15:48:59.388\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_file_permissions\u001b[0m\n2025-08-28T15:48:59.395210582Z \u001b[32m2025-08-28 15:48:59.394\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_database_connection\u001b[0m\n2025-08-28T15:48:59.411326530Z \u001b[32m2025-08-28 15:48:59.410\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_redis\u001b[0m\n2025-08-28T15:48:59.413011700Z \u001b[32m2025-08-28 15:48:59.412\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.redis_manager\u001b[0m:\u001b[36m_test_redis_connection\u001b[0m:\u001b[36m114\u001b[0m | \u001b[1mRedis connected successfully\u001b[0m\n2025-08-28T15:48:59.416616535Z \u001b[32m2025-08-28 15:48:59.414\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_clickhouse\u001b[0m\n2025-08-28T15:48:59.417480867Z \u001b[32m2025-08-28 15:48:59.415\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.db.clickhouse\u001b[0m:\u001b[36m_create_mock_client\u001b[0m:\u001b[36m132\u001b[0m | \u001b[1m[ClickHouse] Using MOCK client for development\u001b[0m\n2025-08-28T15:48:59.418017876Z \u001b[32m2025-08-28 15:48:59.415\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.service_checks\u001b[0m:\u001b[36m_log_clickhouse_warning_if_needed\u001b[0m:\u001b[36m242\u001b[0m | \u001b[33m\u001b[1mClickHouse not available - analytics features limited\u001b[0m\n2025-08-28T15:48:59.418027212Z \u001b[32m2025-08-28 15:48:59.415\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_llm_providers\u001b[0m\n2025-08-28T15:48:59.418028886Z \u001b[32m2025-08-28 15:48:59.415\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.service_checks\u001b[0m:\u001b[36m_handle_llm_test_failure\u001b[0m:\u001b[36m197\u001b[0m | \u001b[1mLLM 'default' failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:48:59.418030382Z \u001b[32m2025-08-28 15:48:59.416\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.service_checks\u001b[0m:\u001b[36m_handle_llm_test_failure\u001b[0m:\u001b[36m197\u001b[0m | \u001b[1mLLM 'analysis' failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:48:59.418032143Z \u001b[32m2025-08-28 15:48:59.416\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.service_checks\u001b[0m:\u001b[36m_handle_llm_test_failure\u001b[0m:\u001b[36m197\u001b[0m | \u001b[1mLLM 'triage' failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:48:59.418034135Z \u001b[32m2025-08-28 15:48:59.416\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.service_checks\u001b[0m:\u001b[36m_handle_llm_test_failure\u001b[0m:\u001b[36m197\u001b[0m | \u001b[1mLLM 'data' failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:48:59.418035948Z \u001b[32m2025-08-28 15:48:59.416\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.service_checks\u001b[0m:\u001b[36m_handle_llm_test_failure\u001b[0m:\u001b[36m197\u001b[0m | \u001b[1mLLM 'optimizations_core' failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:48:59.418118173Z \u001b[32m2025-08-28 15:48:59.417\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.service_checks\u001b[0m:\u001b[36m_handle_llm_test_failure\u001b[0m:\u001b[36m197\u001b[0m | \u001b[1mLLM 'actions_to_meet_goals' failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:48:59.418273398Z \u001b[32m2025-08-28 15:48:59.417\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.service_checks\u001b[0m:\u001b[36m_handle_llm_test_failure\u001b[0m:\u001b[36m197\u001b[0m | \u001b[1mLLM 'reporting' failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:48:59.418686067Z \u001b[32m2025-08-28 15:48:59.417\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_memory_and_resources\u001b[0m\n2025-08-28T15:48:59.418799993Z \u001b[32m2025-08-28 15:48:59.418\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_network_connectivity\u001b[0m\n2025-08-28T15:48:59.420016023Z \u001b[32m2025-08-28 15:48:59.419\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_or_create_assistant\u001b[0m\n2025-08-28T15:48:59.420336552Z /usr/local/lib/python3.11/contextlib.py:210: DeprecationWarning: postgres_session.get_async_db() is deprecated. Use 'from netra_backend.app.database import get_db' instead.\n2025-08-28T15:48:59.420349283Z   return await anext(self.gen)\n2025-08-28T15:48:59.475978596Z WARNING:  WatchFiles detected changes in 'scripts/docker_log_remediation_loop.py'. Reloading...\n2025-08-28T15:48:59.482438125Z \u001b[32m2025-08-28 15:48:59.479\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m140\u001b[0m | \u001b[1m=== STARTUP CHECKS SUMMARY ===\u001b[0m\n2025-08-28T15:48:59.482840005Z \u001b[32m2025-08-28 15:48:59.479\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m141\u001b[0m | \u001b[1mTotal checks: 10\u001b[0m\n2025-08-28T15:48:59.482852475Z \u001b[32m2025-08-28 15:48:59.479\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m142\u001b[0m | \u001b[1mPassed: 8\u001b[0m\n2025-08-28T15:48:59.482876638Z \u001b[32m2025-08-28 15:48:59.479\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m143\u001b[0m | \u001b[1mFailed (critical): 0\u001b[0m\n2025-08-28T15:48:59.482885584Z \u001b[32m2025-08-28 15:48:59.479\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m144\u001b[0m | \u001b[1mFailed (non-critical): 2\u001b[0m\n2025-08-28T15:48:59.483742473Z \u001b[32m2025-08-28 15:48:59.480\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m145\u001b[0m | \u001b[1mTotal duration: 92.26ms\u001b[0m\n2025-08-28T15:48:59.483873246Z \u001b[32m2025-08-28 15:48:59.480\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  PASS: environment_variables (0.05ms) - Development mode - using default configs (Optional missing: GOOGLE_CLIENT_ID, GOOGLE_CLIENT_SECRET)\u001b[0m\n2025-08-28T15:48:59.484450470Z \u001b[32m2025-08-28 15:48:59.480\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  PASS: configuration (0.02ms) - Configuration valid for development environment\u001b[0m\n2025-08-28T15:48:59.484932857Z \u001b[32m2025-08-28 15:48:59.480\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  PASS: file_permissions (5.51ms) - All required directories are accessible\u001b[0m\n2025-08-28T15:48:59.485176713Z \u001b[32m2025-08-28 15:48:59.480\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  PASS: database_connection (16.01ms) - PostgreSQL connected and schema valid\u001b[0m\n2025-08-28T15:48:59.485191399Z \u001b[32m2025-08-28 15:48:59.480\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  PASS: redis_connection (3.88ms) - Redis connected and operational\u001b[0m\n2025-08-28T15:48:59.485683239Z \u001b[32m2025-08-28 15:48:59.480\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  FAIL-WARN: clickhouse_connection (0.64ms) - ClickHouse check failed: Missing ClickHouse tables: ['workload_events']\u001b[0m\n2025-08-28T15:48:59.487437021Z \u001b[32m2025-08-28 15:48:59.480\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  FAIL-WARN: llm_providers (2.12ms) - No LLM providers available\u001b[0m\n2025-08-28T15:48:59.487483818Z \u001b[32m2025-08-28 15:48:59.480\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  PASS: system_resources (0.56ms) - Resources OK: 27.4GB RAM, 876.2GB disk, 20 CPUs\u001b[0m\n2025-08-28T15:48:59.487492278Z \u001b[32m2025-08-28 15:48:59.480\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  PASS: network_connectivity (1.12ms) - All network endpoints reachable\u001b[0m\n2025-08-28T15:48:59.487684432Z \u001b[32m2025-08-28 15:48:59.480\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  PASS: netra_assistant (59.58ms) - Netra assistant already exists\u001b[0m\n2025-08-28T15:48:59.487693331Z \u001b[32m2025-08-28 15:48:59.481\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.utils\u001b[0m:\u001b[36m_log_startup_results\u001b[0m:\u001b[36m32\u001b[0m | \u001b[1mStartup checks completed in 92ms\u001b[0m\n2025-08-28T15:48:59.487706207Z \u001b[32m2025-08-28 15:48:59.481\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.utils\u001b[0m:\u001b[36m_log_startup_results\u001b[0m:\u001b[36m33\u001b[0m | \u001b[1mResults: 8/10 passed\u001b[0m\n2025-08-28T15:48:59.487707760Z \u001b[32m2025-08-28 15:48:59.481\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.utils\u001b[0m:\u001b[36m_log_non_critical_failures\u001b[0m:\u001b[36m48\u001b[0m | \u001b[33m\u001b[1mNon-critical startup checks failed:\u001b[0m\n2025-08-28T15:48:59.487709794Z \u001b[32m2025-08-28 15:48:59.481\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.utils\u001b[0m:\u001b[36m_log_non_critical_failures\u001b[0m:\u001b[36m51\u001b[0m | \u001b[33m\u001b[1m  - clickhouse_connection: ClickHouse check failed: Missing ClickHouse tables: ['workload_events']\u001b[0m\n2025-08-28T15:48:59.487711399Z \u001b[32m2025-08-28 15:48:59.481\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.utils\u001b[0m:\u001b[36m_log_non_critical_failures\u001b[0m:\u001b[36m51\u001b[0m | \u001b[33m\u001b[1m  - llm_providers: No LLM providers available\u001b[0m\n2025-08-28T15:48:59.487722649Z \u001b[32m2025-08-28 15:48:59.481\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36mstartup_health_checks\u001b[0m:\u001b[36m749\u001b[0m | \u001b[1mStartup checks completed: 8/10 passed\u001b[0m\n2025-08-28T15:48:59.487726456Z \u001b[32m2025-08-28 15:48:59.481\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36mstartup_health_checks\u001b[0m:\u001b[36m754\u001b[0m | \u001b[33m\u001b[1mSome startup checks failed (2), but continuing in graceful mode\u001b[0m\n2025-08-28T15:48:59.524252141Z \u001b[32m2025-08-28 15:48:59.523\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.services.schema_validation_service\u001b[0m:\u001b[36m_log_missing_columns\u001b[0m:\u001b[36m107\u001b[0m | \u001b[31m\u001b[1mMissing columns in table research_sessions: ['completed_at', 'error_message']\u001b[0m\n2025-08-28T15:48:59.524291783Z \u001b[32m2025-08-28 15:48:59.523\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.services.schema_validation_service\u001b[0m:\u001b[36m_log_warnings\u001b[0m:\u001b[36m113\u001b[0m | \u001b[33m\u001b[1mExtra tables in database not defined in models: {'userbase', 'auth_users', 'alembic_version', 'auth_audit_logs', 'password_reset_tokens', 'auth_sessions'}\u001b[0m\n2025-08-28T15:48:59.525007584Z \u001b[32m2025-08-28 15:48:59.524\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.services.schema_validation_service\u001b[0m:\u001b[36mrun_comprehensive_validation\u001b[0m:\u001b[36m234\u001b[0m | \u001b[31m\u001b[1mSchema validation failed: {'passed': False, 'missing_tables': [], 'missing_columns': {'research_sessions': ['completed_at', 'error_message']}, 'type_mismatches': {}, 'warnings': [\"Extra tables in database not defined in models: {'userbase', 'auth_users', 'alembic_version', 'auth_audit_logs', 'password_reset_tokens', 'auth_sessions'}\"]}\u001b[0m\n2025-08-28T15:48:59.525027111Z \u001b[32m2025-08-28 15:48:59.524\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_handle_schema_validation_result\u001b[0m:\u001b[36m824\u001b[0m | \u001b[31m\u001b[1mSchema validation failed. The application might not work as expected.\u001b[0m\n2025-08-28T15:48:59.544491464Z \u001b[32m2025-08-28 15:48:59.543\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36minitialize_websocket_components\u001b[0m:\u001b[36m718\u001b[0m | \u001b[1mWebSocket components initialized\u001b[0m\n2025-08-28T15:49:00.583618114Z \u001b[32m2025-08-28 15:49:00.579\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: triage\u001b[0m\n2025-08-28T15:49:00.583654811Z \u001b[32m2025-08-28 15:49:00.580\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: data\u001b[0m\n2025-08-28T15:49:00.583656711Z \u001b[32m2025-08-28 15:49:00.580\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: optimization\u001b[0m\n2025-08-28T15:49:00.583657914Z \u001b[32m2025-08-28 15:49:00.580\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: actions\u001b[0m\n2025-08-28T15:49:00.583658997Z \u001b[32m2025-08-28 15:49:00.580\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: reporting\u001b[0m\n2025-08-28T15:49:00.583660106Z \u001b[32m2025-08-28 15:49:00.580\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: synthetic_data\u001b[0m\n2025-08-28T15:49:00.583661159Z \u001b[32m2025-08-28 15:49:00.581\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: corpus_admin\u001b[0m\n2025-08-28T15:49:00.583662188Z \u001b[32m2025-08-28 15:49:00.581\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_create_agent_supervisor\u001b[0m:\u001b[36m656\u001b[0m | \u001b[1mAgent supervisor created successfully\u001b[0m\n2025-08-28T15:49:00.583663350Z \u001b[32m2025-08-28 15:49:00.581\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.database.health_checker\u001b[0m:\u001b[36mstart_monitoring\u001b[0m:\u001b[36m29\u001b[0m | \u001b[1mStarting database connection monitoring\u001b[0m\n2025-08-28T15:49:00.583877556Z \u001b[32m2025-08-28 15:49:00.581\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.base.monitoring\u001b[0m:\u001b[36mstart_monitoring\u001b[0m:\u001b[36m318\u001b[0m | \u001b[1mExecution monitoring started\u001b[0m\n2025-08-28T15:49:00.583892158Z \u001b[32m2025-08-28 15:49:00.581\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_create_monitoring_task\u001b[0m:\u001b[36m848\u001b[0m | \u001b[1mComprehensive monitoring started\u001b[0m\n2025-08-28T15:49:00.583972546Z \u001b[32m2025-08-28 15:49:00.581\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.performance_optimization_manager\u001b[0m:\u001b[36minitialize\u001b[0m:\u001b[36m43\u001b[0m | \u001b[1mPerformance optimization manager initialized\u001b[0m\n2025-08-28T15:49:00.584876322Z \u001b[32m2025-08-28 15:49:00.581\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mCreated background task 'database_index_optimization' (ID: 5c60cea5-75ea-49f5-a351-49fd923f0258) with 120s timeout\u001b[0m\n2025-08-28T15:49:00.585769863Z \u001b[32m2025-08-28 15:49:00.582\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_schedule_background_optimizations\u001b[0m:\u001b[36m224\u001b[0m | \u001b[1mDatabase index optimization scheduled as background task (ID: 5c60cea5-75ea-49f5-a351-49fd923f0258)\u001b[0m\n2025-08-28T15:49:00.586026871Z \u001b[32m2025-08-28 15:49:00.582\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_initialize_performance_optimizations\u001b[0m:\u001b[36m194\u001b[0m | \u001b[1mPerformance optimizations initialized successfully\u001b[0m\n2025-08-28T15:49:00.586425239Z \u001b[32m2025-08-28 15:49:00.582\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_legacy_startup\u001b[0m:\u001b[36m1016\u001b[0m | \u001b[1mLegacy startup completion flags set - health endpoint will report healthy\u001b[0m\n2025-08-28T15:49:00.586604031Z \u001b[32m2025-08-28 15:49:00.582\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36mlog_startup_complete\u001b[0m:\u001b[36m869\u001b[0m | \u001b[1mSystem Ready (Took 2.20s).\u001b[0m\n2025-08-28T15:49:00.586612918Z \u001b[32m2025-08-28 15:49:00.584\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mApplication startup complete.\u001b[0m\n2025-08-28T15:49:00.586752439Z \u001b[32m2025-08-28 15:49:00.584\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mApplication startup complete.\u001b[0m\n2025-08-28T15:49:00.591227496Z \u001b[32m2025-08-28 15:49:00.590\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.shutdown\u001b[0m:\u001b[36mshutdown_cleanup\u001b[0m:\u001b[36m20\u001b[0m | \u001b[1mApplication shutdown initiated...\u001b[0m\n2025-08-28T15:49:00.591600132Z \u001b[32m2025-08-28 15:49:00.590\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.utils.multiprocessing_cleanup\u001b[0m:\u001b[36mcleanup_all\u001b[0m:\u001b[36m90\u001b[0m | \u001b[1mMultiprocessing resources cleaned up\u001b[0m\n2025-08-28T15:49:00.591619895Z \u001b[32m2025-08-28 15:49:00.590\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.shutdown\u001b[0m:\u001b[36mrun_complete_shutdown\u001b[0m:\u001b[36m120\u001b[0m | \u001b[1mShutting down background task manager...\u001b[0m\n2025-08-28T15:49:00.591621931Z \u001b[32m2025-08-28 15:49:00.590\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mShutting down BackgroundTaskManager...\u001b[0m\n2025-08-28T15:49:00.591623276Z \u001b[32m2025-08-28 15:49:00.590\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mCancelling 1 active background tasks\u001b[0m\n2025-08-28T15:49:00.591906833Z /usr/local/lib/python3.11/site-packages/websockets/legacy/server.py:1178: DeprecationWarning: remove second argument of ws_handler\n2025-08-28T15:49:00.591923297Z   warnings.warn(\"remove second argument of ws_handler\", DeprecationWarning)\n2025-08-28T15:49:00.600499940Z \u001b[32m2025-08-28 15:49:00.592\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[31m\u001b[1mException in ASGI application\n2025-08-28T15:49:00.600529659Z \u001b[0m",
      "signature": "74cf62b8c45fb531581bab619527b3ff",
      "is_traceback": true
    },
    {
      "line_number": 5693,
      "timestamp": "2025-08-28T15:49:00.600531326Z",
      "severity": "CRITICAL",
      "error_type": "Unknown Exception",
      "pattern": "Traceback",
      "log_line": "2025-08-28T15:49:00.600531326Z \u001b[33m\u001b[1mTraceback (most recent call last):\u001b[0m",
      "log_content": "2025-08-28T15:49:00.600531326Z \u001b[33m\u001b[1mTraceback (most recent call last):\u001b[0m\n2025-08-28T15:49:00.600532374Z   File \"<string>\", line 1, in <module>\n2025-08-28T15:49:00.600533614Z   File \"/usr/local/lib/python3.11/multiprocessing/spawn.py\", line 122, in spawn_main\n2025-08-28T15:49:00.600534534Z     exitcode = _main(fd, parent_sentinel)\n2025-08-28T15:49:00.600535427Z   File \"/usr/local/lib/python3.11/multiprocessing/spawn.py\", line 135, in _main\n2025-08-28T15:49:00.600536316Z     return self._bootstrap(parent_sentinel)\n2025-08-28T15:49:00.600537125Z   File \"/usr/local/lib/python3.11/multiprocessing/process.py\", line 314, in _bootstrap\n2025-08-28T15:49:00.600538023Z     self.run()\n2025-08-28T15:49:00.600538823Z   File \"/usr/local/lib/python3.11/multiprocessing/process.py\", line 108, in run\n2025-08-28T15:49:00.600539698Z     self._target(*self._args, **self._kwargs)\n2025-08-28T15:49:00.600540616Z   File \"/usr/local/lib/python3.11/site-packages/uvicorn/_subprocess.py\", line 76, in subprocess_started\n2025-08-28T15:49:00.600541525Z     target(sockets=sockets)\n2025-08-28T15:49:00.600542309Z   File \"/usr/local/lib/python3.11/site-packages/uvicorn/server.py\", line 61, in run\n2025-08-28T15:49:00.600543185Z     return asyncio.run(self.serve(sockets=sockets))\n2025-08-28T15:49:00.600543993Z   File \"/usr/local/lib/python3.11/asyncio/runners.py\", line 189, in run\n2025-08-28T15:49:00.600544856Z     with Runner(debug=debug) as runner:\n2025-08-28T15:49:00.600545687Z   File \"/usr/local/lib/python3.11/asyncio/runners.py\", line 63, in __exit__\n2025-08-28T15:49:00.600546600Z     self.close()\n2025-08-28T15:49:00.600547452Z   File \"/usr/local/lib/python3.11/asyncio/runners.py\", line 71, in close\n2025-08-28T15:49:00.600548309Z     _cancel_all_tasks(loop)\n2025-08-28T15:49:00.600549078Z   File \"/usr/local/lib/python3.11/asyncio/runners.py\", line 201, in _cancel_all_tasks\n2025-08-28T15:49:00.600549941Z     loop.run_until_complete(tasks.gather(*to_cancel, return_exceptions=True))\n2025-08-28T15:49:00.600550808Z > File \"/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py\", line 426, in run_asgi\n2025-08-28T15:49:00.600551772Z     result = await app(  # type: ignore[func-returns-value]\n2025-08-28T15:49:00.600552596Z   File \"/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py\", line 84, in __call__\n2025-08-28T15:49:00.600553484Z     return await self.app(scope, receive, send)\n2025-08-28T15:49:00.600554359Z   File \"/usr/local/lib/python3.11/site-packages/fastapi/applications.py\", line 1106, in __call__\n2025-08-28T15:49:00.600555367Z     await super().__call__(scope, receive, send)\n2025-08-28T15:49:00.600564958Z   File \"/usr/local/lib/python3.11/site-packages/starlette/applications.py\", line 122, in __call__\n2025-08-28T15:49:00.600566591Z     await self.middleware_stack(scope, receive, send)\n2025-08-28T15:49:00.600567479Z   File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py\", line 162, in __call__\n2025-08-28T15:49:00.600568375Z     await self.app(scope, receive, _send)\n2025-08-28T15:49:00.600569204Z   File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 108, in __call__\n2025-08-28T15:49:00.600570094Z     response = await self.dispatch_func(request, call_next)\n2025-08-28T15:49:00.600570929Z   File \"\u001b[32m/app/netra_backend/app/middleware/\u001b[0m\u001b[32m\u001b[1mcors_fix_middleware.py\u001b[0m\", line \u001b[33m66\u001b[0m, in \u001b[35mdispatch\u001b[0m\n2025-08-28T15:49:00.600572160Z     \u001b[1mresponse\u001b[0m \u001b[35m\u001b[1m=\u001b[0m \u001b[35m\u001b[1mawait\u001b[0m \u001b[1mcall_next\u001b[0m\u001b[1m(\u001b[0m\u001b[1mrequest\u001b[0m\u001b[1m)\u001b[0m\n2025-08-28T15:49:00.600573302Z   File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 78, in call_next\n2025-08-28T15:49:00.600574201Z     message = await recv_stream.receive()\n2025-08-28T15:49:00.600575014Z   File \"/usr/local/lib/python3.11/site-packages/anyio/streams/memory.py\", line 96, in receive\n2025-08-28T15:49:00.600575885Z     await checkpoint()\n2025-08-28T15:49:00.600576675Z   File \"/usr/local/lib/python3.11/site-packages/anyio/lowlevel.py\", line 33, in checkpoint\n2025-08-28T15:49:00.600577529Z     await get_asynclib().checkpoint()\n2025-08-28T15:49:00.600578333Z   File \"/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py\", line 447, in checkpoint\n2025-08-28T15:49:00.600579203Z     await sleep(0)\n2025-08-28T15:49:00.600579974Z   File \"/usr/local/lib/python3.11/asyncio/tasks.py\", line 640, in sleep\n2025-08-28T15:49:00.600580829Z     await __sleep0()\n2025-08-28T15:49:00.600581601Z   File \"/usr/local/lib/python3.11/asyncio/tasks.py\", line 634, in __sleep0\n2025-08-28T15:49:00.600582455Z     yield\n2025-08-28T15:49:00.600583227Z \u001b[31m\u001b[1masyncio.exceptions.CancelledError\u001b[0m\n2025-08-28T15:49:00.600584105Z \u001b[32m2025-08-28 15:49:00.599\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[31m\u001b[1mException in ASGI application\n2025-08-28T15:49:00.600585215Z \u001b[0m",
      "signature": "6a05a6f6d80bc1262024c91d186f5e1c",
      "is_traceback": true
    },
    {
      "line_number": 5874,
      "timestamp": "2025-08-28T15:49:00.815163911Z",
      "severity": "CRITICAL",
      "error_type": "Unknown Exception",
      "pattern": "Traceback",
      "log_line": "2025-08-28T15:49:00.815163911Z \u001b[32m2025-08-28 15:49:00.813\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[31m\u001b[1mTraceback (most recent call last):",
      "log_content": "2025-08-28T15:49:00.815163911Z \u001b[32m2025-08-28 15:49:00.813\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[31m\u001b[1mTraceback (most recent call last):\n2025-08-28T15:49:00.815233940Z   File \"/usr/local/lib/python3.11/site-packages/starlette/routing.py\", line 686, in lifespan\n2025-08-28T15:49:00.815242376Z     await receive()\n2025-08-28T15:49:00.815245717Z   File \"/usr/local/lib/python3.11/site-packages/uvicorn/lifespan/on.py\", line 137, in receive\n2025-08-28T15:49:00.815248230Z     return await self.receive_queue.get()\n2025-08-28T15:49:00.815250464Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n2025-08-28T15:49:00.815252476Z   File \"/usr/local/lib/python3.11/asyncio/queues.py\", line 158, in get\n2025-08-28T15:49:00.815294199Z     await getter\n2025-08-28T15:49:00.815296927Z asyncio.exceptions.CancelledError\n2025-08-28T15:49:00.815298316Z \u001b[0m",
      "signature": "808263b3490c36557ac1655aead3b60c",
      "is_traceback": true
    }
  ],
  "categorized": {
    "by_severity": {
      "LOW": [
        {
          "line_number": 4966,
          "timestamp": "2025-08-28T15:42:48.331589592Z",
          "severity": "LOW",
          "error_type": "Warning",
          "pattern": "WARNING.*",
          "log_line": "2025-08-28T15:42:48.331589592Z \u001b[32m2025-08-28 15:42:48.328\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[33m\u001b[1mUsing dev user: dev@example.com\u001b[0m",
          "log_content": "\u001b[32m2025-08-28 15:42:48.328\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[33m\u001b[1mUsing dev user: dev@example.com\u001b[0m",
          "signature": "95568203caae7a0f5ea6d7a36c84be61"
        }
      ],
      "ERROR": [
        {
          "line_number": 5006,
          "timestamp": "2025-08-28T15:42:49.965290577Z",
          "severity": "ERROR",
          "error_type": "Application Error",
          "pattern": "ERROR.*",
          "log_line": "2025-08-28T15:42:49.965290577Z \u001b[32m2025-08-28 15:42:49.954\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[31m\u001b[1mTask exception was never retrieved",
          "log_content": "\u001b[32m2025-08-28 15:42:49.954\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[31m\u001b[1mTask exception was never retrieved",
          "signature": "2ba017de449297d470cbee95be303865"
        }
      ],
      "CRITICAL": [
        {
          "line_number": 5008,
          "timestamp": "2025-08-28T15:42:49.965335288Z",
          "severity": "CRITICAL",
          "error_type": "Unknown Exception",
          "pattern": "Traceback",
          "log_line": "2025-08-28T15:42:49.965335288Z \u001b[33m\u001b[1mTraceback (most recent call last):\u001b[0m",
          "log_content": "2025-08-28T15:42:49.965335288Z \u001b[33m\u001b[1mTraceback (most recent call last):\u001b[0m\n2025-08-28T15:42:49.965336588Z > File \"\u001b[32m/app/netra_backend/app/database/\u001b[0m\u001b[32m\u001b[1m__init__.py\u001b[0m\", line \u001b[33m49\u001b[0m, in \u001b[35mpostgres_session\u001b[0m\n2025-08-28T15:42:49.965338210Z     \u001b[35m\u001b[1masync\u001b[0m \u001b[35m\u001b[1mwith\u001b[0m \u001b[1masync_session_factory\u001b[0m\u001b[1m(\u001b[0m\u001b[1m)\u001b[0m \u001b[35m\u001b[1mas\u001b[0m \u001b[1msession\u001b[0m\u001b[1m:\u001b[0m\n2025-08-28T15:42:49.965339984Z   File \"/usr/local/lib/python3.11/site-packages/sqlalchemy/ext/asyncio/session.py\", line 1085, in __aexit__\n2025-08-28T15:42:49.965341286Z     await asyncio.shield(task)\n2025-08-28T15:42:49.965342355Z   File \"/usr/local/lib/python3.11/site-packages/sqlalchemy/ext/asyncio/session.py\", line 1030, in close\n2025-08-28T15:42:49.965343714Z     await greenlet_spawn(self.sync_session.close)\n2025-08-28T15:42:49.965344803Z   File \"/usr/local/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py\", line 190, in greenlet_spawn\n2025-08-28T15:42:49.965345991Z     result = context.switch(*args, **kwargs)\n2025-08-28T15:42:49.965347076Z   File \"/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 2521, in close\n2025-08-28T15:42:49.965348220Z     self._close_impl(invalidate=False)\n2025-08-28T15:42:49.965349279Z   File \"/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 2590, in _close_impl\n2025-08-28T15:42:49.965350428Z     transaction.close(invalidate)\n2025-08-28T15:42:49.965351436Z   File \"<string>\", line 2, in close\n2025-08-28T15:42:49.965352690Z   File \"/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py\", line 119, in _go\n2025-08-28T15:42:49.965353847Z     raise sa_exc.IllegalStateChangeError(\n2025-08-28T15:42:49.965354928Z \u001b[31m\u001b[1msqlalchemy.exc.IllegalStateChangeError\u001b[0m:\u001b[1m Method 'close()' can't be called here; method '_connection_for_bind()' is already in progress and this would cause an unexpected state change to <SessionTransactionState.CLOSED: 5> (Background on this error at: https://sqlalche.me/e/20/isce)\u001b[0m\n2025-08-28T15:42:49.988552279Z \u001b[32m2025-08-28 15:42:49.987\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.database.base_crud\u001b[0m:\u001b[36m_create_entity\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1mCreated Thread with id: thread_dev-temp-cc173c1d\u001b[0m\n2025-08-28T15:42:50.022623413Z \u001b[32m2025-08-28 15:42:50.020\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.database.base_crud\u001b[0m:\u001b[36m_create_entity\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1mCreated Message with id: msg_f2fd2906-9d96-4c9a-91f3-4ddbe07afaaf\u001b[0m\n2025-08-28T15:42:50.035549635Z \u001b[32m2025-08-28 15:42:50.033\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.database.base_crud\u001b[0m:\u001b[36m_create_entity\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1mCreated Run with id: run_9f5d282b-ac2c-4745-ab6c-1b8418427760\u001b[0m\n2025-08-28T15:42:50.043154066Z \u001b[32m2025-08-28 15:42:50.040\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"flow_started\", \"flow_id\": \"flow_0a86afc5\", \"correlation_id\": \"run_9f5d282b-ac2c-4745-ab6c-1b8418427760\", \"timestamp\": 1756395770.0403755, \"state_summary\": {\"total_steps\": 4, \"completed_steps\": 0, \"current_phase\": \"initialization\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:50.043204968Z \u001b[32m2025-08-28 15:42:50.040\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_started\", \"flow_id\": \"flow_0a86afc5\", \"correlation_id\": \"run_9f5d282b-ac2c-4745-ab6c-1b8418427760\", \"timestamp\": 1756395770.0407774, \"step_name\": \"create_context\", \"step_type\": \"initialization\", \"state_summary\": {\"total_steps\": 4, \"completed_steps\": 0, \"current_phase\": \"create_context\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:50.043208658Z \u001b[32m2025-08-28 15:42:50.041\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_completed\", \"flow_id\": \"flow_0a86afc5\", \"correlation_id\": \"run_9f5d282b-ac2c-4745-ab6c-1b8418427760\", \"timestamp\": 1756395770.0410018, \"step_name\": \"create_context\", \"step_type\": \"initialization\", \"state_summary\": {\"total_steps\": 4, \"completed_steps\": 1, \"current_phase\": \"create_context\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:50.043305377Z \u001b[32m2025-08-28 15:42:50.041\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_started\", \"flow_id\": \"flow_0a86afc5\", \"correlation_id\": \"run_9f5d282b-ac2c-4745-ab6c-1b8418427760\", \"timestamp\": 1756395770.0411406, \"step_name\": \"initialize_state\", \"step_type\": \"state_management\", \"state_summary\": {\"total_steps\": 4, \"completed_steps\": 1, \"current_phase\": \"initialize_state\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:50.043531932Z \u001b[32m2025-08-28 15:42:50.041\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.services.state_persistence\u001b[0m:\u001b[36m_handle_no_session_warning\u001b[0m:\u001b[36m136\u001b[0m | \u001b[33m\u001b[1mNo state found for run run_9f5d282b-ac2c-4745-ab6c-1b8418427760\u001b[0m\n2025-08-28T15:42:50.053800128Z \u001b[32m2025-08-28 15:42:50.052\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.state_persistence\u001b[0m:\u001b[36m_ensure_user_exists_for_snapshot\u001b[0m:\u001b[36m433\u001b[0m | \u001b[1mAuto-creating dev/test user for state persistence: dev-temp-cc173c1d\u001b[0m\n2025-08-28T15:42:50.065277165Z \u001b[32m2025-08-28 15:42:50.064\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.services.state_persistence\u001b[0m:\u001b[36m_ensure_user_exists_for_snapshot\u001b[0m:\u001b[36m449\u001b[0m | \u001b[33m\u001b[1mCould not auto-create dev user dev-temp-cc173c1d: 1 validation error for UserCreate\n2025-08-28T15:42:50.065341880Z email\n2025-08-28T15:42:50.065343984Z   value is not a valid email address: The part after the @-sign is a special-use or reserved name that cannot be used with email. [type=value_error, input_value='dev-temp-cc173c1d@dev.local', input_type=str]\u001b[0m\n2025-08-28T15:42:50.086968709Z \u001b[32m2025-08-28 15:42:50.079\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.services.state_persistence\u001b[0m:\u001b[36m_handle_save_error\u001b[0m:\u001b[36m402\u001b[0m | \u001b[31m\u001b[1mFailed to save state for run run_9f5d282b-ac2c-4745-ab6c-1b8418427760: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.ForeignKeyViolationError'>: insert or update on table \"agent_state_snapshots\" violates foreign key constraint \"agent_state_snapshots_user_id_fkey\"\n2025-08-28T15:42:50.087147643Z DETAIL:  Key (user_id)=(dev-temp-cc173c1d) is not present in table \"userbase\".\n2025-08-28T15:42:50.087152039Z [SQL: INSERT INTO agent_state_snapshots (id, run_id, thread_id, user_id, version, schema_version, checkpoint_type, state_data, serialization_format, compression_type, step_count, agent_phase, execution_context, created_at, expires_at, is_recovery_point, recovery_reason, parent_snapshot_id) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::JSON, $9::VARCHAR, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13::JSON, now(), $14::TIMESTAMP WITH TIME ZONE, $15::BOOLEAN, $16::VARCHAR, $17::VARCHAR) RETURNING agent_state_snapshots.created_at]\n2025-08-28T15:42:50.087154409Z [parameters: ('6223a5ac-3703-4531-a250-c8751da6df87', 'run_9f5d282b-ac2c-4745-ab6c-1b8418427760', 'thread_dev-temp-cc173c1d', 'dev-temp-cc173c1d', '1.0', '1.0', 'auto', '{\"user_request\": \"My chatbot response time is too slow at 3 seconds. Can you optimize it to under 1 second without increasing costs?\", \"chat_thread_i ... (436 characters truncated) ... 0:00\", \"execution_context\": {}, \"custom_fields\": {}, \"priority\": null, \"retry_count\": 0, \"parent_agent_id\": null, \"tags\": []}, \"quality_metrics\": {}}', 'json', None, 0, 'initialization', '{\"step_count\": 0}', datetime.datetime(2025, 9, 4, 15, 42, 50, 65277, tzinfo=datetime.timezone.utc), True, None, None)]\n2025-08-28T15:42:50.087158145Z (Background on this error at: https://sqlalche.me/e/20/gkpj)\u001b[0m\n2025-08-28T15:42:50.102739724Z \u001b[32m2025-08-28 15:42:50.080\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_completed\", \"flow_id\": \"flow_0a86afc5\", \"correlation_id\": \"run_9f5d282b-ac2c-4745-ab6c-1b8418427760\", \"timestamp\": 1756395770.0803273, \"step_name\": \"initialize_state\", \"step_type\": \"state_management\", \"state_summary\": {\"total_steps\": 4, \"completed_steps\": 2, \"current_phase\": \"initialize_state\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:50.113810647Z \u001b[32m2025-08-28 15:42:50.081\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_started\", \"flow_id\": \"flow_0a86afc5\", \"correlation_id\": \"run_9f5d282b-ac2c-4745-ab6c-1b8418427760\", \"timestamp\": 1756395770.0814297, \"step_name\": \"build_pipeline\", \"step_type\": \"planning\", \"state_summary\": {\"total_steps\": 4, \"completed_steps\": 2, \"current_phase\": \"build_pipeline\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:50.114774287Z \u001b[32m2025-08-28 15:42:50.082\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_completed\", \"flow_id\": \"flow_0a86afc5\", \"correlation_id\": \"run_9f5d282b-ac2c-4745-ab6c-1b8418427760\", \"timestamp\": 1756395770.0824182, \"step_name\": \"build_pipeline\", \"step_type\": \"planning\", \"state_summary\": {\"total_steps\": 4, \"completed_steps\": 3, \"current_phase\": \"build_pipeline\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:50.115397010Z \u001b[32m2025-08-28 15:42:50.083\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_started\", \"flow_id\": \"flow_0a86afc5\", \"correlation_id\": \"run_9f5d282b-ac2c-4745-ab6c-1b8418427760\", \"timestamp\": 1756395770.083185, \"step_name\": \"execute_pipeline\", \"step_type\": \"execution\", \"state_summary\": {\"total_steps\": 4, \"completed_steps\": 3, \"current_phase\": \"execute_pipeline\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:50.118717203Z \u001b[32m2025-08-28 15:42:50.084\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"flow_started\", \"flow_id\": \"flow_d1bc8fb9\", \"correlation_id\": \"64682067-3f5b-4b78-9aad-50e6b7833c8a\", \"timestamp\": 1756395770.0841777, \"state_summary\": {\"total_steps\": 5, \"completed_steps\": 0, \"current_phase\": \"initialization\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:50.118810498Z \u001b[32m2025-08-28 15:42:50.084\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor parallel execution: {\"type\": \"supervisor_parallel\", \"flow_id\": \"flow_d1bc8fb9\", \"correlation_id\": \"64682067-3f5b-4b78-9aad-50e6b7833c8a\", \"agent_names\": [\"triage\", \"data\", \"optimization\", \"actions\", \"reporting\"], \"agent_count\": 5, \"timestamp\": 1756395770.0845637}\u001b[0m\n2025-08-28T15:42:50.118814118Z \u001b[32m2025-08-28 15:42:50.084\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_started\", \"flow_id\": \"flow_d1bc8fb9\", \"correlation_id\": \"64682067-3f5b-4b78-9aad-50e6b7833c8a\", \"timestamp\": 1756395770.0847251, \"step_name\": \"triage\", \"step_type\": \"agent\", \"state_summary\": {\"total_steps\": 5, \"completed_steps\": 0, \"current_phase\": \"triage\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:50.118816952Z \u001b[32m2025-08-28 15:42:50.084\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_started\", \"flow_id\": \"flow_d1bc8fb9\", \"correlation_id\": \"64682067-3f5b-4b78-9aad-50e6b7833c8a\", \"timestamp\": 1756395770.0848799, \"step_name\": \"data\", \"step_type\": \"agent\", \"state_summary\": {\"total_steps\": 5, \"completed_steps\": 0, \"current_phase\": \"data\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:50.118851729Z \u001b[32m2025-08-28 15:42:50.085\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_started\", \"flow_id\": \"flow_d1bc8fb9\", \"correlation_id\": \"64682067-3f5b-4b78-9aad-50e6b7833c8a\", \"timestamp\": 1756395770.0850263, \"step_name\": \"optimization\", \"step_type\": \"agent\", \"state_summary\": {\"total_steps\": 5, \"completed_steps\": 0, \"current_phase\": \"optimization\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:50.118853919Z \u001b[32m2025-08-28 15:42:50.085\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_started\", \"flow_id\": \"flow_d1bc8fb9\", \"correlation_id\": \"64682067-3f5b-4b78-9aad-50e6b7833c8a\", \"timestamp\": 1756395770.0851753, \"step_name\": \"actions\", \"step_type\": \"agent\", \"state_summary\": {\"total_steps\": 5, \"completed_steps\": 0, \"current_phase\": \"actions\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:50.118896849Z \u001b[32m2025-08-28 15:42:50.085\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_started\", \"flow_id\": \"flow_d1bc8fb9\", \"correlation_id\": \"64682067-3f5b-4b78-9aad-50e6b7833c8a\", \"timestamp\": 1756395770.0853379, \"step_name\": \"reporting\", \"step_type\": \"agent\", \"state_summary\": {\"total_steps\": 5, \"completed_steps\": 0, \"current_phase\": \"reporting\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:50.118911421Z \u001b[32m2025-08-28 15:42:50.089\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.llm.subagent_logger\u001b[0m:\u001b[36m_log_communication_json\u001b[0m:\u001b[36m72\u001b[0m | \u001b[1mAgent communication: {\"type\": \"agent_communication\", \"from_agent\": \"Supervisor\", \"to_agent\": \"OptimizationsCoreSubAgent\", \"correlation_id\": \"run_9f5d282b-ac2c-4745-ab6c-1b8418427760\", \"message_type\": \"execute_request\", \"timestamp\": 1756395770.089098}\u001b[0m\n2025-08-28T15:42:50.118990003Z \u001b[32m2025-08-28 15:42:50.090\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.llm.subagent_logger\u001b[0m:\u001b[36m_log_communication_json\u001b[0m:\u001b[36m72\u001b[0m | \u001b[1mAgent communication: {\"type\": \"agent_communication\", \"from_agent\": \"Supervisor\", \"to_agent\": \"ActionsToMeetGoalsSubAgent\", \"correlation_id\": \"run_9f5d282b-ac2c-4745-ab6c-1b8418427760\", \"message_type\": \"execute_request\", \"timestamp\": 1756395770.0901606}\u001b[0m\n2025-08-28T15:42:50.119073980Z \u001b[32m2025-08-28 15:42:50.091\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.llm.subagent_logger\u001b[0m:\u001b[36m_log_communication_json\u001b[0m:\u001b[36m72\u001b[0m | \u001b[1mAgent communication: {\"type\": \"agent_communication\", \"from_agent\": \"Supervisor\", \"to_agent\": \"ReportingSubAgent\", \"correlation_id\": \"run_9f5d282b-ac2c-4745-ab6c-1b8418427760\", \"message_type\": \"execute_request\", \"timestamp\": 1756395770.0917597}\u001b[0m\n2025-08-28T15:42:50.119079465Z \u001b[32m2025-08-28 15:42:50.094\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.agents.optimizations_core_sub_agent\u001b[0m:\u001b[36m_create_fallback_result\u001b[0m:\u001b[36m165\u001b[0m | \u001b[33m\u001b[1mUsing fallback optimization for run_id: run_9f5d282b-ac2c-4745-ab6c-1b8418427760\u001b[0m\n2025-08-28T15:42:50.119278308Z \u001b[32m2025-08-28 15:42:50.096\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36msend_to_user\u001b[0m:\u001b[36m242\u001b[0m | \u001b[33m\u001b[1mNo connections found for user run_9f5d282b-ac2c-4745-ab6c-1b8418427760\u001b[0m\n2025-08-28T15:42:50.119316708Z \u001b[32m2025-08-28 15:42:50.097\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.llm.subagent_logger\u001b[0m:\u001b[36m_log_input_json\u001b[0m:\u001b[36m91\u001b[0m | \u001b[1mAgent input: {\"type\": \"agent_input\", \"from_agent\": \"ReportingSubAgent\", \"to_agent\": \"LLM\", \"data_size\": 7696, \"correlation_id\": \"1538615a-57f4-4065-82f3-6f5b594ef398\", \"timestamp\": 1756395770.097524}\u001b[0m\n2025-08-28T15:42:50.119321399Z \u001b[32m2025-08-28 15:42:50.098\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.triage_sub_agent.executor\u001b[0m:\u001b[36m_log_execution_start\u001b[0m:\u001b[36m247\u001b[0m | \u001b[1mTriageSubAgent starting execution for run_id: run_9f5d282b-ac2c-4745-ab6c-1b8418427760\u001b[0m\n2025-08-28T15:42:50.119444626Z \u001b[32m2025-08-28 15:42:50.100\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36msend_to_user\u001b[0m:\u001b[36m242\u001b[0m | \u001b[33m\u001b[1mNo connections found for user run_9f5d282b-ac2c-4745-ab6c-1b8418427760\u001b[0m\n2025-08-28T15:42:50.119555796Z \u001b[32m2025-08-28 15:42:50.101\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.agents.data_sub_agent.execution_engine\u001b[0m:\u001b[36mexecute_analysis\u001b[0m:\u001b[36m210\u001b[0m | \u001b[31m\u001b[1mData analysis failed: 'ModernClickHouseOperations' object has no attribute 'analyze_performance_metrics'\u001b[0m\n2025-08-28T15:42:50.119664362Z \u001b[32m2025-08-28 15:42:50.109\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36msend_to_user\u001b[0m:\u001b[36m242\u001b[0m | \u001b[33m\u001b[1mNo connections found for user run_9f5d282b-ac2c-4745-ab6c-1b8418427760\u001b[0m\n2025-08-28T15:42:50.119783653Z \u001b[32m2025-08-28 15:42:50.113\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.llm.subagent_logger\u001b[0m:\u001b[36m_log_communication_json\u001b[0m:\u001b[36m72\u001b[0m | \u001b[1mAgent communication: {\"type\": \"agent_communication\", \"from_agent\": \"OptimizationsCoreSubAgent\", \"to_agent\": \"Supervisor\", \"correlation_id\": \"run_9f5d282b-ac2c-4745-ab6c-1b8418427760\", \"message_type\": \"execute_response\", \"timestamp\": 1756395770.1131532}\u001b[0m\n2025-08-28T15:42:50.119933666Z \u001b[32m2025-08-28 15:42:50.113\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.agents.actions_to_meet_goals_sub_agent\u001b[0m:\u001b[36m_handle_execution_failure\u001b[0m:\u001b[36m230\u001b[0m | \u001b[31m\u001b[1mExecution failed: UNKNOWN: Agent Missing required state: optimizations_result and data_result required execution failed in Missing required state: optimizations_result and data_result required\u001b[0m\n2025-08-28T15:42:50.120593723Z \u001b[32m2025-08-28 15:42:50.114\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.llm.subagent_logger\u001b[0m:\u001b[36m_log_communication_json\u001b[0m:\u001b[36m72\u001b[0m | \u001b[1mAgent communication: {\"type\": \"agent_communication\", \"from_agent\": \"ActionsToMeetGoalsSubAgent\", \"to_agent\": \"Supervisor\", \"correlation_id\": \"run_9f5d282b-ac2c-4745-ab6c-1b8418427760\", \"message_type\": \"execute_response\", \"timestamp\": 1756395770.1142128}\u001b[0m\n2025-08-28T15:42:50.120625122Z \u001b[32m2025-08-28 15:42:50.114\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.llm.subagent_logger\u001b[0m:\u001b[36m_log_input_json\u001b[0m:\u001b[36m91\u001b[0m | \u001b[1mAgent input: {\"type\": \"agent_input\", \"from_agent\": \"TriageSubAgent\", \"to_agent\": \"LLM\", \"data_size\": 3091, \"correlation_id\": \"cc4f9c21-b8b5-4910-a2a8-0d54ef281afb\", \"timestamp\": 1756395770.1146708}\u001b[0m\n2025-08-28T15:42:50.120628813Z \u001b[32m2025-08-28 15:42:50.115\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.llm.llm_structured_operations\u001b[0m:\u001b[36m_fallback_structured_parse\u001b[0m:\u001b[36m103\u001b[0m | \u001b[31m\u001b[1mStructured generation failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:42:50.120977344Z \u001b[32m2025-08-28 15:42:50.115\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.llm.llm_structured_operations\u001b[0m:\u001b[36m_handle_fallback_failure\u001b[0m:\u001b[36m119\u001b[0m | \u001b[31m\u001b[1mFallback parsing also failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:42:50.121029462Z \u001b[32m2025-08-28 15:42:50.115\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.llm.subagent_logger\u001b[0m:\u001b[36m_log_output_json\u001b[0m:\u001b[36m110\u001b[0m | \u001b[1mAgent output: {\"type\": \"agent_output\", \"to_agent\": \"LLM\", \"from_agent\": \"TriageSubAgent\", \"correlation_id\": \"cc4f9c21-b8b5-4910-a2a8-0d54ef281afb\", \"timestamp\": 1756395770.1159153, \"data_size\": 0, \"status\": \"error\"}\u001b[0m\n2025-08-28T15:42:50.122200101Z \u001b[32m2025-08-28 15:42:50.116\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.llm.subagent_logger\u001b[0m:\u001b[36m_log_input_json\u001b[0m:\u001b[36m91\u001b[0m | \u001b[1mAgent input: {\"type\": \"agent_input\", \"from_agent\": \"TriageSubAgent-Fallback\", \"to_agent\": \"LLM\", \"data_size\": 3144, \"correlation_id\": \"34091f8e-0bf0-45e8-9691-ebf58000be40\", \"timestamp\": 1756395770.1160934}\u001b[0m\n2025-08-28T15:42:50.125717669Z \u001b[32m2025-08-28 15:42:50.121\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.llm.subagent_logger\u001b[0m:\u001b[36m_log_output_json\u001b[0m:\u001b[36m110\u001b[0m | \u001b[1mAgent output: {\"type\": \"agent_output\", \"to_agent\": \"LLM\", \"from_agent\": \"ReportingSubAgent\", \"correlation_id\": \"1538615a-57f4-4065-82f3-6f5b594ef398\", \"timestamp\": 1756395770.1213894, \"data_size\": 0, \"status\": \"error\"}\u001b[0m\n2025-08-28T15:42:50.126307908Z \u001b[32m2025-08-28 15:42:50.122\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.core.reliability\u001b[0m:\u001b[36m_log_fallback_attempt\u001b[0m:\u001b[36m239\u001b[0m | \u001b[33m\u001b[1mReportingSubAgent.execute_reporting: Primary operation failed, trying fallback: 'RetryConfig' object has no attribute 'exponential_base'\u001b[0m\n2025-08-28T15:42:50.128540465Z \u001b[32m2025-08-28 15:42:50.122\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.agents.reporting_sub_agent\u001b[0m:\u001b[36m_fallback_reporting\u001b[0m:\u001b[36m181\u001b[0m | \u001b[33m\u001b[1mUsing fallback reporting for run_id: run_9f5d282b-ac2c-4745-ab6c-1b8418427760\u001b[0m\n2025-08-28T15:42:50.128633820Z \u001b[32m2025-08-28 15:42:50.123\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36msend_to_user\u001b[0m:\u001b[36m242\u001b[0m | \u001b[33m\u001b[1mNo connections found for user run_9f5d282b-ac2c-4745-ab6c-1b8418427760\u001b[0m\n2025-08-28T15:42:50.128685822Z \u001b[32m2025-08-28 15:42:50.124\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.llm.subagent_logger\u001b[0m:\u001b[36m_log_communication_json\u001b[0m:\u001b[36m72\u001b[0m | \u001b[1mAgent communication: {\"type\": \"agent_communication\", \"from_agent\": \"ReportingSubAgent\", \"to_agent\": \"Supervisor\", \"correlation_id\": \"run_9f5d282b-ac2c-4745-ab6c-1b8418427760\", \"message_type\": \"execute_response\", \"timestamp\": 1756395770.1242654}\u001b[0m\n2025-08-28T15:42:50.131104009Z \u001b[32m2025-08-28 15:42:50.129\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.agents.triage_sub_agent.llm_processor\u001b[0m:\u001b[36m_handle_fallback_error\u001b[0m:\u001b[36m234\u001b[0m | \u001b[31m\u001b[1mLLM fallback processing failed for run_9f5d282b-ac2c-4745-ab6c-1b8418427760: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:42:50.134031712Z \u001b[32m2025-08-28 15:42:50.131\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.llm.fallback_strategies\u001b[0m:\u001b[36m_log_retry_warning\u001b[0m:\u001b[36m102\u001b[0m | \u001b[33m\u001b[1mLLM operation triage_analysis failed (attempt 1/3): None. Retrying in 1.17s\u001b[0m\n2025-08-28T15:42:51.306409239Z \u001b[32m2025-08-28 15:42:51.305\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36msend_to_user\u001b[0m:\u001b[36m242\u001b[0m | \u001b[33m\u001b[1mNo connections found for user run_9f5d282b-ac2c-4745-ab6c-1b8418427760\u001b[0m\n2025-08-28T15:42:51.308281393Z \u001b[32m2025-08-28 15:42:51.306\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.llm.subagent_logger\u001b[0m:\u001b[36m_log_input_json\u001b[0m:\u001b[36m91\u001b[0m | \u001b[1mAgent input: {\"type\": \"agent_input\", \"from_agent\": \"TriageSubAgent\", \"to_agent\": \"LLM\", \"data_size\": 3091, \"correlation_id\": \"71ba5184-1f03-4644-8216-72eb40856296\", \"timestamp\": 1756395771.306283}\u001b[0m\n2025-08-28T15:42:51.308313236Z \u001b[32m2025-08-28 15:42:51.306\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.llm.llm_structured_operations\u001b[0m:\u001b[36m_fallback_structured_parse\u001b[0m:\u001b[36m103\u001b[0m | \u001b[31m\u001b[1mStructured generation failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:42:51.308316713Z \u001b[32m2025-08-28 15:42:51.307\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.llm.llm_structured_operations\u001b[0m:\u001b[36m_handle_fallback_failure\u001b[0m:\u001b[36m119\u001b[0m | \u001b[31m\u001b[1mFallback parsing also failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:42:51.308738579Z \u001b[32m2025-08-28 15:42:51.307\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.llm.subagent_logger\u001b[0m:\u001b[36m_log_output_json\u001b[0m:\u001b[36m110\u001b[0m | \u001b[1mAgent output: {\"type\": \"agent_output\", \"to_agent\": \"LLM\", \"from_agent\": \"TriageSubAgent\", \"correlation_id\": \"71ba5184-1f03-4644-8216-72eb40856296\", \"timestamp\": 1756395771.3072233, \"data_size\": 0, \"status\": \"error\"}\u001b[0m\n2025-08-28T15:42:51.308842906Z \u001b[32m2025-08-28 15:42:51.307\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.llm.subagent_logger\u001b[0m:\u001b[36m_log_input_json\u001b[0m:\u001b[36m91\u001b[0m | \u001b[1mAgent input: {\"type\": \"agent_input\", \"from_agent\": \"TriageSubAgent-Fallback\", \"to_agent\": \"LLM\", \"data_size\": 3144, \"correlation_id\": \"19e43d2c-7f0d-486a-8f1e-ae51f8807b29\", \"timestamp\": 1756395771.307429}\u001b[0m\n2025-08-28T15:42:51.312344262Z \u001b[32m2025-08-28 15:42:51.311\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.agents.triage_sub_agent.llm_processor\u001b[0m:\u001b[36m_handle_fallback_error\u001b[0m:\u001b[36m234\u001b[0m | \u001b[31m\u001b[1mLLM fallback processing failed for run_9f5d282b-ac2c-4745-ab6c-1b8418427760: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:42:51.312369793Z \u001b[32m2025-08-28 15:42:51.311\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.llm.fallback_strategies\u001b[0m:\u001b[36m_log_retry_warning\u001b[0m:\u001b[36m102\u001b[0m | \u001b[33m\u001b[1mLLM operation triage_analysis failed (attempt 2/3): None. Retrying in 2.43s\u001b[0m\n2025-08-28T15:42:51.312372018Z \u001b[32m2025-08-28 15:42:51.311\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.core.resilience.unified_circuit_breaker\u001b[0m:\u001b[36m_transition_to_open\u001b[0m:\u001b[36m513\u001b[0m | \u001b[33m\u001b[1mCircuit breaker 'CircuitConfig(name='llm_fallback_triage', failure_threshold=3, recovery_timeout=30.0, half_open_max_calls=3, timeout_seconds=10.0, adaptive_threshold=True, slow_call_threshold=5.0, sliding_window_size=100)' -> OPEN\u001b[0m\n2025-08-28T15:42:52.977190124Z \u001b[32m2025-08-28 15:42:52.973\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m41\u001b[0m | \u001b[1mSecurityResponseMiddleware processing: /health\u001b[0m\n2025-08-28T15:42:52.980167245Z \u001b[32m2025-08-28 15:42:52.976\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.request_context\u001b[0m:\u001b[36mlog_request_details\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mRequest: GET /health | Status: 200 | Duration: 2.15ms | Trace: trace_ad21d30ffd764658\u001b[0m\n2025-08-28T15:42:52.980304007Z \u001b[32m2025-08-28 15:42:52.977\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m47\u001b[0m | \u001b[1mResponse for /health: status=200, is_api=False, has_auth=False\u001b[0m\n2025-08-28T15:42:52.980313191Z \u001b[32m2025-08-28 15:42:52.978\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m127.0.0.1:55088 - \"GET /health HTTP/1.1\" 200\u001b[0m\n2025-08-28T15:42:53.741982972Z \u001b[32m2025-08-28 15:42:53.741\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36msend_to_user\u001b[0m:\u001b[36m242\u001b[0m | \u001b[33m\u001b[1mNo connections found for user run_9f5d282b-ac2c-4745-ab6c-1b8418427760\u001b[0m\n2025-08-28T15:42:53.742230166Z \u001b[32m2025-08-28 15:42:53.741\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.llm.subagent_logger\u001b[0m:\u001b[36m_log_input_json\u001b[0m:\u001b[36m91\u001b[0m | \u001b[1mAgent input: {\"type\": \"agent_input\", \"from_agent\": \"TriageSubAgent\", \"to_agent\": \"LLM\", \"data_size\": 3091, \"correlation_id\": \"d75f281d-1807-4e39-826d-ee2af74ffe2b\", \"timestamp\": 1756395773.74172}\u001b[0m\n2025-08-28T15:42:53.743501397Z \u001b[32m2025-08-28 15:42:53.742\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.llm.llm_structured_operations\u001b[0m:\u001b[36m_fallback_structured_parse\u001b[0m:\u001b[36m103\u001b[0m | \u001b[31m\u001b[1mStructured generation failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:42:53.743978245Z \u001b[32m2025-08-28 15:42:53.742\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.llm.llm_structured_operations\u001b[0m:\u001b[36m_handle_fallback_failure\u001b[0m:\u001b[36m119\u001b[0m | \u001b[31m\u001b[1mFallback parsing also failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:42:53.743985976Z \u001b[32m2025-08-28 15:42:53.742\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.llm.subagent_logger\u001b[0m:\u001b[36m_log_output_json\u001b[0m:\u001b[36m110\u001b[0m | \u001b[1mAgent output: {\"type\": \"agent_output\", \"to_agent\": \"LLM\", \"from_agent\": \"TriageSubAgent\", \"correlation_id\": \"d75f281d-1807-4e39-826d-ee2af74ffe2b\", \"timestamp\": 1756395773.7426498, \"data_size\": 0, \"status\": \"error\"}\u001b[0m\n2025-08-28T15:42:53.743988453Z \u001b[32m2025-08-28 15:42:53.742\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.llm.subagent_logger\u001b[0m:\u001b[36m_log_input_json\u001b[0m:\u001b[36m91\u001b[0m | \u001b[1mAgent input: {\"type\": \"agent_input\", \"from_agent\": \"TriageSubAgent-Fallback\", \"to_agent\": \"LLM\", \"data_size\": 3144, \"correlation_id\": \"2aef3fc1-5c7a-4c44-87f6-80c8e315e81d\", \"timestamp\": 1756395773.7427936}\u001b[0m\n2025-08-28T15:42:53.747657474Z \u001b[32m2025-08-28 15:42:53.745\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.agents.triage_sub_agent.llm_processor\u001b[0m:\u001b[36m_handle_fallback_error\u001b[0m:\u001b[36m234\u001b[0m | \u001b[31m\u001b[1mLLM fallback processing failed for run_9f5d282b-ac2c-4745-ab6c-1b8418427760: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:42:53.747733785Z \u001b[32m2025-08-28 15:42:53.745\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.llm.retry_helpers\u001b[0m:\u001b[36mlog_final_failure\u001b[0m:\u001b[36m51\u001b[0m | \u001b[31m\u001b[1mLLM operation triage_analysis failed after 3 attempts: None\u001b[0m\n2025-08-28T15:42:53.747982900Z \u001b[32m2025-08-28 15:42:53.746\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36msend_to_user\u001b[0m:\u001b[36m242\u001b[0m | \u001b[33m\u001b[1mNo connections found for user run_9f5d282b-ac2c-4745-ab6c-1b8418427760\u001b[0m\n2025-08-28T15:42:53.748230727Z /usr/local/lib/python3.11/site-packages/pydantic/main.py:463: UserWarning: Pydantic serializer warnings:\n2025-08-28T15:42:53.748268411Z   PydanticSerializationUnexpectedValue(Expected `TriageResult` - serialized value may not be as expected [input_value={'category': 'Error', 'se...equire_approval': False}, input_type=dict])\n2025-08-28T15:42:53.748275604Z   return self.__pydantic_serializer__.to_python(\n2025-08-28T15:42:53.748278761Z \u001b[32m2025-08-28 15:42:53.746\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.core.resilience.unified_circuit_breaker\u001b[0m:\u001b[36m_transition_to_open\u001b[0m:\u001b[36m513\u001b[0m | \u001b[33m\u001b[1mCircuit breaker 'CircuitConfig(name='llm_fallback_triage', failure_threshold=3, recovery_timeout=30.0, half_open_max_calls=3, timeout_seconds=10.0, adaptive_threshold=True, slow_call_threshold=5.0, sliding_window_size=100)' -> OPEN\u001b[0m\n2025-08-28T15:42:53.748299254Z \u001b[32m2025-08-28 15:42:53.746\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_completed\", \"flow_id\": \"flow_d1bc8fb9\", \"correlation_id\": \"64682067-3f5b-4b78-9aad-50e6b7833c8a\", \"timestamp\": 1756395773.7467895, \"step_name\": \"triage\", \"step_type\": \"agent\", \"state_summary\": {\"total_steps\": 5, \"completed_steps\": 1, \"current_phase\": \"reporting\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:53.748322179Z \u001b[32m2025-08-28 15:42:53.746\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_completed\", \"flow_id\": \"flow_d1bc8fb9\", \"correlation_id\": \"64682067-3f5b-4b78-9aad-50e6b7833c8a\", \"timestamp\": 1756395773.7469342, \"step_name\": \"data\", \"step_type\": \"agent\", \"state_summary\": {\"total_steps\": 5, \"completed_steps\": 2, \"current_phase\": \"reporting\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:53.748382196Z \u001b[32m2025-08-28 15:42:53.747\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_completed\", \"flow_id\": \"flow_d1bc8fb9\", \"correlation_id\": \"64682067-3f5b-4b78-9aad-50e6b7833c8a\", \"timestamp\": 1756395773.7470486, \"step_name\": \"optimization\", \"step_type\": \"agent\", \"state_summary\": {\"total_steps\": 5, \"completed_steps\": 3, \"current_phase\": \"reporting\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:53.750036497Z \u001b[32m2025-08-28 15:42:53.747\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_completed\", \"flow_id\": \"flow_d1bc8fb9\", \"correlation_id\": \"64682067-3f5b-4b78-9aad-50e6b7833c8a\", \"timestamp\": 1756395773.7471519, \"step_name\": \"actions\", \"step_type\": \"agent\", \"state_summary\": {\"total_steps\": 5, \"completed_steps\": 4, \"current_phase\": \"reporting\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:53.750270775Z \u001b[32m2025-08-28 15:42:53.747\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_completed\", \"flow_id\": \"flow_d1bc8fb9\", \"correlation_id\": \"64682067-3f5b-4b78-9aad-50e6b7833c8a\", \"timestamp\": 1756395773.747252, \"step_name\": \"reporting\", \"step_type\": \"agent\", \"state_summary\": {\"total_steps\": 5, \"completed_steps\": 5, \"current_phase\": \"reporting\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:53.750378996Z \u001b[32m2025-08-28 15:42:53.748\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.pipeline_executor\u001b[0m:\u001b[36m_persist_batched_state\u001b[0m:\u001b[36m201\u001b[0m | \u001b[31m\u001b[1mError in batched state persistence: PIPELINE_COMPLETE\u001b[0m\n2025-08-28T15:42:53.750399156Z \u001b[32m2025-08-28 15:42:53.749\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"flow_completed\", \"flow_id\": \"flow_d1bc8fb9\", \"correlation_id\": \"64682067-3f5b-4b78-9aad-50e6b7833c8a\", \"timestamp\": 1756395773.749105, \"state_summary\": {\"total_steps\": 5, \"completed_steps\": 5, \"current_phase\": \"reporting\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:53.754121465Z \u001b[32m2025-08-28 15:42:53.751\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.state_persistence\u001b[0m:\u001b[36m_ensure_user_exists_for_snapshot\u001b[0m:\u001b[36m433\u001b[0m | \u001b[1mAuto-creating dev/test user for state persistence: dev-temp-cc173c1d\u001b[0m\n2025-08-28T15:42:53.754182672Z \u001b[32m2025-08-28 15:42:53.752\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.services.state_persistence\u001b[0m:\u001b[36m_ensure_user_exists_for_snapshot\u001b[0m:\u001b[36m449\u001b[0m | \u001b[33m\u001b[1mCould not auto-create dev user dev-temp-cc173c1d: 1 validation error for UserCreate\n2025-08-28T15:42:53.754190016Z email\n2025-08-28T15:42:53.754192893Z   value is not a valid email address: The part after the @-sign is a special-use or reserved name that cannot be used with email. [type=value_error, input_value='dev-temp-cc173c1d@dev.local', input_type=str]\u001b[0m\n2025-08-28T15:42:53.757384618Z \u001b[32m2025-08-28 15:42:53.755\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.services.state_persistence\u001b[0m:\u001b[36m_handle_save_error\u001b[0m:\u001b[36m402\u001b[0m | \u001b[31m\u001b[1mFailed to save state for run run_9f5d282b-ac2c-4745-ab6c-1b8418427760: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.ForeignKeyViolationError'>: insert or update on table \"agent_state_snapshots\" violates foreign key constraint \"agent_state_snapshots_user_id_fkey\"\n2025-08-28T15:42:53.757435577Z DETAIL:  Key (user_id)=(dev-temp-cc173c1d) is not present in table \"userbase\".\n2025-08-28T15:42:53.757443579Z [SQL: INSERT INTO agent_state_snapshots (id, run_id, thread_id, user_id, version, schema_version, checkpoint_type, state_data, serialization_format, compression_type, step_count, agent_phase, execution_context, created_at, expires_at, is_recovery_point, recovery_reason, parent_snapshot_id) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::JSON, $9::VARCHAR, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13::JSON, now(), $14::TIMESTAMP WITH TIME ZONE, $15::BOOLEAN, $16::VARCHAR, $17::VARCHAR) RETURNING agent_state_snapshots.created_at]\n2025-08-28T15:42:53.757447879Z [parameters: ('bf5bf752-f507-4956-bfc6-286de3d6649c', 'run_9f5d282b-ac2c-4745-ab6c-1b8418427760', 'thread_dev-temp-cc173c1d', 'dev-temp-cc173c1d', '1.0', '1.0', 'auto', '{\"user_request\": \"My chatbot response time is too slow at 3 seconds. Can you optimize it to under 1 second without increasing costs?\", \"chat_thread_i ... (3152 characters truncated) ... \", \"last_updated\": \"2025-08-28T15:42:50.041463Z\", \"execution_context\": {}, \"custom_fields\": {}, \"retry_count\": 0, \"tags\": []}, \"quality_metrics\": {}}', 'compressed_json', None, 0, None, '{}', datetime.datetime(2025, 9, 4, 15, 42, 53, 752690, tzinfo=datetime.timezone.utc), False, None, None)]\n2025-08-28T15:42:53.757451984Z (Background on this error at: https://sqlalche.me/e/20/gkpj)\u001b[0m\n2025-08-28T15:42:53.758398186Z \u001b[32m2025-08-28 15:42:53.756\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36msend_to_thread\u001b[0m:\u001b[36m300\u001b[0m | \u001b[33m\u001b[1mNo active connections found for thread thread_dev-temp-cc173c1d\u001b[0m\n2025-08-28T15:42:53.758779920Z \u001b[32m2025-08-28 15:42:53.756\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_completed\", \"flow_id\": \"flow_0a86afc5\", \"correlation_id\": \"run_9f5d282b-ac2c-4745-ab6c-1b8418427760\", \"timestamp\": 1756395773.7566242, \"step_name\": \"execute_pipeline\", \"step_type\": \"execution\", \"state_summary\": {\"total_steps\": 4, \"completed_steps\": 4, \"current_phase\": \"execute_pipeline\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:53.758938616Z \u001b[32m2025-08-28 15:42:53.756\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"flow_completed\", \"flow_id\": \"flow_0a86afc5\", \"correlation_id\": \"run_9f5d282b-ac2c-4745-ab6c-1b8418427760\", \"timestamp\": 1756395773.756865, \"state_summary\": {\"total_steps\": 4, \"completed_steps\": 4, \"current_phase\": \"execute_pipeline\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:53.761394711Z \u001b[32m2025-08-28 15:42:53.760\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.database.base_crud\u001b[0m:\u001b[36m_create_entity\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1mCreated Message with id: msg_69fa3c56-5ede-47da-8259-a9f128e85c14\u001b[0m\n2025-08-28T15:42:53.769504533Z \u001b[32m2025-08-28 15:42:53.768\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.database.base_crud\u001b[0m:\u001b[36m_execute_update_operation\u001b[0m:\u001b[36m129\u001b[0m | \u001b[1mUpdated Run with id: run_9f5d282b-ac2c-4745-ab6c-1b8418427760\u001b[0m\n2025-08-28T15:42:53.771278982Z \u001b[32m2025-08-28 15:42:53.770\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36m_send_to_connection\u001b[0m:\u001b[36m374\u001b[0m | \u001b[31m\u001b[1mError sending to connection conn_dev-temp-cc173c1d_3052f606: Object of type DeepAgentState is not JSON serializable\u001b[0m\n2025-08-28T15:42:53.775558713Z \u001b[32m2025-08-28 15:42:53.773\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36m_cleanup_connection\u001b[0m:\u001b[36m220\u001b[0m | \u001b[1mWebSocket closed for connection conn_dev-temp-cc173c1d_3052f606: 1011 - Send error\u001b[0m\n2025-08-28T15:42:53.775600892Z \u001b[32m2025-08-28 15:42:53.774\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.agent_handler\u001b[0m:\u001b[36m_handle_start_agent\u001b[0m:\u001b[36m123\u001b[0m | \u001b[1mSuccessfully processed start_agent for dev-temp-cc173c1d\u001b[0m\n2025-08-28T15:42:53.775603778Z \u001b[32m2025-08-28 15:42:53.774\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mconnection closed\u001b[0m\n2025-08-28T15:42:53.775605350Z \u001b[32m2025-08-28 15:42:53.774\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mconnection closed\u001b[0m\n2025-08-28T15:42:53.775606896Z \u001b[32m2025-08-28 15:42:53.775\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36m_handle_websocket_messages\u001b[0m:\u001b[36m368\u001b[0m | \u001b[31m\u001b[1mMessage handling error for conn_dev-temp-cc173c1d_3052f606: WebSocket is not connected. Need to call \"accept\" first.\u001b[0m\n2025-08-28T15:42:53.876730656Z \u001b[32m2025-08-28 15:42:53.875\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36m_handle_websocket_messages\u001b[0m:\u001b[36m368\u001b[0m | \u001b[31m\u001b[1mMessage handling error for conn_dev-temp-cc173c1d_3052f606: WebSocket is not connected. Need to call \"accept\" first.\u001b[0m\n2025-08-28T15:42:54.078450324Z \u001b[32m2025-08-28 15:42:54.077\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36m_handle_websocket_messages\u001b[0m:\u001b[36m368\u001b[0m | \u001b[31m\u001b[1mMessage handling error for conn_dev-temp-cc173c1d_3052f606: WebSocket is not connected. Need to call \"accept\" first.\u001b[0m\n2025-08-28T15:42:54.478300503Z \u001b[32m2025-08-28 15:42:54.477\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36m_handle_websocket_messages\u001b[0m:\u001b[36m368\u001b[0m | \u001b[31m\u001b[1mMessage handling error for conn_dev-temp-cc173c1d_3052f606: WebSocket is not connected. Need to call \"accept\" first.\u001b[0m\n2025-08-28T15:42:55.280205451Z \u001b[32m2025-08-28 15:42:55.279\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36m_handle_websocket_messages\u001b[0m:\u001b[36m368\u001b[0m | \u001b[31m\u001b[1mMessage handling error for conn_dev-temp-cc173c1d_3052f606: WebSocket is not connected. Need to call \"accept\" first.\u001b[0m\n2025-08-28T15:42:55.280733356Z \u001b[32m2025-08-28 15:42:55.279\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36m_handle_websocket_messages\u001b[0m:\u001b[36m371\u001b[0m | \u001b[31m\u001b[1mToo many errors, closing connection conn_dev-temp-cc173c1d_3052f606\u001b[0m\n2025-08-28T15:42:55.280757385Z \u001b[32m2025-08-28 15:42:55.279\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36m_handle_websocket_messages\u001b[0m:\u001b[36m383\u001b[0m | \u001b[1mExiting message handling loop for connection: conn_dev-temp-cc173c1d_3052f606 | Duration: 7.7s | Messages processed: 1 | Errors: 5 | User: dev-temp-cc173c1d\u001b[0m\n2025-08-28T15:42:55.280759785Z \u001b[32m2025-08-28 15:42:55.279\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36mwebsocket_endpoint\u001b[0m:\u001b[36m198\u001b[0m | \u001b[1mMessage handling loop ended for connection: conn_dev-temp-cc173c1d_3052f606\u001b[0m\n2025-08-28T15:42:55.280761275Z \u001b[32m2025-08-28 15:42:55.279\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.auth\u001b[0m:\u001b[36mcleanup\u001b[0m:\u001b[36m349\u001b[0m | \u001b[1mWebSocket authenticator cleanup completed\u001b[0m\n2025-08-28T15:42:55.280763080Z \u001b[32m2025-08-28 15:42:55.280\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36mwebsocket_endpoint\u001b[0m:\u001b[36m255\u001b[0m | \u001b[1mWebSocket cleanup completed: conn_dev-temp-cc173c1d_3052f606\u001b[0m\n2025-08-28T15:42:57.043440799Z \u001b[32m2025-08-28 15:42:57.040\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_index_optimization_background\u001b[0m:\u001b[36m232\u001b[0m | \u001b[1mStarting background database index optimization...\u001b[0m\n2025-08-28T15:42:57.043469781Z \u001b[32m2025-08-28 15:42:57.041\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.db.database_index_manager\u001b[0m:\u001b[36moptimize_all_databases\u001b[0m:\u001b[36m129\u001b[0m | \u001b[1mStarting database optimization across all databases\u001b[0m\n2025-08-28T15:42:57.043471912Z \u001b[32m2025-08-28 15:42:57.041\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.db.index_optimizer_core\u001b[0m:\u001b[36mlog_engine_unavailable\u001b[0m:\u001b[36m52\u001b[0m | \u001b[33m\u001b[1mAsync engine not available, skipping index creation\u001b[0m\n2025-08-28T15:42:57.043489839Z \u001b[32m2025-08-28 15:42:57.042\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.db.clickhouse\u001b[0m:\u001b[36m_create_mock_client\u001b[0m:\u001b[36m132\u001b[0m | \u001b[1m[ClickHouse] Using MOCK client for development\u001b[0m\n2025-08-28T15:42:57.043491391Z \u001b[32m2025-08-28 15:42:57.042\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.db.clickhouse\u001b[0m:\u001b[36m_create_mock_client\u001b[0m:\u001b[36m132\u001b[0m | \u001b[1m[ClickHouse] Using MOCK client for development\u001b[0m\n2025-08-28T15:42:57.043492707Z \u001b[32m2025-08-28 15:42:57.042\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.db.database_index_manager\u001b[0m:\u001b[36moptimize_all_databases\u001b[0m:\u001b[36m138\u001b[0m | \u001b[1mDatabase optimization completed - PostgreSQL: True, ClickHouse: True\u001b[0m\n2025-08-28T15:42:57.043507810Z \u001b[32m2025-08-28 15:42:57.042\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_index_optimization_background\u001b[0m:\u001b[36m239\u001b[0m | \u001b[1mBackground database optimization completed successfully: {'postgres': {'indexes_created': {}, 'recommendations': [{'table_name': 'userbase', 'columns': ['email'], 'index_type': 'btree', 'reason': 'Frequent user lookups by email', 'estimated_benefit': 0.0, 'priority': 1}, {'table_name': 'corpus_audit_logs', 'columns': ['timestamp'], 'index_type': 'btree', 'reason': 'Time-based audit queries', 'estimated_benefit': 0.0, 'priority': 1}, {'table_name': 'corpus_audit_logs', 'columns': ['user_id', 'action'], 'index_type': 'btree', 'reason': 'User action filtering', 'estimated_benefit': 0.0, 'priority': 2}, {'table_name': 'secret', 'columns': ['user_id'], 'index_type': 'btree', 'reason': 'User secret lookups', 'estimated_benefit': 0.0, 'priority': 2}, {'table_name': 'agent_states', 'columns': ['session_id'], 'index_type': 'btree', 'reason': 'Session-based state lookups', 'estimated_benefit': 0.0, 'priority': 2}], 'usage_stats': {}}, 'clickhouse': {'table_optimizations': {'netra_content_corpus': False, 'netra_audit_events': False, 'netra_performance_metrics': False, 'netra_agent_logs': False}, 'materialized_views': {'user_daily_activity': False, 'hourly_performance_metrics': False}}, 'recommendations': []}\u001b[0m\n2025-08-28T15:42:58.788054099Z \u001b[32m2025-08-28 15:42:58.783\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m('172.18.0.1', 45122) - \"WebSocket /ws\" [accepted]\u001b[0m\n2025-08-28T15:42:58.789787861Z \u001b[32m2025-08-28 15:42:58.784\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m('172.18.0.1', 45122) - \"WebSocket /ws\" [accepted]\u001b[0m\n2025-08-28T15:42:58.789849108Z \u001b[32m2025-08-28 15:42:58.784\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36mwebsocket_endpoint\u001b[0m:\u001b[36m121\u001b[0m | \u001b[1mWebSocket accepted with subprotocol: jwt-auth\u001b[0m\n2025-08-28T15:42:58.790894704Z \u001b[32m2025-08-28 15:42:58.784\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.websocket_cors\u001b[0m:\u001b[36mget_websocket_cors_handler\u001b[0m:\u001b[36m566\u001b[0m | \u001b[1mWebSocket CORS: Detected environment from config: 'development'\u001b[0m\n2025-08-28T15:42:58.790922301Z \u001b[32m2025-08-28 15:42:58.785\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.websocket_cors\u001b[0m:\u001b[36mvalidate_websocket_origin\u001b[0m:\u001b[36m360\u001b[0m | \u001b[1mWebSocket connection allowed from origin: http://127.0.0.1:3000 in development environment\u001b[0m\n2025-08-28T15:42:58.790960911Z \u001b[32m2025-08-28 15:42:58.785\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mStarted trace span: websocket_jwt_validation (trace_id: 0217894fc9d24d0794cc38ecb7fc2441)\u001b[0m\n2025-08-28T15:42:58.790975119Z \u001b[32m2025-08-28 15:42:58.788\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mconnection open\u001b[0m\n2025-08-28T15:42:58.790976408Z \u001b[32m2025-08-28 15:42:58.788\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mconnection open\u001b[0m\n2025-08-28T15:42:58.798260268Z \u001b[32m2025-08-28 15:42:58.794\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mHTTP Request: POST http://auth:8081/auth/check-blacklist \"HTTP/1.1 200 OK\"\u001b[0m\n2025-08-28T15:42:58.798833549Z \u001b[32m2025-08-28 15:42:58.797\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mCompleted trace span: websocket_jwt_validation\u001b[0m\n2025-08-28T15:42:58.798844459Z \u001b[32m2025-08-28 15:42:58.797\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.auth\u001b[0m:\u001b[36mauthenticate_websocket\u001b[0m:\u001b[36m121\u001b[0m | \u001b[1mWebSocket authenticated: dev-temp-cc173c1d\u001b[0m\n2025-08-28T15:42:58.798846696Z \u001b[32m2025-08-28 15:42:58.797\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36mwebsocket_endpoint\u001b[0m:\u001b[36m154\u001b[0m | \u001b[1mWebSocket authenticated for user: dev-temp-cc173c1d at 2025-08-28T15:42:58.797582+00:00\u001b[0m\n2025-08-28T15:42:58.800372426Z \u001b[32m2025-08-28 15:42:58.798\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36mconnect_user\u001b[0m:\u001b[36m124\u001b[0m | \u001b[1mWebSocket connected: conn_dev-temp-cc173c1d_9dda8614 for user dev-temp-cc173c1d\u001b[0m\n2025-08-28T15:42:58.800571420Z \u001b[32m2025-08-28 15:42:58.798\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36mwebsocket_endpoint\u001b[0m:\u001b[36m188\u001b[0m | \u001b[1mWebSocket ready: conn_dev-temp-cc173c1d_9dda8614\u001b[0m\n2025-08-28T15:42:58.800672069Z \u001b[32m2025-08-28 15:42:58.799\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36mwebsocket_endpoint\u001b[0m:\u001b[36m191\u001b[0m | \u001b[1mStarting message handling loop for connection: conn_dev-temp-cc173c1d_9dda8614\u001b[0m\n2025-08-28T15:42:58.800775551Z \u001b[32m2025-08-28 15:42:58.799\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36mwebsocket_endpoint\u001b[0m:\u001b[36m193\u001b[0m | \u001b[1mWebSocket state before loop - client_state: WebSocketState.CONNECTED, application_state: WebSocketState.CONNECTED\u001b[0m\n2025-08-28T15:42:58.800822170Z \u001b[32m2025-08-28 15:42:58.799\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36m_handle_websocket_messages\u001b[0m:\u001b[36m276\u001b[0m | \u001b[1mEntering message handling loop for connection: conn_dev-temp-cc173c1d_9dda8614 (user: dev-temp-cc173c1d)\u001b[0m\n2025-08-28T15:42:58.801002709Z \u001b[32m2025-08-28 15:42:58.799\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36m_handle_websocket_messages\u001b[0m:\u001b[36m279\u001b[0m | \u001b[1mWebSocket state at loop entry - client_state: WebSocketState.CONNECTED, application_state: WebSocketState.CONNECTED\u001b[0m\n2025-08-28T15:42:58.801048026Z \u001b[32m2025-08-28 15:42:58.799\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36m_handle_websocket_messages\u001b[0m:\u001b[36m285\u001b[0m | \u001b[1mFirst loop iteration for conn_dev-temp-cc173c1d_9dda8614, WebSocket is_connected returned True\u001b[0m\n2025-08-28T15:43:23.077202836Z \u001b[32m2025-08-28 15:43:23.071\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m41\u001b[0m | \u001b[1mSecurityResponseMiddleware processing: /health\u001b[0m\n2025-08-28T15:43:23.077304912Z \u001b[32m2025-08-28 15:43:23.073\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.request_context\u001b[0m:\u001b[36mlog_request_details\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mRequest: GET /health | Status: 200 | Duration: 2.00ms | Trace: trace_6336f17a9bb54e1a\u001b[0m\n2025-08-28T15:43:23.077320907Z \u001b[32m2025-08-28 15:43:23.074\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m47\u001b[0m | \u001b[1mResponse for /health: status=200, is_api=False, has_auth=False\u001b[0m\n2025-08-28T15:43:23.077326250Z \u001b[32m2025-08-28 15:43:23.075\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m127.0.0.1:53330 - \"GET /health HTTP/1.1\" 200\u001b[0m\n2025-08-28T15:43:26.913423173Z WARNING:  WatchFiles detected changes in 'netra_backend/tests/services/test_optimized_persistence_integration.py'. Reloading...\n2025-08-28T15:43:26.961407461Z \u001b[32m2025-08-28 15:43:26.960\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mShutting down\u001b[0m\n2025-08-28T15:43:26.963223688Z \u001b[32m2025-08-28 15:43:26.960\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mShutting down\u001b[0m\n2025-08-28T15:43:26.963269205Z \u001b[32m2025-08-28 15:43:26.961\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mconnection closed\u001b[0m\n2025-08-28T15:43:26.963388630Z \u001b[32m2025-08-28 15:43:26.961\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mconnection closed\u001b[0m\n2025-08-28T15:43:26.963436905Z \u001b[32m2025-08-28 15:43:26.961\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36m_handle_websocket_messages\u001b[0m:\u001b[36m362\u001b[0m | \u001b[1mWebSocket disconnect: {'connection_id': 'conn_dev-temp-cc173c1d_9dda8614', 'user_id': 'dev-temp-cc173c1d', 'disconnect_code': 1012, 'disconnect_reason': 'No reason provided', 'connection_duration': 'Unknown'}\u001b[0m\n2025-08-28T15:43:26.963442127Z \u001b[32m2025-08-28 15:43:26.962\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36m_handle_websocket_messages\u001b[0m:\u001b[36m383\u001b[0m | \u001b[1mExiting message handling loop for connection: conn_dev-temp-cc173c1d_9dda8614 | Duration: 28.2s | Messages processed: 0 | Errors: 0 | User: dev-temp-cc173c1d\u001b[0m\n2025-08-28T15:43:26.963527976Z \u001b[32m2025-08-28 15:43:26.962\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36mwebsocket_endpoint\u001b[0m:\u001b[36m198\u001b[0m | \u001b[1mMessage handling loop ended for connection: conn_dev-temp-cc173c1d_9dda8614\u001b[0m\n2025-08-28T15:43:26.963540135Z \u001b[32m2025-08-28 15:43:26.962\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.auth\u001b[0m:\u001b[36mcleanup\u001b[0m:\u001b[36m349\u001b[0m | \u001b[1mWebSocket authenticator cleanup completed\u001b[0m\n2025-08-28T15:43:26.963543977Z \u001b[32m2025-08-28 15:43:26.962\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36mdisconnect_user\u001b[0m:\u001b[36m135\u001b[0m | \u001b[1mWebSocket disconnected: conn_dev-temp-cc173c1d_9dda8614 (1000: Normal closure)\u001b[0m\n2025-08-28T15:43:26.963640789Z \u001b[32m2025-08-28 15:43:26.962\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36mwebsocket_endpoint\u001b[0m:\u001b[36m255\u001b[0m | \u001b[1mWebSocket cleanup completed: conn_dev-temp-cc173c1d_9dda8614\u001b[0m\n2025-08-28T15:43:27.063004058Z \u001b[32m2025-08-28 15:43:27.061\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mWaiting for application shutdown.\u001b[0m\n2025-08-28T15:43:27.063046743Z \u001b[32m2025-08-28 15:43:27.061\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mWaiting for application shutdown.\u001b[0m\n2025-08-28T15:43:27.063049259Z \u001b[32m2025-08-28 15:43:27.061\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.shutdown\u001b[0m:\u001b[36mshutdown_cleanup\u001b[0m:\u001b[36m20\u001b[0m | \u001b[1mApplication shutdown initiated...\u001b[0m\n2025-08-28T15:43:27.063050923Z \u001b[32m2025-08-28 15:43:27.061\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.utils.multiprocessing_cleanup\u001b[0m:\u001b[36mcleanup_all\u001b[0m:\u001b[36m90\u001b[0m | \u001b[1mMultiprocessing resources cleaned up\u001b[0m\n2025-08-28T15:43:27.063052413Z \u001b[32m2025-08-28 15:43:27.062\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.shutdown\u001b[0m:\u001b[36mrun_complete_shutdown\u001b[0m:\u001b[36m120\u001b[0m | \u001b[1mShutting down background task manager...\u001b[0m\n2025-08-28T15:43:27.063130622Z \u001b[32m2025-08-28 15:43:27.062\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mShutting down BackgroundTaskManager...\u001b[0m\n2025-08-28T15:43:27.063146181Z \u001b[32m2025-08-28 15:43:27.062\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mBackgroundTaskManager shutdown complete\u001b[0m\n2025-08-28T15:43:27.063150014Z \u001b[32m2025-08-28 15:43:27.062\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.shutdown\u001b[0m:\u001b[36mrun_complete_shutdown\u001b[0m:\u001b[36m122\u001b[0m | \u001b[1mBackground task manager shutdown complete\u001b[0m\n2025-08-28T15:43:27.063173101Z \u001b[32m2025-08-28 15:43:27.062\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.shutdown\u001b[0m:\u001b[36mstop_monitoring\u001b[0m:\u001b[36m48\u001b[0m | \u001b[31m\u001b[1mError stopping monitoring and optimizations: 'ExecutionMonitor' object has no attribute 'stop_monitoring'\u001b[0m\n2025-08-28T15:43:27.166084905Z \u001b[32m2025-08-28 15:43:27.163\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mShutting down BackgroundTaskManager...\u001b[0m\n2025-08-28T15:43:27.166129898Z \u001b[32m2025-08-28 15:43:27.163\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mBackgroundTaskManager shutdown complete\u001b[0m\n2025-08-28T15:43:27.166132242Z \u001b[32m2025-08-28 15:43:27.164\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.base_agent\u001b[0m:\u001b[36mshutdown\u001b[0m:\u001b[36m68\u001b[0m | \u001b[1mShutting down Supervisor\u001b[0m\n2025-08-28T15:43:27.166133654Z \u001b[32m2025-08-28 15:43:27.164\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36mshutdown\u001b[0m:\u001b[36m737\u001b[0m | \u001b[1mShutting down WebSocket manager with 0 connections\u001b[0m\n2025-08-28T15:43:27.166134921Z \u001b[32m2025-08-28 15:43:27.164\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36mshutdown\u001b[0m:\u001b[36m752\u001b[0m | \u001b[1mWebSocket manager shutdown complete\u001b[0m\n2025-08-28T15:43:27.166136115Z \u001b[32m2025-08-28 15:43:27.164\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.shutdown\u001b[0m:\u001b[36mcleanup_resources\u001b[0m:\u001b[36m101\u001b[0m | \u001b[1mWebSocket manager shutdown completed\u001b[0m\n2025-08-28T15:43:27.169954441Z \u001b[32m2025-08-28 15:43:27.166\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.shutdown\u001b[0m:\u001b[36mrun_complete_shutdown\u001b[0m:\u001b[36m135\u001b[0m | \u001b[1mApplication shutdown complete.\u001b[0m\n2025-08-28T15:43:27.170342611Z \u001b[32m2025-08-28 15:43:27.167\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mApplication shutdown complete.\u001b[0m\n2025-08-28T15:43:27.171773900Z \u001b[32m2025-08-28 15:43:27.167\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mApplication shutdown complete.\u001b[0m\n2025-08-28T15:43:27.171884481Z \u001b[32m2025-08-28 15:43:27.168\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mFinished server process [1113]\u001b[0m\n2025-08-28T15:43:27.172019334Z \u001b[32m2025-08-28 15:43:27.168\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mFinished server process [1113]\u001b[0m\n2025-08-28T15:43:27.175429488Z \u001b[32m2025-08-28 15:43:27.174\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.utils.multiprocessing_cleanup\u001b[0m:\u001b[36mcleanup_all\u001b[0m:\u001b[36m90\u001b[0m | \u001b[1mMultiprocessing resources cleaned up\u001b[0m\n2025-08-28T15:43:29.285640110Z Critical environment variables already set - skipping .env loading\n2025-08-28T15:43:33.781559479Z \u001b[32m2025-08-28 15:43:33.780\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.configuration.database\u001b[0m:\u001b[36m_get_postgres_url\u001b[0m:\u001b[36m184\u001b[0m | \u001b[1mUsing PostgreSQL URL from development configuration\u001b[0m\n2025-08-28T15:43:33.794889790Z \u001b[32m2025-08-28 15:43:33.793\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[33m\u001b[1mGoogle Cloud Secret Manager not available: cannot import name 'secretmanager' from 'google.cloud' (unknown location)\u001b[0m\n2025-08-28T15:43:33.794980960Z \u001b[32m2025-08-28 15:43:33.794\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.configuration.database\u001b[0m:\u001b[36m_populate_redis_config\u001b[0m:\u001b[36m138\u001b[0m | \u001b[1mRedis Configuration (development/URL/No SSL): redis://redis:6379/0, Pool: 10, DB: 0\u001b[0m\n2025-08-28T15:43:33.799466773Z \u001b[32m2025-08-28 15:43:33.797\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.configuration.secrets\u001b[0m:\u001b[36mpopulate_secrets\u001b[0m:\u001b[36m198\u001b[0m | \u001b[1mPopulated secrets for development\u001b[0m\n2025-08-28T15:43:37.145835446Z \u001b[32m2025-08-28 15:43:37.143\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mCORS Configuration for development:\u001b[0m\n2025-08-28T15:43:37.145915062Z \u001b[32m2025-08-28 15:43:37.144\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m  Origins count: 41\u001b[0m\n2025-08-28T15:43:37.145922204Z \u001b[32m2025-08-28 15:43:37.144\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m  Allow credentials: True\u001b[0m\n2025-08-28T15:43:37.145925502Z \u001b[32m2025-08-28 15:43:37.144\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m  First 3 origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:3002']\u001b[0m\n2025-08-28T15:43:37.145932402Z \u001b[32m2025-08-28 15:43:37.145\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mCORS middleware configured for environment: development\u001b[0m\n2025-08-28T15:43:37.210505266Z \u001b[32m2025-08-28 15:43:37.209\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mAuthentication middleware configured with WebSocket exclusions\u001b[0m\n2025-08-28T15:43:37.210555508Z \u001b[32m2025-08-28 15:43:37.210\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mSession middleware config: same_site=lax, https_only=False, environment=development\u001b[0m\n2025-08-28T15:43:41.071500981Z \u001b[32m2025-08-28 15:43:41.070\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.state_persistence_optimized\u001b[0m:\u001b[36m__init__\u001b[0m:\u001b[36m52\u001b[0m | \u001b[1mOptimized state persistence service initialized\u001b[0m\n2025-08-28T15:43:43.316731460Z \u001b[32m2025-08-28 15:43:43.312\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.health.telemetry\u001b[0m:\u001b[36mregister_service\u001b[0m:\u001b[36m340\u001b[0m | \u001b[1mRegistered telemetry for service: netra-ai-platform\u001b[0m\n2025-08-28T15:43:43.933865685Z \u001b[32m2025-08-28 15:43:43.926\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.fallback_response.response_generator\u001b[0m:\u001b[36m__init__\u001b[0m:\u001b[36m30\u001b[0m | \u001b[1mResponse Generator initialized\u001b[0m\n2025-08-28T15:43:43.934202163Z \u001b[32m2025-08-28 15:43:43.928\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.quality_gate.quality_gate_core\u001b[0m:\u001b[36m__init__\u001b[0m:\u001b[36m38\u001b[0m | \u001b[1mQuality Gate Service initialized\u001b[0m\n2025-08-28T15:43:43.934254014Z \u001b[32m2025-08-28 15:43:43.928\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.quality_monitoring.service\u001b[0m:\u001b[36m__init__\u001b[0m:\u001b[36m51\u001b[0m | \u001b[1mQuality Monitoring Service initialized\u001b[0m\n2025-08-28T15:43:43.934263718Z \u001b[32m2025-08-28 15:43:43.928\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.fallback_response.response_generator\u001b[0m:\u001b[36m__init__\u001b[0m:\u001b[36m30\u001b[0m | \u001b[1mResponse Generator initialized\u001b[0m\n2025-08-28T15:43:48.369570441Z \u001b[32m2025-08-28 15:43:48.368\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mStarted server process [1160]\u001b[0m\n2025-08-28T15:43:48.369608922Z \u001b[32m2025-08-28 15:43:48.368\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mStarted server process [1160]\u001b[0m\n2025-08-28T15:43:48.369611235Z \u001b[32m2025-08-28 15:43:48.368\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mWaiting for application startup.\u001b[0m\n2025-08-28T15:43:48.369613056Z \u001b[32m2025-08-28 15:43:48.369\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mWaiting for application startup.\u001b[0m\n2025-08-28T15:43:48.394359091Z \u001b[32m2025-08-28 15:43:48.393\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.fastapi_auth_middleware\u001b[0m:\u001b[36m_get_jwt_secret_with_validation\u001b[0m:\u001b[36m677\u001b[0m | \u001b[1mJWT secret configured: 32 characters\u001b[0m\n2025-08-28T15:43:48.394392777Z \u001b[32m2025-08-28 15:43:48.393\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.fastapi_auth_middleware\u001b[0m:\u001b[36m__init__\u001b[0m:\u001b[36m76\u001b[0m | \u001b[1mFastAPIAuthMiddleware initialized with 12 excluded paths\u001b[0m\n2025-08-28T15:43:48.394394948Z \u001b[32m2025-08-28 15:43:48.393\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_headers_middleware\u001b[0m:\u001b[36m_log_initialization\u001b[0m:\u001b[36m43\u001b[0m | \u001b[1mSecurity headers middleware initialized for development environment\u001b[0m\n2025-08-28T15:43:48.394396268Z \u001b[32m2025-08-28 15:43:48.393\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36m__init__\u001b[0m:\u001b[36m36\u001b[0m | \u001b[1mSecurityResponseMiddleware initialized\u001b[0m\n2025-08-28T15:43:48.394397429Z \u001b[32m2025-08-28 15:43:48.393\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mCORSFixMiddleware initialized with 41 origins for development\u001b[0m\n2025-08-28T15:43:48.394398719Z \u001b[32m2025-08-28 15:43:48.393\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36mrun_complete_startup\u001b[0m:\u001b[36m941\u001b[0m | \u001b[1mUsing robust startup manager with dependency resolution...\u001b[0m\n2025-08-28T15:43:48.394447784Z \u001b[32m2025-08-28 15:43:48.394\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36mrun_complete_startup\u001b[0m:\u001b[36m951\u001b[0m | \u001b[1mStartup in progress flags set - health endpoint will report startup in progress\u001b[0m\n2025-08-28T15:43:48.438302662Z \u001b[32m2025-08-28 15:43:48.436\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36mrun_complete_startup\u001b[0m:\u001b[36m983\u001b[0m | \u001b[31m\u001b[1mError in robust startup: cannot access local variable 'logger' where it is not associated with a value\u001b[0m\n2025-08-28T15:43:48.438336005Z \u001b[32m2025-08-28 15:43:48.436\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36mrun_complete_startup\u001b[0m:\u001b[36m989\u001b[0m | \u001b[33m\u001b[1mFalling back to legacy startup sequence...\u001b[0m\n2025-08-28T15:43:48.438338013Z \u001b[32m2025-08-28 15:43:48.436\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36minitialize_logging\u001b[0m:\u001b[36m251\u001b[0m | \u001b[1mApplication startup...\u001b[0m\n2025-08-28T15:43:48.438339413Z \u001b[32m2025-08-28 15:43:48.437\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.utils.multiprocessing_cleanup\u001b[0m:\u001b[36msetup_multiprocessing\u001b[0m:\u001b[36m108\u001b[0m | \u001b[1mMultiprocessing configured with method: forkserver\u001b[0m\n2025-08-28T15:43:48.438349981Z \u001b[32m2025-08-28 15:43:48.437\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.database_env_service\u001b[0m:\u001b[36mvalidate_database_environment\u001b[0m:\u001b[36m49\u001b[0m | \u001b[1mDatabase environment validation passed for development\u001b[0m\n2025-08-28T15:43:48.438547835Z \u001b[32m2025-08-28 15:43:48.437\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_check_and_run_migrations\u001b[0m:\u001b[36m354\u001b[0m | \u001b[1mChecking database migrations...\u001b[0m\n2025-08-28T15:43:48.452500352Z \u001b[32m2025-08-28 15:43:48.449\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mContext impl PostgresqlImpl.\u001b[0m\n2025-08-28T15:43:48.452533789Z \u001b[32m2025-08-28 15:43:48.449\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mWill assume transactional DDL.\u001b[0m\n2025-08-28T15:43:48.455912006Z \u001b[32m2025-08-28 15:43:48.455\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_perform_migration\u001b[0m:\u001b[36m364\u001b[0m | \u001b[1mCurrent revision: add_deleted_at_001\u001b[0m\n2025-08-28T15:43:49.038390238Z \u001b[32m2025-08-28 15:43:49.037\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.db.migration_utils\u001b[0m:\u001b[36mlog_migration_status\u001b[0m:\u001b[36m199\u001b[0m | \u001b[1mDatabase is up to date\u001b[0m\n2025-08-28T15:43:49.040514471Z \u001b[32m2025-08-28 15:43:49.037\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_legacy_startup\u001b[0m:\u001b[36m1007\u001b[0m | \u001b[1mLegacy startup in progress flags set\u001b[0m\n2025-08-28T15:43:49.042136866Z \u001b[32m2025-08-28 15:43:49.037\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36msetup_database_connections\u001b[0m:\u001b[36m430\u001b[0m | \u001b[1mSetting up database connections...\u001b[0m\n2025-08-28T15:43:49.042160821Z \u001b[32m2025-08-28 15:43:49.038\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.db.postgres_core\u001b[0m:\u001b[36minitialize_postgres\u001b[0m:\u001b[36m578\u001b[0m | \u001b[1mInitializing async engine and session factory...\u001b[0m\n2025-08-28T15:43:49.042162826Z \u001b[32m2025-08-28 15:43:49.039\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.db.postgres_core\u001b[0m:\u001b[36m_create_and_setup_engine\u001b[0m:\u001b[36m514\u001b[0m | \u001b[1mPostgreSQL async engine created with resilient AsyncAdaptedQueuePool connection pooling\u001b[0m\n2025-08-28T15:43:49.042164285Z \u001b[32m2025-08-28 15:43:49.040\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_ensure_database_tables_exist\u001b[0m:\u001b[36m56\u001b[0m | \u001b[1mImporting database models to register tables...\u001b[0m\n2025-08-28T15:43:49.042165772Z \u001b[32m2025-08-28 15:43:49.040\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_ensure_database_tables_exist\u001b[0m:\u001b[36m59\u001b[0m | \u001b[1mChecking if database tables exist...\u001b[0m\n2025-08-28T15:43:49.055995344Z \u001b[32m2025-08-28 15:43:49.055\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_ensure_database_tables_exist\u001b[0m:\u001b[36m114\u001b[0m | \u001b[1mAll 26 database tables are present\u001b[0m\n2025-08-28T15:43:49.061089494Z \u001b[32m2025-08-28 15:43:49.058\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36msetup_database_connections\u001b[0m:\u001b[36m474\u001b[0m | \u001b[1mDatabase session factory successfully set on app.state\u001b[0m\n2025-08-28T15:43:49.061117951Z \u001b[32m2025-08-28 15:43:49.058\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36minitialize_core_services\u001b[0m:\u001b[36m509\u001b[0m | \u001b[1mLoading key manager...\u001b[0m\n2025-08-28T15:43:49.061119986Z \u001b[32m2025-08-28 15:43:49.058\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36minitialize_core_services\u001b[0m:\u001b[36m511\u001b[0m | \u001b[1mKey manager loaded.\u001b[0m\n2025-08-28T15:43:49.061121296Z \u001b[32m2025-08-28 15:43:49.059\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36minitialize_clickhouse\u001b[0m:\u001b[36m544\u001b[0m | \u001b[1mSkipping ClickHouse initialization in development environment (optional service - may not be available)\u001b[0m\n2025-08-28T15:43:49.061182609Z \u001b[32m2025-08-28 15:43:49.059\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_startup_phase_two\u001b[0m:\u001b[36m889\u001b[0m | \u001b[1mInitializing background task manager with 2-minute timeout...\u001b[0m\n2025-08-28T15:43:49.061190798Z \u001b[32m2025-08-28 15:43:49.059\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_startup_phase_two\u001b[0m:\u001b[36m891\u001b[0m | \u001b[1mBackground task manager initialized successfully\u001b[0m\n2025-08-28T15:43:49.061202823Z \u001b[32m2025-08-28 15:43:49.059\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_startup_phase_two\u001b[0m:\u001b[36m894\u001b[0m | \u001b[1mApplying startup fixes for critical cold start issues...\u001b[0m\n2025-08-28T15:43:49.061204393Z \u001b[32m2025-08-28 15:43:49.059\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mRunning comprehensive startup fixes verification...\u001b[0m\n2025-08-28T15:43:49.061205759Z \u001b[32m2025-08-28 15:43:49.059\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mApplied Redis mode default with fallback capability\u001b[0m\n2025-08-28T15:43:49.061278892Z \u001b[32m2025-08-28 15:43:49.059\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mService discovery disabled for microservice independence\u001b[0m\n2025-08-28T15:43:49.061286330Z \u001b[32m2025-08-28 15:43:49.059\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mDynamic port allocation is configured\u001b[0m\n2025-08-28T15:43:49.061287970Z \u001b[32m2025-08-28 15:43:49.059\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mBackground task timeout properly configured: 120s\u001b[0m\n2025-08-28T15:43:49.061289148Z \u001b[32m2025-08-28 15:43:49.060\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mRedis local fallback is configured\u001b[0m\n2025-08-28T15:43:49.061290334Z \u001b[32m2025-08-28 15:43:49.060\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mDatabase transaction rollback fix is available\u001b[0m\n2025-08-28T15:43:49.061291472Z \u001b[32m2025-08-28 15:43:49.060\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mStartup fixes verification complete: 4/5 fixes applied\u001b[0m\n2025-08-28T15:43:49.061346641Z \u001b[32m2025-08-28 15:43:49.060\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_startup_phase_two\u001b[0m:\u001b[36m898\u001b[0m | \u001b[1mStartup fixes applied: 4/5 fixes\u001b[0m\n2025-08-28T15:43:49.061348428Z \u001b[32m2025-08-28 15:43:49.060\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_startup_phase_two\u001b[0m:\u001b[36m901\u001b[0m | \u001b[33m\u001b[1mSome startup fixes could not be applied - check system configuration\u001b[0m\n2025-08-28T15:43:49.061350209Z \u001b[32m2025-08-28 15:43:49.060\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_startup_phase_two\u001b[0m:\u001b[36m902\u001b[0m | \u001b[1mStartup Fixes Status: 4/5 applied\n2025-08-28T15:43:49.061351518Z \n2025-08-28T15:43:49.061352383Z \u2705 Applied fixes:\n2025-08-28T15:43:49.061353593Z   \u2022 Environment variable mapping (CLICKHOUSE_PASSWORD)\n2025-08-28T15:43:49.061354559Z   \u2022 Background task timeout (2-minute limit)\n2025-08-28T15:43:49.061355404Z   \u2022 Database transaction rollback handling\n2025-08-28T15:43:49.061362762Z   \u2022 Redis local fallback capability\n2025-08-28T15:43:49.061363704Z \n2025-08-28T15:43:49.061364519Z \u274c Missing fixes:\n2025-08-28T15:43:49.061365363Z   \u2022 Service port conflict resolution\u001b[0m\n2025-08-28T15:43:49.061366354Z \u001b[32m2025-08-28 15:43:49.060\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36mstartup_health_checks\u001b[0m:\u001b[36m738\u001b[0m | \u001b[1mStarting comprehensive startup health checks...\u001b[0m\n2025-08-28T15:43:49.247586250Z \u001b[32m2025-08-28 15:43:49.245\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m58\u001b[0m | \u001b[1mPreparing to run 10 startup checks:\u001b[0m\n2025-08-28T15:43:49.247610705Z \u001b[32m2025-08-28 15:43:49.246\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  1. check_environment_variables\u001b[0m\n2025-08-28T15:43:49.247612590Z \u001b[32m2025-08-28 15:43:49.246\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  2. check_configuration\u001b[0m\n2025-08-28T15:43:49.247613992Z \u001b[32m2025-08-28 15:43:49.246\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  3. check_file_permissions\u001b[0m\n2025-08-28T15:43:49.247618100Z \u001b[32m2025-08-28 15:43:49.246\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  4. check_database_connection\u001b[0m\n2025-08-28T15:43:49.247619388Z \u001b[32m2025-08-28 15:43:49.246\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  5. check_redis\u001b[0m\n2025-08-28T15:43:49.247703446Z \u001b[32m2025-08-28 15:43:49.246\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  6. check_clickhouse\u001b[0m\n2025-08-28T15:43:49.247713419Z \u001b[32m2025-08-28 15:43:49.246\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  7. check_llm_providers\u001b[0m\n2025-08-28T15:43:49.247715011Z \u001b[32m2025-08-28 15:43:49.246\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  8. check_memory_and_resources\u001b[0m\n2025-08-28T15:43:49.247718363Z \u001b[32m2025-08-28 15:43:49.246\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  9. check_network_connectivity\u001b[0m\n2025-08-28T15:43:49.247919600Z \u001b[32m2025-08-28 15:43:49.246\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  10. check_or_create_assistant\u001b[0m\n2025-08-28T15:43:49.248021291Z \u001b[32m2025-08-28 15:43:49.247\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_environment_variables\u001b[0m\n2025-08-28T15:43:49.248031168Z \u001b[32m2025-08-28 15:43:49.247\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_configuration\u001b[0m\n2025-08-28T15:43:49.248039732Z \u001b[32m2025-08-28 15:43:49.247\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_file_permissions\u001b[0m\n2025-08-28T15:43:49.255201552Z \u001b[32m2025-08-28 15:43:49.254\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_database_connection\u001b[0m\n2025-08-28T15:43:49.276907057Z \u001b[32m2025-08-28 15:43:49.276\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_redis\u001b[0m\n2025-08-28T15:43:49.278234797Z \u001b[32m2025-08-28 15:43:49.277\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.redis_manager\u001b[0m:\u001b[36m_test_redis_connection\u001b[0m:\u001b[36m114\u001b[0m | \u001b[1mRedis connected successfully\u001b[0m\n2025-08-28T15:43:49.280959372Z \u001b[32m2025-08-28 15:43:49.279\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_clickhouse\u001b[0m\n2025-08-28T15:43:49.283339460Z \u001b[32m2025-08-28 15:43:49.280\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.db.clickhouse\u001b[0m:\u001b[36m_create_mock_client\u001b[0m:\u001b[36m132\u001b[0m | \u001b[1m[ClickHouse] Using MOCK client for development\u001b[0m\n2025-08-28T15:43:49.283371253Z \u001b[32m2025-08-28 15:43:49.280\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.service_checks\u001b[0m:\u001b[36m_log_clickhouse_warning_if_needed\u001b[0m:\u001b[36m242\u001b[0m | \u001b[33m\u001b[1mClickHouse not available - analytics features limited\u001b[0m\n2025-08-28T15:43:49.283375683Z \u001b[32m2025-08-28 15:43:49.280\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_llm_providers\u001b[0m\n2025-08-28T15:43:49.283585388Z \u001b[32m2025-08-28 15:43:49.281\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.service_checks\u001b[0m:\u001b[36m_handle_llm_test_failure\u001b[0m:\u001b[36m197\u001b[0m | \u001b[1mLLM 'default' failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:43:49.283772192Z \u001b[32m2025-08-28 15:43:49.281\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.service_checks\u001b[0m:\u001b[36m_handle_llm_test_failure\u001b[0m:\u001b[36m197\u001b[0m | \u001b[1mLLM 'analysis' failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:43:49.284199815Z \u001b[32m2025-08-28 15:43:49.281\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.service_checks\u001b[0m:\u001b[36m_handle_llm_test_failure\u001b[0m:\u001b[36m197\u001b[0m | \u001b[1mLLM 'triage' failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:43:49.284242726Z \u001b[32m2025-08-28 15:43:49.282\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.service_checks\u001b[0m:\u001b[36m_handle_llm_test_failure\u001b[0m:\u001b[36m197\u001b[0m | \u001b[1mLLM 'data' failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:43:49.284250474Z \u001b[32m2025-08-28 15:43:49.282\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.service_checks\u001b[0m:\u001b[36m_handle_llm_test_failure\u001b[0m:\u001b[36m197\u001b[0m | \u001b[1mLLM 'optimizations_core' failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:43:49.284254105Z \u001b[32m2025-08-28 15:43:49.282\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.service_checks\u001b[0m:\u001b[36m_handle_llm_test_failure\u001b[0m:\u001b[36m197\u001b[0m | \u001b[1mLLM 'actions_to_meet_goals' failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:43:49.284256564Z \u001b[32m2025-08-28 15:43:49.282\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.service_checks\u001b[0m:\u001b[36m_handle_llm_test_failure\u001b[0m:\u001b[36m197\u001b[0m | \u001b[1mLLM 'reporting' failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:43:49.284258912Z \u001b[32m2025-08-28 15:43:49.282\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_memory_and_resources\u001b[0m\n2025-08-28T15:43:49.284264139Z \u001b[32m2025-08-28 15:43:49.283\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_network_connectivity\u001b[0m\n2025-08-28T15:43:49.285276721Z \u001b[32m2025-08-28 15:43:49.284\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_or_create_assistant\u001b[0m\n2025-08-28T15:43:49.285434402Z /usr/local/lib/python3.11/contextlib.py:210: DeprecationWarning: postgres_session.get_async_db() is deprecated. Use 'from netra_backend.app.database import get_db' instead.\n2025-08-28T15:43:49.285443454Z   return await anext(self.gen)\n2025-08-28T15:43:49.353116347Z \u001b[32m2025-08-28 15:43:49.350\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m140\u001b[0m | \u001b[1m=== STARTUP CHECKS SUMMARY ===\u001b[0m\n2025-08-28T15:43:49.353500780Z \u001b[32m2025-08-28 15:43:49.350\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m141\u001b[0m | \u001b[1mTotal checks: 10\u001b[0m\n2025-08-28T15:43:49.353518347Z \u001b[32m2025-08-28 15:43:49.350\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m142\u001b[0m | \u001b[1mPassed: 8\u001b[0m\n2025-08-28T15:43:49.353625444Z \u001b[32m2025-08-28 15:43:49.350\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m143\u001b[0m | \u001b[1mFailed (critical): 0\u001b[0m\n2025-08-28T15:43:49.353632842Z \u001b[32m2025-08-28 15:43:49.350\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m144\u001b[0m | \u001b[1mFailed (non-critical): 2\u001b[0m\n2025-08-28T15:43:49.353745445Z \u001b[32m2025-08-28 15:43:49.350\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m145\u001b[0m | \u001b[1mTotal duration: 104.66ms\u001b[0m\n2025-08-28T15:43:49.353812545Z \u001b[32m2025-08-28 15:43:49.351\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  PASS: environment_variables (0.05ms) - Development mode - using default configs (Optional missing: GOOGLE_CLIENT_ID, GOOGLE_CLIENT_SECRET)\u001b[0m\n2025-08-28T15:43:49.353815963Z \u001b[32m2025-08-28 15:43:49.351\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  PASS: configuration (0.02ms) - Configuration valid for development environment\u001b[0m\n2025-08-28T15:43:49.353879268Z \u001b[32m2025-08-28 15:43:49.351\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  PASS: file_permissions (7.01ms) - All required directories are accessible\u001b[0m\n2025-08-28T15:43:49.353894935Z \u001b[32m2025-08-28 15:43:49.351\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  PASS: database_connection (21.46ms) - PostgreSQL connected and schema valid\u001b[0m\n2025-08-28T15:43:49.353901104Z \u001b[32m2025-08-28 15:43:49.351\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  PASS: redis_connection (3.53ms) - Redis connected and operational\u001b[0m\n2025-08-28T15:43:49.353903006Z \u001b[32m2025-08-28 15:43:49.351\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  FAIL-WARN: clickhouse_connection (0.61ms) - ClickHouse check failed: Missing ClickHouse tables: ['workload_events']\u001b[0m\n2025-08-28T15:43:49.353967822Z \u001b[32m2025-08-28 15:43:49.351\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  FAIL-WARN: llm_providers (2.27ms) - No LLM providers available\u001b[0m\n2025-08-28T15:43:49.354469068Z \u001b[32m2025-08-28 15:43:49.351\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  PASS: system_resources (0.68ms) - Resources OK: 27.3GB RAM, 876.2GB disk, 20 CPUs\u001b[0m\n2025-08-28T15:43:49.354674119Z \u001b[32m2025-08-28 15:43:49.351\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  PASS: network_connectivity (0.94ms) - All network endpoints reachable\u001b[0m\n2025-08-28T15:43:49.354697185Z \u001b[32m2025-08-28 15:43:49.351\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  PASS: netra_assistant (65.33ms) - Netra assistant already exists\u001b[0m\n2025-08-28T15:43:49.354807720Z \u001b[32m2025-08-28 15:43:49.352\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.utils\u001b[0m:\u001b[36m_log_startup_results\u001b[0m:\u001b[36m32\u001b[0m | \u001b[1mStartup checks completed in 105ms\u001b[0m\n2025-08-28T15:43:49.354810895Z \u001b[32m2025-08-28 15:43:49.352\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.utils\u001b[0m:\u001b[36m_log_startup_results\u001b[0m:\u001b[36m33\u001b[0m | \u001b[1mResults: 8/10 passed\u001b[0m\n2025-08-28T15:43:49.354850569Z \u001b[32m2025-08-28 15:43:49.352\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.utils\u001b[0m:\u001b[36m_log_non_critical_failures\u001b[0m:\u001b[36m48\u001b[0m | \u001b[33m\u001b[1mNon-critical startup checks failed:\u001b[0m\n2025-08-28T15:43:49.355133924Z \u001b[32m2025-08-28 15:43:49.352\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.utils\u001b[0m:\u001b[36m_log_non_critical_failures\u001b[0m:\u001b[36m51\u001b[0m | \u001b[33m\u001b[1m  - clickhouse_connection: ClickHouse check failed: Missing ClickHouse tables: ['workload_events']\u001b[0m\n2025-08-28T15:43:49.356769145Z \u001b[32m2025-08-28 15:43:49.352\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.utils\u001b[0m:\u001b[36m_log_non_critical_failures\u001b[0m:\u001b[36m51\u001b[0m | \u001b[33m\u001b[1m  - llm_providers: No LLM providers available\u001b[0m\n2025-08-28T15:43:49.356904162Z \u001b[32m2025-08-28 15:43:49.352\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36mstartup_health_checks\u001b[0m:\u001b[36m749\u001b[0m | \u001b[1mStartup checks completed: 8/10 passed\u001b[0m\n2025-08-28T15:43:49.356913100Z \u001b[32m2025-08-28 15:43:49.352\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36mstartup_health_checks\u001b[0m:\u001b[36m754\u001b[0m | \u001b[33m\u001b[1mSome startup checks failed (2), but continuing in graceful mode\u001b[0m\n2025-08-28T15:43:49.390126954Z \u001b[32m2025-08-28 15:43:49.389\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.services.schema_validation_service\u001b[0m:\u001b[36m_log_missing_columns\u001b[0m:\u001b[36m107\u001b[0m | \u001b[31m\u001b[1mMissing columns in table research_sessions: ['error_message', 'completed_at']\u001b[0m\n2025-08-28T15:43:49.390171466Z \u001b[32m2025-08-28 15:43:49.389\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.services.schema_validation_service\u001b[0m:\u001b[36m_log_warnings\u001b[0m:\u001b[36m113\u001b[0m | \u001b[33m\u001b[1mExtra tables in database not defined in models: {'auth_audit_logs', 'password_reset_tokens', 'alembic_version', 'auth_users', 'userbase', 'auth_sessions'}\u001b[0m\n2025-08-28T15:43:49.390622883Z \u001b[32m2025-08-28 15:43:49.390\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.services.schema_validation_service\u001b[0m:\u001b[36mrun_comprehensive_validation\u001b[0m:\u001b[36m234\u001b[0m | \u001b[31m\u001b[1mSchema validation failed: {'passed': False, 'missing_tables': [], 'missing_columns': {'research_sessions': ['error_message', 'completed_at']}, 'type_mismatches': {}, 'warnings': [\"Extra tables in database not defined in models: {'auth_audit_logs', 'password_reset_tokens', 'alembic_version', 'auth_users', 'userbase', 'auth_sessions'}\"]}\u001b[0m\n2025-08-28T15:43:49.390653997Z \u001b[32m2025-08-28 15:43:49.390\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_handle_schema_validation_result\u001b[0m:\u001b[36m824\u001b[0m | \u001b[31m\u001b[1mSchema validation failed. The application might not work as expected.\u001b[0m\n2025-08-28T15:43:49.407845885Z \u001b[32m2025-08-28 15:43:49.407\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36minitialize_websocket_components\u001b[0m:\u001b[36m718\u001b[0m | \u001b[1mWebSocket components initialized\u001b[0m\n2025-08-28T15:43:50.716235497Z \u001b[32m2025-08-28 15:43:50.714\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: triage\u001b[0m\n2025-08-28T15:43:50.718769702Z \u001b[32m2025-08-28 15:43:50.715\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: data\u001b[0m\n2025-08-28T15:43:50.718781148Z \u001b[32m2025-08-28 15:43:50.715\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: optimization\u001b[0m\n2025-08-28T15:43:50.718782881Z \u001b[32m2025-08-28 15:43:50.715\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: actions\u001b[0m\n2025-08-28T15:43:50.718784094Z \u001b[32m2025-08-28 15:43:50.715\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: reporting\u001b[0m\n2025-08-28T15:43:50.718785220Z \u001b[32m2025-08-28 15:43:50.716\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: synthetic_data\u001b[0m\n2025-08-28T15:43:50.718786588Z \u001b[32m2025-08-28 15:43:50.716\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: corpus_admin\u001b[0m\n2025-08-28T15:43:50.718787716Z \u001b[32m2025-08-28 15:43:50.716\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_create_agent_supervisor\u001b[0m:\u001b[36m656\u001b[0m | \u001b[1mAgent supervisor created successfully\u001b[0m\n2025-08-28T15:43:50.718813915Z \u001b[32m2025-08-28 15:43:50.716\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.database.health_checker\u001b[0m:\u001b[36mstart_monitoring\u001b[0m:\u001b[36m29\u001b[0m | \u001b[1mStarting database connection monitoring\u001b[0m\n2025-08-28T15:43:50.719013913Z \u001b[32m2025-08-28 15:43:50.716\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.base.monitoring\u001b[0m:\u001b[36mstart_monitoring\u001b[0m:\u001b[36m318\u001b[0m | \u001b[1mExecution monitoring started\u001b[0m\n2025-08-28T15:43:50.719313457Z \u001b[32m2025-08-28 15:43:50.716\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_create_monitoring_task\u001b[0m:\u001b[36m848\u001b[0m | \u001b[1mComprehensive monitoring started\u001b[0m\n2025-08-28T15:43:50.719331921Z \u001b[32m2025-08-28 15:43:50.717\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.performance_optimization_manager\u001b[0m:\u001b[36minitialize\u001b[0m:\u001b[36m43\u001b[0m | \u001b[1mPerformance optimization manager initialized\u001b[0m\n2025-08-28T15:43:50.719335450Z \u001b[32m2025-08-28 15:43:50.717\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mCreated background task 'database_index_optimization' (ID: 153401e8-07fd-438e-b905-6bddb7d419af) with 120s timeout\u001b[0m\n2025-08-28T15:43:50.719338560Z \u001b[32m2025-08-28 15:43:50.717\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_schedule_background_optimizations\u001b[0m:\u001b[36m224\u001b[0m | \u001b[1mDatabase index optimization scheduled as background task (ID: 153401e8-07fd-438e-b905-6bddb7d419af)\u001b[0m\n2025-08-28T15:43:50.719340841Z \u001b[32m2025-08-28 15:43:50.717\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_initialize_performance_optimizations\u001b[0m:\u001b[36m194\u001b[0m | \u001b[1mPerformance optimizations initialized successfully\u001b[0m\n2025-08-28T15:43:50.719342960Z \u001b[32m2025-08-28 15:43:50.717\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_legacy_startup\u001b[0m:\u001b[36m1016\u001b[0m | \u001b[1mLegacy startup completion flags set - health endpoint will report healthy\u001b[0m\n2025-08-28T15:43:50.719383834Z \u001b[32m2025-08-28 15:43:50.717\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36mlog_startup_complete\u001b[0m:\u001b[36m869\u001b[0m | \u001b[1mSystem Ready (Took 2.28s).\u001b[0m\n2025-08-28T15:43:50.720514991Z \u001b[32m2025-08-28 15:43:50.719\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mApplication startup complete.\u001b[0m\n2025-08-28T15:43:50.720534193Z \u001b[32m2025-08-28 15:43:50.720\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mApplication startup complete.\u001b[0m\n2025-08-28T15:43:50.724468510Z \u001b[32m2025-08-28 15:43:50.723\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m41\u001b[0m | \u001b[1mSecurityResponseMiddleware processing: /api/mcp/servers\u001b[0m\n2025-08-28T15:43:50.724858047Z /usr/local/lib/python3.11/site-packages/websockets/legacy/server.py:1178: DeprecationWarning: remove second argument of ws_handler\n2025-08-28T15:43:50.724877121Z   warnings.warn(\"remove second argument of ws_handler\", DeprecationWarning)\n2025-08-28T15:43:50.725541243Z \u001b[32m2025-08-28 15:43:50.725\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m41\u001b[0m | \u001b[1mSecurityResponseMiddleware processing: /api/mcp/tools\u001b[0m\n2025-08-28T15:43:50.726863057Z \u001b[32m2025-08-28 15:43:50.726\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m('172.18.0.1', 55140) - \"WebSocket /ws\" [accepted]\u001b[0m\n2025-08-28T15:43:50.726878841Z \u001b[32m2025-08-28 15:43:50.726\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m('172.18.0.1', 55140) - \"WebSocket /ws\" [accepted]\u001b[0m\n2025-08-28T15:43:50.726880618Z \u001b[32m2025-08-28 15:43:50.726\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36mwebsocket_endpoint\u001b[0m:\u001b[36m121\u001b[0m | \u001b[1mWebSocket accepted with subprotocol: jwt-auth\u001b[0m\n2025-08-28T15:43:50.746768167Z \u001b[32m2025-08-28 15:43:50.743\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.websocket_cors\u001b[0m:\u001b[36mget_websocket_cors_handler\u001b[0m:\u001b[36m566\u001b[0m | \u001b[1mWebSocket CORS: Detected environment from config: 'development'\u001b[0m\n2025-08-28T15:43:50.746791357Z \u001b[32m2025-08-28 15:43:50.743\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.websocket_cors\u001b[0m:\u001b[36mget_environment_origins_for_environment\u001b[0m:\u001b[36m441\u001b[0m | \u001b[1mWebSocket CORS configured for environment 'development' with 41 allowed origins\u001b[0m\n2025-08-28T15:43:50.746793242Z \u001b[32m2025-08-28 15:43:50.743\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.websocket_cors\u001b[0m:\u001b[36mget_environment_origins_for_environment\u001b[0m:\u001b[36m450\u001b[0m | \u001b[1mWebSocket CORS: Running in DEVELOPMENT mode with permissive origins\u001b[0m\n2025-08-28T15:43:50.746794505Z \u001b[32m2025-08-28 15:43:50.743\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.websocket_cors\u001b[0m:\u001b[36mget_websocket_cors_handler\u001b[0m:\u001b[36m583\u001b[0m | \u001b[1mWebSocket CORS: Creating handler for environment 'development' with 41 origins\u001b[0m\n2025-08-28T15:43:50.746795742Z \u001b[32m2025-08-28 15:43:50.745\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.websocket_cors\u001b[0m:\u001b[36mvalidate_websocket_origin\u001b[0m:\u001b[36m360\u001b[0m | \u001b[1mWebSocket connection allowed from origin: http://127.0.0.1:3000 in development environment\u001b[0m\n2025-08-28T15:43:50.746799073Z \u001b[32m2025-08-28 15:43:50.745\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mStarted trace span: websocket_jwt_validation (trace_id: 5af34d30d8fc426c9cc9a75a34ef16fc)\u001b[0m\n2025-08-28T15:43:50.746878318Z \u001b[32m2025-08-28 15:43:50.746\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mconnection open\u001b[0m\n2025-08-28T15:43:50.747142730Z \u001b[32m2025-08-28 15:43:50.746\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mconnection open\u001b[0m\n2025-08-28T15:43:50.757418529Z \u001b[32m2025-08-28 15:43:50.751\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m41\u001b[0m | \u001b[1mSecurityResponseMiddleware processing: /api/mcp/servers\u001b[0m\n2025-08-28T15:43:50.766705998Z \u001b[32m2025-08-28 15:43:50.752\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m41\u001b[0m | \u001b[1mSecurityResponseMiddleware processing: /api/mcp/tools\u001b[0m\n2025-08-28T15:43:50.771874612Z \u001b[32m2025-08-28 15:43:50.758\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: triage\u001b[0m\n2025-08-28T15:43:50.792256273Z \u001b[32m2025-08-28 15:43:50.758\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: data\u001b[0m\n2025-08-28T15:43:50.794175057Z \u001b[32m2025-08-28 15:43:50.758\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: optimization\u001b[0m\n2025-08-28T15:43:50.802129315Z \u001b[32m2025-08-28 15:43:50.759\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: actions\u001b[0m\n2025-08-28T15:43:50.802638214Z \u001b[32m2025-08-28 15:43:50.759\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: reporting\u001b[0m\n2025-08-28T15:43:50.818211594Z \u001b[32m2025-08-28 15:43:50.759\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: synthetic_data\u001b[0m\n2025-08-28T15:43:50.820409686Z \u001b[32m2025-08-28 15:43:50.759\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: corpus_admin\u001b[0m\n2025-08-28T15:43:50.825875458Z \u001b[32m2025-08-28 15:43:50.773\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: triage\u001b[0m\n2025-08-28T15:43:50.829377634Z \u001b[32m2025-08-28 15:43:50.774\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: data\u001b[0m\n2025-08-28T15:43:50.829409436Z \u001b[32m2025-08-28 15:43:50.774\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: optimization\u001b[0m\n2025-08-28T15:43:50.829413537Z \u001b[32m2025-08-28 15:43:50.774\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: actions\u001b[0m\n2025-08-28T15:43:50.829416179Z \u001b[32m2025-08-28 15:43:50.775\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: reporting\u001b[0m\n2025-08-28T15:43:50.829418521Z \u001b[32m2025-08-28 15:43:50.775\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: synthetic_data\u001b[0m\n2025-08-28T15:43:50.829435279Z \u001b[32m2025-08-28 15:43:50.775\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: corpus_admin\u001b[0m\n2025-08-28T15:43:50.829438236Z \u001b[32m2025-08-28 15:43:50.791\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.netra_mcp.modules.netra_mcp_core\u001b[0m:\u001b[36m_register_components\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mMCP Server components registered\u001b[0m\n2025-08-28T15:43:50.829440578Z \u001b[32m2025-08-28 15:43:50.791\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.netra_mcp.modules.netra_mcp_core\u001b[0m:\u001b[36mset_services\u001b[0m:\u001b[36m56\u001b[0m | \u001b[1mMCP Server services configured\u001b[0m\n2025-08-28T15:43:50.829442891Z \u001b[32m2025-08-28 15:43:50.791\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.mcp_service\u001b[0m:\u001b[36m_initialize_session_storage\u001b[0m:\u001b[36m106\u001b[0m | \u001b[1mMCP Service initialized with FastMCP 2\u001b[0m\n2025-08-28T15:43:50.829445682Z \u001b[32m2025-08-28 15:43:50.793\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.netra_mcp.modules.netra_mcp_core\u001b[0m:\u001b[36m_register_components\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mMCP Server components registered\u001b[0m\n2025-08-28T15:43:50.829448938Z \u001b[32m2025-08-28 15:43:50.793\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.netra_mcp.modules.netra_mcp_core\u001b[0m:\u001b[36mset_services\u001b[0m:\u001b[36m56\u001b[0m | \u001b[1mMCP Server services configured\u001b[0m\n2025-08-28T15:43:50.829458253Z \u001b[32m2025-08-28 15:43:50.793\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.mcp_service\u001b[0m:\u001b[36m_initialize_session_storage\u001b[0m:\u001b[36m106\u001b[0m | \u001b[1mMCP Service initialized with FastMCP 2\u001b[0m\n2025-08-28T15:43:50.829461300Z \u001b[32m2025-08-28 15:43:50.795\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: triage\u001b[0m\n2025-08-28T15:43:50.829463725Z \u001b[32m2025-08-28 15:43:50.795\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: data\u001b[0m\n2025-08-28T15:43:50.829469981Z \u001b[32m2025-08-28 15:43:50.795\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: optimization\u001b[0m\n2025-08-28T15:43:50.829584148Z \u001b[32m2025-08-28 15:43:50.795\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: actions\u001b[0m\n2025-08-28T15:43:50.829594501Z \u001b[32m2025-08-28 15:43:50.796\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: reporting\u001b[0m\n2025-08-28T15:43:50.829596403Z \u001b[32m2025-08-28 15:43:50.796\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: synthetic_data\u001b[0m\n2025-08-28T15:43:50.829606424Z \u001b[32m2025-08-28 15:43:50.796\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: corpus_admin\u001b[0m\n2025-08-28T15:43:50.829607758Z \u001b[32m2025-08-28 15:43:50.802\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: triage\u001b[0m\n2025-08-28T15:43:50.829608990Z \u001b[32m2025-08-28 15:43:50.803\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: data\u001b[0m\n2025-08-28T15:43:50.829610274Z \u001b[32m2025-08-28 15:43:50.803\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: optimization\u001b[0m\n2025-08-28T15:43:50.829615046Z \u001b[32m2025-08-28 15:43:50.803\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: actions\u001b[0m\n2025-08-28T15:43:50.829616377Z \u001b[32m2025-08-28 15:43:50.803\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: reporting\u001b[0m\n2025-08-28T15:43:50.829692323Z \u001b[32m2025-08-28 15:43:50.804\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: synthetic_data\u001b[0m\n2025-08-28T15:43:50.829697941Z \u001b[32m2025-08-28 15:43:50.804\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: corpus_admin\u001b[0m\n2025-08-28T15:43:50.829699396Z \u001b[32m2025-08-28 15:43:50.817\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.netra_mcp.modules.netra_mcp_core\u001b[0m:\u001b[36m_register_components\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mMCP Server components registered\u001b[0m\n2025-08-28T15:43:50.829700720Z \u001b[32m2025-08-28 15:43:50.817\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.netra_mcp.modules.netra_mcp_core\u001b[0m:\u001b[36mset_services\u001b[0m:\u001b[36m56\u001b[0m | \u001b[1mMCP Server services configured\u001b[0m\n2025-08-28T15:43:50.829702057Z \u001b[32m2025-08-28 15:43:50.817\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.mcp_service\u001b[0m:\u001b[36m_initialize_session_storage\u001b[0m:\u001b[36m106\u001b[0m | \u001b[1mMCP Service initialized with FastMCP 2\u001b[0m\n2025-08-28T15:43:50.829703518Z \u001b[32m2025-08-28 15:43:50.828\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.netra_mcp.modules.netra_mcp_core\u001b[0m:\u001b[36m_register_components\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mMCP Server components registered\u001b[0m\n2025-08-28T15:43:50.829704963Z \u001b[32m2025-08-28 15:43:50.828\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.netra_mcp.modules.netra_mcp_core\u001b[0m:\u001b[36mset_services\u001b[0m:\u001b[36m56\u001b[0m | \u001b[1mMCP Server services configured\u001b[0m\n2025-08-28T15:43:50.829716968Z \u001b[32m2025-08-28 15:43:50.828\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.mcp_service\u001b[0m:\u001b[36m_initialize_session_storage\u001b[0m:\u001b[36m106\u001b[0m | \u001b[1mMCP Service initialized with FastMCP 2\u001b[0m\n2025-08-28T15:43:50.833415254Z \u001b[32m2025-08-28 15:43:50.832\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mHTTP Request: POST http://auth:8081/auth/check-blacklist \"HTTP/1.1 200 OK\"\u001b[0m\n2025-08-28T15:43:50.841100331Z \u001b[32m2025-08-28 15:43:50.839\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mHTTP Request: POST http://auth:8081/auth/validate \"HTTP/1.1 200 OK\"\u001b[0m\n2025-08-28T15:43:50.842762180Z \u001b[32m2025-08-28 15:43:50.841\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mCompleted trace span: websocket_jwt_validation\u001b[0m\n2025-08-28T15:43:50.843989828Z \u001b[32m2025-08-28 15:43:50.842\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.auth\u001b[0m:\u001b[36mauthenticate_websocket\u001b[0m:\u001b[36m121\u001b[0m | \u001b[1mWebSocket authenticated: dev-temp-cc173c1d\u001b[0m\n2025-08-28T15:43:50.844011824Z \u001b[32m2025-08-28 15:43:50.842\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36mwebsocket_endpoint\u001b[0m:\u001b[36m154\u001b[0m | \u001b[1mWebSocket authenticated for user: dev-temp-cc173c1d at 2025-08-28T15:43:50.842175+00:00\u001b[0m\n2025-08-28T15:43:50.844014117Z \u001b[32m2025-08-28 15:43:50.842\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36mconnect_user\u001b[0m:\u001b[36m124\u001b[0m | \u001b[1mWebSocket connected: conn_dev-temp-cc173c1d_fd987ed8 for user dev-temp-cc173c1d\u001b[0m\n2025-08-28T15:43:50.844015701Z \u001b[32m2025-08-28 15:43:50.842\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36mwebsocket_endpoint\u001b[0m:\u001b[36m188\u001b[0m | \u001b[1mWebSocket ready: conn_dev-temp-cc173c1d_fd987ed8\u001b[0m\n2025-08-28T15:43:50.844122489Z \u001b[32m2025-08-28 15:43:50.842\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36mwebsocket_endpoint\u001b[0m:\u001b[36m191\u001b[0m | \u001b[1mStarting message handling loop for connection: conn_dev-temp-cc173c1d_fd987ed8\u001b[0m\n2025-08-28T15:43:50.848925185Z \u001b[32m2025-08-28 15:43:50.842\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36mwebsocket_endpoint\u001b[0m:\u001b[36m193\u001b[0m | \u001b[1mWebSocket state before loop - client_state: WebSocketState.CONNECTED, application_state: WebSocketState.CONNECTED\u001b[0m\n2025-08-28T15:43:50.848963898Z \u001b[32m2025-08-28 15:43:50.843\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36m_handle_websocket_messages\u001b[0m:\u001b[36m276\u001b[0m | \u001b[1mEntering message handling loop for connection: conn_dev-temp-cc173c1d_fd987ed8 (user: dev-temp-cc173c1d)\u001b[0m\n2025-08-28T15:43:50.848966139Z \u001b[32m2025-08-28 15:43:50.843\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36m_handle_websocket_messages\u001b[0m:\u001b[36m279\u001b[0m | \u001b[1mWebSocket state at loop entry - client_state: WebSocketState.CONNECTED, application_state: WebSocketState.CONNECTED\u001b[0m\n2025-08-28T15:43:50.849015874Z \u001b[32m2025-08-28 15:43:50.843\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36m_handle_websocket_messages\u001b[0m:\u001b[36m285\u001b[0m | \u001b[1mFirst loop iteration for conn_dev-temp-cc173c1d_fd987ed8, WebSocket is_connected returned True\u001b[0m\n2025-08-28T15:43:50.850190065Z \u001b[32m2025-08-28 15:43:50.844\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mHTTP Request: POST http://auth:8081/auth/check-blacklist \"HTTP/1.1 200 OK\"\u001b[0m\n2025-08-28T15:43:50.851733139Z \u001b[32m2025-08-28 15:43:50.845\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mHTTP Request: POST http://auth:8081/auth/check-blacklist \"HTTP/1.1 200 OK\"\u001b[0m\n2025-08-28T15:43:50.857376881Z \u001b[32m2025-08-28 15:43:50.848\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mHTTP Request: POST http://auth:8081/auth/check-blacklist \"HTTP/1.1 200 OK\"\u001b[0m\n2025-08-28T15:43:50.857410195Z \u001b[32m2025-08-28 15:43:50.850\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mHTTP Request: POST http://auth:8081/auth/check-blacklist \"HTTP/1.1 200 OK\"\u001b[0m\n2025-08-28T15:43:50.857412491Z \u001b[32m2025-08-28 15:43:50.853\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mHTTP Request: POST http://auth:8081/auth/validate \"HTTP/1.1 200 OK\"\u001b[0m\n2025-08-28T15:43:50.858881393Z \u001b[32m2025-08-28 15:43:50.855\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mHTTP Request: POST http://auth:8081/auth/validate \"HTTP/1.1 200 OK\"\u001b[0m\n2025-08-28T15:43:50.861137132Z \u001b[32m2025-08-28 15:43:50.860\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mHTTP Request: POST http://auth:8081/auth/validate \"HTTP/1.1 200 OK\"\u001b[0m\n2025-08-28T15:43:50.864214951Z \u001b[32m2025-08-28 15:43:50.863\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mHTTP Request: POST http://auth:8081/auth/validate \"HTTP/1.1 200 OK\"\u001b[0m\n2025-08-28T15:43:50.998153774Z \u001b[32m2025-08-28 15:43:50.994\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[33m\u001b[1mUsing dev user: dev@example.com\u001b[0m\n2025-08-28T15:43:51.140968786Z \u001b[32m2025-08-28 15:43:50.999\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[33m\u001b[1mUsing dev user: dev@example.com\u001b[0m\n2025-08-28T15:43:51.141620195Z \u001b[32m2025-08-28 15:43:51.001\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[33m\u001b[1mUsing dev user: dev@example.com\u001b[0m\n2025-08-28T15:43:51.145321152Z \u001b[32m2025-08-28 15:43:51.003\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[33m\u001b[1mUsing dev user: dev@example.com\u001b[0m\n2025-08-28T15:43:51.145979787Z \u001b[32m2025-08-28 15:43:51.005\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.request_context\u001b[0m:\u001b[36mlog_request_details\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mRequest: GET /api/mcp/tools | Status: 200 | Duration: 249.88ms | Trace: trace_5b3b561675814d87\u001b[0m\n2025-08-28T15:43:51.150585311Z \u001b[32m2025-08-28 15:43:51.009\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.request_context\u001b[0m:\u001b[36mlog_request_details\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mRequest: GET /api/mcp/tools | Status: 200 | Duration: 257.04ms | Trace: trace_74a1f28f055b4dad\u001b[0m\n2025-08-28T15:43:51.154925647Z \u001b[32m2025-08-28 15:43:51.010\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.request_context\u001b[0m:\u001b[36mlog_request_details\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mRequest: GET /api/mcp/servers | Status: 200 | Duration: 255.94ms | Trace: trace_65c176f4cfb34472\u001b[0m\n2025-08-28T15:43:51.154952270Z \u001b[32m2025-08-28 15:43:51.144\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.request_context\u001b[0m:\u001b[36mlog_request_details\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mRequest: GET /api/mcp/servers | Status: 200 | Duration: 398.16ms | Trace: trace_335493a2644e4c20\u001b[0m\n2025-08-28T15:43:51.154954367Z \u001b[32m2025-08-28 15:43:51.144\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m47\u001b[0m | \u001b[1mResponse for /api/mcp/tools: status=200, is_api=True, has_auth=False\u001b[0m\n2025-08-28T15:43:51.154955965Z \u001b[32m2025-08-28 15:43:51.146\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m172.18.0.7:55996 - \"GET /api/mcp/tools HTTP/1.1\" 200\u001b[0m\n2025-08-28T15:43:51.154957468Z \u001b[32m2025-08-28 15:43:51.146\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m47\u001b[0m | \u001b[1mResponse for /api/mcp/tools: status=200, is_api=True, has_auth=False\u001b[0m\n2025-08-28T15:43:51.154958909Z \u001b[32m2025-08-28 15:43:51.147\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m47\u001b[0m | \u001b[1mResponse for /api/mcp/servers: status=200, is_api=True, has_auth=False\u001b[0m\n2025-08-28T15:43:51.155062052Z \u001b[32m2025-08-28 15:43:51.148\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m47\u001b[0m | \u001b[1mResponse for /api/mcp/servers: status=200, is_api=True, has_auth=False\u001b[0m\n2025-08-28T15:43:51.155064269Z \u001b[32m2025-08-28 15:43:51.148\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m172.18.0.7:50540 - \"GET /api/mcp/tools HTTP/1.1\" 200\u001b[0m\n2025-08-28T15:43:51.158083880Z \u001b[32m2025-08-28 15:43:51.149\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m172.18.0.7:55980 - \"GET /api/mcp/servers HTTP/1.1\" 200\u001b[0m\n2025-08-28T15:43:51.159526370Z \u001b[32m2025-08-28 15:43:51.151\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m172.18.0.7:50538 - \"GET /api/mcp/servers HTTP/1.1\" 200\u001b[0m\n2025-08-28T15:43:53.154903838Z \u001b[32m2025-08-28 15:43:53.150\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m41\u001b[0m | \u001b[1mSecurityResponseMiddleware processing: /health\u001b[0m\n2025-08-28T15:43:53.154936010Z \u001b[32m2025-08-28 15:43:53.152\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.request_context\u001b[0m:\u001b[36mlog_request_details\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mRequest: GET /health | Status: 200 | Duration: 1.58ms | Trace: trace_232cf23287bb4a62\u001b[0m\n2025-08-28T15:43:53.154938026Z \u001b[32m2025-08-28 15:43:53.153\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m47\u001b[0m | \u001b[1mResponse for /health: status=200, is_api=False, has_auth=False\u001b[0m\n2025-08-28T15:43:53.154939404Z \u001b[32m2025-08-28 15:43:53.153\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m127.0.0.1:47330 - \"GET /health HTTP/1.1\" 200\u001b[0m\n2025-08-28T15:44:20.718154728Z \u001b[32m2025-08-28 15:44:20.716\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_index_optimization_background\u001b[0m:\u001b[36m232\u001b[0m | \u001b[1mStarting background database index optimization...\u001b[0m\n2025-08-28T15:44:20.718783498Z \u001b[32m2025-08-28 15:44:20.716\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.db.database_index_manager\u001b[0m:\u001b[36moptimize_all_databases\u001b[0m:\u001b[36m129\u001b[0m | \u001b[1mStarting database optimization across all databases\u001b[0m\n2025-08-28T15:44:20.718956326Z \u001b[32m2025-08-28 15:44:20.717\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.db.index_optimizer_core\u001b[0m:\u001b[36mlog_engine_unavailable\u001b[0m:\u001b[36m52\u001b[0m | \u001b[33m\u001b[1mAsync engine not available, skipping index creation\u001b[0m\n2025-08-28T15:44:20.718973095Z \u001b[32m2025-08-28 15:44:20.717\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.db.clickhouse\u001b[0m:\u001b[36m_create_mock_client\u001b[0m:\u001b[36m132\u001b[0m | \u001b[1m[ClickHouse] Using MOCK client for development\u001b[0m\n2025-08-28T15:44:20.719092916Z \u001b[32m2025-08-28 15:44:20.717\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.db.clickhouse\u001b[0m:\u001b[36m_create_mock_client\u001b[0m:\u001b[36m132\u001b[0m | \u001b[1m[ClickHouse] Using MOCK client for development\u001b[0m\n2025-08-28T15:44:20.719109361Z \u001b[32m2025-08-28 15:44:20.718\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.db.database_index_manager\u001b[0m:\u001b[36moptimize_all_databases\u001b[0m:\u001b[36m138\u001b[0m | \u001b[1mDatabase optimization completed - PostgreSQL: True, ClickHouse: True\u001b[0m\n2025-08-28T15:44:20.719119447Z \u001b[32m2025-08-28 15:44:20.718\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_index_optimization_background\u001b[0m:\u001b[36m239\u001b[0m | \u001b[1mBackground database optimization completed successfully: {'postgres': {'indexes_created': {}, 'recommendations': [{'table_name': 'userbase', 'columns': ['email'], 'index_type': 'btree', 'reason': 'Frequent user lookups by email', 'estimated_benefit': 0.0, 'priority': 1}, {'table_name': 'corpus_audit_logs', 'columns': ['timestamp'], 'index_type': 'btree', 'reason': 'Time-based audit queries', 'estimated_benefit': 0.0, 'priority': 1}, {'table_name': 'corpus_audit_logs', 'columns': ['user_id', 'action'], 'index_type': 'btree', 'reason': 'User action filtering', 'estimated_benefit': 0.0, 'priority': 2}, {'table_name': 'secret', 'columns': ['user_id'], 'index_type': 'btree', 'reason': 'User secret lookups', 'estimated_benefit': 0.0, 'priority': 2}, {'table_name': 'agent_states', 'columns': ['session_id'], 'index_type': 'btree', 'reason': 'Session-based state lookups', 'estimated_benefit': 0.0, 'priority': 2}], 'usage_stats': {}}, 'clickhouse': {'table_optimizations': {'netra_content_corpus': False, 'netra_audit_events': False, 'netra_performance_metrics': False, 'netra_agent_logs': False}, 'materialized_views': {'user_daily_activity': False, 'hourly_performance_metrics': False}}, 'recommendations': []}\u001b[0m\n2025-08-28T15:44:23.212206129Z \u001b[32m2025-08-28 15:44:23.206\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m41\u001b[0m | \u001b[1mSecurityResponseMiddleware processing: /health\u001b[0m\n2025-08-28T15:44:23.213077849Z \u001b[32m2025-08-28 15:44:23.209\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.request_context\u001b[0m:\u001b[36mlog_request_details\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mRequest: GET /health | Status: 200 | Duration: 1.78ms | Trace: trace_d4386c470bea4fbb\u001b[0m\n2025-08-28T15:44:23.213091188Z \u001b[32m2025-08-28 15:44:23.210\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m47\u001b[0m | \u001b[1mResponse for /health: status=200, is_api=False, has_auth=False\u001b[0m\n2025-08-28T15:44:23.213147312Z \u001b[32m2025-08-28 15:44:23.211\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m127.0.0.1:34106 - \"GET /health HTTP/1.1\" 200\u001b[0m\n2025-08-28T15:44:53.285592286Z \u001b[32m2025-08-28 15:44:53.280\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m41\u001b[0m | \u001b[1mSecurityResponseMiddleware processing: /health\u001b[0m\n2025-08-28T15:44:53.286671840Z \u001b[32m2025-08-28 15:44:53.283\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.request_context\u001b[0m:\u001b[36mlog_request_details\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mRequest: GET /health | Status: 200 | Duration: 1.38ms | Trace: trace_834dae41186b48a0\u001b[0m\n2025-08-28T15:44:53.286702198Z \u001b[32m2025-08-28 15:44:53.284\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m47\u001b[0m | \u001b[1mResponse for /health: status=200, is_api=False, has_auth=False\u001b[0m\n2025-08-28T15:44:53.286752513Z \u001b[32m2025-08-28 15:44:53.284\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m127.0.0.1:37948 - \"GET /health HTTP/1.1\" 200\u001b[0m\n2025-08-28T15:45:20.839211068Z \u001b[32m2025-08-28 15:45:20.838\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.utils\u001b[0m:\u001b[36m_heartbeat_loop\u001b[0m:\u001b[36m240\u001b[0m | \u001b[33m\u001b[1mWebSocket heartbeat timeout\u001b[0m\n2025-08-28T15:45:23.349858877Z \u001b[32m2025-08-28 15:45:23.346\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m41\u001b[0m | \u001b[1mSecurityResponseMiddleware processing: /health\u001b[0m\n2025-08-28T15:45:23.354400611Z \u001b[32m2025-08-28 15:45:23.350\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.request_context\u001b[0m:\u001b[36mlog_request_details\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mRequest: GET /health | Status: 200 | Duration: 3.04ms | Trace: trace_a25062c4037d40cf\u001b[0m\n2025-08-28T15:45:23.354438863Z \u001b[32m2025-08-28 15:45:23.351\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m47\u001b[0m | \u001b[1mResponse for /health: status=200, is_api=False, has_auth=False\u001b[0m\n2025-08-28T15:45:23.354444031Z \u001b[32m2025-08-28 15:45:23.352\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m127.0.0.1:37568 - \"GET /health HTTP/1.1\" 200\u001b[0m\n2025-08-28T15:45:53.421021128Z \u001b[32m2025-08-28 15:45:53.413\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m41\u001b[0m | \u001b[1mSecurityResponseMiddleware processing: /health\u001b[0m\n2025-08-28T15:45:53.421061721Z \u001b[32m2025-08-28 15:45:53.418\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.request_context\u001b[0m:\u001b[36mlog_request_details\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mRequest: GET /health | Status: 200 | Duration: 1.57ms | Trace: trace_530f54aa66ed46d4\u001b[0m\n2025-08-28T15:45:53.421359987Z \u001b[32m2025-08-28 15:45:53.419\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m47\u001b[0m | \u001b[1mResponse for /health: status=200, is_api=False, has_auth=False\u001b[0m\n2025-08-28T15:45:53.421451499Z \u001b[32m2025-08-28 15:45:53.419\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m127.0.0.1:43604 - \"GET /health HTTP/1.1\" 200\u001b[0m\n2025-08-28T15:46:23.472293735Z \u001b[32m2025-08-28 15:46:23.468\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m41\u001b[0m | \u001b[1mSecurityResponseMiddleware processing: /health\u001b[0m\n2025-08-28T15:46:23.474306802Z \u001b[32m2025-08-28 15:46:23.470\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.request_context\u001b[0m:\u001b[36mlog_request_details\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mRequest: GET /health | Status: 200 | Duration: 1.47ms | Trace: trace_1dfc0e700ef64fea\u001b[0m\n2025-08-28T15:46:23.474333082Z \u001b[32m2025-08-28 15:46:23.471\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m47\u001b[0m | \u001b[1mResponse for /health: status=200, is_api=False, has_auth=False\u001b[0m\n2025-08-28T15:46:23.474335349Z \u001b[32m2025-08-28 15:46:23.472\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m127.0.0.1:44934 - \"GET /health HTTP/1.1\" 200\u001b[0m\n2025-08-28T15:46:53.536501685Z \u001b[32m2025-08-28 15:46:53.530\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m41\u001b[0m | \u001b[1mSecurityResponseMiddleware processing: /health\u001b[0m\n2025-08-28T15:46:53.536633505Z \u001b[32m2025-08-28 15:46:53.533\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.request_context\u001b[0m:\u001b[36mlog_request_details\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mRequest: GET /health | Status: 200 | Duration: 1.29ms | Trace: trace_70e06cb3fc104390\u001b[0m\n2025-08-28T15:46:53.536657002Z \u001b[32m2025-08-28 15:46:53.533\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m47\u001b[0m | \u001b[1mResponse for /health: status=200, is_api=False, has_auth=False\u001b[0m\n2025-08-28T15:46:53.536661061Z \u001b[32m2025-08-28 15:46:53.534\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m127.0.0.1:60912 - \"GET /health HTTP/1.1\" 200\u001b[0m\n2025-08-28T15:47:23.601012766Z \u001b[32m2025-08-28 15:47:23.596\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m41\u001b[0m | \u001b[1mSecurityResponseMiddleware processing: /health\u001b[0m\n2025-08-28T15:47:23.601054642Z \u001b[32m2025-08-28 15:47:23.598\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.request_context\u001b[0m:\u001b[36mlog_request_details\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mRequest: GET /health | Status: 200 | Duration: 1.43ms | Trace: trace_81bc8f13301f4e1b\u001b[0m\n2025-08-28T15:47:23.601089156Z \u001b[32m2025-08-28 15:47:23.599\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m47\u001b[0m | \u001b[1mResponse for /health: status=200, is_api=False, has_auth=False\u001b[0m\n2025-08-28T15:47:23.601097042Z \u001b[32m2025-08-28 15:47:23.599\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m127.0.0.1:48646 - \"GET /health HTTP/1.1\" 200\u001b[0m\n2025-08-28T15:47:53.657699496Z \u001b[32m2025-08-28 15:47:53.651\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m41\u001b[0m | \u001b[1mSecurityResponseMiddleware processing: /health\u001b[0m\n2025-08-28T15:47:53.657733764Z \u001b[32m2025-08-28 15:47:53.654\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.request_context\u001b[0m:\u001b[36mlog_request_details\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mRequest: GET /health | Status: 200 | Duration: 1.41ms | Trace: trace_7937c53cdc824f15\u001b[0m\n2025-08-28T15:47:53.657739279Z \u001b[32m2025-08-28 15:47:53.655\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m47\u001b[0m | \u001b[1mResponse for /health: status=200, is_api=False, has_auth=False\u001b[0m\n2025-08-28T15:47:53.657743356Z \u001b[32m2025-08-28 15:47:53.655\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m127.0.0.1:55734 - \"GET /health HTTP/1.1\" 200\u001b[0m\n2025-08-28T15:48:23.709023475Z \u001b[32m2025-08-28 15:48:23.702\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m41\u001b[0m | \u001b[1mSecurityResponseMiddleware processing: /health\u001b[0m\n2025-08-28T15:48:23.709305156Z \u001b[32m2025-08-28 15:48:23.705\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.request_context\u001b[0m:\u001b[36mlog_request_details\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mRequest: GET /health | Status: 200 | Duration: 2.12ms | Trace: trace_9b79c98fc80243ef\u001b[0m\n2025-08-28T15:48:23.709796748Z \u001b[32m2025-08-28 15:48:23.706\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m47\u001b[0m | \u001b[1mResponse for /health: status=200, is_api=False, has_auth=False\u001b[0m\n2025-08-28T15:48:23.709880526Z \u001b[32m2025-08-28 15:48:23.707\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m127.0.0.1:40406 - \"GET /health HTTP/1.1\" 200\u001b[0m\n2025-08-28T15:48:36.317363335Z WARNING:  WatchFiles detected changes in 'scripts/docker_log_remediation_loop.py'. Reloading...\n2025-08-28T15:48:36.328010345Z \u001b[32m2025-08-28 15:48:36.325\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mShutting down\u001b[0m\n2025-08-28T15:48:36.328050438Z \u001b[32m2025-08-28 15:48:36.325\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mShutting down\u001b[0m\n2025-08-28T15:48:36.328130999Z \u001b[32m2025-08-28 15:48:36.326\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mconnection closed\u001b[0m\n2025-08-28T15:48:36.328147567Z \u001b[32m2025-08-28 15:48:36.326\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mconnection closed\u001b[0m\n2025-08-28T15:48:36.328151814Z \u001b[32m2025-08-28 15:48:36.326\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36m_handle_websocket_messages\u001b[0m:\u001b[36m362\u001b[0m | \u001b[1mWebSocket disconnect: {'connection_id': 'conn_dev-temp-cc173c1d_fd987ed8', 'user_id': 'dev-temp-cc173c1d', 'disconnect_code': 1012, 'disconnect_reason': 'No reason provided', 'connection_duration': 'Unknown'}\u001b[0m\n2025-08-28T15:48:36.328167340Z \u001b[32m2025-08-28 15:48:36.326\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36m_handle_websocket_messages\u001b[0m:\u001b[36m383\u001b[0m | \u001b[1mExiting message handling loop for connection: conn_dev-temp-cc173c1d_fd987ed8 | Duration: 285.5s | Messages processed: 9 | Errors: 0 | User: dev-temp-cc173c1d\u001b[0m\n2025-08-28T15:48:36.328169595Z \u001b[32m2025-08-28 15:48:36.327\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36mwebsocket_endpoint\u001b[0m:\u001b[36m198\u001b[0m | \u001b[1mMessage handling loop ended for connection: conn_dev-temp-cc173c1d_fd987ed8\u001b[0m\n2025-08-28T15:48:36.328189033Z \u001b[32m2025-08-28 15:48:36.327\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.auth\u001b[0m:\u001b[36mcleanup\u001b[0m:\u001b[36m349\u001b[0m | \u001b[1mWebSocket authenticator cleanup completed\u001b[0m\n2025-08-28T15:48:36.328220231Z \u001b[32m2025-08-28 15:48:36.327\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36mdisconnect_user\u001b[0m:\u001b[36m135\u001b[0m | \u001b[1mWebSocket disconnected: conn_dev-temp-cc173c1d_fd987ed8 (1000: Normal closure)\u001b[0m\n2025-08-28T15:48:36.328224490Z \u001b[32m2025-08-28 15:48:36.327\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36mwebsocket_endpoint\u001b[0m:\u001b[36m255\u001b[0m | \u001b[1mWebSocket cleanup completed: conn_dev-temp-cc173c1d_fd987ed8\u001b[0m\n2025-08-28T15:48:36.427346423Z \u001b[32m2025-08-28 15:48:36.425\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mWaiting for application shutdown.\u001b[0m\n2025-08-28T15:48:36.427387621Z \u001b[32m2025-08-28 15:48:36.426\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mWaiting for application shutdown.\u001b[0m\n2025-08-28T15:48:36.427389864Z \u001b[32m2025-08-28 15:48:36.426\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.shutdown\u001b[0m:\u001b[36mshutdown_cleanup\u001b[0m:\u001b[36m20\u001b[0m | \u001b[1mApplication shutdown initiated...\u001b[0m\n2025-08-28T15:48:36.427391164Z \u001b[32m2025-08-28 15:48:36.426\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.utils.multiprocessing_cleanup\u001b[0m:\u001b[36mcleanup_all\u001b[0m:\u001b[36m90\u001b[0m | \u001b[1mMultiprocessing resources cleaned up\u001b[0m\n2025-08-28T15:48:36.427392358Z \u001b[32m2025-08-28 15:48:36.426\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.shutdown\u001b[0m:\u001b[36mrun_complete_shutdown\u001b[0m:\u001b[36m120\u001b[0m | \u001b[1mShutting down background task manager...\u001b[0m\n2025-08-28T15:48:36.427393527Z \u001b[32m2025-08-28 15:48:36.426\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mShutting down BackgroundTaskManager...\u001b[0m\n2025-08-28T15:48:36.427480617Z \u001b[32m2025-08-28 15:48:36.426\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mBackgroundTaskManager shutdown complete\u001b[0m\n2025-08-28T15:48:36.427520053Z \u001b[32m2025-08-28 15:48:36.426\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.shutdown\u001b[0m:\u001b[36mrun_complete_shutdown\u001b[0m:\u001b[36m122\u001b[0m | \u001b[1mBackground task manager shutdown complete\u001b[0m\n2025-08-28T15:48:36.427522322Z \u001b[32m2025-08-28 15:48:36.427\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.shutdown\u001b[0m:\u001b[36mstop_monitoring\u001b[0m:\u001b[36m48\u001b[0m | \u001b[31m\u001b[1mError stopping monitoring and optimizations: 'ExecutionMonitor' object has no attribute 'stop_monitoring'\u001b[0m\n2025-08-28T15:48:36.529040877Z \u001b[32m2025-08-28 15:48:36.527\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mShutting down BackgroundTaskManager...\u001b[0m\n2025-08-28T15:48:36.529066554Z \u001b[32m2025-08-28 15:48:36.527\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mBackgroundTaskManager shutdown complete\u001b[0m\n2025-08-28T15:48:36.529068734Z \u001b[32m2025-08-28 15:48:36.527\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.base_agent\u001b[0m:\u001b[36mshutdown\u001b[0m:\u001b[36m68\u001b[0m | \u001b[1mShutting down Supervisor\u001b[0m\n2025-08-28T15:48:36.529081188Z \u001b[32m2025-08-28 15:48:36.528\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36mshutdown\u001b[0m:\u001b[36m737\u001b[0m | \u001b[1mShutting down WebSocket manager with 0 connections\u001b[0m\n2025-08-28T15:48:36.529082442Z \u001b[32m2025-08-28 15:48:36.528\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36mshutdown\u001b[0m:\u001b[36m752\u001b[0m | \u001b[1mWebSocket manager shutdown complete\u001b[0m\n2025-08-28T15:48:36.529087070Z \u001b[32m2025-08-28 15:48:36.528\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.shutdown\u001b[0m:\u001b[36mcleanup_resources\u001b[0m:\u001b[36m101\u001b[0m | \u001b[1mWebSocket manager shutdown completed\u001b[0m\n2025-08-28T15:48:36.530329832Z \u001b[32m2025-08-28 15:48:36.529\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.shutdown\u001b[0m:\u001b[36mrun_complete_shutdown\u001b[0m:\u001b[36m135\u001b[0m | \u001b[1mApplication shutdown complete.\u001b[0m\n2025-08-28T15:48:36.530339604Z \u001b[32m2025-08-28 15:48:36.529\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mApplication shutdown complete.\u001b[0m\n2025-08-28T15:48:36.530436861Z \u001b[32m2025-08-28 15:48:36.529\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mApplication shutdown complete.\u001b[0m\n2025-08-28T15:48:36.530989739Z \u001b[32m2025-08-28 15:48:36.529\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mFinished server process [1160]\u001b[0m\n2025-08-28T15:48:36.531138116Z \u001b[32m2025-08-28 15:48:36.529\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mFinished server process [1160]\u001b[0m\n2025-08-28T15:48:36.532511435Z \u001b[32m2025-08-28 15:48:36.532\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.utils.multiprocessing_cleanup\u001b[0m:\u001b[36mcleanup_all\u001b[0m:\u001b[36m90\u001b[0m | \u001b[1mMultiprocessing resources cleaned up\u001b[0m\n2025-08-28T15:48:37.636318225Z Critical environment variables already set - skipping .env loading\n2025-08-28T15:48:41.126821911Z \u001b[32m2025-08-28 15:48:41.126\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.configuration.database\u001b[0m:\u001b[36m_get_postgres_url\u001b[0m:\u001b[36m184\u001b[0m | \u001b[1mUsing PostgreSQL URL from development configuration\u001b[0m\n2025-08-28T15:48:41.139186253Z \u001b[32m2025-08-28 15:48:41.137\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[33m\u001b[1mGoogle Cloud Secret Manager not available: cannot import name 'secretmanager' from 'google.cloud' (unknown location)\u001b[0m\n2025-08-28T15:48:41.139251517Z \u001b[32m2025-08-28 15:48:41.138\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.configuration.database\u001b[0m:\u001b[36m_populate_redis_config\u001b[0m:\u001b[36m138\u001b[0m | \u001b[1mRedis Configuration (development/URL/No SSL): redis://redis:6379/0, Pool: 10, DB: 0\u001b[0m\n2025-08-28T15:48:41.143590733Z \u001b[32m2025-08-28 15:48:41.141\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.configuration.secrets\u001b[0m:\u001b[36mpopulate_secrets\u001b[0m:\u001b[36m198\u001b[0m | \u001b[1mPopulated secrets for development\u001b[0m\n2025-08-28T15:48:44.969829786Z \u001b[32m2025-08-28 15:48:44.968\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mCORS Configuration for development:\u001b[0m\n2025-08-28T15:48:44.969894753Z \u001b[32m2025-08-28 15:48:44.969\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m  Origins count: 41\u001b[0m\n2025-08-28T15:48:44.969903147Z \u001b[32m2025-08-28 15:48:44.969\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m  Allow credentials: True\u001b[0m\n2025-08-28T15:48:44.969906575Z \u001b[32m2025-08-28 15:48:44.969\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m  First 3 origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:3002']\u001b[0m\n2025-08-28T15:48:44.969908997Z \u001b[32m2025-08-28 15:48:44.969\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mCORS middleware configured for environment: development\u001b[0m\n2025-08-28T15:48:45.018708600Z \u001b[32m2025-08-28 15:48:45.017\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mAuthentication middleware configured with WebSocket exclusions\u001b[0m\n2025-08-28T15:48:45.018747539Z \u001b[32m2025-08-28 15:48:45.018\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mSession middleware config: same_site=lax, https_only=False, environment=development\u001b[0m\n2025-08-28T15:48:48.730861752Z \u001b[32m2025-08-28 15:48:48.730\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.state_persistence_optimized\u001b[0m:\u001b[36m__init__\u001b[0m:\u001b[36m52\u001b[0m | \u001b[1mOptimized state persistence service initialized\u001b[0m\n2025-08-28T15:48:51.230819479Z \u001b[32m2025-08-28 15:48:51.226\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.health.telemetry\u001b[0m:\u001b[36mregister_service\u001b[0m:\u001b[36m340\u001b[0m | \u001b[1mRegistered telemetry for service: netra-ai-platform\u001b[0m\n2025-08-28T15:48:52.208228954Z \u001b[32m2025-08-28 15:48:52.200\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.fallback_response.response_generator\u001b[0m:\u001b[36m__init__\u001b[0m:\u001b[36m30\u001b[0m | \u001b[1mResponse Generator initialized\u001b[0m\n2025-08-28T15:48:52.208262111Z \u001b[32m2025-08-28 15:48:52.201\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.quality_gate.quality_gate_core\u001b[0m:\u001b[36m__init__\u001b[0m:\u001b[36m38\u001b[0m | \u001b[1mQuality Gate Service initialized\u001b[0m\n2025-08-28T15:48:52.208264481Z \u001b[32m2025-08-28 15:48:52.201\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.quality_monitoring.service\u001b[0m:\u001b[36m__init__\u001b[0m:\u001b[36m51\u001b[0m | \u001b[1mQuality Monitoring Service initialized\u001b[0m\n2025-08-28T15:48:52.208266324Z \u001b[32m2025-08-28 15:48:52.202\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.fallback_response.response_generator\u001b[0m:\u001b[36m__init__\u001b[0m:\u001b[36m30\u001b[0m | \u001b[1mResponse Generator initialized\u001b[0m\n2025-08-28T15:48:58.296363968Z \u001b[32m2025-08-28 15:48:58.295\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mStarted server process [1250]\u001b[0m\n2025-08-28T15:48:58.296402092Z \u001b[32m2025-08-28 15:48:58.295\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mStarted server process [1250]\u001b[0m\n2025-08-28T15:48:58.296404273Z \u001b[32m2025-08-28 15:48:58.295\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mWaiting for application startup.\u001b[0m\n2025-08-28T15:48:58.296405562Z \u001b[32m2025-08-28 15:48:58.295\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mWaiting for application startup.\u001b[0m\n2025-08-28T15:48:58.338538399Z \u001b[32m2025-08-28 15:48:58.336\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.fastapi_auth_middleware\u001b[0m:\u001b[36m_get_jwt_secret_with_validation\u001b[0m:\u001b[36m677\u001b[0m | \u001b[1mJWT secret configured: 32 characters\u001b[0m\n2025-08-28T15:48:58.338614968Z \u001b[32m2025-08-28 15:48:58.336\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.fastapi_auth_middleware\u001b[0m:\u001b[36m__init__\u001b[0m:\u001b[36m76\u001b[0m | \u001b[1mFastAPIAuthMiddleware initialized with 12 excluded paths\u001b[0m\n2025-08-28T15:48:58.338625458Z \u001b[32m2025-08-28 15:48:58.337\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_headers_middleware\u001b[0m:\u001b[36m_log_initialization\u001b[0m:\u001b[36m43\u001b[0m | \u001b[1mSecurity headers middleware initialized for development environment\u001b[0m\n2025-08-28T15:48:58.338629901Z \u001b[32m2025-08-28 15:48:58.337\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36m__init__\u001b[0m:\u001b[36m36\u001b[0m | \u001b[1mSecurityResponseMiddleware initialized\u001b[0m\n2025-08-28T15:48:58.338632826Z \u001b[32m2025-08-28 15:48:58.337\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mCORSFixMiddleware initialized with 41 origins for development\u001b[0m\n2025-08-28T15:48:58.338635672Z \u001b[32m2025-08-28 15:48:58.337\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36mrun_complete_startup\u001b[0m:\u001b[36m941\u001b[0m | \u001b[1mUsing robust startup manager with dependency resolution...\u001b[0m\n2025-08-28T15:48:58.338671272Z \u001b[32m2025-08-28 15:48:58.337\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36mrun_complete_startup\u001b[0m:\u001b[36m951\u001b[0m | \u001b[1mStartup in progress flags set - health endpoint will report startup in progress\u001b[0m\n2025-08-28T15:48:58.379203532Z \u001b[32m2025-08-28 15:48:58.377\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36mrun_complete_startup\u001b[0m:\u001b[36m983\u001b[0m | \u001b[31m\u001b[1mError in robust startup: cannot access local variable 'logger' where it is not associated with a value\u001b[0m\n2025-08-28T15:48:58.379249664Z \u001b[32m2025-08-28 15:48:58.377\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36mrun_complete_startup\u001b[0m:\u001b[36m989\u001b[0m | \u001b[33m\u001b[1mFalling back to legacy startup sequence...\u001b[0m\n2025-08-28T15:48:58.379251923Z \u001b[32m2025-08-28 15:48:58.377\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36minitialize_logging\u001b[0m:\u001b[36m251\u001b[0m | \u001b[1mApplication startup...\u001b[0m\n2025-08-28T15:48:58.379253272Z \u001b[32m2025-08-28 15:48:58.378\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.utils.multiprocessing_cleanup\u001b[0m:\u001b[36msetup_multiprocessing\u001b[0m:\u001b[36m108\u001b[0m | \u001b[1mMultiprocessing configured with method: forkserver\u001b[0m\n2025-08-28T15:48:58.379327822Z \u001b[32m2025-08-28 15:48:58.378\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.database_env_service\u001b[0m:\u001b[36mvalidate_database_environment\u001b[0m:\u001b[36m49\u001b[0m | \u001b[1mDatabase environment validation passed for development\u001b[0m\n2025-08-28T15:48:58.379719007Z \u001b[32m2025-08-28 15:48:58.378\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_check_and_run_migrations\u001b[0m:\u001b[36m354\u001b[0m | \u001b[1mChecking database migrations...\u001b[0m\n2025-08-28T15:48:58.393451143Z \u001b[32m2025-08-28 15:48:58.390\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mContext impl PostgresqlImpl.\u001b[0m\n2025-08-28T15:48:58.393488919Z \u001b[32m2025-08-28 15:48:58.391\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mWill assume transactional DDL.\u001b[0m\n2025-08-28T15:48:58.397429628Z \u001b[32m2025-08-28 15:48:58.396\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_perform_migration\u001b[0m:\u001b[36m364\u001b[0m | \u001b[1mCurrent revision: add_deleted_at_001\u001b[0m\n2025-08-28T15:48:59.111455020Z \u001b[32m2025-08-28 15:48:59.110\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.db.migration_utils\u001b[0m:\u001b[36mlog_migration_status\u001b[0m:\u001b[36m199\u001b[0m | \u001b[1mDatabase is up to date\u001b[0m\n2025-08-28T15:48:59.112786119Z \u001b[32m2025-08-28 15:48:59.110\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_legacy_startup\u001b[0m:\u001b[36m1007\u001b[0m | \u001b[1mLegacy startup in progress flags set\u001b[0m\n2025-08-28T15:48:59.113832073Z \u001b[32m2025-08-28 15:48:59.110\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36msetup_database_connections\u001b[0m:\u001b[36m430\u001b[0m | \u001b[1mSetting up database connections...\u001b[0m\n2025-08-28T15:48:59.113849941Z \u001b[32m2025-08-28 15:48:59.111\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.db.postgres_core\u001b[0m:\u001b[36minitialize_postgres\u001b[0m:\u001b[36m578\u001b[0m | \u001b[1mInitializing async engine and session factory...\u001b[0m\n2025-08-28T15:48:59.113851778Z \u001b[32m2025-08-28 15:48:59.112\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.db.postgres_core\u001b[0m:\u001b[36m_create_and_setup_engine\u001b[0m:\u001b[36m514\u001b[0m | \u001b[1mPostgreSQL async engine created with resilient AsyncAdaptedQueuePool connection pooling\u001b[0m\n2025-08-28T15:48:59.113863105Z \u001b[32m2025-08-28 15:48:59.112\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_ensure_database_tables_exist\u001b[0m:\u001b[36m56\u001b[0m | \u001b[1mImporting database models to register tables...\u001b[0m\n2025-08-28T15:48:59.113878628Z \u001b[32m2025-08-28 15:48:59.112\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_ensure_database_tables_exist\u001b[0m:\u001b[36m59\u001b[0m | \u001b[1mChecking if database tables exist...\u001b[0m\n2025-08-28T15:48:59.126351544Z \u001b[32m2025-08-28 15:48:59.125\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_ensure_database_tables_exist\u001b[0m:\u001b[36m114\u001b[0m | \u001b[1mAll 26 database tables are present\u001b[0m\n2025-08-28T15:48:59.130783687Z \u001b[32m2025-08-28 15:48:59.128\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36msetup_database_connections\u001b[0m:\u001b[36m474\u001b[0m | \u001b[1mDatabase session factory successfully set on app.state\u001b[0m\n2025-08-28T15:48:59.130804190Z \u001b[32m2025-08-28 15:48:59.128\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36minitialize_core_services\u001b[0m:\u001b[36m509\u001b[0m | \u001b[1mLoading key manager...\u001b[0m\n2025-08-28T15:48:59.130806269Z \u001b[32m2025-08-28 15:48:59.128\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36minitialize_core_services\u001b[0m:\u001b[36m511\u001b[0m | \u001b[1mKey manager loaded.\u001b[0m\n2025-08-28T15:48:59.130807544Z \u001b[32m2025-08-28 15:48:59.128\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36minitialize_clickhouse\u001b[0m:\u001b[36m544\u001b[0m | \u001b[1mSkipping ClickHouse initialization in development environment (optional service - may not be available)\u001b[0m\n2025-08-28T15:48:59.130808796Z \u001b[32m2025-08-28 15:48:59.129\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_startup_phase_two\u001b[0m:\u001b[36m889\u001b[0m | \u001b[1mInitializing background task manager with 2-minute timeout...\u001b[0m\n2025-08-28T15:48:59.130809919Z \u001b[32m2025-08-28 15:48:59.129\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_startup_phase_two\u001b[0m:\u001b[36m891\u001b[0m | \u001b[1mBackground task manager initialized successfully\u001b[0m\n2025-08-28T15:48:59.130859934Z \u001b[32m2025-08-28 15:48:59.129\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_startup_phase_two\u001b[0m:\u001b[36m894\u001b[0m | \u001b[1mApplying startup fixes for critical cold start issues...\u001b[0m\n2025-08-28T15:48:59.130867738Z \u001b[32m2025-08-28 15:48:59.129\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mRunning comprehensive startup fixes verification...\u001b[0m\n2025-08-28T15:48:59.130869325Z \u001b[32m2025-08-28 15:48:59.129\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mApplied Redis mode default with fallback capability\u001b[0m\n2025-08-28T15:48:59.130872932Z \u001b[32m2025-08-28 15:48:59.129\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mService discovery disabled for microservice independence\u001b[0m\n2025-08-28T15:48:59.130923999Z \u001b[32m2025-08-28 15:48:59.129\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mDynamic port allocation is configured\u001b[0m\n2025-08-28T15:48:59.130941509Z \u001b[32m2025-08-28 15:48:59.129\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mBackground task timeout properly configured: 120s\u001b[0m\n2025-08-28T15:48:59.130999360Z \u001b[32m2025-08-28 15:48:59.130\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mRedis local fallback is configured\u001b[0m\n2025-08-28T15:48:59.131002442Z \u001b[32m2025-08-28 15:48:59.130\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mDatabase transaction rollback fix is available\u001b[0m\n2025-08-28T15:48:59.131020148Z \u001b[32m2025-08-28 15:48:59.130\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mStartup fixes verification complete: 4/5 fixes applied\u001b[0m\n2025-08-28T15:48:59.131026390Z \u001b[32m2025-08-28 15:48:59.130\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_startup_phase_two\u001b[0m:\u001b[36m898\u001b[0m | \u001b[1mStartup fixes applied: 4/5 fixes\u001b[0m\n2025-08-28T15:48:59.131045268Z \u001b[32m2025-08-28 15:48:59.130\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_startup_phase_two\u001b[0m:\u001b[36m901\u001b[0m | \u001b[33m\u001b[1mSome startup fixes could not be applied - check system configuration\u001b[0m\n2025-08-28T15:48:59.131094633Z \u001b[32m2025-08-28 15:48:59.130\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_startup_phase_two\u001b[0m:\u001b[36m902\u001b[0m | \u001b[1mStartup Fixes Status: 4/5 applied\n2025-08-28T15:48:59.131098146Z \n2025-08-28T15:48:59.131099597Z \u2705 Applied fixes:\n2025-08-28T15:48:59.131101474Z   \u2022 Background task timeout (2-minute limit)\n2025-08-28T15:48:59.131102674Z   \u2022 Redis local fallback capability\n2025-08-28T15:48:59.131103874Z   \u2022 Environment variable mapping (CLICKHOUSE_PASSWORD)\n2025-08-28T15:48:59.131115085Z   \u2022 Database transaction rollback handling\n2025-08-28T15:48:59.131116027Z \n2025-08-28T15:48:59.131116806Z \u274c Missing fixes:\n2025-08-28T15:48:59.131117714Z   \u2022 Service port conflict resolution\u001b[0m\n2025-08-28T15:48:59.131118664Z \u001b[32m2025-08-28 15:48:59.130\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36mstartup_health_checks\u001b[0m:\u001b[36m738\u001b[0m | \u001b[1mStarting comprehensive startup health checks...\u001b[0m\n2025-08-28T15:48:59.389092740Z \u001b[32m2025-08-28 15:48:59.387\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m58\u001b[0m | \u001b[1mPreparing to run 10 startup checks:\u001b[0m\n2025-08-28T15:48:59.389166608Z \u001b[32m2025-08-28 15:48:59.387\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  1. check_environment_variables\u001b[0m\n2025-08-28T15:48:59.389176149Z \u001b[32m2025-08-28 15:48:59.387\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  2. check_configuration\u001b[0m\n2025-08-28T15:48:59.389179899Z \u001b[32m2025-08-28 15:48:59.387\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  3. check_file_permissions\u001b[0m\n2025-08-28T15:48:59.389182281Z \u001b[32m2025-08-28 15:48:59.387\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  4. check_database_connection\u001b[0m\n2025-08-28T15:48:59.389184883Z \u001b[32m2025-08-28 15:48:59.387\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  5. check_redis\u001b[0m\n2025-08-28T15:48:59.389187169Z \u001b[32m2025-08-28 15:48:59.387\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  6. check_clickhouse\u001b[0m\n2025-08-28T15:48:59.389189484Z \u001b[32m2025-08-28 15:48:59.387\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  7. check_llm_providers\u001b[0m\n2025-08-28T15:48:59.389191837Z \u001b[32m2025-08-28 15:48:59.388\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  8. check_memory_and_resources\u001b[0m\n2025-08-28T15:48:59.389273033Z \u001b[32m2025-08-28 15:48:59.388\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  9. check_network_connectivity\u001b[0m\n2025-08-28T15:48:59.389282852Z \u001b[32m2025-08-28 15:48:59.388\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  10. check_or_create_assistant\u001b[0m\n2025-08-28T15:48:59.389284797Z \u001b[32m2025-08-28 15:48:59.388\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_environment_variables\u001b[0m\n2025-08-28T15:48:59.389286394Z \u001b[32m2025-08-28 15:48:59.388\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_configuration\u001b[0m\n2025-08-28T15:48:59.389287748Z \u001b[32m2025-08-28 15:48:59.388\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_file_permissions\u001b[0m\n2025-08-28T15:48:59.395210582Z \u001b[32m2025-08-28 15:48:59.394\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_database_connection\u001b[0m\n2025-08-28T15:48:59.411326530Z \u001b[32m2025-08-28 15:48:59.410\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_redis\u001b[0m\n2025-08-28T15:48:59.413011700Z \u001b[32m2025-08-28 15:48:59.412\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.redis_manager\u001b[0m:\u001b[36m_test_redis_connection\u001b[0m:\u001b[36m114\u001b[0m | \u001b[1mRedis connected successfully\u001b[0m\n2025-08-28T15:48:59.416616535Z \u001b[32m2025-08-28 15:48:59.414\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_clickhouse\u001b[0m\n2025-08-28T15:48:59.417480867Z \u001b[32m2025-08-28 15:48:59.415\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.db.clickhouse\u001b[0m:\u001b[36m_create_mock_client\u001b[0m:\u001b[36m132\u001b[0m | \u001b[1m[ClickHouse] Using MOCK client for development\u001b[0m\n2025-08-28T15:48:59.418017876Z \u001b[32m2025-08-28 15:48:59.415\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.service_checks\u001b[0m:\u001b[36m_log_clickhouse_warning_if_needed\u001b[0m:\u001b[36m242\u001b[0m | \u001b[33m\u001b[1mClickHouse not available - analytics features limited\u001b[0m\n2025-08-28T15:48:59.418027212Z \u001b[32m2025-08-28 15:48:59.415\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_llm_providers\u001b[0m\n2025-08-28T15:48:59.418028886Z \u001b[32m2025-08-28 15:48:59.415\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.service_checks\u001b[0m:\u001b[36m_handle_llm_test_failure\u001b[0m:\u001b[36m197\u001b[0m | \u001b[1mLLM 'default' failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:48:59.418030382Z \u001b[32m2025-08-28 15:48:59.416\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.service_checks\u001b[0m:\u001b[36m_handle_llm_test_failure\u001b[0m:\u001b[36m197\u001b[0m | \u001b[1mLLM 'analysis' failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:48:59.418032143Z \u001b[32m2025-08-28 15:48:59.416\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.service_checks\u001b[0m:\u001b[36m_handle_llm_test_failure\u001b[0m:\u001b[36m197\u001b[0m | \u001b[1mLLM 'triage' failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:48:59.418034135Z \u001b[32m2025-08-28 15:48:59.416\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.service_checks\u001b[0m:\u001b[36m_handle_llm_test_failure\u001b[0m:\u001b[36m197\u001b[0m | \u001b[1mLLM 'data' failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:48:59.418035948Z \u001b[32m2025-08-28 15:48:59.416\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.service_checks\u001b[0m:\u001b[36m_handle_llm_test_failure\u001b[0m:\u001b[36m197\u001b[0m | \u001b[1mLLM 'optimizations_core' failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:48:59.418118173Z \u001b[32m2025-08-28 15:48:59.417\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.service_checks\u001b[0m:\u001b[36m_handle_llm_test_failure\u001b[0m:\u001b[36m197\u001b[0m | \u001b[1mLLM 'actions_to_meet_goals' failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:48:59.418273398Z \u001b[32m2025-08-28 15:48:59.417\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.service_checks\u001b[0m:\u001b[36m_handle_llm_test_failure\u001b[0m:\u001b[36m197\u001b[0m | \u001b[1mLLM 'reporting' failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:48:59.418686067Z \u001b[32m2025-08-28 15:48:59.417\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_memory_and_resources\u001b[0m\n2025-08-28T15:48:59.418799993Z \u001b[32m2025-08-28 15:48:59.418\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_network_connectivity\u001b[0m\n2025-08-28T15:48:59.420016023Z \u001b[32m2025-08-28 15:48:59.419\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_or_create_assistant\u001b[0m\n2025-08-28T15:48:59.420336552Z /usr/local/lib/python3.11/contextlib.py:210: DeprecationWarning: postgres_session.get_async_db() is deprecated. Use 'from netra_backend.app.database import get_db' instead.\n2025-08-28T15:48:59.420349283Z   return await anext(self.gen)\n2025-08-28T15:48:59.475978596Z WARNING:  WatchFiles detected changes in 'scripts/docker_log_remediation_loop.py'. Reloading...\n2025-08-28T15:48:59.482438125Z \u001b[32m2025-08-28 15:48:59.479\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m140\u001b[0m | \u001b[1m=== STARTUP CHECKS SUMMARY ===\u001b[0m\n2025-08-28T15:48:59.482840005Z \u001b[32m2025-08-28 15:48:59.479\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m141\u001b[0m | \u001b[1mTotal checks: 10\u001b[0m\n2025-08-28T15:48:59.482852475Z \u001b[32m2025-08-28 15:48:59.479\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m142\u001b[0m | \u001b[1mPassed: 8\u001b[0m\n2025-08-28T15:48:59.482876638Z \u001b[32m2025-08-28 15:48:59.479\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m143\u001b[0m | \u001b[1mFailed (critical): 0\u001b[0m\n2025-08-28T15:48:59.482885584Z \u001b[32m2025-08-28 15:48:59.479\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m144\u001b[0m | \u001b[1mFailed (non-critical): 2\u001b[0m\n2025-08-28T15:48:59.483742473Z \u001b[32m2025-08-28 15:48:59.480\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m145\u001b[0m | \u001b[1mTotal duration: 92.26ms\u001b[0m\n2025-08-28T15:48:59.483873246Z \u001b[32m2025-08-28 15:48:59.480\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  PASS: environment_variables (0.05ms) - Development mode - using default configs (Optional missing: GOOGLE_CLIENT_ID, GOOGLE_CLIENT_SECRET)\u001b[0m\n2025-08-28T15:48:59.484450470Z \u001b[32m2025-08-28 15:48:59.480\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  PASS: configuration (0.02ms) - Configuration valid for development environment\u001b[0m\n2025-08-28T15:48:59.484932857Z \u001b[32m2025-08-28 15:48:59.480\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  PASS: file_permissions (5.51ms) - All required directories are accessible\u001b[0m\n2025-08-28T15:48:59.485176713Z \u001b[32m2025-08-28 15:48:59.480\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  PASS: database_connection (16.01ms) - PostgreSQL connected and schema valid\u001b[0m\n2025-08-28T15:48:59.485191399Z \u001b[32m2025-08-28 15:48:59.480\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  PASS: redis_connection (3.88ms) - Redis connected and operational\u001b[0m\n2025-08-28T15:48:59.485683239Z \u001b[32m2025-08-28 15:48:59.480\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  FAIL-WARN: clickhouse_connection (0.64ms) - ClickHouse check failed: Missing ClickHouse tables: ['workload_events']\u001b[0m\n2025-08-28T15:48:59.487437021Z \u001b[32m2025-08-28 15:48:59.480\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  FAIL-WARN: llm_providers (2.12ms) - No LLM providers available\u001b[0m\n2025-08-28T15:48:59.487483818Z \u001b[32m2025-08-28 15:48:59.480\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  PASS: system_resources (0.56ms) - Resources OK: 27.4GB RAM, 876.2GB disk, 20 CPUs\u001b[0m\n2025-08-28T15:48:59.487492278Z \u001b[32m2025-08-28 15:48:59.480\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  PASS: network_connectivity (1.12ms) - All network endpoints reachable\u001b[0m\n2025-08-28T15:48:59.487684432Z \u001b[32m2025-08-28 15:48:59.480\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  PASS: netra_assistant (59.58ms) - Netra assistant already exists\u001b[0m\n2025-08-28T15:48:59.487693331Z \u001b[32m2025-08-28 15:48:59.481\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.utils\u001b[0m:\u001b[36m_log_startup_results\u001b[0m:\u001b[36m32\u001b[0m | \u001b[1mStartup checks completed in 92ms\u001b[0m\n2025-08-28T15:48:59.487706207Z \u001b[32m2025-08-28 15:48:59.481\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.utils\u001b[0m:\u001b[36m_log_startup_results\u001b[0m:\u001b[36m33\u001b[0m | \u001b[1mResults: 8/10 passed\u001b[0m\n2025-08-28T15:48:59.487707760Z \u001b[32m2025-08-28 15:48:59.481\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.utils\u001b[0m:\u001b[36m_log_non_critical_failures\u001b[0m:\u001b[36m48\u001b[0m | \u001b[33m\u001b[1mNon-critical startup checks failed:\u001b[0m\n2025-08-28T15:48:59.487709794Z \u001b[32m2025-08-28 15:48:59.481\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.utils\u001b[0m:\u001b[36m_log_non_critical_failures\u001b[0m:\u001b[36m51\u001b[0m | \u001b[33m\u001b[1m  - clickhouse_connection: ClickHouse check failed: Missing ClickHouse tables: ['workload_events']\u001b[0m\n2025-08-28T15:48:59.487711399Z \u001b[32m2025-08-28 15:48:59.481\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.utils\u001b[0m:\u001b[36m_log_non_critical_failures\u001b[0m:\u001b[36m51\u001b[0m | \u001b[33m\u001b[1m  - llm_providers: No LLM providers available\u001b[0m\n2025-08-28T15:48:59.487722649Z \u001b[32m2025-08-28 15:48:59.481\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36mstartup_health_checks\u001b[0m:\u001b[36m749\u001b[0m | \u001b[1mStartup checks completed: 8/10 passed\u001b[0m\n2025-08-28T15:48:59.487726456Z \u001b[32m2025-08-28 15:48:59.481\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36mstartup_health_checks\u001b[0m:\u001b[36m754\u001b[0m | \u001b[33m\u001b[1mSome startup checks failed (2), but continuing in graceful mode\u001b[0m\n2025-08-28T15:48:59.524252141Z \u001b[32m2025-08-28 15:48:59.523\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.services.schema_validation_service\u001b[0m:\u001b[36m_log_missing_columns\u001b[0m:\u001b[36m107\u001b[0m | \u001b[31m\u001b[1mMissing columns in table research_sessions: ['completed_at', 'error_message']\u001b[0m\n2025-08-28T15:48:59.524291783Z \u001b[32m2025-08-28 15:48:59.523\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.services.schema_validation_service\u001b[0m:\u001b[36m_log_warnings\u001b[0m:\u001b[36m113\u001b[0m | \u001b[33m\u001b[1mExtra tables in database not defined in models: {'userbase', 'auth_users', 'alembic_version', 'auth_audit_logs', 'password_reset_tokens', 'auth_sessions'}\u001b[0m\n2025-08-28T15:48:59.525007584Z \u001b[32m2025-08-28 15:48:59.524\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.services.schema_validation_service\u001b[0m:\u001b[36mrun_comprehensive_validation\u001b[0m:\u001b[36m234\u001b[0m | \u001b[31m\u001b[1mSchema validation failed: {'passed': False, 'missing_tables': [], 'missing_columns': {'research_sessions': ['completed_at', 'error_message']}, 'type_mismatches': {}, 'warnings': [\"Extra tables in database not defined in models: {'userbase', 'auth_users', 'alembic_version', 'auth_audit_logs', 'password_reset_tokens', 'auth_sessions'}\"]}\u001b[0m\n2025-08-28T15:48:59.525027111Z \u001b[32m2025-08-28 15:48:59.524\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_handle_schema_validation_result\u001b[0m:\u001b[36m824\u001b[0m | \u001b[31m\u001b[1mSchema validation failed. The application might not work as expected.\u001b[0m\n2025-08-28T15:48:59.544491464Z \u001b[32m2025-08-28 15:48:59.543\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36minitialize_websocket_components\u001b[0m:\u001b[36m718\u001b[0m | \u001b[1mWebSocket components initialized\u001b[0m\n2025-08-28T15:49:00.583618114Z \u001b[32m2025-08-28 15:49:00.579\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: triage\u001b[0m\n2025-08-28T15:49:00.583654811Z \u001b[32m2025-08-28 15:49:00.580\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: data\u001b[0m\n2025-08-28T15:49:00.583656711Z \u001b[32m2025-08-28 15:49:00.580\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: optimization\u001b[0m\n2025-08-28T15:49:00.583657914Z \u001b[32m2025-08-28 15:49:00.580\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: actions\u001b[0m\n2025-08-28T15:49:00.583658997Z \u001b[32m2025-08-28 15:49:00.580\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: reporting\u001b[0m\n2025-08-28T15:49:00.583660106Z \u001b[32m2025-08-28 15:49:00.580\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: synthetic_data\u001b[0m\n2025-08-28T15:49:00.583661159Z \u001b[32m2025-08-28 15:49:00.581\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: corpus_admin\u001b[0m\n2025-08-28T15:49:00.583662188Z \u001b[32m2025-08-28 15:49:00.581\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_create_agent_supervisor\u001b[0m:\u001b[36m656\u001b[0m | \u001b[1mAgent supervisor created successfully\u001b[0m\n2025-08-28T15:49:00.583663350Z \u001b[32m2025-08-28 15:49:00.581\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.database.health_checker\u001b[0m:\u001b[36mstart_monitoring\u001b[0m:\u001b[36m29\u001b[0m | \u001b[1mStarting database connection monitoring\u001b[0m\n2025-08-28T15:49:00.583877556Z \u001b[32m2025-08-28 15:49:00.581\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.base.monitoring\u001b[0m:\u001b[36mstart_monitoring\u001b[0m:\u001b[36m318\u001b[0m | \u001b[1mExecution monitoring started\u001b[0m\n2025-08-28T15:49:00.583892158Z \u001b[32m2025-08-28 15:49:00.581\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_create_monitoring_task\u001b[0m:\u001b[36m848\u001b[0m | \u001b[1mComprehensive monitoring started\u001b[0m\n2025-08-28T15:49:00.583972546Z \u001b[32m2025-08-28 15:49:00.581\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.performance_optimization_manager\u001b[0m:\u001b[36minitialize\u001b[0m:\u001b[36m43\u001b[0m | \u001b[1mPerformance optimization manager initialized\u001b[0m\n2025-08-28T15:49:00.584876322Z \u001b[32m2025-08-28 15:49:00.581\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mCreated background task 'database_index_optimization' (ID: 5c60cea5-75ea-49f5-a351-49fd923f0258) with 120s timeout\u001b[0m\n2025-08-28T15:49:00.585769863Z \u001b[32m2025-08-28 15:49:00.582\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_schedule_background_optimizations\u001b[0m:\u001b[36m224\u001b[0m | \u001b[1mDatabase index optimization scheduled as background task (ID: 5c60cea5-75ea-49f5-a351-49fd923f0258)\u001b[0m\n2025-08-28T15:49:00.586026871Z \u001b[32m2025-08-28 15:49:00.582\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_initialize_performance_optimizations\u001b[0m:\u001b[36m194\u001b[0m | \u001b[1mPerformance optimizations initialized successfully\u001b[0m\n2025-08-28T15:49:00.586425239Z \u001b[32m2025-08-28 15:49:00.582\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_legacy_startup\u001b[0m:\u001b[36m1016\u001b[0m | \u001b[1mLegacy startup completion flags set - health endpoint will report healthy\u001b[0m\n2025-08-28T15:49:00.586604031Z \u001b[32m2025-08-28 15:49:00.582\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36mlog_startup_complete\u001b[0m:\u001b[36m869\u001b[0m | \u001b[1mSystem Ready (Took 2.20s).\u001b[0m\n2025-08-28T15:49:00.586612918Z \u001b[32m2025-08-28 15:49:00.584\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mApplication startup complete.\u001b[0m\n2025-08-28T15:49:00.586752439Z \u001b[32m2025-08-28 15:49:00.584\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mApplication startup complete.\u001b[0m\n2025-08-28T15:49:00.591227496Z \u001b[32m2025-08-28 15:49:00.590\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.shutdown\u001b[0m:\u001b[36mshutdown_cleanup\u001b[0m:\u001b[36m20\u001b[0m | \u001b[1mApplication shutdown initiated...\u001b[0m\n2025-08-28T15:49:00.591600132Z \u001b[32m2025-08-28 15:49:00.590\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.utils.multiprocessing_cleanup\u001b[0m:\u001b[36mcleanup_all\u001b[0m:\u001b[36m90\u001b[0m | \u001b[1mMultiprocessing resources cleaned up\u001b[0m\n2025-08-28T15:49:00.591619895Z \u001b[32m2025-08-28 15:49:00.590\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.shutdown\u001b[0m:\u001b[36mrun_complete_shutdown\u001b[0m:\u001b[36m120\u001b[0m | \u001b[1mShutting down background task manager...\u001b[0m\n2025-08-28T15:49:00.591621931Z \u001b[32m2025-08-28 15:49:00.590\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mShutting down BackgroundTaskManager...\u001b[0m\n2025-08-28T15:49:00.591623276Z \u001b[32m2025-08-28 15:49:00.590\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mCancelling 1 active background tasks\u001b[0m\n2025-08-28T15:49:00.591906833Z /usr/local/lib/python3.11/site-packages/websockets/legacy/server.py:1178: DeprecationWarning: remove second argument of ws_handler\n2025-08-28T15:49:00.591923297Z   warnings.warn(\"remove second argument of ws_handler\", DeprecationWarning)\n2025-08-28T15:49:00.600499940Z \u001b[32m2025-08-28 15:49:00.592\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[31m\u001b[1mException in ASGI application\n2025-08-28T15:49:00.600529659Z \u001b[0m",
          "signature": "74cf62b8c45fb531581bab619527b3ff",
          "is_traceback": true
        },
        {
          "line_number": 5693,
          "timestamp": "2025-08-28T15:49:00.600531326Z",
          "severity": "CRITICAL",
          "error_type": "Unknown Exception",
          "pattern": "Traceback",
          "log_line": "2025-08-28T15:49:00.600531326Z \u001b[33m\u001b[1mTraceback (most recent call last):\u001b[0m",
          "log_content": "2025-08-28T15:49:00.600531326Z \u001b[33m\u001b[1mTraceback (most recent call last):\u001b[0m\n2025-08-28T15:49:00.600532374Z   File \"<string>\", line 1, in <module>\n2025-08-28T15:49:00.600533614Z   File \"/usr/local/lib/python3.11/multiprocessing/spawn.py\", line 122, in spawn_main\n2025-08-28T15:49:00.600534534Z     exitcode = _main(fd, parent_sentinel)\n2025-08-28T15:49:00.600535427Z   File \"/usr/local/lib/python3.11/multiprocessing/spawn.py\", line 135, in _main\n2025-08-28T15:49:00.600536316Z     return self._bootstrap(parent_sentinel)\n2025-08-28T15:49:00.600537125Z   File \"/usr/local/lib/python3.11/multiprocessing/process.py\", line 314, in _bootstrap\n2025-08-28T15:49:00.600538023Z     self.run()\n2025-08-28T15:49:00.600538823Z   File \"/usr/local/lib/python3.11/multiprocessing/process.py\", line 108, in run\n2025-08-28T15:49:00.600539698Z     self._target(*self._args, **self._kwargs)\n2025-08-28T15:49:00.600540616Z   File \"/usr/local/lib/python3.11/site-packages/uvicorn/_subprocess.py\", line 76, in subprocess_started\n2025-08-28T15:49:00.600541525Z     target(sockets=sockets)\n2025-08-28T15:49:00.600542309Z   File \"/usr/local/lib/python3.11/site-packages/uvicorn/server.py\", line 61, in run\n2025-08-28T15:49:00.600543185Z     return asyncio.run(self.serve(sockets=sockets))\n2025-08-28T15:49:00.600543993Z   File \"/usr/local/lib/python3.11/asyncio/runners.py\", line 189, in run\n2025-08-28T15:49:00.600544856Z     with Runner(debug=debug) as runner:\n2025-08-28T15:49:00.600545687Z   File \"/usr/local/lib/python3.11/asyncio/runners.py\", line 63, in __exit__\n2025-08-28T15:49:00.600546600Z     self.close()\n2025-08-28T15:49:00.600547452Z   File \"/usr/local/lib/python3.11/asyncio/runners.py\", line 71, in close\n2025-08-28T15:49:00.600548309Z     _cancel_all_tasks(loop)\n2025-08-28T15:49:00.600549078Z   File \"/usr/local/lib/python3.11/asyncio/runners.py\", line 201, in _cancel_all_tasks\n2025-08-28T15:49:00.600549941Z     loop.run_until_complete(tasks.gather(*to_cancel, return_exceptions=True))\n2025-08-28T15:49:00.600550808Z > File \"/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py\", line 426, in run_asgi\n2025-08-28T15:49:00.600551772Z     result = await app(  # type: ignore[func-returns-value]\n2025-08-28T15:49:00.600552596Z   File \"/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py\", line 84, in __call__\n2025-08-28T15:49:00.600553484Z     return await self.app(scope, receive, send)\n2025-08-28T15:49:00.600554359Z   File \"/usr/local/lib/python3.11/site-packages/fastapi/applications.py\", line 1106, in __call__\n2025-08-28T15:49:00.600555367Z     await super().__call__(scope, receive, send)\n2025-08-28T15:49:00.600564958Z   File \"/usr/local/lib/python3.11/site-packages/starlette/applications.py\", line 122, in __call__\n2025-08-28T15:49:00.600566591Z     await self.middleware_stack(scope, receive, send)\n2025-08-28T15:49:00.600567479Z   File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py\", line 162, in __call__\n2025-08-28T15:49:00.600568375Z     await self.app(scope, receive, _send)\n2025-08-28T15:49:00.600569204Z   File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 108, in __call__\n2025-08-28T15:49:00.600570094Z     response = await self.dispatch_func(request, call_next)\n2025-08-28T15:49:00.600570929Z   File \"\u001b[32m/app/netra_backend/app/middleware/\u001b[0m\u001b[32m\u001b[1mcors_fix_middleware.py\u001b[0m\", line \u001b[33m66\u001b[0m, in \u001b[35mdispatch\u001b[0m\n2025-08-28T15:49:00.600572160Z     \u001b[1mresponse\u001b[0m \u001b[35m\u001b[1m=\u001b[0m \u001b[35m\u001b[1mawait\u001b[0m \u001b[1mcall_next\u001b[0m\u001b[1m(\u001b[0m\u001b[1mrequest\u001b[0m\u001b[1m)\u001b[0m\n2025-08-28T15:49:00.600573302Z   File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 78, in call_next\n2025-08-28T15:49:00.600574201Z     message = await recv_stream.receive()\n2025-08-28T15:49:00.600575014Z   File \"/usr/local/lib/python3.11/site-packages/anyio/streams/memory.py\", line 96, in receive\n2025-08-28T15:49:00.600575885Z     await checkpoint()\n2025-08-28T15:49:00.600576675Z   File \"/usr/local/lib/python3.11/site-packages/anyio/lowlevel.py\", line 33, in checkpoint\n2025-08-28T15:49:00.600577529Z     await get_asynclib().checkpoint()\n2025-08-28T15:49:00.600578333Z   File \"/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py\", line 447, in checkpoint\n2025-08-28T15:49:00.600579203Z     await sleep(0)\n2025-08-28T15:49:00.600579974Z   File \"/usr/local/lib/python3.11/asyncio/tasks.py\", line 640, in sleep\n2025-08-28T15:49:00.600580829Z     await __sleep0()\n2025-08-28T15:49:00.600581601Z   File \"/usr/local/lib/python3.11/asyncio/tasks.py\", line 634, in __sleep0\n2025-08-28T15:49:00.600582455Z     yield\n2025-08-28T15:49:00.600583227Z \u001b[31m\u001b[1masyncio.exceptions.CancelledError\u001b[0m\n2025-08-28T15:49:00.600584105Z \u001b[32m2025-08-28 15:49:00.599\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[31m\u001b[1mException in ASGI application\n2025-08-28T15:49:00.600585215Z \u001b[0m",
          "signature": "6a05a6f6d80bc1262024c91d186f5e1c",
          "is_traceback": true
        },
        {
          "line_number": 5874,
          "timestamp": "2025-08-28T15:49:00.815163911Z",
          "severity": "CRITICAL",
          "error_type": "Unknown Exception",
          "pattern": "Traceback",
          "log_line": "2025-08-28T15:49:00.815163911Z \u001b[32m2025-08-28 15:49:00.813\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[31m\u001b[1mTraceback (most recent call last):",
          "log_content": "2025-08-28T15:49:00.815163911Z \u001b[32m2025-08-28 15:49:00.813\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[31m\u001b[1mTraceback (most recent call last):\n2025-08-28T15:49:00.815233940Z   File \"/usr/local/lib/python3.11/site-packages/starlette/routing.py\", line 686, in lifespan\n2025-08-28T15:49:00.815242376Z     await receive()\n2025-08-28T15:49:00.815245717Z   File \"/usr/local/lib/python3.11/site-packages/uvicorn/lifespan/on.py\", line 137, in receive\n2025-08-28T15:49:00.815248230Z     return await self.receive_queue.get()\n2025-08-28T15:49:00.815250464Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n2025-08-28T15:49:00.815252476Z   File \"/usr/local/lib/python3.11/asyncio/queues.py\", line 158, in get\n2025-08-28T15:49:00.815294199Z     await getter\n2025-08-28T15:49:00.815296927Z asyncio.exceptions.CancelledError\n2025-08-28T15:49:00.815298316Z \u001b[0m",
          "signature": "808263b3490c36557ac1655aead3b60c",
          "is_traceback": true
        }
      ],
      "HIGH": [],
      "MEDIUM": []
    },
    "by_type": {
      "Warning": [
        {
          "line_number": 4966,
          "timestamp": "2025-08-28T15:42:48.331589592Z",
          "severity": "LOW",
          "error_type": "Warning",
          "pattern": "WARNING.*",
          "log_line": "2025-08-28T15:42:48.331589592Z \u001b[32m2025-08-28 15:42:48.328\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[33m\u001b[1mUsing dev user: dev@example.com\u001b[0m",
          "log_content": "\u001b[32m2025-08-28 15:42:48.328\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[33m\u001b[1mUsing dev user: dev@example.com\u001b[0m",
          "signature": "95568203caae7a0f5ea6d7a36c84be61"
        }
      ],
      "Application Error": [
        {
          "line_number": 5006,
          "timestamp": "2025-08-28T15:42:49.965290577Z",
          "severity": "ERROR",
          "error_type": "Application Error",
          "pattern": "ERROR.*",
          "log_line": "2025-08-28T15:42:49.965290577Z \u001b[32m2025-08-28 15:42:49.954\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[31m\u001b[1mTask exception was never retrieved",
          "log_content": "\u001b[32m2025-08-28 15:42:49.954\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[31m\u001b[1mTask exception was never retrieved",
          "signature": "2ba017de449297d470cbee95be303865"
        }
      ],
      "Unknown Exception": [
        {
          "line_number": 5008,
          "timestamp": "2025-08-28T15:42:49.965335288Z",
          "severity": "CRITICAL",
          "error_type": "Unknown Exception",
          "pattern": "Traceback",
          "log_line": "2025-08-28T15:42:49.965335288Z \u001b[33m\u001b[1mTraceback (most recent call last):\u001b[0m",
          "log_content": "2025-08-28T15:42:49.965335288Z \u001b[33m\u001b[1mTraceback (most recent call last):\u001b[0m\n2025-08-28T15:42:49.965336588Z > File \"\u001b[32m/app/netra_backend/app/database/\u001b[0m\u001b[32m\u001b[1m__init__.py\u001b[0m\", line \u001b[33m49\u001b[0m, in \u001b[35mpostgres_session\u001b[0m\n2025-08-28T15:42:49.965338210Z     \u001b[35m\u001b[1masync\u001b[0m \u001b[35m\u001b[1mwith\u001b[0m \u001b[1masync_session_factory\u001b[0m\u001b[1m(\u001b[0m\u001b[1m)\u001b[0m \u001b[35m\u001b[1mas\u001b[0m \u001b[1msession\u001b[0m\u001b[1m:\u001b[0m\n2025-08-28T15:42:49.965339984Z   File \"/usr/local/lib/python3.11/site-packages/sqlalchemy/ext/asyncio/session.py\", line 1085, in __aexit__\n2025-08-28T15:42:49.965341286Z     await asyncio.shield(task)\n2025-08-28T15:42:49.965342355Z   File \"/usr/local/lib/python3.11/site-packages/sqlalchemy/ext/asyncio/session.py\", line 1030, in close\n2025-08-28T15:42:49.965343714Z     await greenlet_spawn(self.sync_session.close)\n2025-08-28T15:42:49.965344803Z   File \"/usr/local/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py\", line 190, in greenlet_spawn\n2025-08-28T15:42:49.965345991Z     result = context.switch(*args, **kwargs)\n2025-08-28T15:42:49.965347076Z   File \"/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 2521, in close\n2025-08-28T15:42:49.965348220Z     self._close_impl(invalidate=False)\n2025-08-28T15:42:49.965349279Z   File \"/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 2590, in _close_impl\n2025-08-28T15:42:49.965350428Z     transaction.close(invalidate)\n2025-08-28T15:42:49.965351436Z   File \"<string>\", line 2, in close\n2025-08-28T15:42:49.965352690Z   File \"/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py\", line 119, in _go\n2025-08-28T15:42:49.965353847Z     raise sa_exc.IllegalStateChangeError(\n2025-08-28T15:42:49.965354928Z \u001b[31m\u001b[1msqlalchemy.exc.IllegalStateChangeError\u001b[0m:\u001b[1m Method 'close()' can't be called here; method '_connection_for_bind()' is already in progress and this would cause an unexpected state change to <SessionTransactionState.CLOSED: 5> (Background on this error at: https://sqlalche.me/e/20/isce)\u001b[0m\n2025-08-28T15:42:49.988552279Z \u001b[32m2025-08-28 15:42:49.987\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.database.base_crud\u001b[0m:\u001b[36m_create_entity\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1mCreated Thread with id: thread_dev-temp-cc173c1d\u001b[0m\n2025-08-28T15:42:50.022623413Z \u001b[32m2025-08-28 15:42:50.020\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.database.base_crud\u001b[0m:\u001b[36m_create_entity\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1mCreated Message with id: msg_f2fd2906-9d96-4c9a-91f3-4ddbe07afaaf\u001b[0m\n2025-08-28T15:42:50.035549635Z \u001b[32m2025-08-28 15:42:50.033\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.database.base_crud\u001b[0m:\u001b[36m_create_entity\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1mCreated Run with id: run_9f5d282b-ac2c-4745-ab6c-1b8418427760\u001b[0m\n2025-08-28T15:42:50.043154066Z \u001b[32m2025-08-28 15:42:50.040\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"flow_started\", \"flow_id\": \"flow_0a86afc5\", \"correlation_id\": \"run_9f5d282b-ac2c-4745-ab6c-1b8418427760\", \"timestamp\": 1756395770.0403755, \"state_summary\": {\"total_steps\": 4, \"completed_steps\": 0, \"current_phase\": \"initialization\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:50.043204968Z \u001b[32m2025-08-28 15:42:50.040\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_started\", \"flow_id\": \"flow_0a86afc5\", \"correlation_id\": \"run_9f5d282b-ac2c-4745-ab6c-1b8418427760\", \"timestamp\": 1756395770.0407774, \"step_name\": \"create_context\", \"step_type\": \"initialization\", \"state_summary\": {\"total_steps\": 4, \"completed_steps\": 0, \"current_phase\": \"create_context\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:50.043208658Z \u001b[32m2025-08-28 15:42:50.041\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_completed\", \"flow_id\": \"flow_0a86afc5\", \"correlation_id\": \"run_9f5d282b-ac2c-4745-ab6c-1b8418427760\", \"timestamp\": 1756395770.0410018, \"step_name\": \"create_context\", \"step_type\": \"initialization\", \"state_summary\": {\"total_steps\": 4, \"completed_steps\": 1, \"current_phase\": \"create_context\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:50.043305377Z \u001b[32m2025-08-28 15:42:50.041\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_started\", \"flow_id\": \"flow_0a86afc5\", \"correlation_id\": \"run_9f5d282b-ac2c-4745-ab6c-1b8418427760\", \"timestamp\": 1756395770.0411406, \"step_name\": \"initialize_state\", \"step_type\": \"state_management\", \"state_summary\": {\"total_steps\": 4, \"completed_steps\": 1, \"current_phase\": \"initialize_state\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:50.043531932Z \u001b[32m2025-08-28 15:42:50.041\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.services.state_persistence\u001b[0m:\u001b[36m_handle_no_session_warning\u001b[0m:\u001b[36m136\u001b[0m | \u001b[33m\u001b[1mNo state found for run run_9f5d282b-ac2c-4745-ab6c-1b8418427760\u001b[0m\n2025-08-28T15:42:50.053800128Z \u001b[32m2025-08-28 15:42:50.052\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.state_persistence\u001b[0m:\u001b[36m_ensure_user_exists_for_snapshot\u001b[0m:\u001b[36m433\u001b[0m | \u001b[1mAuto-creating dev/test user for state persistence: dev-temp-cc173c1d\u001b[0m\n2025-08-28T15:42:50.065277165Z \u001b[32m2025-08-28 15:42:50.064\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.services.state_persistence\u001b[0m:\u001b[36m_ensure_user_exists_for_snapshot\u001b[0m:\u001b[36m449\u001b[0m | \u001b[33m\u001b[1mCould not auto-create dev user dev-temp-cc173c1d: 1 validation error for UserCreate\n2025-08-28T15:42:50.065341880Z email\n2025-08-28T15:42:50.065343984Z   value is not a valid email address: The part after the @-sign is a special-use or reserved name that cannot be used with email. [type=value_error, input_value='dev-temp-cc173c1d@dev.local', input_type=str]\u001b[0m\n2025-08-28T15:42:50.086968709Z \u001b[32m2025-08-28 15:42:50.079\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.services.state_persistence\u001b[0m:\u001b[36m_handle_save_error\u001b[0m:\u001b[36m402\u001b[0m | \u001b[31m\u001b[1mFailed to save state for run run_9f5d282b-ac2c-4745-ab6c-1b8418427760: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.ForeignKeyViolationError'>: insert or update on table \"agent_state_snapshots\" violates foreign key constraint \"agent_state_snapshots_user_id_fkey\"\n2025-08-28T15:42:50.087147643Z DETAIL:  Key (user_id)=(dev-temp-cc173c1d) is not present in table \"userbase\".\n2025-08-28T15:42:50.087152039Z [SQL: INSERT INTO agent_state_snapshots (id, run_id, thread_id, user_id, version, schema_version, checkpoint_type, state_data, serialization_format, compression_type, step_count, agent_phase, execution_context, created_at, expires_at, is_recovery_point, recovery_reason, parent_snapshot_id) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::JSON, $9::VARCHAR, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13::JSON, now(), $14::TIMESTAMP WITH TIME ZONE, $15::BOOLEAN, $16::VARCHAR, $17::VARCHAR) RETURNING agent_state_snapshots.created_at]\n2025-08-28T15:42:50.087154409Z [parameters: ('6223a5ac-3703-4531-a250-c8751da6df87', 'run_9f5d282b-ac2c-4745-ab6c-1b8418427760', 'thread_dev-temp-cc173c1d', 'dev-temp-cc173c1d', '1.0', '1.0', 'auto', '{\"user_request\": \"My chatbot response time is too slow at 3 seconds. Can you optimize it to under 1 second without increasing costs?\", \"chat_thread_i ... (436 characters truncated) ... 0:00\", \"execution_context\": {}, \"custom_fields\": {}, \"priority\": null, \"retry_count\": 0, \"parent_agent_id\": null, \"tags\": []}, \"quality_metrics\": {}}', 'json', None, 0, 'initialization', '{\"step_count\": 0}', datetime.datetime(2025, 9, 4, 15, 42, 50, 65277, tzinfo=datetime.timezone.utc), True, None, None)]\n2025-08-28T15:42:50.087158145Z (Background on this error at: https://sqlalche.me/e/20/gkpj)\u001b[0m\n2025-08-28T15:42:50.102739724Z \u001b[32m2025-08-28 15:42:50.080\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_completed\", \"flow_id\": \"flow_0a86afc5\", \"correlation_id\": \"run_9f5d282b-ac2c-4745-ab6c-1b8418427760\", \"timestamp\": 1756395770.0803273, \"step_name\": \"initialize_state\", \"step_type\": \"state_management\", \"state_summary\": {\"total_steps\": 4, \"completed_steps\": 2, \"current_phase\": \"initialize_state\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:50.113810647Z \u001b[32m2025-08-28 15:42:50.081\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_started\", \"flow_id\": \"flow_0a86afc5\", \"correlation_id\": \"run_9f5d282b-ac2c-4745-ab6c-1b8418427760\", \"timestamp\": 1756395770.0814297, \"step_name\": \"build_pipeline\", \"step_type\": \"planning\", \"state_summary\": {\"total_steps\": 4, \"completed_steps\": 2, \"current_phase\": \"build_pipeline\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:50.114774287Z \u001b[32m2025-08-28 15:42:50.082\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_completed\", \"flow_id\": \"flow_0a86afc5\", \"correlation_id\": \"run_9f5d282b-ac2c-4745-ab6c-1b8418427760\", \"timestamp\": 1756395770.0824182, \"step_name\": \"build_pipeline\", \"step_type\": \"planning\", \"state_summary\": {\"total_steps\": 4, \"completed_steps\": 3, \"current_phase\": \"build_pipeline\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:50.115397010Z \u001b[32m2025-08-28 15:42:50.083\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_started\", \"flow_id\": \"flow_0a86afc5\", \"correlation_id\": \"run_9f5d282b-ac2c-4745-ab6c-1b8418427760\", \"timestamp\": 1756395770.083185, \"step_name\": \"execute_pipeline\", \"step_type\": \"execution\", \"state_summary\": {\"total_steps\": 4, \"completed_steps\": 3, \"current_phase\": \"execute_pipeline\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:50.118717203Z \u001b[32m2025-08-28 15:42:50.084\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"flow_started\", \"flow_id\": \"flow_d1bc8fb9\", \"correlation_id\": \"64682067-3f5b-4b78-9aad-50e6b7833c8a\", \"timestamp\": 1756395770.0841777, \"state_summary\": {\"total_steps\": 5, \"completed_steps\": 0, \"current_phase\": \"initialization\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:50.118810498Z \u001b[32m2025-08-28 15:42:50.084\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor parallel execution: {\"type\": \"supervisor_parallel\", \"flow_id\": \"flow_d1bc8fb9\", \"correlation_id\": \"64682067-3f5b-4b78-9aad-50e6b7833c8a\", \"agent_names\": [\"triage\", \"data\", \"optimization\", \"actions\", \"reporting\"], \"agent_count\": 5, \"timestamp\": 1756395770.0845637}\u001b[0m\n2025-08-28T15:42:50.118814118Z \u001b[32m2025-08-28 15:42:50.084\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_started\", \"flow_id\": \"flow_d1bc8fb9\", \"correlation_id\": \"64682067-3f5b-4b78-9aad-50e6b7833c8a\", \"timestamp\": 1756395770.0847251, \"step_name\": \"triage\", \"step_type\": \"agent\", \"state_summary\": {\"total_steps\": 5, \"completed_steps\": 0, \"current_phase\": \"triage\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:50.118816952Z \u001b[32m2025-08-28 15:42:50.084\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_started\", \"flow_id\": \"flow_d1bc8fb9\", \"correlation_id\": \"64682067-3f5b-4b78-9aad-50e6b7833c8a\", \"timestamp\": 1756395770.0848799, \"step_name\": \"data\", \"step_type\": \"agent\", \"state_summary\": {\"total_steps\": 5, \"completed_steps\": 0, \"current_phase\": \"data\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:50.118851729Z \u001b[32m2025-08-28 15:42:50.085\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_started\", \"flow_id\": \"flow_d1bc8fb9\", \"correlation_id\": \"64682067-3f5b-4b78-9aad-50e6b7833c8a\", \"timestamp\": 1756395770.0850263, \"step_name\": \"optimization\", \"step_type\": \"agent\", \"state_summary\": {\"total_steps\": 5, \"completed_steps\": 0, \"current_phase\": \"optimization\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:50.118853919Z \u001b[32m2025-08-28 15:42:50.085\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_started\", \"flow_id\": \"flow_d1bc8fb9\", \"correlation_id\": \"64682067-3f5b-4b78-9aad-50e6b7833c8a\", \"timestamp\": 1756395770.0851753, \"step_name\": \"actions\", \"step_type\": \"agent\", \"state_summary\": {\"total_steps\": 5, \"completed_steps\": 0, \"current_phase\": \"actions\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:50.118896849Z \u001b[32m2025-08-28 15:42:50.085\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_started\", \"flow_id\": \"flow_d1bc8fb9\", \"correlation_id\": \"64682067-3f5b-4b78-9aad-50e6b7833c8a\", \"timestamp\": 1756395770.0853379, \"step_name\": \"reporting\", \"step_type\": \"agent\", \"state_summary\": {\"total_steps\": 5, \"completed_steps\": 0, \"current_phase\": \"reporting\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:50.118911421Z \u001b[32m2025-08-28 15:42:50.089\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.llm.subagent_logger\u001b[0m:\u001b[36m_log_communication_json\u001b[0m:\u001b[36m72\u001b[0m | \u001b[1mAgent communication: {\"type\": \"agent_communication\", \"from_agent\": \"Supervisor\", \"to_agent\": \"OptimizationsCoreSubAgent\", \"correlation_id\": \"run_9f5d282b-ac2c-4745-ab6c-1b8418427760\", \"message_type\": \"execute_request\", \"timestamp\": 1756395770.089098}\u001b[0m\n2025-08-28T15:42:50.118990003Z \u001b[32m2025-08-28 15:42:50.090\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.llm.subagent_logger\u001b[0m:\u001b[36m_log_communication_json\u001b[0m:\u001b[36m72\u001b[0m | \u001b[1mAgent communication: {\"type\": \"agent_communication\", \"from_agent\": \"Supervisor\", \"to_agent\": \"ActionsToMeetGoalsSubAgent\", \"correlation_id\": \"run_9f5d282b-ac2c-4745-ab6c-1b8418427760\", \"message_type\": \"execute_request\", \"timestamp\": 1756395770.0901606}\u001b[0m\n2025-08-28T15:42:50.119073980Z \u001b[32m2025-08-28 15:42:50.091\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.llm.subagent_logger\u001b[0m:\u001b[36m_log_communication_json\u001b[0m:\u001b[36m72\u001b[0m | \u001b[1mAgent communication: {\"type\": \"agent_communication\", \"from_agent\": \"Supervisor\", \"to_agent\": \"ReportingSubAgent\", \"correlation_id\": \"run_9f5d282b-ac2c-4745-ab6c-1b8418427760\", \"message_type\": \"execute_request\", \"timestamp\": 1756395770.0917597}\u001b[0m\n2025-08-28T15:42:50.119079465Z \u001b[32m2025-08-28 15:42:50.094\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.agents.optimizations_core_sub_agent\u001b[0m:\u001b[36m_create_fallback_result\u001b[0m:\u001b[36m165\u001b[0m | \u001b[33m\u001b[1mUsing fallback optimization for run_id: run_9f5d282b-ac2c-4745-ab6c-1b8418427760\u001b[0m\n2025-08-28T15:42:50.119278308Z \u001b[32m2025-08-28 15:42:50.096\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36msend_to_user\u001b[0m:\u001b[36m242\u001b[0m | \u001b[33m\u001b[1mNo connections found for user run_9f5d282b-ac2c-4745-ab6c-1b8418427760\u001b[0m\n2025-08-28T15:42:50.119316708Z \u001b[32m2025-08-28 15:42:50.097\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.llm.subagent_logger\u001b[0m:\u001b[36m_log_input_json\u001b[0m:\u001b[36m91\u001b[0m | \u001b[1mAgent input: {\"type\": \"agent_input\", \"from_agent\": \"ReportingSubAgent\", \"to_agent\": \"LLM\", \"data_size\": 7696, \"correlation_id\": \"1538615a-57f4-4065-82f3-6f5b594ef398\", \"timestamp\": 1756395770.097524}\u001b[0m\n2025-08-28T15:42:50.119321399Z \u001b[32m2025-08-28 15:42:50.098\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.triage_sub_agent.executor\u001b[0m:\u001b[36m_log_execution_start\u001b[0m:\u001b[36m247\u001b[0m | \u001b[1mTriageSubAgent starting execution for run_id: run_9f5d282b-ac2c-4745-ab6c-1b8418427760\u001b[0m\n2025-08-28T15:42:50.119444626Z \u001b[32m2025-08-28 15:42:50.100\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36msend_to_user\u001b[0m:\u001b[36m242\u001b[0m | \u001b[33m\u001b[1mNo connections found for user run_9f5d282b-ac2c-4745-ab6c-1b8418427760\u001b[0m\n2025-08-28T15:42:50.119555796Z \u001b[32m2025-08-28 15:42:50.101\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.agents.data_sub_agent.execution_engine\u001b[0m:\u001b[36mexecute_analysis\u001b[0m:\u001b[36m210\u001b[0m | \u001b[31m\u001b[1mData analysis failed: 'ModernClickHouseOperations' object has no attribute 'analyze_performance_metrics'\u001b[0m\n2025-08-28T15:42:50.119664362Z \u001b[32m2025-08-28 15:42:50.109\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36msend_to_user\u001b[0m:\u001b[36m242\u001b[0m | \u001b[33m\u001b[1mNo connections found for user run_9f5d282b-ac2c-4745-ab6c-1b8418427760\u001b[0m\n2025-08-28T15:42:50.119783653Z \u001b[32m2025-08-28 15:42:50.113\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.llm.subagent_logger\u001b[0m:\u001b[36m_log_communication_json\u001b[0m:\u001b[36m72\u001b[0m | \u001b[1mAgent communication: {\"type\": \"agent_communication\", \"from_agent\": \"OptimizationsCoreSubAgent\", \"to_agent\": \"Supervisor\", \"correlation_id\": \"run_9f5d282b-ac2c-4745-ab6c-1b8418427760\", \"message_type\": \"execute_response\", \"timestamp\": 1756395770.1131532}\u001b[0m\n2025-08-28T15:42:50.119933666Z \u001b[32m2025-08-28 15:42:50.113\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.agents.actions_to_meet_goals_sub_agent\u001b[0m:\u001b[36m_handle_execution_failure\u001b[0m:\u001b[36m230\u001b[0m | \u001b[31m\u001b[1mExecution failed: UNKNOWN: Agent Missing required state: optimizations_result and data_result required execution failed in Missing required state: optimizations_result and data_result required\u001b[0m\n2025-08-28T15:42:50.120593723Z \u001b[32m2025-08-28 15:42:50.114\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.llm.subagent_logger\u001b[0m:\u001b[36m_log_communication_json\u001b[0m:\u001b[36m72\u001b[0m | \u001b[1mAgent communication: {\"type\": \"agent_communication\", \"from_agent\": \"ActionsToMeetGoalsSubAgent\", \"to_agent\": \"Supervisor\", \"correlation_id\": \"run_9f5d282b-ac2c-4745-ab6c-1b8418427760\", \"message_type\": \"execute_response\", \"timestamp\": 1756395770.1142128}\u001b[0m\n2025-08-28T15:42:50.120625122Z \u001b[32m2025-08-28 15:42:50.114\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.llm.subagent_logger\u001b[0m:\u001b[36m_log_input_json\u001b[0m:\u001b[36m91\u001b[0m | \u001b[1mAgent input: {\"type\": \"agent_input\", \"from_agent\": \"TriageSubAgent\", \"to_agent\": \"LLM\", \"data_size\": 3091, \"correlation_id\": \"cc4f9c21-b8b5-4910-a2a8-0d54ef281afb\", \"timestamp\": 1756395770.1146708}\u001b[0m\n2025-08-28T15:42:50.120628813Z \u001b[32m2025-08-28 15:42:50.115\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.llm.llm_structured_operations\u001b[0m:\u001b[36m_fallback_structured_parse\u001b[0m:\u001b[36m103\u001b[0m | \u001b[31m\u001b[1mStructured generation failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:42:50.120977344Z \u001b[32m2025-08-28 15:42:50.115\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.llm.llm_structured_operations\u001b[0m:\u001b[36m_handle_fallback_failure\u001b[0m:\u001b[36m119\u001b[0m | \u001b[31m\u001b[1mFallback parsing also failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:42:50.121029462Z \u001b[32m2025-08-28 15:42:50.115\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.llm.subagent_logger\u001b[0m:\u001b[36m_log_output_json\u001b[0m:\u001b[36m110\u001b[0m | \u001b[1mAgent output: {\"type\": \"agent_output\", \"to_agent\": \"LLM\", \"from_agent\": \"TriageSubAgent\", \"correlation_id\": \"cc4f9c21-b8b5-4910-a2a8-0d54ef281afb\", \"timestamp\": 1756395770.1159153, \"data_size\": 0, \"status\": \"error\"}\u001b[0m\n2025-08-28T15:42:50.122200101Z \u001b[32m2025-08-28 15:42:50.116\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.llm.subagent_logger\u001b[0m:\u001b[36m_log_input_json\u001b[0m:\u001b[36m91\u001b[0m | \u001b[1mAgent input: {\"type\": \"agent_input\", \"from_agent\": \"TriageSubAgent-Fallback\", \"to_agent\": \"LLM\", \"data_size\": 3144, \"correlation_id\": \"34091f8e-0bf0-45e8-9691-ebf58000be40\", \"timestamp\": 1756395770.1160934}\u001b[0m\n2025-08-28T15:42:50.125717669Z \u001b[32m2025-08-28 15:42:50.121\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.llm.subagent_logger\u001b[0m:\u001b[36m_log_output_json\u001b[0m:\u001b[36m110\u001b[0m | \u001b[1mAgent output: {\"type\": \"agent_output\", \"to_agent\": \"LLM\", \"from_agent\": \"ReportingSubAgent\", \"correlation_id\": \"1538615a-57f4-4065-82f3-6f5b594ef398\", \"timestamp\": 1756395770.1213894, \"data_size\": 0, \"status\": \"error\"}\u001b[0m\n2025-08-28T15:42:50.126307908Z \u001b[32m2025-08-28 15:42:50.122\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.core.reliability\u001b[0m:\u001b[36m_log_fallback_attempt\u001b[0m:\u001b[36m239\u001b[0m | \u001b[33m\u001b[1mReportingSubAgent.execute_reporting: Primary operation failed, trying fallback: 'RetryConfig' object has no attribute 'exponential_base'\u001b[0m\n2025-08-28T15:42:50.128540465Z \u001b[32m2025-08-28 15:42:50.122\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.agents.reporting_sub_agent\u001b[0m:\u001b[36m_fallback_reporting\u001b[0m:\u001b[36m181\u001b[0m | \u001b[33m\u001b[1mUsing fallback reporting for run_id: run_9f5d282b-ac2c-4745-ab6c-1b8418427760\u001b[0m\n2025-08-28T15:42:50.128633820Z \u001b[32m2025-08-28 15:42:50.123\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36msend_to_user\u001b[0m:\u001b[36m242\u001b[0m | \u001b[33m\u001b[1mNo connections found for user run_9f5d282b-ac2c-4745-ab6c-1b8418427760\u001b[0m\n2025-08-28T15:42:50.128685822Z \u001b[32m2025-08-28 15:42:50.124\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.llm.subagent_logger\u001b[0m:\u001b[36m_log_communication_json\u001b[0m:\u001b[36m72\u001b[0m | \u001b[1mAgent communication: {\"type\": \"agent_communication\", \"from_agent\": \"ReportingSubAgent\", \"to_agent\": \"Supervisor\", \"correlation_id\": \"run_9f5d282b-ac2c-4745-ab6c-1b8418427760\", \"message_type\": \"execute_response\", \"timestamp\": 1756395770.1242654}\u001b[0m\n2025-08-28T15:42:50.131104009Z \u001b[32m2025-08-28 15:42:50.129\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.agents.triage_sub_agent.llm_processor\u001b[0m:\u001b[36m_handle_fallback_error\u001b[0m:\u001b[36m234\u001b[0m | \u001b[31m\u001b[1mLLM fallback processing failed for run_9f5d282b-ac2c-4745-ab6c-1b8418427760: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:42:50.134031712Z \u001b[32m2025-08-28 15:42:50.131\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.llm.fallback_strategies\u001b[0m:\u001b[36m_log_retry_warning\u001b[0m:\u001b[36m102\u001b[0m | \u001b[33m\u001b[1mLLM operation triage_analysis failed (attempt 1/3): None. Retrying in 1.17s\u001b[0m\n2025-08-28T15:42:51.306409239Z \u001b[32m2025-08-28 15:42:51.305\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36msend_to_user\u001b[0m:\u001b[36m242\u001b[0m | \u001b[33m\u001b[1mNo connections found for user run_9f5d282b-ac2c-4745-ab6c-1b8418427760\u001b[0m\n2025-08-28T15:42:51.308281393Z \u001b[32m2025-08-28 15:42:51.306\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.llm.subagent_logger\u001b[0m:\u001b[36m_log_input_json\u001b[0m:\u001b[36m91\u001b[0m | \u001b[1mAgent input: {\"type\": \"agent_input\", \"from_agent\": \"TriageSubAgent\", \"to_agent\": \"LLM\", \"data_size\": 3091, \"correlation_id\": \"71ba5184-1f03-4644-8216-72eb40856296\", \"timestamp\": 1756395771.306283}\u001b[0m\n2025-08-28T15:42:51.308313236Z \u001b[32m2025-08-28 15:42:51.306\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.llm.llm_structured_operations\u001b[0m:\u001b[36m_fallback_structured_parse\u001b[0m:\u001b[36m103\u001b[0m | \u001b[31m\u001b[1mStructured generation failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:42:51.308316713Z \u001b[32m2025-08-28 15:42:51.307\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.llm.llm_structured_operations\u001b[0m:\u001b[36m_handle_fallback_failure\u001b[0m:\u001b[36m119\u001b[0m | \u001b[31m\u001b[1mFallback parsing also failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:42:51.308738579Z \u001b[32m2025-08-28 15:42:51.307\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.llm.subagent_logger\u001b[0m:\u001b[36m_log_output_json\u001b[0m:\u001b[36m110\u001b[0m | \u001b[1mAgent output: {\"type\": \"agent_output\", \"to_agent\": \"LLM\", \"from_agent\": \"TriageSubAgent\", \"correlation_id\": \"71ba5184-1f03-4644-8216-72eb40856296\", \"timestamp\": 1756395771.3072233, \"data_size\": 0, \"status\": \"error\"}\u001b[0m\n2025-08-28T15:42:51.308842906Z \u001b[32m2025-08-28 15:42:51.307\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.llm.subagent_logger\u001b[0m:\u001b[36m_log_input_json\u001b[0m:\u001b[36m91\u001b[0m | \u001b[1mAgent input: {\"type\": \"agent_input\", \"from_agent\": \"TriageSubAgent-Fallback\", \"to_agent\": \"LLM\", \"data_size\": 3144, \"correlation_id\": \"19e43d2c-7f0d-486a-8f1e-ae51f8807b29\", \"timestamp\": 1756395771.307429}\u001b[0m\n2025-08-28T15:42:51.312344262Z \u001b[32m2025-08-28 15:42:51.311\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.agents.triage_sub_agent.llm_processor\u001b[0m:\u001b[36m_handle_fallback_error\u001b[0m:\u001b[36m234\u001b[0m | \u001b[31m\u001b[1mLLM fallback processing failed for run_9f5d282b-ac2c-4745-ab6c-1b8418427760: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:42:51.312369793Z \u001b[32m2025-08-28 15:42:51.311\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.llm.fallback_strategies\u001b[0m:\u001b[36m_log_retry_warning\u001b[0m:\u001b[36m102\u001b[0m | \u001b[33m\u001b[1mLLM operation triage_analysis failed (attempt 2/3): None. Retrying in 2.43s\u001b[0m\n2025-08-28T15:42:51.312372018Z \u001b[32m2025-08-28 15:42:51.311\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.core.resilience.unified_circuit_breaker\u001b[0m:\u001b[36m_transition_to_open\u001b[0m:\u001b[36m513\u001b[0m | \u001b[33m\u001b[1mCircuit breaker 'CircuitConfig(name='llm_fallback_triage', failure_threshold=3, recovery_timeout=30.0, half_open_max_calls=3, timeout_seconds=10.0, adaptive_threshold=True, slow_call_threshold=5.0, sliding_window_size=100)' -> OPEN\u001b[0m\n2025-08-28T15:42:52.977190124Z \u001b[32m2025-08-28 15:42:52.973\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m41\u001b[0m | \u001b[1mSecurityResponseMiddleware processing: /health\u001b[0m\n2025-08-28T15:42:52.980167245Z \u001b[32m2025-08-28 15:42:52.976\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.request_context\u001b[0m:\u001b[36mlog_request_details\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mRequest: GET /health | Status: 200 | Duration: 2.15ms | Trace: trace_ad21d30ffd764658\u001b[0m\n2025-08-28T15:42:52.980304007Z \u001b[32m2025-08-28 15:42:52.977\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m47\u001b[0m | \u001b[1mResponse for /health: status=200, is_api=False, has_auth=False\u001b[0m\n2025-08-28T15:42:52.980313191Z \u001b[32m2025-08-28 15:42:52.978\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m127.0.0.1:55088 - \"GET /health HTTP/1.1\" 200\u001b[0m\n2025-08-28T15:42:53.741982972Z \u001b[32m2025-08-28 15:42:53.741\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36msend_to_user\u001b[0m:\u001b[36m242\u001b[0m | \u001b[33m\u001b[1mNo connections found for user run_9f5d282b-ac2c-4745-ab6c-1b8418427760\u001b[0m\n2025-08-28T15:42:53.742230166Z \u001b[32m2025-08-28 15:42:53.741\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.llm.subagent_logger\u001b[0m:\u001b[36m_log_input_json\u001b[0m:\u001b[36m91\u001b[0m | \u001b[1mAgent input: {\"type\": \"agent_input\", \"from_agent\": \"TriageSubAgent\", \"to_agent\": \"LLM\", \"data_size\": 3091, \"correlation_id\": \"d75f281d-1807-4e39-826d-ee2af74ffe2b\", \"timestamp\": 1756395773.74172}\u001b[0m\n2025-08-28T15:42:53.743501397Z \u001b[32m2025-08-28 15:42:53.742\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.llm.llm_structured_operations\u001b[0m:\u001b[36m_fallback_structured_parse\u001b[0m:\u001b[36m103\u001b[0m | \u001b[31m\u001b[1mStructured generation failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:42:53.743978245Z \u001b[32m2025-08-28 15:42:53.742\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.llm.llm_structured_operations\u001b[0m:\u001b[36m_handle_fallback_failure\u001b[0m:\u001b[36m119\u001b[0m | \u001b[31m\u001b[1mFallback parsing also failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:42:53.743985976Z \u001b[32m2025-08-28 15:42:53.742\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.llm.subagent_logger\u001b[0m:\u001b[36m_log_output_json\u001b[0m:\u001b[36m110\u001b[0m | \u001b[1mAgent output: {\"type\": \"agent_output\", \"to_agent\": \"LLM\", \"from_agent\": \"TriageSubAgent\", \"correlation_id\": \"d75f281d-1807-4e39-826d-ee2af74ffe2b\", \"timestamp\": 1756395773.7426498, \"data_size\": 0, \"status\": \"error\"}\u001b[0m\n2025-08-28T15:42:53.743988453Z \u001b[32m2025-08-28 15:42:53.742\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.llm.subagent_logger\u001b[0m:\u001b[36m_log_input_json\u001b[0m:\u001b[36m91\u001b[0m | \u001b[1mAgent input: {\"type\": \"agent_input\", \"from_agent\": \"TriageSubAgent-Fallback\", \"to_agent\": \"LLM\", \"data_size\": 3144, \"correlation_id\": \"2aef3fc1-5c7a-4c44-87f6-80c8e315e81d\", \"timestamp\": 1756395773.7427936}\u001b[0m\n2025-08-28T15:42:53.747657474Z \u001b[32m2025-08-28 15:42:53.745\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.agents.triage_sub_agent.llm_processor\u001b[0m:\u001b[36m_handle_fallback_error\u001b[0m:\u001b[36m234\u001b[0m | \u001b[31m\u001b[1mLLM fallback processing failed for run_9f5d282b-ac2c-4745-ab6c-1b8418427760: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:42:53.747733785Z \u001b[32m2025-08-28 15:42:53.745\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.llm.retry_helpers\u001b[0m:\u001b[36mlog_final_failure\u001b[0m:\u001b[36m51\u001b[0m | \u001b[31m\u001b[1mLLM operation triage_analysis failed after 3 attempts: None\u001b[0m\n2025-08-28T15:42:53.747982900Z \u001b[32m2025-08-28 15:42:53.746\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36msend_to_user\u001b[0m:\u001b[36m242\u001b[0m | \u001b[33m\u001b[1mNo connections found for user run_9f5d282b-ac2c-4745-ab6c-1b8418427760\u001b[0m\n2025-08-28T15:42:53.748230727Z /usr/local/lib/python3.11/site-packages/pydantic/main.py:463: UserWarning: Pydantic serializer warnings:\n2025-08-28T15:42:53.748268411Z   PydanticSerializationUnexpectedValue(Expected `TriageResult` - serialized value may not be as expected [input_value={'category': 'Error', 'se...equire_approval': False}, input_type=dict])\n2025-08-28T15:42:53.748275604Z   return self.__pydantic_serializer__.to_python(\n2025-08-28T15:42:53.748278761Z \u001b[32m2025-08-28 15:42:53.746\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.core.resilience.unified_circuit_breaker\u001b[0m:\u001b[36m_transition_to_open\u001b[0m:\u001b[36m513\u001b[0m | \u001b[33m\u001b[1mCircuit breaker 'CircuitConfig(name='llm_fallback_triage', failure_threshold=3, recovery_timeout=30.0, half_open_max_calls=3, timeout_seconds=10.0, adaptive_threshold=True, slow_call_threshold=5.0, sliding_window_size=100)' -> OPEN\u001b[0m\n2025-08-28T15:42:53.748299254Z \u001b[32m2025-08-28 15:42:53.746\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_completed\", \"flow_id\": \"flow_d1bc8fb9\", \"correlation_id\": \"64682067-3f5b-4b78-9aad-50e6b7833c8a\", \"timestamp\": 1756395773.7467895, \"step_name\": \"triage\", \"step_type\": \"agent\", \"state_summary\": {\"total_steps\": 5, \"completed_steps\": 1, \"current_phase\": \"reporting\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:53.748322179Z \u001b[32m2025-08-28 15:42:53.746\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_completed\", \"flow_id\": \"flow_d1bc8fb9\", \"correlation_id\": \"64682067-3f5b-4b78-9aad-50e6b7833c8a\", \"timestamp\": 1756395773.7469342, \"step_name\": \"data\", \"step_type\": \"agent\", \"state_summary\": {\"total_steps\": 5, \"completed_steps\": 2, \"current_phase\": \"reporting\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:53.748382196Z \u001b[32m2025-08-28 15:42:53.747\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_completed\", \"flow_id\": \"flow_d1bc8fb9\", \"correlation_id\": \"64682067-3f5b-4b78-9aad-50e6b7833c8a\", \"timestamp\": 1756395773.7470486, \"step_name\": \"optimization\", \"step_type\": \"agent\", \"state_summary\": {\"total_steps\": 5, \"completed_steps\": 3, \"current_phase\": \"reporting\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:53.750036497Z \u001b[32m2025-08-28 15:42:53.747\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_completed\", \"flow_id\": \"flow_d1bc8fb9\", \"correlation_id\": \"64682067-3f5b-4b78-9aad-50e6b7833c8a\", \"timestamp\": 1756395773.7471519, \"step_name\": \"actions\", \"step_type\": \"agent\", \"state_summary\": {\"total_steps\": 5, \"completed_steps\": 4, \"current_phase\": \"reporting\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:53.750270775Z \u001b[32m2025-08-28 15:42:53.747\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_completed\", \"flow_id\": \"flow_d1bc8fb9\", \"correlation_id\": \"64682067-3f5b-4b78-9aad-50e6b7833c8a\", \"timestamp\": 1756395773.747252, \"step_name\": \"reporting\", \"step_type\": \"agent\", \"state_summary\": {\"total_steps\": 5, \"completed_steps\": 5, \"current_phase\": \"reporting\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:53.750378996Z \u001b[32m2025-08-28 15:42:53.748\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.pipeline_executor\u001b[0m:\u001b[36m_persist_batched_state\u001b[0m:\u001b[36m201\u001b[0m | \u001b[31m\u001b[1mError in batched state persistence: PIPELINE_COMPLETE\u001b[0m\n2025-08-28T15:42:53.750399156Z \u001b[32m2025-08-28 15:42:53.749\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"flow_completed\", \"flow_id\": \"flow_d1bc8fb9\", \"correlation_id\": \"64682067-3f5b-4b78-9aad-50e6b7833c8a\", \"timestamp\": 1756395773.749105, \"state_summary\": {\"total_steps\": 5, \"completed_steps\": 5, \"current_phase\": \"reporting\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:53.754121465Z \u001b[32m2025-08-28 15:42:53.751\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.state_persistence\u001b[0m:\u001b[36m_ensure_user_exists_for_snapshot\u001b[0m:\u001b[36m433\u001b[0m | \u001b[1mAuto-creating dev/test user for state persistence: dev-temp-cc173c1d\u001b[0m\n2025-08-28T15:42:53.754182672Z \u001b[32m2025-08-28 15:42:53.752\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.services.state_persistence\u001b[0m:\u001b[36m_ensure_user_exists_for_snapshot\u001b[0m:\u001b[36m449\u001b[0m | \u001b[33m\u001b[1mCould not auto-create dev user dev-temp-cc173c1d: 1 validation error for UserCreate\n2025-08-28T15:42:53.754190016Z email\n2025-08-28T15:42:53.754192893Z   value is not a valid email address: The part after the @-sign is a special-use or reserved name that cannot be used with email. [type=value_error, input_value='dev-temp-cc173c1d@dev.local', input_type=str]\u001b[0m\n2025-08-28T15:42:53.757384618Z \u001b[32m2025-08-28 15:42:53.755\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.services.state_persistence\u001b[0m:\u001b[36m_handle_save_error\u001b[0m:\u001b[36m402\u001b[0m | \u001b[31m\u001b[1mFailed to save state for run run_9f5d282b-ac2c-4745-ab6c-1b8418427760: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.ForeignKeyViolationError'>: insert or update on table \"agent_state_snapshots\" violates foreign key constraint \"agent_state_snapshots_user_id_fkey\"\n2025-08-28T15:42:53.757435577Z DETAIL:  Key (user_id)=(dev-temp-cc173c1d) is not present in table \"userbase\".\n2025-08-28T15:42:53.757443579Z [SQL: INSERT INTO agent_state_snapshots (id, run_id, thread_id, user_id, version, schema_version, checkpoint_type, state_data, serialization_format, compression_type, step_count, agent_phase, execution_context, created_at, expires_at, is_recovery_point, recovery_reason, parent_snapshot_id) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::JSON, $9::VARCHAR, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13::JSON, now(), $14::TIMESTAMP WITH TIME ZONE, $15::BOOLEAN, $16::VARCHAR, $17::VARCHAR) RETURNING agent_state_snapshots.created_at]\n2025-08-28T15:42:53.757447879Z [parameters: ('bf5bf752-f507-4956-bfc6-286de3d6649c', 'run_9f5d282b-ac2c-4745-ab6c-1b8418427760', 'thread_dev-temp-cc173c1d', 'dev-temp-cc173c1d', '1.0', '1.0', 'auto', '{\"user_request\": \"My chatbot response time is too slow at 3 seconds. Can you optimize it to under 1 second without increasing costs?\", \"chat_thread_i ... (3152 characters truncated) ... \", \"last_updated\": \"2025-08-28T15:42:50.041463Z\", \"execution_context\": {}, \"custom_fields\": {}, \"retry_count\": 0, \"tags\": []}, \"quality_metrics\": {}}', 'compressed_json', None, 0, None, '{}', datetime.datetime(2025, 9, 4, 15, 42, 53, 752690, tzinfo=datetime.timezone.utc), False, None, None)]\n2025-08-28T15:42:53.757451984Z (Background on this error at: https://sqlalche.me/e/20/gkpj)\u001b[0m\n2025-08-28T15:42:53.758398186Z \u001b[32m2025-08-28 15:42:53.756\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36msend_to_thread\u001b[0m:\u001b[36m300\u001b[0m | \u001b[33m\u001b[1mNo active connections found for thread thread_dev-temp-cc173c1d\u001b[0m\n2025-08-28T15:42:53.758779920Z \u001b[32m2025-08-28 15:42:53.756\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_completed\", \"flow_id\": \"flow_0a86afc5\", \"correlation_id\": \"run_9f5d282b-ac2c-4745-ab6c-1b8418427760\", \"timestamp\": 1756395773.7566242, \"step_name\": \"execute_pipeline\", \"step_type\": \"execution\", \"state_summary\": {\"total_steps\": 4, \"completed_steps\": 4, \"current_phase\": \"execute_pipeline\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:53.758938616Z \u001b[32m2025-08-28 15:42:53.756\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"flow_completed\", \"flow_id\": \"flow_0a86afc5\", \"correlation_id\": \"run_9f5d282b-ac2c-4745-ab6c-1b8418427760\", \"timestamp\": 1756395773.756865, \"state_summary\": {\"total_steps\": 4, \"completed_steps\": 4, \"current_phase\": \"execute_pipeline\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:53.761394711Z \u001b[32m2025-08-28 15:42:53.760\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.database.base_crud\u001b[0m:\u001b[36m_create_entity\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1mCreated Message with id: msg_69fa3c56-5ede-47da-8259-a9f128e85c14\u001b[0m\n2025-08-28T15:42:53.769504533Z \u001b[32m2025-08-28 15:42:53.768\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.database.base_crud\u001b[0m:\u001b[36m_execute_update_operation\u001b[0m:\u001b[36m129\u001b[0m | \u001b[1mUpdated Run with id: run_9f5d282b-ac2c-4745-ab6c-1b8418427760\u001b[0m\n2025-08-28T15:42:53.771278982Z \u001b[32m2025-08-28 15:42:53.770\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36m_send_to_connection\u001b[0m:\u001b[36m374\u001b[0m | \u001b[31m\u001b[1mError sending to connection conn_dev-temp-cc173c1d_3052f606: Object of type DeepAgentState is not JSON serializable\u001b[0m\n2025-08-28T15:42:53.775558713Z \u001b[32m2025-08-28 15:42:53.773\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36m_cleanup_connection\u001b[0m:\u001b[36m220\u001b[0m | \u001b[1mWebSocket closed for connection conn_dev-temp-cc173c1d_3052f606: 1011 - Send error\u001b[0m\n2025-08-28T15:42:53.775600892Z \u001b[32m2025-08-28 15:42:53.774\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.agent_handler\u001b[0m:\u001b[36m_handle_start_agent\u001b[0m:\u001b[36m123\u001b[0m | \u001b[1mSuccessfully processed start_agent for dev-temp-cc173c1d\u001b[0m\n2025-08-28T15:42:53.775603778Z \u001b[32m2025-08-28 15:42:53.774\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mconnection closed\u001b[0m\n2025-08-28T15:42:53.775605350Z \u001b[32m2025-08-28 15:42:53.774\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mconnection closed\u001b[0m\n2025-08-28T15:42:53.775606896Z \u001b[32m2025-08-28 15:42:53.775\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36m_handle_websocket_messages\u001b[0m:\u001b[36m368\u001b[0m | \u001b[31m\u001b[1mMessage handling error for conn_dev-temp-cc173c1d_3052f606: WebSocket is not connected. Need to call \"accept\" first.\u001b[0m\n2025-08-28T15:42:53.876730656Z \u001b[32m2025-08-28 15:42:53.875\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36m_handle_websocket_messages\u001b[0m:\u001b[36m368\u001b[0m | \u001b[31m\u001b[1mMessage handling error for conn_dev-temp-cc173c1d_3052f606: WebSocket is not connected. Need to call \"accept\" first.\u001b[0m\n2025-08-28T15:42:54.078450324Z \u001b[32m2025-08-28 15:42:54.077\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36m_handle_websocket_messages\u001b[0m:\u001b[36m368\u001b[0m | \u001b[31m\u001b[1mMessage handling error for conn_dev-temp-cc173c1d_3052f606: WebSocket is not connected. Need to call \"accept\" first.\u001b[0m\n2025-08-28T15:42:54.478300503Z \u001b[32m2025-08-28 15:42:54.477\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36m_handle_websocket_messages\u001b[0m:\u001b[36m368\u001b[0m | \u001b[31m\u001b[1mMessage handling error for conn_dev-temp-cc173c1d_3052f606: WebSocket is not connected. Need to call \"accept\" first.\u001b[0m\n2025-08-28T15:42:55.280205451Z \u001b[32m2025-08-28 15:42:55.279\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36m_handle_websocket_messages\u001b[0m:\u001b[36m368\u001b[0m | \u001b[31m\u001b[1mMessage handling error for conn_dev-temp-cc173c1d_3052f606: WebSocket is not connected. Need to call \"accept\" first.\u001b[0m\n2025-08-28T15:42:55.280733356Z \u001b[32m2025-08-28 15:42:55.279\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36m_handle_websocket_messages\u001b[0m:\u001b[36m371\u001b[0m | \u001b[31m\u001b[1mToo many errors, closing connection conn_dev-temp-cc173c1d_3052f606\u001b[0m\n2025-08-28T15:42:55.280757385Z \u001b[32m2025-08-28 15:42:55.279\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36m_handle_websocket_messages\u001b[0m:\u001b[36m383\u001b[0m | \u001b[1mExiting message handling loop for connection: conn_dev-temp-cc173c1d_3052f606 | Duration: 7.7s | Messages processed: 1 | Errors: 5 | User: dev-temp-cc173c1d\u001b[0m\n2025-08-28T15:42:55.280759785Z \u001b[32m2025-08-28 15:42:55.279\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36mwebsocket_endpoint\u001b[0m:\u001b[36m198\u001b[0m | \u001b[1mMessage handling loop ended for connection: conn_dev-temp-cc173c1d_3052f606\u001b[0m\n2025-08-28T15:42:55.280761275Z \u001b[32m2025-08-28 15:42:55.279\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.auth\u001b[0m:\u001b[36mcleanup\u001b[0m:\u001b[36m349\u001b[0m | \u001b[1mWebSocket authenticator cleanup completed\u001b[0m\n2025-08-28T15:42:55.280763080Z \u001b[32m2025-08-28 15:42:55.280\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36mwebsocket_endpoint\u001b[0m:\u001b[36m255\u001b[0m | \u001b[1mWebSocket cleanup completed: conn_dev-temp-cc173c1d_3052f606\u001b[0m\n2025-08-28T15:42:57.043440799Z \u001b[32m2025-08-28 15:42:57.040\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_index_optimization_background\u001b[0m:\u001b[36m232\u001b[0m | \u001b[1mStarting background database index optimization...\u001b[0m\n2025-08-28T15:42:57.043469781Z \u001b[32m2025-08-28 15:42:57.041\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.db.database_index_manager\u001b[0m:\u001b[36moptimize_all_databases\u001b[0m:\u001b[36m129\u001b[0m | \u001b[1mStarting database optimization across all databases\u001b[0m\n2025-08-28T15:42:57.043471912Z \u001b[32m2025-08-28 15:42:57.041\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.db.index_optimizer_core\u001b[0m:\u001b[36mlog_engine_unavailable\u001b[0m:\u001b[36m52\u001b[0m | \u001b[33m\u001b[1mAsync engine not available, skipping index creation\u001b[0m\n2025-08-28T15:42:57.043489839Z \u001b[32m2025-08-28 15:42:57.042\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.db.clickhouse\u001b[0m:\u001b[36m_create_mock_client\u001b[0m:\u001b[36m132\u001b[0m | \u001b[1m[ClickHouse] Using MOCK client for development\u001b[0m\n2025-08-28T15:42:57.043491391Z \u001b[32m2025-08-28 15:42:57.042\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.db.clickhouse\u001b[0m:\u001b[36m_create_mock_client\u001b[0m:\u001b[36m132\u001b[0m | \u001b[1m[ClickHouse] Using MOCK client for development\u001b[0m\n2025-08-28T15:42:57.043492707Z \u001b[32m2025-08-28 15:42:57.042\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.db.database_index_manager\u001b[0m:\u001b[36moptimize_all_databases\u001b[0m:\u001b[36m138\u001b[0m | \u001b[1mDatabase optimization completed - PostgreSQL: True, ClickHouse: True\u001b[0m\n2025-08-28T15:42:57.043507810Z \u001b[32m2025-08-28 15:42:57.042\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_index_optimization_background\u001b[0m:\u001b[36m239\u001b[0m | \u001b[1mBackground database optimization completed successfully: {'postgres': {'indexes_created': {}, 'recommendations': [{'table_name': 'userbase', 'columns': ['email'], 'index_type': 'btree', 'reason': 'Frequent user lookups by email', 'estimated_benefit': 0.0, 'priority': 1}, {'table_name': 'corpus_audit_logs', 'columns': ['timestamp'], 'index_type': 'btree', 'reason': 'Time-based audit queries', 'estimated_benefit': 0.0, 'priority': 1}, {'table_name': 'corpus_audit_logs', 'columns': ['user_id', 'action'], 'index_type': 'btree', 'reason': 'User action filtering', 'estimated_benefit': 0.0, 'priority': 2}, {'table_name': 'secret', 'columns': ['user_id'], 'index_type': 'btree', 'reason': 'User secret lookups', 'estimated_benefit': 0.0, 'priority': 2}, {'table_name': 'agent_states', 'columns': ['session_id'], 'index_type': 'btree', 'reason': 'Session-based state lookups', 'estimated_benefit': 0.0, 'priority': 2}], 'usage_stats': {}}, 'clickhouse': {'table_optimizations': {'netra_content_corpus': False, 'netra_audit_events': False, 'netra_performance_metrics': False, 'netra_agent_logs': False}, 'materialized_views': {'user_daily_activity': False, 'hourly_performance_metrics': False}}, 'recommendations': []}\u001b[0m\n2025-08-28T15:42:58.788054099Z \u001b[32m2025-08-28 15:42:58.783\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m('172.18.0.1', 45122) - \"WebSocket /ws\" [accepted]\u001b[0m\n2025-08-28T15:42:58.789787861Z \u001b[32m2025-08-28 15:42:58.784\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m('172.18.0.1', 45122) - \"WebSocket /ws\" [accepted]\u001b[0m\n2025-08-28T15:42:58.789849108Z \u001b[32m2025-08-28 15:42:58.784\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36mwebsocket_endpoint\u001b[0m:\u001b[36m121\u001b[0m | \u001b[1mWebSocket accepted with subprotocol: jwt-auth\u001b[0m\n2025-08-28T15:42:58.790894704Z \u001b[32m2025-08-28 15:42:58.784\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.websocket_cors\u001b[0m:\u001b[36mget_websocket_cors_handler\u001b[0m:\u001b[36m566\u001b[0m | \u001b[1mWebSocket CORS: Detected environment from config: 'development'\u001b[0m\n2025-08-28T15:42:58.790922301Z \u001b[32m2025-08-28 15:42:58.785\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.websocket_cors\u001b[0m:\u001b[36mvalidate_websocket_origin\u001b[0m:\u001b[36m360\u001b[0m | \u001b[1mWebSocket connection allowed from origin: http://127.0.0.1:3000 in development environment\u001b[0m\n2025-08-28T15:42:58.790960911Z \u001b[32m2025-08-28 15:42:58.785\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mStarted trace span: websocket_jwt_validation (trace_id: 0217894fc9d24d0794cc38ecb7fc2441)\u001b[0m\n2025-08-28T15:42:58.790975119Z \u001b[32m2025-08-28 15:42:58.788\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mconnection open\u001b[0m\n2025-08-28T15:42:58.790976408Z \u001b[32m2025-08-28 15:42:58.788\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mconnection open\u001b[0m\n2025-08-28T15:42:58.798260268Z \u001b[32m2025-08-28 15:42:58.794\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mHTTP Request: POST http://auth:8081/auth/check-blacklist \"HTTP/1.1 200 OK\"\u001b[0m\n2025-08-28T15:42:58.798833549Z \u001b[32m2025-08-28 15:42:58.797\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mCompleted trace span: websocket_jwt_validation\u001b[0m\n2025-08-28T15:42:58.798844459Z \u001b[32m2025-08-28 15:42:58.797\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.auth\u001b[0m:\u001b[36mauthenticate_websocket\u001b[0m:\u001b[36m121\u001b[0m | \u001b[1mWebSocket authenticated: dev-temp-cc173c1d\u001b[0m\n2025-08-28T15:42:58.798846696Z \u001b[32m2025-08-28 15:42:58.797\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36mwebsocket_endpoint\u001b[0m:\u001b[36m154\u001b[0m | \u001b[1mWebSocket authenticated for user: dev-temp-cc173c1d at 2025-08-28T15:42:58.797582+00:00\u001b[0m\n2025-08-28T15:42:58.800372426Z \u001b[32m2025-08-28 15:42:58.798\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36mconnect_user\u001b[0m:\u001b[36m124\u001b[0m | \u001b[1mWebSocket connected: conn_dev-temp-cc173c1d_9dda8614 for user dev-temp-cc173c1d\u001b[0m\n2025-08-28T15:42:58.800571420Z \u001b[32m2025-08-28 15:42:58.798\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36mwebsocket_endpoint\u001b[0m:\u001b[36m188\u001b[0m | \u001b[1mWebSocket ready: conn_dev-temp-cc173c1d_9dda8614\u001b[0m\n2025-08-28T15:42:58.800672069Z \u001b[32m2025-08-28 15:42:58.799\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36mwebsocket_endpoint\u001b[0m:\u001b[36m191\u001b[0m | \u001b[1mStarting message handling loop for connection: conn_dev-temp-cc173c1d_9dda8614\u001b[0m\n2025-08-28T15:42:58.800775551Z \u001b[32m2025-08-28 15:42:58.799\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36mwebsocket_endpoint\u001b[0m:\u001b[36m193\u001b[0m | \u001b[1mWebSocket state before loop - client_state: WebSocketState.CONNECTED, application_state: WebSocketState.CONNECTED\u001b[0m\n2025-08-28T15:42:58.800822170Z \u001b[32m2025-08-28 15:42:58.799\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36m_handle_websocket_messages\u001b[0m:\u001b[36m276\u001b[0m | \u001b[1mEntering message handling loop for connection: conn_dev-temp-cc173c1d_9dda8614 (user: dev-temp-cc173c1d)\u001b[0m\n2025-08-28T15:42:58.801002709Z \u001b[32m2025-08-28 15:42:58.799\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36m_handle_websocket_messages\u001b[0m:\u001b[36m279\u001b[0m | \u001b[1mWebSocket state at loop entry - client_state: WebSocketState.CONNECTED, application_state: WebSocketState.CONNECTED\u001b[0m\n2025-08-28T15:42:58.801048026Z \u001b[32m2025-08-28 15:42:58.799\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36m_handle_websocket_messages\u001b[0m:\u001b[36m285\u001b[0m | \u001b[1mFirst loop iteration for conn_dev-temp-cc173c1d_9dda8614, WebSocket is_connected returned True\u001b[0m\n2025-08-28T15:43:23.077202836Z \u001b[32m2025-08-28 15:43:23.071\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m41\u001b[0m | \u001b[1mSecurityResponseMiddleware processing: /health\u001b[0m\n2025-08-28T15:43:23.077304912Z \u001b[32m2025-08-28 15:43:23.073\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.request_context\u001b[0m:\u001b[36mlog_request_details\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mRequest: GET /health | Status: 200 | Duration: 2.00ms | Trace: trace_6336f17a9bb54e1a\u001b[0m\n2025-08-28T15:43:23.077320907Z \u001b[32m2025-08-28 15:43:23.074\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m47\u001b[0m | \u001b[1mResponse for /health: status=200, is_api=False, has_auth=False\u001b[0m\n2025-08-28T15:43:23.077326250Z \u001b[32m2025-08-28 15:43:23.075\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m127.0.0.1:53330 - \"GET /health HTTP/1.1\" 200\u001b[0m\n2025-08-28T15:43:26.913423173Z WARNING:  WatchFiles detected changes in 'netra_backend/tests/services/test_optimized_persistence_integration.py'. Reloading...\n2025-08-28T15:43:26.961407461Z \u001b[32m2025-08-28 15:43:26.960\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mShutting down\u001b[0m\n2025-08-28T15:43:26.963223688Z \u001b[32m2025-08-28 15:43:26.960\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mShutting down\u001b[0m\n2025-08-28T15:43:26.963269205Z \u001b[32m2025-08-28 15:43:26.961\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mconnection closed\u001b[0m\n2025-08-28T15:43:26.963388630Z \u001b[32m2025-08-28 15:43:26.961\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mconnection closed\u001b[0m\n2025-08-28T15:43:26.963436905Z \u001b[32m2025-08-28 15:43:26.961\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36m_handle_websocket_messages\u001b[0m:\u001b[36m362\u001b[0m | \u001b[1mWebSocket disconnect: {'connection_id': 'conn_dev-temp-cc173c1d_9dda8614', 'user_id': 'dev-temp-cc173c1d', 'disconnect_code': 1012, 'disconnect_reason': 'No reason provided', 'connection_duration': 'Unknown'}\u001b[0m\n2025-08-28T15:43:26.963442127Z \u001b[32m2025-08-28 15:43:26.962\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36m_handle_websocket_messages\u001b[0m:\u001b[36m383\u001b[0m | \u001b[1mExiting message handling loop for connection: conn_dev-temp-cc173c1d_9dda8614 | Duration: 28.2s | Messages processed: 0 | Errors: 0 | User: dev-temp-cc173c1d\u001b[0m\n2025-08-28T15:43:26.963527976Z \u001b[32m2025-08-28 15:43:26.962\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36mwebsocket_endpoint\u001b[0m:\u001b[36m198\u001b[0m | \u001b[1mMessage handling loop ended for connection: conn_dev-temp-cc173c1d_9dda8614\u001b[0m\n2025-08-28T15:43:26.963540135Z \u001b[32m2025-08-28 15:43:26.962\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.auth\u001b[0m:\u001b[36mcleanup\u001b[0m:\u001b[36m349\u001b[0m | \u001b[1mWebSocket authenticator cleanup completed\u001b[0m\n2025-08-28T15:43:26.963543977Z \u001b[32m2025-08-28 15:43:26.962\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36mdisconnect_user\u001b[0m:\u001b[36m135\u001b[0m | \u001b[1mWebSocket disconnected: conn_dev-temp-cc173c1d_9dda8614 (1000: Normal closure)\u001b[0m\n2025-08-28T15:43:26.963640789Z \u001b[32m2025-08-28 15:43:26.962\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36mwebsocket_endpoint\u001b[0m:\u001b[36m255\u001b[0m | \u001b[1mWebSocket cleanup completed: conn_dev-temp-cc173c1d_9dda8614\u001b[0m\n2025-08-28T15:43:27.063004058Z \u001b[32m2025-08-28 15:43:27.061\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mWaiting for application shutdown.\u001b[0m\n2025-08-28T15:43:27.063046743Z \u001b[32m2025-08-28 15:43:27.061\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mWaiting for application shutdown.\u001b[0m\n2025-08-28T15:43:27.063049259Z \u001b[32m2025-08-28 15:43:27.061\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.shutdown\u001b[0m:\u001b[36mshutdown_cleanup\u001b[0m:\u001b[36m20\u001b[0m | \u001b[1mApplication shutdown initiated...\u001b[0m\n2025-08-28T15:43:27.063050923Z \u001b[32m2025-08-28 15:43:27.061\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.utils.multiprocessing_cleanup\u001b[0m:\u001b[36mcleanup_all\u001b[0m:\u001b[36m90\u001b[0m | \u001b[1mMultiprocessing resources cleaned up\u001b[0m\n2025-08-28T15:43:27.063052413Z \u001b[32m2025-08-28 15:43:27.062\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.shutdown\u001b[0m:\u001b[36mrun_complete_shutdown\u001b[0m:\u001b[36m120\u001b[0m | \u001b[1mShutting down background task manager...\u001b[0m\n2025-08-28T15:43:27.063130622Z \u001b[32m2025-08-28 15:43:27.062\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mShutting down BackgroundTaskManager...\u001b[0m\n2025-08-28T15:43:27.063146181Z \u001b[32m2025-08-28 15:43:27.062\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mBackgroundTaskManager shutdown complete\u001b[0m\n2025-08-28T15:43:27.063150014Z \u001b[32m2025-08-28 15:43:27.062\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.shutdown\u001b[0m:\u001b[36mrun_complete_shutdown\u001b[0m:\u001b[36m122\u001b[0m | \u001b[1mBackground task manager shutdown complete\u001b[0m\n2025-08-28T15:43:27.063173101Z \u001b[32m2025-08-28 15:43:27.062\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.shutdown\u001b[0m:\u001b[36mstop_monitoring\u001b[0m:\u001b[36m48\u001b[0m | \u001b[31m\u001b[1mError stopping monitoring and optimizations: 'ExecutionMonitor' object has no attribute 'stop_monitoring'\u001b[0m\n2025-08-28T15:43:27.166084905Z \u001b[32m2025-08-28 15:43:27.163\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mShutting down BackgroundTaskManager...\u001b[0m\n2025-08-28T15:43:27.166129898Z \u001b[32m2025-08-28 15:43:27.163\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mBackgroundTaskManager shutdown complete\u001b[0m\n2025-08-28T15:43:27.166132242Z \u001b[32m2025-08-28 15:43:27.164\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.base_agent\u001b[0m:\u001b[36mshutdown\u001b[0m:\u001b[36m68\u001b[0m | \u001b[1mShutting down Supervisor\u001b[0m\n2025-08-28T15:43:27.166133654Z \u001b[32m2025-08-28 15:43:27.164\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36mshutdown\u001b[0m:\u001b[36m737\u001b[0m | \u001b[1mShutting down WebSocket manager with 0 connections\u001b[0m\n2025-08-28T15:43:27.166134921Z \u001b[32m2025-08-28 15:43:27.164\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36mshutdown\u001b[0m:\u001b[36m752\u001b[0m | \u001b[1mWebSocket manager shutdown complete\u001b[0m\n2025-08-28T15:43:27.166136115Z \u001b[32m2025-08-28 15:43:27.164\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.shutdown\u001b[0m:\u001b[36mcleanup_resources\u001b[0m:\u001b[36m101\u001b[0m | \u001b[1mWebSocket manager shutdown completed\u001b[0m\n2025-08-28T15:43:27.169954441Z \u001b[32m2025-08-28 15:43:27.166\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.shutdown\u001b[0m:\u001b[36mrun_complete_shutdown\u001b[0m:\u001b[36m135\u001b[0m | \u001b[1mApplication shutdown complete.\u001b[0m\n2025-08-28T15:43:27.170342611Z \u001b[32m2025-08-28 15:43:27.167\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mApplication shutdown complete.\u001b[0m\n2025-08-28T15:43:27.171773900Z \u001b[32m2025-08-28 15:43:27.167\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mApplication shutdown complete.\u001b[0m\n2025-08-28T15:43:27.171884481Z \u001b[32m2025-08-28 15:43:27.168\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mFinished server process [1113]\u001b[0m\n2025-08-28T15:43:27.172019334Z \u001b[32m2025-08-28 15:43:27.168\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mFinished server process [1113]\u001b[0m\n2025-08-28T15:43:27.175429488Z \u001b[32m2025-08-28 15:43:27.174\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.utils.multiprocessing_cleanup\u001b[0m:\u001b[36mcleanup_all\u001b[0m:\u001b[36m90\u001b[0m | \u001b[1mMultiprocessing resources cleaned up\u001b[0m\n2025-08-28T15:43:29.285640110Z Critical environment variables already set - skipping .env loading\n2025-08-28T15:43:33.781559479Z \u001b[32m2025-08-28 15:43:33.780\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.configuration.database\u001b[0m:\u001b[36m_get_postgres_url\u001b[0m:\u001b[36m184\u001b[0m | \u001b[1mUsing PostgreSQL URL from development configuration\u001b[0m\n2025-08-28T15:43:33.794889790Z \u001b[32m2025-08-28 15:43:33.793\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[33m\u001b[1mGoogle Cloud Secret Manager not available: cannot import name 'secretmanager' from 'google.cloud' (unknown location)\u001b[0m\n2025-08-28T15:43:33.794980960Z \u001b[32m2025-08-28 15:43:33.794\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.configuration.database\u001b[0m:\u001b[36m_populate_redis_config\u001b[0m:\u001b[36m138\u001b[0m | \u001b[1mRedis Configuration (development/URL/No SSL): redis://redis:6379/0, Pool: 10, DB: 0\u001b[0m\n2025-08-28T15:43:33.799466773Z \u001b[32m2025-08-28 15:43:33.797\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.configuration.secrets\u001b[0m:\u001b[36mpopulate_secrets\u001b[0m:\u001b[36m198\u001b[0m | \u001b[1mPopulated secrets for development\u001b[0m\n2025-08-28T15:43:37.145835446Z \u001b[32m2025-08-28 15:43:37.143\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mCORS Configuration for development:\u001b[0m\n2025-08-28T15:43:37.145915062Z \u001b[32m2025-08-28 15:43:37.144\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m  Origins count: 41\u001b[0m\n2025-08-28T15:43:37.145922204Z \u001b[32m2025-08-28 15:43:37.144\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m  Allow credentials: True\u001b[0m\n2025-08-28T15:43:37.145925502Z \u001b[32m2025-08-28 15:43:37.144\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m  First 3 origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:3002']\u001b[0m\n2025-08-28T15:43:37.145932402Z \u001b[32m2025-08-28 15:43:37.145\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mCORS middleware configured for environment: development\u001b[0m\n2025-08-28T15:43:37.210505266Z \u001b[32m2025-08-28 15:43:37.209\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mAuthentication middleware configured with WebSocket exclusions\u001b[0m\n2025-08-28T15:43:37.210555508Z \u001b[32m2025-08-28 15:43:37.210\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mSession middleware config: same_site=lax, https_only=False, environment=development\u001b[0m\n2025-08-28T15:43:41.071500981Z \u001b[32m2025-08-28 15:43:41.070\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.state_persistence_optimized\u001b[0m:\u001b[36m__init__\u001b[0m:\u001b[36m52\u001b[0m | \u001b[1mOptimized state persistence service initialized\u001b[0m\n2025-08-28T15:43:43.316731460Z \u001b[32m2025-08-28 15:43:43.312\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.health.telemetry\u001b[0m:\u001b[36mregister_service\u001b[0m:\u001b[36m340\u001b[0m | \u001b[1mRegistered telemetry for service: netra-ai-platform\u001b[0m\n2025-08-28T15:43:43.933865685Z \u001b[32m2025-08-28 15:43:43.926\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.fallback_response.response_generator\u001b[0m:\u001b[36m__init__\u001b[0m:\u001b[36m30\u001b[0m | \u001b[1mResponse Generator initialized\u001b[0m\n2025-08-28T15:43:43.934202163Z \u001b[32m2025-08-28 15:43:43.928\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.quality_gate.quality_gate_core\u001b[0m:\u001b[36m__init__\u001b[0m:\u001b[36m38\u001b[0m | \u001b[1mQuality Gate Service initialized\u001b[0m\n2025-08-28T15:43:43.934254014Z \u001b[32m2025-08-28 15:43:43.928\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.quality_monitoring.service\u001b[0m:\u001b[36m__init__\u001b[0m:\u001b[36m51\u001b[0m | \u001b[1mQuality Monitoring Service initialized\u001b[0m\n2025-08-28T15:43:43.934263718Z \u001b[32m2025-08-28 15:43:43.928\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.fallback_response.response_generator\u001b[0m:\u001b[36m__init__\u001b[0m:\u001b[36m30\u001b[0m | \u001b[1mResponse Generator initialized\u001b[0m\n2025-08-28T15:43:48.369570441Z \u001b[32m2025-08-28 15:43:48.368\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mStarted server process [1160]\u001b[0m\n2025-08-28T15:43:48.369608922Z \u001b[32m2025-08-28 15:43:48.368\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mStarted server process [1160]\u001b[0m\n2025-08-28T15:43:48.369611235Z \u001b[32m2025-08-28 15:43:48.368\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mWaiting for application startup.\u001b[0m\n2025-08-28T15:43:48.369613056Z \u001b[32m2025-08-28 15:43:48.369\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mWaiting for application startup.\u001b[0m\n2025-08-28T15:43:48.394359091Z \u001b[32m2025-08-28 15:43:48.393\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.fastapi_auth_middleware\u001b[0m:\u001b[36m_get_jwt_secret_with_validation\u001b[0m:\u001b[36m677\u001b[0m | \u001b[1mJWT secret configured: 32 characters\u001b[0m\n2025-08-28T15:43:48.394392777Z \u001b[32m2025-08-28 15:43:48.393\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.fastapi_auth_middleware\u001b[0m:\u001b[36m__init__\u001b[0m:\u001b[36m76\u001b[0m | \u001b[1mFastAPIAuthMiddleware initialized with 12 excluded paths\u001b[0m\n2025-08-28T15:43:48.394394948Z \u001b[32m2025-08-28 15:43:48.393\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_headers_middleware\u001b[0m:\u001b[36m_log_initialization\u001b[0m:\u001b[36m43\u001b[0m | \u001b[1mSecurity headers middleware initialized for development environment\u001b[0m\n2025-08-28T15:43:48.394396268Z \u001b[32m2025-08-28 15:43:48.393\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36m__init__\u001b[0m:\u001b[36m36\u001b[0m | \u001b[1mSecurityResponseMiddleware initialized\u001b[0m\n2025-08-28T15:43:48.394397429Z \u001b[32m2025-08-28 15:43:48.393\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mCORSFixMiddleware initialized with 41 origins for development\u001b[0m\n2025-08-28T15:43:48.394398719Z \u001b[32m2025-08-28 15:43:48.393\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36mrun_complete_startup\u001b[0m:\u001b[36m941\u001b[0m | \u001b[1mUsing robust startup manager with dependency resolution...\u001b[0m\n2025-08-28T15:43:48.394447784Z \u001b[32m2025-08-28 15:43:48.394\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36mrun_complete_startup\u001b[0m:\u001b[36m951\u001b[0m | \u001b[1mStartup in progress flags set - health endpoint will report startup in progress\u001b[0m\n2025-08-28T15:43:48.438302662Z \u001b[32m2025-08-28 15:43:48.436\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36mrun_complete_startup\u001b[0m:\u001b[36m983\u001b[0m | \u001b[31m\u001b[1mError in robust startup: cannot access local variable 'logger' where it is not associated with a value\u001b[0m\n2025-08-28T15:43:48.438336005Z \u001b[32m2025-08-28 15:43:48.436\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36mrun_complete_startup\u001b[0m:\u001b[36m989\u001b[0m | \u001b[33m\u001b[1mFalling back to legacy startup sequence...\u001b[0m\n2025-08-28T15:43:48.438338013Z \u001b[32m2025-08-28 15:43:48.436\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36minitialize_logging\u001b[0m:\u001b[36m251\u001b[0m | \u001b[1mApplication startup...\u001b[0m\n2025-08-28T15:43:48.438339413Z \u001b[32m2025-08-28 15:43:48.437\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.utils.multiprocessing_cleanup\u001b[0m:\u001b[36msetup_multiprocessing\u001b[0m:\u001b[36m108\u001b[0m | \u001b[1mMultiprocessing configured with method: forkserver\u001b[0m\n2025-08-28T15:43:48.438349981Z \u001b[32m2025-08-28 15:43:48.437\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.database_env_service\u001b[0m:\u001b[36mvalidate_database_environment\u001b[0m:\u001b[36m49\u001b[0m | \u001b[1mDatabase environment validation passed for development\u001b[0m\n2025-08-28T15:43:48.438547835Z \u001b[32m2025-08-28 15:43:48.437\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_check_and_run_migrations\u001b[0m:\u001b[36m354\u001b[0m | \u001b[1mChecking database migrations...\u001b[0m\n2025-08-28T15:43:48.452500352Z \u001b[32m2025-08-28 15:43:48.449\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mContext impl PostgresqlImpl.\u001b[0m\n2025-08-28T15:43:48.452533789Z \u001b[32m2025-08-28 15:43:48.449\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mWill assume transactional DDL.\u001b[0m\n2025-08-28T15:43:48.455912006Z \u001b[32m2025-08-28 15:43:48.455\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_perform_migration\u001b[0m:\u001b[36m364\u001b[0m | \u001b[1mCurrent revision: add_deleted_at_001\u001b[0m\n2025-08-28T15:43:49.038390238Z \u001b[32m2025-08-28 15:43:49.037\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.db.migration_utils\u001b[0m:\u001b[36mlog_migration_status\u001b[0m:\u001b[36m199\u001b[0m | \u001b[1mDatabase is up to date\u001b[0m\n2025-08-28T15:43:49.040514471Z \u001b[32m2025-08-28 15:43:49.037\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_legacy_startup\u001b[0m:\u001b[36m1007\u001b[0m | \u001b[1mLegacy startup in progress flags set\u001b[0m\n2025-08-28T15:43:49.042136866Z \u001b[32m2025-08-28 15:43:49.037\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36msetup_database_connections\u001b[0m:\u001b[36m430\u001b[0m | \u001b[1mSetting up database connections...\u001b[0m\n2025-08-28T15:43:49.042160821Z \u001b[32m2025-08-28 15:43:49.038\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.db.postgres_core\u001b[0m:\u001b[36minitialize_postgres\u001b[0m:\u001b[36m578\u001b[0m | \u001b[1mInitializing async engine and session factory...\u001b[0m\n2025-08-28T15:43:49.042162826Z \u001b[32m2025-08-28 15:43:49.039\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.db.postgres_core\u001b[0m:\u001b[36m_create_and_setup_engine\u001b[0m:\u001b[36m514\u001b[0m | \u001b[1mPostgreSQL async engine created with resilient AsyncAdaptedQueuePool connection pooling\u001b[0m\n2025-08-28T15:43:49.042164285Z \u001b[32m2025-08-28 15:43:49.040\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_ensure_database_tables_exist\u001b[0m:\u001b[36m56\u001b[0m | \u001b[1mImporting database models to register tables...\u001b[0m\n2025-08-28T15:43:49.042165772Z \u001b[32m2025-08-28 15:43:49.040\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_ensure_database_tables_exist\u001b[0m:\u001b[36m59\u001b[0m | \u001b[1mChecking if database tables exist...\u001b[0m\n2025-08-28T15:43:49.055995344Z \u001b[32m2025-08-28 15:43:49.055\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_ensure_database_tables_exist\u001b[0m:\u001b[36m114\u001b[0m | \u001b[1mAll 26 database tables are present\u001b[0m\n2025-08-28T15:43:49.061089494Z \u001b[32m2025-08-28 15:43:49.058\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36msetup_database_connections\u001b[0m:\u001b[36m474\u001b[0m | \u001b[1mDatabase session factory successfully set on app.state\u001b[0m\n2025-08-28T15:43:49.061117951Z \u001b[32m2025-08-28 15:43:49.058\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36minitialize_core_services\u001b[0m:\u001b[36m509\u001b[0m | \u001b[1mLoading key manager...\u001b[0m\n2025-08-28T15:43:49.061119986Z \u001b[32m2025-08-28 15:43:49.058\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36minitialize_core_services\u001b[0m:\u001b[36m511\u001b[0m | \u001b[1mKey manager loaded.\u001b[0m\n2025-08-28T15:43:49.061121296Z \u001b[32m2025-08-28 15:43:49.059\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36minitialize_clickhouse\u001b[0m:\u001b[36m544\u001b[0m | \u001b[1mSkipping ClickHouse initialization in development environment (optional service - may not be available)\u001b[0m\n2025-08-28T15:43:49.061182609Z \u001b[32m2025-08-28 15:43:49.059\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_startup_phase_two\u001b[0m:\u001b[36m889\u001b[0m | \u001b[1mInitializing background task manager with 2-minute timeout...\u001b[0m\n2025-08-28T15:43:49.061190798Z \u001b[32m2025-08-28 15:43:49.059\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_startup_phase_two\u001b[0m:\u001b[36m891\u001b[0m | \u001b[1mBackground task manager initialized successfully\u001b[0m\n2025-08-28T15:43:49.061202823Z \u001b[32m2025-08-28 15:43:49.059\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_startup_phase_two\u001b[0m:\u001b[36m894\u001b[0m | \u001b[1mApplying startup fixes for critical cold start issues...\u001b[0m\n2025-08-28T15:43:49.061204393Z \u001b[32m2025-08-28 15:43:49.059\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mRunning comprehensive startup fixes verification...\u001b[0m\n2025-08-28T15:43:49.061205759Z \u001b[32m2025-08-28 15:43:49.059\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mApplied Redis mode default with fallback capability\u001b[0m\n2025-08-28T15:43:49.061278892Z \u001b[32m2025-08-28 15:43:49.059\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mService discovery disabled for microservice independence\u001b[0m\n2025-08-28T15:43:49.061286330Z \u001b[32m2025-08-28 15:43:49.059\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mDynamic port allocation is configured\u001b[0m\n2025-08-28T15:43:49.061287970Z \u001b[32m2025-08-28 15:43:49.059\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mBackground task timeout properly configured: 120s\u001b[0m\n2025-08-28T15:43:49.061289148Z \u001b[32m2025-08-28 15:43:49.060\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mRedis local fallback is configured\u001b[0m\n2025-08-28T15:43:49.061290334Z \u001b[32m2025-08-28 15:43:49.060\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mDatabase transaction rollback fix is available\u001b[0m\n2025-08-28T15:43:49.061291472Z \u001b[32m2025-08-28 15:43:49.060\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mStartup fixes verification complete: 4/5 fixes applied\u001b[0m\n2025-08-28T15:43:49.061346641Z \u001b[32m2025-08-28 15:43:49.060\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_startup_phase_two\u001b[0m:\u001b[36m898\u001b[0m | \u001b[1mStartup fixes applied: 4/5 fixes\u001b[0m\n2025-08-28T15:43:49.061348428Z \u001b[32m2025-08-28 15:43:49.060\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_startup_phase_two\u001b[0m:\u001b[36m901\u001b[0m | \u001b[33m\u001b[1mSome startup fixes could not be applied - check system configuration\u001b[0m\n2025-08-28T15:43:49.061350209Z \u001b[32m2025-08-28 15:43:49.060\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_startup_phase_two\u001b[0m:\u001b[36m902\u001b[0m | \u001b[1mStartup Fixes Status: 4/5 applied\n2025-08-28T15:43:49.061351518Z \n2025-08-28T15:43:49.061352383Z \u2705 Applied fixes:\n2025-08-28T15:43:49.061353593Z   \u2022 Environment variable mapping (CLICKHOUSE_PASSWORD)\n2025-08-28T15:43:49.061354559Z   \u2022 Background task timeout (2-minute limit)\n2025-08-28T15:43:49.061355404Z   \u2022 Database transaction rollback handling\n2025-08-28T15:43:49.061362762Z   \u2022 Redis local fallback capability\n2025-08-28T15:43:49.061363704Z \n2025-08-28T15:43:49.061364519Z \u274c Missing fixes:\n2025-08-28T15:43:49.061365363Z   \u2022 Service port conflict resolution\u001b[0m\n2025-08-28T15:43:49.061366354Z \u001b[32m2025-08-28 15:43:49.060\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36mstartup_health_checks\u001b[0m:\u001b[36m738\u001b[0m | \u001b[1mStarting comprehensive startup health checks...\u001b[0m\n2025-08-28T15:43:49.247586250Z \u001b[32m2025-08-28 15:43:49.245\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m58\u001b[0m | \u001b[1mPreparing to run 10 startup checks:\u001b[0m\n2025-08-28T15:43:49.247610705Z \u001b[32m2025-08-28 15:43:49.246\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  1. check_environment_variables\u001b[0m\n2025-08-28T15:43:49.247612590Z \u001b[32m2025-08-28 15:43:49.246\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  2. check_configuration\u001b[0m\n2025-08-28T15:43:49.247613992Z \u001b[32m2025-08-28 15:43:49.246\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  3. check_file_permissions\u001b[0m\n2025-08-28T15:43:49.247618100Z \u001b[32m2025-08-28 15:43:49.246\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  4. check_database_connection\u001b[0m\n2025-08-28T15:43:49.247619388Z \u001b[32m2025-08-28 15:43:49.246\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  5. check_redis\u001b[0m\n2025-08-28T15:43:49.247703446Z \u001b[32m2025-08-28 15:43:49.246\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  6. check_clickhouse\u001b[0m\n2025-08-28T15:43:49.247713419Z \u001b[32m2025-08-28 15:43:49.246\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  7. check_llm_providers\u001b[0m\n2025-08-28T15:43:49.247715011Z \u001b[32m2025-08-28 15:43:49.246\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  8. check_memory_and_resources\u001b[0m\n2025-08-28T15:43:49.247718363Z \u001b[32m2025-08-28 15:43:49.246\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  9. check_network_connectivity\u001b[0m\n2025-08-28T15:43:49.247919600Z \u001b[32m2025-08-28 15:43:49.246\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  10. check_or_create_assistant\u001b[0m\n2025-08-28T15:43:49.248021291Z \u001b[32m2025-08-28 15:43:49.247\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_environment_variables\u001b[0m\n2025-08-28T15:43:49.248031168Z \u001b[32m2025-08-28 15:43:49.247\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_configuration\u001b[0m\n2025-08-28T15:43:49.248039732Z \u001b[32m2025-08-28 15:43:49.247\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_file_permissions\u001b[0m\n2025-08-28T15:43:49.255201552Z \u001b[32m2025-08-28 15:43:49.254\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_database_connection\u001b[0m\n2025-08-28T15:43:49.276907057Z \u001b[32m2025-08-28 15:43:49.276\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_redis\u001b[0m\n2025-08-28T15:43:49.278234797Z \u001b[32m2025-08-28 15:43:49.277\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.redis_manager\u001b[0m:\u001b[36m_test_redis_connection\u001b[0m:\u001b[36m114\u001b[0m | \u001b[1mRedis connected successfully\u001b[0m\n2025-08-28T15:43:49.280959372Z \u001b[32m2025-08-28 15:43:49.279\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_clickhouse\u001b[0m\n2025-08-28T15:43:49.283339460Z \u001b[32m2025-08-28 15:43:49.280\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.db.clickhouse\u001b[0m:\u001b[36m_create_mock_client\u001b[0m:\u001b[36m132\u001b[0m | \u001b[1m[ClickHouse] Using MOCK client for development\u001b[0m\n2025-08-28T15:43:49.283371253Z \u001b[32m2025-08-28 15:43:49.280\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.service_checks\u001b[0m:\u001b[36m_log_clickhouse_warning_if_needed\u001b[0m:\u001b[36m242\u001b[0m | \u001b[33m\u001b[1mClickHouse not available - analytics features limited\u001b[0m\n2025-08-28T15:43:49.283375683Z \u001b[32m2025-08-28 15:43:49.280\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_llm_providers\u001b[0m\n2025-08-28T15:43:49.283585388Z \u001b[32m2025-08-28 15:43:49.281\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.service_checks\u001b[0m:\u001b[36m_handle_llm_test_failure\u001b[0m:\u001b[36m197\u001b[0m | \u001b[1mLLM 'default' failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:43:49.283772192Z \u001b[32m2025-08-28 15:43:49.281\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.service_checks\u001b[0m:\u001b[36m_handle_llm_test_failure\u001b[0m:\u001b[36m197\u001b[0m | \u001b[1mLLM 'analysis' failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:43:49.284199815Z \u001b[32m2025-08-28 15:43:49.281\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.service_checks\u001b[0m:\u001b[36m_handle_llm_test_failure\u001b[0m:\u001b[36m197\u001b[0m | \u001b[1mLLM 'triage' failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:43:49.284242726Z \u001b[32m2025-08-28 15:43:49.282\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.service_checks\u001b[0m:\u001b[36m_handle_llm_test_failure\u001b[0m:\u001b[36m197\u001b[0m | \u001b[1mLLM 'data' failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:43:49.284250474Z \u001b[32m2025-08-28 15:43:49.282\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.service_checks\u001b[0m:\u001b[36m_handle_llm_test_failure\u001b[0m:\u001b[36m197\u001b[0m | \u001b[1mLLM 'optimizations_core' failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:43:49.284254105Z \u001b[32m2025-08-28 15:43:49.282\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.service_checks\u001b[0m:\u001b[36m_handle_llm_test_failure\u001b[0m:\u001b[36m197\u001b[0m | \u001b[1mLLM 'actions_to_meet_goals' failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:43:49.284256564Z \u001b[32m2025-08-28 15:43:49.282\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.service_checks\u001b[0m:\u001b[36m_handle_llm_test_failure\u001b[0m:\u001b[36m197\u001b[0m | \u001b[1mLLM 'reporting' failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:43:49.284258912Z \u001b[32m2025-08-28 15:43:49.282\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_memory_and_resources\u001b[0m\n2025-08-28T15:43:49.284264139Z \u001b[32m2025-08-28 15:43:49.283\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_network_connectivity\u001b[0m\n2025-08-28T15:43:49.285276721Z \u001b[32m2025-08-28 15:43:49.284\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_or_create_assistant\u001b[0m\n2025-08-28T15:43:49.285434402Z /usr/local/lib/python3.11/contextlib.py:210: DeprecationWarning: postgres_session.get_async_db() is deprecated. Use 'from netra_backend.app.database import get_db' instead.\n2025-08-28T15:43:49.285443454Z   return await anext(self.gen)\n2025-08-28T15:43:49.353116347Z \u001b[32m2025-08-28 15:43:49.350\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m140\u001b[0m | \u001b[1m=== STARTUP CHECKS SUMMARY ===\u001b[0m\n2025-08-28T15:43:49.353500780Z \u001b[32m2025-08-28 15:43:49.350\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m141\u001b[0m | \u001b[1mTotal checks: 10\u001b[0m\n2025-08-28T15:43:49.353518347Z \u001b[32m2025-08-28 15:43:49.350\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m142\u001b[0m | \u001b[1mPassed: 8\u001b[0m\n2025-08-28T15:43:49.353625444Z \u001b[32m2025-08-28 15:43:49.350\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m143\u001b[0m | \u001b[1mFailed (critical): 0\u001b[0m\n2025-08-28T15:43:49.353632842Z \u001b[32m2025-08-28 15:43:49.350\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m144\u001b[0m | \u001b[1mFailed (non-critical): 2\u001b[0m\n2025-08-28T15:43:49.353745445Z \u001b[32m2025-08-28 15:43:49.350\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m145\u001b[0m | \u001b[1mTotal duration: 104.66ms\u001b[0m\n2025-08-28T15:43:49.353812545Z \u001b[32m2025-08-28 15:43:49.351\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  PASS: environment_variables (0.05ms) - Development mode - using default configs (Optional missing: GOOGLE_CLIENT_ID, GOOGLE_CLIENT_SECRET)\u001b[0m\n2025-08-28T15:43:49.353815963Z \u001b[32m2025-08-28 15:43:49.351\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  PASS: configuration (0.02ms) - Configuration valid for development environment\u001b[0m\n2025-08-28T15:43:49.353879268Z \u001b[32m2025-08-28 15:43:49.351\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  PASS: file_permissions (7.01ms) - All required directories are accessible\u001b[0m\n2025-08-28T15:43:49.353894935Z \u001b[32m2025-08-28 15:43:49.351\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  PASS: database_connection (21.46ms) - PostgreSQL connected and schema valid\u001b[0m\n2025-08-28T15:43:49.353901104Z \u001b[32m2025-08-28 15:43:49.351\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  PASS: redis_connection (3.53ms) - Redis connected and operational\u001b[0m\n2025-08-28T15:43:49.353903006Z \u001b[32m2025-08-28 15:43:49.351\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  FAIL-WARN: clickhouse_connection (0.61ms) - ClickHouse check failed: Missing ClickHouse tables: ['workload_events']\u001b[0m\n2025-08-28T15:43:49.353967822Z \u001b[32m2025-08-28 15:43:49.351\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  FAIL-WARN: llm_providers (2.27ms) - No LLM providers available\u001b[0m\n2025-08-28T15:43:49.354469068Z \u001b[32m2025-08-28 15:43:49.351\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  PASS: system_resources (0.68ms) - Resources OK: 27.3GB RAM, 876.2GB disk, 20 CPUs\u001b[0m\n2025-08-28T15:43:49.354674119Z \u001b[32m2025-08-28 15:43:49.351\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  PASS: network_connectivity (0.94ms) - All network endpoints reachable\u001b[0m\n2025-08-28T15:43:49.354697185Z \u001b[32m2025-08-28 15:43:49.351\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  PASS: netra_assistant (65.33ms) - Netra assistant already exists\u001b[0m\n2025-08-28T15:43:49.354807720Z \u001b[32m2025-08-28 15:43:49.352\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.utils\u001b[0m:\u001b[36m_log_startup_results\u001b[0m:\u001b[36m32\u001b[0m | \u001b[1mStartup checks completed in 105ms\u001b[0m\n2025-08-28T15:43:49.354810895Z \u001b[32m2025-08-28 15:43:49.352\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.utils\u001b[0m:\u001b[36m_log_startup_results\u001b[0m:\u001b[36m33\u001b[0m | \u001b[1mResults: 8/10 passed\u001b[0m\n2025-08-28T15:43:49.354850569Z \u001b[32m2025-08-28 15:43:49.352\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.utils\u001b[0m:\u001b[36m_log_non_critical_failures\u001b[0m:\u001b[36m48\u001b[0m | \u001b[33m\u001b[1mNon-critical startup checks failed:\u001b[0m\n2025-08-28T15:43:49.355133924Z \u001b[32m2025-08-28 15:43:49.352\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.utils\u001b[0m:\u001b[36m_log_non_critical_failures\u001b[0m:\u001b[36m51\u001b[0m | \u001b[33m\u001b[1m  - clickhouse_connection: ClickHouse check failed: Missing ClickHouse tables: ['workload_events']\u001b[0m\n2025-08-28T15:43:49.356769145Z \u001b[32m2025-08-28 15:43:49.352\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.utils\u001b[0m:\u001b[36m_log_non_critical_failures\u001b[0m:\u001b[36m51\u001b[0m | \u001b[33m\u001b[1m  - llm_providers: No LLM providers available\u001b[0m\n2025-08-28T15:43:49.356904162Z \u001b[32m2025-08-28 15:43:49.352\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36mstartup_health_checks\u001b[0m:\u001b[36m749\u001b[0m | \u001b[1mStartup checks completed: 8/10 passed\u001b[0m\n2025-08-28T15:43:49.356913100Z \u001b[32m2025-08-28 15:43:49.352\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36mstartup_health_checks\u001b[0m:\u001b[36m754\u001b[0m | \u001b[33m\u001b[1mSome startup checks failed (2), but continuing in graceful mode\u001b[0m\n2025-08-28T15:43:49.390126954Z \u001b[32m2025-08-28 15:43:49.389\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.services.schema_validation_service\u001b[0m:\u001b[36m_log_missing_columns\u001b[0m:\u001b[36m107\u001b[0m | \u001b[31m\u001b[1mMissing columns in table research_sessions: ['error_message', 'completed_at']\u001b[0m\n2025-08-28T15:43:49.390171466Z \u001b[32m2025-08-28 15:43:49.389\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.services.schema_validation_service\u001b[0m:\u001b[36m_log_warnings\u001b[0m:\u001b[36m113\u001b[0m | \u001b[33m\u001b[1mExtra tables in database not defined in models: {'auth_audit_logs', 'password_reset_tokens', 'alembic_version', 'auth_users', 'userbase', 'auth_sessions'}\u001b[0m\n2025-08-28T15:43:49.390622883Z \u001b[32m2025-08-28 15:43:49.390\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.services.schema_validation_service\u001b[0m:\u001b[36mrun_comprehensive_validation\u001b[0m:\u001b[36m234\u001b[0m | \u001b[31m\u001b[1mSchema validation failed: {'passed': False, 'missing_tables': [], 'missing_columns': {'research_sessions': ['error_message', 'completed_at']}, 'type_mismatches': {}, 'warnings': [\"Extra tables in database not defined in models: {'auth_audit_logs', 'password_reset_tokens', 'alembic_version', 'auth_users', 'userbase', 'auth_sessions'}\"]}\u001b[0m\n2025-08-28T15:43:49.390653997Z \u001b[32m2025-08-28 15:43:49.390\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_handle_schema_validation_result\u001b[0m:\u001b[36m824\u001b[0m | \u001b[31m\u001b[1mSchema validation failed. The application might not work as expected.\u001b[0m\n2025-08-28T15:43:49.407845885Z \u001b[32m2025-08-28 15:43:49.407\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36minitialize_websocket_components\u001b[0m:\u001b[36m718\u001b[0m | \u001b[1mWebSocket components initialized\u001b[0m\n2025-08-28T15:43:50.716235497Z \u001b[32m2025-08-28 15:43:50.714\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: triage\u001b[0m\n2025-08-28T15:43:50.718769702Z \u001b[32m2025-08-28 15:43:50.715\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: data\u001b[0m\n2025-08-28T15:43:50.718781148Z \u001b[32m2025-08-28 15:43:50.715\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: optimization\u001b[0m\n2025-08-28T15:43:50.718782881Z \u001b[32m2025-08-28 15:43:50.715\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: actions\u001b[0m\n2025-08-28T15:43:50.718784094Z \u001b[32m2025-08-28 15:43:50.715\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: reporting\u001b[0m\n2025-08-28T15:43:50.718785220Z \u001b[32m2025-08-28 15:43:50.716\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: synthetic_data\u001b[0m\n2025-08-28T15:43:50.718786588Z \u001b[32m2025-08-28 15:43:50.716\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: corpus_admin\u001b[0m\n2025-08-28T15:43:50.718787716Z \u001b[32m2025-08-28 15:43:50.716\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_create_agent_supervisor\u001b[0m:\u001b[36m656\u001b[0m | \u001b[1mAgent supervisor created successfully\u001b[0m\n2025-08-28T15:43:50.718813915Z \u001b[32m2025-08-28 15:43:50.716\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.database.health_checker\u001b[0m:\u001b[36mstart_monitoring\u001b[0m:\u001b[36m29\u001b[0m | \u001b[1mStarting database connection monitoring\u001b[0m\n2025-08-28T15:43:50.719013913Z \u001b[32m2025-08-28 15:43:50.716\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.base.monitoring\u001b[0m:\u001b[36mstart_monitoring\u001b[0m:\u001b[36m318\u001b[0m | \u001b[1mExecution monitoring started\u001b[0m\n2025-08-28T15:43:50.719313457Z \u001b[32m2025-08-28 15:43:50.716\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_create_monitoring_task\u001b[0m:\u001b[36m848\u001b[0m | \u001b[1mComprehensive monitoring started\u001b[0m\n2025-08-28T15:43:50.719331921Z \u001b[32m2025-08-28 15:43:50.717\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.performance_optimization_manager\u001b[0m:\u001b[36minitialize\u001b[0m:\u001b[36m43\u001b[0m | \u001b[1mPerformance optimization manager initialized\u001b[0m\n2025-08-28T15:43:50.719335450Z \u001b[32m2025-08-28 15:43:50.717\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mCreated background task 'database_index_optimization' (ID: 153401e8-07fd-438e-b905-6bddb7d419af) with 120s timeout\u001b[0m\n2025-08-28T15:43:50.719338560Z \u001b[32m2025-08-28 15:43:50.717\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_schedule_background_optimizations\u001b[0m:\u001b[36m224\u001b[0m | \u001b[1mDatabase index optimization scheduled as background task (ID: 153401e8-07fd-438e-b905-6bddb7d419af)\u001b[0m\n2025-08-28T15:43:50.719340841Z \u001b[32m2025-08-28 15:43:50.717\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_initialize_performance_optimizations\u001b[0m:\u001b[36m194\u001b[0m | \u001b[1mPerformance optimizations initialized successfully\u001b[0m\n2025-08-28T15:43:50.719342960Z \u001b[32m2025-08-28 15:43:50.717\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_legacy_startup\u001b[0m:\u001b[36m1016\u001b[0m | \u001b[1mLegacy startup completion flags set - health endpoint will report healthy\u001b[0m\n2025-08-28T15:43:50.719383834Z \u001b[32m2025-08-28 15:43:50.717\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36mlog_startup_complete\u001b[0m:\u001b[36m869\u001b[0m | \u001b[1mSystem Ready (Took 2.28s).\u001b[0m\n2025-08-28T15:43:50.720514991Z \u001b[32m2025-08-28 15:43:50.719\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mApplication startup complete.\u001b[0m\n2025-08-28T15:43:50.720534193Z \u001b[32m2025-08-28 15:43:50.720\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mApplication startup complete.\u001b[0m\n2025-08-28T15:43:50.724468510Z \u001b[32m2025-08-28 15:43:50.723\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m41\u001b[0m | \u001b[1mSecurityResponseMiddleware processing: /api/mcp/servers\u001b[0m\n2025-08-28T15:43:50.724858047Z /usr/local/lib/python3.11/site-packages/websockets/legacy/server.py:1178: DeprecationWarning: remove second argument of ws_handler\n2025-08-28T15:43:50.724877121Z   warnings.warn(\"remove second argument of ws_handler\", DeprecationWarning)\n2025-08-28T15:43:50.725541243Z \u001b[32m2025-08-28 15:43:50.725\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m41\u001b[0m | \u001b[1mSecurityResponseMiddleware processing: /api/mcp/tools\u001b[0m\n2025-08-28T15:43:50.726863057Z \u001b[32m2025-08-28 15:43:50.726\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m('172.18.0.1', 55140) - \"WebSocket /ws\" [accepted]\u001b[0m\n2025-08-28T15:43:50.726878841Z \u001b[32m2025-08-28 15:43:50.726\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m('172.18.0.1', 55140) - \"WebSocket /ws\" [accepted]\u001b[0m\n2025-08-28T15:43:50.726880618Z \u001b[32m2025-08-28 15:43:50.726\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36mwebsocket_endpoint\u001b[0m:\u001b[36m121\u001b[0m | \u001b[1mWebSocket accepted with subprotocol: jwt-auth\u001b[0m\n2025-08-28T15:43:50.746768167Z \u001b[32m2025-08-28 15:43:50.743\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.websocket_cors\u001b[0m:\u001b[36mget_websocket_cors_handler\u001b[0m:\u001b[36m566\u001b[0m | \u001b[1mWebSocket CORS: Detected environment from config: 'development'\u001b[0m\n2025-08-28T15:43:50.746791357Z \u001b[32m2025-08-28 15:43:50.743\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.websocket_cors\u001b[0m:\u001b[36mget_environment_origins_for_environment\u001b[0m:\u001b[36m441\u001b[0m | \u001b[1mWebSocket CORS configured for environment 'development' with 41 allowed origins\u001b[0m\n2025-08-28T15:43:50.746793242Z \u001b[32m2025-08-28 15:43:50.743\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.websocket_cors\u001b[0m:\u001b[36mget_environment_origins_for_environment\u001b[0m:\u001b[36m450\u001b[0m | \u001b[1mWebSocket CORS: Running in DEVELOPMENT mode with permissive origins\u001b[0m\n2025-08-28T15:43:50.746794505Z \u001b[32m2025-08-28 15:43:50.743\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.websocket_cors\u001b[0m:\u001b[36mget_websocket_cors_handler\u001b[0m:\u001b[36m583\u001b[0m | \u001b[1mWebSocket CORS: Creating handler for environment 'development' with 41 origins\u001b[0m\n2025-08-28T15:43:50.746795742Z \u001b[32m2025-08-28 15:43:50.745\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.websocket_cors\u001b[0m:\u001b[36mvalidate_websocket_origin\u001b[0m:\u001b[36m360\u001b[0m | \u001b[1mWebSocket connection allowed from origin: http://127.0.0.1:3000 in development environment\u001b[0m\n2025-08-28T15:43:50.746799073Z \u001b[32m2025-08-28 15:43:50.745\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mStarted trace span: websocket_jwt_validation (trace_id: 5af34d30d8fc426c9cc9a75a34ef16fc)\u001b[0m\n2025-08-28T15:43:50.746878318Z \u001b[32m2025-08-28 15:43:50.746\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mconnection open\u001b[0m\n2025-08-28T15:43:50.747142730Z \u001b[32m2025-08-28 15:43:50.746\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mconnection open\u001b[0m\n2025-08-28T15:43:50.757418529Z \u001b[32m2025-08-28 15:43:50.751\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m41\u001b[0m | \u001b[1mSecurityResponseMiddleware processing: /api/mcp/servers\u001b[0m\n2025-08-28T15:43:50.766705998Z \u001b[32m2025-08-28 15:43:50.752\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m41\u001b[0m | \u001b[1mSecurityResponseMiddleware processing: /api/mcp/tools\u001b[0m\n2025-08-28T15:43:50.771874612Z \u001b[32m2025-08-28 15:43:50.758\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: triage\u001b[0m\n2025-08-28T15:43:50.792256273Z \u001b[32m2025-08-28 15:43:50.758\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: data\u001b[0m\n2025-08-28T15:43:50.794175057Z \u001b[32m2025-08-28 15:43:50.758\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: optimization\u001b[0m\n2025-08-28T15:43:50.802129315Z \u001b[32m2025-08-28 15:43:50.759\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: actions\u001b[0m\n2025-08-28T15:43:50.802638214Z \u001b[32m2025-08-28 15:43:50.759\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: reporting\u001b[0m\n2025-08-28T15:43:50.818211594Z \u001b[32m2025-08-28 15:43:50.759\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: synthetic_data\u001b[0m\n2025-08-28T15:43:50.820409686Z \u001b[32m2025-08-28 15:43:50.759\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: corpus_admin\u001b[0m\n2025-08-28T15:43:50.825875458Z \u001b[32m2025-08-28 15:43:50.773\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: triage\u001b[0m\n2025-08-28T15:43:50.829377634Z \u001b[32m2025-08-28 15:43:50.774\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: data\u001b[0m\n2025-08-28T15:43:50.829409436Z \u001b[32m2025-08-28 15:43:50.774\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: optimization\u001b[0m\n2025-08-28T15:43:50.829413537Z \u001b[32m2025-08-28 15:43:50.774\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: actions\u001b[0m\n2025-08-28T15:43:50.829416179Z \u001b[32m2025-08-28 15:43:50.775\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: reporting\u001b[0m\n2025-08-28T15:43:50.829418521Z \u001b[32m2025-08-28 15:43:50.775\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: synthetic_data\u001b[0m\n2025-08-28T15:43:50.829435279Z \u001b[32m2025-08-28 15:43:50.775\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: corpus_admin\u001b[0m\n2025-08-28T15:43:50.829438236Z \u001b[32m2025-08-28 15:43:50.791\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.netra_mcp.modules.netra_mcp_core\u001b[0m:\u001b[36m_register_components\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mMCP Server components registered\u001b[0m\n2025-08-28T15:43:50.829440578Z \u001b[32m2025-08-28 15:43:50.791\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.netra_mcp.modules.netra_mcp_core\u001b[0m:\u001b[36mset_services\u001b[0m:\u001b[36m56\u001b[0m | \u001b[1mMCP Server services configured\u001b[0m\n2025-08-28T15:43:50.829442891Z \u001b[32m2025-08-28 15:43:50.791\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.mcp_service\u001b[0m:\u001b[36m_initialize_session_storage\u001b[0m:\u001b[36m106\u001b[0m | \u001b[1mMCP Service initialized with FastMCP 2\u001b[0m\n2025-08-28T15:43:50.829445682Z \u001b[32m2025-08-28 15:43:50.793\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.netra_mcp.modules.netra_mcp_core\u001b[0m:\u001b[36m_register_components\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mMCP Server components registered\u001b[0m\n2025-08-28T15:43:50.829448938Z \u001b[32m2025-08-28 15:43:50.793\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.netra_mcp.modules.netra_mcp_core\u001b[0m:\u001b[36mset_services\u001b[0m:\u001b[36m56\u001b[0m | \u001b[1mMCP Server services configured\u001b[0m\n2025-08-28T15:43:50.829458253Z \u001b[32m2025-08-28 15:43:50.793\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.mcp_service\u001b[0m:\u001b[36m_initialize_session_storage\u001b[0m:\u001b[36m106\u001b[0m | \u001b[1mMCP Service initialized with FastMCP 2\u001b[0m\n2025-08-28T15:43:50.829461300Z \u001b[32m2025-08-28 15:43:50.795\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: triage\u001b[0m\n2025-08-28T15:43:50.829463725Z \u001b[32m2025-08-28 15:43:50.795\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: data\u001b[0m\n2025-08-28T15:43:50.829469981Z \u001b[32m2025-08-28 15:43:50.795\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: optimization\u001b[0m\n2025-08-28T15:43:50.829584148Z \u001b[32m2025-08-28 15:43:50.795\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: actions\u001b[0m\n2025-08-28T15:43:50.829594501Z \u001b[32m2025-08-28 15:43:50.796\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: reporting\u001b[0m\n2025-08-28T15:43:50.829596403Z \u001b[32m2025-08-28 15:43:50.796\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: synthetic_data\u001b[0m\n2025-08-28T15:43:50.829606424Z \u001b[32m2025-08-28 15:43:50.796\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: corpus_admin\u001b[0m\n2025-08-28T15:43:50.829607758Z \u001b[32m2025-08-28 15:43:50.802\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: triage\u001b[0m\n2025-08-28T15:43:50.829608990Z \u001b[32m2025-08-28 15:43:50.803\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: data\u001b[0m\n2025-08-28T15:43:50.829610274Z \u001b[32m2025-08-28 15:43:50.803\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: optimization\u001b[0m\n2025-08-28T15:43:50.829615046Z \u001b[32m2025-08-28 15:43:50.803\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: actions\u001b[0m\n2025-08-28T15:43:50.829616377Z \u001b[32m2025-08-28 15:43:50.803\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: reporting\u001b[0m\n2025-08-28T15:43:50.829692323Z \u001b[32m2025-08-28 15:43:50.804\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: synthetic_data\u001b[0m\n2025-08-28T15:43:50.829697941Z \u001b[32m2025-08-28 15:43:50.804\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: corpus_admin\u001b[0m\n2025-08-28T15:43:50.829699396Z \u001b[32m2025-08-28 15:43:50.817\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.netra_mcp.modules.netra_mcp_core\u001b[0m:\u001b[36m_register_components\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mMCP Server components registered\u001b[0m\n2025-08-28T15:43:50.829700720Z \u001b[32m2025-08-28 15:43:50.817\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.netra_mcp.modules.netra_mcp_core\u001b[0m:\u001b[36mset_services\u001b[0m:\u001b[36m56\u001b[0m | \u001b[1mMCP Server services configured\u001b[0m\n2025-08-28T15:43:50.829702057Z \u001b[32m2025-08-28 15:43:50.817\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.mcp_service\u001b[0m:\u001b[36m_initialize_session_storage\u001b[0m:\u001b[36m106\u001b[0m | \u001b[1mMCP Service initialized with FastMCP 2\u001b[0m\n2025-08-28T15:43:50.829703518Z \u001b[32m2025-08-28 15:43:50.828\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.netra_mcp.modules.netra_mcp_core\u001b[0m:\u001b[36m_register_components\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mMCP Server components registered\u001b[0m\n2025-08-28T15:43:50.829704963Z \u001b[32m2025-08-28 15:43:50.828\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.netra_mcp.modules.netra_mcp_core\u001b[0m:\u001b[36mset_services\u001b[0m:\u001b[36m56\u001b[0m | \u001b[1mMCP Server services configured\u001b[0m\n2025-08-28T15:43:50.829716968Z \u001b[32m2025-08-28 15:43:50.828\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.mcp_service\u001b[0m:\u001b[36m_initialize_session_storage\u001b[0m:\u001b[36m106\u001b[0m | \u001b[1mMCP Service initialized with FastMCP 2\u001b[0m\n2025-08-28T15:43:50.833415254Z \u001b[32m2025-08-28 15:43:50.832\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mHTTP Request: POST http://auth:8081/auth/check-blacklist \"HTTP/1.1 200 OK\"\u001b[0m\n2025-08-28T15:43:50.841100331Z \u001b[32m2025-08-28 15:43:50.839\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mHTTP Request: POST http://auth:8081/auth/validate \"HTTP/1.1 200 OK\"\u001b[0m\n2025-08-28T15:43:50.842762180Z \u001b[32m2025-08-28 15:43:50.841\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mCompleted trace span: websocket_jwt_validation\u001b[0m\n2025-08-28T15:43:50.843989828Z \u001b[32m2025-08-28 15:43:50.842\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.auth\u001b[0m:\u001b[36mauthenticate_websocket\u001b[0m:\u001b[36m121\u001b[0m | \u001b[1mWebSocket authenticated: dev-temp-cc173c1d\u001b[0m\n2025-08-28T15:43:50.844011824Z \u001b[32m2025-08-28 15:43:50.842\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36mwebsocket_endpoint\u001b[0m:\u001b[36m154\u001b[0m | \u001b[1mWebSocket authenticated for user: dev-temp-cc173c1d at 2025-08-28T15:43:50.842175+00:00\u001b[0m\n2025-08-28T15:43:50.844014117Z \u001b[32m2025-08-28 15:43:50.842\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36mconnect_user\u001b[0m:\u001b[36m124\u001b[0m | \u001b[1mWebSocket connected: conn_dev-temp-cc173c1d_fd987ed8 for user dev-temp-cc173c1d\u001b[0m\n2025-08-28T15:43:50.844015701Z \u001b[32m2025-08-28 15:43:50.842\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36mwebsocket_endpoint\u001b[0m:\u001b[36m188\u001b[0m | \u001b[1mWebSocket ready: conn_dev-temp-cc173c1d_fd987ed8\u001b[0m\n2025-08-28T15:43:50.844122489Z \u001b[32m2025-08-28 15:43:50.842\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36mwebsocket_endpoint\u001b[0m:\u001b[36m191\u001b[0m | \u001b[1mStarting message handling loop for connection: conn_dev-temp-cc173c1d_fd987ed8\u001b[0m\n2025-08-28T15:43:50.848925185Z \u001b[32m2025-08-28 15:43:50.842\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36mwebsocket_endpoint\u001b[0m:\u001b[36m193\u001b[0m | \u001b[1mWebSocket state before loop - client_state: WebSocketState.CONNECTED, application_state: WebSocketState.CONNECTED\u001b[0m\n2025-08-28T15:43:50.848963898Z \u001b[32m2025-08-28 15:43:50.843\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36m_handle_websocket_messages\u001b[0m:\u001b[36m276\u001b[0m | \u001b[1mEntering message handling loop for connection: conn_dev-temp-cc173c1d_fd987ed8 (user: dev-temp-cc173c1d)\u001b[0m\n2025-08-28T15:43:50.848966139Z \u001b[32m2025-08-28 15:43:50.843\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36m_handle_websocket_messages\u001b[0m:\u001b[36m279\u001b[0m | \u001b[1mWebSocket state at loop entry - client_state: WebSocketState.CONNECTED, application_state: WebSocketState.CONNECTED\u001b[0m\n2025-08-28T15:43:50.849015874Z \u001b[32m2025-08-28 15:43:50.843\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36m_handle_websocket_messages\u001b[0m:\u001b[36m285\u001b[0m | \u001b[1mFirst loop iteration for conn_dev-temp-cc173c1d_fd987ed8, WebSocket is_connected returned True\u001b[0m\n2025-08-28T15:43:50.850190065Z \u001b[32m2025-08-28 15:43:50.844\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mHTTP Request: POST http://auth:8081/auth/check-blacklist \"HTTP/1.1 200 OK\"\u001b[0m\n2025-08-28T15:43:50.851733139Z \u001b[32m2025-08-28 15:43:50.845\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mHTTP Request: POST http://auth:8081/auth/check-blacklist \"HTTP/1.1 200 OK\"\u001b[0m\n2025-08-28T15:43:50.857376881Z \u001b[32m2025-08-28 15:43:50.848\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mHTTP Request: POST http://auth:8081/auth/check-blacklist \"HTTP/1.1 200 OK\"\u001b[0m\n2025-08-28T15:43:50.857410195Z \u001b[32m2025-08-28 15:43:50.850\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mHTTP Request: POST http://auth:8081/auth/check-blacklist \"HTTP/1.1 200 OK\"\u001b[0m\n2025-08-28T15:43:50.857412491Z \u001b[32m2025-08-28 15:43:50.853\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mHTTP Request: POST http://auth:8081/auth/validate \"HTTP/1.1 200 OK\"\u001b[0m\n2025-08-28T15:43:50.858881393Z \u001b[32m2025-08-28 15:43:50.855\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mHTTP Request: POST http://auth:8081/auth/validate \"HTTP/1.1 200 OK\"\u001b[0m\n2025-08-28T15:43:50.861137132Z \u001b[32m2025-08-28 15:43:50.860\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mHTTP Request: POST http://auth:8081/auth/validate \"HTTP/1.1 200 OK\"\u001b[0m\n2025-08-28T15:43:50.864214951Z \u001b[32m2025-08-28 15:43:50.863\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mHTTP Request: POST http://auth:8081/auth/validate \"HTTP/1.1 200 OK\"\u001b[0m\n2025-08-28T15:43:50.998153774Z \u001b[32m2025-08-28 15:43:50.994\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[33m\u001b[1mUsing dev user: dev@example.com\u001b[0m\n2025-08-28T15:43:51.140968786Z \u001b[32m2025-08-28 15:43:50.999\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[33m\u001b[1mUsing dev user: dev@example.com\u001b[0m\n2025-08-28T15:43:51.141620195Z \u001b[32m2025-08-28 15:43:51.001\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[33m\u001b[1mUsing dev user: dev@example.com\u001b[0m\n2025-08-28T15:43:51.145321152Z \u001b[32m2025-08-28 15:43:51.003\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[33m\u001b[1mUsing dev user: dev@example.com\u001b[0m\n2025-08-28T15:43:51.145979787Z \u001b[32m2025-08-28 15:43:51.005\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.request_context\u001b[0m:\u001b[36mlog_request_details\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mRequest: GET /api/mcp/tools | Status: 200 | Duration: 249.88ms | Trace: trace_5b3b561675814d87\u001b[0m\n2025-08-28T15:43:51.150585311Z \u001b[32m2025-08-28 15:43:51.009\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.request_context\u001b[0m:\u001b[36mlog_request_details\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mRequest: GET /api/mcp/tools | Status: 200 | Duration: 257.04ms | Trace: trace_74a1f28f055b4dad\u001b[0m\n2025-08-28T15:43:51.154925647Z \u001b[32m2025-08-28 15:43:51.010\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.request_context\u001b[0m:\u001b[36mlog_request_details\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mRequest: GET /api/mcp/servers | Status: 200 | Duration: 255.94ms | Trace: trace_65c176f4cfb34472\u001b[0m\n2025-08-28T15:43:51.154952270Z \u001b[32m2025-08-28 15:43:51.144\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.request_context\u001b[0m:\u001b[36mlog_request_details\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mRequest: GET /api/mcp/servers | Status: 200 | Duration: 398.16ms | Trace: trace_335493a2644e4c20\u001b[0m\n2025-08-28T15:43:51.154954367Z \u001b[32m2025-08-28 15:43:51.144\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m47\u001b[0m | \u001b[1mResponse for /api/mcp/tools: status=200, is_api=True, has_auth=False\u001b[0m\n2025-08-28T15:43:51.154955965Z \u001b[32m2025-08-28 15:43:51.146\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m172.18.0.7:55996 - \"GET /api/mcp/tools HTTP/1.1\" 200\u001b[0m\n2025-08-28T15:43:51.154957468Z \u001b[32m2025-08-28 15:43:51.146\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m47\u001b[0m | \u001b[1mResponse for /api/mcp/tools: status=200, is_api=True, has_auth=False\u001b[0m\n2025-08-28T15:43:51.154958909Z \u001b[32m2025-08-28 15:43:51.147\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m47\u001b[0m | \u001b[1mResponse for /api/mcp/servers: status=200, is_api=True, has_auth=False\u001b[0m\n2025-08-28T15:43:51.155062052Z \u001b[32m2025-08-28 15:43:51.148\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m47\u001b[0m | \u001b[1mResponse for /api/mcp/servers: status=200, is_api=True, has_auth=False\u001b[0m\n2025-08-28T15:43:51.155064269Z \u001b[32m2025-08-28 15:43:51.148\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m172.18.0.7:50540 - \"GET /api/mcp/tools HTTP/1.1\" 200\u001b[0m\n2025-08-28T15:43:51.158083880Z \u001b[32m2025-08-28 15:43:51.149\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m172.18.0.7:55980 - \"GET /api/mcp/servers HTTP/1.1\" 200\u001b[0m\n2025-08-28T15:43:51.159526370Z \u001b[32m2025-08-28 15:43:51.151\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m172.18.0.7:50538 - \"GET /api/mcp/servers HTTP/1.1\" 200\u001b[0m\n2025-08-28T15:43:53.154903838Z \u001b[32m2025-08-28 15:43:53.150\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m41\u001b[0m | \u001b[1mSecurityResponseMiddleware processing: /health\u001b[0m\n2025-08-28T15:43:53.154936010Z \u001b[32m2025-08-28 15:43:53.152\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.request_context\u001b[0m:\u001b[36mlog_request_details\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mRequest: GET /health | Status: 200 | Duration: 1.58ms | Trace: trace_232cf23287bb4a62\u001b[0m\n2025-08-28T15:43:53.154938026Z \u001b[32m2025-08-28 15:43:53.153\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m47\u001b[0m | \u001b[1mResponse for /health: status=200, is_api=False, has_auth=False\u001b[0m\n2025-08-28T15:43:53.154939404Z \u001b[32m2025-08-28 15:43:53.153\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m127.0.0.1:47330 - \"GET /health HTTP/1.1\" 200\u001b[0m\n2025-08-28T15:44:20.718154728Z \u001b[32m2025-08-28 15:44:20.716\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_index_optimization_background\u001b[0m:\u001b[36m232\u001b[0m | \u001b[1mStarting background database index optimization...\u001b[0m\n2025-08-28T15:44:20.718783498Z \u001b[32m2025-08-28 15:44:20.716\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.db.database_index_manager\u001b[0m:\u001b[36moptimize_all_databases\u001b[0m:\u001b[36m129\u001b[0m | \u001b[1mStarting database optimization across all databases\u001b[0m\n2025-08-28T15:44:20.718956326Z \u001b[32m2025-08-28 15:44:20.717\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.db.index_optimizer_core\u001b[0m:\u001b[36mlog_engine_unavailable\u001b[0m:\u001b[36m52\u001b[0m | \u001b[33m\u001b[1mAsync engine not available, skipping index creation\u001b[0m\n2025-08-28T15:44:20.718973095Z \u001b[32m2025-08-28 15:44:20.717\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.db.clickhouse\u001b[0m:\u001b[36m_create_mock_client\u001b[0m:\u001b[36m132\u001b[0m | \u001b[1m[ClickHouse] Using MOCK client for development\u001b[0m\n2025-08-28T15:44:20.719092916Z \u001b[32m2025-08-28 15:44:20.717\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.db.clickhouse\u001b[0m:\u001b[36m_create_mock_client\u001b[0m:\u001b[36m132\u001b[0m | \u001b[1m[ClickHouse] Using MOCK client for development\u001b[0m\n2025-08-28T15:44:20.719109361Z \u001b[32m2025-08-28 15:44:20.718\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.db.database_index_manager\u001b[0m:\u001b[36moptimize_all_databases\u001b[0m:\u001b[36m138\u001b[0m | \u001b[1mDatabase optimization completed - PostgreSQL: True, ClickHouse: True\u001b[0m\n2025-08-28T15:44:20.719119447Z \u001b[32m2025-08-28 15:44:20.718\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_index_optimization_background\u001b[0m:\u001b[36m239\u001b[0m | \u001b[1mBackground database optimization completed successfully: {'postgres': {'indexes_created': {}, 'recommendations': [{'table_name': 'userbase', 'columns': ['email'], 'index_type': 'btree', 'reason': 'Frequent user lookups by email', 'estimated_benefit': 0.0, 'priority': 1}, {'table_name': 'corpus_audit_logs', 'columns': ['timestamp'], 'index_type': 'btree', 'reason': 'Time-based audit queries', 'estimated_benefit': 0.0, 'priority': 1}, {'table_name': 'corpus_audit_logs', 'columns': ['user_id', 'action'], 'index_type': 'btree', 'reason': 'User action filtering', 'estimated_benefit': 0.0, 'priority': 2}, {'table_name': 'secret', 'columns': ['user_id'], 'index_type': 'btree', 'reason': 'User secret lookups', 'estimated_benefit': 0.0, 'priority': 2}, {'table_name': 'agent_states', 'columns': ['session_id'], 'index_type': 'btree', 'reason': 'Session-based state lookups', 'estimated_benefit': 0.0, 'priority': 2}], 'usage_stats': {}}, 'clickhouse': {'table_optimizations': {'netra_content_corpus': False, 'netra_audit_events': False, 'netra_performance_metrics': False, 'netra_agent_logs': False}, 'materialized_views': {'user_daily_activity': False, 'hourly_performance_metrics': False}}, 'recommendations': []}\u001b[0m\n2025-08-28T15:44:23.212206129Z \u001b[32m2025-08-28 15:44:23.206\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m41\u001b[0m | \u001b[1mSecurityResponseMiddleware processing: /health\u001b[0m\n2025-08-28T15:44:23.213077849Z \u001b[32m2025-08-28 15:44:23.209\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.request_context\u001b[0m:\u001b[36mlog_request_details\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mRequest: GET /health | Status: 200 | Duration: 1.78ms | Trace: trace_d4386c470bea4fbb\u001b[0m\n2025-08-28T15:44:23.213091188Z \u001b[32m2025-08-28 15:44:23.210\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m47\u001b[0m | \u001b[1mResponse for /health: status=200, is_api=False, has_auth=False\u001b[0m\n2025-08-28T15:44:23.213147312Z \u001b[32m2025-08-28 15:44:23.211\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m127.0.0.1:34106 - \"GET /health HTTP/1.1\" 200\u001b[0m\n2025-08-28T15:44:53.285592286Z \u001b[32m2025-08-28 15:44:53.280\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m41\u001b[0m | \u001b[1mSecurityResponseMiddleware processing: /health\u001b[0m\n2025-08-28T15:44:53.286671840Z \u001b[32m2025-08-28 15:44:53.283\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.request_context\u001b[0m:\u001b[36mlog_request_details\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mRequest: GET /health | Status: 200 | Duration: 1.38ms | Trace: trace_834dae41186b48a0\u001b[0m\n2025-08-28T15:44:53.286702198Z \u001b[32m2025-08-28 15:44:53.284\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m47\u001b[0m | \u001b[1mResponse for /health: status=200, is_api=False, has_auth=False\u001b[0m\n2025-08-28T15:44:53.286752513Z \u001b[32m2025-08-28 15:44:53.284\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m127.0.0.1:37948 - \"GET /health HTTP/1.1\" 200\u001b[0m\n2025-08-28T15:45:20.839211068Z \u001b[32m2025-08-28 15:45:20.838\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.utils\u001b[0m:\u001b[36m_heartbeat_loop\u001b[0m:\u001b[36m240\u001b[0m | \u001b[33m\u001b[1mWebSocket heartbeat timeout\u001b[0m\n2025-08-28T15:45:23.349858877Z \u001b[32m2025-08-28 15:45:23.346\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m41\u001b[0m | \u001b[1mSecurityResponseMiddleware processing: /health\u001b[0m\n2025-08-28T15:45:23.354400611Z \u001b[32m2025-08-28 15:45:23.350\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.request_context\u001b[0m:\u001b[36mlog_request_details\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mRequest: GET /health | Status: 200 | Duration: 3.04ms | Trace: trace_a25062c4037d40cf\u001b[0m\n2025-08-28T15:45:23.354438863Z \u001b[32m2025-08-28 15:45:23.351\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m47\u001b[0m | \u001b[1mResponse for /health: status=200, is_api=False, has_auth=False\u001b[0m\n2025-08-28T15:45:23.354444031Z \u001b[32m2025-08-28 15:45:23.352\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m127.0.0.1:37568 - \"GET /health HTTP/1.1\" 200\u001b[0m\n2025-08-28T15:45:53.421021128Z \u001b[32m2025-08-28 15:45:53.413\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m41\u001b[0m | \u001b[1mSecurityResponseMiddleware processing: /health\u001b[0m\n2025-08-28T15:45:53.421061721Z \u001b[32m2025-08-28 15:45:53.418\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.request_context\u001b[0m:\u001b[36mlog_request_details\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mRequest: GET /health | Status: 200 | Duration: 1.57ms | Trace: trace_530f54aa66ed46d4\u001b[0m\n2025-08-28T15:45:53.421359987Z \u001b[32m2025-08-28 15:45:53.419\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m47\u001b[0m | \u001b[1mResponse for /health: status=200, is_api=False, has_auth=False\u001b[0m\n2025-08-28T15:45:53.421451499Z \u001b[32m2025-08-28 15:45:53.419\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m127.0.0.1:43604 - \"GET /health HTTP/1.1\" 200\u001b[0m\n2025-08-28T15:46:23.472293735Z \u001b[32m2025-08-28 15:46:23.468\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m41\u001b[0m | \u001b[1mSecurityResponseMiddleware processing: /health\u001b[0m\n2025-08-28T15:46:23.474306802Z \u001b[32m2025-08-28 15:46:23.470\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.request_context\u001b[0m:\u001b[36mlog_request_details\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mRequest: GET /health | Status: 200 | Duration: 1.47ms | Trace: trace_1dfc0e700ef64fea\u001b[0m\n2025-08-28T15:46:23.474333082Z \u001b[32m2025-08-28 15:46:23.471\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m47\u001b[0m | \u001b[1mResponse for /health: status=200, is_api=False, has_auth=False\u001b[0m\n2025-08-28T15:46:23.474335349Z \u001b[32m2025-08-28 15:46:23.472\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m127.0.0.1:44934 - \"GET /health HTTP/1.1\" 200\u001b[0m\n2025-08-28T15:46:53.536501685Z \u001b[32m2025-08-28 15:46:53.530\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m41\u001b[0m | \u001b[1mSecurityResponseMiddleware processing: /health\u001b[0m\n2025-08-28T15:46:53.536633505Z \u001b[32m2025-08-28 15:46:53.533\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.request_context\u001b[0m:\u001b[36mlog_request_details\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mRequest: GET /health | Status: 200 | Duration: 1.29ms | Trace: trace_70e06cb3fc104390\u001b[0m\n2025-08-28T15:46:53.536657002Z \u001b[32m2025-08-28 15:46:53.533\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m47\u001b[0m | \u001b[1mResponse for /health: status=200, is_api=False, has_auth=False\u001b[0m\n2025-08-28T15:46:53.536661061Z \u001b[32m2025-08-28 15:46:53.534\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m127.0.0.1:60912 - \"GET /health HTTP/1.1\" 200\u001b[0m\n2025-08-28T15:47:23.601012766Z \u001b[32m2025-08-28 15:47:23.596\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m41\u001b[0m | \u001b[1mSecurityResponseMiddleware processing: /health\u001b[0m\n2025-08-28T15:47:23.601054642Z \u001b[32m2025-08-28 15:47:23.598\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.request_context\u001b[0m:\u001b[36mlog_request_details\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mRequest: GET /health | Status: 200 | Duration: 1.43ms | Trace: trace_81bc8f13301f4e1b\u001b[0m\n2025-08-28T15:47:23.601089156Z \u001b[32m2025-08-28 15:47:23.599\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m47\u001b[0m | \u001b[1mResponse for /health: status=200, is_api=False, has_auth=False\u001b[0m\n2025-08-28T15:47:23.601097042Z \u001b[32m2025-08-28 15:47:23.599\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m127.0.0.1:48646 - \"GET /health HTTP/1.1\" 200\u001b[0m\n2025-08-28T15:47:53.657699496Z \u001b[32m2025-08-28 15:47:53.651\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m41\u001b[0m | \u001b[1mSecurityResponseMiddleware processing: /health\u001b[0m\n2025-08-28T15:47:53.657733764Z \u001b[32m2025-08-28 15:47:53.654\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.request_context\u001b[0m:\u001b[36mlog_request_details\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mRequest: GET /health | Status: 200 | Duration: 1.41ms | Trace: trace_7937c53cdc824f15\u001b[0m\n2025-08-28T15:47:53.657739279Z \u001b[32m2025-08-28 15:47:53.655\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m47\u001b[0m | \u001b[1mResponse for /health: status=200, is_api=False, has_auth=False\u001b[0m\n2025-08-28T15:47:53.657743356Z \u001b[32m2025-08-28 15:47:53.655\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m127.0.0.1:55734 - \"GET /health HTTP/1.1\" 200\u001b[0m\n2025-08-28T15:48:23.709023475Z \u001b[32m2025-08-28 15:48:23.702\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m41\u001b[0m | \u001b[1mSecurityResponseMiddleware processing: /health\u001b[0m\n2025-08-28T15:48:23.709305156Z \u001b[32m2025-08-28 15:48:23.705\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.request_context\u001b[0m:\u001b[36mlog_request_details\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mRequest: GET /health | Status: 200 | Duration: 2.12ms | Trace: trace_9b79c98fc80243ef\u001b[0m\n2025-08-28T15:48:23.709796748Z \u001b[32m2025-08-28 15:48:23.706\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m47\u001b[0m | \u001b[1mResponse for /health: status=200, is_api=False, has_auth=False\u001b[0m\n2025-08-28T15:48:23.709880526Z \u001b[32m2025-08-28 15:48:23.707\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m127.0.0.1:40406 - \"GET /health HTTP/1.1\" 200\u001b[0m\n2025-08-28T15:48:36.317363335Z WARNING:  WatchFiles detected changes in 'scripts/docker_log_remediation_loop.py'. Reloading...\n2025-08-28T15:48:36.328010345Z \u001b[32m2025-08-28 15:48:36.325\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mShutting down\u001b[0m\n2025-08-28T15:48:36.328050438Z \u001b[32m2025-08-28 15:48:36.325\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mShutting down\u001b[0m\n2025-08-28T15:48:36.328130999Z \u001b[32m2025-08-28 15:48:36.326\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mconnection closed\u001b[0m\n2025-08-28T15:48:36.328147567Z \u001b[32m2025-08-28 15:48:36.326\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mconnection closed\u001b[0m\n2025-08-28T15:48:36.328151814Z \u001b[32m2025-08-28 15:48:36.326\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36m_handle_websocket_messages\u001b[0m:\u001b[36m362\u001b[0m | \u001b[1mWebSocket disconnect: {'connection_id': 'conn_dev-temp-cc173c1d_fd987ed8', 'user_id': 'dev-temp-cc173c1d', 'disconnect_code': 1012, 'disconnect_reason': 'No reason provided', 'connection_duration': 'Unknown'}\u001b[0m\n2025-08-28T15:48:36.328167340Z \u001b[32m2025-08-28 15:48:36.326\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36m_handle_websocket_messages\u001b[0m:\u001b[36m383\u001b[0m | \u001b[1mExiting message handling loop for connection: conn_dev-temp-cc173c1d_fd987ed8 | Duration: 285.5s | Messages processed: 9 | Errors: 0 | User: dev-temp-cc173c1d\u001b[0m\n2025-08-28T15:48:36.328169595Z \u001b[32m2025-08-28 15:48:36.327\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36mwebsocket_endpoint\u001b[0m:\u001b[36m198\u001b[0m | \u001b[1mMessage handling loop ended for connection: conn_dev-temp-cc173c1d_fd987ed8\u001b[0m\n2025-08-28T15:48:36.328189033Z \u001b[32m2025-08-28 15:48:36.327\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.auth\u001b[0m:\u001b[36mcleanup\u001b[0m:\u001b[36m349\u001b[0m | \u001b[1mWebSocket authenticator cleanup completed\u001b[0m\n2025-08-28T15:48:36.328220231Z \u001b[32m2025-08-28 15:48:36.327\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36mdisconnect_user\u001b[0m:\u001b[36m135\u001b[0m | \u001b[1mWebSocket disconnected: conn_dev-temp-cc173c1d_fd987ed8 (1000: Normal closure)\u001b[0m\n2025-08-28T15:48:36.328224490Z \u001b[32m2025-08-28 15:48:36.327\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36mwebsocket_endpoint\u001b[0m:\u001b[36m255\u001b[0m | \u001b[1mWebSocket cleanup completed: conn_dev-temp-cc173c1d_fd987ed8\u001b[0m\n2025-08-28T15:48:36.427346423Z \u001b[32m2025-08-28 15:48:36.425\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mWaiting for application shutdown.\u001b[0m\n2025-08-28T15:48:36.427387621Z \u001b[32m2025-08-28 15:48:36.426\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mWaiting for application shutdown.\u001b[0m\n2025-08-28T15:48:36.427389864Z \u001b[32m2025-08-28 15:48:36.426\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.shutdown\u001b[0m:\u001b[36mshutdown_cleanup\u001b[0m:\u001b[36m20\u001b[0m | \u001b[1mApplication shutdown initiated...\u001b[0m\n2025-08-28T15:48:36.427391164Z \u001b[32m2025-08-28 15:48:36.426\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.utils.multiprocessing_cleanup\u001b[0m:\u001b[36mcleanup_all\u001b[0m:\u001b[36m90\u001b[0m | \u001b[1mMultiprocessing resources cleaned up\u001b[0m\n2025-08-28T15:48:36.427392358Z \u001b[32m2025-08-28 15:48:36.426\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.shutdown\u001b[0m:\u001b[36mrun_complete_shutdown\u001b[0m:\u001b[36m120\u001b[0m | \u001b[1mShutting down background task manager...\u001b[0m\n2025-08-28T15:48:36.427393527Z \u001b[32m2025-08-28 15:48:36.426\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mShutting down BackgroundTaskManager...\u001b[0m\n2025-08-28T15:48:36.427480617Z \u001b[32m2025-08-28 15:48:36.426\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mBackgroundTaskManager shutdown complete\u001b[0m\n2025-08-28T15:48:36.427520053Z \u001b[32m2025-08-28 15:48:36.426\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.shutdown\u001b[0m:\u001b[36mrun_complete_shutdown\u001b[0m:\u001b[36m122\u001b[0m | \u001b[1mBackground task manager shutdown complete\u001b[0m\n2025-08-28T15:48:36.427522322Z \u001b[32m2025-08-28 15:48:36.427\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.shutdown\u001b[0m:\u001b[36mstop_monitoring\u001b[0m:\u001b[36m48\u001b[0m | \u001b[31m\u001b[1mError stopping monitoring and optimizations: 'ExecutionMonitor' object has no attribute 'stop_monitoring'\u001b[0m\n2025-08-28T15:48:36.529040877Z \u001b[32m2025-08-28 15:48:36.527\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mShutting down BackgroundTaskManager...\u001b[0m\n2025-08-28T15:48:36.529066554Z \u001b[32m2025-08-28 15:48:36.527\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mBackgroundTaskManager shutdown complete\u001b[0m\n2025-08-28T15:48:36.529068734Z \u001b[32m2025-08-28 15:48:36.527\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.base_agent\u001b[0m:\u001b[36mshutdown\u001b[0m:\u001b[36m68\u001b[0m | \u001b[1mShutting down Supervisor\u001b[0m\n2025-08-28T15:48:36.529081188Z \u001b[32m2025-08-28 15:48:36.528\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36mshutdown\u001b[0m:\u001b[36m737\u001b[0m | \u001b[1mShutting down WebSocket manager with 0 connections\u001b[0m\n2025-08-28T15:48:36.529082442Z \u001b[32m2025-08-28 15:48:36.528\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36mshutdown\u001b[0m:\u001b[36m752\u001b[0m | \u001b[1mWebSocket manager shutdown complete\u001b[0m\n2025-08-28T15:48:36.529087070Z \u001b[32m2025-08-28 15:48:36.528\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.shutdown\u001b[0m:\u001b[36mcleanup_resources\u001b[0m:\u001b[36m101\u001b[0m | \u001b[1mWebSocket manager shutdown completed\u001b[0m\n2025-08-28T15:48:36.530329832Z \u001b[32m2025-08-28 15:48:36.529\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.shutdown\u001b[0m:\u001b[36mrun_complete_shutdown\u001b[0m:\u001b[36m135\u001b[0m | \u001b[1mApplication shutdown complete.\u001b[0m\n2025-08-28T15:48:36.530339604Z \u001b[32m2025-08-28 15:48:36.529\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mApplication shutdown complete.\u001b[0m\n2025-08-28T15:48:36.530436861Z \u001b[32m2025-08-28 15:48:36.529\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mApplication shutdown complete.\u001b[0m\n2025-08-28T15:48:36.530989739Z \u001b[32m2025-08-28 15:48:36.529\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mFinished server process [1160]\u001b[0m\n2025-08-28T15:48:36.531138116Z \u001b[32m2025-08-28 15:48:36.529\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mFinished server process [1160]\u001b[0m\n2025-08-28T15:48:36.532511435Z \u001b[32m2025-08-28 15:48:36.532\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.utils.multiprocessing_cleanup\u001b[0m:\u001b[36mcleanup_all\u001b[0m:\u001b[36m90\u001b[0m | \u001b[1mMultiprocessing resources cleaned up\u001b[0m\n2025-08-28T15:48:37.636318225Z Critical environment variables already set - skipping .env loading\n2025-08-28T15:48:41.126821911Z \u001b[32m2025-08-28 15:48:41.126\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.configuration.database\u001b[0m:\u001b[36m_get_postgres_url\u001b[0m:\u001b[36m184\u001b[0m | \u001b[1mUsing PostgreSQL URL from development configuration\u001b[0m\n2025-08-28T15:48:41.139186253Z \u001b[32m2025-08-28 15:48:41.137\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[33m\u001b[1mGoogle Cloud Secret Manager not available: cannot import name 'secretmanager' from 'google.cloud' (unknown location)\u001b[0m\n2025-08-28T15:48:41.139251517Z \u001b[32m2025-08-28 15:48:41.138\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.configuration.database\u001b[0m:\u001b[36m_populate_redis_config\u001b[0m:\u001b[36m138\u001b[0m | \u001b[1mRedis Configuration (development/URL/No SSL): redis://redis:6379/0, Pool: 10, DB: 0\u001b[0m\n2025-08-28T15:48:41.143590733Z \u001b[32m2025-08-28 15:48:41.141\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.configuration.secrets\u001b[0m:\u001b[36mpopulate_secrets\u001b[0m:\u001b[36m198\u001b[0m | \u001b[1mPopulated secrets for development\u001b[0m\n2025-08-28T15:48:44.969829786Z \u001b[32m2025-08-28 15:48:44.968\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mCORS Configuration for development:\u001b[0m\n2025-08-28T15:48:44.969894753Z \u001b[32m2025-08-28 15:48:44.969\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m  Origins count: 41\u001b[0m\n2025-08-28T15:48:44.969903147Z \u001b[32m2025-08-28 15:48:44.969\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m  Allow credentials: True\u001b[0m\n2025-08-28T15:48:44.969906575Z \u001b[32m2025-08-28 15:48:44.969\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m  First 3 origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:3002']\u001b[0m\n2025-08-28T15:48:44.969908997Z \u001b[32m2025-08-28 15:48:44.969\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mCORS middleware configured for environment: development\u001b[0m\n2025-08-28T15:48:45.018708600Z \u001b[32m2025-08-28 15:48:45.017\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mAuthentication middleware configured with WebSocket exclusions\u001b[0m\n2025-08-28T15:48:45.018747539Z \u001b[32m2025-08-28 15:48:45.018\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mSession middleware config: same_site=lax, https_only=False, environment=development\u001b[0m\n2025-08-28T15:48:48.730861752Z \u001b[32m2025-08-28 15:48:48.730\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.state_persistence_optimized\u001b[0m:\u001b[36m__init__\u001b[0m:\u001b[36m52\u001b[0m | \u001b[1mOptimized state persistence service initialized\u001b[0m\n2025-08-28T15:48:51.230819479Z \u001b[32m2025-08-28 15:48:51.226\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.health.telemetry\u001b[0m:\u001b[36mregister_service\u001b[0m:\u001b[36m340\u001b[0m | \u001b[1mRegistered telemetry for service: netra-ai-platform\u001b[0m\n2025-08-28T15:48:52.208228954Z \u001b[32m2025-08-28 15:48:52.200\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.fallback_response.response_generator\u001b[0m:\u001b[36m__init__\u001b[0m:\u001b[36m30\u001b[0m | \u001b[1mResponse Generator initialized\u001b[0m\n2025-08-28T15:48:52.208262111Z \u001b[32m2025-08-28 15:48:52.201\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.quality_gate.quality_gate_core\u001b[0m:\u001b[36m__init__\u001b[0m:\u001b[36m38\u001b[0m | \u001b[1mQuality Gate Service initialized\u001b[0m\n2025-08-28T15:48:52.208264481Z \u001b[32m2025-08-28 15:48:52.201\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.quality_monitoring.service\u001b[0m:\u001b[36m__init__\u001b[0m:\u001b[36m51\u001b[0m | \u001b[1mQuality Monitoring Service initialized\u001b[0m\n2025-08-28T15:48:52.208266324Z \u001b[32m2025-08-28 15:48:52.202\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.fallback_response.response_generator\u001b[0m:\u001b[36m__init__\u001b[0m:\u001b[36m30\u001b[0m | \u001b[1mResponse Generator initialized\u001b[0m\n2025-08-28T15:48:58.296363968Z \u001b[32m2025-08-28 15:48:58.295\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mStarted server process [1250]\u001b[0m\n2025-08-28T15:48:58.296402092Z \u001b[32m2025-08-28 15:48:58.295\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mStarted server process [1250]\u001b[0m\n2025-08-28T15:48:58.296404273Z \u001b[32m2025-08-28 15:48:58.295\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mWaiting for application startup.\u001b[0m\n2025-08-28T15:48:58.296405562Z \u001b[32m2025-08-28 15:48:58.295\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mWaiting for application startup.\u001b[0m\n2025-08-28T15:48:58.338538399Z \u001b[32m2025-08-28 15:48:58.336\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.fastapi_auth_middleware\u001b[0m:\u001b[36m_get_jwt_secret_with_validation\u001b[0m:\u001b[36m677\u001b[0m | \u001b[1mJWT secret configured: 32 characters\u001b[0m\n2025-08-28T15:48:58.338614968Z \u001b[32m2025-08-28 15:48:58.336\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.fastapi_auth_middleware\u001b[0m:\u001b[36m__init__\u001b[0m:\u001b[36m76\u001b[0m | \u001b[1mFastAPIAuthMiddleware initialized with 12 excluded paths\u001b[0m\n2025-08-28T15:48:58.338625458Z \u001b[32m2025-08-28 15:48:58.337\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_headers_middleware\u001b[0m:\u001b[36m_log_initialization\u001b[0m:\u001b[36m43\u001b[0m | \u001b[1mSecurity headers middleware initialized for development environment\u001b[0m\n2025-08-28T15:48:58.338629901Z \u001b[32m2025-08-28 15:48:58.337\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36m__init__\u001b[0m:\u001b[36m36\u001b[0m | \u001b[1mSecurityResponseMiddleware initialized\u001b[0m\n2025-08-28T15:48:58.338632826Z \u001b[32m2025-08-28 15:48:58.337\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mCORSFixMiddleware initialized with 41 origins for development\u001b[0m\n2025-08-28T15:48:58.338635672Z \u001b[32m2025-08-28 15:48:58.337\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36mrun_complete_startup\u001b[0m:\u001b[36m941\u001b[0m | \u001b[1mUsing robust startup manager with dependency resolution...\u001b[0m\n2025-08-28T15:48:58.338671272Z \u001b[32m2025-08-28 15:48:58.337\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36mrun_complete_startup\u001b[0m:\u001b[36m951\u001b[0m | \u001b[1mStartup in progress flags set - health endpoint will report startup in progress\u001b[0m\n2025-08-28T15:48:58.379203532Z \u001b[32m2025-08-28 15:48:58.377\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36mrun_complete_startup\u001b[0m:\u001b[36m983\u001b[0m | \u001b[31m\u001b[1mError in robust startup: cannot access local variable 'logger' where it is not associated with a value\u001b[0m\n2025-08-28T15:48:58.379249664Z \u001b[32m2025-08-28 15:48:58.377\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36mrun_complete_startup\u001b[0m:\u001b[36m989\u001b[0m | \u001b[33m\u001b[1mFalling back to legacy startup sequence...\u001b[0m\n2025-08-28T15:48:58.379251923Z \u001b[32m2025-08-28 15:48:58.377\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36minitialize_logging\u001b[0m:\u001b[36m251\u001b[0m | \u001b[1mApplication startup...\u001b[0m\n2025-08-28T15:48:58.379253272Z \u001b[32m2025-08-28 15:48:58.378\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.utils.multiprocessing_cleanup\u001b[0m:\u001b[36msetup_multiprocessing\u001b[0m:\u001b[36m108\u001b[0m | \u001b[1mMultiprocessing configured with method: forkserver\u001b[0m\n2025-08-28T15:48:58.379327822Z \u001b[32m2025-08-28 15:48:58.378\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.database_env_service\u001b[0m:\u001b[36mvalidate_database_environment\u001b[0m:\u001b[36m49\u001b[0m | \u001b[1mDatabase environment validation passed for development\u001b[0m\n2025-08-28T15:48:58.379719007Z \u001b[32m2025-08-28 15:48:58.378\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_check_and_run_migrations\u001b[0m:\u001b[36m354\u001b[0m | \u001b[1mChecking database migrations...\u001b[0m\n2025-08-28T15:48:58.393451143Z \u001b[32m2025-08-28 15:48:58.390\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mContext impl PostgresqlImpl.\u001b[0m\n2025-08-28T15:48:58.393488919Z \u001b[32m2025-08-28 15:48:58.391\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mWill assume transactional DDL.\u001b[0m\n2025-08-28T15:48:58.397429628Z \u001b[32m2025-08-28 15:48:58.396\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_perform_migration\u001b[0m:\u001b[36m364\u001b[0m | \u001b[1mCurrent revision: add_deleted_at_001\u001b[0m\n2025-08-28T15:48:59.111455020Z \u001b[32m2025-08-28 15:48:59.110\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.db.migration_utils\u001b[0m:\u001b[36mlog_migration_status\u001b[0m:\u001b[36m199\u001b[0m | \u001b[1mDatabase is up to date\u001b[0m\n2025-08-28T15:48:59.112786119Z \u001b[32m2025-08-28 15:48:59.110\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_legacy_startup\u001b[0m:\u001b[36m1007\u001b[0m | \u001b[1mLegacy startup in progress flags set\u001b[0m\n2025-08-28T15:48:59.113832073Z \u001b[32m2025-08-28 15:48:59.110\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36msetup_database_connections\u001b[0m:\u001b[36m430\u001b[0m | \u001b[1mSetting up database connections...\u001b[0m\n2025-08-28T15:48:59.113849941Z \u001b[32m2025-08-28 15:48:59.111\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.db.postgres_core\u001b[0m:\u001b[36minitialize_postgres\u001b[0m:\u001b[36m578\u001b[0m | \u001b[1mInitializing async engine and session factory...\u001b[0m\n2025-08-28T15:48:59.113851778Z \u001b[32m2025-08-28 15:48:59.112\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.db.postgres_core\u001b[0m:\u001b[36m_create_and_setup_engine\u001b[0m:\u001b[36m514\u001b[0m | \u001b[1mPostgreSQL async engine created with resilient AsyncAdaptedQueuePool connection pooling\u001b[0m\n2025-08-28T15:48:59.113863105Z \u001b[32m2025-08-28 15:48:59.112\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_ensure_database_tables_exist\u001b[0m:\u001b[36m56\u001b[0m | \u001b[1mImporting database models to register tables...\u001b[0m\n2025-08-28T15:48:59.113878628Z \u001b[32m2025-08-28 15:48:59.112\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_ensure_database_tables_exist\u001b[0m:\u001b[36m59\u001b[0m | \u001b[1mChecking if database tables exist...\u001b[0m\n2025-08-28T15:48:59.126351544Z \u001b[32m2025-08-28 15:48:59.125\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_ensure_database_tables_exist\u001b[0m:\u001b[36m114\u001b[0m | \u001b[1mAll 26 database tables are present\u001b[0m\n2025-08-28T15:48:59.130783687Z \u001b[32m2025-08-28 15:48:59.128\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36msetup_database_connections\u001b[0m:\u001b[36m474\u001b[0m | \u001b[1mDatabase session factory successfully set on app.state\u001b[0m\n2025-08-28T15:48:59.130804190Z \u001b[32m2025-08-28 15:48:59.128\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36minitialize_core_services\u001b[0m:\u001b[36m509\u001b[0m | \u001b[1mLoading key manager...\u001b[0m\n2025-08-28T15:48:59.130806269Z \u001b[32m2025-08-28 15:48:59.128\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36minitialize_core_services\u001b[0m:\u001b[36m511\u001b[0m | \u001b[1mKey manager loaded.\u001b[0m\n2025-08-28T15:48:59.130807544Z \u001b[32m2025-08-28 15:48:59.128\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36minitialize_clickhouse\u001b[0m:\u001b[36m544\u001b[0m | \u001b[1mSkipping ClickHouse initialization in development environment (optional service - may not be available)\u001b[0m\n2025-08-28T15:48:59.130808796Z \u001b[32m2025-08-28 15:48:59.129\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_startup_phase_two\u001b[0m:\u001b[36m889\u001b[0m | \u001b[1mInitializing background task manager with 2-minute timeout...\u001b[0m\n2025-08-28T15:48:59.130809919Z \u001b[32m2025-08-28 15:48:59.129\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_startup_phase_two\u001b[0m:\u001b[36m891\u001b[0m | \u001b[1mBackground task manager initialized successfully\u001b[0m\n2025-08-28T15:48:59.130859934Z \u001b[32m2025-08-28 15:48:59.129\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_startup_phase_two\u001b[0m:\u001b[36m894\u001b[0m | \u001b[1mApplying startup fixes for critical cold start issues...\u001b[0m\n2025-08-28T15:48:59.130867738Z \u001b[32m2025-08-28 15:48:59.129\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mRunning comprehensive startup fixes verification...\u001b[0m\n2025-08-28T15:48:59.130869325Z \u001b[32m2025-08-28 15:48:59.129\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mApplied Redis mode default with fallback capability\u001b[0m\n2025-08-28T15:48:59.130872932Z \u001b[32m2025-08-28 15:48:59.129\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mService discovery disabled for microservice independence\u001b[0m\n2025-08-28T15:48:59.130923999Z \u001b[32m2025-08-28 15:48:59.129\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mDynamic port allocation is configured\u001b[0m\n2025-08-28T15:48:59.130941509Z \u001b[32m2025-08-28 15:48:59.129\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mBackground task timeout properly configured: 120s\u001b[0m\n2025-08-28T15:48:59.130999360Z \u001b[32m2025-08-28 15:48:59.130\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mRedis local fallback is configured\u001b[0m\n2025-08-28T15:48:59.131002442Z \u001b[32m2025-08-28 15:48:59.130\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mDatabase transaction rollback fix is available\u001b[0m\n2025-08-28T15:48:59.131020148Z \u001b[32m2025-08-28 15:48:59.130\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mStartup fixes verification complete: 4/5 fixes applied\u001b[0m\n2025-08-28T15:48:59.131026390Z \u001b[32m2025-08-28 15:48:59.130\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_startup_phase_two\u001b[0m:\u001b[36m898\u001b[0m | \u001b[1mStartup fixes applied: 4/5 fixes\u001b[0m\n2025-08-28T15:48:59.131045268Z \u001b[32m2025-08-28 15:48:59.130\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_startup_phase_two\u001b[0m:\u001b[36m901\u001b[0m | \u001b[33m\u001b[1mSome startup fixes could not be applied - check system configuration\u001b[0m\n2025-08-28T15:48:59.131094633Z \u001b[32m2025-08-28 15:48:59.130\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_startup_phase_two\u001b[0m:\u001b[36m902\u001b[0m | \u001b[1mStartup Fixes Status: 4/5 applied\n2025-08-28T15:48:59.131098146Z \n2025-08-28T15:48:59.131099597Z \u2705 Applied fixes:\n2025-08-28T15:48:59.131101474Z   \u2022 Background task timeout (2-minute limit)\n2025-08-28T15:48:59.131102674Z   \u2022 Redis local fallback capability\n2025-08-28T15:48:59.131103874Z   \u2022 Environment variable mapping (CLICKHOUSE_PASSWORD)\n2025-08-28T15:48:59.131115085Z   \u2022 Database transaction rollback handling\n2025-08-28T15:48:59.131116027Z \n2025-08-28T15:48:59.131116806Z \u274c Missing fixes:\n2025-08-28T15:48:59.131117714Z   \u2022 Service port conflict resolution\u001b[0m\n2025-08-28T15:48:59.131118664Z \u001b[32m2025-08-28 15:48:59.130\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36mstartup_health_checks\u001b[0m:\u001b[36m738\u001b[0m | \u001b[1mStarting comprehensive startup health checks...\u001b[0m\n2025-08-28T15:48:59.389092740Z \u001b[32m2025-08-28 15:48:59.387\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m58\u001b[0m | \u001b[1mPreparing to run 10 startup checks:\u001b[0m\n2025-08-28T15:48:59.389166608Z \u001b[32m2025-08-28 15:48:59.387\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  1. check_environment_variables\u001b[0m\n2025-08-28T15:48:59.389176149Z \u001b[32m2025-08-28 15:48:59.387\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  2. check_configuration\u001b[0m\n2025-08-28T15:48:59.389179899Z \u001b[32m2025-08-28 15:48:59.387\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  3. check_file_permissions\u001b[0m\n2025-08-28T15:48:59.389182281Z \u001b[32m2025-08-28 15:48:59.387\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  4. check_database_connection\u001b[0m\n2025-08-28T15:48:59.389184883Z \u001b[32m2025-08-28 15:48:59.387\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  5. check_redis\u001b[0m\n2025-08-28T15:48:59.389187169Z \u001b[32m2025-08-28 15:48:59.387\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  6. check_clickhouse\u001b[0m\n2025-08-28T15:48:59.389189484Z \u001b[32m2025-08-28 15:48:59.387\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  7. check_llm_providers\u001b[0m\n2025-08-28T15:48:59.389191837Z \u001b[32m2025-08-28 15:48:59.388\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  8. check_memory_and_resources\u001b[0m\n2025-08-28T15:48:59.389273033Z \u001b[32m2025-08-28 15:48:59.388\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  9. check_network_connectivity\u001b[0m\n2025-08-28T15:48:59.389282852Z \u001b[32m2025-08-28 15:48:59.388\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  10. check_or_create_assistant\u001b[0m\n2025-08-28T15:48:59.389284797Z \u001b[32m2025-08-28 15:48:59.388\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_environment_variables\u001b[0m\n2025-08-28T15:48:59.389286394Z \u001b[32m2025-08-28 15:48:59.388\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_configuration\u001b[0m\n2025-08-28T15:48:59.389287748Z \u001b[32m2025-08-28 15:48:59.388\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_file_permissions\u001b[0m\n2025-08-28T15:48:59.395210582Z \u001b[32m2025-08-28 15:48:59.394\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_database_connection\u001b[0m\n2025-08-28T15:48:59.411326530Z \u001b[32m2025-08-28 15:48:59.410\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_redis\u001b[0m\n2025-08-28T15:48:59.413011700Z \u001b[32m2025-08-28 15:48:59.412\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.redis_manager\u001b[0m:\u001b[36m_test_redis_connection\u001b[0m:\u001b[36m114\u001b[0m | \u001b[1mRedis connected successfully\u001b[0m\n2025-08-28T15:48:59.416616535Z \u001b[32m2025-08-28 15:48:59.414\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_clickhouse\u001b[0m\n2025-08-28T15:48:59.417480867Z \u001b[32m2025-08-28 15:48:59.415\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.db.clickhouse\u001b[0m:\u001b[36m_create_mock_client\u001b[0m:\u001b[36m132\u001b[0m | \u001b[1m[ClickHouse] Using MOCK client for development\u001b[0m\n2025-08-28T15:48:59.418017876Z \u001b[32m2025-08-28 15:48:59.415\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.service_checks\u001b[0m:\u001b[36m_log_clickhouse_warning_if_needed\u001b[0m:\u001b[36m242\u001b[0m | \u001b[33m\u001b[1mClickHouse not available - analytics features limited\u001b[0m\n2025-08-28T15:48:59.418027212Z \u001b[32m2025-08-28 15:48:59.415\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_llm_providers\u001b[0m\n2025-08-28T15:48:59.418028886Z \u001b[32m2025-08-28 15:48:59.415\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.service_checks\u001b[0m:\u001b[36m_handle_llm_test_failure\u001b[0m:\u001b[36m197\u001b[0m | \u001b[1mLLM 'default' failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:48:59.418030382Z \u001b[32m2025-08-28 15:48:59.416\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.service_checks\u001b[0m:\u001b[36m_handle_llm_test_failure\u001b[0m:\u001b[36m197\u001b[0m | \u001b[1mLLM 'analysis' failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:48:59.418032143Z \u001b[32m2025-08-28 15:48:59.416\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.service_checks\u001b[0m:\u001b[36m_handle_llm_test_failure\u001b[0m:\u001b[36m197\u001b[0m | \u001b[1mLLM 'triage' failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:48:59.418034135Z \u001b[32m2025-08-28 15:48:59.416\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.service_checks\u001b[0m:\u001b[36m_handle_llm_test_failure\u001b[0m:\u001b[36m197\u001b[0m | \u001b[1mLLM 'data' failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:48:59.418035948Z \u001b[32m2025-08-28 15:48:59.416\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.service_checks\u001b[0m:\u001b[36m_handle_llm_test_failure\u001b[0m:\u001b[36m197\u001b[0m | \u001b[1mLLM 'optimizations_core' failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:48:59.418118173Z \u001b[32m2025-08-28 15:48:59.417\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.service_checks\u001b[0m:\u001b[36m_handle_llm_test_failure\u001b[0m:\u001b[36m197\u001b[0m | \u001b[1mLLM 'actions_to_meet_goals' failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:48:59.418273398Z \u001b[32m2025-08-28 15:48:59.417\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.service_checks\u001b[0m:\u001b[36m_handle_llm_test_failure\u001b[0m:\u001b[36m197\u001b[0m | \u001b[1mLLM 'reporting' failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:48:59.418686067Z \u001b[32m2025-08-28 15:48:59.417\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_memory_and_resources\u001b[0m\n2025-08-28T15:48:59.418799993Z \u001b[32m2025-08-28 15:48:59.418\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_network_connectivity\u001b[0m\n2025-08-28T15:48:59.420016023Z \u001b[32m2025-08-28 15:48:59.419\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_or_create_assistant\u001b[0m\n2025-08-28T15:48:59.420336552Z /usr/local/lib/python3.11/contextlib.py:210: DeprecationWarning: postgres_session.get_async_db() is deprecated. Use 'from netra_backend.app.database import get_db' instead.\n2025-08-28T15:48:59.420349283Z   return await anext(self.gen)\n2025-08-28T15:48:59.475978596Z WARNING:  WatchFiles detected changes in 'scripts/docker_log_remediation_loop.py'. Reloading...\n2025-08-28T15:48:59.482438125Z \u001b[32m2025-08-28 15:48:59.479\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m140\u001b[0m | \u001b[1m=== STARTUP CHECKS SUMMARY ===\u001b[0m\n2025-08-28T15:48:59.482840005Z \u001b[32m2025-08-28 15:48:59.479\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m141\u001b[0m | \u001b[1mTotal checks: 10\u001b[0m\n2025-08-28T15:48:59.482852475Z \u001b[32m2025-08-28 15:48:59.479\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m142\u001b[0m | \u001b[1mPassed: 8\u001b[0m\n2025-08-28T15:48:59.482876638Z \u001b[32m2025-08-28 15:48:59.479\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m143\u001b[0m | \u001b[1mFailed (critical): 0\u001b[0m\n2025-08-28T15:48:59.482885584Z \u001b[32m2025-08-28 15:48:59.479\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m144\u001b[0m | \u001b[1mFailed (non-critical): 2\u001b[0m\n2025-08-28T15:48:59.483742473Z \u001b[32m2025-08-28 15:48:59.480\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m145\u001b[0m | \u001b[1mTotal duration: 92.26ms\u001b[0m\n2025-08-28T15:48:59.483873246Z \u001b[32m2025-08-28 15:48:59.480\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  PASS: environment_variables (0.05ms) - Development mode - using default configs (Optional missing: GOOGLE_CLIENT_ID, GOOGLE_CLIENT_SECRET)\u001b[0m\n2025-08-28T15:48:59.484450470Z \u001b[32m2025-08-28 15:48:59.480\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  PASS: configuration (0.02ms) - Configuration valid for development environment\u001b[0m\n2025-08-28T15:48:59.484932857Z \u001b[32m2025-08-28 15:48:59.480\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  PASS: file_permissions (5.51ms) - All required directories are accessible\u001b[0m\n2025-08-28T15:48:59.485176713Z \u001b[32m2025-08-28 15:48:59.480\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  PASS: database_connection (16.01ms) - PostgreSQL connected and schema valid\u001b[0m\n2025-08-28T15:48:59.485191399Z \u001b[32m2025-08-28 15:48:59.480\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  PASS: redis_connection (3.88ms) - Redis connected and operational\u001b[0m\n2025-08-28T15:48:59.485683239Z \u001b[32m2025-08-28 15:48:59.480\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  FAIL-WARN: clickhouse_connection (0.64ms) - ClickHouse check failed: Missing ClickHouse tables: ['workload_events']\u001b[0m\n2025-08-28T15:48:59.487437021Z \u001b[32m2025-08-28 15:48:59.480\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  FAIL-WARN: llm_providers (2.12ms) - No LLM providers available\u001b[0m\n2025-08-28T15:48:59.487483818Z \u001b[32m2025-08-28 15:48:59.480\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  PASS: system_resources (0.56ms) - Resources OK: 27.4GB RAM, 876.2GB disk, 20 CPUs\u001b[0m\n2025-08-28T15:48:59.487492278Z \u001b[32m2025-08-28 15:48:59.480\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  PASS: network_connectivity (1.12ms) - All network endpoints reachable\u001b[0m\n2025-08-28T15:48:59.487684432Z \u001b[32m2025-08-28 15:48:59.480\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  PASS: netra_assistant (59.58ms) - Netra assistant already exists\u001b[0m\n2025-08-28T15:48:59.487693331Z \u001b[32m2025-08-28 15:48:59.481\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.utils\u001b[0m:\u001b[36m_log_startup_results\u001b[0m:\u001b[36m32\u001b[0m | \u001b[1mStartup checks completed in 92ms\u001b[0m\n2025-08-28T15:48:59.487706207Z \u001b[32m2025-08-28 15:48:59.481\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.utils\u001b[0m:\u001b[36m_log_startup_results\u001b[0m:\u001b[36m33\u001b[0m | \u001b[1mResults: 8/10 passed\u001b[0m\n2025-08-28T15:48:59.487707760Z \u001b[32m2025-08-28 15:48:59.481\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.utils\u001b[0m:\u001b[36m_log_non_critical_failures\u001b[0m:\u001b[36m48\u001b[0m | \u001b[33m\u001b[1mNon-critical startup checks failed:\u001b[0m\n2025-08-28T15:48:59.487709794Z \u001b[32m2025-08-28 15:48:59.481\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.utils\u001b[0m:\u001b[36m_log_non_critical_failures\u001b[0m:\u001b[36m51\u001b[0m | \u001b[33m\u001b[1m  - clickhouse_connection: ClickHouse check failed: Missing ClickHouse tables: ['workload_events']\u001b[0m\n2025-08-28T15:48:59.487711399Z \u001b[32m2025-08-28 15:48:59.481\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.utils\u001b[0m:\u001b[36m_log_non_critical_failures\u001b[0m:\u001b[36m51\u001b[0m | \u001b[33m\u001b[1m  - llm_providers: No LLM providers available\u001b[0m\n2025-08-28T15:48:59.487722649Z \u001b[32m2025-08-28 15:48:59.481\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36mstartup_health_checks\u001b[0m:\u001b[36m749\u001b[0m | \u001b[1mStartup checks completed: 8/10 passed\u001b[0m\n2025-08-28T15:48:59.487726456Z \u001b[32m2025-08-28 15:48:59.481\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36mstartup_health_checks\u001b[0m:\u001b[36m754\u001b[0m | \u001b[33m\u001b[1mSome startup checks failed (2), but continuing in graceful mode\u001b[0m\n2025-08-28T15:48:59.524252141Z \u001b[32m2025-08-28 15:48:59.523\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.services.schema_validation_service\u001b[0m:\u001b[36m_log_missing_columns\u001b[0m:\u001b[36m107\u001b[0m | \u001b[31m\u001b[1mMissing columns in table research_sessions: ['completed_at', 'error_message']\u001b[0m\n2025-08-28T15:48:59.524291783Z \u001b[32m2025-08-28 15:48:59.523\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.services.schema_validation_service\u001b[0m:\u001b[36m_log_warnings\u001b[0m:\u001b[36m113\u001b[0m | \u001b[33m\u001b[1mExtra tables in database not defined in models: {'userbase', 'auth_users', 'alembic_version', 'auth_audit_logs', 'password_reset_tokens', 'auth_sessions'}\u001b[0m\n2025-08-28T15:48:59.525007584Z \u001b[32m2025-08-28 15:48:59.524\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.services.schema_validation_service\u001b[0m:\u001b[36mrun_comprehensive_validation\u001b[0m:\u001b[36m234\u001b[0m | \u001b[31m\u001b[1mSchema validation failed: {'passed': False, 'missing_tables': [], 'missing_columns': {'research_sessions': ['completed_at', 'error_message']}, 'type_mismatches': {}, 'warnings': [\"Extra tables in database not defined in models: {'userbase', 'auth_users', 'alembic_version', 'auth_audit_logs', 'password_reset_tokens', 'auth_sessions'}\"]}\u001b[0m\n2025-08-28T15:48:59.525027111Z \u001b[32m2025-08-28 15:48:59.524\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_handle_schema_validation_result\u001b[0m:\u001b[36m824\u001b[0m | \u001b[31m\u001b[1mSchema validation failed. The application might not work as expected.\u001b[0m\n2025-08-28T15:48:59.544491464Z \u001b[32m2025-08-28 15:48:59.543\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36minitialize_websocket_components\u001b[0m:\u001b[36m718\u001b[0m | \u001b[1mWebSocket components initialized\u001b[0m\n2025-08-28T15:49:00.583618114Z \u001b[32m2025-08-28 15:49:00.579\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: triage\u001b[0m\n2025-08-28T15:49:00.583654811Z \u001b[32m2025-08-28 15:49:00.580\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: data\u001b[0m\n2025-08-28T15:49:00.583656711Z \u001b[32m2025-08-28 15:49:00.580\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: optimization\u001b[0m\n2025-08-28T15:49:00.583657914Z \u001b[32m2025-08-28 15:49:00.580\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: actions\u001b[0m\n2025-08-28T15:49:00.583658997Z \u001b[32m2025-08-28 15:49:00.580\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: reporting\u001b[0m\n2025-08-28T15:49:00.583660106Z \u001b[32m2025-08-28 15:49:00.580\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: synthetic_data\u001b[0m\n2025-08-28T15:49:00.583661159Z \u001b[32m2025-08-28 15:49:00.581\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: corpus_admin\u001b[0m\n2025-08-28T15:49:00.583662188Z \u001b[32m2025-08-28 15:49:00.581\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_create_agent_supervisor\u001b[0m:\u001b[36m656\u001b[0m | \u001b[1mAgent supervisor created successfully\u001b[0m\n2025-08-28T15:49:00.583663350Z \u001b[32m2025-08-28 15:49:00.581\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.database.health_checker\u001b[0m:\u001b[36mstart_monitoring\u001b[0m:\u001b[36m29\u001b[0m | \u001b[1mStarting database connection monitoring\u001b[0m\n2025-08-28T15:49:00.583877556Z \u001b[32m2025-08-28 15:49:00.581\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.base.monitoring\u001b[0m:\u001b[36mstart_monitoring\u001b[0m:\u001b[36m318\u001b[0m | \u001b[1mExecution monitoring started\u001b[0m\n2025-08-28T15:49:00.583892158Z \u001b[32m2025-08-28 15:49:00.581\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_create_monitoring_task\u001b[0m:\u001b[36m848\u001b[0m | \u001b[1mComprehensive monitoring started\u001b[0m\n2025-08-28T15:49:00.583972546Z \u001b[32m2025-08-28 15:49:00.581\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.performance_optimization_manager\u001b[0m:\u001b[36minitialize\u001b[0m:\u001b[36m43\u001b[0m | \u001b[1mPerformance optimization manager initialized\u001b[0m\n2025-08-28T15:49:00.584876322Z \u001b[32m2025-08-28 15:49:00.581\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mCreated background task 'database_index_optimization' (ID: 5c60cea5-75ea-49f5-a351-49fd923f0258) with 120s timeout\u001b[0m\n2025-08-28T15:49:00.585769863Z \u001b[32m2025-08-28 15:49:00.582\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_schedule_background_optimizations\u001b[0m:\u001b[36m224\u001b[0m | \u001b[1mDatabase index optimization scheduled as background task (ID: 5c60cea5-75ea-49f5-a351-49fd923f0258)\u001b[0m\n2025-08-28T15:49:00.586026871Z \u001b[32m2025-08-28 15:49:00.582\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_initialize_performance_optimizations\u001b[0m:\u001b[36m194\u001b[0m | \u001b[1mPerformance optimizations initialized successfully\u001b[0m\n2025-08-28T15:49:00.586425239Z \u001b[32m2025-08-28 15:49:00.582\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_legacy_startup\u001b[0m:\u001b[36m1016\u001b[0m | \u001b[1mLegacy startup completion flags set - health endpoint will report healthy\u001b[0m\n2025-08-28T15:49:00.586604031Z \u001b[32m2025-08-28 15:49:00.582\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36mlog_startup_complete\u001b[0m:\u001b[36m869\u001b[0m | \u001b[1mSystem Ready (Took 2.20s).\u001b[0m\n2025-08-28T15:49:00.586612918Z \u001b[32m2025-08-28 15:49:00.584\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mApplication startup complete.\u001b[0m\n2025-08-28T15:49:00.586752439Z \u001b[32m2025-08-28 15:49:00.584\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mApplication startup complete.\u001b[0m\n2025-08-28T15:49:00.591227496Z \u001b[32m2025-08-28 15:49:00.590\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.shutdown\u001b[0m:\u001b[36mshutdown_cleanup\u001b[0m:\u001b[36m20\u001b[0m | \u001b[1mApplication shutdown initiated...\u001b[0m\n2025-08-28T15:49:00.591600132Z \u001b[32m2025-08-28 15:49:00.590\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.utils.multiprocessing_cleanup\u001b[0m:\u001b[36mcleanup_all\u001b[0m:\u001b[36m90\u001b[0m | \u001b[1mMultiprocessing resources cleaned up\u001b[0m\n2025-08-28T15:49:00.591619895Z \u001b[32m2025-08-28 15:49:00.590\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.shutdown\u001b[0m:\u001b[36mrun_complete_shutdown\u001b[0m:\u001b[36m120\u001b[0m | \u001b[1mShutting down background task manager...\u001b[0m\n2025-08-28T15:49:00.591621931Z \u001b[32m2025-08-28 15:49:00.590\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mShutting down BackgroundTaskManager...\u001b[0m\n2025-08-28T15:49:00.591623276Z \u001b[32m2025-08-28 15:49:00.590\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mCancelling 1 active background tasks\u001b[0m\n2025-08-28T15:49:00.591906833Z /usr/local/lib/python3.11/site-packages/websockets/legacy/server.py:1178: DeprecationWarning: remove second argument of ws_handler\n2025-08-28T15:49:00.591923297Z   warnings.warn(\"remove second argument of ws_handler\", DeprecationWarning)\n2025-08-28T15:49:00.600499940Z \u001b[32m2025-08-28 15:49:00.592\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[31m\u001b[1mException in ASGI application\n2025-08-28T15:49:00.600529659Z \u001b[0m",
          "signature": "74cf62b8c45fb531581bab619527b3ff",
          "is_traceback": true
        },
        {
          "line_number": 5693,
          "timestamp": "2025-08-28T15:49:00.600531326Z",
          "severity": "CRITICAL",
          "error_type": "Unknown Exception",
          "pattern": "Traceback",
          "log_line": "2025-08-28T15:49:00.600531326Z \u001b[33m\u001b[1mTraceback (most recent call last):\u001b[0m",
          "log_content": "2025-08-28T15:49:00.600531326Z \u001b[33m\u001b[1mTraceback (most recent call last):\u001b[0m\n2025-08-28T15:49:00.600532374Z   File \"<string>\", line 1, in <module>\n2025-08-28T15:49:00.600533614Z   File \"/usr/local/lib/python3.11/multiprocessing/spawn.py\", line 122, in spawn_main\n2025-08-28T15:49:00.600534534Z     exitcode = _main(fd, parent_sentinel)\n2025-08-28T15:49:00.600535427Z   File \"/usr/local/lib/python3.11/multiprocessing/spawn.py\", line 135, in _main\n2025-08-28T15:49:00.600536316Z     return self._bootstrap(parent_sentinel)\n2025-08-28T15:49:00.600537125Z   File \"/usr/local/lib/python3.11/multiprocessing/process.py\", line 314, in _bootstrap\n2025-08-28T15:49:00.600538023Z     self.run()\n2025-08-28T15:49:00.600538823Z   File \"/usr/local/lib/python3.11/multiprocessing/process.py\", line 108, in run\n2025-08-28T15:49:00.600539698Z     self._target(*self._args, **self._kwargs)\n2025-08-28T15:49:00.600540616Z   File \"/usr/local/lib/python3.11/site-packages/uvicorn/_subprocess.py\", line 76, in subprocess_started\n2025-08-28T15:49:00.600541525Z     target(sockets=sockets)\n2025-08-28T15:49:00.600542309Z   File \"/usr/local/lib/python3.11/site-packages/uvicorn/server.py\", line 61, in run\n2025-08-28T15:49:00.600543185Z     return asyncio.run(self.serve(sockets=sockets))\n2025-08-28T15:49:00.600543993Z   File \"/usr/local/lib/python3.11/asyncio/runners.py\", line 189, in run\n2025-08-28T15:49:00.600544856Z     with Runner(debug=debug) as runner:\n2025-08-28T15:49:00.600545687Z   File \"/usr/local/lib/python3.11/asyncio/runners.py\", line 63, in __exit__\n2025-08-28T15:49:00.600546600Z     self.close()\n2025-08-28T15:49:00.600547452Z   File \"/usr/local/lib/python3.11/asyncio/runners.py\", line 71, in close\n2025-08-28T15:49:00.600548309Z     _cancel_all_tasks(loop)\n2025-08-28T15:49:00.600549078Z   File \"/usr/local/lib/python3.11/asyncio/runners.py\", line 201, in _cancel_all_tasks\n2025-08-28T15:49:00.600549941Z     loop.run_until_complete(tasks.gather(*to_cancel, return_exceptions=True))\n2025-08-28T15:49:00.600550808Z > File \"/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py\", line 426, in run_asgi\n2025-08-28T15:49:00.600551772Z     result = await app(  # type: ignore[func-returns-value]\n2025-08-28T15:49:00.600552596Z   File \"/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py\", line 84, in __call__\n2025-08-28T15:49:00.600553484Z     return await self.app(scope, receive, send)\n2025-08-28T15:49:00.600554359Z   File \"/usr/local/lib/python3.11/site-packages/fastapi/applications.py\", line 1106, in __call__\n2025-08-28T15:49:00.600555367Z     await super().__call__(scope, receive, send)\n2025-08-28T15:49:00.600564958Z   File \"/usr/local/lib/python3.11/site-packages/starlette/applications.py\", line 122, in __call__\n2025-08-28T15:49:00.600566591Z     await self.middleware_stack(scope, receive, send)\n2025-08-28T15:49:00.600567479Z   File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py\", line 162, in __call__\n2025-08-28T15:49:00.600568375Z     await self.app(scope, receive, _send)\n2025-08-28T15:49:00.600569204Z   File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 108, in __call__\n2025-08-28T15:49:00.600570094Z     response = await self.dispatch_func(request, call_next)\n2025-08-28T15:49:00.600570929Z   File \"\u001b[32m/app/netra_backend/app/middleware/\u001b[0m\u001b[32m\u001b[1mcors_fix_middleware.py\u001b[0m\", line \u001b[33m66\u001b[0m, in \u001b[35mdispatch\u001b[0m\n2025-08-28T15:49:00.600572160Z     \u001b[1mresponse\u001b[0m \u001b[35m\u001b[1m=\u001b[0m \u001b[35m\u001b[1mawait\u001b[0m \u001b[1mcall_next\u001b[0m\u001b[1m(\u001b[0m\u001b[1mrequest\u001b[0m\u001b[1m)\u001b[0m\n2025-08-28T15:49:00.600573302Z   File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 78, in call_next\n2025-08-28T15:49:00.600574201Z     message = await recv_stream.receive()\n2025-08-28T15:49:00.600575014Z   File \"/usr/local/lib/python3.11/site-packages/anyio/streams/memory.py\", line 96, in receive\n2025-08-28T15:49:00.600575885Z     await checkpoint()\n2025-08-28T15:49:00.600576675Z   File \"/usr/local/lib/python3.11/site-packages/anyio/lowlevel.py\", line 33, in checkpoint\n2025-08-28T15:49:00.600577529Z     await get_asynclib().checkpoint()\n2025-08-28T15:49:00.600578333Z   File \"/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py\", line 447, in checkpoint\n2025-08-28T15:49:00.600579203Z     await sleep(0)\n2025-08-28T15:49:00.600579974Z   File \"/usr/local/lib/python3.11/asyncio/tasks.py\", line 640, in sleep\n2025-08-28T15:49:00.600580829Z     await __sleep0()\n2025-08-28T15:49:00.600581601Z   File \"/usr/local/lib/python3.11/asyncio/tasks.py\", line 634, in __sleep0\n2025-08-28T15:49:00.600582455Z     yield\n2025-08-28T15:49:00.600583227Z \u001b[31m\u001b[1masyncio.exceptions.CancelledError\u001b[0m\n2025-08-28T15:49:00.600584105Z \u001b[32m2025-08-28 15:49:00.599\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[31m\u001b[1mException in ASGI application\n2025-08-28T15:49:00.600585215Z \u001b[0m",
          "signature": "6a05a6f6d80bc1262024c91d186f5e1c",
          "is_traceback": true
        },
        {
          "line_number": 5874,
          "timestamp": "2025-08-28T15:49:00.815163911Z",
          "severity": "CRITICAL",
          "error_type": "Unknown Exception",
          "pattern": "Traceback",
          "log_line": "2025-08-28T15:49:00.815163911Z \u001b[32m2025-08-28 15:49:00.813\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[31m\u001b[1mTraceback (most recent call last):",
          "log_content": "2025-08-28T15:49:00.815163911Z \u001b[32m2025-08-28 15:49:00.813\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[31m\u001b[1mTraceback (most recent call last):\n2025-08-28T15:49:00.815233940Z   File \"/usr/local/lib/python3.11/site-packages/starlette/routing.py\", line 686, in lifespan\n2025-08-28T15:49:00.815242376Z     await receive()\n2025-08-28T15:49:00.815245717Z   File \"/usr/local/lib/python3.11/site-packages/uvicorn/lifespan/on.py\", line 137, in receive\n2025-08-28T15:49:00.815248230Z     return await self.receive_queue.get()\n2025-08-28T15:49:00.815250464Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n2025-08-28T15:49:00.815252476Z   File \"/usr/local/lib/python3.11/asyncio/queues.py\", line 158, in get\n2025-08-28T15:49:00.815294199Z     await getter\n2025-08-28T15:49:00.815296927Z asyncio.exceptions.CancelledError\n2025-08-28T15:49:00.815298316Z \u001b[0m",
          "signature": "808263b3490c36557ac1655aead3b60c",
          "is_traceback": true
        }
      ]
    },
    "by_time": {
      "2025-08-28 15:00": [
        {
          "line_number": 4966,
          "timestamp": "2025-08-28T15:42:48.331589592Z",
          "severity": "LOW",
          "error_type": "Warning",
          "pattern": "WARNING.*",
          "log_line": "2025-08-28T15:42:48.331589592Z \u001b[32m2025-08-28 15:42:48.328\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[33m\u001b[1mUsing dev user: dev@example.com\u001b[0m",
          "log_content": "\u001b[32m2025-08-28 15:42:48.328\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[33m\u001b[1mUsing dev user: dev@example.com\u001b[0m",
          "signature": "95568203caae7a0f5ea6d7a36c84be61"
        },
        {
          "line_number": 5006,
          "timestamp": "2025-08-28T15:42:49.965290577Z",
          "severity": "ERROR",
          "error_type": "Application Error",
          "pattern": "ERROR.*",
          "log_line": "2025-08-28T15:42:49.965290577Z \u001b[32m2025-08-28 15:42:49.954\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[31m\u001b[1mTask exception was never retrieved",
          "log_content": "\u001b[32m2025-08-28 15:42:49.954\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[31m\u001b[1mTask exception was never retrieved",
          "signature": "2ba017de449297d470cbee95be303865"
        },
        {
          "line_number": 5008,
          "timestamp": "2025-08-28T15:42:49.965335288Z",
          "severity": "CRITICAL",
          "error_type": "Unknown Exception",
          "pattern": "Traceback",
          "log_line": "2025-08-28T15:42:49.965335288Z \u001b[33m\u001b[1mTraceback (most recent call last):\u001b[0m",
          "log_content": "2025-08-28T15:42:49.965335288Z \u001b[33m\u001b[1mTraceback (most recent call last):\u001b[0m\n2025-08-28T15:42:49.965336588Z > File \"\u001b[32m/app/netra_backend/app/database/\u001b[0m\u001b[32m\u001b[1m__init__.py\u001b[0m\", line \u001b[33m49\u001b[0m, in \u001b[35mpostgres_session\u001b[0m\n2025-08-28T15:42:49.965338210Z     \u001b[35m\u001b[1masync\u001b[0m \u001b[35m\u001b[1mwith\u001b[0m \u001b[1masync_session_factory\u001b[0m\u001b[1m(\u001b[0m\u001b[1m)\u001b[0m \u001b[35m\u001b[1mas\u001b[0m \u001b[1msession\u001b[0m\u001b[1m:\u001b[0m\n2025-08-28T15:42:49.965339984Z   File \"/usr/local/lib/python3.11/site-packages/sqlalchemy/ext/asyncio/session.py\", line 1085, in __aexit__\n2025-08-28T15:42:49.965341286Z     await asyncio.shield(task)\n2025-08-28T15:42:49.965342355Z   File \"/usr/local/lib/python3.11/site-packages/sqlalchemy/ext/asyncio/session.py\", line 1030, in close\n2025-08-28T15:42:49.965343714Z     await greenlet_spawn(self.sync_session.close)\n2025-08-28T15:42:49.965344803Z   File \"/usr/local/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py\", line 190, in greenlet_spawn\n2025-08-28T15:42:49.965345991Z     result = context.switch(*args, **kwargs)\n2025-08-28T15:42:49.965347076Z   File \"/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 2521, in close\n2025-08-28T15:42:49.965348220Z     self._close_impl(invalidate=False)\n2025-08-28T15:42:49.965349279Z   File \"/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 2590, in _close_impl\n2025-08-28T15:42:49.965350428Z     transaction.close(invalidate)\n2025-08-28T15:42:49.965351436Z   File \"<string>\", line 2, in close\n2025-08-28T15:42:49.965352690Z   File \"/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py\", line 119, in _go\n2025-08-28T15:42:49.965353847Z     raise sa_exc.IllegalStateChangeError(\n2025-08-28T15:42:49.965354928Z \u001b[31m\u001b[1msqlalchemy.exc.IllegalStateChangeError\u001b[0m:\u001b[1m Method 'close()' can't be called here; method '_connection_for_bind()' is already in progress and this would cause an unexpected state change to <SessionTransactionState.CLOSED: 5> (Background on this error at: https://sqlalche.me/e/20/isce)\u001b[0m\n2025-08-28T15:42:49.988552279Z \u001b[32m2025-08-28 15:42:49.987\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.database.base_crud\u001b[0m:\u001b[36m_create_entity\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1mCreated Thread with id: thread_dev-temp-cc173c1d\u001b[0m\n2025-08-28T15:42:50.022623413Z \u001b[32m2025-08-28 15:42:50.020\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.database.base_crud\u001b[0m:\u001b[36m_create_entity\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1mCreated Message with id: msg_f2fd2906-9d96-4c9a-91f3-4ddbe07afaaf\u001b[0m\n2025-08-28T15:42:50.035549635Z \u001b[32m2025-08-28 15:42:50.033\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.database.base_crud\u001b[0m:\u001b[36m_create_entity\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1mCreated Run with id: run_9f5d282b-ac2c-4745-ab6c-1b8418427760\u001b[0m\n2025-08-28T15:42:50.043154066Z \u001b[32m2025-08-28 15:42:50.040\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"flow_started\", \"flow_id\": \"flow_0a86afc5\", \"correlation_id\": \"run_9f5d282b-ac2c-4745-ab6c-1b8418427760\", \"timestamp\": 1756395770.0403755, \"state_summary\": {\"total_steps\": 4, \"completed_steps\": 0, \"current_phase\": \"initialization\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:50.043204968Z \u001b[32m2025-08-28 15:42:50.040\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_started\", \"flow_id\": \"flow_0a86afc5\", \"correlation_id\": \"run_9f5d282b-ac2c-4745-ab6c-1b8418427760\", \"timestamp\": 1756395770.0407774, \"step_name\": \"create_context\", \"step_type\": \"initialization\", \"state_summary\": {\"total_steps\": 4, \"completed_steps\": 0, \"current_phase\": \"create_context\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:50.043208658Z \u001b[32m2025-08-28 15:42:50.041\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_completed\", \"flow_id\": \"flow_0a86afc5\", \"correlation_id\": \"run_9f5d282b-ac2c-4745-ab6c-1b8418427760\", \"timestamp\": 1756395770.0410018, \"step_name\": \"create_context\", \"step_type\": \"initialization\", \"state_summary\": {\"total_steps\": 4, \"completed_steps\": 1, \"current_phase\": \"create_context\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:50.043305377Z \u001b[32m2025-08-28 15:42:50.041\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_started\", \"flow_id\": \"flow_0a86afc5\", \"correlation_id\": \"run_9f5d282b-ac2c-4745-ab6c-1b8418427760\", \"timestamp\": 1756395770.0411406, \"step_name\": \"initialize_state\", \"step_type\": \"state_management\", \"state_summary\": {\"total_steps\": 4, \"completed_steps\": 1, \"current_phase\": \"initialize_state\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:50.043531932Z \u001b[32m2025-08-28 15:42:50.041\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.services.state_persistence\u001b[0m:\u001b[36m_handle_no_session_warning\u001b[0m:\u001b[36m136\u001b[0m | \u001b[33m\u001b[1mNo state found for run run_9f5d282b-ac2c-4745-ab6c-1b8418427760\u001b[0m\n2025-08-28T15:42:50.053800128Z \u001b[32m2025-08-28 15:42:50.052\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.state_persistence\u001b[0m:\u001b[36m_ensure_user_exists_for_snapshot\u001b[0m:\u001b[36m433\u001b[0m | \u001b[1mAuto-creating dev/test user for state persistence: dev-temp-cc173c1d\u001b[0m\n2025-08-28T15:42:50.065277165Z \u001b[32m2025-08-28 15:42:50.064\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.services.state_persistence\u001b[0m:\u001b[36m_ensure_user_exists_for_snapshot\u001b[0m:\u001b[36m449\u001b[0m | \u001b[33m\u001b[1mCould not auto-create dev user dev-temp-cc173c1d: 1 validation error for UserCreate\n2025-08-28T15:42:50.065341880Z email\n2025-08-28T15:42:50.065343984Z   value is not a valid email address: The part after the @-sign is a special-use or reserved name that cannot be used with email. [type=value_error, input_value='dev-temp-cc173c1d@dev.local', input_type=str]\u001b[0m\n2025-08-28T15:42:50.086968709Z \u001b[32m2025-08-28 15:42:50.079\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.services.state_persistence\u001b[0m:\u001b[36m_handle_save_error\u001b[0m:\u001b[36m402\u001b[0m | \u001b[31m\u001b[1mFailed to save state for run run_9f5d282b-ac2c-4745-ab6c-1b8418427760: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.ForeignKeyViolationError'>: insert or update on table \"agent_state_snapshots\" violates foreign key constraint \"agent_state_snapshots_user_id_fkey\"\n2025-08-28T15:42:50.087147643Z DETAIL:  Key (user_id)=(dev-temp-cc173c1d) is not present in table \"userbase\".\n2025-08-28T15:42:50.087152039Z [SQL: INSERT INTO agent_state_snapshots (id, run_id, thread_id, user_id, version, schema_version, checkpoint_type, state_data, serialization_format, compression_type, step_count, agent_phase, execution_context, created_at, expires_at, is_recovery_point, recovery_reason, parent_snapshot_id) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::JSON, $9::VARCHAR, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13::JSON, now(), $14::TIMESTAMP WITH TIME ZONE, $15::BOOLEAN, $16::VARCHAR, $17::VARCHAR) RETURNING agent_state_snapshots.created_at]\n2025-08-28T15:42:50.087154409Z [parameters: ('6223a5ac-3703-4531-a250-c8751da6df87', 'run_9f5d282b-ac2c-4745-ab6c-1b8418427760', 'thread_dev-temp-cc173c1d', 'dev-temp-cc173c1d', '1.0', '1.0', 'auto', '{\"user_request\": \"My chatbot response time is too slow at 3 seconds. Can you optimize it to under 1 second without increasing costs?\", \"chat_thread_i ... (436 characters truncated) ... 0:00\", \"execution_context\": {}, \"custom_fields\": {}, \"priority\": null, \"retry_count\": 0, \"parent_agent_id\": null, \"tags\": []}, \"quality_metrics\": {}}', 'json', None, 0, 'initialization', '{\"step_count\": 0}', datetime.datetime(2025, 9, 4, 15, 42, 50, 65277, tzinfo=datetime.timezone.utc), True, None, None)]\n2025-08-28T15:42:50.087158145Z (Background on this error at: https://sqlalche.me/e/20/gkpj)\u001b[0m\n2025-08-28T15:42:50.102739724Z \u001b[32m2025-08-28 15:42:50.080\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_completed\", \"flow_id\": \"flow_0a86afc5\", \"correlation_id\": \"run_9f5d282b-ac2c-4745-ab6c-1b8418427760\", \"timestamp\": 1756395770.0803273, \"step_name\": \"initialize_state\", \"step_type\": \"state_management\", \"state_summary\": {\"total_steps\": 4, \"completed_steps\": 2, \"current_phase\": \"initialize_state\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:50.113810647Z \u001b[32m2025-08-28 15:42:50.081\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_started\", \"flow_id\": \"flow_0a86afc5\", \"correlation_id\": \"run_9f5d282b-ac2c-4745-ab6c-1b8418427760\", \"timestamp\": 1756395770.0814297, \"step_name\": \"build_pipeline\", \"step_type\": \"planning\", \"state_summary\": {\"total_steps\": 4, \"completed_steps\": 2, \"current_phase\": \"build_pipeline\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:50.114774287Z \u001b[32m2025-08-28 15:42:50.082\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_completed\", \"flow_id\": \"flow_0a86afc5\", \"correlation_id\": \"run_9f5d282b-ac2c-4745-ab6c-1b8418427760\", \"timestamp\": 1756395770.0824182, \"step_name\": \"build_pipeline\", \"step_type\": \"planning\", \"state_summary\": {\"total_steps\": 4, \"completed_steps\": 3, \"current_phase\": \"build_pipeline\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:50.115397010Z \u001b[32m2025-08-28 15:42:50.083\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_started\", \"flow_id\": \"flow_0a86afc5\", \"correlation_id\": \"run_9f5d282b-ac2c-4745-ab6c-1b8418427760\", \"timestamp\": 1756395770.083185, \"step_name\": \"execute_pipeline\", \"step_type\": \"execution\", \"state_summary\": {\"total_steps\": 4, \"completed_steps\": 3, \"current_phase\": \"execute_pipeline\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:50.118717203Z \u001b[32m2025-08-28 15:42:50.084\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"flow_started\", \"flow_id\": \"flow_d1bc8fb9\", \"correlation_id\": \"64682067-3f5b-4b78-9aad-50e6b7833c8a\", \"timestamp\": 1756395770.0841777, \"state_summary\": {\"total_steps\": 5, \"completed_steps\": 0, \"current_phase\": \"initialization\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:50.118810498Z \u001b[32m2025-08-28 15:42:50.084\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor parallel execution: {\"type\": \"supervisor_parallel\", \"flow_id\": \"flow_d1bc8fb9\", \"correlation_id\": \"64682067-3f5b-4b78-9aad-50e6b7833c8a\", \"agent_names\": [\"triage\", \"data\", \"optimization\", \"actions\", \"reporting\"], \"agent_count\": 5, \"timestamp\": 1756395770.0845637}\u001b[0m\n2025-08-28T15:42:50.118814118Z \u001b[32m2025-08-28 15:42:50.084\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_started\", \"flow_id\": \"flow_d1bc8fb9\", \"correlation_id\": \"64682067-3f5b-4b78-9aad-50e6b7833c8a\", \"timestamp\": 1756395770.0847251, \"step_name\": \"triage\", \"step_type\": \"agent\", \"state_summary\": {\"total_steps\": 5, \"completed_steps\": 0, \"current_phase\": \"triage\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:50.118816952Z \u001b[32m2025-08-28 15:42:50.084\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_started\", \"flow_id\": \"flow_d1bc8fb9\", \"correlation_id\": \"64682067-3f5b-4b78-9aad-50e6b7833c8a\", \"timestamp\": 1756395770.0848799, \"step_name\": \"data\", \"step_type\": \"agent\", \"state_summary\": {\"total_steps\": 5, \"completed_steps\": 0, \"current_phase\": \"data\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:50.118851729Z \u001b[32m2025-08-28 15:42:50.085\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_started\", \"flow_id\": \"flow_d1bc8fb9\", \"correlation_id\": \"64682067-3f5b-4b78-9aad-50e6b7833c8a\", \"timestamp\": 1756395770.0850263, \"step_name\": \"optimization\", \"step_type\": \"agent\", \"state_summary\": {\"total_steps\": 5, \"completed_steps\": 0, \"current_phase\": \"optimization\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:50.118853919Z \u001b[32m2025-08-28 15:42:50.085\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_started\", \"flow_id\": \"flow_d1bc8fb9\", \"correlation_id\": \"64682067-3f5b-4b78-9aad-50e6b7833c8a\", \"timestamp\": 1756395770.0851753, \"step_name\": \"actions\", \"step_type\": \"agent\", \"state_summary\": {\"total_steps\": 5, \"completed_steps\": 0, \"current_phase\": \"actions\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:50.118896849Z \u001b[32m2025-08-28 15:42:50.085\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_started\", \"flow_id\": \"flow_d1bc8fb9\", \"correlation_id\": \"64682067-3f5b-4b78-9aad-50e6b7833c8a\", \"timestamp\": 1756395770.0853379, \"step_name\": \"reporting\", \"step_type\": \"agent\", \"state_summary\": {\"total_steps\": 5, \"completed_steps\": 0, \"current_phase\": \"reporting\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:50.118911421Z \u001b[32m2025-08-28 15:42:50.089\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.llm.subagent_logger\u001b[0m:\u001b[36m_log_communication_json\u001b[0m:\u001b[36m72\u001b[0m | \u001b[1mAgent communication: {\"type\": \"agent_communication\", \"from_agent\": \"Supervisor\", \"to_agent\": \"OptimizationsCoreSubAgent\", \"correlation_id\": \"run_9f5d282b-ac2c-4745-ab6c-1b8418427760\", \"message_type\": \"execute_request\", \"timestamp\": 1756395770.089098}\u001b[0m\n2025-08-28T15:42:50.118990003Z \u001b[32m2025-08-28 15:42:50.090\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.llm.subagent_logger\u001b[0m:\u001b[36m_log_communication_json\u001b[0m:\u001b[36m72\u001b[0m | \u001b[1mAgent communication: {\"type\": \"agent_communication\", \"from_agent\": \"Supervisor\", \"to_agent\": \"ActionsToMeetGoalsSubAgent\", \"correlation_id\": \"run_9f5d282b-ac2c-4745-ab6c-1b8418427760\", \"message_type\": \"execute_request\", \"timestamp\": 1756395770.0901606}\u001b[0m\n2025-08-28T15:42:50.119073980Z \u001b[32m2025-08-28 15:42:50.091\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.llm.subagent_logger\u001b[0m:\u001b[36m_log_communication_json\u001b[0m:\u001b[36m72\u001b[0m | \u001b[1mAgent communication: {\"type\": \"agent_communication\", \"from_agent\": \"Supervisor\", \"to_agent\": \"ReportingSubAgent\", \"correlation_id\": \"run_9f5d282b-ac2c-4745-ab6c-1b8418427760\", \"message_type\": \"execute_request\", \"timestamp\": 1756395770.0917597}\u001b[0m\n2025-08-28T15:42:50.119079465Z \u001b[32m2025-08-28 15:42:50.094\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.agents.optimizations_core_sub_agent\u001b[0m:\u001b[36m_create_fallback_result\u001b[0m:\u001b[36m165\u001b[0m | \u001b[33m\u001b[1mUsing fallback optimization for run_id: run_9f5d282b-ac2c-4745-ab6c-1b8418427760\u001b[0m\n2025-08-28T15:42:50.119278308Z \u001b[32m2025-08-28 15:42:50.096\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36msend_to_user\u001b[0m:\u001b[36m242\u001b[0m | \u001b[33m\u001b[1mNo connections found for user run_9f5d282b-ac2c-4745-ab6c-1b8418427760\u001b[0m\n2025-08-28T15:42:50.119316708Z \u001b[32m2025-08-28 15:42:50.097\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.llm.subagent_logger\u001b[0m:\u001b[36m_log_input_json\u001b[0m:\u001b[36m91\u001b[0m | \u001b[1mAgent input: {\"type\": \"agent_input\", \"from_agent\": \"ReportingSubAgent\", \"to_agent\": \"LLM\", \"data_size\": 7696, \"correlation_id\": \"1538615a-57f4-4065-82f3-6f5b594ef398\", \"timestamp\": 1756395770.097524}\u001b[0m\n2025-08-28T15:42:50.119321399Z \u001b[32m2025-08-28 15:42:50.098\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.triage_sub_agent.executor\u001b[0m:\u001b[36m_log_execution_start\u001b[0m:\u001b[36m247\u001b[0m | \u001b[1mTriageSubAgent starting execution for run_id: run_9f5d282b-ac2c-4745-ab6c-1b8418427760\u001b[0m\n2025-08-28T15:42:50.119444626Z \u001b[32m2025-08-28 15:42:50.100\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36msend_to_user\u001b[0m:\u001b[36m242\u001b[0m | \u001b[33m\u001b[1mNo connections found for user run_9f5d282b-ac2c-4745-ab6c-1b8418427760\u001b[0m\n2025-08-28T15:42:50.119555796Z \u001b[32m2025-08-28 15:42:50.101\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.agents.data_sub_agent.execution_engine\u001b[0m:\u001b[36mexecute_analysis\u001b[0m:\u001b[36m210\u001b[0m | \u001b[31m\u001b[1mData analysis failed: 'ModernClickHouseOperations' object has no attribute 'analyze_performance_metrics'\u001b[0m\n2025-08-28T15:42:50.119664362Z \u001b[32m2025-08-28 15:42:50.109\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36msend_to_user\u001b[0m:\u001b[36m242\u001b[0m | \u001b[33m\u001b[1mNo connections found for user run_9f5d282b-ac2c-4745-ab6c-1b8418427760\u001b[0m\n2025-08-28T15:42:50.119783653Z \u001b[32m2025-08-28 15:42:50.113\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.llm.subagent_logger\u001b[0m:\u001b[36m_log_communication_json\u001b[0m:\u001b[36m72\u001b[0m | \u001b[1mAgent communication: {\"type\": \"agent_communication\", \"from_agent\": \"OptimizationsCoreSubAgent\", \"to_agent\": \"Supervisor\", \"correlation_id\": \"run_9f5d282b-ac2c-4745-ab6c-1b8418427760\", \"message_type\": \"execute_response\", \"timestamp\": 1756395770.1131532}\u001b[0m\n2025-08-28T15:42:50.119933666Z \u001b[32m2025-08-28 15:42:50.113\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.agents.actions_to_meet_goals_sub_agent\u001b[0m:\u001b[36m_handle_execution_failure\u001b[0m:\u001b[36m230\u001b[0m | \u001b[31m\u001b[1mExecution failed: UNKNOWN: Agent Missing required state: optimizations_result and data_result required execution failed in Missing required state: optimizations_result and data_result required\u001b[0m\n2025-08-28T15:42:50.120593723Z \u001b[32m2025-08-28 15:42:50.114\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.llm.subagent_logger\u001b[0m:\u001b[36m_log_communication_json\u001b[0m:\u001b[36m72\u001b[0m | \u001b[1mAgent communication: {\"type\": \"agent_communication\", \"from_agent\": \"ActionsToMeetGoalsSubAgent\", \"to_agent\": \"Supervisor\", \"correlation_id\": \"run_9f5d282b-ac2c-4745-ab6c-1b8418427760\", \"message_type\": \"execute_response\", \"timestamp\": 1756395770.1142128}\u001b[0m\n2025-08-28T15:42:50.120625122Z \u001b[32m2025-08-28 15:42:50.114\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.llm.subagent_logger\u001b[0m:\u001b[36m_log_input_json\u001b[0m:\u001b[36m91\u001b[0m | \u001b[1mAgent input: {\"type\": \"agent_input\", \"from_agent\": \"TriageSubAgent\", \"to_agent\": \"LLM\", \"data_size\": 3091, \"correlation_id\": \"cc4f9c21-b8b5-4910-a2a8-0d54ef281afb\", \"timestamp\": 1756395770.1146708}\u001b[0m\n2025-08-28T15:42:50.120628813Z \u001b[32m2025-08-28 15:42:50.115\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.llm.llm_structured_operations\u001b[0m:\u001b[36m_fallback_structured_parse\u001b[0m:\u001b[36m103\u001b[0m | \u001b[31m\u001b[1mStructured generation failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:42:50.120977344Z \u001b[32m2025-08-28 15:42:50.115\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.llm.llm_structured_operations\u001b[0m:\u001b[36m_handle_fallback_failure\u001b[0m:\u001b[36m119\u001b[0m | \u001b[31m\u001b[1mFallback parsing also failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:42:50.121029462Z \u001b[32m2025-08-28 15:42:50.115\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.llm.subagent_logger\u001b[0m:\u001b[36m_log_output_json\u001b[0m:\u001b[36m110\u001b[0m | \u001b[1mAgent output: {\"type\": \"agent_output\", \"to_agent\": \"LLM\", \"from_agent\": \"TriageSubAgent\", \"correlation_id\": \"cc4f9c21-b8b5-4910-a2a8-0d54ef281afb\", \"timestamp\": 1756395770.1159153, \"data_size\": 0, \"status\": \"error\"}\u001b[0m\n2025-08-28T15:42:50.122200101Z \u001b[32m2025-08-28 15:42:50.116\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.llm.subagent_logger\u001b[0m:\u001b[36m_log_input_json\u001b[0m:\u001b[36m91\u001b[0m | \u001b[1mAgent input: {\"type\": \"agent_input\", \"from_agent\": \"TriageSubAgent-Fallback\", \"to_agent\": \"LLM\", \"data_size\": 3144, \"correlation_id\": \"34091f8e-0bf0-45e8-9691-ebf58000be40\", \"timestamp\": 1756395770.1160934}\u001b[0m\n2025-08-28T15:42:50.125717669Z \u001b[32m2025-08-28 15:42:50.121\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.llm.subagent_logger\u001b[0m:\u001b[36m_log_output_json\u001b[0m:\u001b[36m110\u001b[0m | \u001b[1mAgent output: {\"type\": \"agent_output\", \"to_agent\": \"LLM\", \"from_agent\": \"ReportingSubAgent\", \"correlation_id\": \"1538615a-57f4-4065-82f3-6f5b594ef398\", \"timestamp\": 1756395770.1213894, \"data_size\": 0, \"status\": \"error\"}\u001b[0m\n2025-08-28T15:42:50.126307908Z \u001b[32m2025-08-28 15:42:50.122\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.core.reliability\u001b[0m:\u001b[36m_log_fallback_attempt\u001b[0m:\u001b[36m239\u001b[0m | \u001b[33m\u001b[1mReportingSubAgent.execute_reporting: Primary operation failed, trying fallback: 'RetryConfig' object has no attribute 'exponential_base'\u001b[0m\n2025-08-28T15:42:50.128540465Z \u001b[32m2025-08-28 15:42:50.122\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.agents.reporting_sub_agent\u001b[0m:\u001b[36m_fallback_reporting\u001b[0m:\u001b[36m181\u001b[0m | \u001b[33m\u001b[1mUsing fallback reporting for run_id: run_9f5d282b-ac2c-4745-ab6c-1b8418427760\u001b[0m\n2025-08-28T15:42:50.128633820Z \u001b[32m2025-08-28 15:42:50.123\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36msend_to_user\u001b[0m:\u001b[36m242\u001b[0m | \u001b[33m\u001b[1mNo connections found for user run_9f5d282b-ac2c-4745-ab6c-1b8418427760\u001b[0m\n2025-08-28T15:42:50.128685822Z \u001b[32m2025-08-28 15:42:50.124\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.llm.subagent_logger\u001b[0m:\u001b[36m_log_communication_json\u001b[0m:\u001b[36m72\u001b[0m | \u001b[1mAgent communication: {\"type\": \"agent_communication\", \"from_agent\": \"ReportingSubAgent\", \"to_agent\": \"Supervisor\", \"correlation_id\": \"run_9f5d282b-ac2c-4745-ab6c-1b8418427760\", \"message_type\": \"execute_response\", \"timestamp\": 1756395770.1242654}\u001b[0m\n2025-08-28T15:42:50.131104009Z \u001b[32m2025-08-28 15:42:50.129\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.agents.triage_sub_agent.llm_processor\u001b[0m:\u001b[36m_handle_fallback_error\u001b[0m:\u001b[36m234\u001b[0m | \u001b[31m\u001b[1mLLM fallback processing failed for run_9f5d282b-ac2c-4745-ab6c-1b8418427760: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:42:50.134031712Z \u001b[32m2025-08-28 15:42:50.131\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.llm.fallback_strategies\u001b[0m:\u001b[36m_log_retry_warning\u001b[0m:\u001b[36m102\u001b[0m | \u001b[33m\u001b[1mLLM operation triage_analysis failed (attempt 1/3): None. Retrying in 1.17s\u001b[0m\n2025-08-28T15:42:51.306409239Z \u001b[32m2025-08-28 15:42:51.305\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36msend_to_user\u001b[0m:\u001b[36m242\u001b[0m | \u001b[33m\u001b[1mNo connections found for user run_9f5d282b-ac2c-4745-ab6c-1b8418427760\u001b[0m\n2025-08-28T15:42:51.308281393Z \u001b[32m2025-08-28 15:42:51.306\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.llm.subagent_logger\u001b[0m:\u001b[36m_log_input_json\u001b[0m:\u001b[36m91\u001b[0m | \u001b[1mAgent input: {\"type\": \"agent_input\", \"from_agent\": \"TriageSubAgent\", \"to_agent\": \"LLM\", \"data_size\": 3091, \"correlation_id\": \"71ba5184-1f03-4644-8216-72eb40856296\", \"timestamp\": 1756395771.306283}\u001b[0m\n2025-08-28T15:42:51.308313236Z \u001b[32m2025-08-28 15:42:51.306\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.llm.llm_structured_operations\u001b[0m:\u001b[36m_fallback_structured_parse\u001b[0m:\u001b[36m103\u001b[0m | \u001b[31m\u001b[1mStructured generation failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:42:51.308316713Z \u001b[32m2025-08-28 15:42:51.307\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.llm.llm_structured_operations\u001b[0m:\u001b[36m_handle_fallback_failure\u001b[0m:\u001b[36m119\u001b[0m | \u001b[31m\u001b[1mFallback parsing also failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:42:51.308738579Z \u001b[32m2025-08-28 15:42:51.307\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.llm.subagent_logger\u001b[0m:\u001b[36m_log_output_json\u001b[0m:\u001b[36m110\u001b[0m | \u001b[1mAgent output: {\"type\": \"agent_output\", \"to_agent\": \"LLM\", \"from_agent\": \"TriageSubAgent\", \"correlation_id\": \"71ba5184-1f03-4644-8216-72eb40856296\", \"timestamp\": 1756395771.3072233, \"data_size\": 0, \"status\": \"error\"}\u001b[0m\n2025-08-28T15:42:51.308842906Z \u001b[32m2025-08-28 15:42:51.307\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.llm.subagent_logger\u001b[0m:\u001b[36m_log_input_json\u001b[0m:\u001b[36m91\u001b[0m | \u001b[1mAgent input: {\"type\": \"agent_input\", \"from_agent\": \"TriageSubAgent-Fallback\", \"to_agent\": \"LLM\", \"data_size\": 3144, \"correlation_id\": \"19e43d2c-7f0d-486a-8f1e-ae51f8807b29\", \"timestamp\": 1756395771.307429}\u001b[0m\n2025-08-28T15:42:51.312344262Z \u001b[32m2025-08-28 15:42:51.311\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.agents.triage_sub_agent.llm_processor\u001b[0m:\u001b[36m_handle_fallback_error\u001b[0m:\u001b[36m234\u001b[0m | \u001b[31m\u001b[1mLLM fallback processing failed for run_9f5d282b-ac2c-4745-ab6c-1b8418427760: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:42:51.312369793Z \u001b[32m2025-08-28 15:42:51.311\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.llm.fallback_strategies\u001b[0m:\u001b[36m_log_retry_warning\u001b[0m:\u001b[36m102\u001b[0m | \u001b[33m\u001b[1mLLM operation triage_analysis failed (attempt 2/3): None. Retrying in 2.43s\u001b[0m\n2025-08-28T15:42:51.312372018Z \u001b[32m2025-08-28 15:42:51.311\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.core.resilience.unified_circuit_breaker\u001b[0m:\u001b[36m_transition_to_open\u001b[0m:\u001b[36m513\u001b[0m | \u001b[33m\u001b[1mCircuit breaker 'CircuitConfig(name='llm_fallback_triage', failure_threshold=3, recovery_timeout=30.0, half_open_max_calls=3, timeout_seconds=10.0, adaptive_threshold=True, slow_call_threshold=5.0, sliding_window_size=100)' -> OPEN\u001b[0m\n2025-08-28T15:42:52.977190124Z \u001b[32m2025-08-28 15:42:52.973\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m41\u001b[0m | \u001b[1mSecurityResponseMiddleware processing: /health\u001b[0m\n2025-08-28T15:42:52.980167245Z \u001b[32m2025-08-28 15:42:52.976\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.request_context\u001b[0m:\u001b[36mlog_request_details\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mRequest: GET /health | Status: 200 | Duration: 2.15ms | Trace: trace_ad21d30ffd764658\u001b[0m\n2025-08-28T15:42:52.980304007Z \u001b[32m2025-08-28 15:42:52.977\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m47\u001b[0m | \u001b[1mResponse for /health: status=200, is_api=False, has_auth=False\u001b[0m\n2025-08-28T15:42:52.980313191Z \u001b[32m2025-08-28 15:42:52.978\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m127.0.0.1:55088 - \"GET /health HTTP/1.1\" 200\u001b[0m\n2025-08-28T15:42:53.741982972Z \u001b[32m2025-08-28 15:42:53.741\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36msend_to_user\u001b[0m:\u001b[36m242\u001b[0m | \u001b[33m\u001b[1mNo connections found for user run_9f5d282b-ac2c-4745-ab6c-1b8418427760\u001b[0m\n2025-08-28T15:42:53.742230166Z \u001b[32m2025-08-28 15:42:53.741\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.llm.subagent_logger\u001b[0m:\u001b[36m_log_input_json\u001b[0m:\u001b[36m91\u001b[0m | \u001b[1mAgent input: {\"type\": \"agent_input\", \"from_agent\": \"TriageSubAgent\", \"to_agent\": \"LLM\", \"data_size\": 3091, \"correlation_id\": \"d75f281d-1807-4e39-826d-ee2af74ffe2b\", \"timestamp\": 1756395773.74172}\u001b[0m\n2025-08-28T15:42:53.743501397Z \u001b[32m2025-08-28 15:42:53.742\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.llm.llm_structured_operations\u001b[0m:\u001b[36m_fallback_structured_parse\u001b[0m:\u001b[36m103\u001b[0m | \u001b[31m\u001b[1mStructured generation failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:42:53.743978245Z \u001b[32m2025-08-28 15:42:53.742\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.llm.llm_structured_operations\u001b[0m:\u001b[36m_handle_fallback_failure\u001b[0m:\u001b[36m119\u001b[0m | \u001b[31m\u001b[1mFallback parsing also failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:42:53.743985976Z \u001b[32m2025-08-28 15:42:53.742\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.llm.subagent_logger\u001b[0m:\u001b[36m_log_output_json\u001b[0m:\u001b[36m110\u001b[0m | \u001b[1mAgent output: {\"type\": \"agent_output\", \"to_agent\": \"LLM\", \"from_agent\": \"TriageSubAgent\", \"correlation_id\": \"d75f281d-1807-4e39-826d-ee2af74ffe2b\", \"timestamp\": 1756395773.7426498, \"data_size\": 0, \"status\": \"error\"}\u001b[0m\n2025-08-28T15:42:53.743988453Z \u001b[32m2025-08-28 15:42:53.742\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.llm.subagent_logger\u001b[0m:\u001b[36m_log_input_json\u001b[0m:\u001b[36m91\u001b[0m | \u001b[1mAgent input: {\"type\": \"agent_input\", \"from_agent\": \"TriageSubAgent-Fallback\", \"to_agent\": \"LLM\", \"data_size\": 3144, \"correlation_id\": \"2aef3fc1-5c7a-4c44-87f6-80c8e315e81d\", \"timestamp\": 1756395773.7427936}\u001b[0m\n2025-08-28T15:42:53.747657474Z \u001b[32m2025-08-28 15:42:53.745\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.agents.triage_sub_agent.llm_processor\u001b[0m:\u001b[36m_handle_fallback_error\u001b[0m:\u001b[36m234\u001b[0m | \u001b[31m\u001b[1mLLM fallback processing failed for run_9f5d282b-ac2c-4745-ab6c-1b8418427760: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:42:53.747733785Z \u001b[32m2025-08-28 15:42:53.745\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.llm.retry_helpers\u001b[0m:\u001b[36mlog_final_failure\u001b[0m:\u001b[36m51\u001b[0m | \u001b[31m\u001b[1mLLM operation triage_analysis failed after 3 attempts: None\u001b[0m\n2025-08-28T15:42:53.747982900Z \u001b[32m2025-08-28 15:42:53.746\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36msend_to_user\u001b[0m:\u001b[36m242\u001b[0m | \u001b[33m\u001b[1mNo connections found for user run_9f5d282b-ac2c-4745-ab6c-1b8418427760\u001b[0m\n2025-08-28T15:42:53.748230727Z /usr/local/lib/python3.11/site-packages/pydantic/main.py:463: UserWarning: Pydantic serializer warnings:\n2025-08-28T15:42:53.748268411Z   PydanticSerializationUnexpectedValue(Expected `TriageResult` - serialized value may not be as expected [input_value={'category': 'Error', 'se...equire_approval': False}, input_type=dict])\n2025-08-28T15:42:53.748275604Z   return self.__pydantic_serializer__.to_python(\n2025-08-28T15:42:53.748278761Z \u001b[32m2025-08-28 15:42:53.746\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.core.resilience.unified_circuit_breaker\u001b[0m:\u001b[36m_transition_to_open\u001b[0m:\u001b[36m513\u001b[0m | \u001b[33m\u001b[1mCircuit breaker 'CircuitConfig(name='llm_fallback_triage', failure_threshold=3, recovery_timeout=30.0, half_open_max_calls=3, timeout_seconds=10.0, adaptive_threshold=True, slow_call_threshold=5.0, sliding_window_size=100)' -> OPEN\u001b[0m\n2025-08-28T15:42:53.748299254Z \u001b[32m2025-08-28 15:42:53.746\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_completed\", \"flow_id\": \"flow_d1bc8fb9\", \"correlation_id\": \"64682067-3f5b-4b78-9aad-50e6b7833c8a\", \"timestamp\": 1756395773.7467895, \"step_name\": \"triage\", \"step_type\": \"agent\", \"state_summary\": {\"total_steps\": 5, \"completed_steps\": 1, \"current_phase\": \"reporting\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:53.748322179Z \u001b[32m2025-08-28 15:42:53.746\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_completed\", \"flow_id\": \"flow_d1bc8fb9\", \"correlation_id\": \"64682067-3f5b-4b78-9aad-50e6b7833c8a\", \"timestamp\": 1756395773.7469342, \"step_name\": \"data\", \"step_type\": \"agent\", \"state_summary\": {\"total_steps\": 5, \"completed_steps\": 2, \"current_phase\": \"reporting\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:53.748382196Z \u001b[32m2025-08-28 15:42:53.747\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_completed\", \"flow_id\": \"flow_d1bc8fb9\", \"correlation_id\": \"64682067-3f5b-4b78-9aad-50e6b7833c8a\", \"timestamp\": 1756395773.7470486, \"step_name\": \"optimization\", \"step_type\": \"agent\", \"state_summary\": {\"total_steps\": 5, \"completed_steps\": 3, \"current_phase\": \"reporting\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:53.750036497Z \u001b[32m2025-08-28 15:42:53.747\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_completed\", \"flow_id\": \"flow_d1bc8fb9\", \"correlation_id\": \"64682067-3f5b-4b78-9aad-50e6b7833c8a\", \"timestamp\": 1756395773.7471519, \"step_name\": \"actions\", \"step_type\": \"agent\", \"state_summary\": {\"total_steps\": 5, \"completed_steps\": 4, \"current_phase\": \"reporting\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:53.750270775Z \u001b[32m2025-08-28 15:42:53.747\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_completed\", \"flow_id\": \"flow_d1bc8fb9\", \"correlation_id\": \"64682067-3f5b-4b78-9aad-50e6b7833c8a\", \"timestamp\": 1756395773.747252, \"step_name\": \"reporting\", \"step_type\": \"agent\", \"state_summary\": {\"total_steps\": 5, \"completed_steps\": 5, \"current_phase\": \"reporting\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:53.750378996Z \u001b[32m2025-08-28 15:42:53.748\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.pipeline_executor\u001b[0m:\u001b[36m_persist_batched_state\u001b[0m:\u001b[36m201\u001b[0m | \u001b[31m\u001b[1mError in batched state persistence: PIPELINE_COMPLETE\u001b[0m\n2025-08-28T15:42:53.750399156Z \u001b[32m2025-08-28 15:42:53.749\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"flow_completed\", \"flow_id\": \"flow_d1bc8fb9\", \"correlation_id\": \"64682067-3f5b-4b78-9aad-50e6b7833c8a\", \"timestamp\": 1756395773.749105, \"state_summary\": {\"total_steps\": 5, \"completed_steps\": 5, \"current_phase\": \"reporting\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:53.754121465Z \u001b[32m2025-08-28 15:42:53.751\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.state_persistence\u001b[0m:\u001b[36m_ensure_user_exists_for_snapshot\u001b[0m:\u001b[36m433\u001b[0m | \u001b[1mAuto-creating dev/test user for state persistence: dev-temp-cc173c1d\u001b[0m\n2025-08-28T15:42:53.754182672Z \u001b[32m2025-08-28 15:42:53.752\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.services.state_persistence\u001b[0m:\u001b[36m_ensure_user_exists_for_snapshot\u001b[0m:\u001b[36m449\u001b[0m | \u001b[33m\u001b[1mCould not auto-create dev user dev-temp-cc173c1d: 1 validation error for UserCreate\n2025-08-28T15:42:53.754190016Z email\n2025-08-28T15:42:53.754192893Z   value is not a valid email address: The part after the @-sign is a special-use or reserved name that cannot be used with email. [type=value_error, input_value='dev-temp-cc173c1d@dev.local', input_type=str]\u001b[0m\n2025-08-28T15:42:53.757384618Z \u001b[32m2025-08-28 15:42:53.755\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.services.state_persistence\u001b[0m:\u001b[36m_handle_save_error\u001b[0m:\u001b[36m402\u001b[0m | \u001b[31m\u001b[1mFailed to save state for run run_9f5d282b-ac2c-4745-ab6c-1b8418427760: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.ForeignKeyViolationError'>: insert or update on table \"agent_state_snapshots\" violates foreign key constraint \"agent_state_snapshots_user_id_fkey\"\n2025-08-28T15:42:53.757435577Z DETAIL:  Key (user_id)=(dev-temp-cc173c1d) is not present in table \"userbase\".\n2025-08-28T15:42:53.757443579Z [SQL: INSERT INTO agent_state_snapshots (id, run_id, thread_id, user_id, version, schema_version, checkpoint_type, state_data, serialization_format, compression_type, step_count, agent_phase, execution_context, created_at, expires_at, is_recovery_point, recovery_reason, parent_snapshot_id) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::JSON, $9::VARCHAR, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13::JSON, now(), $14::TIMESTAMP WITH TIME ZONE, $15::BOOLEAN, $16::VARCHAR, $17::VARCHAR) RETURNING agent_state_snapshots.created_at]\n2025-08-28T15:42:53.757447879Z [parameters: ('bf5bf752-f507-4956-bfc6-286de3d6649c', 'run_9f5d282b-ac2c-4745-ab6c-1b8418427760', 'thread_dev-temp-cc173c1d', 'dev-temp-cc173c1d', '1.0', '1.0', 'auto', '{\"user_request\": \"My chatbot response time is too slow at 3 seconds. Can you optimize it to under 1 second without increasing costs?\", \"chat_thread_i ... (3152 characters truncated) ... \", \"last_updated\": \"2025-08-28T15:42:50.041463Z\", \"execution_context\": {}, \"custom_fields\": {}, \"retry_count\": 0, \"tags\": []}, \"quality_metrics\": {}}', 'compressed_json', None, 0, None, '{}', datetime.datetime(2025, 9, 4, 15, 42, 53, 752690, tzinfo=datetime.timezone.utc), False, None, None)]\n2025-08-28T15:42:53.757451984Z (Background on this error at: https://sqlalche.me/e/20/gkpj)\u001b[0m\n2025-08-28T15:42:53.758398186Z \u001b[32m2025-08-28 15:42:53.756\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36msend_to_thread\u001b[0m:\u001b[36m300\u001b[0m | \u001b[33m\u001b[1mNo active connections found for thread thread_dev-temp-cc173c1d\u001b[0m\n2025-08-28T15:42:53.758779920Z \u001b[32m2025-08-28 15:42:53.756\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"step_completed\", \"flow_id\": \"flow_0a86afc5\", \"correlation_id\": \"run_9f5d282b-ac2c-4745-ab6c-1b8418427760\", \"timestamp\": 1756395773.7566242, \"step_name\": \"execute_pipeline\", \"step_type\": \"execution\", \"state_summary\": {\"total_steps\": 4, \"completed_steps\": 4, \"current_phase\": \"execute_pipeline\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:53.758938616Z \u001b[32m2025-08-28 15:42:53.756\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.observability_flow\u001b[0m:\u001b[36m_log_json_data\u001b[0m:\u001b[36m165\u001b[0m | \u001b[1mSupervisor flow: {\"type\": \"supervisor_flow\", \"event\": \"flow_completed\", \"flow_id\": \"flow_0a86afc5\", \"correlation_id\": \"run_9f5d282b-ac2c-4745-ab6c-1b8418427760\", \"timestamp\": 1756395773.756865, \"state_summary\": {\"total_steps\": 4, \"completed_steps\": 4, \"current_phase\": \"execute_pipeline\", \"active_agents\": []}}\u001b[0m\n2025-08-28T15:42:53.761394711Z \u001b[32m2025-08-28 15:42:53.760\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.database.base_crud\u001b[0m:\u001b[36m_create_entity\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1mCreated Message with id: msg_69fa3c56-5ede-47da-8259-a9f128e85c14\u001b[0m\n2025-08-28T15:42:53.769504533Z \u001b[32m2025-08-28 15:42:53.768\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.database.base_crud\u001b[0m:\u001b[36m_execute_update_operation\u001b[0m:\u001b[36m129\u001b[0m | \u001b[1mUpdated Run with id: run_9f5d282b-ac2c-4745-ab6c-1b8418427760\u001b[0m\n2025-08-28T15:42:53.771278982Z \u001b[32m2025-08-28 15:42:53.770\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36m_send_to_connection\u001b[0m:\u001b[36m374\u001b[0m | \u001b[31m\u001b[1mError sending to connection conn_dev-temp-cc173c1d_3052f606: Object of type DeepAgentState is not JSON serializable\u001b[0m\n2025-08-28T15:42:53.775558713Z \u001b[32m2025-08-28 15:42:53.773\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36m_cleanup_connection\u001b[0m:\u001b[36m220\u001b[0m | \u001b[1mWebSocket closed for connection conn_dev-temp-cc173c1d_3052f606: 1011 - Send error\u001b[0m\n2025-08-28T15:42:53.775600892Z \u001b[32m2025-08-28 15:42:53.774\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.agent_handler\u001b[0m:\u001b[36m_handle_start_agent\u001b[0m:\u001b[36m123\u001b[0m | \u001b[1mSuccessfully processed start_agent for dev-temp-cc173c1d\u001b[0m\n2025-08-28T15:42:53.775603778Z \u001b[32m2025-08-28 15:42:53.774\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mconnection closed\u001b[0m\n2025-08-28T15:42:53.775605350Z \u001b[32m2025-08-28 15:42:53.774\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mconnection closed\u001b[0m\n2025-08-28T15:42:53.775606896Z \u001b[32m2025-08-28 15:42:53.775\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36m_handle_websocket_messages\u001b[0m:\u001b[36m368\u001b[0m | \u001b[31m\u001b[1mMessage handling error for conn_dev-temp-cc173c1d_3052f606: WebSocket is not connected. Need to call \"accept\" first.\u001b[0m\n2025-08-28T15:42:53.876730656Z \u001b[32m2025-08-28 15:42:53.875\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36m_handle_websocket_messages\u001b[0m:\u001b[36m368\u001b[0m | \u001b[31m\u001b[1mMessage handling error for conn_dev-temp-cc173c1d_3052f606: WebSocket is not connected. Need to call \"accept\" first.\u001b[0m\n2025-08-28T15:42:54.078450324Z \u001b[32m2025-08-28 15:42:54.077\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36m_handle_websocket_messages\u001b[0m:\u001b[36m368\u001b[0m | \u001b[31m\u001b[1mMessage handling error for conn_dev-temp-cc173c1d_3052f606: WebSocket is not connected. Need to call \"accept\" first.\u001b[0m\n2025-08-28T15:42:54.478300503Z \u001b[32m2025-08-28 15:42:54.477\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36m_handle_websocket_messages\u001b[0m:\u001b[36m368\u001b[0m | \u001b[31m\u001b[1mMessage handling error for conn_dev-temp-cc173c1d_3052f606: WebSocket is not connected. Need to call \"accept\" first.\u001b[0m\n2025-08-28T15:42:55.280205451Z \u001b[32m2025-08-28 15:42:55.279\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36m_handle_websocket_messages\u001b[0m:\u001b[36m368\u001b[0m | \u001b[31m\u001b[1mMessage handling error for conn_dev-temp-cc173c1d_3052f606: WebSocket is not connected. Need to call \"accept\" first.\u001b[0m\n2025-08-28T15:42:55.280733356Z \u001b[32m2025-08-28 15:42:55.279\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36m_handle_websocket_messages\u001b[0m:\u001b[36m371\u001b[0m | \u001b[31m\u001b[1mToo many errors, closing connection conn_dev-temp-cc173c1d_3052f606\u001b[0m\n2025-08-28T15:42:55.280757385Z \u001b[32m2025-08-28 15:42:55.279\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36m_handle_websocket_messages\u001b[0m:\u001b[36m383\u001b[0m | \u001b[1mExiting message handling loop for connection: conn_dev-temp-cc173c1d_3052f606 | Duration: 7.7s | Messages processed: 1 | Errors: 5 | User: dev-temp-cc173c1d\u001b[0m\n2025-08-28T15:42:55.280759785Z \u001b[32m2025-08-28 15:42:55.279\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36mwebsocket_endpoint\u001b[0m:\u001b[36m198\u001b[0m | \u001b[1mMessage handling loop ended for connection: conn_dev-temp-cc173c1d_3052f606\u001b[0m\n2025-08-28T15:42:55.280761275Z \u001b[32m2025-08-28 15:42:55.279\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.auth\u001b[0m:\u001b[36mcleanup\u001b[0m:\u001b[36m349\u001b[0m | \u001b[1mWebSocket authenticator cleanup completed\u001b[0m\n2025-08-28T15:42:55.280763080Z \u001b[32m2025-08-28 15:42:55.280\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36mwebsocket_endpoint\u001b[0m:\u001b[36m255\u001b[0m | \u001b[1mWebSocket cleanup completed: conn_dev-temp-cc173c1d_3052f606\u001b[0m\n2025-08-28T15:42:57.043440799Z \u001b[32m2025-08-28 15:42:57.040\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_index_optimization_background\u001b[0m:\u001b[36m232\u001b[0m | \u001b[1mStarting background database index optimization...\u001b[0m\n2025-08-28T15:42:57.043469781Z \u001b[32m2025-08-28 15:42:57.041\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.db.database_index_manager\u001b[0m:\u001b[36moptimize_all_databases\u001b[0m:\u001b[36m129\u001b[0m | \u001b[1mStarting database optimization across all databases\u001b[0m\n2025-08-28T15:42:57.043471912Z \u001b[32m2025-08-28 15:42:57.041\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.db.index_optimizer_core\u001b[0m:\u001b[36mlog_engine_unavailable\u001b[0m:\u001b[36m52\u001b[0m | \u001b[33m\u001b[1mAsync engine not available, skipping index creation\u001b[0m\n2025-08-28T15:42:57.043489839Z \u001b[32m2025-08-28 15:42:57.042\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.db.clickhouse\u001b[0m:\u001b[36m_create_mock_client\u001b[0m:\u001b[36m132\u001b[0m | \u001b[1m[ClickHouse] Using MOCK client for development\u001b[0m\n2025-08-28T15:42:57.043491391Z \u001b[32m2025-08-28 15:42:57.042\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.db.clickhouse\u001b[0m:\u001b[36m_create_mock_client\u001b[0m:\u001b[36m132\u001b[0m | \u001b[1m[ClickHouse] Using MOCK client for development\u001b[0m\n2025-08-28T15:42:57.043492707Z \u001b[32m2025-08-28 15:42:57.042\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.db.database_index_manager\u001b[0m:\u001b[36moptimize_all_databases\u001b[0m:\u001b[36m138\u001b[0m | \u001b[1mDatabase optimization completed - PostgreSQL: True, ClickHouse: True\u001b[0m\n2025-08-28T15:42:57.043507810Z \u001b[32m2025-08-28 15:42:57.042\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_index_optimization_background\u001b[0m:\u001b[36m239\u001b[0m | \u001b[1mBackground database optimization completed successfully: {'postgres': {'indexes_created': {}, 'recommendations': [{'table_name': 'userbase', 'columns': ['email'], 'index_type': 'btree', 'reason': 'Frequent user lookups by email', 'estimated_benefit': 0.0, 'priority': 1}, {'table_name': 'corpus_audit_logs', 'columns': ['timestamp'], 'index_type': 'btree', 'reason': 'Time-based audit queries', 'estimated_benefit': 0.0, 'priority': 1}, {'table_name': 'corpus_audit_logs', 'columns': ['user_id', 'action'], 'index_type': 'btree', 'reason': 'User action filtering', 'estimated_benefit': 0.0, 'priority': 2}, {'table_name': 'secret', 'columns': ['user_id'], 'index_type': 'btree', 'reason': 'User secret lookups', 'estimated_benefit': 0.0, 'priority': 2}, {'table_name': 'agent_states', 'columns': ['session_id'], 'index_type': 'btree', 'reason': 'Session-based state lookups', 'estimated_benefit': 0.0, 'priority': 2}], 'usage_stats': {}}, 'clickhouse': {'table_optimizations': {'netra_content_corpus': False, 'netra_audit_events': False, 'netra_performance_metrics': False, 'netra_agent_logs': False}, 'materialized_views': {'user_daily_activity': False, 'hourly_performance_metrics': False}}, 'recommendations': []}\u001b[0m\n2025-08-28T15:42:58.788054099Z \u001b[32m2025-08-28 15:42:58.783\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m('172.18.0.1', 45122) - \"WebSocket /ws\" [accepted]\u001b[0m\n2025-08-28T15:42:58.789787861Z \u001b[32m2025-08-28 15:42:58.784\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m('172.18.0.1', 45122) - \"WebSocket /ws\" [accepted]\u001b[0m\n2025-08-28T15:42:58.789849108Z \u001b[32m2025-08-28 15:42:58.784\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36mwebsocket_endpoint\u001b[0m:\u001b[36m121\u001b[0m | \u001b[1mWebSocket accepted with subprotocol: jwt-auth\u001b[0m\n2025-08-28T15:42:58.790894704Z \u001b[32m2025-08-28 15:42:58.784\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.websocket_cors\u001b[0m:\u001b[36mget_websocket_cors_handler\u001b[0m:\u001b[36m566\u001b[0m | \u001b[1mWebSocket CORS: Detected environment from config: 'development'\u001b[0m\n2025-08-28T15:42:58.790922301Z \u001b[32m2025-08-28 15:42:58.785\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.websocket_cors\u001b[0m:\u001b[36mvalidate_websocket_origin\u001b[0m:\u001b[36m360\u001b[0m | \u001b[1mWebSocket connection allowed from origin: http://127.0.0.1:3000 in development environment\u001b[0m\n2025-08-28T15:42:58.790960911Z \u001b[32m2025-08-28 15:42:58.785\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mStarted trace span: websocket_jwt_validation (trace_id: 0217894fc9d24d0794cc38ecb7fc2441)\u001b[0m\n2025-08-28T15:42:58.790975119Z \u001b[32m2025-08-28 15:42:58.788\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mconnection open\u001b[0m\n2025-08-28T15:42:58.790976408Z \u001b[32m2025-08-28 15:42:58.788\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mconnection open\u001b[0m\n2025-08-28T15:42:58.798260268Z \u001b[32m2025-08-28 15:42:58.794\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mHTTP Request: POST http://auth:8081/auth/check-blacklist \"HTTP/1.1 200 OK\"\u001b[0m\n2025-08-28T15:42:58.798833549Z \u001b[32m2025-08-28 15:42:58.797\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mCompleted trace span: websocket_jwt_validation\u001b[0m\n2025-08-28T15:42:58.798844459Z \u001b[32m2025-08-28 15:42:58.797\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.auth\u001b[0m:\u001b[36mauthenticate_websocket\u001b[0m:\u001b[36m121\u001b[0m | \u001b[1mWebSocket authenticated: dev-temp-cc173c1d\u001b[0m\n2025-08-28T15:42:58.798846696Z \u001b[32m2025-08-28 15:42:58.797\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36mwebsocket_endpoint\u001b[0m:\u001b[36m154\u001b[0m | \u001b[1mWebSocket authenticated for user: dev-temp-cc173c1d at 2025-08-28T15:42:58.797582+00:00\u001b[0m\n2025-08-28T15:42:58.800372426Z \u001b[32m2025-08-28 15:42:58.798\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36mconnect_user\u001b[0m:\u001b[36m124\u001b[0m | \u001b[1mWebSocket connected: conn_dev-temp-cc173c1d_9dda8614 for user dev-temp-cc173c1d\u001b[0m\n2025-08-28T15:42:58.800571420Z \u001b[32m2025-08-28 15:42:58.798\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36mwebsocket_endpoint\u001b[0m:\u001b[36m188\u001b[0m | \u001b[1mWebSocket ready: conn_dev-temp-cc173c1d_9dda8614\u001b[0m\n2025-08-28T15:42:58.800672069Z \u001b[32m2025-08-28 15:42:58.799\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36mwebsocket_endpoint\u001b[0m:\u001b[36m191\u001b[0m | \u001b[1mStarting message handling loop for connection: conn_dev-temp-cc173c1d_9dda8614\u001b[0m\n2025-08-28T15:42:58.800775551Z \u001b[32m2025-08-28 15:42:58.799\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36mwebsocket_endpoint\u001b[0m:\u001b[36m193\u001b[0m | \u001b[1mWebSocket state before loop - client_state: WebSocketState.CONNECTED, application_state: WebSocketState.CONNECTED\u001b[0m\n2025-08-28T15:42:58.800822170Z \u001b[32m2025-08-28 15:42:58.799\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36m_handle_websocket_messages\u001b[0m:\u001b[36m276\u001b[0m | \u001b[1mEntering message handling loop for connection: conn_dev-temp-cc173c1d_9dda8614 (user: dev-temp-cc173c1d)\u001b[0m\n2025-08-28T15:42:58.801002709Z \u001b[32m2025-08-28 15:42:58.799\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36m_handle_websocket_messages\u001b[0m:\u001b[36m279\u001b[0m | \u001b[1mWebSocket state at loop entry - client_state: WebSocketState.CONNECTED, application_state: WebSocketState.CONNECTED\u001b[0m\n2025-08-28T15:42:58.801048026Z \u001b[32m2025-08-28 15:42:58.799\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36m_handle_websocket_messages\u001b[0m:\u001b[36m285\u001b[0m | \u001b[1mFirst loop iteration for conn_dev-temp-cc173c1d_9dda8614, WebSocket is_connected returned True\u001b[0m\n2025-08-28T15:43:23.077202836Z \u001b[32m2025-08-28 15:43:23.071\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m41\u001b[0m | \u001b[1mSecurityResponseMiddleware processing: /health\u001b[0m\n2025-08-28T15:43:23.077304912Z \u001b[32m2025-08-28 15:43:23.073\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.request_context\u001b[0m:\u001b[36mlog_request_details\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mRequest: GET /health | Status: 200 | Duration: 2.00ms | Trace: trace_6336f17a9bb54e1a\u001b[0m\n2025-08-28T15:43:23.077320907Z \u001b[32m2025-08-28 15:43:23.074\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m47\u001b[0m | \u001b[1mResponse for /health: status=200, is_api=False, has_auth=False\u001b[0m\n2025-08-28T15:43:23.077326250Z \u001b[32m2025-08-28 15:43:23.075\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m127.0.0.1:53330 - \"GET /health HTTP/1.1\" 200\u001b[0m\n2025-08-28T15:43:26.913423173Z WARNING:  WatchFiles detected changes in 'netra_backend/tests/services/test_optimized_persistence_integration.py'. Reloading...\n2025-08-28T15:43:26.961407461Z \u001b[32m2025-08-28 15:43:26.960\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mShutting down\u001b[0m\n2025-08-28T15:43:26.963223688Z \u001b[32m2025-08-28 15:43:26.960\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mShutting down\u001b[0m\n2025-08-28T15:43:26.963269205Z \u001b[32m2025-08-28 15:43:26.961\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mconnection closed\u001b[0m\n2025-08-28T15:43:26.963388630Z \u001b[32m2025-08-28 15:43:26.961\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mconnection closed\u001b[0m\n2025-08-28T15:43:26.963436905Z \u001b[32m2025-08-28 15:43:26.961\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36m_handle_websocket_messages\u001b[0m:\u001b[36m362\u001b[0m | \u001b[1mWebSocket disconnect: {'connection_id': 'conn_dev-temp-cc173c1d_9dda8614', 'user_id': 'dev-temp-cc173c1d', 'disconnect_code': 1012, 'disconnect_reason': 'No reason provided', 'connection_duration': 'Unknown'}\u001b[0m\n2025-08-28T15:43:26.963442127Z \u001b[32m2025-08-28 15:43:26.962\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36m_handle_websocket_messages\u001b[0m:\u001b[36m383\u001b[0m | \u001b[1mExiting message handling loop for connection: conn_dev-temp-cc173c1d_9dda8614 | Duration: 28.2s | Messages processed: 0 | Errors: 0 | User: dev-temp-cc173c1d\u001b[0m\n2025-08-28T15:43:26.963527976Z \u001b[32m2025-08-28 15:43:26.962\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36mwebsocket_endpoint\u001b[0m:\u001b[36m198\u001b[0m | \u001b[1mMessage handling loop ended for connection: conn_dev-temp-cc173c1d_9dda8614\u001b[0m\n2025-08-28T15:43:26.963540135Z \u001b[32m2025-08-28 15:43:26.962\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.auth\u001b[0m:\u001b[36mcleanup\u001b[0m:\u001b[36m349\u001b[0m | \u001b[1mWebSocket authenticator cleanup completed\u001b[0m\n2025-08-28T15:43:26.963543977Z \u001b[32m2025-08-28 15:43:26.962\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36mdisconnect_user\u001b[0m:\u001b[36m135\u001b[0m | \u001b[1mWebSocket disconnected: conn_dev-temp-cc173c1d_9dda8614 (1000: Normal closure)\u001b[0m\n2025-08-28T15:43:26.963640789Z \u001b[32m2025-08-28 15:43:26.962\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36mwebsocket_endpoint\u001b[0m:\u001b[36m255\u001b[0m | \u001b[1mWebSocket cleanup completed: conn_dev-temp-cc173c1d_9dda8614\u001b[0m\n2025-08-28T15:43:27.063004058Z \u001b[32m2025-08-28 15:43:27.061\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mWaiting for application shutdown.\u001b[0m\n2025-08-28T15:43:27.063046743Z \u001b[32m2025-08-28 15:43:27.061\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mWaiting for application shutdown.\u001b[0m\n2025-08-28T15:43:27.063049259Z \u001b[32m2025-08-28 15:43:27.061\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.shutdown\u001b[0m:\u001b[36mshutdown_cleanup\u001b[0m:\u001b[36m20\u001b[0m | \u001b[1mApplication shutdown initiated...\u001b[0m\n2025-08-28T15:43:27.063050923Z \u001b[32m2025-08-28 15:43:27.061\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.utils.multiprocessing_cleanup\u001b[0m:\u001b[36mcleanup_all\u001b[0m:\u001b[36m90\u001b[0m | \u001b[1mMultiprocessing resources cleaned up\u001b[0m\n2025-08-28T15:43:27.063052413Z \u001b[32m2025-08-28 15:43:27.062\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.shutdown\u001b[0m:\u001b[36mrun_complete_shutdown\u001b[0m:\u001b[36m120\u001b[0m | \u001b[1mShutting down background task manager...\u001b[0m\n2025-08-28T15:43:27.063130622Z \u001b[32m2025-08-28 15:43:27.062\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mShutting down BackgroundTaskManager...\u001b[0m\n2025-08-28T15:43:27.063146181Z \u001b[32m2025-08-28 15:43:27.062\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mBackgroundTaskManager shutdown complete\u001b[0m\n2025-08-28T15:43:27.063150014Z \u001b[32m2025-08-28 15:43:27.062\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.shutdown\u001b[0m:\u001b[36mrun_complete_shutdown\u001b[0m:\u001b[36m122\u001b[0m | \u001b[1mBackground task manager shutdown complete\u001b[0m\n2025-08-28T15:43:27.063173101Z \u001b[32m2025-08-28 15:43:27.062\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.shutdown\u001b[0m:\u001b[36mstop_monitoring\u001b[0m:\u001b[36m48\u001b[0m | \u001b[31m\u001b[1mError stopping monitoring and optimizations: 'ExecutionMonitor' object has no attribute 'stop_monitoring'\u001b[0m\n2025-08-28T15:43:27.166084905Z \u001b[32m2025-08-28 15:43:27.163\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mShutting down BackgroundTaskManager...\u001b[0m\n2025-08-28T15:43:27.166129898Z \u001b[32m2025-08-28 15:43:27.163\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mBackgroundTaskManager shutdown complete\u001b[0m\n2025-08-28T15:43:27.166132242Z \u001b[32m2025-08-28 15:43:27.164\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.base_agent\u001b[0m:\u001b[36mshutdown\u001b[0m:\u001b[36m68\u001b[0m | \u001b[1mShutting down Supervisor\u001b[0m\n2025-08-28T15:43:27.166133654Z \u001b[32m2025-08-28 15:43:27.164\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36mshutdown\u001b[0m:\u001b[36m737\u001b[0m | \u001b[1mShutting down WebSocket manager with 0 connections\u001b[0m\n2025-08-28T15:43:27.166134921Z \u001b[32m2025-08-28 15:43:27.164\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36mshutdown\u001b[0m:\u001b[36m752\u001b[0m | \u001b[1mWebSocket manager shutdown complete\u001b[0m\n2025-08-28T15:43:27.166136115Z \u001b[32m2025-08-28 15:43:27.164\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.shutdown\u001b[0m:\u001b[36mcleanup_resources\u001b[0m:\u001b[36m101\u001b[0m | \u001b[1mWebSocket manager shutdown completed\u001b[0m\n2025-08-28T15:43:27.169954441Z \u001b[32m2025-08-28 15:43:27.166\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.shutdown\u001b[0m:\u001b[36mrun_complete_shutdown\u001b[0m:\u001b[36m135\u001b[0m | \u001b[1mApplication shutdown complete.\u001b[0m\n2025-08-28T15:43:27.170342611Z \u001b[32m2025-08-28 15:43:27.167\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mApplication shutdown complete.\u001b[0m\n2025-08-28T15:43:27.171773900Z \u001b[32m2025-08-28 15:43:27.167\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mApplication shutdown complete.\u001b[0m\n2025-08-28T15:43:27.171884481Z \u001b[32m2025-08-28 15:43:27.168\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mFinished server process [1113]\u001b[0m\n2025-08-28T15:43:27.172019334Z \u001b[32m2025-08-28 15:43:27.168\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mFinished server process [1113]\u001b[0m\n2025-08-28T15:43:27.175429488Z \u001b[32m2025-08-28 15:43:27.174\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.utils.multiprocessing_cleanup\u001b[0m:\u001b[36mcleanup_all\u001b[0m:\u001b[36m90\u001b[0m | \u001b[1mMultiprocessing resources cleaned up\u001b[0m\n2025-08-28T15:43:29.285640110Z Critical environment variables already set - skipping .env loading\n2025-08-28T15:43:33.781559479Z \u001b[32m2025-08-28 15:43:33.780\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.configuration.database\u001b[0m:\u001b[36m_get_postgres_url\u001b[0m:\u001b[36m184\u001b[0m | \u001b[1mUsing PostgreSQL URL from development configuration\u001b[0m\n2025-08-28T15:43:33.794889790Z \u001b[32m2025-08-28 15:43:33.793\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[33m\u001b[1mGoogle Cloud Secret Manager not available: cannot import name 'secretmanager' from 'google.cloud' (unknown location)\u001b[0m\n2025-08-28T15:43:33.794980960Z \u001b[32m2025-08-28 15:43:33.794\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.configuration.database\u001b[0m:\u001b[36m_populate_redis_config\u001b[0m:\u001b[36m138\u001b[0m | \u001b[1mRedis Configuration (development/URL/No SSL): redis://redis:6379/0, Pool: 10, DB: 0\u001b[0m\n2025-08-28T15:43:33.799466773Z \u001b[32m2025-08-28 15:43:33.797\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.configuration.secrets\u001b[0m:\u001b[36mpopulate_secrets\u001b[0m:\u001b[36m198\u001b[0m | \u001b[1mPopulated secrets for development\u001b[0m\n2025-08-28T15:43:37.145835446Z \u001b[32m2025-08-28 15:43:37.143\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mCORS Configuration for development:\u001b[0m\n2025-08-28T15:43:37.145915062Z \u001b[32m2025-08-28 15:43:37.144\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m  Origins count: 41\u001b[0m\n2025-08-28T15:43:37.145922204Z \u001b[32m2025-08-28 15:43:37.144\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m  Allow credentials: True\u001b[0m\n2025-08-28T15:43:37.145925502Z \u001b[32m2025-08-28 15:43:37.144\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m  First 3 origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:3002']\u001b[0m\n2025-08-28T15:43:37.145932402Z \u001b[32m2025-08-28 15:43:37.145\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mCORS middleware configured for environment: development\u001b[0m\n2025-08-28T15:43:37.210505266Z \u001b[32m2025-08-28 15:43:37.209\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mAuthentication middleware configured with WebSocket exclusions\u001b[0m\n2025-08-28T15:43:37.210555508Z \u001b[32m2025-08-28 15:43:37.210\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mSession middleware config: same_site=lax, https_only=False, environment=development\u001b[0m\n2025-08-28T15:43:41.071500981Z \u001b[32m2025-08-28 15:43:41.070\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.state_persistence_optimized\u001b[0m:\u001b[36m__init__\u001b[0m:\u001b[36m52\u001b[0m | \u001b[1mOptimized state persistence service initialized\u001b[0m\n2025-08-28T15:43:43.316731460Z \u001b[32m2025-08-28 15:43:43.312\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.health.telemetry\u001b[0m:\u001b[36mregister_service\u001b[0m:\u001b[36m340\u001b[0m | \u001b[1mRegistered telemetry for service: netra-ai-platform\u001b[0m\n2025-08-28T15:43:43.933865685Z \u001b[32m2025-08-28 15:43:43.926\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.fallback_response.response_generator\u001b[0m:\u001b[36m__init__\u001b[0m:\u001b[36m30\u001b[0m | \u001b[1mResponse Generator initialized\u001b[0m\n2025-08-28T15:43:43.934202163Z \u001b[32m2025-08-28 15:43:43.928\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.quality_gate.quality_gate_core\u001b[0m:\u001b[36m__init__\u001b[0m:\u001b[36m38\u001b[0m | \u001b[1mQuality Gate Service initialized\u001b[0m\n2025-08-28T15:43:43.934254014Z \u001b[32m2025-08-28 15:43:43.928\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.quality_monitoring.service\u001b[0m:\u001b[36m__init__\u001b[0m:\u001b[36m51\u001b[0m | \u001b[1mQuality Monitoring Service initialized\u001b[0m\n2025-08-28T15:43:43.934263718Z \u001b[32m2025-08-28 15:43:43.928\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.fallback_response.response_generator\u001b[0m:\u001b[36m__init__\u001b[0m:\u001b[36m30\u001b[0m | \u001b[1mResponse Generator initialized\u001b[0m\n2025-08-28T15:43:48.369570441Z \u001b[32m2025-08-28 15:43:48.368\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mStarted server process [1160]\u001b[0m\n2025-08-28T15:43:48.369608922Z \u001b[32m2025-08-28 15:43:48.368\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mStarted server process [1160]\u001b[0m\n2025-08-28T15:43:48.369611235Z \u001b[32m2025-08-28 15:43:48.368\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mWaiting for application startup.\u001b[0m\n2025-08-28T15:43:48.369613056Z \u001b[32m2025-08-28 15:43:48.369\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mWaiting for application startup.\u001b[0m\n2025-08-28T15:43:48.394359091Z \u001b[32m2025-08-28 15:43:48.393\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.fastapi_auth_middleware\u001b[0m:\u001b[36m_get_jwt_secret_with_validation\u001b[0m:\u001b[36m677\u001b[0m | \u001b[1mJWT secret configured: 32 characters\u001b[0m\n2025-08-28T15:43:48.394392777Z \u001b[32m2025-08-28 15:43:48.393\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.fastapi_auth_middleware\u001b[0m:\u001b[36m__init__\u001b[0m:\u001b[36m76\u001b[0m | \u001b[1mFastAPIAuthMiddleware initialized with 12 excluded paths\u001b[0m\n2025-08-28T15:43:48.394394948Z \u001b[32m2025-08-28 15:43:48.393\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_headers_middleware\u001b[0m:\u001b[36m_log_initialization\u001b[0m:\u001b[36m43\u001b[0m | \u001b[1mSecurity headers middleware initialized for development environment\u001b[0m\n2025-08-28T15:43:48.394396268Z \u001b[32m2025-08-28 15:43:48.393\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36m__init__\u001b[0m:\u001b[36m36\u001b[0m | \u001b[1mSecurityResponseMiddleware initialized\u001b[0m\n2025-08-28T15:43:48.394397429Z \u001b[32m2025-08-28 15:43:48.393\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mCORSFixMiddleware initialized with 41 origins for development\u001b[0m\n2025-08-28T15:43:48.394398719Z \u001b[32m2025-08-28 15:43:48.393\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36mrun_complete_startup\u001b[0m:\u001b[36m941\u001b[0m | \u001b[1mUsing robust startup manager with dependency resolution...\u001b[0m\n2025-08-28T15:43:48.394447784Z \u001b[32m2025-08-28 15:43:48.394\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36mrun_complete_startup\u001b[0m:\u001b[36m951\u001b[0m | \u001b[1mStartup in progress flags set - health endpoint will report startup in progress\u001b[0m\n2025-08-28T15:43:48.438302662Z \u001b[32m2025-08-28 15:43:48.436\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36mrun_complete_startup\u001b[0m:\u001b[36m983\u001b[0m | \u001b[31m\u001b[1mError in robust startup: cannot access local variable 'logger' where it is not associated with a value\u001b[0m\n2025-08-28T15:43:48.438336005Z \u001b[32m2025-08-28 15:43:48.436\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36mrun_complete_startup\u001b[0m:\u001b[36m989\u001b[0m | \u001b[33m\u001b[1mFalling back to legacy startup sequence...\u001b[0m\n2025-08-28T15:43:48.438338013Z \u001b[32m2025-08-28 15:43:48.436\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36minitialize_logging\u001b[0m:\u001b[36m251\u001b[0m | \u001b[1mApplication startup...\u001b[0m\n2025-08-28T15:43:48.438339413Z \u001b[32m2025-08-28 15:43:48.437\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.utils.multiprocessing_cleanup\u001b[0m:\u001b[36msetup_multiprocessing\u001b[0m:\u001b[36m108\u001b[0m | \u001b[1mMultiprocessing configured with method: forkserver\u001b[0m\n2025-08-28T15:43:48.438349981Z \u001b[32m2025-08-28 15:43:48.437\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.database_env_service\u001b[0m:\u001b[36mvalidate_database_environment\u001b[0m:\u001b[36m49\u001b[0m | \u001b[1mDatabase environment validation passed for development\u001b[0m\n2025-08-28T15:43:48.438547835Z \u001b[32m2025-08-28 15:43:48.437\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_check_and_run_migrations\u001b[0m:\u001b[36m354\u001b[0m | \u001b[1mChecking database migrations...\u001b[0m\n2025-08-28T15:43:48.452500352Z \u001b[32m2025-08-28 15:43:48.449\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mContext impl PostgresqlImpl.\u001b[0m\n2025-08-28T15:43:48.452533789Z \u001b[32m2025-08-28 15:43:48.449\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mWill assume transactional DDL.\u001b[0m\n2025-08-28T15:43:48.455912006Z \u001b[32m2025-08-28 15:43:48.455\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_perform_migration\u001b[0m:\u001b[36m364\u001b[0m | \u001b[1mCurrent revision: add_deleted_at_001\u001b[0m\n2025-08-28T15:43:49.038390238Z \u001b[32m2025-08-28 15:43:49.037\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.db.migration_utils\u001b[0m:\u001b[36mlog_migration_status\u001b[0m:\u001b[36m199\u001b[0m | \u001b[1mDatabase is up to date\u001b[0m\n2025-08-28T15:43:49.040514471Z \u001b[32m2025-08-28 15:43:49.037\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_legacy_startup\u001b[0m:\u001b[36m1007\u001b[0m | \u001b[1mLegacy startup in progress flags set\u001b[0m\n2025-08-28T15:43:49.042136866Z \u001b[32m2025-08-28 15:43:49.037\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36msetup_database_connections\u001b[0m:\u001b[36m430\u001b[0m | \u001b[1mSetting up database connections...\u001b[0m\n2025-08-28T15:43:49.042160821Z \u001b[32m2025-08-28 15:43:49.038\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.db.postgres_core\u001b[0m:\u001b[36minitialize_postgres\u001b[0m:\u001b[36m578\u001b[0m | \u001b[1mInitializing async engine and session factory...\u001b[0m\n2025-08-28T15:43:49.042162826Z \u001b[32m2025-08-28 15:43:49.039\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.db.postgres_core\u001b[0m:\u001b[36m_create_and_setup_engine\u001b[0m:\u001b[36m514\u001b[0m | \u001b[1mPostgreSQL async engine created with resilient AsyncAdaptedQueuePool connection pooling\u001b[0m\n2025-08-28T15:43:49.042164285Z \u001b[32m2025-08-28 15:43:49.040\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_ensure_database_tables_exist\u001b[0m:\u001b[36m56\u001b[0m | \u001b[1mImporting database models to register tables...\u001b[0m\n2025-08-28T15:43:49.042165772Z \u001b[32m2025-08-28 15:43:49.040\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_ensure_database_tables_exist\u001b[0m:\u001b[36m59\u001b[0m | \u001b[1mChecking if database tables exist...\u001b[0m\n2025-08-28T15:43:49.055995344Z \u001b[32m2025-08-28 15:43:49.055\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_ensure_database_tables_exist\u001b[0m:\u001b[36m114\u001b[0m | \u001b[1mAll 26 database tables are present\u001b[0m\n2025-08-28T15:43:49.061089494Z \u001b[32m2025-08-28 15:43:49.058\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36msetup_database_connections\u001b[0m:\u001b[36m474\u001b[0m | \u001b[1mDatabase session factory successfully set on app.state\u001b[0m\n2025-08-28T15:43:49.061117951Z \u001b[32m2025-08-28 15:43:49.058\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36minitialize_core_services\u001b[0m:\u001b[36m509\u001b[0m | \u001b[1mLoading key manager...\u001b[0m\n2025-08-28T15:43:49.061119986Z \u001b[32m2025-08-28 15:43:49.058\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36minitialize_core_services\u001b[0m:\u001b[36m511\u001b[0m | \u001b[1mKey manager loaded.\u001b[0m\n2025-08-28T15:43:49.061121296Z \u001b[32m2025-08-28 15:43:49.059\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36minitialize_clickhouse\u001b[0m:\u001b[36m544\u001b[0m | \u001b[1mSkipping ClickHouse initialization in development environment (optional service - may not be available)\u001b[0m\n2025-08-28T15:43:49.061182609Z \u001b[32m2025-08-28 15:43:49.059\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_startup_phase_two\u001b[0m:\u001b[36m889\u001b[0m | \u001b[1mInitializing background task manager with 2-minute timeout...\u001b[0m\n2025-08-28T15:43:49.061190798Z \u001b[32m2025-08-28 15:43:49.059\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_startup_phase_two\u001b[0m:\u001b[36m891\u001b[0m | \u001b[1mBackground task manager initialized successfully\u001b[0m\n2025-08-28T15:43:49.061202823Z \u001b[32m2025-08-28 15:43:49.059\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_startup_phase_two\u001b[0m:\u001b[36m894\u001b[0m | \u001b[1mApplying startup fixes for critical cold start issues...\u001b[0m\n2025-08-28T15:43:49.061204393Z \u001b[32m2025-08-28 15:43:49.059\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mRunning comprehensive startup fixes verification...\u001b[0m\n2025-08-28T15:43:49.061205759Z \u001b[32m2025-08-28 15:43:49.059\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mApplied Redis mode default with fallback capability\u001b[0m\n2025-08-28T15:43:49.061278892Z \u001b[32m2025-08-28 15:43:49.059\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mService discovery disabled for microservice independence\u001b[0m\n2025-08-28T15:43:49.061286330Z \u001b[32m2025-08-28 15:43:49.059\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mDynamic port allocation is configured\u001b[0m\n2025-08-28T15:43:49.061287970Z \u001b[32m2025-08-28 15:43:49.059\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mBackground task timeout properly configured: 120s\u001b[0m\n2025-08-28T15:43:49.061289148Z \u001b[32m2025-08-28 15:43:49.060\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mRedis local fallback is configured\u001b[0m\n2025-08-28T15:43:49.061290334Z \u001b[32m2025-08-28 15:43:49.060\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mDatabase transaction rollback fix is available\u001b[0m\n2025-08-28T15:43:49.061291472Z \u001b[32m2025-08-28 15:43:49.060\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mStartup fixes verification complete: 4/5 fixes applied\u001b[0m\n2025-08-28T15:43:49.061346641Z \u001b[32m2025-08-28 15:43:49.060\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_startup_phase_two\u001b[0m:\u001b[36m898\u001b[0m | \u001b[1mStartup fixes applied: 4/5 fixes\u001b[0m\n2025-08-28T15:43:49.061348428Z \u001b[32m2025-08-28 15:43:49.060\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_startup_phase_two\u001b[0m:\u001b[36m901\u001b[0m | \u001b[33m\u001b[1mSome startup fixes could not be applied - check system configuration\u001b[0m\n2025-08-28T15:43:49.061350209Z \u001b[32m2025-08-28 15:43:49.060\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_startup_phase_two\u001b[0m:\u001b[36m902\u001b[0m | \u001b[1mStartup Fixes Status: 4/5 applied\n2025-08-28T15:43:49.061351518Z \n2025-08-28T15:43:49.061352383Z \u2705 Applied fixes:\n2025-08-28T15:43:49.061353593Z   \u2022 Environment variable mapping (CLICKHOUSE_PASSWORD)\n2025-08-28T15:43:49.061354559Z   \u2022 Background task timeout (2-minute limit)\n2025-08-28T15:43:49.061355404Z   \u2022 Database transaction rollback handling\n2025-08-28T15:43:49.061362762Z   \u2022 Redis local fallback capability\n2025-08-28T15:43:49.061363704Z \n2025-08-28T15:43:49.061364519Z \u274c Missing fixes:\n2025-08-28T15:43:49.061365363Z   \u2022 Service port conflict resolution\u001b[0m\n2025-08-28T15:43:49.061366354Z \u001b[32m2025-08-28 15:43:49.060\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36mstartup_health_checks\u001b[0m:\u001b[36m738\u001b[0m | \u001b[1mStarting comprehensive startup health checks...\u001b[0m\n2025-08-28T15:43:49.247586250Z \u001b[32m2025-08-28 15:43:49.245\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m58\u001b[0m | \u001b[1mPreparing to run 10 startup checks:\u001b[0m\n2025-08-28T15:43:49.247610705Z \u001b[32m2025-08-28 15:43:49.246\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  1. check_environment_variables\u001b[0m\n2025-08-28T15:43:49.247612590Z \u001b[32m2025-08-28 15:43:49.246\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  2. check_configuration\u001b[0m\n2025-08-28T15:43:49.247613992Z \u001b[32m2025-08-28 15:43:49.246\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  3. check_file_permissions\u001b[0m\n2025-08-28T15:43:49.247618100Z \u001b[32m2025-08-28 15:43:49.246\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  4. check_database_connection\u001b[0m\n2025-08-28T15:43:49.247619388Z \u001b[32m2025-08-28 15:43:49.246\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  5. check_redis\u001b[0m\n2025-08-28T15:43:49.247703446Z \u001b[32m2025-08-28 15:43:49.246\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  6. check_clickhouse\u001b[0m\n2025-08-28T15:43:49.247713419Z \u001b[32m2025-08-28 15:43:49.246\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  7. check_llm_providers\u001b[0m\n2025-08-28T15:43:49.247715011Z \u001b[32m2025-08-28 15:43:49.246\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  8. check_memory_and_resources\u001b[0m\n2025-08-28T15:43:49.247718363Z \u001b[32m2025-08-28 15:43:49.246\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  9. check_network_connectivity\u001b[0m\n2025-08-28T15:43:49.247919600Z \u001b[32m2025-08-28 15:43:49.246\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  10. check_or_create_assistant\u001b[0m\n2025-08-28T15:43:49.248021291Z \u001b[32m2025-08-28 15:43:49.247\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_environment_variables\u001b[0m\n2025-08-28T15:43:49.248031168Z \u001b[32m2025-08-28 15:43:49.247\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_configuration\u001b[0m\n2025-08-28T15:43:49.248039732Z \u001b[32m2025-08-28 15:43:49.247\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_file_permissions\u001b[0m\n2025-08-28T15:43:49.255201552Z \u001b[32m2025-08-28 15:43:49.254\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_database_connection\u001b[0m\n2025-08-28T15:43:49.276907057Z \u001b[32m2025-08-28 15:43:49.276\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_redis\u001b[0m\n2025-08-28T15:43:49.278234797Z \u001b[32m2025-08-28 15:43:49.277\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.redis_manager\u001b[0m:\u001b[36m_test_redis_connection\u001b[0m:\u001b[36m114\u001b[0m | \u001b[1mRedis connected successfully\u001b[0m\n2025-08-28T15:43:49.280959372Z \u001b[32m2025-08-28 15:43:49.279\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_clickhouse\u001b[0m\n2025-08-28T15:43:49.283339460Z \u001b[32m2025-08-28 15:43:49.280\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.db.clickhouse\u001b[0m:\u001b[36m_create_mock_client\u001b[0m:\u001b[36m132\u001b[0m | \u001b[1m[ClickHouse] Using MOCK client for development\u001b[0m\n2025-08-28T15:43:49.283371253Z \u001b[32m2025-08-28 15:43:49.280\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.service_checks\u001b[0m:\u001b[36m_log_clickhouse_warning_if_needed\u001b[0m:\u001b[36m242\u001b[0m | \u001b[33m\u001b[1mClickHouse not available - analytics features limited\u001b[0m\n2025-08-28T15:43:49.283375683Z \u001b[32m2025-08-28 15:43:49.280\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_llm_providers\u001b[0m\n2025-08-28T15:43:49.283585388Z \u001b[32m2025-08-28 15:43:49.281\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.service_checks\u001b[0m:\u001b[36m_handle_llm_test_failure\u001b[0m:\u001b[36m197\u001b[0m | \u001b[1mLLM 'default' failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:43:49.283772192Z \u001b[32m2025-08-28 15:43:49.281\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.service_checks\u001b[0m:\u001b[36m_handle_llm_test_failure\u001b[0m:\u001b[36m197\u001b[0m | \u001b[1mLLM 'analysis' failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:43:49.284199815Z \u001b[32m2025-08-28 15:43:49.281\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.service_checks\u001b[0m:\u001b[36m_handle_llm_test_failure\u001b[0m:\u001b[36m197\u001b[0m | \u001b[1mLLM 'triage' failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:43:49.284242726Z \u001b[32m2025-08-28 15:43:49.282\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.service_checks\u001b[0m:\u001b[36m_handle_llm_test_failure\u001b[0m:\u001b[36m197\u001b[0m | \u001b[1mLLM 'data' failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:43:49.284250474Z \u001b[32m2025-08-28 15:43:49.282\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.service_checks\u001b[0m:\u001b[36m_handle_llm_test_failure\u001b[0m:\u001b[36m197\u001b[0m | \u001b[1mLLM 'optimizations_core' failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:43:49.284254105Z \u001b[32m2025-08-28 15:43:49.282\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.service_checks\u001b[0m:\u001b[36m_handle_llm_test_failure\u001b[0m:\u001b[36m197\u001b[0m | \u001b[1mLLM 'actions_to_meet_goals' failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:43:49.284256564Z \u001b[32m2025-08-28 15:43:49.282\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.service_checks\u001b[0m:\u001b[36m_handle_llm_test_failure\u001b[0m:\u001b[36m197\u001b[0m | \u001b[1mLLM 'reporting' failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:43:49.284258912Z \u001b[32m2025-08-28 15:43:49.282\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_memory_and_resources\u001b[0m\n2025-08-28T15:43:49.284264139Z \u001b[32m2025-08-28 15:43:49.283\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_network_connectivity\u001b[0m\n2025-08-28T15:43:49.285276721Z \u001b[32m2025-08-28 15:43:49.284\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_or_create_assistant\u001b[0m\n2025-08-28T15:43:49.285434402Z /usr/local/lib/python3.11/contextlib.py:210: DeprecationWarning: postgres_session.get_async_db() is deprecated. Use 'from netra_backend.app.database import get_db' instead.\n2025-08-28T15:43:49.285443454Z   return await anext(self.gen)\n2025-08-28T15:43:49.353116347Z \u001b[32m2025-08-28 15:43:49.350\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m140\u001b[0m | \u001b[1m=== STARTUP CHECKS SUMMARY ===\u001b[0m\n2025-08-28T15:43:49.353500780Z \u001b[32m2025-08-28 15:43:49.350\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m141\u001b[0m | \u001b[1mTotal checks: 10\u001b[0m\n2025-08-28T15:43:49.353518347Z \u001b[32m2025-08-28 15:43:49.350\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m142\u001b[0m | \u001b[1mPassed: 8\u001b[0m\n2025-08-28T15:43:49.353625444Z \u001b[32m2025-08-28 15:43:49.350\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m143\u001b[0m | \u001b[1mFailed (critical): 0\u001b[0m\n2025-08-28T15:43:49.353632842Z \u001b[32m2025-08-28 15:43:49.350\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m144\u001b[0m | \u001b[1mFailed (non-critical): 2\u001b[0m\n2025-08-28T15:43:49.353745445Z \u001b[32m2025-08-28 15:43:49.350\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m145\u001b[0m | \u001b[1mTotal duration: 104.66ms\u001b[0m\n2025-08-28T15:43:49.353812545Z \u001b[32m2025-08-28 15:43:49.351\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  PASS: environment_variables (0.05ms) - Development mode - using default configs (Optional missing: GOOGLE_CLIENT_ID, GOOGLE_CLIENT_SECRET)\u001b[0m\n2025-08-28T15:43:49.353815963Z \u001b[32m2025-08-28 15:43:49.351\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  PASS: configuration (0.02ms) - Configuration valid for development environment\u001b[0m\n2025-08-28T15:43:49.353879268Z \u001b[32m2025-08-28 15:43:49.351\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  PASS: file_permissions (7.01ms) - All required directories are accessible\u001b[0m\n2025-08-28T15:43:49.353894935Z \u001b[32m2025-08-28 15:43:49.351\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  PASS: database_connection (21.46ms) - PostgreSQL connected and schema valid\u001b[0m\n2025-08-28T15:43:49.353901104Z \u001b[32m2025-08-28 15:43:49.351\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  PASS: redis_connection (3.53ms) - Redis connected and operational\u001b[0m\n2025-08-28T15:43:49.353903006Z \u001b[32m2025-08-28 15:43:49.351\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  FAIL-WARN: clickhouse_connection (0.61ms) - ClickHouse check failed: Missing ClickHouse tables: ['workload_events']\u001b[0m\n2025-08-28T15:43:49.353967822Z \u001b[32m2025-08-28 15:43:49.351\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  FAIL-WARN: llm_providers (2.27ms) - No LLM providers available\u001b[0m\n2025-08-28T15:43:49.354469068Z \u001b[32m2025-08-28 15:43:49.351\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  PASS: system_resources (0.68ms) - Resources OK: 27.3GB RAM, 876.2GB disk, 20 CPUs\u001b[0m\n2025-08-28T15:43:49.354674119Z \u001b[32m2025-08-28 15:43:49.351\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  PASS: network_connectivity (0.94ms) - All network endpoints reachable\u001b[0m\n2025-08-28T15:43:49.354697185Z \u001b[32m2025-08-28 15:43:49.351\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  PASS: netra_assistant (65.33ms) - Netra assistant already exists\u001b[0m\n2025-08-28T15:43:49.354807720Z \u001b[32m2025-08-28 15:43:49.352\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.utils\u001b[0m:\u001b[36m_log_startup_results\u001b[0m:\u001b[36m32\u001b[0m | \u001b[1mStartup checks completed in 105ms\u001b[0m\n2025-08-28T15:43:49.354810895Z \u001b[32m2025-08-28 15:43:49.352\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.utils\u001b[0m:\u001b[36m_log_startup_results\u001b[0m:\u001b[36m33\u001b[0m | \u001b[1mResults: 8/10 passed\u001b[0m\n2025-08-28T15:43:49.354850569Z \u001b[32m2025-08-28 15:43:49.352\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.utils\u001b[0m:\u001b[36m_log_non_critical_failures\u001b[0m:\u001b[36m48\u001b[0m | \u001b[33m\u001b[1mNon-critical startup checks failed:\u001b[0m\n2025-08-28T15:43:49.355133924Z \u001b[32m2025-08-28 15:43:49.352\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.utils\u001b[0m:\u001b[36m_log_non_critical_failures\u001b[0m:\u001b[36m51\u001b[0m | \u001b[33m\u001b[1m  - clickhouse_connection: ClickHouse check failed: Missing ClickHouse tables: ['workload_events']\u001b[0m\n2025-08-28T15:43:49.356769145Z \u001b[32m2025-08-28 15:43:49.352\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.utils\u001b[0m:\u001b[36m_log_non_critical_failures\u001b[0m:\u001b[36m51\u001b[0m | \u001b[33m\u001b[1m  - llm_providers: No LLM providers available\u001b[0m\n2025-08-28T15:43:49.356904162Z \u001b[32m2025-08-28 15:43:49.352\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36mstartup_health_checks\u001b[0m:\u001b[36m749\u001b[0m | \u001b[1mStartup checks completed: 8/10 passed\u001b[0m\n2025-08-28T15:43:49.356913100Z \u001b[32m2025-08-28 15:43:49.352\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36mstartup_health_checks\u001b[0m:\u001b[36m754\u001b[0m | \u001b[33m\u001b[1mSome startup checks failed (2), but continuing in graceful mode\u001b[0m\n2025-08-28T15:43:49.390126954Z \u001b[32m2025-08-28 15:43:49.389\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.services.schema_validation_service\u001b[0m:\u001b[36m_log_missing_columns\u001b[0m:\u001b[36m107\u001b[0m | \u001b[31m\u001b[1mMissing columns in table research_sessions: ['error_message', 'completed_at']\u001b[0m\n2025-08-28T15:43:49.390171466Z \u001b[32m2025-08-28 15:43:49.389\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.services.schema_validation_service\u001b[0m:\u001b[36m_log_warnings\u001b[0m:\u001b[36m113\u001b[0m | \u001b[33m\u001b[1mExtra tables in database not defined in models: {'auth_audit_logs', 'password_reset_tokens', 'alembic_version', 'auth_users', 'userbase', 'auth_sessions'}\u001b[0m\n2025-08-28T15:43:49.390622883Z \u001b[32m2025-08-28 15:43:49.390\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.services.schema_validation_service\u001b[0m:\u001b[36mrun_comprehensive_validation\u001b[0m:\u001b[36m234\u001b[0m | \u001b[31m\u001b[1mSchema validation failed: {'passed': False, 'missing_tables': [], 'missing_columns': {'research_sessions': ['error_message', 'completed_at']}, 'type_mismatches': {}, 'warnings': [\"Extra tables in database not defined in models: {'auth_audit_logs', 'password_reset_tokens', 'alembic_version', 'auth_users', 'userbase', 'auth_sessions'}\"]}\u001b[0m\n2025-08-28T15:43:49.390653997Z \u001b[32m2025-08-28 15:43:49.390\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_handle_schema_validation_result\u001b[0m:\u001b[36m824\u001b[0m | \u001b[31m\u001b[1mSchema validation failed. The application might not work as expected.\u001b[0m\n2025-08-28T15:43:49.407845885Z \u001b[32m2025-08-28 15:43:49.407\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36minitialize_websocket_components\u001b[0m:\u001b[36m718\u001b[0m | \u001b[1mWebSocket components initialized\u001b[0m\n2025-08-28T15:43:50.716235497Z \u001b[32m2025-08-28 15:43:50.714\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: triage\u001b[0m\n2025-08-28T15:43:50.718769702Z \u001b[32m2025-08-28 15:43:50.715\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: data\u001b[0m\n2025-08-28T15:43:50.718781148Z \u001b[32m2025-08-28 15:43:50.715\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: optimization\u001b[0m\n2025-08-28T15:43:50.718782881Z \u001b[32m2025-08-28 15:43:50.715\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: actions\u001b[0m\n2025-08-28T15:43:50.718784094Z \u001b[32m2025-08-28 15:43:50.715\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: reporting\u001b[0m\n2025-08-28T15:43:50.718785220Z \u001b[32m2025-08-28 15:43:50.716\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: synthetic_data\u001b[0m\n2025-08-28T15:43:50.718786588Z \u001b[32m2025-08-28 15:43:50.716\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: corpus_admin\u001b[0m\n2025-08-28T15:43:50.718787716Z \u001b[32m2025-08-28 15:43:50.716\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_create_agent_supervisor\u001b[0m:\u001b[36m656\u001b[0m | \u001b[1mAgent supervisor created successfully\u001b[0m\n2025-08-28T15:43:50.718813915Z \u001b[32m2025-08-28 15:43:50.716\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.database.health_checker\u001b[0m:\u001b[36mstart_monitoring\u001b[0m:\u001b[36m29\u001b[0m | \u001b[1mStarting database connection monitoring\u001b[0m\n2025-08-28T15:43:50.719013913Z \u001b[32m2025-08-28 15:43:50.716\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.base.monitoring\u001b[0m:\u001b[36mstart_monitoring\u001b[0m:\u001b[36m318\u001b[0m | \u001b[1mExecution monitoring started\u001b[0m\n2025-08-28T15:43:50.719313457Z \u001b[32m2025-08-28 15:43:50.716\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_create_monitoring_task\u001b[0m:\u001b[36m848\u001b[0m | \u001b[1mComprehensive monitoring started\u001b[0m\n2025-08-28T15:43:50.719331921Z \u001b[32m2025-08-28 15:43:50.717\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.performance_optimization_manager\u001b[0m:\u001b[36minitialize\u001b[0m:\u001b[36m43\u001b[0m | \u001b[1mPerformance optimization manager initialized\u001b[0m\n2025-08-28T15:43:50.719335450Z \u001b[32m2025-08-28 15:43:50.717\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mCreated background task 'database_index_optimization' (ID: 153401e8-07fd-438e-b905-6bddb7d419af) with 120s timeout\u001b[0m\n2025-08-28T15:43:50.719338560Z \u001b[32m2025-08-28 15:43:50.717\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_schedule_background_optimizations\u001b[0m:\u001b[36m224\u001b[0m | \u001b[1mDatabase index optimization scheduled as background task (ID: 153401e8-07fd-438e-b905-6bddb7d419af)\u001b[0m\n2025-08-28T15:43:50.719340841Z \u001b[32m2025-08-28 15:43:50.717\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_initialize_performance_optimizations\u001b[0m:\u001b[36m194\u001b[0m | \u001b[1mPerformance optimizations initialized successfully\u001b[0m\n2025-08-28T15:43:50.719342960Z \u001b[32m2025-08-28 15:43:50.717\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_legacy_startup\u001b[0m:\u001b[36m1016\u001b[0m | \u001b[1mLegacy startup completion flags set - health endpoint will report healthy\u001b[0m\n2025-08-28T15:43:50.719383834Z \u001b[32m2025-08-28 15:43:50.717\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36mlog_startup_complete\u001b[0m:\u001b[36m869\u001b[0m | \u001b[1mSystem Ready (Took 2.28s).\u001b[0m\n2025-08-28T15:43:50.720514991Z \u001b[32m2025-08-28 15:43:50.719\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mApplication startup complete.\u001b[0m\n2025-08-28T15:43:50.720534193Z \u001b[32m2025-08-28 15:43:50.720\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mApplication startup complete.\u001b[0m\n2025-08-28T15:43:50.724468510Z \u001b[32m2025-08-28 15:43:50.723\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m41\u001b[0m | \u001b[1mSecurityResponseMiddleware processing: /api/mcp/servers\u001b[0m\n2025-08-28T15:43:50.724858047Z /usr/local/lib/python3.11/site-packages/websockets/legacy/server.py:1178: DeprecationWarning: remove second argument of ws_handler\n2025-08-28T15:43:50.724877121Z   warnings.warn(\"remove second argument of ws_handler\", DeprecationWarning)\n2025-08-28T15:43:50.725541243Z \u001b[32m2025-08-28 15:43:50.725\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m41\u001b[0m | \u001b[1mSecurityResponseMiddleware processing: /api/mcp/tools\u001b[0m\n2025-08-28T15:43:50.726863057Z \u001b[32m2025-08-28 15:43:50.726\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m('172.18.0.1', 55140) - \"WebSocket /ws\" [accepted]\u001b[0m\n2025-08-28T15:43:50.726878841Z \u001b[32m2025-08-28 15:43:50.726\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m('172.18.0.1', 55140) - \"WebSocket /ws\" [accepted]\u001b[0m\n2025-08-28T15:43:50.726880618Z \u001b[32m2025-08-28 15:43:50.726\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36mwebsocket_endpoint\u001b[0m:\u001b[36m121\u001b[0m | \u001b[1mWebSocket accepted with subprotocol: jwt-auth\u001b[0m\n2025-08-28T15:43:50.746768167Z \u001b[32m2025-08-28 15:43:50.743\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.websocket_cors\u001b[0m:\u001b[36mget_websocket_cors_handler\u001b[0m:\u001b[36m566\u001b[0m | \u001b[1mWebSocket CORS: Detected environment from config: 'development'\u001b[0m\n2025-08-28T15:43:50.746791357Z \u001b[32m2025-08-28 15:43:50.743\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.websocket_cors\u001b[0m:\u001b[36mget_environment_origins_for_environment\u001b[0m:\u001b[36m441\u001b[0m | \u001b[1mWebSocket CORS configured for environment 'development' with 41 allowed origins\u001b[0m\n2025-08-28T15:43:50.746793242Z \u001b[32m2025-08-28 15:43:50.743\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.websocket_cors\u001b[0m:\u001b[36mget_environment_origins_for_environment\u001b[0m:\u001b[36m450\u001b[0m | \u001b[1mWebSocket CORS: Running in DEVELOPMENT mode with permissive origins\u001b[0m\n2025-08-28T15:43:50.746794505Z \u001b[32m2025-08-28 15:43:50.743\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.websocket_cors\u001b[0m:\u001b[36mget_websocket_cors_handler\u001b[0m:\u001b[36m583\u001b[0m | \u001b[1mWebSocket CORS: Creating handler for environment 'development' with 41 origins\u001b[0m\n2025-08-28T15:43:50.746795742Z \u001b[32m2025-08-28 15:43:50.745\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.websocket_cors\u001b[0m:\u001b[36mvalidate_websocket_origin\u001b[0m:\u001b[36m360\u001b[0m | \u001b[1mWebSocket connection allowed from origin: http://127.0.0.1:3000 in development environment\u001b[0m\n2025-08-28T15:43:50.746799073Z \u001b[32m2025-08-28 15:43:50.745\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mStarted trace span: websocket_jwt_validation (trace_id: 5af34d30d8fc426c9cc9a75a34ef16fc)\u001b[0m\n2025-08-28T15:43:50.746878318Z \u001b[32m2025-08-28 15:43:50.746\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mconnection open\u001b[0m\n2025-08-28T15:43:50.747142730Z \u001b[32m2025-08-28 15:43:50.746\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mconnection open\u001b[0m\n2025-08-28T15:43:50.757418529Z \u001b[32m2025-08-28 15:43:50.751\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m41\u001b[0m | \u001b[1mSecurityResponseMiddleware processing: /api/mcp/servers\u001b[0m\n2025-08-28T15:43:50.766705998Z \u001b[32m2025-08-28 15:43:50.752\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m41\u001b[0m | \u001b[1mSecurityResponseMiddleware processing: /api/mcp/tools\u001b[0m\n2025-08-28T15:43:50.771874612Z \u001b[32m2025-08-28 15:43:50.758\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: triage\u001b[0m\n2025-08-28T15:43:50.792256273Z \u001b[32m2025-08-28 15:43:50.758\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: data\u001b[0m\n2025-08-28T15:43:50.794175057Z \u001b[32m2025-08-28 15:43:50.758\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: optimization\u001b[0m\n2025-08-28T15:43:50.802129315Z \u001b[32m2025-08-28 15:43:50.759\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: actions\u001b[0m\n2025-08-28T15:43:50.802638214Z \u001b[32m2025-08-28 15:43:50.759\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: reporting\u001b[0m\n2025-08-28T15:43:50.818211594Z \u001b[32m2025-08-28 15:43:50.759\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: synthetic_data\u001b[0m\n2025-08-28T15:43:50.820409686Z \u001b[32m2025-08-28 15:43:50.759\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: corpus_admin\u001b[0m\n2025-08-28T15:43:50.825875458Z \u001b[32m2025-08-28 15:43:50.773\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: triage\u001b[0m\n2025-08-28T15:43:50.829377634Z \u001b[32m2025-08-28 15:43:50.774\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: data\u001b[0m\n2025-08-28T15:43:50.829409436Z \u001b[32m2025-08-28 15:43:50.774\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: optimization\u001b[0m\n2025-08-28T15:43:50.829413537Z \u001b[32m2025-08-28 15:43:50.774\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: actions\u001b[0m\n2025-08-28T15:43:50.829416179Z \u001b[32m2025-08-28 15:43:50.775\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: reporting\u001b[0m\n2025-08-28T15:43:50.829418521Z \u001b[32m2025-08-28 15:43:50.775\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: synthetic_data\u001b[0m\n2025-08-28T15:43:50.829435279Z \u001b[32m2025-08-28 15:43:50.775\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: corpus_admin\u001b[0m\n2025-08-28T15:43:50.829438236Z \u001b[32m2025-08-28 15:43:50.791\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.netra_mcp.modules.netra_mcp_core\u001b[0m:\u001b[36m_register_components\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mMCP Server components registered\u001b[0m\n2025-08-28T15:43:50.829440578Z \u001b[32m2025-08-28 15:43:50.791\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.netra_mcp.modules.netra_mcp_core\u001b[0m:\u001b[36mset_services\u001b[0m:\u001b[36m56\u001b[0m | \u001b[1mMCP Server services configured\u001b[0m\n2025-08-28T15:43:50.829442891Z \u001b[32m2025-08-28 15:43:50.791\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.mcp_service\u001b[0m:\u001b[36m_initialize_session_storage\u001b[0m:\u001b[36m106\u001b[0m | \u001b[1mMCP Service initialized with FastMCP 2\u001b[0m\n2025-08-28T15:43:50.829445682Z \u001b[32m2025-08-28 15:43:50.793\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.netra_mcp.modules.netra_mcp_core\u001b[0m:\u001b[36m_register_components\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mMCP Server components registered\u001b[0m\n2025-08-28T15:43:50.829448938Z \u001b[32m2025-08-28 15:43:50.793\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.netra_mcp.modules.netra_mcp_core\u001b[0m:\u001b[36mset_services\u001b[0m:\u001b[36m56\u001b[0m | \u001b[1mMCP Server services configured\u001b[0m\n2025-08-28T15:43:50.829458253Z \u001b[32m2025-08-28 15:43:50.793\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.mcp_service\u001b[0m:\u001b[36m_initialize_session_storage\u001b[0m:\u001b[36m106\u001b[0m | \u001b[1mMCP Service initialized with FastMCP 2\u001b[0m\n2025-08-28T15:43:50.829461300Z \u001b[32m2025-08-28 15:43:50.795\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: triage\u001b[0m\n2025-08-28T15:43:50.829463725Z \u001b[32m2025-08-28 15:43:50.795\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: data\u001b[0m\n2025-08-28T15:43:50.829469981Z \u001b[32m2025-08-28 15:43:50.795\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: optimization\u001b[0m\n2025-08-28T15:43:50.829584148Z \u001b[32m2025-08-28 15:43:50.795\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: actions\u001b[0m\n2025-08-28T15:43:50.829594501Z \u001b[32m2025-08-28 15:43:50.796\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: reporting\u001b[0m\n2025-08-28T15:43:50.829596403Z \u001b[32m2025-08-28 15:43:50.796\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: synthetic_data\u001b[0m\n2025-08-28T15:43:50.829606424Z \u001b[32m2025-08-28 15:43:50.796\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: corpus_admin\u001b[0m\n2025-08-28T15:43:50.829607758Z \u001b[32m2025-08-28 15:43:50.802\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: triage\u001b[0m\n2025-08-28T15:43:50.829608990Z \u001b[32m2025-08-28 15:43:50.803\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: data\u001b[0m\n2025-08-28T15:43:50.829610274Z \u001b[32m2025-08-28 15:43:50.803\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: optimization\u001b[0m\n2025-08-28T15:43:50.829615046Z \u001b[32m2025-08-28 15:43:50.803\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: actions\u001b[0m\n2025-08-28T15:43:50.829616377Z \u001b[32m2025-08-28 15:43:50.803\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: reporting\u001b[0m\n2025-08-28T15:43:50.829692323Z \u001b[32m2025-08-28 15:43:50.804\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: synthetic_data\u001b[0m\n2025-08-28T15:43:50.829697941Z \u001b[32m2025-08-28 15:43:50.804\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: corpus_admin\u001b[0m\n2025-08-28T15:43:50.829699396Z \u001b[32m2025-08-28 15:43:50.817\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.netra_mcp.modules.netra_mcp_core\u001b[0m:\u001b[36m_register_components\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mMCP Server components registered\u001b[0m\n2025-08-28T15:43:50.829700720Z \u001b[32m2025-08-28 15:43:50.817\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.netra_mcp.modules.netra_mcp_core\u001b[0m:\u001b[36mset_services\u001b[0m:\u001b[36m56\u001b[0m | \u001b[1mMCP Server services configured\u001b[0m\n2025-08-28T15:43:50.829702057Z \u001b[32m2025-08-28 15:43:50.817\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.mcp_service\u001b[0m:\u001b[36m_initialize_session_storage\u001b[0m:\u001b[36m106\u001b[0m | \u001b[1mMCP Service initialized with FastMCP 2\u001b[0m\n2025-08-28T15:43:50.829703518Z \u001b[32m2025-08-28 15:43:50.828\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.netra_mcp.modules.netra_mcp_core\u001b[0m:\u001b[36m_register_components\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mMCP Server components registered\u001b[0m\n2025-08-28T15:43:50.829704963Z \u001b[32m2025-08-28 15:43:50.828\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.netra_mcp.modules.netra_mcp_core\u001b[0m:\u001b[36mset_services\u001b[0m:\u001b[36m56\u001b[0m | \u001b[1mMCP Server services configured\u001b[0m\n2025-08-28T15:43:50.829716968Z \u001b[32m2025-08-28 15:43:50.828\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.mcp_service\u001b[0m:\u001b[36m_initialize_session_storage\u001b[0m:\u001b[36m106\u001b[0m | \u001b[1mMCP Service initialized with FastMCP 2\u001b[0m\n2025-08-28T15:43:50.833415254Z \u001b[32m2025-08-28 15:43:50.832\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mHTTP Request: POST http://auth:8081/auth/check-blacklist \"HTTP/1.1 200 OK\"\u001b[0m\n2025-08-28T15:43:50.841100331Z \u001b[32m2025-08-28 15:43:50.839\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mHTTP Request: POST http://auth:8081/auth/validate \"HTTP/1.1 200 OK\"\u001b[0m\n2025-08-28T15:43:50.842762180Z \u001b[32m2025-08-28 15:43:50.841\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mCompleted trace span: websocket_jwt_validation\u001b[0m\n2025-08-28T15:43:50.843989828Z \u001b[32m2025-08-28 15:43:50.842\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.auth\u001b[0m:\u001b[36mauthenticate_websocket\u001b[0m:\u001b[36m121\u001b[0m | \u001b[1mWebSocket authenticated: dev-temp-cc173c1d\u001b[0m\n2025-08-28T15:43:50.844011824Z \u001b[32m2025-08-28 15:43:50.842\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36mwebsocket_endpoint\u001b[0m:\u001b[36m154\u001b[0m | \u001b[1mWebSocket authenticated for user: dev-temp-cc173c1d at 2025-08-28T15:43:50.842175+00:00\u001b[0m\n2025-08-28T15:43:50.844014117Z \u001b[32m2025-08-28 15:43:50.842\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36mconnect_user\u001b[0m:\u001b[36m124\u001b[0m | \u001b[1mWebSocket connected: conn_dev-temp-cc173c1d_fd987ed8 for user dev-temp-cc173c1d\u001b[0m\n2025-08-28T15:43:50.844015701Z \u001b[32m2025-08-28 15:43:50.842\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36mwebsocket_endpoint\u001b[0m:\u001b[36m188\u001b[0m | \u001b[1mWebSocket ready: conn_dev-temp-cc173c1d_fd987ed8\u001b[0m\n2025-08-28T15:43:50.844122489Z \u001b[32m2025-08-28 15:43:50.842\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36mwebsocket_endpoint\u001b[0m:\u001b[36m191\u001b[0m | \u001b[1mStarting message handling loop for connection: conn_dev-temp-cc173c1d_fd987ed8\u001b[0m\n2025-08-28T15:43:50.848925185Z \u001b[32m2025-08-28 15:43:50.842\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36mwebsocket_endpoint\u001b[0m:\u001b[36m193\u001b[0m | \u001b[1mWebSocket state before loop - client_state: WebSocketState.CONNECTED, application_state: WebSocketState.CONNECTED\u001b[0m\n2025-08-28T15:43:50.848963898Z \u001b[32m2025-08-28 15:43:50.843\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36m_handle_websocket_messages\u001b[0m:\u001b[36m276\u001b[0m | \u001b[1mEntering message handling loop for connection: conn_dev-temp-cc173c1d_fd987ed8 (user: dev-temp-cc173c1d)\u001b[0m\n2025-08-28T15:43:50.848966139Z \u001b[32m2025-08-28 15:43:50.843\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36m_handle_websocket_messages\u001b[0m:\u001b[36m279\u001b[0m | \u001b[1mWebSocket state at loop entry - client_state: WebSocketState.CONNECTED, application_state: WebSocketState.CONNECTED\u001b[0m\n2025-08-28T15:43:50.849015874Z \u001b[32m2025-08-28 15:43:50.843\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36m_handle_websocket_messages\u001b[0m:\u001b[36m285\u001b[0m | \u001b[1mFirst loop iteration for conn_dev-temp-cc173c1d_fd987ed8, WebSocket is_connected returned True\u001b[0m\n2025-08-28T15:43:50.850190065Z \u001b[32m2025-08-28 15:43:50.844\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mHTTP Request: POST http://auth:8081/auth/check-blacklist \"HTTP/1.1 200 OK\"\u001b[0m\n2025-08-28T15:43:50.851733139Z \u001b[32m2025-08-28 15:43:50.845\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mHTTP Request: POST http://auth:8081/auth/check-blacklist \"HTTP/1.1 200 OK\"\u001b[0m\n2025-08-28T15:43:50.857376881Z \u001b[32m2025-08-28 15:43:50.848\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mHTTP Request: POST http://auth:8081/auth/check-blacklist \"HTTP/1.1 200 OK\"\u001b[0m\n2025-08-28T15:43:50.857410195Z \u001b[32m2025-08-28 15:43:50.850\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mHTTP Request: POST http://auth:8081/auth/check-blacklist \"HTTP/1.1 200 OK\"\u001b[0m\n2025-08-28T15:43:50.857412491Z \u001b[32m2025-08-28 15:43:50.853\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mHTTP Request: POST http://auth:8081/auth/validate \"HTTP/1.1 200 OK\"\u001b[0m\n2025-08-28T15:43:50.858881393Z \u001b[32m2025-08-28 15:43:50.855\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mHTTP Request: POST http://auth:8081/auth/validate \"HTTP/1.1 200 OK\"\u001b[0m\n2025-08-28T15:43:50.861137132Z \u001b[32m2025-08-28 15:43:50.860\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mHTTP Request: POST http://auth:8081/auth/validate \"HTTP/1.1 200 OK\"\u001b[0m\n2025-08-28T15:43:50.864214951Z \u001b[32m2025-08-28 15:43:50.863\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mHTTP Request: POST http://auth:8081/auth/validate \"HTTP/1.1 200 OK\"\u001b[0m\n2025-08-28T15:43:50.998153774Z \u001b[32m2025-08-28 15:43:50.994\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[33m\u001b[1mUsing dev user: dev@example.com\u001b[0m\n2025-08-28T15:43:51.140968786Z \u001b[32m2025-08-28 15:43:50.999\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[33m\u001b[1mUsing dev user: dev@example.com\u001b[0m\n2025-08-28T15:43:51.141620195Z \u001b[32m2025-08-28 15:43:51.001\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[33m\u001b[1mUsing dev user: dev@example.com\u001b[0m\n2025-08-28T15:43:51.145321152Z \u001b[32m2025-08-28 15:43:51.003\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[33m\u001b[1mUsing dev user: dev@example.com\u001b[0m\n2025-08-28T15:43:51.145979787Z \u001b[32m2025-08-28 15:43:51.005\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.request_context\u001b[0m:\u001b[36mlog_request_details\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mRequest: GET /api/mcp/tools | Status: 200 | Duration: 249.88ms | Trace: trace_5b3b561675814d87\u001b[0m\n2025-08-28T15:43:51.150585311Z \u001b[32m2025-08-28 15:43:51.009\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.request_context\u001b[0m:\u001b[36mlog_request_details\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mRequest: GET /api/mcp/tools | Status: 200 | Duration: 257.04ms | Trace: trace_74a1f28f055b4dad\u001b[0m\n2025-08-28T15:43:51.154925647Z \u001b[32m2025-08-28 15:43:51.010\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.request_context\u001b[0m:\u001b[36mlog_request_details\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mRequest: GET /api/mcp/servers | Status: 200 | Duration: 255.94ms | Trace: trace_65c176f4cfb34472\u001b[0m\n2025-08-28T15:43:51.154952270Z \u001b[32m2025-08-28 15:43:51.144\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.request_context\u001b[0m:\u001b[36mlog_request_details\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mRequest: GET /api/mcp/servers | Status: 200 | Duration: 398.16ms | Trace: trace_335493a2644e4c20\u001b[0m\n2025-08-28T15:43:51.154954367Z \u001b[32m2025-08-28 15:43:51.144\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m47\u001b[0m | \u001b[1mResponse for /api/mcp/tools: status=200, is_api=True, has_auth=False\u001b[0m\n2025-08-28T15:43:51.154955965Z \u001b[32m2025-08-28 15:43:51.146\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m172.18.0.7:55996 - \"GET /api/mcp/tools HTTP/1.1\" 200\u001b[0m\n2025-08-28T15:43:51.154957468Z \u001b[32m2025-08-28 15:43:51.146\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m47\u001b[0m | \u001b[1mResponse for /api/mcp/tools: status=200, is_api=True, has_auth=False\u001b[0m\n2025-08-28T15:43:51.154958909Z \u001b[32m2025-08-28 15:43:51.147\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m47\u001b[0m | \u001b[1mResponse for /api/mcp/servers: status=200, is_api=True, has_auth=False\u001b[0m\n2025-08-28T15:43:51.155062052Z \u001b[32m2025-08-28 15:43:51.148\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m47\u001b[0m | \u001b[1mResponse for /api/mcp/servers: status=200, is_api=True, has_auth=False\u001b[0m\n2025-08-28T15:43:51.155064269Z \u001b[32m2025-08-28 15:43:51.148\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m172.18.0.7:50540 - \"GET /api/mcp/tools HTTP/1.1\" 200\u001b[0m\n2025-08-28T15:43:51.158083880Z \u001b[32m2025-08-28 15:43:51.149\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m172.18.0.7:55980 - \"GET /api/mcp/servers HTTP/1.1\" 200\u001b[0m\n2025-08-28T15:43:51.159526370Z \u001b[32m2025-08-28 15:43:51.151\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m172.18.0.7:50538 - \"GET /api/mcp/servers HTTP/1.1\" 200\u001b[0m\n2025-08-28T15:43:53.154903838Z \u001b[32m2025-08-28 15:43:53.150\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m41\u001b[0m | \u001b[1mSecurityResponseMiddleware processing: /health\u001b[0m\n2025-08-28T15:43:53.154936010Z \u001b[32m2025-08-28 15:43:53.152\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.request_context\u001b[0m:\u001b[36mlog_request_details\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mRequest: GET /health | Status: 200 | Duration: 1.58ms | Trace: trace_232cf23287bb4a62\u001b[0m\n2025-08-28T15:43:53.154938026Z \u001b[32m2025-08-28 15:43:53.153\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m47\u001b[0m | \u001b[1mResponse for /health: status=200, is_api=False, has_auth=False\u001b[0m\n2025-08-28T15:43:53.154939404Z \u001b[32m2025-08-28 15:43:53.153\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m127.0.0.1:47330 - \"GET /health HTTP/1.1\" 200\u001b[0m\n2025-08-28T15:44:20.718154728Z \u001b[32m2025-08-28 15:44:20.716\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_index_optimization_background\u001b[0m:\u001b[36m232\u001b[0m | \u001b[1mStarting background database index optimization...\u001b[0m\n2025-08-28T15:44:20.718783498Z \u001b[32m2025-08-28 15:44:20.716\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.db.database_index_manager\u001b[0m:\u001b[36moptimize_all_databases\u001b[0m:\u001b[36m129\u001b[0m | \u001b[1mStarting database optimization across all databases\u001b[0m\n2025-08-28T15:44:20.718956326Z \u001b[32m2025-08-28 15:44:20.717\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.db.index_optimizer_core\u001b[0m:\u001b[36mlog_engine_unavailable\u001b[0m:\u001b[36m52\u001b[0m | \u001b[33m\u001b[1mAsync engine not available, skipping index creation\u001b[0m\n2025-08-28T15:44:20.718973095Z \u001b[32m2025-08-28 15:44:20.717\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.db.clickhouse\u001b[0m:\u001b[36m_create_mock_client\u001b[0m:\u001b[36m132\u001b[0m | \u001b[1m[ClickHouse] Using MOCK client for development\u001b[0m\n2025-08-28T15:44:20.719092916Z \u001b[32m2025-08-28 15:44:20.717\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.db.clickhouse\u001b[0m:\u001b[36m_create_mock_client\u001b[0m:\u001b[36m132\u001b[0m | \u001b[1m[ClickHouse] Using MOCK client for development\u001b[0m\n2025-08-28T15:44:20.719109361Z \u001b[32m2025-08-28 15:44:20.718\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.db.database_index_manager\u001b[0m:\u001b[36moptimize_all_databases\u001b[0m:\u001b[36m138\u001b[0m | \u001b[1mDatabase optimization completed - PostgreSQL: True, ClickHouse: True\u001b[0m\n2025-08-28T15:44:20.719119447Z \u001b[32m2025-08-28 15:44:20.718\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_index_optimization_background\u001b[0m:\u001b[36m239\u001b[0m | \u001b[1mBackground database optimization completed successfully: {'postgres': {'indexes_created': {}, 'recommendations': [{'table_name': 'userbase', 'columns': ['email'], 'index_type': 'btree', 'reason': 'Frequent user lookups by email', 'estimated_benefit': 0.0, 'priority': 1}, {'table_name': 'corpus_audit_logs', 'columns': ['timestamp'], 'index_type': 'btree', 'reason': 'Time-based audit queries', 'estimated_benefit': 0.0, 'priority': 1}, {'table_name': 'corpus_audit_logs', 'columns': ['user_id', 'action'], 'index_type': 'btree', 'reason': 'User action filtering', 'estimated_benefit': 0.0, 'priority': 2}, {'table_name': 'secret', 'columns': ['user_id'], 'index_type': 'btree', 'reason': 'User secret lookups', 'estimated_benefit': 0.0, 'priority': 2}, {'table_name': 'agent_states', 'columns': ['session_id'], 'index_type': 'btree', 'reason': 'Session-based state lookups', 'estimated_benefit': 0.0, 'priority': 2}], 'usage_stats': {}}, 'clickhouse': {'table_optimizations': {'netra_content_corpus': False, 'netra_audit_events': False, 'netra_performance_metrics': False, 'netra_agent_logs': False}, 'materialized_views': {'user_daily_activity': False, 'hourly_performance_metrics': False}}, 'recommendations': []}\u001b[0m\n2025-08-28T15:44:23.212206129Z \u001b[32m2025-08-28 15:44:23.206\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m41\u001b[0m | \u001b[1mSecurityResponseMiddleware processing: /health\u001b[0m\n2025-08-28T15:44:23.213077849Z \u001b[32m2025-08-28 15:44:23.209\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.request_context\u001b[0m:\u001b[36mlog_request_details\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mRequest: GET /health | Status: 200 | Duration: 1.78ms | Trace: trace_d4386c470bea4fbb\u001b[0m\n2025-08-28T15:44:23.213091188Z \u001b[32m2025-08-28 15:44:23.210\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m47\u001b[0m | \u001b[1mResponse for /health: status=200, is_api=False, has_auth=False\u001b[0m\n2025-08-28T15:44:23.213147312Z \u001b[32m2025-08-28 15:44:23.211\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m127.0.0.1:34106 - \"GET /health HTTP/1.1\" 200\u001b[0m\n2025-08-28T15:44:53.285592286Z \u001b[32m2025-08-28 15:44:53.280\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m41\u001b[0m | \u001b[1mSecurityResponseMiddleware processing: /health\u001b[0m\n2025-08-28T15:44:53.286671840Z \u001b[32m2025-08-28 15:44:53.283\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.request_context\u001b[0m:\u001b[36mlog_request_details\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mRequest: GET /health | Status: 200 | Duration: 1.38ms | Trace: trace_834dae41186b48a0\u001b[0m\n2025-08-28T15:44:53.286702198Z \u001b[32m2025-08-28 15:44:53.284\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m47\u001b[0m | \u001b[1mResponse for /health: status=200, is_api=False, has_auth=False\u001b[0m\n2025-08-28T15:44:53.286752513Z \u001b[32m2025-08-28 15:44:53.284\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m127.0.0.1:37948 - \"GET /health HTTP/1.1\" 200\u001b[0m\n2025-08-28T15:45:20.839211068Z \u001b[32m2025-08-28 15:45:20.838\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.utils\u001b[0m:\u001b[36m_heartbeat_loop\u001b[0m:\u001b[36m240\u001b[0m | \u001b[33m\u001b[1mWebSocket heartbeat timeout\u001b[0m\n2025-08-28T15:45:23.349858877Z \u001b[32m2025-08-28 15:45:23.346\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m41\u001b[0m | \u001b[1mSecurityResponseMiddleware processing: /health\u001b[0m\n2025-08-28T15:45:23.354400611Z \u001b[32m2025-08-28 15:45:23.350\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.request_context\u001b[0m:\u001b[36mlog_request_details\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mRequest: GET /health | Status: 200 | Duration: 3.04ms | Trace: trace_a25062c4037d40cf\u001b[0m\n2025-08-28T15:45:23.354438863Z \u001b[32m2025-08-28 15:45:23.351\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m47\u001b[0m | \u001b[1mResponse for /health: status=200, is_api=False, has_auth=False\u001b[0m\n2025-08-28T15:45:23.354444031Z \u001b[32m2025-08-28 15:45:23.352\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m127.0.0.1:37568 - \"GET /health HTTP/1.1\" 200\u001b[0m\n2025-08-28T15:45:53.421021128Z \u001b[32m2025-08-28 15:45:53.413\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m41\u001b[0m | \u001b[1mSecurityResponseMiddleware processing: /health\u001b[0m\n2025-08-28T15:45:53.421061721Z \u001b[32m2025-08-28 15:45:53.418\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.request_context\u001b[0m:\u001b[36mlog_request_details\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mRequest: GET /health | Status: 200 | Duration: 1.57ms | Trace: trace_530f54aa66ed46d4\u001b[0m\n2025-08-28T15:45:53.421359987Z \u001b[32m2025-08-28 15:45:53.419\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m47\u001b[0m | \u001b[1mResponse for /health: status=200, is_api=False, has_auth=False\u001b[0m\n2025-08-28T15:45:53.421451499Z \u001b[32m2025-08-28 15:45:53.419\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m127.0.0.1:43604 - \"GET /health HTTP/1.1\" 200\u001b[0m\n2025-08-28T15:46:23.472293735Z \u001b[32m2025-08-28 15:46:23.468\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m41\u001b[0m | \u001b[1mSecurityResponseMiddleware processing: /health\u001b[0m\n2025-08-28T15:46:23.474306802Z \u001b[32m2025-08-28 15:46:23.470\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.request_context\u001b[0m:\u001b[36mlog_request_details\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mRequest: GET /health | Status: 200 | Duration: 1.47ms | Trace: trace_1dfc0e700ef64fea\u001b[0m\n2025-08-28T15:46:23.474333082Z \u001b[32m2025-08-28 15:46:23.471\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m47\u001b[0m | \u001b[1mResponse for /health: status=200, is_api=False, has_auth=False\u001b[0m\n2025-08-28T15:46:23.474335349Z \u001b[32m2025-08-28 15:46:23.472\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m127.0.0.1:44934 - \"GET /health HTTP/1.1\" 200\u001b[0m\n2025-08-28T15:46:53.536501685Z \u001b[32m2025-08-28 15:46:53.530\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m41\u001b[0m | \u001b[1mSecurityResponseMiddleware processing: /health\u001b[0m\n2025-08-28T15:46:53.536633505Z \u001b[32m2025-08-28 15:46:53.533\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.request_context\u001b[0m:\u001b[36mlog_request_details\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mRequest: GET /health | Status: 200 | Duration: 1.29ms | Trace: trace_70e06cb3fc104390\u001b[0m\n2025-08-28T15:46:53.536657002Z \u001b[32m2025-08-28 15:46:53.533\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m47\u001b[0m | \u001b[1mResponse for /health: status=200, is_api=False, has_auth=False\u001b[0m\n2025-08-28T15:46:53.536661061Z \u001b[32m2025-08-28 15:46:53.534\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m127.0.0.1:60912 - \"GET /health HTTP/1.1\" 200\u001b[0m\n2025-08-28T15:47:23.601012766Z \u001b[32m2025-08-28 15:47:23.596\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m41\u001b[0m | \u001b[1mSecurityResponseMiddleware processing: /health\u001b[0m\n2025-08-28T15:47:23.601054642Z \u001b[32m2025-08-28 15:47:23.598\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.request_context\u001b[0m:\u001b[36mlog_request_details\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mRequest: GET /health | Status: 200 | Duration: 1.43ms | Trace: trace_81bc8f13301f4e1b\u001b[0m\n2025-08-28T15:47:23.601089156Z \u001b[32m2025-08-28 15:47:23.599\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m47\u001b[0m | \u001b[1mResponse for /health: status=200, is_api=False, has_auth=False\u001b[0m\n2025-08-28T15:47:23.601097042Z \u001b[32m2025-08-28 15:47:23.599\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m127.0.0.1:48646 - \"GET /health HTTP/1.1\" 200\u001b[0m\n2025-08-28T15:47:53.657699496Z \u001b[32m2025-08-28 15:47:53.651\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m41\u001b[0m | \u001b[1mSecurityResponseMiddleware processing: /health\u001b[0m\n2025-08-28T15:47:53.657733764Z \u001b[32m2025-08-28 15:47:53.654\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.request_context\u001b[0m:\u001b[36mlog_request_details\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mRequest: GET /health | Status: 200 | Duration: 1.41ms | Trace: trace_7937c53cdc824f15\u001b[0m\n2025-08-28T15:47:53.657739279Z \u001b[32m2025-08-28 15:47:53.655\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m47\u001b[0m | \u001b[1mResponse for /health: status=200, is_api=False, has_auth=False\u001b[0m\n2025-08-28T15:47:53.657743356Z \u001b[32m2025-08-28 15:47:53.655\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m127.0.0.1:55734 - \"GET /health HTTP/1.1\" 200\u001b[0m\n2025-08-28T15:48:23.709023475Z \u001b[32m2025-08-28 15:48:23.702\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m41\u001b[0m | \u001b[1mSecurityResponseMiddleware processing: /health\u001b[0m\n2025-08-28T15:48:23.709305156Z \u001b[32m2025-08-28 15:48:23.705\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.request_context\u001b[0m:\u001b[36mlog_request_details\u001b[0m:\u001b[36m69\u001b[0m | \u001b[1mRequest: GET /health | Status: 200 | Duration: 2.12ms | Trace: trace_9b79c98fc80243ef\u001b[0m\n2025-08-28T15:48:23.709796748Z \u001b[32m2025-08-28 15:48:23.706\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36mdispatch\u001b[0m:\u001b[36m47\u001b[0m | \u001b[1mResponse for /health: status=200, is_api=False, has_auth=False\u001b[0m\n2025-08-28T15:48:23.709880526Z \u001b[32m2025-08-28 15:48:23.707\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m127.0.0.1:40406 - \"GET /health HTTP/1.1\" 200\u001b[0m\n2025-08-28T15:48:36.317363335Z WARNING:  WatchFiles detected changes in 'scripts/docker_log_remediation_loop.py'. Reloading...\n2025-08-28T15:48:36.328010345Z \u001b[32m2025-08-28 15:48:36.325\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mShutting down\u001b[0m\n2025-08-28T15:48:36.328050438Z \u001b[32m2025-08-28 15:48:36.325\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mShutting down\u001b[0m\n2025-08-28T15:48:36.328130999Z \u001b[32m2025-08-28 15:48:36.326\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mconnection closed\u001b[0m\n2025-08-28T15:48:36.328147567Z \u001b[32m2025-08-28 15:48:36.326\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mconnection closed\u001b[0m\n2025-08-28T15:48:36.328151814Z \u001b[32m2025-08-28 15:48:36.326\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36m_handle_websocket_messages\u001b[0m:\u001b[36m362\u001b[0m | \u001b[1mWebSocket disconnect: {'connection_id': 'conn_dev-temp-cc173c1d_fd987ed8', 'user_id': 'dev-temp-cc173c1d', 'disconnect_code': 1012, 'disconnect_reason': 'No reason provided', 'connection_duration': 'Unknown'}\u001b[0m\n2025-08-28T15:48:36.328167340Z \u001b[32m2025-08-28 15:48:36.326\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36m_handle_websocket_messages\u001b[0m:\u001b[36m383\u001b[0m | \u001b[1mExiting message handling loop for connection: conn_dev-temp-cc173c1d_fd987ed8 | Duration: 285.5s | Messages processed: 9 | Errors: 0 | User: dev-temp-cc173c1d\u001b[0m\n2025-08-28T15:48:36.328169595Z \u001b[32m2025-08-28 15:48:36.327\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36mwebsocket_endpoint\u001b[0m:\u001b[36m198\u001b[0m | \u001b[1mMessage handling loop ended for connection: conn_dev-temp-cc173c1d_fd987ed8\u001b[0m\n2025-08-28T15:48:36.328189033Z \u001b[32m2025-08-28 15:48:36.327\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.auth\u001b[0m:\u001b[36mcleanup\u001b[0m:\u001b[36m349\u001b[0m | \u001b[1mWebSocket authenticator cleanup completed\u001b[0m\n2025-08-28T15:48:36.328220231Z \u001b[32m2025-08-28 15:48:36.327\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36mdisconnect_user\u001b[0m:\u001b[36m135\u001b[0m | \u001b[1mWebSocket disconnected: conn_dev-temp-cc173c1d_fd987ed8 (1000: Normal closure)\u001b[0m\n2025-08-28T15:48:36.328224490Z \u001b[32m2025-08-28 15:48:36.327\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.routes.websocket\u001b[0m:\u001b[36mwebsocket_endpoint\u001b[0m:\u001b[36m255\u001b[0m | \u001b[1mWebSocket cleanup completed: conn_dev-temp-cc173c1d_fd987ed8\u001b[0m\n2025-08-28T15:48:36.427346423Z \u001b[32m2025-08-28 15:48:36.425\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mWaiting for application shutdown.\u001b[0m\n2025-08-28T15:48:36.427387621Z \u001b[32m2025-08-28 15:48:36.426\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mWaiting for application shutdown.\u001b[0m\n2025-08-28T15:48:36.427389864Z \u001b[32m2025-08-28 15:48:36.426\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.shutdown\u001b[0m:\u001b[36mshutdown_cleanup\u001b[0m:\u001b[36m20\u001b[0m | \u001b[1mApplication shutdown initiated...\u001b[0m\n2025-08-28T15:48:36.427391164Z \u001b[32m2025-08-28 15:48:36.426\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.utils.multiprocessing_cleanup\u001b[0m:\u001b[36mcleanup_all\u001b[0m:\u001b[36m90\u001b[0m | \u001b[1mMultiprocessing resources cleaned up\u001b[0m\n2025-08-28T15:48:36.427392358Z \u001b[32m2025-08-28 15:48:36.426\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.shutdown\u001b[0m:\u001b[36mrun_complete_shutdown\u001b[0m:\u001b[36m120\u001b[0m | \u001b[1mShutting down background task manager...\u001b[0m\n2025-08-28T15:48:36.427393527Z \u001b[32m2025-08-28 15:48:36.426\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mShutting down BackgroundTaskManager...\u001b[0m\n2025-08-28T15:48:36.427480617Z \u001b[32m2025-08-28 15:48:36.426\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mBackgroundTaskManager shutdown complete\u001b[0m\n2025-08-28T15:48:36.427520053Z \u001b[32m2025-08-28 15:48:36.426\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.shutdown\u001b[0m:\u001b[36mrun_complete_shutdown\u001b[0m:\u001b[36m122\u001b[0m | \u001b[1mBackground task manager shutdown complete\u001b[0m\n2025-08-28T15:48:36.427522322Z \u001b[32m2025-08-28 15:48:36.427\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.shutdown\u001b[0m:\u001b[36mstop_monitoring\u001b[0m:\u001b[36m48\u001b[0m | \u001b[31m\u001b[1mError stopping monitoring and optimizations: 'ExecutionMonitor' object has no attribute 'stop_monitoring'\u001b[0m\n2025-08-28T15:48:36.529040877Z \u001b[32m2025-08-28 15:48:36.527\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mShutting down BackgroundTaskManager...\u001b[0m\n2025-08-28T15:48:36.529066554Z \u001b[32m2025-08-28 15:48:36.527\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mBackgroundTaskManager shutdown complete\u001b[0m\n2025-08-28T15:48:36.529068734Z \u001b[32m2025-08-28 15:48:36.527\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.base_agent\u001b[0m:\u001b[36mshutdown\u001b[0m:\u001b[36m68\u001b[0m | \u001b[1mShutting down Supervisor\u001b[0m\n2025-08-28T15:48:36.529081188Z \u001b[32m2025-08-28 15:48:36.528\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36mshutdown\u001b[0m:\u001b[36m737\u001b[0m | \u001b[1mShutting down WebSocket manager with 0 connections\u001b[0m\n2025-08-28T15:48:36.529082442Z \u001b[32m2025-08-28 15:48:36.528\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.websocket_core.manager\u001b[0m:\u001b[36mshutdown\u001b[0m:\u001b[36m752\u001b[0m | \u001b[1mWebSocket manager shutdown complete\u001b[0m\n2025-08-28T15:48:36.529087070Z \u001b[32m2025-08-28 15:48:36.528\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.shutdown\u001b[0m:\u001b[36mcleanup_resources\u001b[0m:\u001b[36m101\u001b[0m | \u001b[1mWebSocket manager shutdown completed\u001b[0m\n2025-08-28T15:48:36.530329832Z \u001b[32m2025-08-28 15:48:36.529\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.shutdown\u001b[0m:\u001b[36mrun_complete_shutdown\u001b[0m:\u001b[36m135\u001b[0m | \u001b[1mApplication shutdown complete.\u001b[0m\n2025-08-28T15:48:36.530339604Z \u001b[32m2025-08-28 15:48:36.529\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mApplication shutdown complete.\u001b[0m\n2025-08-28T15:48:36.530436861Z \u001b[32m2025-08-28 15:48:36.529\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mApplication shutdown complete.\u001b[0m\n2025-08-28T15:48:36.530989739Z \u001b[32m2025-08-28 15:48:36.529\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mFinished server process [1160]\u001b[0m\n2025-08-28T15:48:36.531138116Z \u001b[32m2025-08-28 15:48:36.529\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mFinished server process [1160]\u001b[0m\n2025-08-28T15:48:36.532511435Z \u001b[32m2025-08-28 15:48:36.532\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.utils.multiprocessing_cleanup\u001b[0m:\u001b[36mcleanup_all\u001b[0m:\u001b[36m90\u001b[0m | \u001b[1mMultiprocessing resources cleaned up\u001b[0m\n2025-08-28T15:48:37.636318225Z Critical environment variables already set - skipping .env loading\n2025-08-28T15:48:41.126821911Z \u001b[32m2025-08-28 15:48:41.126\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.configuration.database\u001b[0m:\u001b[36m_get_postgres_url\u001b[0m:\u001b[36m184\u001b[0m | \u001b[1mUsing PostgreSQL URL from development configuration\u001b[0m\n2025-08-28T15:48:41.139186253Z \u001b[32m2025-08-28 15:48:41.137\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[33m\u001b[1mGoogle Cloud Secret Manager not available: cannot import name 'secretmanager' from 'google.cloud' (unknown location)\u001b[0m\n2025-08-28T15:48:41.139251517Z \u001b[32m2025-08-28 15:48:41.138\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.configuration.database\u001b[0m:\u001b[36m_populate_redis_config\u001b[0m:\u001b[36m138\u001b[0m | \u001b[1mRedis Configuration (development/URL/No SSL): redis://redis:6379/0, Pool: 10, DB: 0\u001b[0m\n2025-08-28T15:48:41.143590733Z \u001b[32m2025-08-28 15:48:41.141\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.configuration.secrets\u001b[0m:\u001b[36mpopulate_secrets\u001b[0m:\u001b[36m198\u001b[0m | \u001b[1mPopulated secrets for development\u001b[0m\n2025-08-28T15:48:44.969829786Z \u001b[32m2025-08-28 15:48:44.968\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mCORS Configuration for development:\u001b[0m\n2025-08-28T15:48:44.969894753Z \u001b[32m2025-08-28 15:48:44.969\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m  Origins count: 41\u001b[0m\n2025-08-28T15:48:44.969903147Z \u001b[32m2025-08-28 15:48:44.969\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m  Allow credentials: True\u001b[0m\n2025-08-28T15:48:44.969906575Z \u001b[32m2025-08-28 15:48:44.969\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1m  First 3 origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:3002']\u001b[0m\n2025-08-28T15:48:44.969908997Z \u001b[32m2025-08-28 15:48:44.969\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mCORS middleware configured for environment: development\u001b[0m\n2025-08-28T15:48:45.018708600Z \u001b[32m2025-08-28 15:48:45.017\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mAuthentication middleware configured with WebSocket exclusions\u001b[0m\n2025-08-28T15:48:45.018747539Z \u001b[32m2025-08-28 15:48:45.018\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mSession middleware config: same_site=lax, https_only=False, environment=development\u001b[0m\n2025-08-28T15:48:48.730861752Z \u001b[32m2025-08-28 15:48:48.730\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.state_persistence_optimized\u001b[0m:\u001b[36m__init__\u001b[0m:\u001b[36m52\u001b[0m | \u001b[1mOptimized state persistence service initialized\u001b[0m\n2025-08-28T15:48:51.230819479Z \u001b[32m2025-08-28 15:48:51.226\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.health.telemetry\u001b[0m:\u001b[36mregister_service\u001b[0m:\u001b[36m340\u001b[0m | \u001b[1mRegistered telemetry for service: netra-ai-platform\u001b[0m\n2025-08-28T15:48:52.208228954Z \u001b[32m2025-08-28 15:48:52.200\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.fallback_response.response_generator\u001b[0m:\u001b[36m__init__\u001b[0m:\u001b[36m30\u001b[0m | \u001b[1mResponse Generator initialized\u001b[0m\n2025-08-28T15:48:52.208262111Z \u001b[32m2025-08-28 15:48:52.201\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.quality_gate.quality_gate_core\u001b[0m:\u001b[36m__init__\u001b[0m:\u001b[36m38\u001b[0m | \u001b[1mQuality Gate Service initialized\u001b[0m\n2025-08-28T15:48:52.208264481Z \u001b[32m2025-08-28 15:48:52.201\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.quality_monitoring.service\u001b[0m:\u001b[36m__init__\u001b[0m:\u001b[36m51\u001b[0m | \u001b[1mQuality Monitoring Service initialized\u001b[0m\n2025-08-28T15:48:52.208266324Z \u001b[32m2025-08-28 15:48:52.202\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.fallback_response.response_generator\u001b[0m:\u001b[36m__init__\u001b[0m:\u001b[36m30\u001b[0m | \u001b[1mResponse Generator initialized\u001b[0m\n2025-08-28T15:48:58.296363968Z \u001b[32m2025-08-28 15:48:58.295\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mStarted server process [1250]\u001b[0m\n2025-08-28T15:48:58.296402092Z \u001b[32m2025-08-28 15:48:58.295\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mStarted server process [1250]\u001b[0m\n2025-08-28T15:48:58.296404273Z \u001b[32m2025-08-28 15:48:58.295\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mWaiting for application startup.\u001b[0m\n2025-08-28T15:48:58.296405562Z \u001b[32m2025-08-28 15:48:58.295\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mWaiting for application startup.\u001b[0m\n2025-08-28T15:48:58.338538399Z \u001b[32m2025-08-28 15:48:58.336\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.fastapi_auth_middleware\u001b[0m:\u001b[36m_get_jwt_secret_with_validation\u001b[0m:\u001b[36m677\u001b[0m | \u001b[1mJWT secret configured: 32 characters\u001b[0m\n2025-08-28T15:48:58.338614968Z \u001b[32m2025-08-28 15:48:58.336\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.fastapi_auth_middleware\u001b[0m:\u001b[36m__init__\u001b[0m:\u001b[36m76\u001b[0m | \u001b[1mFastAPIAuthMiddleware initialized with 12 excluded paths\u001b[0m\n2025-08-28T15:48:58.338625458Z \u001b[32m2025-08-28 15:48:58.337\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_headers_middleware\u001b[0m:\u001b[36m_log_initialization\u001b[0m:\u001b[36m43\u001b[0m | \u001b[1mSecurity headers middleware initialized for development environment\u001b[0m\n2025-08-28T15:48:58.338629901Z \u001b[32m2025-08-28 15:48:58.337\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.middleware.security_response_middleware\u001b[0m:\u001b[36m__init__\u001b[0m:\u001b[36m36\u001b[0m | \u001b[1mSecurityResponseMiddleware initialized\u001b[0m\n2025-08-28T15:48:58.338632826Z \u001b[32m2025-08-28 15:48:58.337\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mCORSFixMiddleware initialized with 41 origins for development\u001b[0m\n2025-08-28T15:48:58.338635672Z \u001b[32m2025-08-28 15:48:58.337\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36mrun_complete_startup\u001b[0m:\u001b[36m941\u001b[0m | \u001b[1mUsing robust startup manager with dependency resolution...\u001b[0m\n2025-08-28T15:48:58.338671272Z \u001b[32m2025-08-28 15:48:58.337\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36mrun_complete_startup\u001b[0m:\u001b[36m951\u001b[0m | \u001b[1mStartup in progress flags set - health endpoint will report startup in progress\u001b[0m\n2025-08-28T15:48:58.379203532Z \u001b[32m2025-08-28 15:48:58.377\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36mrun_complete_startup\u001b[0m:\u001b[36m983\u001b[0m | \u001b[31m\u001b[1mError in robust startup: cannot access local variable 'logger' where it is not associated with a value\u001b[0m\n2025-08-28T15:48:58.379249664Z \u001b[32m2025-08-28 15:48:58.377\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36mrun_complete_startup\u001b[0m:\u001b[36m989\u001b[0m | \u001b[33m\u001b[1mFalling back to legacy startup sequence...\u001b[0m\n2025-08-28T15:48:58.379251923Z \u001b[32m2025-08-28 15:48:58.377\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36minitialize_logging\u001b[0m:\u001b[36m251\u001b[0m | \u001b[1mApplication startup...\u001b[0m\n2025-08-28T15:48:58.379253272Z \u001b[32m2025-08-28 15:48:58.378\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.utils.multiprocessing_cleanup\u001b[0m:\u001b[36msetup_multiprocessing\u001b[0m:\u001b[36m108\u001b[0m | \u001b[1mMultiprocessing configured with method: forkserver\u001b[0m\n2025-08-28T15:48:58.379327822Z \u001b[32m2025-08-28 15:48:58.378\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.database_env_service\u001b[0m:\u001b[36mvalidate_database_environment\u001b[0m:\u001b[36m49\u001b[0m | \u001b[1mDatabase environment validation passed for development\u001b[0m\n2025-08-28T15:48:58.379719007Z \u001b[32m2025-08-28 15:48:58.378\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_check_and_run_migrations\u001b[0m:\u001b[36m354\u001b[0m | \u001b[1mChecking database migrations...\u001b[0m\n2025-08-28T15:48:58.393451143Z \u001b[32m2025-08-28 15:48:58.390\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mContext impl PostgresqlImpl.\u001b[0m\n2025-08-28T15:48:58.393488919Z \u001b[32m2025-08-28 15:48:58.391\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mWill assume transactional DDL.\u001b[0m\n2025-08-28T15:48:58.397429628Z \u001b[32m2025-08-28 15:48:58.396\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_perform_migration\u001b[0m:\u001b[36m364\u001b[0m | \u001b[1mCurrent revision: add_deleted_at_001\u001b[0m\n2025-08-28T15:48:59.111455020Z \u001b[32m2025-08-28 15:48:59.110\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.db.migration_utils\u001b[0m:\u001b[36mlog_migration_status\u001b[0m:\u001b[36m199\u001b[0m | \u001b[1mDatabase is up to date\u001b[0m\n2025-08-28T15:48:59.112786119Z \u001b[32m2025-08-28 15:48:59.110\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_legacy_startup\u001b[0m:\u001b[36m1007\u001b[0m | \u001b[1mLegacy startup in progress flags set\u001b[0m\n2025-08-28T15:48:59.113832073Z \u001b[32m2025-08-28 15:48:59.110\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36msetup_database_connections\u001b[0m:\u001b[36m430\u001b[0m | \u001b[1mSetting up database connections...\u001b[0m\n2025-08-28T15:48:59.113849941Z \u001b[32m2025-08-28 15:48:59.111\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.db.postgres_core\u001b[0m:\u001b[36minitialize_postgres\u001b[0m:\u001b[36m578\u001b[0m | \u001b[1mInitializing async engine and session factory...\u001b[0m\n2025-08-28T15:48:59.113851778Z \u001b[32m2025-08-28 15:48:59.112\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.db.postgres_core\u001b[0m:\u001b[36m_create_and_setup_engine\u001b[0m:\u001b[36m514\u001b[0m | \u001b[1mPostgreSQL async engine created with resilient AsyncAdaptedQueuePool connection pooling\u001b[0m\n2025-08-28T15:48:59.113863105Z \u001b[32m2025-08-28 15:48:59.112\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_ensure_database_tables_exist\u001b[0m:\u001b[36m56\u001b[0m | \u001b[1mImporting database models to register tables...\u001b[0m\n2025-08-28T15:48:59.113878628Z \u001b[32m2025-08-28 15:48:59.112\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_ensure_database_tables_exist\u001b[0m:\u001b[36m59\u001b[0m | \u001b[1mChecking if database tables exist...\u001b[0m\n2025-08-28T15:48:59.126351544Z \u001b[32m2025-08-28 15:48:59.125\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_ensure_database_tables_exist\u001b[0m:\u001b[36m114\u001b[0m | \u001b[1mAll 26 database tables are present\u001b[0m\n2025-08-28T15:48:59.130783687Z \u001b[32m2025-08-28 15:48:59.128\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36msetup_database_connections\u001b[0m:\u001b[36m474\u001b[0m | \u001b[1mDatabase session factory successfully set on app.state\u001b[0m\n2025-08-28T15:48:59.130804190Z \u001b[32m2025-08-28 15:48:59.128\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36minitialize_core_services\u001b[0m:\u001b[36m509\u001b[0m | \u001b[1mLoading key manager...\u001b[0m\n2025-08-28T15:48:59.130806269Z \u001b[32m2025-08-28 15:48:59.128\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36minitialize_core_services\u001b[0m:\u001b[36m511\u001b[0m | \u001b[1mKey manager loaded.\u001b[0m\n2025-08-28T15:48:59.130807544Z \u001b[32m2025-08-28 15:48:59.128\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36minitialize_clickhouse\u001b[0m:\u001b[36m544\u001b[0m | \u001b[1mSkipping ClickHouse initialization in development environment (optional service - may not be available)\u001b[0m\n2025-08-28T15:48:59.130808796Z \u001b[32m2025-08-28 15:48:59.129\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_startup_phase_two\u001b[0m:\u001b[36m889\u001b[0m | \u001b[1mInitializing background task manager with 2-minute timeout...\u001b[0m\n2025-08-28T15:48:59.130809919Z \u001b[32m2025-08-28 15:48:59.129\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_startup_phase_two\u001b[0m:\u001b[36m891\u001b[0m | \u001b[1mBackground task manager initialized successfully\u001b[0m\n2025-08-28T15:48:59.130859934Z \u001b[32m2025-08-28 15:48:59.129\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_startup_phase_two\u001b[0m:\u001b[36m894\u001b[0m | \u001b[1mApplying startup fixes for critical cold start issues...\u001b[0m\n2025-08-28T15:48:59.130867738Z \u001b[32m2025-08-28 15:48:59.129\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mRunning comprehensive startup fixes verification...\u001b[0m\n2025-08-28T15:48:59.130869325Z \u001b[32m2025-08-28 15:48:59.129\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mApplied Redis mode default with fallback capability\u001b[0m\n2025-08-28T15:48:59.130872932Z \u001b[32m2025-08-28 15:48:59.129\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mService discovery disabled for microservice independence\u001b[0m\n2025-08-28T15:48:59.130923999Z \u001b[32m2025-08-28 15:48:59.129\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mDynamic port allocation is configured\u001b[0m\n2025-08-28T15:48:59.130941509Z \u001b[32m2025-08-28 15:48:59.129\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mBackground task timeout properly configured: 120s\u001b[0m\n2025-08-28T15:48:59.130999360Z \u001b[32m2025-08-28 15:48:59.130\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mRedis local fallback is configured\u001b[0m\n2025-08-28T15:48:59.131002442Z \u001b[32m2025-08-28 15:48:59.130\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mDatabase transaction rollback fix is available\u001b[0m\n2025-08-28T15:48:59.131020148Z \u001b[32m2025-08-28 15:48:59.130\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mStartup fixes verification complete: 4/5 fixes applied\u001b[0m\n2025-08-28T15:48:59.131026390Z \u001b[32m2025-08-28 15:48:59.130\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_startup_phase_two\u001b[0m:\u001b[36m898\u001b[0m | \u001b[1mStartup fixes applied: 4/5 fixes\u001b[0m\n2025-08-28T15:48:59.131045268Z \u001b[32m2025-08-28 15:48:59.130\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_startup_phase_two\u001b[0m:\u001b[36m901\u001b[0m | \u001b[33m\u001b[1mSome startup fixes could not be applied - check system configuration\u001b[0m\n2025-08-28T15:48:59.131094633Z \u001b[32m2025-08-28 15:48:59.130\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_startup_phase_two\u001b[0m:\u001b[36m902\u001b[0m | \u001b[1mStartup Fixes Status: 4/5 applied\n2025-08-28T15:48:59.131098146Z \n2025-08-28T15:48:59.131099597Z \u2705 Applied fixes:\n2025-08-28T15:48:59.131101474Z   \u2022 Background task timeout (2-minute limit)\n2025-08-28T15:48:59.131102674Z   \u2022 Redis local fallback capability\n2025-08-28T15:48:59.131103874Z   \u2022 Environment variable mapping (CLICKHOUSE_PASSWORD)\n2025-08-28T15:48:59.131115085Z   \u2022 Database transaction rollback handling\n2025-08-28T15:48:59.131116027Z \n2025-08-28T15:48:59.131116806Z \u274c Missing fixes:\n2025-08-28T15:48:59.131117714Z   \u2022 Service port conflict resolution\u001b[0m\n2025-08-28T15:48:59.131118664Z \u001b[32m2025-08-28 15:48:59.130\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36mstartup_health_checks\u001b[0m:\u001b[36m738\u001b[0m | \u001b[1mStarting comprehensive startup health checks...\u001b[0m\n2025-08-28T15:48:59.389092740Z \u001b[32m2025-08-28 15:48:59.387\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m58\u001b[0m | \u001b[1mPreparing to run 10 startup checks:\u001b[0m\n2025-08-28T15:48:59.389166608Z \u001b[32m2025-08-28 15:48:59.387\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  1. check_environment_variables\u001b[0m\n2025-08-28T15:48:59.389176149Z \u001b[32m2025-08-28 15:48:59.387\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  2. check_configuration\u001b[0m\n2025-08-28T15:48:59.389179899Z \u001b[32m2025-08-28 15:48:59.387\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  3. check_file_permissions\u001b[0m\n2025-08-28T15:48:59.389182281Z \u001b[32m2025-08-28 15:48:59.387\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  4. check_database_connection\u001b[0m\n2025-08-28T15:48:59.389184883Z \u001b[32m2025-08-28 15:48:59.387\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  5. check_redis\u001b[0m\n2025-08-28T15:48:59.389187169Z \u001b[32m2025-08-28 15:48:59.387\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  6. check_clickhouse\u001b[0m\n2025-08-28T15:48:59.389189484Z \u001b[32m2025-08-28 15:48:59.387\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  7. check_llm_providers\u001b[0m\n2025-08-28T15:48:59.389191837Z \u001b[32m2025-08-28 15:48:59.388\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  8. check_memory_and_resources\u001b[0m\n2025-08-28T15:48:59.389273033Z \u001b[32m2025-08-28 15:48:59.388\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  9. check_network_connectivity\u001b[0m\n2025-08-28T15:48:59.389282852Z \u001b[32m2025-08-28 15:48:59.388\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36mrun_all_checks\u001b[0m:\u001b[36m60\u001b[0m | \u001b[1m  10. check_or_create_assistant\u001b[0m\n2025-08-28T15:48:59.389284797Z \u001b[32m2025-08-28 15:48:59.388\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_environment_variables\u001b[0m\n2025-08-28T15:48:59.389286394Z \u001b[32m2025-08-28 15:48:59.388\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_configuration\u001b[0m\n2025-08-28T15:48:59.389287748Z \u001b[32m2025-08-28 15:48:59.388\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_file_permissions\u001b[0m\n2025-08-28T15:48:59.395210582Z \u001b[32m2025-08-28 15:48:59.394\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_database_connection\u001b[0m\n2025-08-28T15:48:59.411326530Z \u001b[32m2025-08-28 15:48:59.410\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_redis\u001b[0m\n2025-08-28T15:48:59.413011700Z \u001b[32m2025-08-28 15:48:59.412\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.redis_manager\u001b[0m:\u001b[36m_test_redis_connection\u001b[0m:\u001b[36m114\u001b[0m | \u001b[1mRedis connected successfully\u001b[0m\n2025-08-28T15:48:59.416616535Z \u001b[32m2025-08-28 15:48:59.414\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_clickhouse\u001b[0m\n2025-08-28T15:48:59.417480867Z \u001b[32m2025-08-28 15:48:59.415\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.db.clickhouse\u001b[0m:\u001b[36m_create_mock_client\u001b[0m:\u001b[36m132\u001b[0m | \u001b[1m[ClickHouse] Using MOCK client for development\u001b[0m\n2025-08-28T15:48:59.418017876Z \u001b[32m2025-08-28 15:48:59.415\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.service_checks\u001b[0m:\u001b[36m_log_clickhouse_warning_if_needed\u001b[0m:\u001b[36m242\u001b[0m | \u001b[33m\u001b[1mClickHouse not available - analytics features limited\u001b[0m\n2025-08-28T15:48:59.418027212Z \u001b[32m2025-08-28 15:48:59.415\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_llm_providers\u001b[0m\n2025-08-28T15:48:59.418028886Z \u001b[32m2025-08-28 15:48:59.415\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.service_checks\u001b[0m:\u001b[36m_handle_llm_test_failure\u001b[0m:\u001b[36m197\u001b[0m | \u001b[1mLLM 'default' failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:48:59.418030382Z \u001b[32m2025-08-28 15:48:59.416\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.service_checks\u001b[0m:\u001b[36m_handle_llm_test_failure\u001b[0m:\u001b[36m197\u001b[0m | \u001b[1mLLM 'analysis' failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:48:59.418032143Z \u001b[32m2025-08-28 15:48:59.416\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.service_checks\u001b[0m:\u001b[36m_handle_llm_test_failure\u001b[0m:\u001b[36m197\u001b[0m | \u001b[1mLLM 'triage' failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:48:59.418034135Z \u001b[32m2025-08-28 15:48:59.416\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.service_checks\u001b[0m:\u001b[36m_handle_llm_test_failure\u001b[0m:\u001b[36m197\u001b[0m | \u001b[1mLLM 'data' failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:48:59.418035948Z \u001b[32m2025-08-28 15:48:59.416\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.service_checks\u001b[0m:\u001b[36m_handle_llm_test_failure\u001b[0m:\u001b[36m197\u001b[0m | \u001b[1mLLM 'optimizations_core' failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:48:59.418118173Z \u001b[32m2025-08-28 15:48:59.417\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.service_checks\u001b[0m:\u001b[36m_handle_llm_test_failure\u001b[0m:\u001b[36m197\u001b[0m | \u001b[1mLLM 'actions_to_meet_goals' failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:48:59.418273398Z \u001b[32m2025-08-28 15:48:59.417\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.service_checks\u001b[0m:\u001b[36m_handle_llm_test_failure\u001b[0m:\u001b[36m197\u001b[0m | \u001b[1mLLM 'reporting' failed: No module named 'langchain_google_genai'\u001b[0m\n2025-08-28T15:48:59.418686067Z \u001b[32m2025-08-28 15:48:59.417\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_memory_and_resources\u001b[0m\n2025-08-28T15:48:59.418799993Z \u001b[32m2025-08-28 15:48:59.418\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_network_connectivity\u001b[0m\n2025-08-28T15:48:59.420016023Z \u001b[32m2025-08-28 15:48:59.419\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_execute_check\u001b[0m:\u001b[36m109\u001b[0m | \u001b[1mRunning startup check: check_or_create_assistant\u001b[0m\n2025-08-28T15:48:59.420336552Z /usr/local/lib/python3.11/contextlib.py:210: DeprecationWarning: postgres_session.get_async_db() is deprecated. Use 'from netra_backend.app.database import get_db' instead.\n2025-08-28T15:48:59.420349283Z   return await anext(self.gen)\n2025-08-28T15:48:59.475978596Z WARNING:  WatchFiles detected changes in 'scripts/docker_log_remediation_loop.py'. Reloading...\n2025-08-28T15:48:59.482438125Z \u001b[32m2025-08-28 15:48:59.479\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m140\u001b[0m | \u001b[1m=== STARTUP CHECKS SUMMARY ===\u001b[0m\n2025-08-28T15:48:59.482840005Z \u001b[32m2025-08-28 15:48:59.479\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m141\u001b[0m | \u001b[1mTotal checks: 10\u001b[0m\n2025-08-28T15:48:59.482852475Z \u001b[32m2025-08-28 15:48:59.479\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m142\u001b[0m | \u001b[1mPassed: 8\u001b[0m\n2025-08-28T15:48:59.482876638Z \u001b[32m2025-08-28 15:48:59.479\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m143\u001b[0m | \u001b[1mFailed (critical): 0\u001b[0m\n2025-08-28T15:48:59.482885584Z \u001b[32m2025-08-28 15:48:59.479\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m144\u001b[0m | \u001b[1mFailed (non-critical): 2\u001b[0m\n2025-08-28T15:48:59.483742473Z \u001b[32m2025-08-28 15:48:59.480\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m145\u001b[0m | \u001b[1mTotal duration: 92.26ms\u001b[0m\n2025-08-28T15:48:59.483873246Z \u001b[32m2025-08-28 15:48:59.480\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  PASS: environment_variables (0.05ms) - Development mode - using default configs (Optional missing: GOOGLE_CLIENT_ID, GOOGLE_CLIENT_SECRET)\u001b[0m\n2025-08-28T15:48:59.484450470Z \u001b[32m2025-08-28 15:48:59.480\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  PASS: configuration (0.02ms) - Configuration valid for development environment\u001b[0m\n2025-08-28T15:48:59.484932857Z \u001b[32m2025-08-28 15:48:59.480\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  PASS: file_permissions (5.51ms) - All required directories are accessible\u001b[0m\n2025-08-28T15:48:59.485176713Z \u001b[32m2025-08-28 15:48:59.480\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  PASS: database_connection (16.01ms) - PostgreSQL connected and schema valid\u001b[0m\n2025-08-28T15:48:59.485191399Z \u001b[32m2025-08-28 15:48:59.480\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  PASS: redis_connection (3.88ms) - Redis connected and operational\u001b[0m\n2025-08-28T15:48:59.485683239Z \u001b[32m2025-08-28 15:48:59.480\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  FAIL-WARN: clickhouse_connection (0.64ms) - ClickHouse check failed: Missing ClickHouse tables: ['workload_events']\u001b[0m\n2025-08-28T15:48:59.487437021Z \u001b[32m2025-08-28 15:48:59.480\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  FAIL-WARN: llm_providers (2.12ms) - No LLM providers available\u001b[0m\n2025-08-28T15:48:59.487483818Z \u001b[32m2025-08-28 15:48:59.480\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  PASS: system_resources (0.56ms) - Resources OK: 27.4GB RAM, 876.2GB disk, 20 CPUs\u001b[0m\n2025-08-28T15:48:59.487492278Z \u001b[32m2025-08-28 15:48:59.480\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  PASS: network_connectivity (1.12ms) - All network endpoints reachable\u001b[0m\n2025-08-28T15:48:59.487684432Z \u001b[32m2025-08-28 15:48:59.480\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.checker\u001b[0m:\u001b[36m_create_final_report\u001b[0m:\u001b[36m151\u001b[0m | \u001b[1m  PASS: netra_assistant (59.58ms) - Netra assistant already exists\u001b[0m\n2025-08-28T15:48:59.487693331Z \u001b[32m2025-08-28 15:48:59.481\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.utils\u001b[0m:\u001b[36m_log_startup_results\u001b[0m:\u001b[36m32\u001b[0m | \u001b[1mStartup checks completed in 92ms\u001b[0m\n2025-08-28T15:48:59.487706207Z \u001b[32m2025-08-28 15:48:59.481\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.utils\u001b[0m:\u001b[36m_log_startup_results\u001b[0m:\u001b[36m33\u001b[0m | \u001b[1mResults: 8/10 passed\u001b[0m\n2025-08-28T15:48:59.487707760Z \u001b[32m2025-08-28 15:48:59.481\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.utils\u001b[0m:\u001b[36m_log_non_critical_failures\u001b[0m:\u001b[36m48\u001b[0m | \u001b[33m\u001b[1mNon-critical startup checks failed:\u001b[0m\n2025-08-28T15:48:59.487709794Z \u001b[32m2025-08-28 15:48:59.481\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.utils\u001b[0m:\u001b[36m_log_non_critical_failures\u001b[0m:\u001b[36m51\u001b[0m | \u001b[33m\u001b[1m  - clickhouse_connection: ClickHouse check failed: Missing ClickHouse tables: ['workload_events']\u001b[0m\n2025-08-28T15:48:59.487711399Z \u001b[32m2025-08-28 15:48:59.481\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.startup_checks.utils\u001b[0m:\u001b[36m_log_non_critical_failures\u001b[0m:\u001b[36m51\u001b[0m | \u001b[33m\u001b[1m  - llm_providers: No LLM providers available\u001b[0m\n2025-08-28T15:48:59.487722649Z \u001b[32m2025-08-28 15:48:59.481\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36mstartup_health_checks\u001b[0m:\u001b[36m749\u001b[0m | \u001b[1mStartup checks completed: 8/10 passed\u001b[0m\n2025-08-28T15:48:59.487726456Z \u001b[32m2025-08-28 15:48:59.481\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36mstartup_health_checks\u001b[0m:\u001b[36m754\u001b[0m | \u001b[33m\u001b[1mSome startup checks failed (2), but continuing in graceful mode\u001b[0m\n2025-08-28T15:48:59.524252141Z \u001b[32m2025-08-28 15:48:59.523\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.services.schema_validation_service\u001b[0m:\u001b[36m_log_missing_columns\u001b[0m:\u001b[36m107\u001b[0m | \u001b[31m\u001b[1mMissing columns in table research_sessions: ['completed_at', 'error_message']\u001b[0m\n2025-08-28T15:48:59.524291783Z \u001b[32m2025-08-28 15:48:59.523\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mnetra_backend.app.services.schema_validation_service\u001b[0m:\u001b[36m_log_warnings\u001b[0m:\u001b[36m113\u001b[0m | \u001b[33m\u001b[1mExtra tables in database not defined in models: {'userbase', 'auth_users', 'alembic_version', 'auth_audit_logs', 'password_reset_tokens', 'auth_sessions'}\u001b[0m\n2025-08-28T15:48:59.525007584Z \u001b[32m2025-08-28 15:48:59.524\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.services.schema_validation_service\u001b[0m:\u001b[36mrun_comprehensive_validation\u001b[0m:\u001b[36m234\u001b[0m | \u001b[31m\u001b[1mSchema validation failed: {'passed': False, 'missing_tables': [], 'missing_columns': {'research_sessions': ['completed_at', 'error_message']}, 'type_mismatches': {}, 'warnings': [\"Extra tables in database not defined in models: {'userbase', 'auth_users', 'alembic_version', 'auth_audit_logs', 'password_reset_tokens', 'auth_sessions'}\"]}\u001b[0m\n2025-08-28T15:48:59.525027111Z \u001b[32m2025-08-28 15:48:59.524\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_handle_schema_validation_result\u001b[0m:\u001b[36m824\u001b[0m | \u001b[31m\u001b[1mSchema validation failed. The application might not work as expected.\u001b[0m\n2025-08-28T15:48:59.544491464Z \u001b[32m2025-08-28 15:48:59.543\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36minitialize_websocket_components\u001b[0m:\u001b[36m718\u001b[0m | \u001b[1mWebSocket components initialized\u001b[0m\n2025-08-28T15:49:00.583618114Z \u001b[32m2025-08-28 15:49:00.579\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: triage\u001b[0m\n2025-08-28T15:49:00.583654811Z \u001b[32m2025-08-28 15:49:00.580\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: data\u001b[0m\n2025-08-28T15:49:00.583656711Z \u001b[32m2025-08-28 15:49:00.580\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: optimization\u001b[0m\n2025-08-28T15:49:00.583657914Z \u001b[32m2025-08-28 15:49:00.580\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: actions\u001b[0m\n2025-08-28T15:49:00.583658997Z \u001b[32m2025-08-28 15:49:00.580\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: reporting\u001b[0m\n2025-08-28T15:49:00.583660106Z \u001b[32m2025-08-28 15:49:00.580\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: synthetic_data\u001b[0m\n2025-08-28T15:49:00.583661159Z \u001b[32m2025-08-28 15:49:00.581\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.supervisor.agent_registry\u001b[0m:\u001b[36mregister\u001b[0m:\u001b[36m80\u001b[0m | \u001b[1mRegistered agent: corpus_admin\u001b[0m\n2025-08-28T15:49:00.583662188Z \u001b[32m2025-08-28 15:49:00.581\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_create_agent_supervisor\u001b[0m:\u001b[36m656\u001b[0m | \u001b[1mAgent supervisor created successfully\u001b[0m\n2025-08-28T15:49:00.583663350Z \u001b[32m2025-08-28 15:49:00.581\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.services.database.health_checker\u001b[0m:\u001b[36mstart_monitoring\u001b[0m:\u001b[36m29\u001b[0m | \u001b[1mStarting database connection monitoring\u001b[0m\n2025-08-28T15:49:00.583877556Z \u001b[32m2025-08-28 15:49:00.581\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.agents.base.monitoring\u001b[0m:\u001b[36mstart_monitoring\u001b[0m:\u001b[36m318\u001b[0m | \u001b[1mExecution monitoring started\u001b[0m\n2025-08-28T15:49:00.583892158Z \u001b[32m2025-08-28 15:49:00.581\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_create_monitoring_task\u001b[0m:\u001b[36m848\u001b[0m | \u001b[1mComprehensive monitoring started\u001b[0m\n2025-08-28T15:49:00.583972546Z \u001b[32m2025-08-28 15:49:00.581\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.core.performance_optimization_manager\u001b[0m:\u001b[36minitialize\u001b[0m:\u001b[36m43\u001b[0m | \u001b[1mPerformance optimization manager initialized\u001b[0m\n2025-08-28T15:49:00.584876322Z \u001b[32m2025-08-28 15:49:00.581\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mCreated background task 'database_index_optimization' (ID: 5c60cea5-75ea-49f5-a351-49fd923f0258) with 120s timeout\u001b[0m\n2025-08-28T15:49:00.585769863Z \u001b[32m2025-08-28 15:49:00.582\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_schedule_background_optimizations\u001b[0m:\u001b[36m224\u001b[0m | \u001b[1mDatabase index optimization scheduled as background task (ID: 5c60cea5-75ea-49f5-a351-49fd923f0258)\u001b[0m\n2025-08-28T15:49:00.586026871Z \u001b[32m2025-08-28 15:49:00.582\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_initialize_performance_optimizations\u001b[0m:\u001b[36m194\u001b[0m | \u001b[1mPerformance optimizations initialized successfully\u001b[0m\n2025-08-28T15:49:00.586425239Z \u001b[32m2025-08-28 15:49:00.582\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36m_run_legacy_startup\u001b[0m:\u001b[36m1016\u001b[0m | \u001b[1mLegacy startup completion flags set - health endpoint will report healthy\u001b[0m\n2025-08-28T15:49:00.586604031Z \u001b[32m2025-08-28 15:49:00.582\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.startup_module\u001b[0m:\u001b[36mlog_startup_complete\u001b[0m:\u001b[36m869\u001b[0m | \u001b[1mSystem Ready (Took 2.20s).\u001b[0m\n2025-08-28T15:49:00.586612918Z \u001b[32m2025-08-28 15:49:00.584\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mApplication startup complete.\u001b[0m\n2025-08-28T15:49:00.586752439Z \u001b[32m2025-08-28 15:49:00.584\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mApplication startup complete.\u001b[0m\n2025-08-28T15:49:00.591227496Z \u001b[32m2025-08-28 15:49:00.590\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.shutdown\u001b[0m:\u001b[36mshutdown_cleanup\u001b[0m:\u001b[36m20\u001b[0m | \u001b[1mApplication shutdown initiated...\u001b[0m\n2025-08-28T15:49:00.591600132Z \u001b[32m2025-08-28 15:49:00.590\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.utils.multiprocessing_cleanup\u001b[0m:\u001b[36mcleanup_all\u001b[0m:\u001b[36m90\u001b[0m | \u001b[1mMultiprocessing resources cleaned up\u001b[0m\n2025-08-28T15:49:00.591619895Z \u001b[32m2025-08-28 15:49:00.590\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mnetra_backend.app.shutdown\u001b[0m:\u001b[36mrun_complete_shutdown\u001b[0m:\u001b[36m120\u001b[0m | \u001b[1mShutting down background task manager...\u001b[0m\n2025-08-28T15:49:00.591621931Z \u001b[32m2025-08-28 15:49:00.590\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mShutting down BackgroundTaskManager...\u001b[0m\n2025-08-28T15:49:00.591623276Z \u001b[32m2025-08-28 15:49:00.590\u001b[0m | \u001b[1mINFO    \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[1mCancelling 1 active background tasks\u001b[0m\n2025-08-28T15:49:00.591906833Z /usr/local/lib/python3.11/site-packages/websockets/legacy/server.py:1178: DeprecationWarning: remove second argument of ws_handler\n2025-08-28T15:49:00.591923297Z   warnings.warn(\"remove second argument of ws_handler\", DeprecationWarning)\n2025-08-28T15:49:00.600499940Z \u001b[32m2025-08-28 15:49:00.592\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[31m\u001b[1mException in ASGI application\n2025-08-28T15:49:00.600529659Z \u001b[0m",
          "signature": "74cf62b8c45fb531581bab619527b3ff",
          "is_traceback": true
        },
        {
          "line_number": 5693,
          "timestamp": "2025-08-28T15:49:00.600531326Z",
          "severity": "CRITICAL",
          "error_type": "Unknown Exception",
          "pattern": "Traceback",
          "log_line": "2025-08-28T15:49:00.600531326Z \u001b[33m\u001b[1mTraceback (most recent call last):\u001b[0m",
          "log_content": "2025-08-28T15:49:00.600531326Z \u001b[33m\u001b[1mTraceback (most recent call last):\u001b[0m\n2025-08-28T15:49:00.600532374Z   File \"<string>\", line 1, in <module>\n2025-08-28T15:49:00.600533614Z   File \"/usr/local/lib/python3.11/multiprocessing/spawn.py\", line 122, in spawn_main\n2025-08-28T15:49:00.600534534Z     exitcode = _main(fd, parent_sentinel)\n2025-08-28T15:49:00.600535427Z   File \"/usr/local/lib/python3.11/multiprocessing/spawn.py\", line 135, in _main\n2025-08-28T15:49:00.600536316Z     return self._bootstrap(parent_sentinel)\n2025-08-28T15:49:00.600537125Z   File \"/usr/local/lib/python3.11/multiprocessing/process.py\", line 314, in _bootstrap\n2025-08-28T15:49:00.600538023Z     self.run()\n2025-08-28T15:49:00.600538823Z   File \"/usr/local/lib/python3.11/multiprocessing/process.py\", line 108, in run\n2025-08-28T15:49:00.600539698Z     self._target(*self._args, **self._kwargs)\n2025-08-28T15:49:00.600540616Z   File \"/usr/local/lib/python3.11/site-packages/uvicorn/_subprocess.py\", line 76, in subprocess_started\n2025-08-28T15:49:00.600541525Z     target(sockets=sockets)\n2025-08-28T15:49:00.600542309Z   File \"/usr/local/lib/python3.11/site-packages/uvicorn/server.py\", line 61, in run\n2025-08-28T15:49:00.600543185Z     return asyncio.run(self.serve(sockets=sockets))\n2025-08-28T15:49:00.600543993Z   File \"/usr/local/lib/python3.11/asyncio/runners.py\", line 189, in run\n2025-08-28T15:49:00.600544856Z     with Runner(debug=debug) as runner:\n2025-08-28T15:49:00.600545687Z   File \"/usr/local/lib/python3.11/asyncio/runners.py\", line 63, in __exit__\n2025-08-28T15:49:00.600546600Z     self.close()\n2025-08-28T15:49:00.600547452Z   File \"/usr/local/lib/python3.11/asyncio/runners.py\", line 71, in close\n2025-08-28T15:49:00.600548309Z     _cancel_all_tasks(loop)\n2025-08-28T15:49:00.600549078Z   File \"/usr/local/lib/python3.11/asyncio/runners.py\", line 201, in _cancel_all_tasks\n2025-08-28T15:49:00.600549941Z     loop.run_until_complete(tasks.gather(*to_cancel, return_exceptions=True))\n2025-08-28T15:49:00.600550808Z > File \"/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py\", line 426, in run_asgi\n2025-08-28T15:49:00.600551772Z     result = await app(  # type: ignore[func-returns-value]\n2025-08-28T15:49:00.600552596Z   File \"/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py\", line 84, in __call__\n2025-08-28T15:49:00.600553484Z     return await self.app(scope, receive, send)\n2025-08-28T15:49:00.600554359Z   File \"/usr/local/lib/python3.11/site-packages/fastapi/applications.py\", line 1106, in __call__\n2025-08-28T15:49:00.600555367Z     await super().__call__(scope, receive, send)\n2025-08-28T15:49:00.600564958Z   File \"/usr/local/lib/python3.11/site-packages/starlette/applications.py\", line 122, in __call__\n2025-08-28T15:49:00.600566591Z     await self.middleware_stack(scope, receive, send)\n2025-08-28T15:49:00.600567479Z   File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py\", line 162, in __call__\n2025-08-28T15:49:00.600568375Z     await self.app(scope, receive, _send)\n2025-08-28T15:49:00.600569204Z   File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 108, in __call__\n2025-08-28T15:49:00.600570094Z     response = await self.dispatch_func(request, call_next)\n2025-08-28T15:49:00.600570929Z   File \"\u001b[32m/app/netra_backend/app/middleware/\u001b[0m\u001b[32m\u001b[1mcors_fix_middleware.py\u001b[0m\", line \u001b[33m66\u001b[0m, in \u001b[35mdispatch\u001b[0m\n2025-08-28T15:49:00.600572160Z     \u001b[1mresponse\u001b[0m \u001b[35m\u001b[1m=\u001b[0m \u001b[35m\u001b[1mawait\u001b[0m \u001b[1mcall_next\u001b[0m\u001b[1m(\u001b[0m\u001b[1mrequest\u001b[0m\u001b[1m)\u001b[0m\n2025-08-28T15:49:00.600573302Z   File \"/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py\", line 78, in call_next\n2025-08-28T15:49:00.600574201Z     message = await recv_stream.receive()\n2025-08-28T15:49:00.600575014Z   File \"/usr/local/lib/python3.11/site-packages/anyio/streams/memory.py\", line 96, in receive\n2025-08-28T15:49:00.600575885Z     await checkpoint()\n2025-08-28T15:49:00.600576675Z   File \"/usr/local/lib/python3.11/site-packages/anyio/lowlevel.py\", line 33, in checkpoint\n2025-08-28T15:49:00.600577529Z     await get_asynclib().checkpoint()\n2025-08-28T15:49:00.600578333Z   File \"/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py\", line 447, in checkpoint\n2025-08-28T15:49:00.600579203Z     await sleep(0)\n2025-08-28T15:49:00.600579974Z   File \"/usr/local/lib/python3.11/asyncio/tasks.py\", line 640, in sleep\n2025-08-28T15:49:00.600580829Z     await __sleep0()\n2025-08-28T15:49:00.600581601Z   File \"/usr/local/lib/python3.11/asyncio/tasks.py\", line 634, in __sleep0\n2025-08-28T15:49:00.600582455Z     yield\n2025-08-28T15:49:00.600583227Z \u001b[31m\u001b[1masyncio.exceptions.CancelledError\u001b[0m\n2025-08-28T15:49:00.600584105Z \u001b[32m2025-08-28 15:49:00.599\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[31m\u001b[1mException in ASGI application\n2025-08-28T15:49:00.600585215Z \u001b[0m",
          "signature": "6a05a6f6d80bc1262024c91d186f5e1c",
          "is_traceback": true
        },
        {
          "line_number": 5874,
          "timestamp": "2025-08-28T15:49:00.815163911Z",
          "severity": "CRITICAL",
          "error_type": "Unknown Exception",
          "pattern": "Traceback",
          "log_line": "2025-08-28T15:49:00.815163911Z \u001b[32m2025-08-28 15:49:00.813\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[31m\u001b[1mTraceback (most recent call last):",
          "log_content": "2025-08-28T15:49:00.815163911Z \u001b[32m2025-08-28 15:49:00.813\u001b[0m | \u001b[31m\u001b[1mERROR   \u001b[0m | \u001b[36mlogging\u001b[0m:\u001b[36mhandle\u001b[0m:\u001b[36m978\u001b[0m | \u001b[31m\u001b[1mTraceback (most recent call last):\n2025-08-28T15:49:00.815233940Z   File \"/usr/local/lib/python3.11/site-packages/starlette/routing.py\", line 686, in lifespan\n2025-08-28T15:49:00.815242376Z     await receive()\n2025-08-28T15:49:00.815245717Z   File \"/usr/local/lib/python3.11/site-packages/uvicorn/lifespan/on.py\", line 137, in receive\n2025-08-28T15:49:00.815248230Z     return await self.receive_queue.get()\n2025-08-28T15:49:00.815250464Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n2025-08-28T15:49:00.815252476Z   File \"/usr/local/lib/python3.11/asyncio/queues.py\", line 158, in get\n2025-08-28T15:49:00.815294199Z     await getter\n2025-08-28T15:49:00.815296927Z asyncio.exceptions.CancelledError\n2025-08-28T15:49:00.815298316Z \u001b[0m",
          "signature": "808263b3490c36557ac1655aead3b60c",
          "is_traceback": true
        }
      ]
    }
  }
}