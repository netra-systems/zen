[pytest]
# Pytest configuration for Netra Core
testpaths = tests netra_backend/tests auth_service/tests
python_files = test_*.py *_test.py
python_classes = Test*
python_functions = test_*
addopts = -ra --strict-markers --strict-config
minversion = 6.0
asyncio_mode = auto
asyncio_default_fixture_loop_scope = session
markers =
    # Environment markers
    env: Environment-specific tests
    test: Tests for test environment only
    dev: Tests for dev environment only  
    staging: Tests for staging environment only
    prod: Tests for production environment only
    
    # Test type markers
    unit: Unit tests
    integration: Integration tests
    e2e: End-to-end tests
    
    # Service markers
    backend: Backend service tests
    auth: Auth service tests  
    frontend: Frontend tests
    
    # Feature markers
    agents: Agent-related tests
    websocket: WebSocket tests
    database: Database tests
    api: API tests
    
    # Performance markers
    slow: Slow running tests
    fast: Fast running tests
    
    # Resource isolation markers
    cpu_isolation: CPU isolation tests
    memory_isolation: Memory isolation tests
    network_isolation: Network isolation tests
    file_system_isolation: File system isolation tests
    filesystem_isolation: File system isolation tests (alias)
    multi_tenant_isolation: Multi-tenant isolation tests
    
    # Service dependency markers
    requires_redis: Tests requiring Redis
    requires_postgres: Tests requiring PostgreSQL
    requires_llm: Tests requiring LLM services
    requires_real_services: Tests requiring real running services
    
    # Business logic markers
    billing: Billing-related tests
    auth_flow: Authentication flow tests
    user_management: User management tests
    admin: Admin functionality tests
    
    # Infrastructure markers
    deployment: Deployment tests
    monitoring: Monitoring tests
    security: Security tests
    
    # Skip markers
    skip_ci: Skip in CI environment
    skip_local: Skip in local environment
    manual: Manual tests only