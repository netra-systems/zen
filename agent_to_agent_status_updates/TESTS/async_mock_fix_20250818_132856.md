# AsyncMock Fix Report - 20250818_132856

## Task Overview
Fixed AttributeError in app/tests/agents/test_llm_agent_basic.py where `pytest.AsyncMock` was incorrectly used instead of `unittest.mock.AsyncMock`.

## Problem Analysis
- **Error**: `module 'pytest' has no attribute 'AsyncMock'`
- **Location**: Line 57 and multiple other locations in test_llm_agent_basic.py
- **Root Cause**: Incorrect usage of `pytest.AsyncMock` when `AsyncMock` is already properly imported from `unittest.mock`

## Solution Implemented
- **Fixed Import**: File already had correct import: `from unittest.mock import AsyncMock` (line 10)
- **Replaced All Occurrences**: Changed `pytest.AsyncMock` to `AsyncMock` in 7 locations:
  - Line 57: `_setup_valid_json_response` function
  - Line 73: `_setup_invalid_json_response` function  
  - Line 148: `_setup_message_capture` function
  - Line 184: `_setup_tool_error` function
  - Lines 211-212: `_setup_persistence_mocks` function
  - Lines 217-218: `_setup_additional_persistence_mocks` function
  - Line 248: `_setup_pipeline_error` function

## Changes Made
1. Replaced `pytest.AsyncMock` with `AsyncMock` in all 7 occurrences
2. No import changes needed (correct import already present)
3. Maintained all existing test functionality

## Validation
- All AsyncMock usages now correctly reference the imported `AsyncMock` from `unittest.mock`
- Test structure and logic preserved
- No breaking changes to test functionality

## Status: COMPLETE
- ✅ Fixed AttributeError
- ✅ All AsyncMock usages corrected
- ✅ No additional imports needed
- ✅ Test integrity maintained

## File Modified
- `app/tests/agents/test_llm_agent_basic.py` - 7 replacements applied atomically