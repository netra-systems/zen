# ===============================================================================
# Netra Staging Environment Configuration - Comprehensive Template
# ===============================================================================
# 
# This template covers ALL environment variables used across the Netra platform
# Variables are categorized by criticality and usage context.
#
# USAGE:
# 1. Copy relevant sections to your actual .env.staging file
# 2. CRITICAL variables must be set for services to start
# 3. IMPORTANT variables should be set for full functionality
# 4. OPTIONAL variables enhance features but aren't required
# 5. Variables marked with [GCP_SECRETS] are loaded from Google Secret Manager in staging
#
# IMPORTANT: Do NOT commit actual secrets to git. Use this as a reference only.
# ===============================================================================

# ===============================================================================
# üö® CRITICAL VARIABLES - Required for services to start
# ===============================================================================

# Environment Detection
ENVIRONMENT=staging

# Core Authentication & Security (CRITICAL)
# [GCP_SECRETS] These are automatically loaded from Google Secret Manager in staging
# SECRET_KEY=your-secure-application-secret-key-32-chars-minimum
# JWT_SECRET_KEY=your-jwt-secret-key-64-chars-recommended
# FERNET_KEY=base64-encoded-fernet-key-for-encryption

# Database Configuration (CRITICAL)
# [GCP_SECRETS] POSTGRES_PASSWORD loaded from postgres-password-staging
DATABASE_URL=postgresql+asyncpg://postgres:PASSWORD@STAGING_DB_HOST:5432/netra_staging
POSTGRES_HOST=STAGING_DB_HOST
POSTGRES_PORT=5432
POSTGRES_DB=netra_staging
POSTGRES_USER=postgres
# POSTGRES_PASSWORD=loaded-from-gcp-secrets

# ===============================================================================
# ‚ö†Ô∏è IMPORTANT VARIABLES - Critical for staging functionality
# ===============================================================================

# OAuth Configuration for Staging (IMPORTANT)
# [GCP_SECRETS] These are loaded from Google Secret Manager
# GOOGLE_OAUTH_CLIENT_ID_STAGING=your-staging-oauth-client-id.apps.googleusercontent.com
# GOOGLE_OAUTH_CLIENT_SECRET_STAGING=your-staging-oauth-client-secret

# LLM API Keys (IMPORTANT for AI features)
# [GCP_SECRETS] These are loaded from Google Secret Manager
# ANTHROPIC_API_KEY=sk-ant-your-anthropic-api-key
# OPENAI_API_KEY=sk-your-openai-api-key
# GEMINI_API_KEY=your-gemini-api-key

# Service Authentication (IMPORTANT)
# NETRA_API_KEY=your-netra-service-api-key

# ===============================================================================
# üìä DATABASE & CACHE CONNECTIONS - Optional but recommended
# ===============================================================================

# Redis Configuration (Optional - improves performance)
# [GCP_SECRETS] REDIS_PASSWORD loaded from redis-password-staging
REDIS_URL=redis://STAGING_REDIS_HOST:6379/0
REDIS_HOST=STAGING_REDIS_HOST
REDIS_PORT=6379
REDIS_REQUIRED=false
REDIS_FALLBACK_ENABLED=true
# REDIS_PASSWORD=loaded-from-gcp-secrets

# ClickHouse Configuration (Optional - for analytics)
# [GCP_SECRETS] CLICKHOUSE_PASSWORD loaded from clickhouse-password
CLICKHOUSE_URL=clickhouse://default:PASSWORD@STAGING_CLICKHOUSE_HOST:8123/default
CLICKHOUSE_HOST=STAGING_CLICKHOUSE_HOST
CLICKHOUSE_PORT=8123
CLICKHOUSE_USERNAME=default
CLICKHOUSE_USER=default
CLICKHOUSE_DB=default
CLICKHOUSE_SECURE=true
CLICKHOUSE_TIMEOUT=30
# CLICKHOUSE_PASSWORD=loaded-from-gcp-secrets

# ===============================================================================
# üåê NETWORK & SERVICE CONFIGURATION
# ===============================================================================

# Service Ports and URLs
SERVER_PORT=8080
API_BASE_URL=https://api-staging.netrasystems.ai
FRONTEND_URL=https://app-staging.netrasystems.ai
WS_BASE_URL=wss://api-staging.netrasystems.ai/ws

# Auth Service Configuration
AUTH_SERVICE_URL=https://auth-staging.netrasystems.ai
AUTH_SERVICE_ENABLED=true
AUTH_CACHE_TTL_SECONDS=300
SERVICE_ID=backend
# SERVICE_SECRET=generated-service-secret

# CORS Configuration
CORS_ORIGINS=https://app-staging.netrasystems.ai,https://api-staging.netrasystems.ai
CORS_ALLOWED_ORIGINS=https://app-staging.netrasystems.ai

# ===============================================================================
# üîç MONITORING & OBSERVABILITY - Optional but recommended for staging
# ===============================================================================

# Observability Services (Optional)
# [GCP_SECRETS] These are loaded from Google Secret Manager
# LANGFUSE_PUBLIC_KEY=pk_your-langfuse-public-key
# LANGFUSE_SECRET_KEY=sk_your-langfuse-secret-key

# Monitoring Passwords (Optional)
# GRAFANA_ADMIN_PASSWORD=secure-grafana-password

# Feature Flags for Monitoring
PROMETHEUS_ENABLED=true
ENABLE_WEBSOCKET_METRICS=true
WEBSOCKET_METRICS_ENABLED=true
WEBSOCKET_DEBUG_LOGGING=true

# ===============================================================================
# üîê OAUTH & THIRD-PARTY AUTHENTICATION - Environment specific
# ===============================================================================

# GitHub OAuth (Optional - for GitHub integration)
# GITHUB_OAUTH_CLIENT_ID=your-github-oauth-client-id
# GITHUB_OAUTH_CLIENT_SECRET=your-github-oauth-client-secret

# Legacy OAuth Variables (Deprecated - use environment-specific versions)
# GOOGLE_CLIENT_ID=use-GOOGLE_OAUTH_CLIENT_ID_STAGING-instead
# GOOGLE_OAUTH_CLIENT_ID=use-GOOGLE_OAUTH_CLIENT_ID_STAGING-instead

# ===============================================================================
# ‚òÅÔ∏è CLOUD & DEPLOYMENT CONFIGURATION
# ===============================================================================

# Google Cloud Platform
GCP_PROJECT_ID=netra-staging
GCP_PROJECT_ID_NUMERICAL_STAGING=701982941522

# Cloud Run Environment Variables (Set automatically)
# K_SERVICE=netra-backend-staging
# K_REVISION=netra-backend-staging-00001
# PORT=8080

# Pull Request Staging (Set by CI/CD)
# PR_NUMBER=123

# ===============================================================================
# ‚öôÔ∏è FEATURE FLAGS & OPERATIONAL SETTINGS
# ===============================================================================

# Startup and Migration Settings
SKIP_MIGRATION_ON_STARTUP=false
ENABLE_STARTUP_CHECKS=true
STARTUP_CHECK_TIMEOUT=30

# Authentication Settings
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=15
REFRESH_TOKEN_EXPIRE_DAYS=7
JWT_ACCESS_EXPIRY_MINUTES=15
JWT_REFRESH_EXPIRY_DAYS=7
JWT_SERVICE_EXPIRY_MINUTES=60

# Development/Testing Features (Use with caution in staging)
DISABLE_AUTH=false
TEST_MODE=true
AUTH_FAST_TEST_MODE=false

# ===============================================================================
# üì° WEBSOCKET & REAL-TIME CONFIGURATION
# ===============================================================================

# WebSocket Settings (Optimized for staging/GCP)
WEBSOCKET_HEARTBEAT_INTERVAL=30
WEBSOCKET_HEARTBEAT_TIMEOUT=90
WEBSOCKET_CONNECTION_TIMEOUT=600
WEBSOCKET_MAX_RECONNECT_ATTEMPTS=5
WEBSOCKET_MAX_CONNECTIONS_PER_USER=3
WEBSOCKET_MAX_MESSAGE_RATE_PER_MINUTE=100
WEBSOCKET_MAX_MESSAGE_SIZE_BYTES=8192
WEBSOCKET_CLEANUP_INTERVAL=120
WEBSOCKET_RECONNECT_BASE_DELAY=2.0
WEBSOCKET_RECONNECT_MAX_DELAY=60.0
WEBSOCKET_RECONNECT_JITTER_FACTOR=0.3

# ===============================================================================
# üîß LLM & AI SERVICE CONFIGURATION
# ===============================================================================

# LLM Settings
LLM_MODE=shared
LLM_CACHE_ENABLED=true
LLM_CACHE_TTL=3600
LLM_HEARTBEAT_ENABLED=true
LLM_DATA_LOGGING_ENABLED=true

# ===============================================================================
# üè• HEALTH CHECK & RELIABILITY
# ===============================================================================

# Health Check Configuration
HEALTH_CHECK_GRACE_PERIOD=60
HEALTH_CHECK_MAX_RETRIES=5

# Logging Configuration
LOG_LEVEL=INFO
LOGGING_LEVEL=INFO

# ===============================================================================
# üìã SUMMARY OF VARIABLE CATEGORIES
# ===============================================================================
#
# CRITICAL (Must be set - services won't start without these):
# - ENVIRONMENT, SECRET_KEY, JWT_SECRET_KEY, FERNET_KEY
# - DATABASE_URL, POSTGRES_HOST, POSTGRES_PORT, POSTGRES_DB, POSTGRES_USER
#
# IMPORTANT (Should be set for full functionality):
# - GOOGLE_OAUTH_CLIENT_ID_STAGING, GOOGLE_OAUTH_CLIENT_SECRET_STAGING
# - ANTHROPIC_API_KEY, OPENAI_API_KEY, GEMINI_API_KEY
# - NETRA_API_KEY
#
# RECOMMENDED (Improves performance/functionality):
# - REDIS_URL, LANGFUSE_PUBLIC_KEY, LANGFUSE_SECRET_KEY
#
# OPTIONAL (Enhanced features):
# - CLICKHOUSE_URL, GITHUB_OAUTH_*, GRAFANA_ADMIN_PASSWORD
# - Various feature flags and monitoring settings
#
# AUTOMATIC (Set by deployment system):
# - K_SERVICE, K_REVISION, PORT, PR_NUMBER
#
# ===============================================================================
# üîí SECURITY NOTES FOR STAGING
# ===============================================================================
#
# 1. All secrets marked with [GCP_SECRETS] are loaded from Google Secret Manager
# 2. Never commit real secrets to git - use this template as reference only
# 3. Staging secrets should be different from production secrets
# 4. OAuth redirect URIs must be configured in Google/GitHub console for staging domains
# 5. Database and Redis should use staging-specific instances, not production
#
# ===============================================================================