# Staging Test Environment Configuration
# Generated by setup_staging_tests.py
# This file configures tests to use GCP staging services

# Core environment
ENVIRONMENT=staging
TEST_MODE=true
STAGING_ENV=true
USE_STAGING_SERVICES=true
DISABLE_LOCAL_DOCKER=true

# GCP Project Configuration  
GCP_PROJECT_ID=netra-staging

# Service URLs (GCP Cloud Run)
# CRITICAL: Updated to use *.netrasystems.ai domains (not *.staging.netrasystems.ai)
# This prevents SSL certificate failures and matches load balancer configuration
NETRA_BACKEND_URL=https://staging.netrasystems.ai
AUTH_SERVICE_URL=https://staging.netrasystems.ai
FRONTEND_URL=https://staging.netrasystems.ai
NETRA_API_URL=https://staging.netrasystems.ai
WEBSOCKET_URL=wss://api-staging.netrasystems.ai/api/v1/websocket

# Database Configuration (Cloud SQL)
# Note: These are placeholders - actual values come from Google Secret Manager
DATABASE_URL=postgresql://staging_user:staging_password@staging-cloudsql:5432/netra_staging
POSTGRES_HOST=staging-cloudsql-host
POSTGRES_PORT=5432
POSTGRES_DB=netra_staging  
POSTGRES_USER=staging_user
POSTGRES_PASSWORD=staging_password

# Redis Configuration (Memorystore)
# Note: These are placeholders - actual values come from Google Secret Manager
REDIS_URL=redis://staging-memorystore:6379/0
REDIS_HOST=staging-memorystore-host
REDIS_PORT=6379
REDIS_PASSWORD=staging_redis_password
REDIS_MODE=production

# ClickHouse Configuration
CLICKHOUSE_HOST=xedvrr4c3r.us-central1.gcp.clickhouse.cloud
CLICKHOUSE_PORT=8443
CLICKHOUSE_USER=default
CLICKHOUSE_DB=default
CLICKHOUSE_SECURE=true
CLICKHOUSE_PASSWORD=staging_clickhouse_password

# Authentication Configuration
JWT_ALGORITHM=HS256
JWT_ACCESS_EXPIRY_MINUTES=15
JWT_REFRESH_EXPIRY_DAYS=7
AUTH_SERVICE_ENABLED=true
FORCE_HTTPS=true

# WebSocket Configuration for staging
WEBSOCKET_CONNECTION_TIMEOUT=240
WEBSOCKET_HEARTBEAT_INTERVAL=15
WEBSOCKET_HEARTBEAT_TIMEOUT=45
WEBSOCKET_CLEANUP_INTERVAL=60

# Test Configuration
BYPASS_STARTUP_VALIDATION=true
SKIP_DOCKER_HEALTH_CHECKS=true
INTEGRATION_TEST_MODE=staging

# EMERGENCY CONFIGURATION: Golden Path Infrastructure Remediation (Issue #1278)
# Added 2025-09-16 for immediate test execution capability restoration
DATABASE_TIMEOUT=600
DATABASE_POOL_SIZE=50
DATABASE_MAX_OVERFLOW=50
DATABASE_POOL_TIMEOUT=600
REDIS_TIMEOUT=600
CLICKHOUSE_TIMEOUT=600

# EMERGENCY: Enhanced WebSocket timeouts for infrastructure reliability
WEBSOCKET_CONNECTION_TIMEOUT=600
WEBSOCKET_HEARTBEAT_TIMEOUT=120

# EMERGENCY DEVELOPMENT BYPASS: Enable immediate test execution (EXPIRES 2025-09-18)
EMERGENCY_DEVELOPMENT_MODE=true
BYPASS_INFRASTRUCTURE_VALIDATION=true
SKIP_CAPACITY_CHECKS=true
DEVELOPMENT_TEAM_BYPASS=true
EMERGENCY_BYPASS_EXPIRY=2025-09-18

# Development overrides disabled
DISABLE_LOCAL_ENV_OVERRIDE=true
