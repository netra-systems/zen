<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Netra AI | Data Flow Visualization</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style id="dynamic-animations"></style>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            overflow-x: hidden;
        }

        .glow-blue {
            box-shadow: 0 0 10px 2px rgba(59, 130, 246, 0.5), 0 0 20px 5px rgba(59, 130, 246, 0.3);
        }

        .glow-cyan {
            box-shadow: 0 0 12px 3px rgba(34, 211, 238, 0.6), 0 0 24px 6px rgba(34, 211, 238, 0.4);
        }
        
        .glow-green {
             box-shadow: 0 0 10px 2px rgba(74, 222, 128, 0.5), 0 0 20px 5px rgba(74, 222, 128, 0.3);
        }

        @keyframes pulse-glow {
            0%, 100% {
                transform: scale(1);
                opacity: 0.7;
            }
            50% {
                transform: scale(1.05);
                opacity: 1;
            }
        }
        
        .animate-pulse-glow {
            animation: pulse-glow 2.5s infinite ease-in-out;
        }

        .data-packet, .code-packet {
            position: absolute;
            opacity: 0;
            animation-duration: 4s;
            animation-timing-function: ease-in-out;
            animation-fill-mode: forwards;
            z-index: 20;
        }

        .data-packet {
            width: 12px;
            height: 12px;
            border-radius: 9999px;
            background-color: #22d3ee;
            animation-name: flow-to-netra;
        }

        .code-packet {
            width: 32px;
            height: 24px;
            border-radius: 4px;
            background-color: #f0fdf4;
            border: 1px solid #4ade80;
            font-size: 8px;
            padding: 2px;
            color: #16a34a;
            animation-name: flow-to-inference;
        }
        .code-packet::before {
            content: '{...}';
        }

        #path-svg-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: visible;
            z-index: 0;
        }
    </style>
</head>
<body class="bg-slate-900 text-white flex items-center justify-center min-h-screen p-4 sm:p-6 lg:p-8">

    <div class="w-full max-w-7xl mx-auto">
        <header class="text-center mb-12 md:mb-16">
            <h1 class="text-3xl sm:text-4xl md:text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500">Netra AI Continuous Optimization Loop</h1>
            <p class="text-slate-400 mt-2 md:text-lg max-w-3xl mx-auto">Visualizing the real-time data analysis and deployment pipeline.</p>
        </header>

        <!-- Main Grid Layout -->
        <div id="main-grid" class="relative grid grid-cols-1 lg:grid-cols-3 gap-y-16 lg:gap-x-8 lg:gap-y-0 items-center">
            
            <svg id="path-svg-container">
                <path id="svg-path-1" stroke-dasharray="5, 5" class="stroke-slate-500" stroke-width="2" fill="none"/>
                <path id="svg-path-2" stroke-dasharray="5, 5" class="stroke-slate-500" stroke-width="2" fill="none"/>
            </svg>

            <!-- Column 1: Your AI Stack -->
            <div id="customer-stack" class="relative z-10 bg-slate-800/50 backdrop-blur-sm p-6 rounded-xl border border-slate-700 text-center">
                <div class="flex justify-center items-center gap-4 mb-4">
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-blue-400"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
                    <h2 class="text-xl font-bold text-slate-100">Your AI Stack</h2>
                </div>
                <p class="text-slate-400 mb-6 text-sm">Data is securely streamed from cleaned tables in your ClickHouse.</p>
                <div class="flex items-center justify-center gap-3 bg-slate-900 p-4 rounded-lg">
                   <svg class="w-7 h-7" viewBox="0 0 256 256" xmlns="http://www.w3.org/2000/svg"><path d="M0 65.16v125.67h65.16V65.16H0zm190.84 0v125.67H256V65.16h-65.16zM95.42 0v256h65.16V0H95.42z" fill="#ffcc01"></path></svg>
                    <div>
                        <h3 class="font-semibold text-white">Logs (e.g. ClickHouse)</h3>
                        <p class="text-xs text-slate-400">Existing Log Telemetry (Any Source)</p>
                    </div>
                </div>
            </div>

            <!-- Column 2: Netra Apex -->
            <div id="netra-stack" class="relative z-10 bg-slate-800/50 backdrop-blur-sm p-6 rounded-xl border border-slate-700 flex flex-col gap-4">
                <div class="flex justify-center items-center gap-4 mb-2 text-center">
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-cyan-400"><path d="M2.7 10.3a1 1 0 0 0 0 1.4l8.6 8.6a1 1 0 0 0 1.4 0l8.6-8.6a1 1 0 0 0 0-1.4L12.7 1.7a1 1 0 0 0-1.4 0z"></path></svg>
                    <h2 class="text-xl font-bold text-slate-100">Netra Apex</h2>
                </div>
                <!-- Analysis Steps -->
                <div id="step-ingestion" class="flex items-center gap-4 p-3 bg-slate-900 rounded-lg transition-all duration-300">
                    <div class="bg-cyan-900/50 p-2 rounded-full"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-cyan-400"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path></svg></div>
                    <div>
                        <h4 class="font-semibold text-white">Data Ingestion</h4>
                        <p class="text-xs text-slate-400">Securely syncs data to Netra's ClickHouse.</p>
                    </div>
                </div>
                <div id="step-analysis" class="flex items-center gap-4 p-3 bg-slate-900 rounded-lg transition-all duration-300">
                    <div class="bg-cyan-900/50 p-2 rounded-full"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-cyan-400"><path d="M21.21 15.89A10 10 0 1 1 8 2.83"></path><path d="M22 12A10 10 0 0 0 12 2v10z"></path></svg></div>
                    <div>
                        <h4 class="font-semibold text-white">Analysis & Modeling</h4>
                        <p class="text-xs text-slate-400">Identifies performance opportunities.</p>
                    </div>
                </div>
                <div id="step-config" class="flex items-center gap-4 p-3 bg-slate-900 rounded-lg transition-all duration-300">
                    <div class="bg-cyan-900/50 p-2 rounded-full"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-cyan-400"><path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"></path></svg></div>
                    <div>
                        <h4 class="font-semibold text-white">Config & Code Generation</h4>
                        <p class="text-xs text-slate-400">Generates optimized parameters and patches.</p>
                    </div>
                </div>
            </div>

            <!-- Column 3: Inference Stack -->
            <div id="inference-stack" class="relative z-10 bg-slate-800/50 backdrop-blur-sm p-6 rounded-xl border border-slate-700 text-center">
                 <div class="flex justify-center items-center gap-4 mb-4">
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-green-400"><rect x="2" y="2" width="20" height="20" rx="2.18" ry="2.18"></rect><line x1="7" y1="2" x2="7" y2="22"></line><line x1="17" y1="2" x2="17" y2="22"></line><line x1="2" y1="12" x2="22" y2="12"></line><line x1="2" y1="7" x2="7" y2="7"></line><line x1="2" y1="17" x2="7" y2="17"></line><line x1="17" y1="17" x2="22" y2="17"></line><line x1="17" y1="7" x2="22" y2="7"></line></svg>
                    <h2 class="text-xl font-bold text-slate-100">Inference Stack</h2>
                </div>
                <p class="text-slate-400 mb-6 text-sm">Optimized configurations are deployable by your team or integrated via APIs and CI/CD workflows.</p>
                <div class="flex items-center justify-center gap-4 bg-slate-900 p-4 rounded-lg">
                    <img src="./vllm-logo-text-light.webp" alt="vLLM Logo" class="h-6 opacity-90" title="vLLM">
                    <img src="./openai.png" alt="Open AI" class="h-6 opacity-60" title="OpenAI">

                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- Element References ---
            const customerStack = document.getElementById('customer-stack');
            const netraStack = document.getElementById('netra-stack');
            const inferenceStack = document.getElementById('inference-stack');
            const mainGrid = document.getElementById('main-grid');
            
            const stepIngestion = document.getElementById('step-ingestion');
            const stepAnalysis = document.getElementById('step-analysis');
            const stepConfig = document.getElementById('step-config');
            
            const path1 = document.getElementById('svg-path-1');
            const path2 = document.getElementById('svg-path-2');
            const animationStyleTag = document.getElementById('dynamic-animations');

            // --- Core Logic ---
            function updatePathsAndAnimations() {
                const isMobile = window.innerWidth < 1024;
                const gridRect = mainGrid.getBoundingClientRect();
                
                const customerRect = customerStack.getBoundingClientRect();
                const netraRect = netraStack.getBoundingClientRect();
                const inferenceRect = inferenceStack.getBoundingClientRect();

                // Define connection points
                const points = {
                    customer: {
                        out: isMobile 
                            ? { x: customerRect.left + customerRect.width / 2, y: customerRect.bottom }
                            : { x: customerRect.right, y: customerRect.top + customerRect.height / 2 }
                    },
                    netra: {
                        in: isMobile 
                            ? { x: netraRect.left + netraRect.width / 2, y: netraRect.top }
                            : { x: netraRect.left, y: netraRect.top + netraRect.height / 2 },
                        out: isMobile 
                            ? { x: netraRect.left + netraRect.width / 2, y: netraRect.bottom }
                            : { x: netraRect.right, y: netraRect.top + netraRect.height / 2 }
                    },
                    inference: {
                        in: isMobile 
                            ? { x: inferenceRect.left + inferenceRect.width / 2, y: inferenceRect.top }
                            : { x: inferenceRect.left, y: inferenceRect.top + inferenceRect.height / 2 }
                    }
                };

                // Update SVG path lines (coordinates relative to the grid container)
                const path1_d = `M ${points.customer.out.x - gridRect.left} ${points.customer.out.y - gridRect.top} L ${points.netra.in.x - gridRect.left} ${points.netra.in.y - gridRect.top}`;
                const path2_d = `M ${points.netra.out.x - gridRect.left} ${points.netra.out.y - gridRect.top} L ${points.inference.in.x - gridRect.left} ${points.inference.in.y - gridRect.top}`;
                path1.setAttribute('d', path1_d);
                path2.setAttribute('d', path2_d);

                // Dynamically generate CSS keyframes for animations
                const delta1 = {
                    x: points.netra.in.x - points.customer.out.x,
                    y: points.netra.in.y - points.customer.out.y
                };
                const delta2 = {
                    x: points.inference.in.x - points.netra.out.x,
                    y: points.inference.in.y - points.netra.out.y
                };

                const keyframesCSS = `
                    @keyframes flow-to-netra {
                        0% { transform: translate(0, 0); opacity: 0; }
                        10% { opacity: 1; }
                        90% { opacity: 1; }
                        100% { transform: translate(${delta1.x}px, ${delta1.y}px); opacity: 0; }
                    }
                    @keyframes flow-to-inference {
                        0% { transform: translate(0, 0); opacity: 0; }
                        10% { opacity: 1; }
                        90% { opacity: 1; }
                        100% { transform: translate(${delta2.x}px, ${delta2.y}px); opacity: 0; }
                    }
                `;
                animationStyleTag.innerHTML = keyframesCSS;
            }

            function animateDataFlow() {
                const isMobile = window.innerWidth < 1024;
                const startPos = isMobile
                    ? { x: customerStack.offsetLeft + customerStack.offsetWidth / 2, y: customerStack.offsetTop + customerStack.offsetHeight }
                    : { x: customerStack.offsetLeft + customerStack.offsetWidth, y: customerStack.offsetTop + customerStack.offsetHeight / 2 };

                const packet = document.createElement('div');
                packet.className = 'data-packet glow-cyan';
                packet.style.left = `${startPos.x}px`;
                packet.style.top = `${startPos.y}px`;
                mainGrid.appendChild(packet);

                customerStack.classList.add('glow-blue', 'animate-pulse-glow');

                packet.addEventListener('animationend', () => {
                    packet.remove();
                    customerStack.classList.remove('glow-blue', 'animate-pulse-glow');
                    runAnalysisSequence();
                });
            }
            
            function runAnalysisSequence() {
                setTimeout(() => stepIngestion.classList.add('glow-cyan'), 0);
                setTimeout(() => stepAnalysis.classList.add('glow-cyan'), 800);
                setTimeout(() => stepConfig.classList.add('glow-cyan'), 1600);
                
                setTimeout(() => {
                    stepIngestion.classList.remove('glow-cyan');
                    stepAnalysis.classList.remove('glow-cyan');
                    stepConfig.classList.remove('glow-cyan');
                    animateDeployment();
                }, 2400);
            }

            function animateDeployment() {
                const isMobile = window.innerWidth < 1024;
                const startPos = isMobile
                    ? { x: netraStack.offsetLeft + netraStack.offsetWidth / 2, y: netraStack.offsetTop + netraStack.offsetHeight }
                    : { x: netraStack.offsetLeft + netraStack.offsetWidth, y: netraStack.offsetTop + netraStack.offsetHeight / 2 };

                const codePacket = document.createElement('div');
                codePacket.className = 'code-packet glow-green';
                codePacket.style.left = `${startPos.x}px`;
                codePacket.style.top = `${startPos.y}px`;
                mainGrid.appendChild(codePacket);

                netraStack.classList.add('glow-cyan', 'animate-pulse-glow');

                codePacket.addEventListener('animationend', () => {
                    codePacket.remove();
                    netraStack.classList.remove('glow-cyan', 'animate-pulse-glow');
                    inferenceStack.classList.add('glow-green', 'animate-pulse-glow');
                    
                    setTimeout(() => {
                        inferenceStack.classList.remove('glow-green', 'animate-pulse-glow');
                    }, 2500);
                });
            }

            // --- Initialization & Event Listeners ---
            function debounce(func, wait) {
                let timeout;
                return function executedFunction(...args) {
                    const later = () => {
                        clearTimeout(timeout);
                        func(...args);
                    };
                    clearTimeout(timeout);
                    timeout = setTimeout(later, wait);
                };
            }

            updatePathsAndAnimations();
            window.addEventListener('resize', debounce(updatePathsAndAnimations, 100));

            // Start the main animation loop
            animateDataFlow();
            setInterval(animateDataFlow, 10500);
        });
    </script>
</body>
</html>
