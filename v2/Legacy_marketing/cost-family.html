<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Netra Apex - Stop AI Cost Bleed</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #f0f4ff 0%, #e6f0ff 100%);
        }
        .cost-bar-wrapper {
            position: relative;
            width: 100%;
            perspective: 1000px;
        }
        .cost-bar {
            transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            position: relative;
            overflow: hidden;
        }
        .cost-bar::before {
            content: "ðŸ’°";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            text-align: center;
            font-size: 24px;
            opacity: 0.6;
        }
        .decay-bar {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: repeating-linear-gradient(
                45deg,
                rgba(239, 68, 68, 0.7),
                rgba(239, 68, 68, 0.7) 10px,
                rgba(220, 38, 38, 0.8) 10px,
                rgba(220, 38, 38, 0.8) 20px
            );
            transition: height 0.3s linear;
        }
        .card {
            transition: all 0.2s ease-in-out;
            border: 2px solid transparent;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            border-radius: 12px;
            overflow: hidden;
        }
        .card.selected {
            transform: translateY(-4px) scale(1.03);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1);
        }
        .optimization-card.selected {
            background: linear-gradient(to bottom right, #e0f2fe, #dbeafe);
            border-color: #4f46e5;
        }
        .habit-card.selected {
            background: linear-gradient(to bottom right, #fee2e2, #fecaca);
            border-color: #dc2626;
        }
        .party-btn.active {
            background: linear-gradient(to right, #4f46e5, #7c3aed);
            color: white;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
            transform: scale(1.05);
        }
        .switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 34px;
        }
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(to right, #9ca3af, #6b7280);
            transition: .4s;
            border-radius: 34px;
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 4px;
            bottom: 4px;
            background: linear-gradient(to bottom, #fff, #f3f4f6);
            transition: .4s;
            border-radius: 50%;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        input:checked + .slider {
            background: linear-gradient(to right, #4f46e5, #7c3aed);
        }
        input:checked + .slider:before {
            transform: translateX(26px);
        }
        @keyframes pulse {
            50% { opacity: 0.4; }
        }
        .decay-warning {
            animation: pulse 1s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        @keyframes moneyFall {
            0% { transform: translateY(-100px) rotate(0deg); opacity: 0; }
            100% { transform: translateY(100vh) rotate(360deg); opacity: 0.7; }
        }
        .savings-flash {
            animation: flash 0.5s;
        }
        @keyframes flash {
            0%, 100% { background-color: transparent; }
            50% { background-color: #dcfce7; }
        }
        .dollar-bill {
            position: absolute;
            background: #e5f5e0;
            color: #4d7c0f;
            font-weight: bold;
            padding: 2px 4px;
            border-radius: 3px;
            font-size: 12px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            z-index: 10;
        }
        .impact-bar {
            height: 6px;
            border-radius: 3px;
            margin-top: 4px;
        }
        .savings-explosion {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 100;
            display: none;
        }
        .firework {
            position: absolute;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: linear-gradient(45deg, #fde047, #f59e0b);
            opacity: 0;
        }
    </style>
</head>
<body class="text-gray-800">

    <div class="container mx-auto p-4 sm:p-6 lg:p-8 max-w-6xl">
        <header class="text-center mb-8 sm:mb-12">
            <h1 class="text-3xl sm:text-4xl font-bold text-gray-900 bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent">
                Netra Apex: Stop AI Cost Bleed
            </h1>
            <p class="mt-3 text-lg text-gray-600 max-w-2xl mx-auto">
                Good choices reduce costs, but without continuous optimization, savings decay like cash burning in your pocket.
            </p>
        </header>

        <div class="bg-white p-4 sm:p-6 md:p-8 rounded-2xl shadow-xl border border-gray-200">
            <!-- Controls -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8 items-center mb-6 md:mb-8">
                <div>
                    <h2 class="text-lg sm:text-xl font-semibold mb-3 text-center">1. Your Workload Size</h2>
                    <div id="party-size-selector" class="flex flex-wrap justify-center gap-2 bg-gray-100 p-2 rounded-xl max-w-md mx-auto">
                        <button class="party-btn flex-1 min-w-[120px] p-3 rounded-lg font-semibold transition" data-cost="50000">
                            <i class="fas fa-user mr-2"></i>Solo Dev
                        </button>
                        <button class="party-btn flex-1 min-w-[120px] p-3 rounded-lg font-semibold transition active" data-cost="125000">
                            <i class="fas fa-users mr-2"></i>Startup
                        </button>
                        <button class="party-btn flex-1 min-w-[120px] p-3 rounded-lg font-semibold transition" data-cost="500000">
                            <i class="fas fa-building mr-2"></i>Enterprise
                        </button>
                    </div>
                </div>
                <div class="text-center mt-4 md:mt-0">
                    <h2 class="text-lg sm:text-xl font-semibold mb-3">2. Prevent Cost Decay</h2>
                    <div class="flex items-center justify-center gap-3 sm:gap-4">
                        <span class="font-semibold text-gray-500">Manual Fixes</span>
                        <label class="switch">
                            <input type="checkbox" id="netra-apex-toggle" checked>
                            <span class="slider"></span>
                        </label>
                        <span class="font-bold text-indigo-600 flex items-center">
                            Netra Apex <i class="fas fa-bolt ml-2 text-yellow-500"></i>
                        </span>
                    </div>
                    <p class="text-xs text-gray-500 mt-2">Automated optimization that never sleeps</p>
                </div>
            </div>

            <!-- Visualization -->
            <div class="bg-gradient-to-br from-gray-50 to-gray-100 p-4 sm:p-6 rounded-xl border border-gray-200 mb-6">
                <div class="h-64 sm:h-72 flex items-end justify-center gap-6 sm:gap-12 text-center">
                    <div class="cost-bar-wrapper w-32 sm:w-40">
                        <div id="original-cost-bar" class="cost-bar w-full bg-gradient-to-t from-red-500 to-red-400 rounded-t-lg mx-auto" style="height: 100%;"></div>
                        <p class="mt-3 font-bold text-lg sm:text-xl" id="original-cost-label">$125,000</p>
                        <p class="text-sm text-gray-500">Potential Cost</p>
                    </div>
                    <div class="cost-bar-wrapper w-32 sm:w-40">
                        <div id="optimized-cost-bar" class="cost-bar w-full bg-gradient-to-t from-green-500 to-green-400 rounded-t-lg mx-auto relative" style="height: 100%;">
                            <div id="decay-bar" class="decay-bar" style="height: 0%;"></div>
                        </div>
                        <p class="mt-3 font-bold text-lg sm:text-xl text-green-600" id="optimized-cost-label">$125,000</p>
                        <p class="text-sm text-gray-500">Your Cost</p>
                    </div>
                </div>
                
                <div id="decay-warning-container" class="text-center mt-4 h-12 flex items-center justify-center">
                    <!-- Warning message will be injected here -->
                </div>
                
                <div id="savings-container" class="bg-gradient-to-r from-green-100 to-emerald-100 p-4 rounded-xl mt-4 text-center max-w-md mx-auto border border-green-200 savings-flash">
                    <p class="font-bold text-lg sm:text-xl">
                        Total Savings: <span id="savings-label" class="text-green-700">$0 (0%)</span>
                    </p>
                    <p id="savings-description" class="text-sm text-gray-600 mt-1">
                        Enough to hire <span class="font-semibold">0 engineers</span> for a month
                    </p>
                </div>
            </div>

            <!-- Step 3: Optimizations & Habits -->
            <div class="mt-8 sm:mt-10">
                <h2 class="text-2xl font-semibold mb-6 text-center">3. AI Buffet - Choose Wisely</h2>
                <p class="text-center text-gray-600 mb-6 max-w-2xl mx-auto">
                    Every choice impacts your costs. Savings decay without continuous optimization.
                </p>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 sm:gap-8">
                    <div class="bg-gradient-to-br from-indigo-50 to-blue-50 p-4 sm:p-6 rounded-xl border border-indigo-100">
                        <h3 class="font-semibold text-lg text-center mb-4 text-indigo-600">
                            <i class="fas fa-heart-circle-check mr-2"></i>Optimization Dishes (Cost Savers)
                        </h3>
                        <div id="optimizations-grid" class="grid grid-cols-2 sm:grid-cols-3 gap-3 sm:gap-4"></div>
                    </div>
                    
                    <div class="bg-gradient-to-br from-rose-50 to-red-50 p-4 sm:p-6 rounded-xl border border-rose-100">
                        <h3 class="font-semibold text-lg text-center mb-4 text-rose-600">
                            <i class="fas fa-skull-crossbones mr-2"></i>Cost Traps (Cost Adders)
                        </h3>
                        <div id="habits-grid" class="grid grid-cols-2 sm:grid-cols-3 gap-3 sm:gap-4"></div>
                    </div>
                </div>
            </div>
            
            <!-- ICP Proof Points -->
            <div class="mt-8 sm:mt-10 bg-gradient-to-br from-gray-50 to-gray-100 p-5 rounded-xl border border-gray-200">
                <h3 class="font-semibold text-lg text-center mb-4 text-gray-700">
                    <i class="fas fa-medal mr-2 text-amber-500"></i>Trusted by AI Leaders
                </h3>
                <div class="grid grid-cols-2 sm:grid-cols-4 gap-4 text-center">
                    <div class="bg-white p-3 rounded-lg border border-gray-200">
                        <div class="text-indigo-600 font-bold text-2xl">41%</div>
                        <div class="text-xs text-gray-600">Avg. cost reduction</div>
                    </div>
                    <div class="bg-white p-3 rounded-lg border border-gray-200">
                        <div class="text-indigo-600 font-bold text-2xl">24h</div>
                        <div class="text-xs text-gray-600">To first savings</div>
                    </div>
                    <div class="bg-white p-3 rounded-lg border border-gray-200">
                        <div class="text-indigo-600 font-bold text-2xl">70%</div>
                        <div class="text-xs text-gray-600">Less decay</div>
                    </div>
                    <div class="bg-white p-3 rounded-lg border border-gray-200">
                        <div class="text-indigo-600 font-bold text-2xl">0</div>
                        <div class="text-xs text-gray-600">Code changes</div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="text-center mt-8 text-sm text-gray-500">
            <p>Stop the AI cost bleed. Get your personalized savings report in minutes.</p>
            <button class="mt-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-semibold py-2 px-6 rounded-lg shadow-md hover:shadow-lg transition">
                Generate Savings Report <i class="fas fa-arrow-right ml-2"></i>
            </button>
        </div>
    </div>

    <div id="savings-explosion" class="savings-explosion"></div>

    <script>
        // Updated buffet items with more relevant options
        const healthyChoices = [
            { name: "Prefix Caching", icon: "fa-layer-group", savings: 0.28, description: "Reuses common prompt parts", impact: "High" },
            { name: "Model Right-Sizing", icon: "fa-down-left-and-up-right-to-center", savings: 0.35, description: "Match models to task complexity", impact: "Critical" },
            { name: "Quantization", icon: "fa-compress", savings: 0.40, description: "2-4x speed boost, same quality", impact: "High" },
            { name: "Token Budgeting", icon: "fa-coins", savings: 0.22, description: "Enforce max token limits", impact: "Medium" },
            { name: "Context Trimming", icon: "fa-scissors", savings: 0.18, description: "Auto-remove unneeded history", impact: "High" },
            { name: "Structured Outputs", icon: "fa-code", savings: 0.15, description: "Force JSON/XML outputs", impact: "Medium" },
            { name: "Latency Optimization", icon: "fa-gauge-high", savings: 0.25, description: "Route to fastest endpoints", impact: "High" },
            { name: "Batch Processing", icon: "fa-object-group", savings: 0.30, description: "Process multiple requests together", impact: "High" },
            { name: "Adaptive Retries", icon: "fa-rotate", savings: 0.12, description: "Smart retry logic for errors", impact: "Low" },
        ];
        
        const unhealthyChoices = [
            { name: "Oversized Models", icon: "fa-truck-monster", savings: -0.50, description: "Using GPT-4 for simple tasks", impact: "Critical" },
            { name: "Ignoring Updates", icon: "fa-calendar-times", savings: -0.25, description: "Using outdated model versions", impact: "High" },
            { name: "Prompt Bloat", icon: "fa-file-word", savings: -0.35, description: "Sending unnecessary context", impact: "High" },
            { name: "No Caching", icon: "fa-memory", savings: -0.30, description: "Recomputing identical requests", impact: "High" },
            { name: "Default Configs", icon: "fa-sliders", savings: -0.20, description: "Not tuning temperature/top_p", impact: "Medium" },
            { name: "Ignoring Latency", icon: "fa-hourglass-half", savings: -0.15, description: "Letting slow responses pile up", impact: "Medium" },
            { name: "Token Padding", icon: "fa-ruler-combined", savings: -0.18, description: "Overly long max_tokens setting", impact: "Medium" },
            { name: "Unoptimized RAG", icon: "fa-magnifying-glass", savings: -0.40, description: "Inefficient retrieval patterns", impact: "Critical" },
            { name: "Redundant Calls", icon: "fa-repeat", savings: -0.22, description: "Multiple LLM calls for one task", impact: "High" },
        ];

        // DOM elements
        const partySelector = document.getElementById('party-size-selector');
        const optimizationsGrid = document.getElementById('optimizations-grid');
        const habitsGrid = document.getElementById('habits-grid');
        const apexToggle = document.getElementById('netra-apex-toggle');
        
        const originalCostBar = document.getElementById('original-cost-bar');
        const optimizedCostBar = document.getElementById('optimized-cost-bar');
        const decayBar = document.getElementById('decay-bar');
        
        const originalCostLabel = document.getElementById('original-cost-label');
        const optimizedCostLabel = document.getElementById('optimized-cost-label');
        const savingsLabel = document.getElementById('savings-label');
        const savingsDescription = document.getElementById('savings-description');
        const decayWarningContainer = document.getElementById('decay-warning-container');
        const savingsContainer = document.getElementById('savings-container');
        const savingsExplosion = document.getElementById('savings-explosion');

        let baseCost = 125000;
        let regressionInterval = null;
        let currentOptimizedCost = baseCost;
        let lastSavings = 0;

        function formatCurrency(value) {
            return new Intl.NumberFormat('en-US', { 
                style: 'currency', 
                currency: 'USD', 
                minimumFractionDigits: 0,
                maximumFractionDigits: value < 1000 ? 0 : 0
            }).format(value);
        }
        
        function calculateCost() {
            let potentialCost = baseCost;
            
            // Apply cost adders first (unhealthy choices)
            const selectedHabits = document.querySelectorAll('.habit-card.selected');
            selectedHabits.forEach(card => {
                potentialCost *= (1 - parseFloat(card.dataset.savings));
            });
            
            let optimizedCost = potentialCost;

            // Apply cost savers (healthy choices)
            const selectedOptimizations = document.querySelectorAll('.optimization-card.selected');
            selectedOptimizations.forEach(card => {
                optimizedCost *= (1 - parseFloat(card.dataset.savings));
            });

            return { potentialCost, optimizedCost };
        }

        function updateUI() {
            const { potentialCost, optimizedCost } = calculateCost();
            currentOptimizedCost = optimizedCost;
            
            originalCostLabel.textContent = formatCurrency(potentialCost);
            
            const totalSavings = potentialCost - optimizedCost;
            const savingsPercentage = potentialCost > 0 ? (totalSavings / potentialCost) * 100 : 0;
            
            optimizedCostLabel.textContent = formatCurrency(optimizedCost);
            savingsLabel.textContent = `${formatCurrency(totalSavings)} (${savingsPercentage.toFixed(0)}%)`;
            
            // Dramatic savings description
            const engineers = Math.floor(totalSavings / 15000);
            if (engineers > 0) {
                savingsDescription.innerHTML = `Enough to hire <span class="font-bold">${engineers} engineer${engineers > 1 ? 's' : ''}</span> for a month`;
            } else if (totalSavings > 5000) {
                savingsDescription.textContent = "Enough for a team offsite or new hardware";
            } else if (totalSavings > 0) {
                savingsDescription.textContent = "Small savings add up over time - keep going!";
            } else {
                savingsDescription.textContent = "Select optimization dishes to start saving";
            }
            
            // Flash savings container when savings increase
            if (totalSavings > lastSavings) {
                savingsContainer.classList.remove('savings-flash');
                void savingsContainer.offsetWidth; // Trigger reflow
                savingsContainer.classList.add('savings-flash');
                
                // Show explosion animation for significant savings
                if (totalSavings - lastSavings > baseCost * 0.1) {
                    showSavingsExplosion();
                }
            }
            lastSavings = totalSavings;

            // Visual cost bars
            const maxCost = Math.max(baseCost, potentialCost);
            const originalBarHeight = maxCost > 0 ? Math.min((potentialCost / maxCost) * 100, 100) : 0;
            originalCostBar.style.height = `${Math.max(originalBarHeight, 2)}%`;
            
            const optimizedBarHeight = maxCost > 0 ? Math.min((optimizedCost / maxCost) * 100, 100) : 0;
            optimizedCostBar.style.height = `${Math.max(optimizedBarHeight, 2)}%`;
            
            // Add dollar bills to the cost bars for visual effect
            addDollarBills(originalCostBar, potentialCost, maxCost);
            addDollarBills(optimizedCostBar, optimizedCost, maxCost);
            
            // Handle cost regression visualization
            handleRegression(optimizedCost, potentialCost);
        }
        
        function addDollarBills(bar, cost, maxCost) {
            // Clear existing dollar bills
            const existingBills = bar.querySelectorAll('.dollar-bill');
            existingBills.forEach(bill => bill.remove());
            
            // Add new dollar bills proportional to the cost
            const barHeight = bar.offsetHeight;
            const billCount = Math.min(Math.floor(cost / (maxCost / 20)), 20);
            
            for (let i = 0; i < billCount; i++) {
                const bill = document.createElement('div');
                bill.className = 'dollar-bill';
                bill.textContent = '$';
                bill.style.left = `${Math.random() * 80 + 10}%`;
                bill.style.top = `${Math.random() * (barHeight - 20)}px`;
                bar.appendChild(bill);
            }
        }
        
        function handleRegression(trueOptimizedCost, currentPotentialCost) {
            clearInterval(regressionInterval);
            decayWarningContainer.innerHTML = '';
            decayBar.style.height = '0%';

            if (!apexToggle.checked && trueOptimizedCost < currentPotentialCost) {
                decayWarningContainer.innerHTML = `
                    <div class="bg-red-50 border border-red-200 rounded-lg p-3 max-w-md">
                        <p class="decay-warning font-semibold text-red-700">
                            <i class="fas fa-fire mr-2"></i>Costs rising! Without Netra Apex, savings decay 1.5% every 5 seconds
                        </p>
                    </div>
                `;
                
                let regressedCost = trueOptimizedCost;
                regressionInterval = setInterval(() => {
                    if (regressedCost < currentPotentialCost) {
                        regressedCost *= 1.015; // Regress by 1.5% every interval
                        if (regressedCost > currentPotentialCost) {
                            regressedCost = currentPotentialCost;
                        }
                        
                        const maxCost = Math.max(baseCost, currentPotentialCost);
                        const optimizedBarHeight = maxCost > 0 ? (regressedCost / maxCost) * 100 : 0;
                        const decayHeight = maxCost > 0 ? ((regressedCost - trueOptimizedCost) / maxCost) * 100 : 0;

                        optimizedCostLabel.textContent = formatCurrency(regressedCost);
                        optimizedCostBar.style.height = `${Math.max(optimizedBarHeight, 2)}%`;
                        decayBar.style.height = `${decayHeight}%`;

                    } else {
                        clearInterval(regressionInterval);
                    }
                }, 500);
            }
        }
        
        function showSavingsExplosion() {
            savingsExplosion.style.display = 'block';
            
            // Create fireworks
            for (let i = 0; i < 30; i++) {
                const firework = document.createElement('div');
                firework.className = 'firework';
                firework.style.left = `${Math.random() * 100}%`;
                firework.style.top = `${Math.random() * 100}%`;
                savingsExplosion.appendChild(firework);
                
                // Animate
                setTimeout(() => {
                    firework.style.transition = 'all 0.8s ease-out';
                    firework.style.opacity = '1';
                    firework.style.transform = `scale(${Math.random() * 3 + 2})`;
                    
                    setTimeout(() => {
                        firework.style.opacity = '0';
                    }, 500);
                }, i * 50);
            }
            
            // Hide after animation
            setTimeout(() => {
                savingsExplosion.style.display = 'none';
                savingsExplosion.innerHTML = '';
            }, 1000);
        }

        function createCard(item, type) {
            const card = document.createElement('div');
            const isHealthy = type === 'healthy';
            const cardClass = isHealthy ? 'optimization-card' : 'habit-card';
            const colorClass = isHealthy ? 'text-indigo-600' : 'text-red-600';
            const iconColor = isHealthy ? 'text-indigo-500' : 'text-red-500';
            const savingsValue = Math.abs(item.savings * 100);
            const savingsText = isHealthy ? `-${savingsValue.toFixed(0)}%` : `+${savingsValue.toFixed(0)}%`;
            
            // Impact indicator (size of bar)
            const impactLevel = item.impact === 'Critical' ? 100 : 
                              item.impact === 'High' ? 80 :
                              item.impact === 'Medium' ? 60 : 40;

            card.className = `card ${cardClass} bg-white p-3 rounded-lg text-center cursor-pointer flex flex-col justify-between h-full`;
            card.dataset.savings = item.savings;
            
            card.innerHTML = `
                <div>
                    <i class="fas ${item.icon} ${iconColor} text-2xl mb-2"></i>
                    <p class="font-bold ${colorClass} text-lg">${savingsText}</p>
                    <p class="font-semibold text-sm mt-1">${item.name}</p>
                    <p class="text-xs text-gray-500 mt-1">${item.description}</p>
                </div>
                <div class="mt-3">
                    <div class="flex justify-between text-xs text-gray-500">
                        <span>Impact:</span>
                        <span class="font-semibold">${item.impact}</span>
                    </div>
                    <div class="impact-bar bg-gradient-to-r from-gray-200 to-${isHealthy ? 'green' : 'red'}-400" 
                         style="width: ${impactLevel}%"></div>
                </div>
            `;
            
            card.addEventListener('click', () => {
                card.classList.toggle('selected');
                updateUI();
            });
            
            return card;
        }

        // Initialize page
        function initPage() {
            // Create cards for both sections
            healthyChoices.forEach(opt => optimizationsGrid.appendChild(createCard(opt, 'healthy')));
            unhealthyChoices.forEach(habit => habitsGrid.appendChild(createCard(habit, 'unhealthy')));
            
            // Party size selector
            partySelector.addEventListener('click', (e) => {
                const button = e.target.closest('button');
                if (button) {
                    partySelector.querySelectorAll('.party-btn').forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                    baseCost = parseFloat(button.dataset.cost);
                    updateUI();
                }
            });
            
            // Apex toggle
            apexToggle.addEventListener('change', updateUI);
            
            // Initial calculation
            updateUI();
            
            // Pre-select some optimizations to demonstrate
            setTimeout(() => {
                const firstOptimization = optimizationsGrid.children[0];
                if (firstOptimization) firstOptimization.classList.add('selected');
                
                const secondOptimization = optimizationsGrid.children[1];
                if (secondOptimization) secondOptimization.classList.add('selected');
                
                const firstHabit = habitsGrid.children[0];
                if (firstHabit) firstHabit.classList.add('selected');
                
                updateUI();
            }, 500);
        }

        // Start when document is ready
        document.addEventListener('DOMContentLoaded', initPage);
    </script>

</body>
</html>