import sys
import os

# Add the project root to the Python path
sys.path.insert(0, os.path.abspath(os.path.join(os.path.dirname(__file__), '..')))

from pydantic_to_typescript import generate_typescript_defs

def main():
    # The module containing your Pydantic schemas
    module = 'app.schemas'
    output_file = 'frontend/types/websockets.ts'

    # Generate the TypeScript code
    ts_code = generate_typescript_defs(module)

    # Add a header to the generated file
    header = """
// THIS FILE IS AUTO-GENERATED BY scripts/generate_frontend_types.py.
// DO NOT EDIT THIS FILE DIRECTLY.
//
"""

    with open(output_file, "w") as f:
        f.write(header + ts_code)

    print(f"Successfully generated TypeScript types to {output_file}")

if __name__ == "__main__":
    main()
