from datamodel_code_generator import generate, InputFileType
from pathlib import Path

def main():
    input_file = Path("app/schemas.py")
    output_file = Path("frontend/types/index.ts")
    
    # Generate the TypeScript code
    generate(
        input_file,
        input_file_type=InputFileType.Auto,
        output=output_file
    )

    # Add a header to the generated file
    header = """
// THIS FILE IS AUTO-GENERATED BY a-sync/scripts/generate_frontend_types.py.
// DO NOT EDIT THIS FILE DIRECTLY.
//
"""
    
    with open(output_file, "r+") as f:
        content = f.read()
        f.seek(0, 0)
        f.write(header + content)

if __name__ == "__main__":
    main()