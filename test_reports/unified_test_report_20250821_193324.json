{
  "timestamp": "20250821_193324",
  "level": "integration",
  "environment": "local",
  "services": {
    "backend": {
      "success": false,
      "duration": 12.071384191513062,
      "output": "============================= test session starts =============================\nplatform win32 -- Python 3.12.4, pytest-8.4.1, pluggy-1.6.0\nrootdir: C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\netra_backend\nconfigfile: pytest.ini\nplugins: anyio-4.9.0, Faker-37.5.3, langsmith-0.4.15, asyncio-1.1.0, cov-6.2.1, mock-3.14.1, xdist-3.8.0, html-4.1.1, json-report-1.5.0, metadata-3.1.1, timeout-2.4.0, typeguard-4.4.4\nasyncio: mode=Mode.AUTO, asyncio_default_fixture_loop_scope=session, asyncio_default_test_loop_scope=function\ncollected 144 items / 1 error\n\n=================================== ERRORS ====================================\n_____ ERROR collecting tests/agents/test_example_prompts_parameterized.py _____\nImportError while importing test module 'C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\netra_backend\\tests\\agents\\test_example_prompts_parameterized.py'.\nHint: make sure your test modules/packages have valid Python names.\nTraceback:\nC:\\Users\\antho\\miniconda3\\Lib\\importlib\\__init__.py:90: in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\ntests\\agents\\test_example_prompts_parameterized.py:34: in <module>\n    from netra_backend.tests.agents.test_example_prompts_runner import TestRunner\nE   ModuleNotFoundError: No module named 'netra_backend.tests.agents.test_example_prompts_runner'\n============================== warnings summary ===============================\n..\\..\\..\\..\\..\\AppData\\Roaming\\Python\\Python312\\site-packages\\pydantic\\_internal\\_fields.py:198\n  C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\pydantic\\_internal\\_fields.py:198: UserWarning: Field name \"schema\" in \"DataSample\" shadows an attribute in parent \"BaseModel\"\n    warnings.warn(\n\n..\\..\\..\\..\\..\\AppData\\Roaming\\Python\\Python312\\site-packages\\pydantic\\_internal\\_fields.py:198\n  C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\pydantic\\_internal\\_fields.py:198: UserWarning: Field name \"schema\" in \"DataCatalog\" shadows an attribute in parent \"BaseModel\"\n    warnings.warn(\n\napp\\agents\\base\\monitoring.py:68\napp\\agents\\base\\monitoring.py:68\napp\\agents\\base\\monitoring.py:68\n  C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\netra_backend\\app\\agents\\base\\monitoring.py:68: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).\n    \"system_start_time\": datetime.utcnow(),\n\n-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html\n=========================== short test summary info ===========================\nERROR tests/agents/test_example_prompts_parameterized.py\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!\n======================== 5 warnings, 1 error in 1.41s =========================\n",
      "errors": "--- Logging error in Loguru Handler #2 ---\nRecord was: {'elapsed': datetime.timedelta(seconds=8, microseconds=829955), 'exception': None, 'extra': {}, 'file': (name='__init__.py', path='C:\\\\Users\\\\antho\\\\miniconda3\\\\Lib\\\\logging\\\\__init__.py'), 'function': 'handle', 'level': (name='INFO', no=20, icon='\\u2139\\ufe0f'), 'line': 1028, 'message': 'Multiprocessing resources cleaned up', 'module': '__init__', 'name': 'logging', 'process': (id=8048, name='MainProcess'), 'thread': (id=54088, name='MainThread'), 'time': datetime(2025, 8, 21, 19, 32, 48, 334643, tzinfo=datetime.timezone(datetime.timedelta(days=-1, seconds=61200), 'Pacific Daylight Time'))}\nTraceback (most recent call last):\n  File \"C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\loguru\\_handler.py\", line 315, in _queued_writer\n    self._sink.write(message)\n  File \"C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\loguru\\_simple_sinks.py\", line 16, in write\n    self._stream.write(message)\nValueError: I/O operation on closed file.\n--- End of logging error ---\n"
    },
    "auth": {
      "success": false,
      "duration": 4.114995956420898,
      "output": "============================= test session starts =============================\nplatform win32 -- Python 3.12.4, pytest-8.4.1, pluggy-1.6.0\nrootdir: C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\auth_service\nconfigfile: pytest.ini\nplugins: anyio-4.9.0, Faker-37.5.3, langsmith-0.4.15, asyncio-1.1.0, cov-6.2.1, mock-3.14.1, xdist-3.8.0, html-4.1.1, json-report-1.5.0, metadata-3.1.1, timeout-2.4.0, typeguard-4.4.4\nasyncio: mode=Mode.STRICT, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function\ncollected 0 items / 1 error\n\n=================================== ERRORS ====================================\n__________________ ERROR collecting tests/base/test_base.py ___________________\nC:\\Users\\antho\\miniconda3\\Lib\\importlib\\__init__.py:90: in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n<frozen importlib._bootstrap>:1387: in _gcd_import\n    ???\n<frozen importlib._bootstrap>:1360: in _find_and_load\n    ???\n<frozen importlib._bootstrap>:1310: in _find_and_load_unlocked\n    ???\n<frozen importlib._bootstrap>:488: in _call_with_frames_removed\n    ???\n<frozen importlib._bootstrap>:1387: in _gcd_import\n    ???\n<frozen importlib._bootstrap>:1360: in _find_and_load\n    ???\n<frozen importlib._bootstrap>:1331: in _find_and_load_unlocked\n    ???\n<frozen importlib._bootstrap>:935: in _load_unlocked\n    ???\n<frozen importlib._bootstrap_external>:995: in exec_module\n    ???\n<frozen importlib._bootstrap>:488: in _call_with_frames_removed\n    ???\ntests\\base\\__init__.py:7: in <module>\n    from auth_service.tests.base.test_mixins import (\n<frozen importlib._bootstrap>:1360: in _find_and_load\n    ???\n<frozen importlib._bootstrap>:1331: in _find_and_load_unlocked\n    ???\n<frozen importlib._bootstrap>:935: in _load_unlocked\n    ???\nC:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\_pytest\\assertion\\rewrite.py:186: in exec_module\n    exec(co, module.__dict__)\ntests\\base\\test_mixins.py:11: in <module>\n    import aioredis\nC:\\Users\\antho\\miniconda3\\Lib\\site-packages\\aioredis\\__init__.py:1: in <module>\n    from aioredis.client import Redis, StrictRedis\nC:\\Users\\antho\\miniconda3\\Lib\\site-packages\\aioredis\\client.py:32: in <module>\n    from aioredis.connection import (\nC:\\Users\\antho\\miniconda3\\Lib\\site-packages\\aioredis\\connection.py:33: in <module>\n    from .exceptions import (\nC:\\Users\\antho\\miniconda3\\Lib\\site-packages\\aioredis\\exceptions.py:14: in <module>\n    class TimeoutError(asyncio.TimeoutError, builtins.TimeoutError, RedisError):\nE   TypeError: duplicate base class TimeoutError\n============================== warnings summary ===============================\nauth_core\\database\\models.py:11\n  C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\auth_service\\auth_core\\database\\models.py:11: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)\n    Base = declarative_base()\n\n-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html\n=========================== short test summary info ===========================\nERROR tests/base/test_base.py - TypeError: duplicate base class TimeoutError\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!\n========================= 1 warning, 1 error in 1.15s =========================\n",
      "errors": ""
    },
    "frontend": {
      "success": false,
      "duration": 11.88510012626648,
      "output": "",
      "errors": "ts-jest[ts-jest-transformer] (WARN) Define `ts-jest` config under `globals` is deprecated. Please do\ntransform: {\n    <transform_regex>: ['ts-jest', { /* ts-jest config goes here in Jest */ }],\n},\nSee more at https://kulshekhar.github.io/ts-jest/docs/getting-started/presets#advanced\nts-jest[ts-jest-transformer] (WARN) Define `ts-jest` config under `globals` is deprecated. Please do\ntransform: {\n    <transform_regex>: ['ts-jest', { /* ts-jest config goes here in Jest */ }],\n},\nSee more at https://kulshekhar.github.io/ts-jest/docs/getting-started/presets#advanced\nts-jest[ts-jest-transformer] (WARN) Define `ts-jest` config under `globals` is deprecated. Please do\ntransform: {\n    <transform_regex>: ['ts-jest', { /* ts-jest config goes here in Jest */ }],\n},\nSee more at https://kulshekhar.github.io/ts-jest/docs/getting-started/presets#advanced\nts-jest[ts-jest-transformer] (WARN) Define `ts-jest` config under `globals` is deprecated. Please do\ntransform: {\n    <transform_regex>: ['ts-jest', { /* ts-jest config goes here in Jest */ }],\n},\nSee more at https://kulshekhar.github.io/ts-jest/docs/getting-started/presets#advanced\nts-jest[ts-jest-transformer] (WARN) Define `ts-jest` config under `globals` is deprecated. Please do\ntransform: {\n    <transform_regex>: ['ts-jest', { /* ts-jest config goes here in Jest */ }],\n},\nSee more at https://kulshekhar.github.io/ts-jest/docs/getting-started/presets#advanced\nts-jest[ts-jest-transformer] (WARN) Define `ts-jest` config under `globals` is deprecated. Please do\ntransform: {\n    <transform_regex>: ['ts-jest', { /* ts-jest config goes here in Jest */ }],\n},\nSee more at https://kulshekhar.github.io/ts-jest/docs/getting-started/presets#advanced\nts-jest[ts-jest-transformer] (WARN) Define `ts-jest` config under `globals` is deprecated. Please do\ntransform: {\n    <transform_regex>: ['ts-jest', { /* ts-jest config goes here in Jest */ }],\n},\nSee more at https://kulshekhar.github.io/ts-jest/docs/getting-started/presets#advanced\nts-jest[ts-jest-transformer] (WARN) Define `ts-jest` config under `globals` is deprecated. Please do\ntransform: {\n    <transform_regex>: ['ts-jest', { /* ts-jest config goes here in Jest */ }],\n},\nSee more at https://kulshekhar.github.io/ts-jest/docs/getting-started/presets#advanced\nts-jest[ts-jest-transformer] (WARN) Define `ts-jest` config under `globals` is deprecated. Please do\ntransform: {\n    <transform_regex>: ['ts-jest', { /* ts-jest config goes here in Jest */ }],\n},\nSee more at https://kulshekhar.github.io/ts-jest/docs/getting-started/presets#advanced\nts-jest[ts-jest-transformer] (WARN) Define `ts-jest` config under `globals` is deprecated. Please do\ntransform: {\n    <transform_regex>: ['ts-jest', { /* ts-jest config goes here in Jest */ }],\n},\nSee more at https://kulshekhar.github.io/ts-jest/docs/getting-started/presets#advanced\nFAIL Integration Tests __tests__/integration/auth-complete.test.tsx (8.567 s)\n  Complete Authentication Flow Integration\n    OAuth Login Flow\n      \u00d7 should complete OAuth login with token validation (1073 ms)\n      \u221a should handle OAuth callback with state validation (16 ms)\n      \u00d7 should reject invalid OAuth state (1014 ms)\n    Development Mode Authentication\n      \u00d7 should auto-login in development mode (2012 ms)\n      \u00d7 should respect dev logout flag (1030 ms)\n    Logout Flow\n      \u00d7 should complete logout with full cleanup (1042 ms)\n      \u00d7 should handle logout during active session (15 ms)\n    Token Management\n      \u00d7 should validate token format and claims (14 ms)\n      \u00d7 should handle malformed tokens (15 ms)\n      \u00d7 should handle expired tokens (1028 ms)\n\n  \u25cf Complete Authentication Flow Integration \u203a OAuth Login Flow \u203a should complete OAuth login with token validation\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: {\"authorized_javascript_origins\": [\"http://localhost:3000\"], \"authorized_redirect_uris\": [\"http://localhost:3000/auth/callback\"], \"development_mode\": false, \"endpoints\": {\"callback\": \"/auth/callback\", \"login\": \"/auth/login\", \"logout\": \"/auth/logout\", \"token\": \"/auth/token\", \"user\": \"/auth/me\"}, \"google_client_id\": \"test-google-client-id\"}\n\n    Number of calls: 0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"login-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogin\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogout\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"auth-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mAuthenticated\u001b[0m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 332 |\u001b[39m   \u001b[36masync\u001b[39m \u001b[36mfunction\u001b[39m verifyOAuthLoginSuccess(mockLogin\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m) {\n     \u001b[90m 333 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 334 |\u001b[39m       expect(mockAuthService\u001b[33m.\u001b[39mhandleLogin)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(mockAuthConfig)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 335 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 336 |\u001b[39m   }\n     \u001b[90m 337 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/auth-complete.test.tsx:334:43\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Complete Authentication Flow Integration \u203a OAuth Login Flow \u203a should reject invalid OAuth state\n\n    expect(element).toHaveTextContent()\n\n    Expected element to have text content:\n      Not authenticated\n    Received:\n      Authenticated\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"login-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogin\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogout\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"auth-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mAuthenticated\u001b[0m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 383 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n     \u001b[90m 384 |\u001b[39m       \u001b[36mconst\u001b[39m authStatus \u001b[33m=\u001b[39m screen\u001b[33m.\u001b[39mgetByTestId(\u001b[32m'auth-status'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 385 |\u001b[39m       expect(authStatus)\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'Not authenticated'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 386 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 387 |\u001b[39m   }\n     \u001b[90m 388 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/auth-complete.test.tsx:385:26\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Complete Authentication Flow Integration \u203a Development Mode Authentication \u203a should auto-login in development mode\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"login-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogin\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogout\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"auth-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mAuthenticated\u001b[0m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 410 |\u001b[39m   \u001b[36masync\u001b[39m \u001b[36mfunction\u001b[39m waitForDevAutoLogin() {\n     \u001b[90m 411 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 412 |\u001b[39m       expect(mockAuthService\u001b[33m.\u001b[39mhandleDevLogin)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 413 |\u001b[39m     }\u001b[33m,\u001b[39m { timeout\u001b[33m:\u001b[39m \u001b[35m2000\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 414 |\u001b[39m   }\n     \u001b[90m 415 |\u001b[39m\u001b[0m\n\n      at timeout (__tests__/integration/auth-complete.test.tsx:412:46)\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Complete Authentication Flow Integration \u203a Development Mode Authentication \u203a should respect dev logout flag\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"login-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogin\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogout\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"auth-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mAuthenticated\u001b[0m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 440 |\u001b[39m   \u001b[36masync\u001b[39m \u001b[36mfunction\u001b[39m waitForAuthInitialization() {\n     \u001b[90m 441 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 442 |\u001b[39m       expect(mockAuthService\u001b[33m.\u001b[39mgetAuthConfig)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 443 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 444 |\u001b[39m   }\n     \u001b[90m 445 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/auth-complete.test.tsx:442:45\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Complete Authentication Flow Integration \u203a Logout Flow \u203a should complete logout with full cleanup\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: {\"authorized_javascript_origins\": [\"http://localhost:3000\"], \"authorized_redirect_uris\": [\"http://localhost:3000/auth/callback\"], \"development_mode\": false, \"endpoints\": {\"callback\": \"/auth/callback\", \"login\": \"/auth/login\", \"logout\": \"/auth/logout\", \"token\": \"/auth/token\", \"user\": \"/auth/me\"}, \"google_client_id\": \"test-google-client-id\"}\n\n    Number of calls: 0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"login-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogin\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogout\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"auth-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mAuthenticated\u001b[0m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 472 |\u001b[39m   \u001b[36masync\u001b[39m \u001b[36mfunction\u001b[39m verifyLogoutSuccess(mockLogout\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m) {\n     \u001b[90m 473 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 474 |\u001b[39m       expect(mockLogout)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(mockAuthConfig)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 475 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 476 |\u001b[39m   }\n     \u001b[90m 477 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/auth-complete.test.tsx:474:26\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Complete Authentication Flow Integration \u203a Logout Flow \u203a should handle logout during active session\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    \u001b[0m \u001b[90m 500 |\u001b[39m\n     \u001b[90m 501 |\u001b[39m   \u001b[36mfunction\u001b[39m expectSessionTerminated() {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 502 |\u001b[39m     expect(mockUseAuthStore()\u001b[33m.\u001b[39mlogout)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 503 |\u001b[39m   }\n     \u001b[90m 504 |\u001b[39m\n     \u001b[90m 505 |\u001b[39m   \u001b[36mfunction\u001b[39m expectRedirectToLogin() {\u001b[0m\n\n      at expectSessionTerminated (__tests__/integration/auth-complete.test.tsx:502:39)\n      at Object.<anonymous> (__tests__/integration/auth-complete.test.tsx:198:7)\n\n  \u25cf Complete Authentication Flow Integration \u203a Token Management \u203a should validate token format and claims\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: Any<String>\n\n    Number of calls: 0\n\n    \u001b[0m \u001b[90m 517 |\u001b[39m\n     \u001b[90m 518 |\u001b[39m   \u001b[36mfunction\u001b[39m expectTokenValidated() {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 519 |\u001b[39m     expect(jwtDecode)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(expect\u001b[33m.\u001b[39many(\u001b[33mString\u001b[39m))\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 520 |\u001b[39m   }\n     \u001b[90m 521 |\u001b[39m\n     \u001b[90m 522 |\u001b[39m   \u001b[36mfunction\u001b[39m expectClaimsExtracted() {\u001b[0m\n\n      at expectTokenValidated (__tests__/integration/auth-complete.test.tsx:519:23)\n      at Object.<anonymous> (__tests__/integration/auth-complete.test.tsx:216:7)\n\n  \u25cf Complete Authentication Flow Integration \u203a Token Management \u203a should handle malformed tokens\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    \u001b[0m \u001b[90m 532 |\u001b[39m\n     \u001b[90m 533 |\u001b[39m   \u001b[36mfunction\u001b[39m expectTokenRejected() {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 534 |\u001b[39m     expect(mockAuthService\u001b[33m.\u001b[39mremoveToken)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 535 |\u001b[39m   }\n     \u001b[90m 536 |\u001b[39m\n     \u001b[90m 537 |\u001b[39m   \u001b[36mfunction\u001b[39m expectSecurityCleanup() {\u001b[0m\n\n      at expectTokenRejected (__tests__/integration/auth-complete.test.tsx:534:41)\n      at Object.<anonymous> (__tests__/integration/auth-complete.test.tsx:230:7)\n\n  \u25cf Complete Authentication Flow Integration \u203a Token Management \u203a should handle expired tokens\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"login-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogin\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogout\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"auth-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mAuthenticated\u001b[0m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 248 |\u001b[39m       \u001b[90m// The AuthProvider should detect expired token and remove it\u001b[39m\n     \u001b[90m 249 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 250 |\u001b[39m         expect(mockAuthService\u001b[33m.\u001b[39mremoveToken)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 251 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 252 |\u001b[39m       \n     \u001b[90m 253 |\u001b[39m       \u001b[90m// Verify user remains unauthenticated\u001b[39m\u001b[0m\n\n      at __tests__/integration/auth-complete.test.tsx:250:45\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\nSummary of all failing tests\nFAIL __tests__/integration/auth-complete.test.tsx (8.567 s)\n  \u25cf Complete Authentication Flow Integration \u203a OAuth Login Flow \u203a should complete OAuth login with token validation\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: {\"authorized_javascript_origins\": [\"http://localhost:3000\"], \"authorized_redirect_uris\": [\"http://localhost:3000/auth/callback\"], \"development_mode\": false, \"endpoints\": {\"callback\": \"/auth/callback\", \"login\": \"/auth/login\", \"logout\": \"/auth/logout\", \"token\": \"/auth/token\", \"user\": \"/auth/me\"}, \"google_client_id\": \"test-google-client-id\"}\n\n    Number of calls: 0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"login-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogin\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogout\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"auth-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mAuthenticated\u001b[0m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 332 |\u001b[39m   \u001b[36masync\u001b[39m \u001b[36mfunction\u001b[39m verifyOAuthLoginSuccess(mockLogin\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m) {\n     \u001b[90m 333 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 334 |\u001b[39m       expect(mockAuthService\u001b[33m.\u001b[39mhandleLogin)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(mockAuthConfig)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 335 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 336 |\u001b[39m   }\n     \u001b[90m 337 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/auth-complete.test.tsx:334:43\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Complete Authentication Flow Integration \u203a OAuth Login Flow \u203a should reject invalid OAuth state\n\n    expect(element).toHaveTextContent()\n\n    Expected element to have text content:\n      Not authenticated\n    Received:\n      Authenticated\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"login-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogin\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogout\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"auth-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mAuthenticated\u001b[0m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 383 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n     \u001b[90m 384 |\u001b[39m       \u001b[36mconst\u001b[39m authStatus \u001b[33m=\u001b[39m screen\u001b[33m.\u001b[39mgetByTestId(\u001b[32m'auth-status'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 385 |\u001b[39m       expect(authStatus)\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'Not authenticated'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 386 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 387 |\u001b[39m   }\n     \u001b[90m 388 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/auth-complete.test.tsx:385:26\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Complete Authentication Flow Integration \u203a Development Mode Authentication \u203a should auto-login in development mode\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"login-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogin\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogout\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"auth-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mAuthenticated\u001b[0m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 410 |\u001b[39m   \u001b[36masync\u001b[39m \u001b[36mfunction\u001b[39m waitForDevAutoLogin() {\n     \u001b[90m 411 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 412 |\u001b[39m       expect(mockAuthService\u001b[33m.\u001b[39mhandleDevLogin)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 413 |\u001b[39m     }\u001b[33m,\u001b[39m { timeout\u001b[33m:\u001b[39m \u001b[35m2000\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 414 |\u001b[39m   }\n     \u001b[90m 415 |\u001b[39m\u001b[0m\n\n      at timeout (__tests__/integration/auth-complete.test.tsx:412:46)\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Complete Authentication Flow Integration \u203a Development Mode Authentication \u203a should respect dev logout flag\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"login-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogin\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogout\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"auth-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mAuthenticated\u001b[0m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 440 |\u001b[39m   \u001b[36masync\u001b[39m \u001b[36mfunction\u001b[39m waitForAuthInitialization() {\n     \u001b[90m 441 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 442 |\u001b[39m       expect(mockAuthService\u001b[33m.\u001b[39mgetAuthConfig)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 443 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 444 |\u001b[39m   }\n     \u001b[90m 445 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/auth-complete.test.tsx:442:45\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Complete Authentication Flow Integration \u203a Logout Flow \u203a should complete logout with full cleanup\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: {\"authorized_javascript_origins\": [\"http://localhost:3000\"], \"authorized_redirect_uris\": [\"http://localhost:3000/auth/callback\"], \"development_mode\": false, \"endpoints\": {\"callback\": \"/auth/callback\", \"login\": \"/auth/login\", \"logout\": \"/auth/logout\", \"token\": \"/auth/token\", \"user\": \"/auth/me\"}, \"google_client_id\": \"test-google-client-id\"}\n\n    Number of calls: 0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"login-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogin\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogout\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"auth-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mAuthenticated\u001b[0m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 472 |\u001b[39m   \u001b[36masync\u001b[39m \u001b[36mfunction\u001b[39m verifyLogoutSuccess(mockLogout\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m) {\n     \u001b[90m 473 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 474 |\u001b[39m       expect(mockLogout)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(mockAuthConfig)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 475 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 476 |\u001b[39m   }\n     \u001b[90m 477 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/auth-complete.test.tsx:474:26\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Complete Authentication Flow Integration \u203a Logout Flow \u203a should handle logout during active session\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    \u001b[0m \u001b[90m 500 |\u001b[39m\n     \u001b[90m 501 |\u001b[39m   \u001b[36mfunction\u001b[39m expectSessionTerminated() {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 502 |\u001b[39m     expect(mockUseAuthStore()\u001b[33m.\u001b[39mlogout)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 503 |\u001b[39m   }\n     \u001b[90m 504 |\u001b[39m\n     \u001b[90m 505 |\u001b[39m   \u001b[36mfunction\u001b[39m expectRedirectToLogin() {\u001b[0m\n\n      at expectSessionTerminated (__tests__/integration/auth-complete.test.tsx:502:39)\n      at Object.<anonymous> (__tests__/integration/auth-complete.test.tsx:198:7)\n\n  \u25cf Complete Authentication Flow Integration \u203a Token Management \u203a should validate token format and claims\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: Any<String>\n\n    Number of calls: 0\n\n    \u001b[0m \u001b[90m 517 |\u001b[39m\n     \u001b[90m 518 |\u001b[39m   \u001b[36mfunction\u001b[39m expectTokenValidated() {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 519 |\u001b[39m     expect(jwtDecode)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(expect\u001b[33m.\u001b[39many(\u001b[33mString\u001b[39m))\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 520 |\u001b[39m   }\n     \u001b[90m 521 |\u001b[39m\n     \u001b[90m 522 |\u001b[39m   \u001b[36mfunction\u001b[39m expectClaimsExtracted() {\u001b[0m\n\n      at expectTokenValidated (__tests__/integration/auth-complete.test.tsx:519:23)\n      at Object.<anonymous> (__tests__/integration/auth-complete.test.tsx:216:7)\n\n  \u25cf Complete Authentication Flow Integration \u203a Token Management \u203a should handle malformed tokens\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    \u001b[0m \u001b[90m 532 |\u001b[39m\n     \u001b[90m 533 |\u001b[39m   \u001b[36mfunction\u001b[39m expectTokenRejected() {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 534 |\u001b[39m     expect(mockAuthService\u001b[33m.\u001b[39mremoveToken)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 535 |\u001b[39m   }\n     \u001b[90m 536 |\u001b[39m\n     \u001b[90m 537 |\u001b[39m   \u001b[36mfunction\u001b[39m expectSecurityCleanup() {\u001b[0m\n\n      at expectTokenRejected (__tests__/integration/auth-complete.test.tsx:534:41)\n      at Object.<anonymous> (__tests__/integration/auth-complete.test.tsx:230:7)\n\n  \u25cf Complete Authentication Flow Integration \u203a Token Management \u203a should handle expired tokens\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"login-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogin\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogout\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"auth-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mAuthenticated\u001b[0m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 248 |\u001b[39m       \u001b[90m// The AuthProvider should detect expired token and remove it\u001b[39m\n     \u001b[90m 249 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 250 |\u001b[39m         expect(mockAuthService\u001b[33m.\u001b[39mremoveToken)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 251 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 252 |\u001b[39m       \n     \u001b[90m 253 |\u001b[39m       \u001b[90m// Verify user remains unauthenticated\u001b[39m\u001b[0m\n\n      at __tests__/integration/auth-complete.test.tsx:250:45\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n\nTest Suites: 1 failed, 1 of 163 total\nTests:       9 failed, 1 passed, 10 total\nSnapshots:   0 total\nTime:        10.384 s, estimated 26 s\nRan all test suites.\n"
    },
    "dev_launcher": {
      "success": false,
      "duration": 19.269798755645752,
      "output": "============================= test session starts =============================\nplatform win32 -- Python 3.12.4, pytest-8.4.1, pluggy-1.6.0\nrootdir: C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\nconfigfile: pytest.ini\nplugins: anyio-4.9.0, Faker-37.5.3, langsmith-0.4.15, asyncio-1.1.0, cov-6.2.1, mock-3.14.1, xdist-3.8.0, html-4.1.1, json-report-1.5.0, metadata-3.1.1, timeout-2.4.0, typeguard-4.4.4\nasyncio: mode=Mode.AUTO, asyncio_default_fixture_loop_scope=function, asyncio_default_test_loop_scope=function\ntimeout: 300.0s\ntimeout method: thread\ntimeout func_only: False\ncollected 22 items\n\ntests\\e2e\\test_dev_launcher_real_startup.py sF\n\n================================== FAILURES ===================================\n______ TestDevLauncherRealStartup.test_service_startup_order_validation _______\ntests\\e2e\\test_dev_launcher_real_startup.py:379: in test_service_startup_order_validation\n    assert startup_success, \"Service startup failed\"\nE   AssertionError: Service startup failed\nE   assert False\n----------------------------- Captured log setup ------------------------------\nDEBUG    asyncio:proactor_events.py:634 Using proactor: IocpProactor\nINFO     dev_launcher.service_config:service_config.py:350 Configuration loaded from C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\.dev_services.json\nINFO     dev_launcher.service_config:service_config.py:515 Loaded existing service configuration\n---------------------------- Captured stdout call -----------------------------\n\\n=== TESTING SERVICE STARTUP ORDER ===\\n\\U0001f50d DISCOVER | POSTGRESQL: sqlite+aiosqlite:///:memory:\\n\\U0001f50d DISCOVER | CLICKHOUSE: clickhouse://default:***@localhost:8123/netra_dev\\n\\U0001f50d DISCOVER | REDIS: redis://localhost:6379/0\\n\\U0001f50d WEBSOCKET | Discovered endpoint: backend_ws -> ws://localhost:8000/ws\\n\\u274c auth service NOT bound to port 8001\\n\\u2705 backend service bound to port 8000\\n\\u274c frontend service NOT bound to port 3000\n------------------------------ Captured log call ------------------------------\nINFO     dev_launcher.health_monitor:health_monitor.py:139 HealthMonitor initialized (check_interval: 30s)\nINFO     dev_launcher.health_monitor:health_monitor.py:141 Windows process verification enabled\nINFO     dev_launcher.process_manager:process_manager.py:58 ProcessManager initialized for win32\nINFO     dev_launcher.process_manager:process_manager.py:60 Enhanced Windows process tree management enabled\nINFO     dev_launcher.database_connector:database_connector.py:130 Discovered 3 database connections\nINFO     dev_launcher.websocket_validator:websocket_validator.py:78 Discovered 1 WebSocket endpoints\nINFO     dev_launcher.launcher:launcher.py:165 Signal handlers registered for graceful shutdown\n=========================== short test summary info ===========================\nSKIPPED [1] tests\\e2e\\test_dev_launcher_real_startup.py:208: Port 8000 (backend) is in use and cannot be freed\nFAILED tests/e2e/test_dev_launcher_real_startup.py::TestDevLauncherRealStartup::test_service_startup_order_validation\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!\n======================== 1 failed, 1 skipped in 14.64s ========================\n",
      "errors": "C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\_pytest\\unraisableexception.py:33: RuntimeWarning: coroutine 'DevLauncher.run' was never awaited\n  gc.collect()\nRuntimeWarning: Enable tracemalloc to get the object allocation traceback\n"
    }
  },
  "overall_success": false,
  "total_duration": 47.34127902984619
}