{
  "timestamp": "20250821_205221",
  "level": "integration",
  "environment": "local",
  "services": {
    "backend": {
      "success": false,
      "duration": 7.598686218261719,
      "output": "============================= test session starts =============================\nplatform win32 -- Python 3.12.4, pytest-8.4.1, pluggy-1.6.0\nrootdir: C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\netra_backend\nconfigfile: pytest.ini\nplugins: anyio-4.9.0, Faker-37.5.3, langsmith-0.4.15, asyncio-1.1.0, cov-6.2.1, mock-3.14.1, xdist-3.8.0, html-4.1.1, json-report-1.5.0, metadata-3.1.1, timeout-2.4.0, typeguard-4.4.4\nasyncio: mode=Mode.AUTO, asyncio_default_fixture_loop_scope=session, asyncio_default_test_loop_scope=function\ncollected 255 items / 1 error\n\n=================================== ERRORS ====================================\n____________ ERROR collecting tests/agents/test_llm_agent_basic.py ____________\nImportError while importing test module 'C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\netra_backend\\tests\\agents\\test_llm_agent_basic.py'.\nHint: make sure your test modules/packages have valid Python names.\nTraceback:\nC:\\Users\\antho\\miniconda3\\Lib\\importlib\\__init__.py:90: in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\ntests\\agents\\test_llm_agent_basic.py:27: in <module>\n    from netra_backend.tests.test_fixtures import (\nE   ModuleNotFoundError: No module named 'netra_backend.tests.test_fixtures'\n============================== warnings summary ===============================\n..\\..\\..\\..\\..\\AppData\\Roaming\\Python\\Python312\\site-packages\\pydantic\\_internal\\_fields.py:198\n  C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\pydantic\\_internal\\_fields.py:198: UserWarning: Field name \"schema\" in \"DataSample\" shadows an attribute in parent \"BaseModel\"\n    warnings.warn(\n\n..\\..\\..\\..\\..\\AppData\\Roaming\\Python\\Python312\\site-packages\\pydantic\\_internal\\_fields.py:198\n  C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\pydantic\\_internal\\_fields.py:198: UserWarning: Field name \"schema\" in \"DataCatalog\" shadows an attribute in parent \"BaseModel\"\n    warnings.warn(\n\napp\\agents\\base\\monitoring.py:68\napp\\agents\\base\\monitoring.py:68\napp\\agents\\base\\monitoring.py:68\n  C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\netra_backend\\app\\agents\\base\\monitoring.py:68: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).\n    \"system_start_time\": datetime.utcnow(),\n\n-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html\n=========================== short test summary info ===========================\nERROR tests/agents/test_llm_agent_basic.py\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!\n======================== 5 warnings, 1 error in 0.62s =========================\n",
      "errors": "--- Logging error in Loguru Handler #2 ---\nRecord was: {'elapsed': datetime.timedelta(seconds=5, microseconds=110808), 'exception': None, 'extra': {}, 'file': (name='__init__.py', path='C:\\\\Users\\\\antho\\\\miniconda3\\\\Lib\\\\logging\\\\__init__.py'), 'function': 'handle', 'level': (name='INFO', no=20, icon='\\u2139\\ufe0f'), 'line': 1028, 'message': 'Multiprocessing resources cleaned up', 'module': '__init__', 'name': 'logging', 'process': (id=45816, name='MainProcess'), 'thread': (id=21788, name='MainThread'), 'time': datetime(2025, 8, 21, 20, 51, 43, 82904, tzinfo=datetime.timezone(datetime.timedelta(days=-1, seconds=61200), 'Pacific Daylight Time'))}\nTraceback (most recent call last):\n  File \"C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\loguru\\_handler.py\", line 315, in _queued_writer\n    self._sink.write(message)\n  File \"C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\loguru\\_simple_sinks.py\", line 16, in write\n    self._stream.write(message)\nValueError: I/O operation on closed file.\n--- End of logging error ---\n"
    },
    "auth": {
      "success": false,
      "duration": 5.526342868804932,
      "output": "============================= test session starts =============================\nplatform win32 -- Python 3.12.4, pytest-8.4.1, pluggy-1.6.0\nrootdir: C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\auth_service\nconfigfile: pytest.ini\nplugins: anyio-4.9.0, Faker-37.5.3, langsmith-0.4.15, asyncio-1.1.0, cov-6.2.1, mock-3.14.1, xdist-3.8.0, html-4.1.1, json-report-1.5.0, metadata-3.1.1, timeout-2.4.0, typeguard-4.4.4\nasyncio: mode=Mode.STRICT, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function\ncollected 161 items\n\ntests\\integration\\test_auth_oauth_errors.py F\n\n================================== FAILURES ===================================\n__________ TestOAuthErrorHandling.test_oauth_invalid_state_parameter __________\n\nself = <test_auth_oauth_errors.TestOAuthErrorHandling object at 0x000001B965DB6480>\n\n    @pytest.mark.asyncio\n    async def test_oauth_invalid_state_parameter(self):\n        \"\"\"\n        Test OAuth with invalid state parameter\n    \n        BVJ: OAuth security compliance ($30K+ MRR protection)\n        - Validates state parameter security and CSRF protection\n        - Tests invalid state rejection for OAuth security\n        - Prevents OAuth security vulnerabilities in production\n        \"\"\"\n        # Test with various invalid state scenarios\n        invalid_states = [\n            \"invalid_state\",\n            \"\",\n            \"a\" * 100,  # Very long state\n            \"state with spaces\",\n            \"state/with/slashes\",\n            None\n        ]\n    \n        for invalid_state in invalid_states:\n            if invalid_state is None:\n                url = \"/auth/callback?code=test_code\"\n            else:\n                url = f\"/auth/callback?code=test_code&state={invalid_state}\"\n    \n            response = client.get(url)\n    \n            # Should handle gracefully (current implementation doesn't validate state)\n            # This test documents the need for state validation\n>           assert response.status_code in [302, 401, 400, 500]\nE           assert 422 in [302, 401, 400, 500]\nE            +  where 422 = <Response [422 Unprocessable Entity]>.status_code\n\ntests\\integration\\test_auth_oauth_errors.py:106: AssertionError\n------------------------------ Captured log call ------------------------------\nERROR    auth_service.auth_core.routes.auth_routes:auth_routes.py:429 Token exchange failed: 401 - {\n  \"error\": \"invalid_client\",\n  \"error_description\": \"The OAuth client was not found.\"\n}\nERROR    auth_service.auth_core.routes.auth_routes:auth_routes.py:501 OAuth callback error: 401: Failed to exchange code\nERROR    auth_service.auth_core.routes.auth_routes:auth_routes.py:429 Token exchange failed: 401 - {\n  \"error\": \"invalid_client\",\n  \"error_description\": \"The OAuth client was not found.\"\n}\nERROR    auth_service.auth_core.routes.auth_routes:auth_routes.py:501 OAuth callback error: 401: Failed to exchange code\nERROR    auth_service.auth_core.routes.auth_routes:auth_routes.py:429 Token exchange failed: 401 - {\n  \"error\": \"invalid_client\",\n  \"error_description\": \"The OAuth client was not found.\"\n}\nERROR    auth_service.auth_core.routes.auth_routes:auth_routes.py:501 OAuth callback error: 401: Failed to exchange code\nERROR    auth_service.auth_core.routes.auth_routes:auth_routes.py:429 Token exchange failed: 401 - {\n  \"error\": \"invalid_client\",\n  \"error_description\": \"The OAuth client was not found.\"\n}\nERROR    auth_service.auth_core.routes.auth_routes:auth_routes.py:501 OAuth callback error: 401: Failed to exchange code\nERROR    auth_service.auth_core.routes.auth_routes:auth_routes.py:429 Token exchange failed: 401 - {\n  \"error\": \"invalid_client\",\n  \"error_description\": \"The OAuth client was not found.\"\n}\nERROR    auth_service.auth_core.routes.auth_routes:auth_routes.py:501 OAuth callback error: 401: Failed to exchange code\n============================== warnings summary ===============================\nauth_core\\database\\models.py:11\n  C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\auth_service\\auth_core\\database\\models.py:11: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)\n    Base = declarative_base()\n\ntests\\config\\test_env.py:16\n  C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\auth_service\\tests\\config\\test_env.py:16: PytestCollectionWarning: cannot collect test class 'TestEnvironment' because it has a __init__ constructor (from: tests/base/test_base.py)\n    class TestEnvironment:\n\ntests\\config\\test_settings.py:85\n  C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\auth_service\\tests\\config\\test_settings.py:85: PytestCollectionWarning: cannot collect test class 'TestSettings' because it has a __init__ constructor (from: tests/base/test_base.py)\n    @dataclass\n\ntests\\config\\test_env.py:16\n  C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\auth_service\\tests\\config\\test_env.py:16: PytestCollectionWarning: cannot collect test class 'TestEnvironment' because it has a __init__ constructor (from: tests/config/test_env.py)\n    class TestEnvironment:\n\ntests\\config\\test_settings.py:85\n  C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\auth_service\\tests\\config\\test_settings.py:85: PytestCollectionWarning: cannot collect test class 'TestSettings' because it has a __init__ constructor (from: tests/config/test_settings.py)\n    @dataclass\n\ntests\\database\\test_config.py:20\n  C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\auth_service\\tests\\database\\test_config.py:20: PytestCollectionWarning: cannot collect test class 'TestDatabaseConfig' because it has a __init__ constructor (from: tests/database/test_config.py)\n    class TestDatabaseConfig:\n\n-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html\n=========================== short test summary info ===========================\nFAILED tests/integration/test_auth_oauth_errors.py::TestOAuthErrorHandling::test_oauth_invalid_state_parameter\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!\n======================== 1 failed, 6 warnings in 3.10s ========================\n",
      "errors": ""
    },
    "frontend": {
      "success": false,
      "duration": 11.319547891616821,
      "output": "",
      "errors": "ts-jest[ts-jest-transformer] (WARN) Define `ts-jest` config under `globals` is deprecated. Please do\ntransform: {\n    <transform_regex>: ['ts-jest', { /* ts-jest config goes here in Jest */ }],\n},\nSee more at https://kulshekhar.github.io/ts-jest/docs/getting-started/presets#advanced\nts-jest[ts-jest-transformer] (WARN) Define `ts-jest` config under `globals` is deprecated. Please do\ntransform: {\n    <transform_regex>: ['ts-jest', { /* ts-jest config goes here in Jest */ }],\n},\nSee more at https://kulshekhar.github.io/ts-jest/docs/getting-started/presets#advanced\nts-jest[ts-jest-transformer] (WARN) Define `ts-jest` config under `globals` is deprecated. Please do\ntransform: {\n    <transform_regex>: ['ts-jest', { /* ts-jest config goes here in Jest */ }],\n},\nSee more at https://kulshekhar.github.io/ts-jest/docs/getting-started/presets#advanced\nts-jest[ts-jest-transformer] (WARN) Define `ts-jest` config under `globals` is deprecated. Please do\ntransform: {\n    <transform_regex>: ['ts-jest', { /* ts-jest config goes here in Jest */ }],\n},\nSee more at https://kulshekhar.github.io/ts-jest/docs/getting-started/presets#advanced\nts-jest[ts-jest-transformer] (WARN) Define `ts-jest` config under `globals` is deprecated. Please do\ntransform: {\n    <transform_regex>: ['ts-jest', { /* ts-jest config goes here in Jest */ }],\n},\nSee more at https://kulshekhar.github.io/ts-jest/docs/getting-started/presets#advanced\nts-jest[ts-jest-transformer] (WARN) Define `ts-jest` config under `globals` is deprecated. Please do\ntransform: {\n    <transform_regex>: ['ts-jest', { /* ts-jest config goes here in Jest */ }],\n},\nSee more at https://kulshekhar.github.io/ts-jest/docs/getting-started/presets#advanced\nts-jest[ts-jest-transformer] (WARN) Define `ts-jest` config under `globals` is deprecated. Please do\ntransform: {\n    <transform_regex>: ['ts-jest', { /* ts-jest config goes here in Jest */ }],\n},\nSee more at https://kulshekhar.github.io/ts-jest/docs/getting-started/presets#advanced\nts-jest[ts-jest-transformer] (WARN) Define `ts-jest` config under `globals` is deprecated. Please do\ntransform: {\n    <transform_regex>: ['ts-jest', { /* ts-jest config goes here in Jest */ }],\n},\nSee more at https://kulshekhar.github.io/ts-jest/docs/getting-started/presets#advanced\nts-jest[ts-jest-transformer] (WARN) Define `ts-jest` config under `globals` is deprecated. Please do\ntransform: {\n    <transform_regex>: ['ts-jest', { /* ts-jest config goes here in Jest */ }],\n},\nSee more at https://kulshekhar.github.io/ts-jest/docs/getting-started/presets#advanced\nts-jest[ts-jest-transformer] (WARN) Define `ts-jest` config under `globals` is deprecated. Please do\ntransform: {\n    <transform_regex>: ['ts-jest', { /* ts-jest config goes here in Jest */ }],\n},\nSee more at https://kulshekhar.github.io/ts-jest/docs/getting-started/presets#advanced\nPASS Integration Tests __tests__/integration/message-sending.test.tsx (7.686 s)\n  Message Sending Integration Tests\n    Send Button Interactions\n      \u221a should handle send button click with immediate UI feedback (282 ms)\n      \u221a should handle Enter key sending with same performance (244 ms)\n      \u221a should not send on Shift+Enter (multiline) (282 ms)\n    Optimistic UI Updates\n      \u221a should show message immediately in UI (274 ms)\n      \u221a should clear input field immediately after send (144 ms)\n      \u221a should show sending indicator during transmission (239 ms)\n    Message ID Generation\n      \u221a should generate unique message IDs (625 ms)\n    WebSocket Message Dispatch\n      \u221a should dispatch properly formatted WebSocket message (380 ms)\n      \u221a should include thread ID in WebSocket message (267 ms)\n      \u221a should handle WebSocket connection failures gracefully (236 ms)\n    Success Confirmation\n      \u221a should handle successful message confirmation (235 ms)\n      \u221a should re-enable input after successful send (282 ms)\n    Concurrent Message Handling\n      \u221a should handle rapid successive sends (1514 ms)\n      \u221a should handle concurrent sends from multiple tabs simulation (546 ms)\n    Performance Requirements\n      \u221a should meet latency requirements for send action (315 ms)\n      \u221a should handle large messages efficiently (124 ms)\n      \u221a should maintain 60 FPS during typing simulation (634 ms)\n\nFAIL Integration Tests __tests__/integration/auth-complete.test.tsx (8.332 s)\n  Complete Authentication Flow Integration\n    OAuth Login Flow\n      \u00d7 should complete OAuth login with token validation (1049 ms)\n      \u221a should handle OAuth callback with state validation (17 ms)\n      \u00d7 should reject invalid OAuth state (1020 ms)\n    Development Mode Authentication\n      \u00d7 should auto-login in development mode (2010 ms)\n      \u00d7 should respect dev logout flag (1012 ms)\n    Logout Flow\n      \u00d7 should complete logout with full cleanup (1034 ms)\n      \u00d7 should handle logout during active session (17 ms)\n    Token Management\n      \u00d7 should validate token format and claims (13 ms)\n      \u00d7 should handle malformed tokens (10 ms)\n      \u00d7 should handle expired tokens (1015 ms)\n\n  \u25cf Complete Authentication Flow Integration \u203a OAuth Login Flow \u203a should complete OAuth login with token validation\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: {\"authorized_javascript_origins\": [\"http://localhost:3000\"], \"authorized_redirect_uris\": [\"http://localhost:3000/auth/callback\"], \"development_mode\": false, \"endpoints\": {\"callback\": \"/auth/callback\", \"login\": \"/auth/login\", \"logout\": \"/auth/logout\", \"token\": \"/auth/token\", \"user\": \"/auth/me\"}, \"google_client_id\": \"test-google-client-id\"}\n\n    Number of calls: 0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"login-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogin\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogout\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"auth-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mAuthenticated\u001b[0m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 332 |\u001b[39m   \u001b[36masync\u001b[39m \u001b[36mfunction\u001b[39m verifyOAuthLoginSuccess(mockLogin\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m) {\n     \u001b[90m 333 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 334 |\u001b[39m       expect(mockAuthService\u001b[33m.\u001b[39mhandleLogin)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(mockAuthConfig)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 335 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 336 |\u001b[39m   }\n     \u001b[90m 337 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/auth-complete.test.tsx:334:43\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Complete Authentication Flow Integration \u203a OAuth Login Flow \u203a should reject invalid OAuth state\n\n    expect(element).toHaveTextContent()\n\n    Expected element to have text content:\n      Not authenticated\n    Received:\n      Authenticated\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"login-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogin\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogout\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"auth-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mAuthenticated\u001b[0m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 383 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n     \u001b[90m 384 |\u001b[39m       \u001b[36mconst\u001b[39m authStatus \u001b[33m=\u001b[39m screen\u001b[33m.\u001b[39mgetByTestId(\u001b[32m'auth-status'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 385 |\u001b[39m       expect(authStatus)\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'Not authenticated'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 386 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 387 |\u001b[39m   }\n     \u001b[90m 388 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/auth-complete.test.tsx:385:26\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Complete Authentication Flow Integration \u203a Development Mode Authentication \u203a should auto-login in development mode\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"login-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogin\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogout\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"auth-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mAuthenticated\u001b[0m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 410 |\u001b[39m   \u001b[36masync\u001b[39m \u001b[36mfunction\u001b[39m waitForDevAutoLogin() {\n     \u001b[90m 411 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 412 |\u001b[39m       expect(mockAuthService\u001b[33m.\u001b[39mhandleDevLogin)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 413 |\u001b[39m     }\u001b[33m,\u001b[39m { timeout\u001b[33m:\u001b[39m \u001b[35m2000\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 414 |\u001b[39m   }\n     \u001b[90m 415 |\u001b[39m\u001b[0m\n\n      at timeout (__tests__/integration/auth-complete.test.tsx:412:46)\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Complete Authentication Flow Integration \u203a Development Mode Authentication \u203a should respect dev logout flag\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"login-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogin\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogout\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"auth-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mAuthenticated\u001b[0m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 440 |\u001b[39m   \u001b[36masync\u001b[39m \u001b[36mfunction\u001b[39m waitForAuthInitialization() {\n     \u001b[90m 441 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 442 |\u001b[39m       expect(mockAuthService\u001b[33m.\u001b[39mgetAuthConfig)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 443 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 444 |\u001b[39m   }\n     \u001b[90m 445 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/auth-complete.test.tsx:442:45\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Complete Authentication Flow Integration \u203a Logout Flow \u203a should complete logout with full cleanup\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: {\"authorized_javascript_origins\": [\"http://localhost:3000\"], \"authorized_redirect_uris\": [\"http://localhost:3000/auth/callback\"], \"development_mode\": false, \"endpoints\": {\"callback\": \"/auth/callback\", \"login\": \"/auth/login\", \"logout\": \"/auth/logout\", \"token\": \"/auth/token\", \"user\": \"/auth/me\"}, \"google_client_id\": \"test-google-client-id\"}\n\n    Number of calls: 0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"login-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogin\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogout\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"auth-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mAuthenticated\u001b[0m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 472 |\u001b[39m   \u001b[36masync\u001b[39m \u001b[36mfunction\u001b[39m verifyLogoutSuccess(mockLogout\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m) {\n     \u001b[90m 473 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 474 |\u001b[39m       expect(mockLogout)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(mockAuthConfig)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 475 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 476 |\u001b[39m   }\n     \u001b[90m 477 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/auth-complete.test.tsx:474:26\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Complete Authentication Flow Integration \u203a Logout Flow \u203a should handle logout during active session\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    \u001b[0m \u001b[90m 500 |\u001b[39m\n     \u001b[90m 501 |\u001b[39m   \u001b[36mfunction\u001b[39m expectSessionTerminated() {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 502 |\u001b[39m     expect(mockUseAuthStore()\u001b[33m.\u001b[39mlogout)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 503 |\u001b[39m   }\n     \u001b[90m 504 |\u001b[39m\n     \u001b[90m 505 |\u001b[39m   \u001b[36mfunction\u001b[39m expectRedirectToLogin() {\u001b[0m\n\n      at expectSessionTerminated (__tests__/integration/auth-complete.test.tsx:502:39)\n      at Object.<anonymous> (__tests__/integration/auth-complete.test.tsx:198:7)\n\n  \u25cf Complete Authentication Flow Integration \u203a Token Management \u203a should validate token format and claims\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: Any<String>\n\n    Number of calls: 0\n\n    \u001b[0m \u001b[90m 517 |\u001b[39m\n     \u001b[90m 518 |\u001b[39m   \u001b[36mfunction\u001b[39m expectTokenValidated() {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 519 |\u001b[39m     expect(jwtDecode)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(expect\u001b[33m.\u001b[39many(\u001b[33mString\u001b[39m))\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 520 |\u001b[39m   }\n     \u001b[90m 521 |\u001b[39m\n     \u001b[90m 522 |\u001b[39m   \u001b[36mfunction\u001b[39m expectClaimsExtracted() {\u001b[0m\n\n      at expectTokenValidated (__tests__/integration/auth-complete.test.tsx:519:23)\n      at Object.<anonymous> (__tests__/integration/auth-complete.test.tsx:216:7)\n\n  \u25cf Complete Authentication Flow Integration \u203a Token Management \u203a should handle malformed tokens\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    \u001b[0m \u001b[90m 532 |\u001b[39m\n     \u001b[90m 533 |\u001b[39m   \u001b[36mfunction\u001b[39m expectTokenRejected() {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 534 |\u001b[39m     expect(mockAuthService\u001b[33m.\u001b[39mremoveToken)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 535 |\u001b[39m   }\n     \u001b[90m 536 |\u001b[39m\n     \u001b[90m 537 |\u001b[39m   \u001b[36mfunction\u001b[39m expectSecurityCleanup() {\u001b[0m\n\n      at expectTokenRejected (__tests__/integration/auth-complete.test.tsx:534:41)\n      at Object.<anonymous> (__tests__/integration/auth-complete.test.tsx:230:7)\n\n  \u25cf Complete Authentication Flow Integration \u203a Token Management \u203a should handle expired tokens\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"login-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogin\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogout\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"auth-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mAuthenticated\u001b[0m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 248 |\u001b[39m       \u001b[90m// The AuthProvider should detect expired token and remove it\u001b[39m\n     \u001b[90m 249 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 250 |\u001b[39m         expect(mockAuthService\u001b[33m.\u001b[39mremoveToken)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 251 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 252 |\u001b[39m       \n     \u001b[90m 253 |\u001b[39m       \u001b[90m// Verify user remains unauthenticated\u001b[39m\u001b[0m\n\n      at __tests__/integration/auth-complete.test.tsx:250:45\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\nSummary of all failing tests\nFAIL __tests__/integration/auth-complete.test.tsx (8.332 s)\n  \u25cf Complete Authentication Flow Integration \u203a OAuth Login Flow \u203a should complete OAuth login with token validation\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: {\"authorized_javascript_origins\": [\"http://localhost:3000\"], \"authorized_redirect_uris\": [\"http://localhost:3000/auth/callback\"], \"development_mode\": false, \"endpoints\": {\"callback\": \"/auth/callback\", \"login\": \"/auth/login\", \"logout\": \"/auth/logout\", \"token\": \"/auth/token\", \"user\": \"/auth/me\"}, \"google_client_id\": \"test-google-client-id\"}\n\n    Number of calls: 0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"login-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogin\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogout\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"auth-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mAuthenticated\u001b[0m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 332 |\u001b[39m   \u001b[36masync\u001b[39m \u001b[36mfunction\u001b[39m verifyOAuthLoginSuccess(mockLogin\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m) {\n     \u001b[90m 333 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 334 |\u001b[39m       expect(mockAuthService\u001b[33m.\u001b[39mhandleLogin)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(mockAuthConfig)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 335 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 336 |\u001b[39m   }\n     \u001b[90m 337 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/auth-complete.test.tsx:334:43\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Complete Authentication Flow Integration \u203a OAuth Login Flow \u203a should reject invalid OAuth state\n\n    expect(element).toHaveTextContent()\n\n    Expected element to have text content:\n      Not authenticated\n    Received:\n      Authenticated\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"login-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogin\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogout\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"auth-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mAuthenticated\u001b[0m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 383 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n     \u001b[90m 384 |\u001b[39m       \u001b[36mconst\u001b[39m authStatus \u001b[33m=\u001b[39m screen\u001b[33m.\u001b[39mgetByTestId(\u001b[32m'auth-status'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 385 |\u001b[39m       expect(authStatus)\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'Not authenticated'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 386 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 387 |\u001b[39m   }\n     \u001b[90m 388 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/auth-complete.test.tsx:385:26\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Complete Authentication Flow Integration \u203a Development Mode Authentication \u203a should auto-login in development mode\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"login-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogin\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogout\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"auth-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mAuthenticated\u001b[0m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 410 |\u001b[39m   \u001b[36masync\u001b[39m \u001b[36mfunction\u001b[39m waitForDevAutoLogin() {\n     \u001b[90m 411 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 412 |\u001b[39m       expect(mockAuthService\u001b[33m.\u001b[39mhandleDevLogin)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 413 |\u001b[39m     }\u001b[33m,\u001b[39m { timeout\u001b[33m:\u001b[39m \u001b[35m2000\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 414 |\u001b[39m   }\n     \u001b[90m 415 |\u001b[39m\u001b[0m\n\n      at timeout (__tests__/integration/auth-complete.test.tsx:412:46)\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Complete Authentication Flow Integration \u203a Development Mode Authentication \u203a should respect dev logout flag\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"login-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogin\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogout\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"auth-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mAuthenticated\u001b[0m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 440 |\u001b[39m   \u001b[36masync\u001b[39m \u001b[36mfunction\u001b[39m waitForAuthInitialization() {\n     \u001b[90m 441 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 442 |\u001b[39m       expect(mockAuthService\u001b[33m.\u001b[39mgetAuthConfig)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 443 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 444 |\u001b[39m   }\n     \u001b[90m 445 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/auth-complete.test.tsx:442:45\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Complete Authentication Flow Integration \u203a Logout Flow \u203a should complete logout with full cleanup\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: {\"authorized_javascript_origins\": [\"http://localhost:3000\"], \"authorized_redirect_uris\": [\"http://localhost:3000/auth/callback\"], \"development_mode\": false, \"endpoints\": {\"callback\": \"/auth/callback\", \"login\": \"/auth/login\", \"logout\": \"/auth/logout\", \"token\": \"/auth/token\", \"user\": \"/auth/me\"}, \"google_client_id\": \"test-google-client-id\"}\n\n    Number of calls: 0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"login-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogin\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogout\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"auth-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mAuthenticated\u001b[0m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 472 |\u001b[39m   \u001b[36masync\u001b[39m \u001b[36mfunction\u001b[39m verifyLogoutSuccess(mockLogout\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m) {\n     \u001b[90m 473 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 474 |\u001b[39m       expect(mockLogout)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(mockAuthConfig)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 475 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 476 |\u001b[39m   }\n     \u001b[90m 477 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/auth-complete.test.tsx:474:26\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Complete Authentication Flow Integration \u203a Logout Flow \u203a should handle logout during active session\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    \u001b[0m \u001b[90m 500 |\u001b[39m\n     \u001b[90m 501 |\u001b[39m   \u001b[36mfunction\u001b[39m expectSessionTerminated() {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 502 |\u001b[39m     expect(mockUseAuthStore()\u001b[33m.\u001b[39mlogout)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 503 |\u001b[39m   }\n     \u001b[90m 504 |\u001b[39m\n     \u001b[90m 505 |\u001b[39m   \u001b[36mfunction\u001b[39m expectRedirectToLogin() {\u001b[0m\n\n      at expectSessionTerminated (__tests__/integration/auth-complete.test.tsx:502:39)\n      at Object.<anonymous> (__tests__/integration/auth-complete.test.tsx:198:7)\n\n  \u25cf Complete Authentication Flow Integration \u203a Token Management \u203a should validate token format and claims\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: Any<String>\n\n    Number of calls: 0\n\n    \u001b[0m \u001b[90m 517 |\u001b[39m\n     \u001b[90m 518 |\u001b[39m   \u001b[36mfunction\u001b[39m expectTokenValidated() {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 519 |\u001b[39m     expect(jwtDecode)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(expect\u001b[33m.\u001b[39many(\u001b[33mString\u001b[39m))\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 520 |\u001b[39m   }\n     \u001b[90m 521 |\u001b[39m\n     \u001b[90m 522 |\u001b[39m   \u001b[36mfunction\u001b[39m expectClaimsExtracted() {\u001b[0m\n\n      at expectTokenValidated (__tests__/integration/auth-complete.test.tsx:519:23)\n      at Object.<anonymous> (__tests__/integration/auth-complete.test.tsx:216:7)\n\n  \u25cf Complete Authentication Flow Integration \u203a Token Management \u203a should handle malformed tokens\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    \u001b[0m \u001b[90m 532 |\u001b[39m\n     \u001b[90m 533 |\u001b[39m   \u001b[36mfunction\u001b[39m expectTokenRejected() {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 534 |\u001b[39m     expect(mockAuthService\u001b[33m.\u001b[39mremoveToken)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 535 |\u001b[39m   }\n     \u001b[90m 536 |\u001b[39m\n     \u001b[90m 537 |\u001b[39m   \u001b[36mfunction\u001b[39m expectSecurityCleanup() {\u001b[0m\n\n      at expectTokenRejected (__tests__/integration/auth-complete.test.tsx:534:41)\n      at Object.<anonymous> (__tests__/integration/auth-complete.test.tsx:230:7)\n\n  \u25cf Complete Authentication Flow Integration \u203a Token Management \u203a should handle expired tokens\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"login-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogin\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogout\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"auth-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mAuthenticated\u001b[0m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 248 |\u001b[39m       \u001b[90m// The AuthProvider should detect expired token and remove it\u001b[39m\n     \u001b[90m 249 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 250 |\u001b[39m         expect(mockAuthService\u001b[33m.\u001b[39mremoveToken)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 251 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 252 |\u001b[39m       \n     \u001b[90m 253 |\u001b[39m       \u001b[90m// Verify user remains unauthenticated\u001b[39m\u001b[0m\n\n      at __tests__/integration/auth-complete.test.tsx:250:45\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n\nTest Suites: 1 failed, 1 passed, 2 of 163 total\nTests:       9 failed, 18 passed, 27 total\nSnapshots:   0 total\nTime:        9.967 s, estimated 27 s\nRan all test suites.\n"
    },
    "dev_launcher": {
      "success": false,
      "duration": 21.206329584121704,
      "output": "============================= test session starts =============================\nplatform win32 -- Python 3.12.4, pytest-8.4.1, pluggy-1.6.0\nrootdir: C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\nconfigfile: pytest.ini\nplugins: anyio-4.9.0, Faker-37.5.3, langsmith-0.4.15, asyncio-1.1.0, cov-6.2.1, mock-3.14.1, xdist-3.8.0, html-4.1.1, json-report-1.5.0, metadata-3.1.1, timeout-2.4.0, typeguard-4.4.4\nasyncio: mode=Mode.AUTO, asyncio_default_fixture_loop_scope=function, asyncio_default_test_loop_scope=function\ntimeout: 300.0s\ntimeout method: thread\ntimeout func_only: False\ncollected 22 items\n\ntests\\e2e\\test_dev_launcher_real_startup.py sF\n\n================================== FAILURES ===================================\n______ TestDevLauncherRealStartup.test_service_startup_order_validation _______\ntests\\e2e\\test_dev_launcher_real_startup.py:394: in test_service_startup_order_validation\n    assert startup_success, \"Service startup failed\"\nE   AssertionError: Service startup failed\nE   assert False\n----------------------------- Captured log setup ------------------------------\nDEBUG    asyncio:proactor_events.py:634 Using proactor: IocpProactor\nINFO     dev_launcher.service_config:service_config.py:350 Configuration loaded from C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\.dev_services.json\nINFO     dev_launcher.service_config:service_config.py:515 Loaded existing service configuration\n---------------------------- Captured stdout call -----------------------------\n\\n=== TESTING SERVICE STARTUP ORDER ===\\n\\U0001f50d DISCOVER | POSTGRESQL: sqlite+aiosqlite:///:memory:\\n\\U0001f50d DISCOVER | CLICKHOUSE: clickhouse://default:***@localhost:8123/netra_dev\\n\\U0001f50d DISCOVER | REDIS: redis://localhost:6379/0\\n\\U0001f50d WEBSOCKET | Discovered endpoint: backend_ws -> ws://localhost:8000/ws\\n\\u274c auth service NOT bound to port 8001\\n\\u2705 backend service bound to port 8000\\n\\u274c frontend service NOT bound to port 3000\n------------------------------ Captured log call ------------------------------\nINFO     dev_launcher.health_monitor:health_monitor.py:139 HealthMonitor initialized (check_interval: 30s)\nINFO     dev_launcher.health_monitor:health_monitor.py:141 Windows process verification enabled\nINFO     dev_launcher.process_manager:process_manager.py:58 ProcessManager initialized for win32\nINFO     dev_launcher.process_manager:process_manager.py:60 Enhanced Windows process tree management enabled\nINFO     dev_launcher.database_connector:database_connector.py:130 Discovered 3 database connections\nINFO     dev_launcher.websocket_validator:websocket_validator.py:78 Discovered 1 WebSocket endpoints\nINFO     dev_launcher.launcher:launcher.py:165 Signal handlers registered for graceful shutdown\n=========================== short test summary info ===========================\nSKIPPED [1] tests\\e2e\\test_dev_launcher_real_startup.py:208: Port 8000 (backend) is in use and cannot be freed\nFAILED tests/e2e/test_dev_launcher_real_startup.py::TestDevLauncherRealStartup::test_service_startup_order_validation\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!\n======================== 1 failed, 1 skipped in 17.38s ========================\n",
      "errors": "C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\_pytest\\unraisableexception.py:33: RuntimeWarning: coroutine 'DevLauncher.run' was never awaited\n  gc.collect()\nRuntimeWarning: Enable tracemalloc to get the object allocation traceback\n"
    }
  },
  "overall_success": false,
  "total_duration": 45.650906562805176
}