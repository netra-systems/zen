{
  "timestamp": "20250821_175516",
  "level": "integration",
  "environment": "local",
  "services": {
    "backend": {
      "success": false,
      "duration": 5.754940509796143,
      "output": "",
      "errors": "2025-08-21 17:53:55.443 | INFO     | netra_backend.app.core.unified_logging:_emit_log:139 | Using default database URL for development\n2025-08-21 17:53:55.443 | INFO     | netra_backend.app.core.unified_logging:_emit_log:139 | Populated database config for development\n2025-08-21 17:53:55.443 | INFO     | netra_backend.app.core.unified_logging:_emit_log:139 | Populated service config for development\n2025-08-21 17:53:55.443 | INFO     | netra_backend.app.core.unified_logging:_emit_log:139 | Loading all secrets from configured sources\n2025-08-21 17:53:55.444 | INFO     | netra_backend.app.core.unified_logging:_emit_log:139 | Loaded 0 secrets\n2025-08-21 17:53:55.444 | INFO     | netra_backend.app.core.unified_logging:_emit_log:139 | Populated 0 secrets into configuration\n2025-08-21 17:53:55.443 | INFO     | netra_backend.app.core.unified_logging:_emit_log:139 | Using default database URL for development\n2025-08-21 17:53:55.444 | INFO     | netra_backend.app.core.unified_logging:_emit_log:139 | Populated database config for development\n2025-08-21 17:53:55.444 | INFO     | netra_backend.app.core.unified_logging:_emit_log:139 | Populated service config for development\n2025-08-21 17:53:55.444 | INFO     | netra_backend.app.core.unified_logging:_emit_log:139 | Loading all secrets from configured sources\n2025-08-21 17:53:55.444 | INFO     | netra_backend.app.core.unified_logging:_emit_log:139 | Loaded 0 secrets\n2025-08-21 17:53:55.445 | INFO     | netra_backend.app.core.unified_logging:_emit_log:139 | Populated 0 secrets into configuration\n2025-08-21 17:53:56.748 | DEBUG    | logging:handle:1028 | Using orjson library for writing JSON byte strings\n2025-08-21 17:53:56.795 | DEBUG    | logging:handle:1028 | Looking up time zone info from registry\n2025-08-21 17:53:56.825 | INFO     | netra_backend.app.core.unified_logging:_emit_log:139 | SyntheticDataService initialized successfully\n2025-08-21 17:53:56.895 | DEBUG    | netra_backend.app.services.metrics.agent_metrics:__init__:29 | Initialized AgentMetricsCollector with buffer size 5000\nImportError while loading conftest 'C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\netra_backend\\tests\\conftest.py'.\ntests\\conftest.py:130: in <module>\n    from netra_backend.app.main import app\napp\\main.py:91: in <module>\n    from netra_backend.app.core.app_factory import create_app\napp\\core\\app_factory.py:19: in <module>\n    from netra_backend.app.core.lifespan_manager import lifespan\napp\\core\\lifespan_manager.py:9: in <module>\n    from netra_backend.app.shutdown import run_complete_shutdown\napp\\shutdown.py:12: in <module>\n    from netra_backend.app.services.websocket.ws_manager import manager as websocket_manager\napp\\services\\websocket\\ws_manager.py:45: in __getattr__\n    mgr, _, _, _ = _lazy_import()\n                   ^^^^^^^^^^^^^^\napp\\services\\websocket\\ws_manager.py:29: in _lazy_import\n    from netra_backend.app.ws_manager import WebSocketManager as _WSM\napp\\ws_manager.py:24: in <module>\n    from netra_backend.app.websocket.unified import (\napp\\websocket\\unified\\__init__.py:13: in <module>\n    from .manager import UnifiedWebSocketManager, get_unified_manager\napp\\websocket\\unified\\manager.py:35: in <module>\n    from netra_backend.app.websocket.room_manager import RoomManager\napp\\websocket\\room_manager.py:9: in <module>\n    from netra_backend.app.websocket.connection_manager import (\nE   ImportError: cannot import name 'ModernConnectionManager' from 'netra_backend.app.websocket.connection_manager' (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\netra_backend\\app\\websocket\\connection_manager.py)\n"
    },
    "auth": {
      "success": false,
      "duration": 3.8587594032287598,
      "output": "============================= test session starts =============================\nplatform win32 -- Python 3.12.4, pytest-8.4.1, pluggy-1.6.0 -- C:\\Users\\antho\\miniconda3\\python.exe\ncachedir: .pytest_cache\nmetadata: {'Python': '3.12.4', 'Platform': 'Windows-11-10.0.26100-SP0', 'Packages': {'pytest': '8.4.1', 'pluggy': '1.6.0'}, 'Plugins': {'anyio': '4.9.0', 'Faker': '37.5.3', 'langsmith': '0.4.15', 'asyncio': '1.1.0', 'cov': '6.2.1', 'mock': '3.14.1', 'xdist': '3.8.0', 'html': '4.1.1', 'json-report': '1.5.0', 'metadata': '3.1.1', 'timeout': '2.4.0', 'typeguard': '4.4.4'}}\nrootdir: C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\auth_service\nconfigfile: pytest.ini\nplugins: anyio-4.9.0, Faker-37.5.3, langsmith-0.4.15, asyncio-1.1.0, cov-6.2.1, mock-3.14.1, xdist-3.8.0, html-4.1.1, json-report-1.5.0, metadata-3.1.1, timeout-2.4.0, typeguard-4.4.4\nasyncio: mode=Mode.STRICT, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function\ncollecting ... collected 161 items / 4 errors\n\n=================================== ERRORS ====================================\n__________________ ERROR collecting tests/base/test_base.py ___________________\nImportError while importing test module 'C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\auth_service\\tests\\base\\test_base.py'.\nHint: make sure your test modules/packages have valid Python names.\nTraceback:\nC:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\_pytest\\python.py:498: in importtestmodule\n    mod = import_path(\nC:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\_pytest\\pathlib.py:587: in import_path\n    importlib.import_module(module_name)\nC:\\Users\\antho\\miniconda3\\Lib\\importlib\\__init__.py:90: in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n<frozen importlib._bootstrap>:1387: in _gcd_import\n    ???\n<frozen importlib._bootstrap>:1360: in _find_and_load\n    ???\n<frozen importlib._bootstrap>:1310: in _find_and_load_unlocked\n    ???\n<frozen importlib._bootstrap>:488: in _call_with_frames_removed\n    ???\n<frozen importlib._bootstrap>:1387: in _gcd_import\n    ???\n<frozen importlib._bootstrap>:1360: in _find_and_load\n    ???\n<frozen importlib._bootstrap>:1331: in _find_and_load_unlocked\n    ???\n<frozen importlib._bootstrap>:935: in _load_unlocked\n    ???\n<frozen importlib._bootstrap_external>:995: in exec_module\n    ???\n<frozen importlib._bootstrap>:488: in _call_with_frames_removed\n    ???\ntests\\base\\__init__.py:6: in <module>\n    from auth_service.tests.test_base import AsyncTestBase, AuthTestBase\nE   ModuleNotFoundError: No module named 'auth_service.tests.test_base'\n_________________ ERROR collecting tests/base/test_mixins.py __________________\nImportError while importing test module 'C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\auth_service\\tests\\base\\test_mixins.py'.\nHint: make sure your test modules/packages have valid Python names.\nTraceback:\nC:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\_pytest\\python.py:498: in importtestmodule\n    mod = import_path(\nC:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\_pytest\\pathlib.py:587: in import_path\n    importlib.import_module(module_name)\nC:\\Users\\antho\\miniconda3\\Lib\\importlib\\__init__.py:90: in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n<frozen importlib._bootstrap>:1387: in _gcd_import\n    ???\n<frozen importlib._bootstrap>:1360: in _find_and_load\n    ???\n<frozen importlib._bootstrap>:1310: in _find_and_load_unlocked\n    ???\n<frozen importlib._bootstrap>:488: in _call_with_frames_removed\n    ???\n<frozen importlib._bootstrap>:1387: in _gcd_import\n    ???\n<frozen importlib._bootstrap>:1360: in _find_and_load\n    ???\n<frozen importlib._bootstrap>:1331: in _find_and_load_unlocked\n    ???\n<frozen importlib._bootstrap>:935: in _load_unlocked\n    ???\n<frozen importlib._bootstrap_external>:995: in exec_module\n    ???\n<frozen importlib._bootstrap>:488: in _call_with_frames_removed\n    ???\ntests\\base\\__init__.py:6: in <module>\n    from auth_service.tests.test_base import AsyncTestBase, AuthTestBase\nE   ModuleNotFoundError: No module named 'auth_service.tests.test_base'\n__________________ ERROR collecting tests/config/test_env.py __________________\nImportError while importing test module 'C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\auth_service\\tests\\config\\test_env.py'.\nHint: make sure your test modules/packages have valid Python names.\nTraceback:\nC:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\_pytest\\python.py:498: in importtestmodule\n    mod = import_path(\nC:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\_pytest\\pathlib.py:587: in import_path\n    importlib.import_module(module_name)\nC:\\Users\\antho\\miniconda3\\Lib\\importlib\\__init__.py:90: in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n<frozen importlib._bootstrap>:1387: in _gcd_import\n    ???\n<frozen importlib._bootstrap>:1360: in _find_and_load\n    ???\n<frozen importlib._bootstrap>:1310: in _find_and_load_unlocked\n    ???\n<frozen importlib._bootstrap>:488: in _call_with_frames_removed\n    ???\n<frozen importlib._bootstrap>:1387: in _gcd_import\n    ???\n<frozen importlib._bootstrap>:1360: in _find_and_load\n    ???\n<frozen importlib._bootstrap>:1331: in _find_and_load_unlocked\n    ???\n<frozen importlib._bootstrap>:935: in _load_unlocked\n    ???\n<frozen importlib._bootstrap_external>:995: in exec_module\n    ???\n<frozen importlib._bootstrap>:488: in _call_with_frames_removed\n    ???\ntests\\config\\__init__.py:6: in <module>\n    from auth_service.tests.test_env import TestEnvironment, load_test_config\nE   ModuleNotFoundError: No module named 'auth_service.tests.test_env'\n_______________ ERROR collecting tests/config/test_settings.py ________________\nImportError while importing test module 'C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\auth_service\\tests\\config\\test_settings.py'.\nHint: make sure your test modules/packages have valid Python names.\nTraceback:\nC:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\_pytest\\python.py:498: in importtestmodule\n    mod = import_path(\nC:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\_pytest\\pathlib.py:587: in import_path\n    importlib.import_module(module_name)\nC:\\Users\\antho\\miniconda3\\Lib\\importlib\\__init__.py:90: in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n<frozen importlib._bootstrap>:1387: in _gcd_import\n    ???\n<frozen importlib._bootstrap>:1360: in _find_and_load\n    ???\n<frozen importlib._bootstrap>:1310: in _find_and_load_unlocked\n    ???\n<frozen importlib._bootstrap>:488: in _call_with_frames_removed\n    ???\n<frozen importlib._bootstrap>:1387: in _gcd_import\n    ???\n<frozen importlib._bootstrap>:1360: in _find_and_load\n    ???\n<frozen importlib._bootstrap>:1331: in _find_and_load_unlocked\n    ???\n<frozen importlib._bootstrap>:935: in _load_unlocked\n    ???\n<frozen importlib._bootstrap_external>:995: in exec_module\n    ???\n<frozen importlib._bootstrap>:488: in _call_with_frames_removed\n    ???\ntests\\config\\__init__.py:6: in <module>\n    from auth_service.tests.test_env import TestEnvironment, load_test_config\nE   ModuleNotFoundError: No module named 'auth_service.tests.test_env'\n============================== warnings summary ===============================\nauth_core\\database\\models.py:11\n  C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\auth_service\\auth_core\\database\\models.py:11: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)\n    Base = declarative_base()\n\ntests\\database\\test_config.py:20\n  C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\auth_service\\tests\\database\\test_config.py:20: PytestCollectionWarning: cannot collect test class 'TestDatabaseConfig' because it has a __init__ constructor (from: tests/database/test_config.py)\n    class TestDatabaseConfig:\n\n-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html\n=========================== short test summary info ===========================\nERROR tests/base/test_base.py\nERROR tests/base/test_mixins.py\nERROR tests/config/test_env.py\nERROR tests/config/test_settings.py\n!!!!!!!!!!!!!!!!!!! Interrupted: 4 errors during collection !!!!!!!!!!!!!!!!!!!\n======================== 2 warnings, 4 errors in 1.30s ========================\n",
      "errors": ""
    },
    "frontend": {
      "success": false,
      "duration": 32.50163507461548,
      "output": "  console.log\n    \ud83d\udce6 ChatSidebarHooks module mock created\n\n      at __tests__/components/ChatSidebar/setup.tsx:42:11\n\n  console.log\n    \ud83d\udd27 Configuring authentication mocks with: { isAuthenticated: true, userTier: 'Early' }\n\n      at ChatSidebarTestSetup.beforeEach (__tests__/components/ChatSidebar/setup.tsx:269:13)\n\n  console.log\n    \ud83d\udd27 configureAuthState called with overrides: { isAuthenticated: true, userTier: 'Early' }\n\n      at ChatSidebarTestSetup.configureAuthState (__tests__/components/ChatSidebar/setup.tsx:433:13)\n\n  console.log\n    \ud83c\udfaf Final authStateConfig: {\n      isAuthenticated: true,\n      isLoading: false,\n      user: { id: 'test-user-1', email: 'test@example.com', role: 'user' },\n      userTier: 'Early',\n      error: null,\n      refreshAuth: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      logout: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      clearError: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      hasPermission: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      isAdminOrHigher: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      isDeveloperOrHigher: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      }\n    }\n\n      at ChatSidebarTestSetup.configureAuthState (__tests__/components/ChatSidebar/setup.tsx:434:13)\n\n  console.log\n    \ud83d\udd27 configureChatSidebarHooks called with: {\n      threadsProvided: true,\n      threadsCount: 3,\n      threadIds: [ 'thread-1', 'thread-2', 'thread-3' ]\n    }\n\n      at ChatSidebarTestSetup.configureChatSidebarHooks (__tests__/components/ChatSidebar/setup.tsx:339:13)\n\n  console.log\n    \ud83c\udfaf Mock configurations: {\n      threadLoaderConfig: {\n        threads: [ [Object], [Object], [Object] ],\n        isLoadingThreads: false,\n        loadError: null,\n        loadThreads: [Function: mockConstructor] {\n          _isMockFunction: true,\n          getMockImplementation: [Function (anonymous)],\n          mock: [Getter/Setter],\n          mockClear: [Function (anonymous)],\n          mockReset: [Function (anonymous)],\n          mockRestore: [Function (anonymous)],\n          mockReturnValueOnce: [Function (anonymous)],\n          mockResolvedValueOnce: [Function (anonymous)],\n          mockRejectedValueOnce: [Function (anonymous)],\n          mockReturnValue: [Function (anonymous)],\n          mockResolvedValue: [Function (anonymous)],\n          mockRejectedValue: [Function (anonymous)],\n          mockImplementationOnce: [Function (anonymous)],\n          withImplementation: [Function: bound withImplementation],\n          mockImplementation: [Function (anonymous)],\n          mockReturnThis: [Function (anonymous)],\n          mockName: [Function (anonymous)],\n          getMockName: [Function (anonymous)],\n          Symbol(Symbol.dispose): [Function (anonymous)]\n        }\n      },\n      threadFilteringConfig: {\n        sortedThreads: [ [Object], [Object], [Object] ],\n        paginatedThreads: [ [Object], [Object], [Object] ],\n        totalPages: 1\n      }\n    }\n\n      at ChatSidebarTestSetup.configureChatSidebarHooks (__tests__/components/ChatSidebar/setup.tsx:377:13)\n\n  console.log\n    \ud83c\udfaf Applied mock configurations using mockImplementation with debugging\n\n      at ChatSidebarTestSetup.configureChatSidebarHooks (__tests__/components/ChatSidebar/setup.tsx:414:13)\n\n  console.log\n    \ud83d\udd25 HOOK CALLED: useChatSidebarState (CONFIGURED) {\n      searchQuery: '',\n      setSearchQuery: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      isCreatingThread: false,\n      setIsCreatingThread: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      showAllThreads: false,\n      setShowAllThreads: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      filterType: 'all',\n      setFilterType: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      currentPage: 1,\n      setCurrentPage: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      }\n    }\n\n      at Object.<anonymous> (__tests__/components/ChatSidebar/setup.tsx:385:15)\n\n  console.log\n    \ud83d\udd25 HOOK CALLED: useThreadLoader (CONFIGURED) {\n      args: [ false, 'all', 'thread-1', [AsyncFunction (anonymous)] ],\n      returning: {\n        threads: [ [Object], [Object], [Object] ],\n        isLoadingThreads: false,\n        loadError: null,\n        loadThreads: [Function: mockConstructor] {\n          _isMockFunction: true,\n          getMockImplementation: [Function (anonymous)],\n          mock: [Getter/Setter],\n          mockClear: [Function (anonymous)],\n          mockReset: [Function (anonymous)],\n          mockRestore: [Function (anonymous)],\n          mockReturnValueOnce: [Function (anonymous)],\n          mockResolvedValueOnce: [Function (anonymous)],\n          mockRejectedValueOnce: [Function (anonymous)],\n          mockReturnValue: [Function (anonymous)],\n          mockResolvedValue: [Function (anonymous)],\n          mockRejectedValue: [Function (anonymous)],\n          mockImplementationOnce: [Function (anonymous)],\n          withImplementation: [Function: bound withImplementation],\n          mockImplementation: [Function (anonymous)],\n          mockReturnThis: [Function (anonymous)],\n          mockName: [Function (anonymous)],\n          getMockName: [Function (anonymous)],\n          Symbol(Symbol.dispose): [Function (anonymous)]\n        }\n      }\n    }\n\n      at Object.<anonymous> (__tests__/components/ChatSidebar/setup.tsx:390:15)\n\n  console.log\n    \ud83d\udd25 HOOK CALLED: useThreadFiltering (CONFIGURED) {\n      threadsType: 'object',\n      isArray: true,\n      threadsLength: 3,\n      returning: {\n        sortedThreads: [ [Object], [Object], [Object] ],\n        paginatedThreads: [ [Object], [Object], [Object] ],\n        totalPages: 1\n      }\n    }\n\n      at Object.<anonymous> (__tests__/components/ChatSidebar/setup.tsx:395:15)\n\n  console.log\n    \ud83e\uddea TestChatSidebar rendering with threads: {\n      threadsLength: 3,\n      paginatedThreadsLength: 3,\n      isLoadingThreads: false,\n      loadError: null\n    }\n\n      at TestChatSidebar (__tests__/components/ChatSidebar/setup.tsx:571:11)\n\n  console.error\n    [ERROR] Failed to switch thread: TypeError: Cannot destructure property 'clearMessages' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n        at clearChatState (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\components\\chat\\ChatSidebarHandlers.ts:16:11)\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\components\\chat\\ChatSidebarHandlers.ts:95:7\n        at onClick (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\components\\chat\\ChatSidebarThreadList.tsx:169:30)\n        at executeDispatch (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16368:9)\n        at runWithFiberInDEV (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:1522:13)\n        at processDispatchQueue (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16418:19)\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:17016:9\n        at batchedUpdates$1 (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:3262:40)\n        at dispatchEventForPluginEventSystem (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16572:7)\n        at dispatchEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:20658:11)\n        at dispatchDiscreteEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:20626:11)\n        at HTMLDivElement.callTheUserObjectsOperation (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\generated\\EventListener.js:26:30)\n        at innerInvokeEventListeners (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\events\\EventTarget-impl.js:350:25)\n        at invokeEventListeners (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\events\\EventTarget-impl.js:286:3)\n        at HTMLButtonElementImpl._dispatch (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\events\\EventTarget-impl.js:233:9)\n        at HTMLButtonElementImpl.dispatchEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\events\\EventTarget-impl.js:104:17)\n        at HTMLButtonElement.dispatchEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\generated\\EventTarget.js:241:34)\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\event\\dispatchEvent.js:45:43\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\pure.js:108:16\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\act-compat.js:48:24\n        at process.env.NODE_ENV.exports.act (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react\\cjs\\react.development.js:790:22)\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\act-compat.js:47:25\n        at Object.eventWrapper (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\pure.js:107:28)\n        at Object.wrapEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\event\\wrapEvent.js:6:28)\n        at Object.dispatchEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\event\\dispatchEvent.js:45:22)\n        at Object.dispatchUIEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\event\\dispatchEvent.js:22:26)\n        at Mouse.up (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\system\\pointer\\mouse.js:100:30)\n        at PointerHost.release (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\system\\pointer\\index.js:87:24)\n        at pointerAction (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\pointer\\index.js:54:47)\n        at runNextTicks (node:internal/process/task_queues:65:5)\n        at listOnTimeout (node:internal/timers:569:9)\n        at processTimers (node:internal/timers:543:7)\n        at Object.pointer (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\pointer\\index.js:27:9)\n        at Object.asyncWrapper (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\pure.js:88:22)\n        at Object.<anonymous> (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\__tests__\\integration\\thread-navigation.test.tsx:77:7)\n\n    \u001b[0m \u001b[90m 207 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 208 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 209 |\u001b[39m     originalError\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 210 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 211 |\u001b[39m   \n     \u001b[90m 212 |\u001b[39m   console\u001b[33m.\u001b[39mwarn \u001b[33m=\u001b[39m (\u001b[33m...\u001b[39margs) \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at console.call [as error] (jest.setup.js:209:19)\n      at DebugLogger.error (utils/debug-logger.ts:57:15)\n      at components/chat/ChatSidebarHandlers.ts:108:14\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:77:7)\n\n  console.log\n    \ud83d\udd27 Configuring authentication mocks with: { isAuthenticated: true, userTier: 'Early' }\n\n      at ChatSidebarTestSetup.beforeEach (__tests__/components/ChatSidebar/setup.tsx:269:13)\n\n  console.log\n    \ud83d\udd27 configureAuthState called with overrides: { isAuthenticated: true, userTier: 'Early' }\n\n      at ChatSidebarTestSetup.configureAuthState (__tests__/components/ChatSidebar/setup.tsx:433:13)\n\n  console.log\n    \ud83c\udfaf Final authStateConfig: {\n      isAuthenticated: true,\n      isLoading: false,\n      user: { id: 'test-user-1', email: 'test@example.com', role: 'user' },\n      userTier: 'Early',\n      error: null,\n      refreshAuth: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      logout: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      clearError: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      hasPermission: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      isAdminOrHigher: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      isDeveloperOrHigher: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      }\n    }\n\n      at ChatSidebarTestSetup.configureAuthState (__tests__/components/ChatSidebar/setup.tsx:434:13)\n\n  console.log\n    \ud83d\udd27 configureChatSidebarHooks called with: {\n      threadsProvided: true,\n      threadsCount: 3,\n      threadIds: [ 'thread-1', 'thread-2', 'thread-3' ]\n    }\n\n      at ChatSidebarTestSetup.configureChatSidebarHooks (__tests__/components/ChatSidebar/setup.tsx:339:13)\n\n  console.log\n    \ud83c\udfaf Mock configurations: {\n      threadLoaderConfig: {\n        threads: [ [Object], [Object], [Object] ],\n        isLoadingThreads: false,\n        loadError: null,\n        loadThreads: [Function: mockConstructor] {\n          _isMockFunction: true,\n          getMockImplementation: [Function (anonymous)],\n          mock: [Getter/Setter],\n          mockClear: [Function (anonymous)],\n          mockReset: [Function (anonymous)],\n          mockRestore: [Function (anonymous)],\n          mockReturnValueOnce: [Function (anonymous)],\n          mockResolvedValueOnce: [Function (anonymous)],\n          mockRejectedValueOnce: [Function (anonymous)],\n          mockReturnValue: [Function (anonymous)],\n          mockResolvedValue: [Function (anonymous)],\n          mockRejectedValue: [Function (anonymous)],\n          mockImplementationOnce: [Function (anonymous)],\n          withImplementation: [Function: bound withImplementation],\n          mockImplementation: [Function (anonymous)],\n          mockReturnThis: [Function (anonymous)],\n          mockName: [Function (anonymous)],\n          getMockName: [Function (anonymous)],\n          Symbol(Symbol.dispose): [Function (anonymous)]\n        }\n      },\n      threadFilteringConfig: {\n        sortedThreads: [ [Object], [Object], [Object] ],\n        paginatedThreads: [ [Object], [Object], [Object] ],\n        totalPages: 1\n      }\n    }\n\n      at ChatSidebarTestSetup.configureChatSidebarHooks (__tests__/components/ChatSidebar/setup.tsx:377:13)\n\n  console.log\n    \ud83c\udfaf Applied mock configurations using mockImplementation with debugging\n\n      at ChatSidebarTestSetup.configureChatSidebarHooks (__tests__/components/ChatSidebar/setup.tsx:414:13)\n\n  console.log\n    \ud83d\udd25 HOOK CALLED: useChatSidebarState (CONFIGURED) {\n      searchQuery: '',\n      setSearchQuery: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      isCreatingThread: false,\n      setIsCreatingThread: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      showAllThreads: false,\n      setShowAllThreads: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      filterType: 'all',\n      setFilterType: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      currentPage: 1,\n      setCurrentPage: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      }\n    }\n\n      at Object.<anonymous> (__tests__/components/ChatSidebar/setup.tsx:385:15)\n\n  console.log\n    \ud83d\udd25 HOOK CALLED: useThreadLoader (CONFIGURED) {\n      args: [ false, 'all', 'thread-123', [AsyncFunction (anonymous)] ],\n      returning: {\n        threads: [ [Object], [Object], [Object] ],\n        isLoadingThreads: false,\n        loadError: null,\n        loadThreads: [Function: mockConstructor] {\n          _isMockFunction: true,\n          getMockImplementation: [Function (anonymous)],\n          mock: [Getter/Setter],\n          mockClear: [Function (anonymous)],\n          mockReset: [Function (anonymous)],\n          mockRestore: [Function (anonymous)],\n          mockReturnValueOnce: [Function (anonymous)],\n          mockResolvedValueOnce: [Function (anonymous)],\n          mockRejectedValueOnce: [Function (anonymous)],\n          mockReturnValue: [Function (anonymous)],\n          mockResolvedValue: [Function (anonymous)],\n          mockRejectedValue: [Function (anonymous)],\n          mockImplementationOnce: [Function (anonymous)],\n          withImplementation: [Function: bound withImplementation],\n          mockImplementation: [Function (anonymous)],\n          mockReturnThis: [Function (anonymous)],\n          mockName: [Function (anonymous)],\n          getMockName: [Function (anonymous)],\n          Symbol(Symbol.dispose): [Function (anonymous)]\n        }\n      }\n    }\n\n      at Object.<anonymous> (__tests__/components/ChatSidebar/setup.tsx:390:15)\n\n  console.log\n    \ud83d\udd25 HOOK CALLED: useThreadFiltering (CONFIGURED) {\n      threadsType: 'object',\n      isArray: true,\n      threadsLength: 3,\n      returning: {\n        sortedThreads: [ [Object], [Object], [Object] ],\n        paginatedThreads: [ [Object], [Object], [Object] ],\n        totalPages: 1\n      }\n    }\n\n      at Object.<anonymous> (__tests__/components/ChatSidebar/setup.tsx:395:15)\n\n  console.log\n    \ud83e\uddea TestChatSidebar rendering with threads: {\n      threadsLength: 3,\n      paginatedThreadsLength: 3,\n      isLoadingThreads: false,\n      loadError: null\n    }\n\n      at TestChatSidebar (__tests__/components/ChatSidebar/setup.tsx:571:11)\n\n  console.error\n    [ERROR] Failed to switch thread: TypeError: Cannot destructure property 'clearMessages' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n        at clearChatState (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\components\\chat\\ChatSidebarHandlers.ts:16:11)\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\components\\chat\\ChatSidebarHandlers.ts:95:7\n        at onClick (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\components\\chat\\ChatSidebarThreadList.tsx:169:30)\n        at executeDispatch (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16368:9)\n        at runWithFiberInDEV (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:1522:13)\n        at processDispatchQueue (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16418:19)\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:17016:9\n        at batchedUpdates$1 (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:3262:40)\n        at dispatchEventForPluginEventSystem (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16572:7)\n        at dispatchEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:20658:11)\n        at dispatchDiscreteEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:20626:11)\n        at HTMLDivElement.callTheUserObjectsOperation (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\generated\\EventListener.js:26:30)\n        at innerInvokeEventListeners (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\events\\EventTarget-impl.js:350:25)\n        at invokeEventListeners (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\events\\EventTarget-impl.js:286:3)\n        at HTMLButtonElementImpl._dispatch (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\events\\EventTarget-impl.js:233:9)\n        at HTMLButtonElementImpl.dispatchEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\events\\EventTarget-impl.js:104:17)\n        at HTMLButtonElement.dispatchEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\generated\\EventTarget.js:241:34)\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\event\\dispatchEvent.js:45:43\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\pure.js:108:16\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\act-compat.js:48:24\n        at process.env.NODE_ENV.exports.act (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react\\cjs\\react.development.js:790:22)\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\act-compat.js:47:25\n        at Object.eventWrapper (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\pure.js:107:28)\n        at Object.wrapEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\event\\wrapEvent.js:6:28)\n        at Object.dispatchEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\event\\dispatchEvent.js:45:22)\n        at Object.dispatchUIEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\event\\dispatchEvent.js:22:26)\n        at Mouse.up (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\system\\pointer\\mouse.js:100:30)\n        at PointerHost.release (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\system\\pointer\\index.js:87:24)\n        at pointerAction (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\pointer\\index.js:54:47)\n        at runNextTicks (node:internal/process/task_queues:65:5)\n        at listOnTimeout (node:internal/timers:569:9)\n        at processTimers (node:internal/timers:543:7)\n        at Object.pointer (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\pointer\\index.js:27:9)\n        at Object.asyncWrapper (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\pure.js:88:22)\n        at Object.<anonymous> (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\__tests__\\integration\\thread-navigation.test.tsx:99:7)\n\n    \u001b[0m \u001b[90m 207 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 208 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 209 |\u001b[39m     originalError\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 210 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 211 |\u001b[39m   \n     \u001b[90m 212 |\u001b[39m   console\u001b[33m.\u001b[39mwarn \u001b[33m=\u001b[39m (\u001b[33m...\u001b[39margs) \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at console.call [as error] (jest.setup.js:209:19)\n      at DebugLogger.error (utils/debug-logger.ts:57:15)\n      at components/chat/ChatSidebarHandlers.ts:108:14\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:99:7)\n\n  console.error\n    [ERROR] Failed to switch thread: TypeError: Cannot destructure property 'clearMessages' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n        at clearChatState (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\components\\chat\\ChatSidebarHandlers.ts:16:11)\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\components\\chat\\ChatSidebarHandlers.ts:95:7\n        at onClick (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\components\\chat\\ChatSidebarThreadList.tsx:169:30)\n        at executeDispatch (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16368:9)\n        at runWithFiberInDEV (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:1522:13)\n        at processDispatchQueue (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16418:19)\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:17016:9\n        at batchedUpdates$1 (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:3262:40)\n        at dispatchEventForPluginEventSystem (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16572:7)\n        at dispatchEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:20658:11)\n        at dispatchDiscreteEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:20626:11)\n        at HTMLDivElement.callTheUserObjectsOperation (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\generated\\EventListener.js:26:30)\n        at innerInvokeEventListeners (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\events\\EventTarget-impl.js:350:25)\n        at invokeEventListeners (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\events\\EventTarget-impl.js:286:3)\n        at HTMLButtonElementImpl._dispatch (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\events\\EventTarget-impl.js:233:9)\n        at HTMLButtonElementImpl.dispatchEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\events\\EventTarget-impl.js:104:17)\n        at HTMLButtonElement.dispatchEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\generated\\EventTarget.js:241:34)\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\event\\dispatchEvent.js:45:43\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\pure.js:108:16\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\act-compat.js:48:24\n        at process.env.NODE_ENV.exports.act (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react\\cjs\\react.development.js:790:22)\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\act-compat.js:47:25\n        at Object.eventWrapper (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\pure.js:107:28)\n        at Object.wrapEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\event\\wrapEvent.js:6:28)\n        at Object.dispatchEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\event\\dispatchEvent.js:45:22)\n        at Object.dispatchUIEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\event\\dispatchEvent.js:22:26)\n        at Mouse.up (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\system\\pointer\\mouse.js:100:30)\n        at PointerHost.release (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\system\\pointer\\index.js:87:24)\n        at pointerAction (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\pointer\\index.js:54:47)\n        at runNextTicks (node:internal/process/task_queues:65:5)\n        at listOnTimeout (node:internal/timers:569:9)\n        at processTimers (node:internal/timers:543:7)\n        at Object.pointer (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\pointer\\index.js:27:9)\n        at Object.asyncWrapper (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\pure.js:88:22)\n        at Object.<anonymous> (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\__tests__\\integration\\thread-navigation.test.tsx:100:7)\n\n    \u001b[0m \u001b[90m 207 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 208 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 209 |\u001b[39m     originalError\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 210 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 211 |\u001b[39m   \n     \u001b[90m 212 |\u001b[39m   console\u001b[33m.\u001b[39mwarn \u001b[33m=\u001b[39m (\u001b[33m...\u001b[39margs) \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at console.call [as error] (jest.setup.js:209:19)\n      at DebugLogger.error (utils/debug-logger.ts:57:15)\n      at components/chat/ChatSidebarHandlers.ts:108:14\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:100:7)\n\n  console.error\n    [ERROR] Failed to switch thread: TypeError: Cannot destructure property 'clearMessages' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n        at clearChatState (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\components\\chat\\ChatSidebarHandlers.ts:16:11)\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\components\\chat\\ChatSidebarHandlers.ts:95:7\n        at onClick (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\components\\chat\\ChatSidebarThreadList.tsx:169:30)\n        at executeDispatch (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16368:9)\n        at runWithFiberInDEV (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:1522:13)\n        at processDispatchQueue (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16418:19)\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:17016:9\n        at batchedUpdates$1 (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:3262:40)\n        at dispatchEventForPluginEventSystem (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16572:7)\n        at dispatchEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:20658:11)\n        at dispatchDiscreteEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:20626:11)\n        at HTMLDivElement.callTheUserObjectsOperation (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\generated\\EventListener.js:26:30)\n        at innerInvokeEventListeners (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\events\\EventTarget-impl.js:350:25)\n        at invokeEventListeners (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\events\\EventTarget-impl.js:286:3)\n        at HTMLButtonElementImpl._dispatch (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\events\\EventTarget-impl.js:233:9)\n        at HTMLButtonElementImpl.dispatchEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\events\\EventTarget-impl.js:104:17)\n        at HTMLButtonElement.dispatchEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\generated\\EventTarget.js:241:34)\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\event\\dispatchEvent.js:45:43\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\pure.js:108:16\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\act-compat.js:48:24\n        at process.env.NODE_ENV.exports.act (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react\\cjs\\react.development.js:790:22)\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\act-compat.js:47:25\n        at Object.eventWrapper (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\pure.js:107:28)\n        at Object.wrapEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\event\\wrapEvent.js:6:28)\n        at Object.dispatchEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\event\\dispatchEvent.js:45:22)\n        at Object.dispatchUIEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\event\\dispatchEvent.js:22:26)\n        at Mouse.up (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\system\\pointer\\mouse.js:100:30)\n        at PointerHost.release (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\system\\pointer\\index.js:87:24)\n        at pointerAction (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\pointer\\index.js:54:47)\n        at runNextTicks (node:internal/process/task_queues:65:5)\n        at listOnTimeout (node:internal/timers:569:9)\n        at processTimers (node:internal/timers:543:7)\n        at Object.pointer (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\pointer\\index.js:27:9)\n        at Object.asyncWrapper (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\pure.js:88:22)\n        at Object.<anonymous> (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\__tests__\\integration\\thread-navigation.test.tsx:101:7)\n\n    \u001b[0m \u001b[90m 207 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 208 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 209 |\u001b[39m     originalError\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 210 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 211 |\u001b[39m   \n     \u001b[90m 212 |\u001b[39m   console\u001b[33m.\u001b[39mwarn \u001b[33m=\u001b[39m (\u001b[33m...\u001b[39margs) \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at console.call [as error] (jest.setup.js:209:19)\n      at DebugLogger.error (utils/debug-logger.ts:57:15)\n      at components/chat/ChatSidebarHandlers.ts:108:14\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:101:7)\n\n  console.log\n    \ud83d\udd27 Configuring authentication mocks with: { isAuthenticated: true, userTier: 'Early' }\n\n      at ChatSidebarTestSetup.beforeEach (__tests__/components/ChatSidebar/setup.tsx:269:13)\n\n  console.log\n    \ud83d\udd27 configureAuthState called with overrides: { isAuthenticated: true, userTier: 'Early' }\n\n      at ChatSidebarTestSetup.configureAuthState (__tests__/components/ChatSidebar/setup.tsx:433:13)\n\n  console.log\n    \ud83c\udfaf Final authStateConfig: {\n      isAuthenticated: true,\n      isLoading: false,\n      user: { id: 'test-user-1', email: 'test@example.com', role: 'user' },\n      userTier: 'Early',\n      error: null,\n      refreshAuth: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      logout: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      clearError: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      hasPermission: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      isAdminOrHigher: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      isDeveloperOrHigher: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      }\n    }\n\n      at ChatSidebarTestSetup.configureAuthState (__tests__/components/ChatSidebar/setup.tsx:434:13)\n\n  console.log\n    \ud83d\udd27 configureChatSidebarHooks called with: {\n      threadsProvided: true,\n      threadsCount: 3,\n      threadIds: [ 'thread-1', 'thread-2', 'thread-3' ]\n    }\n\n      at ChatSidebarTestSetup.configureChatSidebarHooks (__tests__/components/ChatSidebar/setup.tsx:339:13)\n\n  console.log\n    \ud83c\udfaf Mock configurations: {\n      threadLoaderConfig: {\n        threads: [ [Object], [Object], [Object] ],\n        isLoadingThreads: false,\n        loadError: null,\n        loadThreads: [Function: mockConstructor] {\n          _isMockFunction: true,\n          getMockImplementation: [Function (anonymous)],\n          mock: [Getter/Setter],\n          mockClear: [Function (anonymous)],\n          mockReset: [Function (anonymous)],\n          mockRestore: [Function (anonymous)],\n          mockReturnValueOnce: [Function (anonymous)],\n          mockResolvedValueOnce: [Function (anonymous)],\n          mockRejectedValueOnce: [Function (anonymous)],\n          mockReturnValue: [Function (anonymous)],\n          mockResolvedValue: [Function (anonymous)],\n          mockRejectedValue: [Function (anonymous)],\n          mockImplementationOnce: [Function (anonymous)],\n          withImplementation: [Function: bound withImplementation],\n          mockImplementation: [Function (anonymous)],\n          mockReturnThis: [Function (anonymous)],\n          mockName: [Function (anonymous)],\n          getMockName: [Function (anonymous)],\n          Symbol(Symbol.dispose): [Function (anonymous)]\n        },\n        switchThread: [Function: mockConstructor] {\n          _isMockFunction: true,\n          getMockImplementation: [Function (anonymous)],\n          mock: [Getter/Setter],\n          mockClear: [Function (anonymous)],\n          mockReset: [Function (anonymous)],\n          mockRestore: [Function (anonymous)],\n          mockReturnValueOnce: [Function (anonymous)],\n          mockResolvedValueOnce: [Function (anonymous)],\n          mockRejectedValueOnce: [Function (anonymous)],\n          mockReturnValue: [Function (anonymous)],\n          mockResolvedValue: [Function (anonymous)],\n          mockRejectedValue: [Function (anonymous)],\n          mockImplementationOnce: [Function (anonymous)],\n          withImplementation: [Function: bound withImplementation],\n          mockImplementation: [Function (anonymous)],\n          mockReturnThis: [Function (anonymous)],\n          mockName: [Function (anonymous)],\n          getMockName: [Function (anonymous)],\n          Symbol(Symbol.dispose): [Function (anonymous)]\n        }\n      },\n      threadFilteringConfig: {\n        sortedThreads: [ [Object], [Object], [Object] ],\n        paginatedThreads: [ [Object], [Object], [Object] ],\n        totalPages: 1\n      }\n    }\n\n      at ChatSidebarTestSetup.configureChatSidebarHooks (__tests__/components/ChatSidebar/setup.tsx:377:13)\n\n  console.log\n    \ud83c\udfaf Applied mock configurations using mockImplementation with debugging\n\n      at ChatSidebarTestSetup.configureChatSidebarHooks (__tests__/components/ChatSidebar/setup.tsx:414:13)\n\n  console.log\n    \ud83d\udd25 HOOK CALLED: useChatSidebarState (CONFIGURED) {\n      searchQuery: '',\n      setSearchQuery: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      isCreatingThread: false,\n      setIsCreatingThread: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      showAllThreads: false,\n      setShowAllThreads: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      filterType: 'all',\n      setFilterType: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      currentPage: 1,\n      setCurrentPage: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      }\n    }\n\n      at Object.<anonymous> (__tests__/components/ChatSidebar/setup.tsx:385:15)\n\n  console.log\n    \ud83d\udd25 HOOK CALLED: useThreadLoader (CONFIGURED) {\n      args: [ false, 'all', 'thread-123', [AsyncFunction (anonymous)] ],\n      returning: {\n        threads: [ [Object], [Object], [Object] ],\n        isLoadingThreads: false,\n        loadError: null,\n        loadThreads: [Function: mockConstructor] {\n          _isMockFunction: true,\n          getMockImplementation: [Function (anonymous)],\n          mock: [Getter/Setter],\n          mockClear: [Function (anonymous)],\n          mockReset: [Function (anonymous)],\n          mockRestore: [Function (anonymous)],\n          mockReturnValueOnce: [Function (anonymous)],\n          mockResolvedValueOnce: [Function (anonymous)],\n          mockRejectedValueOnce: [Function (anonymous)],\n          mockReturnValue: [Function (anonymous)],\n          mockResolvedValue: [Function (anonymous)],\n          mockRejectedValue: [Function (anonymous)],\n          mockImplementationOnce: [Function (anonymous)],\n          withImplementation: [Function: bound withImplementation],\n          mockImplementation: [Function (anonymous)],\n          mockReturnThis: [Function (anonymous)],\n          mockName: [Function (anonymous)],\n          getMockName: [Function (anonymous)],\n          Symbol(Symbol.dispose): [Function (anonymous)]\n        },\n        switchThread: [Function: mockConstructor] {\n          _isMockFunction: true,\n          getMockImplementation: [Function (anonymous)],\n          mock: [Getter/Setter],\n          mockClear: [Function (anonymous)],\n          mockReset: [Function (anonymous)],\n          mockRestore: [Function (anonymous)],\n          mockReturnValueOnce: [Function (anonymous)],\n          mockResolvedValueOnce: [Function (anonymous)],\n          mockRejectedValueOnce: [Function (anonymous)],\n          mockReturnValue: [Function (anonymous)],\n          mockResolvedValue: [Function (anonymous)],\n          mockRejectedValue: [Function (anonymous)],\n          mockImplementationOnce: [Function (anonymous)],\n          withImplementation: [Function: bound withImplementation],\n          mockImplementation: [Function (anonymous)],\n          mockReturnThis: [Function (anonymous)],\n          mockName: [Function (anonymous)],\n          getMockName: [Function (anonymous)],\n          Symbol(Symbol.dispose): [Function (anonymous)]\n        }\n      }\n    }\n\n      at Object.<anonymous> (__tests__/components/ChatSidebar/setup.tsx:390:15)\n\n  console.log\n    \ud83d\udd25 HOOK CALLED: useThreadFiltering (CONFIGURED) {\n      threadsType: 'object',\n      isArray: true,\n      threadsLength: 3,\n      returning: {\n        sortedThreads: [ [Object], [Object], [Object] ],\n        paginatedThreads: [ [Object], [Object], [Object] ],\n        totalPages: 1\n      }\n    }\n\n      at Object.<anonymous> (__tests__/components/ChatSidebar/setup.tsx:395:15)\n\n  console.log\n    \ud83e\uddea TestChatSidebar rendering with threads: {\n      threadsLength: 3,\n      paginatedThreadsLength: 3,\n      isLoadingThreads: false,\n      loadError: null\n    }\n\n      at TestChatSidebar (__tests__/components/ChatSidebar/setup.tsx:571:11)\n\n  console.error\n    [ERROR] Failed to switch thread: TypeError: Cannot destructure property 'clearMessages' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n        at clearChatState (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\components\\chat\\ChatSidebarHandlers.ts:16:11)\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\components\\chat\\ChatSidebarHandlers.ts:95:7\n        at onClick (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\components\\chat\\ChatSidebarThreadList.tsx:169:30)\n        at executeDispatch (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16368:9)\n        at runWithFiberInDEV (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:1522:13)\n        at processDispatchQueue (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16418:19)\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:17016:9\n        at batchedUpdates$1 (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:3262:40)\n        at dispatchEventForPluginEventSystem (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16572:7)\n        at dispatchEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:20658:11)\n        at dispatchDiscreteEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:20626:11)\n        at HTMLDivElement.callTheUserObjectsOperation (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\generated\\EventListener.js:26:30)\n        at innerInvokeEventListeners (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\events\\EventTarget-impl.js:350:25)\n        at invokeEventListeners (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\events\\EventTarget-impl.js:286:3)\n        at HTMLButtonElementImpl._dispatch (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\events\\EventTarget-impl.js:233:9)\n        at HTMLButtonElementImpl.dispatchEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\events\\EventTarget-impl.js:104:17)\n        at HTMLButtonElement.dispatchEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\generated\\EventTarget.js:241:34)\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\event\\dispatchEvent.js:45:43\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\pure.js:108:16\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\act-compat.js:48:24\n        at process.env.NODE_ENV.exports.act (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react\\cjs\\react.development.js:790:22)\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\act-compat.js:47:25\n        at Object.eventWrapper (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\pure.js:107:28)\n        at Object.wrapEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\event\\wrapEvent.js:6:28)\n        at Object.dispatchEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\event\\dispatchEvent.js:45:22)\n        at Object.dispatchUIEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\event\\dispatchEvent.js:22:26)\n        at Mouse.up (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\system\\pointer\\mouse.js:100:30)\n        at PointerHost.release (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\system\\pointer\\index.js:87:24)\n        at pointerAction (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\pointer\\index.js:54:47)\n        at runNextTicks (node:internal/process/task_queues:65:5)\n        at listOnTimeout (node:internal/timers:569:9)\n        at processTimers (node:internal/timers:543:7)\n        at Object.pointer (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\pointer\\index.js:27:9)\n        at Object.asyncWrapper (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\pure.js:88:22)\n        at Object.<anonymous> (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\__tests__\\integration\\thread-navigation.test.tsx:124:7)\n\n    \u001b[0m \u001b[90m 207 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 208 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 209 |\u001b[39m     originalError\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 210 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 211 |\u001b[39m   \n     \u001b[90m 212 |\u001b[39m   console\u001b[33m.\u001b[39mwarn \u001b[33m=\u001b[39m (\u001b[33m...\u001b[39margs) \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at console.call [as error] (jest.setup.js:209:19)\n      at DebugLogger.error (utils/debug-logger.ts:57:15)\n      at components/chat/ChatSidebarHandlers.ts:108:14\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:124:7)\n\n  console.error\n    [ERROR] Failed to switch thread: TypeError: Cannot destructure property 'clearMessages' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n        at clearChatState (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\components\\chat\\ChatSidebarHandlers.ts:16:11)\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\components\\chat\\ChatSidebarHandlers.ts:95:7\n        at onClick (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\components\\chat\\ChatSidebarThreadList.tsx:169:30)\n        at executeDispatch (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16368:9)\n        at runWithFiberInDEV (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:1522:13)\n        at processDispatchQueue (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16418:19)\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:17016:9\n        at batchedUpdates$1 (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:3262:40)\n        at dispatchEventForPluginEventSystem (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16572:7)\n        at dispatchEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:20658:11)\n        at dispatchDiscreteEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:20626:11)\n        at HTMLDivElement.callTheUserObjectsOperation (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\generated\\EventListener.js:26:30)\n        at innerInvokeEventListeners (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\events\\EventTarget-impl.js:350:25)\n        at invokeEventListeners (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\events\\EventTarget-impl.js:286:3)\n        at HTMLButtonElementImpl._dispatch (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\events\\EventTarget-impl.js:233:9)\n        at HTMLButtonElementImpl.dispatchEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\events\\EventTarget-impl.js:104:17)\n        at HTMLButtonElement.dispatchEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\generated\\EventTarget.js:241:34)\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\event\\dispatchEvent.js:45:43\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\pure.js:108:16\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\act-compat.js:48:24\n        at process.env.NODE_ENV.exports.act (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react\\cjs\\react.development.js:790:22)\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\act-compat.js:47:25\n        at Object.eventWrapper (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\pure.js:107:28)\n        at Object.wrapEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\event\\wrapEvent.js:6:28)\n        at Object.dispatchEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\event\\dispatchEvent.js:45:22)\n        at Object.dispatchUIEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\event\\dispatchEvent.js:22:26)\n        at Mouse.up (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\system\\pointer\\mouse.js:100:30)\n        at PointerHost.release (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\system\\pointer\\index.js:87:24)\n        at pointerAction (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\pointer\\index.js:54:47)\n        at runNextTicks (node:internal/process/task_queues:65:5)\n        at listOnTimeout (node:internal/timers:569:9)\n        at processTimers (node:internal/timers:543:7)\n        at Object.pointer (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\pointer\\index.js:27:9)\n        at Object.asyncWrapper (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\pure.js:88:22)\n        at Object.<anonymous> (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\__tests__\\integration\\thread-navigation.test.tsx:125:7)\n\n    \u001b[0m \u001b[90m 207 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 208 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 209 |\u001b[39m     originalError\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 210 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 211 |\u001b[39m   \n     \u001b[90m 212 |\u001b[39m   console\u001b[33m.\u001b[39mwarn \u001b[33m=\u001b[39m (\u001b[33m...\u001b[39margs) \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at console.call [as error] (jest.setup.js:209:19)\n      at DebugLogger.error (utils/debug-logger.ts:57:15)\n      at components/chat/ChatSidebarHandlers.ts:108:14\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:125:7)\n\n  console.error\n    [ERROR] Failed to switch thread: TypeError: Cannot destructure property 'clearMessages' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n        at clearChatState (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\components\\chat\\ChatSidebarHandlers.ts:16:11)\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\components\\chat\\ChatSidebarHandlers.ts:95:7\n        at onClick (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\components\\chat\\ChatSidebarThreadList.tsx:169:30)\n        at executeDispatch (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16368:9)\n        at runWithFiberInDEV (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:1522:13)\n        at processDispatchQueue (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16418:19)\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:17016:9\n        at batchedUpdates$1 (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:3262:40)\n        at dispatchEventForPluginEventSystem (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16572:7)\n        at dispatchEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:20658:11)\n        at dispatchDiscreteEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:20626:11)\n        at HTMLDivElement.callTheUserObjectsOperation (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\generated\\EventListener.js:26:30)\n        at innerInvokeEventListeners (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\events\\EventTarget-impl.js:350:25)\n        at invokeEventListeners (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\events\\EventTarget-impl.js:286:3)\n        at HTMLButtonElementImpl._dispatch (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\events\\EventTarget-impl.js:233:9)\n        at HTMLButtonElementImpl.dispatchEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\events\\EventTarget-impl.js:104:17)\n        at HTMLButtonElement.dispatchEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\generated\\EventTarget.js:241:34)\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\event\\dispatchEvent.js:45:43\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\pure.js:108:16\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\act-compat.js:48:24\n        at process.env.NODE_ENV.exports.act (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react\\cjs\\react.development.js:790:22)\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\act-compat.js:47:25\n        at Object.eventWrapper (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\pure.js:107:28)\n        at Object.wrapEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\event\\wrapEvent.js:6:28)\n        at Object.dispatchEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\event\\dispatchEvent.js:45:22)\n        at Object.dispatchUIEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\event\\dispatchEvent.js:22:26)\n        at Mouse.up (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\system\\pointer\\mouse.js:100:30)\n        at PointerHost.release (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\system\\pointer\\index.js:87:24)\n        at pointerAction (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\pointer\\index.js:54:47)\n        at runNextTicks (node:internal/process/task_queues:65:5)\n        at listOnTimeout (node:internal/timers:569:9)\n        at processTimers (node:internal/timers:543:7)\n        at Object.pointer (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\pointer\\index.js:27:9)\n        at Object.asyncWrapper (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\pure.js:88:22)\n        at Object.<anonymous> (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\__tests__\\integration\\thread-navigation.test.tsx:126:7)\n\n    \u001b[0m \u001b[90m 207 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 208 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 209 |\u001b[39m     originalError\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 210 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 211 |\u001b[39m   \n     \u001b[90m 212 |\u001b[39m   console\u001b[33m.\u001b[39mwarn \u001b[33m=\u001b[39m (\u001b[33m...\u001b[39margs) \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at console.call [as error] (jest.setup.js:209:19)\n      at DebugLogger.error (utils/debug-logger.ts:57:15)\n      at components/chat/ChatSidebarHandlers.ts:108:14\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:126:7)\n\n  console.log\n    \ud83d\udd27 Configuring authentication mocks with: { isAuthenticated: true, userTier: 'Early' }\n\n      at ChatSidebarTestSetup.beforeEach (__tests__/components/ChatSidebar/setup.tsx:269:13)\n\n  console.log\n    \ud83d\udd27 configureAuthState called with overrides: { isAuthenticated: true, userTier: 'Early' }\n\n      at ChatSidebarTestSetup.configureAuthState (__tests__/components/ChatSidebar/setup.tsx:433:13)\n\n  console.log\n    \ud83c\udfaf Final authStateConfig: {\n      isAuthenticated: true,\n      isLoading: false,\n      user: { id: 'test-user-1', email: 'test@example.com', role: 'user' },\n      userTier: 'Early',\n      error: null,\n      refreshAuth: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      logout: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      clearError: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      hasPermission: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      isAdminOrHigher: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      isDeveloperOrHigher: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      }\n    }\n\n      at ChatSidebarTestSetup.configureAuthState (__tests__/components/ChatSidebar/setup.tsx:434:13)\n\n  console.log\n    \ud83d\udd27 configureChatSidebarHooks called with: {\n      threadsProvided: true,\n      threadsCount: 3,\n      threadIds: [ 'thread-1', 'thread-2', 'thread-3' ]\n    }\n\n      at ChatSidebarTestSetup.configureChatSidebarHooks (__tests__/components/ChatSidebar/setup.tsx:339:13)\n\n  console.log\n    \ud83c\udfaf Mock configurations: {\n      threadLoaderConfig: {\n        threads: [ [Object], [Object], [Object] ],\n        isLoadingThreads: false,\n        loadError: null,\n        loadThreads: [Function: mockConstructor] {\n          _isMockFunction: true,\n          getMockImplementation: [Function (anonymous)],\n          mock: [Getter/Setter],\n          mockClear: [Function (anonymous)],\n          mockReset: [Function (anonymous)],\n          mockRestore: [Function (anonymous)],\n          mockReturnValueOnce: [Function (anonymous)],\n          mockResolvedValueOnce: [Function (anonymous)],\n          mockRejectedValueOnce: [Function (anonymous)],\n          mockReturnValue: [Function (anonymous)],\n          mockResolvedValue: [Function (anonymous)],\n          mockRejectedValue: [Function (anonymous)],\n          mockImplementationOnce: [Function (anonymous)],\n          withImplementation: [Function: bound withImplementation],\n          mockImplementation: [Function (anonymous)],\n          mockReturnThis: [Function (anonymous)],\n          mockName: [Function (anonymous)],\n          getMockName: [Function (anonymous)],\n          Symbol(Symbol.dispose): [Function (anonymous)]\n        }\n      },\n      threadFilteringConfig: {\n        sortedThreads: [ [Object], [Object], [Object] ],\n        paginatedThreads: [ [Object], [Object], [Object] ],\n        totalPages: 1\n      }\n    }\n\n      at ChatSidebarTestSetup.configureChatSidebarHooks (__tests__/components/ChatSidebar/setup.tsx:377:13)\n\n  console.log\n    \ud83c\udfaf Applied mock configurations using mockImplementation with debugging\n\n      at ChatSidebarTestSetup.configureChatSidebarHooks (__tests__/components/ChatSidebar/setup.tsx:414:13)\n\n  console.log\n    \ud83d\udd25 HOOK CALLED: useChatSidebarState (CONFIGURED) {\n      searchQuery: '',\n      setSearchQuery: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      isCreatingThread: false,\n      setIsCreatingThread: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      showAllThreads: false,\n      setShowAllThreads: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      filterType: 'all',\n      setFilterType: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      currentPage: 1,\n      setCurrentPage: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      }\n    }\n\n      at Object.<anonymous> (__tests__/components/ChatSidebar/setup.tsx:385:15)\n\n  console.log\n    \ud83d\udd25 HOOK CALLED: useThreadLoader (CONFIGURED) {\n      args: [ false, 'all', 'thread-123', [AsyncFunction (anonymous)] ],\n      returning: {\n        threads: [ [Object], [Object], [Object] ],\n        isLoadingThreads: false,\n        loadError: null,\n        loadThreads: [Function: mockConstructor] {\n          _isMockFunction: true,\n          getMockImplementation: [Function (anonymous)],\n          mock: [Getter/Setter],\n          mockClear: [Function (anonymous)],\n          mockReset: [Function (anonymous)],\n          mockRestore: [Function (anonymous)],\n          mockReturnValueOnce: [Function (anonymous)],\n          mockResolvedValueOnce: [Function (anonymous)],\n          mockRejectedValueOnce: [Function (anonymous)],\n          mockReturnValue: [Function (anonymous)],\n          mockResolvedValue: [Function (anonymous)],\n          mockRejectedValue: [Function (anonymous)],\n          mockImplementationOnce: [Function (anonymous)],\n          withImplementation: [Function: bound withImplementation],\n          mockImplementation: [Function (anonymous)],\n          mockReturnThis: [Function (anonymous)],\n          mockName: [Function (anonymous)],\n          getMockName: [Function (anonymous)],\n          Symbol(Symbol.dispose): [Function (anonymous)]\n        }\n      }\n    }\n\n      at Object.<anonymous> (__tests__/components/ChatSidebar/setup.tsx:390:15)\n\n  console.log\n    \ud83d\udd25 HOOK CALLED: useThreadFiltering (CONFIGURED) {\n      threadsType: 'object',\n      isArray: true,\n      threadsLength: 3,\n      returning: {\n        sortedThreads: [ [Object], [Object], [Object] ],\n        paginatedThreads: [ [Object], [Object], [Object] ],\n        totalPages: 1\n      }\n    }\n\n      at Object.<anonymous> (__tests__/components/ChatSidebar/setup.tsx:395:15)\n\n  console.log\n    \ud83e\uddea TestChatSidebar rendering with threads: {\n      threadsLength: 3,\n      paginatedThreadsLength: 3,\n      isLoadingThreads: false,\n      loadError: null\n    }\n\n      at TestChatSidebar (__tests__/components/ChatSidebar/setup.tsx:571:11)\n\n  console.error\n    [ERROR] Failed to switch thread: TypeError: Cannot destructure property 'clearMessages' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n        at clearChatState (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\components\\chat\\ChatSidebarHandlers.ts:16:11)\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\components\\chat\\ChatSidebarHandlers.ts:95:7\n        at onClick (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\components\\chat\\ChatSidebarThreadList.tsx:169:30)\n        at executeDispatch (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16368:9)\n        at runWithFiberInDEV (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:1522:13)\n        at processDispatchQueue (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16418:19)\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:17016:9\n        at batchedUpdates$1 (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:3262:40)\n        at dispatchEventForPluginEventSystem (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16572:7)\n        at dispatchEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:20658:11)\n        at dispatchDiscreteEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:20626:11)\n        at HTMLDivElement.callTheUserObjectsOperation (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\generated\\EventListener.js:26:30)\n        at innerInvokeEventListeners (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\events\\EventTarget-impl.js:350:25)\n        at invokeEventListeners (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\events\\EventTarget-impl.js:286:3)\n        at HTMLButtonElementImpl._dispatch (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\events\\EventTarget-impl.js:233:9)\n        at HTMLButtonElementImpl.dispatchEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\events\\EventTarget-impl.js:104:17)\n        at HTMLButtonElement.dispatchEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\generated\\EventTarget.js:241:34)\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\event\\dispatchEvent.js:45:43\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\pure.js:108:16\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\act-compat.js:48:24\n        at process.env.NODE_ENV.exports.act (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react\\cjs\\react.development.js:790:22)\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\act-compat.js:47:25\n        at Object.eventWrapper (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\pure.js:107:28)\n        at Object.wrapEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\event\\wrapEvent.js:6:28)\n        at Object.dispatchEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\event\\dispatchEvent.js:45:22)\n        at Object.dispatchUIEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\event\\dispatchEvent.js:22:26)\n        at Mouse.up (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\system\\pointer\\mouse.js:100:30)\n        at PointerHost.release (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\system\\pointer\\index.js:87:24)\n        at pointerAction (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\pointer\\index.js:54:47)\n        at runNextTicks (node:internal/process/task_queues:65:5)\n        at listOnTimeout (node:internal/timers:569:9)\n        at processTimers (node:internal/timers:543:7)\n        at Object.pointer (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\pointer\\index.js:27:9)\n        at Object.asyncWrapper (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\pure.js:88:22)\n        at Object.<anonymous> (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\__tests__\\integration\\thread-navigation.test.tsx:145:7)\n\n    \u001b[0m \u001b[90m 207 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 208 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 209 |\u001b[39m     originalError\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 210 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 211 |\u001b[39m   \n     \u001b[90m 212 |\u001b[39m   console\u001b[33m.\u001b[39mwarn \u001b[33m=\u001b[39m (\u001b[33m...\u001b[39margs) \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at console.call [as error] (jest.setup.js:209:19)\n      at DebugLogger.error (utils/debug-logger.ts:57:15)\n      at components/chat/ChatSidebarHandlers.ts:108:14\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:145:7)\n\n  console.log\n    \ud83d\udd27 Configuring authentication mocks with: { isAuthenticated: true, userTier: 'Early' }\n\n      at ChatSidebarTestSetup.beforeEach (__tests__/components/ChatSidebar/setup.tsx:269:13)\n\n  console.log\n    \ud83d\udd27 configureAuthState called with overrides: { isAuthenticated: true, userTier: 'Early' }\n\n      at ChatSidebarTestSetup.configureAuthState (__tests__/components/ChatSidebar/setup.tsx:433:13)\n\n  console.log\n    \ud83c\udfaf Final authStateConfig: {\n      isAuthenticated: true,\n      isLoading: false,\n      user: { id: 'test-user-1', email: 'test@example.com', role: 'user' },\n      userTier: 'Early',\n      error: null,\n      refreshAuth: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      logout: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      clearError: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      hasPermission: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      isAdminOrHigher: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      isDeveloperOrHigher: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      }\n    }\n\n      at ChatSidebarTestSetup.configureAuthState (__tests__/components/ChatSidebar/setup.tsx:434:13)\n\n  console.log\n    \ud83d\udd27 configureChatSidebarHooks called with: {\n      threadsProvided: true,\n      threadsCount: 3,\n      threadIds: [ 'thread-1', 'thread-2', 'thread-3' ]\n    }\n\n      at ChatSidebarTestSetup.configureChatSidebarHooks (__tests__/components/ChatSidebar/setup.tsx:339:13)\n\n  console.log\n    \ud83c\udfaf Mock configurations: {\n      threadLoaderConfig: {\n        threads: [ [Object], [Object], [Object] ],\n        isLoadingThreads: false,\n        loadError: null,\n        loadThreads: [Function: mockConstructor] {\n          _isMockFunction: true,\n          getMockImplementation: [Function (anonymous)],\n          mock: [Getter/Setter],\n          mockClear: [Function (anonymous)],\n          mockReset: [Function (anonymous)],\n          mockRestore: [Function (anonymous)],\n          mockReturnValueOnce: [Function (anonymous)],\n          mockResolvedValueOnce: [Function (anonymous)],\n          mockRejectedValueOnce: [Function (anonymous)],\n          mockReturnValue: [Function (anonymous)],\n          mockResolvedValue: [Function (anonymous)],\n          mockRejectedValue: [Function (anonymous)],\n          mockImplementationOnce: [Function (anonymous)],\n          withImplementation: [Function: bound withImplementation],\n          mockImplementation: [Function (anonymous)],\n          mockReturnThis: [Function (anonymous)],\n          mockName: [Function (anonymous)],\n          getMockName: [Function (anonymous)],\n          Symbol(Symbol.dispose): [Function (anonymous)]\n        }\n      },\n      threadFilteringConfig: {\n        sortedThreads: [ [Object], [Object], [Object] ],\n        paginatedThreads: [ [Object], [Object], [Object] ],\n        totalPages: 1\n      }\n    }\n\n      at ChatSidebarTestSetup.configureChatSidebarHooks (__tests__/components/ChatSidebar/setup.tsx:377:13)\n\n  console.log\n    \ud83c\udfaf Applied mock configurations using mockImplementation with debugging\n\n      at ChatSidebarTestSetup.configureChatSidebarHooks (__tests__/components/ChatSidebar/setup.tsx:414:13)\n\n  console.log\n    \ud83d\udd25 HOOK CALLED: useChatSidebarState (CONFIGURED) {\n      searchQuery: '',\n      setSearchQuery: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      isCreatingThread: false,\n      setIsCreatingThread: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      showAllThreads: false,\n      setShowAllThreads: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      filterType: 'all',\n      setFilterType: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      currentPage: 1,\n      setCurrentPage: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      }\n    }\n\n      at Object.<anonymous> (__tests__/components/ChatSidebar/setup.tsx:385:15)\n\n  console.log\n    \ud83d\udd25 HOOK CALLED: useThreadLoader (CONFIGURED) {\n      args: [ false, 'all', 'thread-3', [AsyncFunction (anonymous)] ],\n      returning: {\n        threads: [ [Object], [Object], [Object] ],\n        isLoadingThreads: false,\n        loadError: null,\n        loadThreads: [Function: mockConstructor] {\n          _isMockFunction: true,\n          getMockImplementation: [Function (anonymous)],\n          mock: [Getter/Setter],\n          mockClear: [Function (anonymous)],\n          mockReset: [Function (anonymous)],\n          mockRestore: [Function (anonymous)],\n          mockReturnValueOnce: [Function (anonymous)],\n          mockResolvedValueOnce: [Function (anonymous)],\n          mockRejectedValueOnce: [Function (anonymous)],\n          mockReturnValue: [Function (anonymous)],\n          mockResolvedValue: [Function (anonymous)],\n          mockRejectedValue: [Function (anonymous)],\n          mockImplementationOnce: [Function (anonymous)],\n          withImplementation: [Function: bound withImplementation],\n          mockImplementation: [Function (anonymous)],\n          mockReturnThis: [Function (anonymous)],\n          mockName: [Function (anonymous)],\n          getMockName: [Function (anonymous)],\n          Symbol(Symbol.dispose): [Function (anonymous)]\n        }\n      }\n    }\n\n      at Object.<anonymous> (__tests__/components/ChatSidebar/setup.tsx:390:15)\n\n  console.log\n    \ud83d\udd25 HOOK CALLED: useThreadFiltering (CONFIGURED) {\n      threadsType: 'object',\n      isArray: true,\n      threadsLength: 3,\n      returning: {\n        sortedThreads: [ [Object], [Object], [Object] ],\n        paginatedThreads: [ [Object], [Object], [Object] ],\n        totalPages: 1\n      }\n    }\n\n      at Object.<anonymous> (__tests__/components/ChatSidebar/setup.tsx:395:15)\n\n  console.log\n    \ud83e\uddea TestChatSidebar rendering with threads: {\n      threadsLength: 3,\n      paginatedThreadsLength: 3,\n      isLoadingThreads: false,\n      loadError: null\n    }\n\n      at TestChatSidebar (__tests__/components/ChatSidebar/setup.tsx:571:11)\n\n  console.log\n    \ud83d\udd27 Configuring authentication mocks with: { isAuthenticated: true, userTier: 'Early' }\n\n      at ChatSidebarTestSetup.beforeEach (__tests__/components/ChatSidebar/setup.tsx:269:13)\n\n  console.log\n    \ud83d\udd27 configureAuthState called with overrides: { isAuthenticated: true, userTier: 'Early' }\n\n      at ChatSidebarTestSetup.configureAuthState (__tests__/components/ChatSidebar/setup.tsx:433:13)\n\n  console.log\n    \ud83c\udfaf Final authStateConfig: {\n      isAuthenticated: true,\n      isLoading: false,\n      user: { id: 'test-user-1', email: 'test@example.com', role: 'user' },\n      userTier: 'Early',\n      error: null,\n      refreshAuth: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      logout: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      clearError: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      hasPermission: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      isAdminOrHigher: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      isDeveloperOrHigher: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      }\n    }\n\n      at ChatSidebarTestSetup.configureAuthState (__tests__/components/ChatSidebar/setup.tsx:434:13)\n\n  console.log\n    \ud83d\udd27 configureChatSidebarHooks called with: {\n      threadsProvided: true,\n      threadsCount: 3,\n      threadIds: [ 'thread-1', 'thread-2', 'thread-3' ]\n    }\n\n      at ChatSidebarTestSetup.configureChatSidebarHooks (__tests__/components/ChatSidebar/setup.tsx:339:13)\n\n  console.log\n    \ud83c\udfaf Mock configurations: {\n      threadLoaderConfig: {\n        threads: [ [Object], [Object], [Object] ],\n        isLoadingThreads: false,\n        loadError: null,\n        loadThreads: [Function: mockConstructor] {\n          _isMockFunction: true,\n          getMockImplementation: [Function (anonymous)],\n          mock: [Getter/Setter],\n          mockClear: [Function (anonymous)],\n          mockReset: [Function (anonymous)],\n          mockRestore: [Function (anonymous)],\n          mockReturnValueOnce: [Function (anonymous)],\n          mockResolvedValueOnce: [Function (anonymous)],\n          mockRejectedValueOnce: [Function (anonymous)],\n          mockReturnValue: [Function (anonymous)],\n          mockResolvedValue: [Function (anonymous)],\n          mockRejectedValue: [Function (anonymous)],\n          mockImplementationOnce: [Function (anonymous)],\n          withImplementation: [Function: bound withImplementation],\n          mockImplementation: [Function (anonymous)],\n          mockReturnThis: [Function (anonymous)],\n          mockName: [Function (anonymous)],\n          getMockName: [Function (anonymous)],\n          Symbol(Symbol.dispose): [Function (anonymous)]\n        }\n      },\n      threadFilteringConfig: {\n        sortedThreads: [ [Object], [Object], [Object] ],\n        paginatedThreads: [ [Object], [Object], [Object] ],\n        totalPages: 1\n      }\n    }\n\n      at ChatSidebarTestSetup.configureChatSidebarHooks (__tests__/components/ChatSidebar/setup.tsx:377:13)\n\n  console.log\n    \ud83c\udfaf Applied mock configurations using mockImplementation with debugging\n\n      at ChatSidebarTestSetup.configureChatSidebarHooks (__tests__/components/ChatSidebar/setup.tsx:414:13)\n\n  console.log\n    \ud83d\udd25 HOOK CALLED: useChatSidebarState (CONFIGURED) {\n      searchQuery: '',\n      setSearchQuery: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      isCreatingThread: false,\n      setIsCreatingThread: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      showAllThreads: false,\n      setShowAllThreads: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      filterType: 'all',\n      setFilterType: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      currentPage: 1,\n      setCurrentPage: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      }\n    }\n\n      at Object.<anonymous> (__tests__/components/ChatSidebar/setup.tsx:385:15)\n\n  console.log\n    \ud83d\udd25 HOOK CALLED: useThreadLoader (CONFIGURED) {\n      args: [ false, 'all', 'thread-123', [AsyncFunction (anonymous)] ],\n      returning: {\n        threads: [ [Object], [Object], [Object] ],\n        isLoadingThreads: false,\n        loadError: null,\n        loadThreads: [Function: mockConstructor] {\n          _isMockFunction: true,\n          getMockImplementation: [Function (anonymous)],\n          mock: [Getter/Setter],\n          mockClear: [Function (anonymous)],\n          mockReset: [Function (anonymous)],\n          mockRestore: [Function (anonymous)],\n          mockReturnValueOnce: [Function (anonymous)],\n          mockResolvedValueOnce: [Function (anonymous)],\n          mockRejectedValueOnce: [Function (anonymous)],\n          mockReturnValue: [Function (anonymous)],\n          mockResolvedValue: [Function (anonymous)],\n          mockRejectedValue: [Function (anonymous)],\n          mockImplementationOnce: [Function (anonymous)],\n          withImplementation: [Function: bound withImplementation],\n          mockImplementation: [Function (anonymous)],\n          mockReturnThis: [Function (anonymous)],\n          mockName: [Function (anonymous)],\n          getMockName: [Function (anonymous)],\n          Symbol(Symbol.dispose): [Function (anonymous)]\n        }\n      }\n    }\n\n      at Object.<anonymous> (__tests__/components/ChatSidebar/setup.tsx:390:15)\n\n  console.log\n    \ud83d\udd25 HOOK CALLED: useThreadFiltering (CONFIGURED) {\n      threadsType: 'object',\n      isArray: true,\n      threadsLength: 3,\n      returning: {\n        sortedThreads: [ [Object], [Object], [Object] ],\n        paginatedThreads: [ [Object], [Object], [Object] ],\n        totalPages: 1\n      }\n    }\n\n      at Object.<anonymous> (__tests__/components/ChatSidebar/setup.tsx:395:15)\n\n  console.log\n    \ud83e\uddea TestChatSidebar rendering with threads: {\n      threadsLength: 3,\n      paginatedThreadsLength: 3,\n      isLoadingThreads: false,\n      loadError: null\n    }\n\n      at TestChatSidebar (__tests__/components/ChatSidebar/setup.tsx:571:11)\n\n  console.error\n    [ERROR] Failed to switch thread: TypeError: Cannot destructure property 'clearMessages' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n        at clearChatState (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\components\\chat\\ChatSidebarHandlers.ts:16:11)\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\components\\chat\\ChatSidebarHandlers.ts:95:7\n        at onClick (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\components\\chat\\ChatSidebarThreadList.tsx:169:30)\n        at executeDispatch (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16368:9)\n        at runWithFiberInDEV (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:1522:13)\n        at processDispatchQueue (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16418:19)\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:17016:9\n        at batchedUpdates$1 (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:3262:40)\n        at dispatchEventForPluginEventSystem (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16572:7)\n        at dispatchEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:20658:11)\n        at dispatchDiscreteEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:20626:11)\n        at HTMLDivElement.callTheUserObjectsOperation (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\generated\\EventListener.js:26:30)\n        at innerInvokeEventListeners (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\events\\EventTarget-impl.js:350:25)\n        at invokeEventListeners (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\events\\EventTarget-impl.js:286:3)\n        at HTMLButtonElementImpl._dispatch (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\events\\EventTarget-impl.js:233:9)\n        at HTMLButtonElementImpl.dispatchEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\events\\EventTarget-impl.js:104:17)\n        at HTMLButtonElement.dispatchEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\generated\\EventTarget.js:241:34)\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\event\\dispatchEvent.js:45:43\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\pure.js:108:16\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\act-compat.js:48:24\n        at process.env.NODE_ENV.exports.act (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react\\cjs\\react.development.js:790:22)\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\act-compat.js:47:25\n        at Object.eventWrapper (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\pure.js:107:28)\n        at Object.wrapEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\event\\wrapEvent.js:6:28)\n        at Object.dispatchEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\event\\dispatchEvent.js:45:22)\n        at Object.dispatchUIEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\event\\dispatchEvent.js:22:26)\n        at Mouse.up (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\system\\pointer\\mouse.js:100:30)\n        at PointerHost.release (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\system\\pointer\\index.js:87:24)\n        at pointerAction (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\pointer\\index.js:54:47)\n        at runNextTicks (node:internal/process/task_queues:65:5)\n        at listOnTimeout (node:internal/timers:569:9)\n        at processTimers (node:internal/timers:543:7)\n        at Object.pointer (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\pointer\\index.js:27:9)\n        at Object.asyncWrapper (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\pure.js:88:22)\n        at Object.<anonymous> (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\__tests__\\integration\\thread-navigation.test.tsx:177:7)\n\n    \u001b[0m \u001b[90m 207 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 208 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 209 |\u001b[39m     originalError\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 210 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 211 |\u001b[39m   \n     \u001b[90m 212 |\u001b[39m   console\u001b[33m.\u001b[39mwarn \u001b[33m=\u001b[39m (\u001b[33m...\u001b[39margs) \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at console.call [as error] (jest.setup.js:209:19)\n      at DebugLogger.error (utils/debug-logger.ts:57:15)\n      at components/chat/ChatSidebarHandlers.ts:108:14\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:177:7)\n\n  console.error\n    [ERROR] Failed to switch thread: TypeError: Cannot destructure property 'clearMessages' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n        at clearChatState (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\components\\chat\\ChatSidebarHandlers.ts:16:11)\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\components\\chat\\ChatSidebarHandlers.ts:95:7\n        at onClick (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\components\\chat\\ChatSidebarThreadList.tsx:169:30)\n        at executeDispatch (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16368:9)\n        at runWithFiberInDEV (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:1522:13)\n        at processDispatchQueue (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16418:19)\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:17016:9\n        at batchedUpdates$1 (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:3262:40)\n        at dispatchEventForPluginEventSystem (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16572:7)\n        at dispatchEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:20658:11)\n        at dispatchDiscreteEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:20626:11)\n        at HTMLDivElement.callTheUserObjectsOperation (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\generated\\EventListener.js:26:30)\n        at innerInvokeEventListeners (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\events\\EventTarget-impl.js:350:25)\n        at invokeEventListeners (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\events\\EventTarget-impl.js:286:3)\n        at HTMLButtonElementImpl._dispatch (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\events\\EventTarget-impl.js:233:9)\n        at HTMLButtonElementImpl.dispatchEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\events\\EventTarget-impl.js:104:17)\n        at HTMLButtonElement.dispatchEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\generated\\EventTarget.js:241:34)\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\event\\dispatchEvent.js:45:43\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\pure.js:108:16\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\act-compat.js:48:24\n        at process.env.NODE_ENV.exports.act (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react\\cjs\\react.development.js:790:22)\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\act-compat.js:47:25\n        at Object.eventWrapper (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\pure.js:107:28)\n        at Object.wrapEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\event\\wrapEvent.js:6:28)\n        at Object.dispatchEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\event\\dispatchEvent.js:45:22)\n        at Object.dispatchUIEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\event\\dispatchEvent.js:22:26)\n        at Mouse.up (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\system\\pointer\\mouse.js:100:30)\n        at PointerHost.release (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\system\\pointer\\index.js:87:24)\n        at pointerAction (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\pointer\\index.js:54:47)\n        at runNextTicks (node:internal/process/task_queues:65:5)\n        at listOnTimeout (node:internal/timers:569:9)\n        at processTimers (node:internal/timers:543:7)\n        at Object.pointer (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\pointer\\index.js:27:9)\n        at Object.asyncWrapper (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\pure.js:88:22)\n        at Object.<anonymous> (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\__tests__\\integration\\thread-navigation.test.tsx:178:7)\n\n    \u001b[0m \u001b[90m 207 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 208 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 209 |\u001b[39m     originalError\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 210 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 211 |\u001b[39m   \n     \u001b[90m 212 |\u001b[39m   console\u001b[33m.\u001b[39mwarn \u001b[33m=\u001b[39m (\u001b[33m...\u001b[39margs) \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at console.call [as error] (jest.setup.js:209:19)\n      at DebugLogger.error (utils/debug-logger.ts:57:15)\n      at components/chat/ChatSidebarHandlers.ts:108:14\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:178:7)\n\n  console.log\n    \ud83d\udd27 Configuring authentication mocks with: { isAuthenticated: true, userTier: 'Early' }\n\n      at ChatSidebarTestSetup.beforeEach (__tests__/components/ChatSidebar/setup.tsx:269:13)\n\n  console.log\n    \ud83d\udd27 configureAuthState called with overrides: { isAuthenticated: true, userTier: 'Early' }\n\n      at ChatSidebarTestSetup.configureAuthState (__tests__/components/ChatSidebar/setup.tsx:433:13)\n\n  console.log\n    \ud83c\udfaf Final authStateConfig: {\n      isAuthenticated: true,\n      isLoading: false,\n      user: { id: 'test-user-1', email: 'test@example.com', role: 'user' },\n      userTier: 'Early',\n      error: null,\n      refreshAuth: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      logout: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      clearError: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      hasPermission: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      isAdminOrHigher: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      isDeveloperOrHigher: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      }\n    }\n\n      at ChatSidebarTestSetup.configureAuthState (__tests__/components/ChatSidebar/setup.tsx:434:13)\n\n  console.log\n    \ud83d\udd27 configureChatSidebarHooks called with: {\n      threadsProvided: true,\n      threadsCount: 3,\n      threadIds: [ 'thread-1', 'thread-2', 'thread-3' ]\n    }\n\n      at ChatSidebarTestSetup.configureChatSidebarHooks (__tests__/components/ChatSidebar/setup.tsx:339:13)\n\n  console.log\n    \ud83c\udfaf Mock configurations: {\n      threadLoaderConfig: {\n        threads: [ [Object], [Object], [Object] ],\n        isLoadingThreads: false,\n        loadError: null,\n        loadThreads: [Function: mockConstructor] {\n          _isMockFunction: true,\n          getMockImplementation: [Function (anonymous)],\n          mock: [Getter/Setter],\n          mockClear: [Function (anonymous)],\n          mockReset: [Function (anonymous)],\n          mockRestore: [Function (anonymous)],\n          mockReturnValueOnce: [Function (anonymous)],\n          mockResolvedValueOnce: [Function (anonymous)],\n          mockRejectedValueOnce: [Function (anonymous)],\n          mockReturnValue: [Function (anonymous)],\n          mockResolvedValue: [Function (anonymous)],\n          mockRejectedValue: [Function (anonymous)],\n          mockImplementationOnce: [Function (anonymous)],\n          withImplementation: [Function: bound withImplementation],\n          mockImplementation: [Function (anonymous)],\n          mockReturnThis: [Function (anonymous)],\n          mockName: [Function (anonymous)],\n          getMockName: [Function (anonymous)],\n          Symbol(Symbol.dispose): [Function (anonymous)]\n        }\n      },\n      threadFilteringConfig: {\n        sortedThreads: [ [Object], [Object], [Object] ],\n        paginatedThreads: [ [Object], [Object], [Object] ],\n        totalPages: 1\n      }\n    }\n\n      at ChatSidebarTestSetup.configureChatSidebarHooks (__tests__/components/ChatSidebar/setup.tsx:377:13)\n\n  console.log\n    \ud83c\udfaf Applied mock configurations using mockImplementation with debugging\n\n      at ChatSidebarTestSetup.configureChatSidebarHooks (__tests__/components/ChatSidebar/setup.tsx:414:13)\n\n  console.log\n    \ud83d\udd25 HOOK CALLED: useChatSidebarState (CONFIGURED) {\n      searchQuery: '',\n      setSearchQuery: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      isCreatingThread: false,\n      setIsCreatingThread: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      showAllThreads: false,\n      setShowAllThreads: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      filterType: 'all',\n      setFilterType: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      currentPage: 1,\n      setCurrentPage: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      }\n    }\n\n      at Object.<anonymous> (__tests__/components/ChatSidebar/setup.tsx:385:15)\n\n  console.log\n    \ud83d\udd25 HOOK CALLED: useThreadLoader (CONFIGURED) {\n      args: [ false, 'all', 'thread-2', [AsyncFunction (anonymous)] ],\n      returning: {\n        threads: [ [Object], [Object], [Object] ],\n        isLoadingThreads: false,\n        loadError: null,\n        loadThreads: [Function: mockConstructor] {\n          _isMockFunction: true,\n          getMockImplementation: [Function (anonymous)],\n          mock: [Getter/Setter],\n          mockClear: [Function (anonymous)],\n          mockReset: [Function (anonymous)],\n          mockRestore: [Function (anonymous)],\n          mockReturnValueOnce: [Function (anonymous)],\n          mockResolvedValueOnce: [Function (anonymous)],\n          mockRejectedValueOnce: [Function (anonymous)],\n          mockReturnValue: [Function (anonymous)],\n          mockResolvedValue: [Function (anonymous)],\n          mockRejectedValue: [Function (anonymous)],\n          mockImplementationOnce: [Function (anonymous)],\n          withImplementation: [Function: bound withImplementation],\n          mockImplementation: [Function (anonymous)],\n          mockReturnThis: [Function (anonymous)],\n          mockName: [Function (anonymous)],\n          getMockName: [Function (anonymous)],\n          Symbol(Symbol.dispose): [Function (anonymous)]\n        }\n      }\n    }\n\n      at Object.<anonymous> (__tests__/components/ChatSidebar/setup.tsx:390:15)\n\n  console.log\n    \ud83d\udd25 HOOK CALLED: useThreadFiltering (CONFIGURED) {\n      threadsType: 'object',\n      isArray: true,\n      threadsLength: 3,\n      returning: {\n        sortedThreads: [ [Object], [Object], [Object] ],\n        paginatedThreads: [ [Object], [Object], [Object] ],\n        totalPages: 1\n      }\n    }\n\n      at Object.<anonymous> (__tests__/components/ChatSidebar/setup.tsx:395:15)\n\n  console.log\n    \ud83e\uddea TestChatSidebar rendering with threads: {\n      threadsLength: 3,\n      paginatedThreadsLength: 3,\n      isLoadingThreads: false,\n      loadError: null\n    }\n\n      at TestChatSidebar (__tests__/components/ChatSidebar/setup.tsx:571:11)\n\n  console.log\n    \ud83d\udd27 Configuring authentication mocks with: { isAuthenticated: true, userTier: 'Early' }\n\n      at ChatSidebarTestSetup.beforeEach (__tests__/components/ChatSidebar/setup.tsx:269:13)\n\n  console.log\n    \ud83d\udd27 configureAuthState called with overrides: { isAuthenticated: true, userTier: 'Early' }\n\n      at ChatSidebarTestSetup.configureAuthState (__tests__/components/ChatSidebar/setup.tsx:433:13)\n\n  console.log\n    \ud83c\udfaf Final authStateConfig: {\n      isAuthenticated: true,\n      isLoading: false,\n      user: { id: 'test-user-1', email: 'test@example.com', role: 'user' },\n      userTier: 'Early',\n      error: null,\n      refreshAuth: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      logout: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      clearError: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      hasPermission: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      isAdminOrHigher: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      isDeveloperOrHigher: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      }\n    }\n\n      at ChatSidebarTestSetup.configureAuthState (__tests__/components/ChatSidebar/setup.tsx:434:13)\n\n  console.log\n    \ud83d\udd27 configureChatSidebarHooks called with: {\n      threadsProvided: true,\n      threadsCount: 3,\n      threadIds: [ 'thread-1', 'thread-2', 'thread-3' ]\n    }\n\n      at ChatSidebarTestSetup.configureChatSidebarHooks (__tests__/components/ChatSidebar/setup.tsx:339:13)\n\n  console.log\n    \ud83c\udfaf Mock configurations: {\n      threadLoaderConfig: {\n        threads: [ [Object], [Object], [Object] ],\n        isLoadingThreads: false,\n        loadError: null,\n        loadThreads: [Function: mockConstructor] {\n          _isMockFunction: true,\n          getMockImplementation: [Function (anonymous)],\n          mock: [Getter/Setter],\n          mockClear: [Function (anonymous)],\n          mockReset: [Function (anonymous)],\n          mockRestore: [Function (anonymous)],\n          mockReturnValueOnce: [Function (anonymous)],\n          mockResolvedValueOnce: [Function (anonymous)],\n          mockRejectedValueOnce: [Function (anonymous)],\n          mockReturnValue: [Function (anonymous)],\n          mockResolvedValue: [Function (anonymous)],\n          mockRejectedValue: [Function (anonymous)],\n          mockImplementationOnce: [Function (anonymous)],\n          withImplementation: [Function: bound withImplementation],\n          mockImplementation: [Function (anonymous)],\n          mockReturnThis: [Function (anonymous)],\n          mockName: [Function (anonymous)],\n          getMockName: [Function (anonymous)],\n          Symbol(Symbol.dispose): [Function (anonymous)]\n        }\n      },\n      threadFilteringConfig: {\n        sortedThreads: [ [Object], [Object], [Object] ],\n        paginatedThreads: [ [Object], [Object], [Object] ],\n        totalPages: 1\n      }\n    }\n\n      at ChatSidebarTestSetup.configureChatSidebarHooks (__tests__/components/ChatSidebar/setup.tsx:377:13)\n\n  console.log\n    \ud83c\udfaf Applied mock configurations using mockImplementation with debugging\n\n      at ChatSidebarTestSetup.configureChatSidebarHooks (__tests__/components/ChatSidebar/setup.tsx:414:13)\n\n  console.log\n    \ud83d\udd25 HOOK CALLED: useChatSidebarState (CONFIGURED) {\n      searchQuery: 'Performance',\n      setSearchQuery: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      isCreatingThread: false,\n      setIsCreatingThread: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      showAllThreads: true,\n      setShowAllThreads: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      filterType: 'all',\n      setFilterType: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      currentPage: 2,\n      setCurrentPage: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      }\n    }\n\n      at Object.<anonymous> (__tests__/components/ChatSidebar/setup.tsx:385:15)\n\n  console.log\n    \ud83d\udd25 HOOK CALLED: useThreadLoader (CONFIGURED) {\n      args: [ true, 'all', 'thread-123', [AsyncFunction (anonymous)] ],\n      returning: {\n        threads: [ [Object], [Object], [Object] ],\n        isLoadingThreads: false,\n        loadError: null,\n        loadThreads: [Function: mockConstructor] {\n          _isMockFunction: true,\n          getMockImplementation: [Function (anonymous)],\n          mock: [Getter/Setter],\n          mockClear: [Function (anonymous)],\n          mockReset: [Function (anonymous)],\n          mockRestore: [Function (anonymous)],\n          mockReturnValueOnce: [Function (anonymous)],\n          mockResolvedValueOnce: [Function (anonymous)],\n          mockRejectedValueOnce: [Function (anonymous)],\n          mockReturnValue: [Function (anonymous)],\n          mockResolvedValue: [Function (anonymous)],\n          mockRejectedValue: [Function (anonymous)],\n          mockImplementationOnce: [Function (anonymous)],\n          withImplementation: [Function: bound withImplementation],\n          mockImplementation: [Function (anonymous)],\n          mockReturnThis: [Function (anonymous)],\n          mockName: [Function (anonymous)],\n          getMockName: [Function (anonymous)],\n          Symbol(Symbol.dispose): [Function (anonymous)]\n        }\n      }\n    }\n\n      at Object.<anonymous> (__tests__/components/ChatSidebar/setup.tsx:390:15)\n\n  console.log\n    \ud83d\udd25 HOOK CALLED: useThreadFiltering (CONFIGURED) {\n      threadsType: 'object',\n      isArray: true,\n      threadsLength: 3,\n      returning: {\n        sortedThreads: [ [Object], [Object], [Object] ],\n        paginatedThreads: [ [Object], [Object], [Object] ],\n        totalPages: 1\n      }\n    }\n\n      at Object.<anonymous> (__tests__/components/ChatSidebar/setup.tsx:395:15)\n\n  console.log\n    \ud83e\uddea TestChatSidebar rendering with threads: {\n      threadsLength: 3,\n      paginatedThreadsLength: 3,\n      isLoadingThreads: false,\n      loadError: null\n    }\n\n      at TestChatSidebar (__tests__/components/ChatSidebar/setup.tsx:571:11)\n\n  console.log\n    \ud83d\udd27 Configuring authentication mocks with: { isAuthenticated: true, userTier: 'Early' }\n\n      at ChatSidebarTestSetup.beforeEach (__tests__/components/ChatSidebar/setup.tsx:269:13)\n\n  console.log\n    \ud83d\udd27 configureAuthState called with overrides: { isAuthenticated: true, userTier: 'Early' }\n\n      at ChatSidebarTestSetup.configureAuthState (__tests__/components/ChatSidebar/setup.tsx:433:13)\n\n  console.log\n    \ud83c\udfaf Final authStateConfig: {\n      isAuthenticated: true,\n      isLoading: false,\n      user: { id: 'test-user-1', email: 'test@example.com', role: 'user' },\n      userTier: 'Early',\n      error: null,\n      refreshAuth: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      logout: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      clearError: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      hasPermission: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      isAdminOrHigher: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      isDeveloperOrHigher: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      }\n    }\n\n      at ChatSidebarTestSetup.configureAuthState (__tests__/components/ChatSidebar/setup.tsx:434:13)\n\n  console.log\n    \ud83d\udd27 configureChatSidebarHooks called with: {\n      threadsProvided: true,\n      threadsCount: 3,\n      threadIds: [ 'thread-1', 'thread-2', 'thread-3' ]\n    }\n\n      at ChatSidebarTestSetup.configureChatSidebarHooks (__tests__/components/ChatSidebar/setup.tsx:339:13)\n\n  console.log\n    \ud83c\udfaf Mock configurations: {\n      threadLoaderConfig: {\n        threads: [ [Object], [Object], [Object] ],\n        isLoadingThreads: false,\n        loadError: null,\n        loadThreads: [Function: mockConstructor] {\n          _isMockFunction: true,\n          getMockImplementation: [Function (anonymous)],\n          mock: [Getter/Setter],\n          mockClear: [Function (anonymous)],\n          mockReset: [Function (anonymous)],\n          mockRestore: [Function (anonymous)],\n          mockReturnValueOnce: [Function (anonymous)],\n          mockResolvedValueOnce: [Function (anonymous)],\n          mockRejectedValueOnce: [Function (anonymous)],\n          mockReturnValue: [Function (anonymous)],\n          mockResolvedValue: [Function (anonymous)],\n          mockRejectedValue: [Function (anonymous)],\n          mockImplementationOnce: [Function (anonymous)],\n          withImplementation: [Function: bound withImplementation],\n          mockImplementation: [Function (anonymous)],\n          mockReturnThis: [Function (anonymous)],\n          mockName: [Function (anonymous)],\n          getMockName: [Function (anonymous)],\n          Symbol(Symbol.dispose): [Function (anonymous)]\n        }\n      },\n      threadFilteringConfig: {\n        sortedThreads: [ [Object], [Object], [Object] ],\n        paginatedThreads: [ [Object], [Object], [Object] ],\n        totalPages: 1\n      }\n    }\n\n      at ChatSidebarTestSetup.configureChatSidebarHooks (__tests__/components/ChatSidebar/setup.tsx:377:13)\n\n  console.log\n    \ud83c\udfaf Applied mock configurations using mockImplementation with debugging\n\n      at ChatSidebarTestSetup.configureChatSidebarHooks (__tests__/components/ChatSidebar/setup.tsx:414:13)\n\n  console.log\n    \ud83d\udd25 HOOK CALLED: useChatSidebarState (CONFIGURED) {\n      searchQuery: '',\n      setSearchQuery: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      isCreatingThread: false,\n      setIsCreatingThread: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      showAllThreads: false,\n      setShowAllThreads: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      filterType: 'all',\n      setFilterType: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      currentPage: 1,\n      setCurrentPage: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      }\n    }\n\n      at Object.<anonymous> (__tests__/components/ChatSidebar/setup.tsx:385:15)\n\n  console.log\n    \ud83d\udd25 HOOK CALLED: useThreadLoader (CONFIGURED) {\n      args: [ false, 'all', 'thread-123', [AsyncFunction (anonymous)] ],\n      returning: {\n        threads: [ [Object], [Object], [Object] ],\n        isLoadingThreads: false,\n        loadError: null,\n        loadThreads: [Function: mockConstructor] {\n          _isMockFunction: true,\n          getMockImplementation: [Function (anonymous)],\n          mock: [Getter/Setter],\n          mockClear: [Function (anonymous)],\n          mockReset: [Function (anonymous)],\n          mockRestore: [Function (anonymous)],\n          mockReturnValueOnce: [Function (anonymous)],\n          mockResolvedValueOnce: [Function (anonymous)],\n          mockRejectedValueOnce: [Function (anonymous)],\n          mockReturnValue: [Function (anonymous)],\n          mockResolvedValue: [Function (anonymous)],\n          mockRejectedValue: [Function (anonymous)],\n          mockImplementationOnce: [Function (anonymous)],\n          withImplementation: [Function: bound withImplementation],\n          mockImplementation: [Function (anonymous)],\n          mockReturnThis: [Function (anonymous)],\n          mockName: [Function (anonymous)],\n          getMockName: [Function (anonymous)],\n          Symbol(Symbol.dispose): [Function (anonymous)]\n        }\n      }\n    }\n\n      at Object.<anonymous> (__tests__/components/ChatSidebar/setup.tsx:390:15)\n\n  console.log\n    \ud83d\udd25 HOOK CALLED: useThreadFiltering (CONFIGURED) {\n      threadsType: 'object',\n      isArray: true,\n      threadsLength: 3,\n      returning: {\n        sortedThreads: [ [Object], [Object], [Object] ],\n        paginatedThreads: [ [Object], [Object], [Object] ],\n        totalPages: 1\n      }\n    }\n\n      at Object.<anonymous> (__tests__/components/ChatSidebar/setup.tsx:395:15)\n\n  console.log\n    \ud83e\uddea TestChatSidebar rendering with threads: {\n      threadsLength: 3,\n      paginatedThreadsLength: 3,\n      isLoadingThreads: false,\n      loadError: null\n    }\n\n      at TestChatSidebar (__tests__/components/ChatSidebar/setup.tsx:571:11)\n\n  console.log\n    \ud83d\udd27 Configuring authentication mocks with: { isAuthenticated: true, userTier: 'Early' }\n\n      at ChatSidebarTestSetup.beforeEach (__tests__/components/ChatSidebar/setup.tsx:269:13)\n\n  console.log\n    \ud83d\udd27 configureAuthState called with overrides: { isAuthenticated: true, userTier: 'Early' }\n\n      at ChatSidebarTestSetup.configureAuthState (__tests__/components/ChatSidebar/setup.tsx:433:13)\n\n  console.log\n    \ud83c\udfaf Final authStateConfig: {\n      isAuthenticated: true,\n      isLoading: false,\n      user: { id: 'test-user-1', email: 'test@example.com', role: 'user' },\n      userTier: 'Early',\n      error: null,\n      refreshAuth: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      logout: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      clearError: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      hasPermission: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      isAdminOrHigher: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      isDeveloperOrHigher: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      }\n    }\n\n      at ChatSidebarTestSetup.configureAuthState (__tests__/components/ChatSidebar/setup.tsx:434:13)\n\n  console.log\n    \ud83d\udd27 configureChatSidebarHooks called with: {\n      threadsProvided: false,\n      threadsCount: 3,\n      threadIds: [ 'thread-1', 'thread-2', 'thread-3' ]\n    }\n\n      at ChatSidebarTestSetup.configureChatSidebarHooks (__tests__/components/ChatSidebar/setup.tsx:339:13)\n\n  console.log\n    \ud83c\udfaf Mock configurations: {\n      threadLoaderConfig: {\n        threads: [],\n        isLoadingThreads: false,\n        loadError: 'Failed to load threads',\n        loadThreads: [Function: mockConstructor] {\n          _isMockFunction: true,\n          getMockImplementation: [Function (anonymous)],\n          mock: [Getter/Setter],\n          mockClear: [Function (anonymous)],\n          mockReset: [Function (anonymous)],\n          mockRestore: [Function (anonymous)],\n          mockReturnValueOnce: [Function (anonymous)],\n          mockResolvedValueOnce: [Function (anonymous)],\n          mockRejectedValueOnce: [Function (anonymous)],\n          mockReturnValue: [Function (anonymous)],\n          mockResolvedValue: [Function (anonymous)],\n          mockRejectedValue: [Function (anonymous)],\n          mockImplementationOnce: [Function (anonymous)],\n          withImplementation: [Function: bound withImplementation],\n          mockImplementation: [Function (anonymous)],\n          mockReturnThis: [Function (anonymous)],\n          mockName: [Function (anonymous)],\n          getMockName: [Function (anonymous)],\n          Symbol(Symbol.dispose): [Function (anonymous)]\n        }\n      },\n      threadFilteringConfig: {\n        sortedThreads: [ [Object], [Object], [Object] ],\n        paginatedThreads: [ [Object], [Object], [Object] ],\n        totalPages: 1\n      }\n    }\n\n      at ChatSidebarTestSetup.configureChatSidebarHooks (__tests__/components/ChatSidebar/setup.tsx:377:13)\n\n  console.log\n    \ud83c\udfaf Applied mock configurations using mockImplementation with debugging\n\n      at ChatSidebarTestSetup.configureChatSidebarHooks (__tests__/components/ChatSidebar/setup.tsx:414:13)\n\n  console.log\n    \ud83d\udd25 HOOK CALLED: useChatSidebarState (CONFIGURED) {\n      searchQuery: '',\n      setSearchQuery: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      isCreatingThread: false,\n      setIsCreatingThread: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      showAllThreads: false,\n      setShowAllThreads: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      filterType: 'all',\n      setFilterType: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      currentPage: 1,\n      setCurrentPage: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      }\n    }\n\n      at Object.<anonymous> (__tests__/components/ChatSidebar/setup.tsx:385:15)\n\n  console.log\n    \ud83d\udd25 HOOK CALLED: useThreadLoader (CONFIGURED) {\n      args: [ false, 'all', 'thread-123', [AsyncFunction (anonymous)] ],\n      returning: {\n        threads: [],\n        isLoadingThreads: false,\n        loadError: 'Failed to load threads',\n        loadThreads: [Function: mockConstructor] {\n          _isMockFunction: true,\n          getMockImplementation: [Function (anonymous)],\n          mock: [Getter/Setter],\n          mockClear: [Function (anonymous)],\n          mockReset: [Function (anonymous)],\n          mockRestore: [Function (anonymous)],\n          mockReturnValueOnce: [Function (anonymous)],\n          mockResolvedValueOnce: [Function (anonymous)],\n          mockRejectedValueOnce: [Function (anonymous)],\n          mockReturnValue: [Function (anonymous)],\n          mockResolvedValue: [Function (anonymous)],\n          mockRejectedValue: [Function (anonymous)],\n          mockImplementationOnce: [Function (anonymous)],\n          withImplementation: [Function: bound withImplementation],\n          mockImplementation: [Function (anonymous)],\n          mockReturnThis: [Function (anonymous)],\n          mockName: [Function (anonymous)],\n          getMockName: [Function (anonymous)],\n          Symbol(Symbol.dispose): [Function (anonymous)]\n        }\n      }\n    }\n\n      at Object.<anonymous> (__tests__/components/ChatSidebar/setup.tsx:390:15)\n\n  console.log\n    \ud83d\udd25 HOOK CALLED: useThreadFiltering (CONFIGURED) {\n      threadsType: 'object',\n      isArray: true,\n      threadsLength: 0,\n      returning: {\n        sortedThreads: [ [Object], [Object], [Object] ],\n        paginatedThreads: [ [Object], [Object], [Object] ],\n        totalPages: 1\n      }\n    }\n\n      at Object.<anonymous> (__tests__/components/ChatSidebar/setup.tsx:395:15)\n\n  console.log\n    \ud83e\uddea TestChatSidebar rendering with threads: {\n      threadsLength: 0,\n      paginatedThreadsLength: 3,\n      isLoadingThreads: false,\n      loadError: 'Failed to load threads'\n    }\n\n      at TestChatSidebar (__tests__/components/ChatSidebar/setup.tsx:571:11)\n\n  console.log\n    \ud83d\udd27 Configuring authentication mocks with: { isAuthenticated: true, userTier: 'Early' }\n\n      at ChatSidebarTestSetup.beforeEach (__tests__/components/ChatSidebar/setup.tsx:269:13)\n\n  console.log\n    \ud83d\udd27 configureAuthState called with overrides: { isAuthenticated: true, userTier: 'Early' }\n\n      at ChatSidebarTestSetup.configureAuthState (__tests__/components/ChatSidebar/setup.tsx:433:13)\n\n  console.log\n    \ud83c\udfaf Final authStateConfig: {\n      isAuthenticated: true,\n      isLoading: false,\n      user: { id: 'test-user-1', email: 'test@example.com', role: 'user' },\n      userTier: 'Early',\n      error: null,\n      refreshAuth: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      logout: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      clearError: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      hasPermission: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      isAdminOrHigher: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      isDeveloperOrHigher: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      }\n    }\n\n      at ChatSidebarTestSetup.configureAuthState (__tests__/components/ChatSidebar/setup.tsx:434:13)\n\n  console.log\n    \ud83d\udd27 configureChatSidebarHooks called with: {\n      threadsProvided: false,\n      threadsCount: 3,\n      threadIds: [ 'thread-1', 'thread-2', 'thread-3' ]\n    }\n\n      at ChatSidebarTestSetup.configureChatSidebarHooks (__tests__/components/ChatSidebar/setup.tsx:339:13)\n\n  console.log\n    \ud83c\udfaf Mock configurations: {\n      threadLoaderConfig: {\n        threads: [],\n        isLoadingThreads: false,\n        loadError: 'Network error',\n        loadThreads: [Function: mockConstructor] {\n          _isMockFunction: true,\n          getMockImplementation: [Function (anonymous)],\n          mock: [Getter/Setter],\n          mockClear: [Function (anonymous)],\n          mockReset: [Function (anonymous)],\n          mockRestore: [Function (anonymous)],\n          mockReturnValueOnce: [Function (anonymous)],\n          mockResolvedValueOnce: [Function (anonymous)],\n          mockRejectedValueOnce: [Function (anonymous)],\n          mockReturnValue: [Function (anonymous)],\n          mockResolvedValue: [Function (anonymous)],\n          mockRejectedValue: [Function (anonymous)],\n          mockImplementationOnce: [Function (anonymous)],\n          withImplementation: [Function: bound withImplementation],\n          mockImplementation: [Function (anonymous)],\n          mockReturnThis: [Function (anonymous)],\n          mockName: [Function (anonymous)],\n          getMockName: [Function (anonymous)],\n          Symbol(Symbol.dispose): [Function (anonymous)]\n        }\n      },\n      threadFilteringConfig: {\n        sortedThreads: [ [Object], [Object], [Object] ],\n        paginatedThreads: [ [Object], [Object], [Object] ],\n        totalPages: 1\n      }\n    }\n\n      at ChatSidebarTestSetup.configureChatSidebarHooks (__tests__/components/ChatSidebar/setup.tsx:377:13)\n\n  console.log\n    \ud83c\udfaf Applied mock configurations using mockImplementation with debugging\n\n      at ChatSidebarTestSetup.configureChatSidebarHooks (__tests__/components/ChatSidebar/setup.tsx:414:13)\n\n  console.log\n    \ud83d\udd25 HOOK CALLED: useChatSidebarState (CONFIGURED) {\n      searchQuery: '',\n      setSearchQuery: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      isCreatingThread: false,\n      setIsCreatingThread: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      showAllThreads: false,\n      setShowAllThreads: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      filterType: 'all',\n      setFilterType: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      currentPage: 1,\n      setCurrentPage: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      }\n    }\n\n      at Object.<anonymous> (__tests__/components/ChatSidebar/setup.tsx:385:15)\n\n  console.log\n    \ud83d\udd25 HOOK CALLED: useThreadLoader (CONFIGURED) {\n      args: [ false, 'all', 'thread-123', [AsyncFunction (anonymous)] ],\n      returning: {\n        threads: [],\n        isLoadingThreads: false,\n        loadError: 'Network error',\n        loadThreads: [Function: mockConstructor] {\n          _isMockFunction: true,\n          getMockImplementation: [Function (anonymous)],\n          mock: [Getter/Setter],\n          mockClear: [Function (anonymous)],\n          mockReset: [Function (anonymous)],\n          mockRestore: [Function (anonymous)],\n          mockReturnValueOnce: [Function (anonymous)],\n          mockResolvedValueOnce: [Function (anonymous)],\n          mockRejectedValueOnce: [Function (anonymous)],\n          mockReturnValue: [Function (anonymous)],\n          mockResolvedValue: [Function (anonymous)],\n          mockRejectedValue: [Function (anonymous)],\n          mockImplementationOnce: [Function (anonymous)],\n          withImplementation: [Function: bound withImplementation],\n          mockImplementation: [Function (anonymous)],\n          mockReturnThis: [Function (anonymous)],\n          mockName: [Function (anonymous)],\n          getMockName: [Function (anonymous)],\n          Symbol(Symbol.dispose): [Function (anonymous)]\n        }\n      }\n    }\n\n      at Object.<anonymous> (__tests__/components/ChatSidebar/setup.tsx:390:15)\n\n  console.log\n    \ud83d\udd25 HOOK CALLED: useThreadFiltering (CONFIGURED) {\n      threadsType: 'object',\n      isArray: true,\n      threadsLength: 0,\n      returning: {\n        sortedThreads: [ [Object], [Object], [Object] ],\n        paginatedThreads: [ [Object], [Object], [Object] ],\n        totalPages: 1\n      }\n    }\n\n      at Object.<anonymous> (__tests__/components/ChatSidebar/setup.tsx:395:15)\n\n  console.log\n    \ud83e\uddea TestChatSidebar rendering with threads: {\n      threadsLength: 0,\n      paginatedThreadsLength: 3,\n      isLoadingThreads: false,\n      loadError: 'Network error'\n    }\n\n      at TestChatSidebar (__tests__/components/ChatSidebar/setup.tsx:571:11)\n\n  console.log\n    \ud83d\udd27 Configuring authentication mocks with: { isAuthenticated: true, userTier: 'Early' }\n\n      at ChatSidebarTestSetup.beforeEach (__tests__/components/ChatSidebar/setup.tsx:269:13)\n\n  console.log\n    \ud83d\udd27 configureAuthState called with overrides: { isAuthenticated: true, userTier: 'Early' }\n\n      at ChatSidebarTestSetup.configureAuthState (__tests__/components/ChatSidebar/setup.tsx:433:13)\n\n  console.log\n    \ud83c\udfaf Final authStateConfig: {\n      isAuthenticated: true,\n      isLoading: false,\n      user: { id: 'test-user-1', email: 'test@example.com', role: 'user' },\n      userTier: 'Early',\n      error: null,\n      refreshAuth: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      logout: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      clearError: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      hasPermission: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      isAdminOrHigher: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      isDeveloperOrHigher: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      }\n    }\n\n      at ChatSidebarTestSetup.configureAuthState (__tests__/components/ChatSidebar/setup.tsx:434:13)\n\n  console.log\n    \ud83d\udd27 configureChatSidebarHooks called with: {\n      threadsProvided: true,\n      threadsCount: 3,\n      threadIds: [ 'thread-1', 'thread-2', 'thread-3' ]\n    }\n\n      at ChatSidebarTestSetup.configureChatSidebarHooks (__tests__/components/ChatSidebar/setup.tsx:339:13)\n\n  console.log\n    \ud83c\udfaf Mock configurations: {\n      threadLoaderConfig: {\n        threads: [ [Object], [Object], [Object] ],\n        isLoadingThreads: false,\n        loadError: null,\n        loadThreads: [Function: mockConstructor] {\n          _isMockFunction: true,\n          getMockImplementation: [Function (anonymous)],\n          mock: [Getter/Setter],\n          mockClear: [Function (anonymous)],\n          mockReset: [Function (anonymous)],\n          mockRestore: [Function (anonymous)],\n          mockReturnValueOnce: [Function (anonymous)],\n          mockResolvedValueOnce: [Function (anonymous)],\n          mockRejectedValueOnce: [Function (anonymous)],\n          mockReturnValue: [Function (anonymous)],\n          mockResolvedValue: [Function (anonymous)],\n          mockRejectedValue: [Function (anonymous)],\n          mockImplementationOnce: [Function (anonymous)],\n          withImplementation: [Function: bound withImplementation],\n          mockImplementation: [Function (anonymous)],\n          mockReturnThis: [Function (anonymous)],\n          mockName: [Function (anonymous)],\n          getMockName: [Function (anonymous)],\n          Symbol(Symbol.dispose): [Function (anonymous)]\n        }\n      },\n      threadFilteringConfig: {\n        sortedThreads: [ [Object], [Object], [Object] ],\n        paginatedThreads: [ [Object], [Object], [Object] ],\n        totalPages: 1\n      }\n    }\n\n      at ChatSidebarTestSetup.configureChatSidebarHooks (__tests__/components/ChatSidebar/setup.tsx:377:13)\n\n  console.log\n    \ud83c\udfaf Applied mock configurations using mockImplementation with debugging\n\n      at ChatSidebarTestSetup.configureChatSidebarHooks (__tests__/components/ChatSidebar/setup.tsx:414:13)\n\n  console.log\n    \ud83d\udd25 HOOK CALLED: useChatSidebarState (CONFIGURED) {\n      searchQuery: '',\n      setSearchQuery: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      isCreatingThread: false,\n      setIsCreatingThread: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      showAllThreads: false,\n      setShowAllThreads: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      filterType: 'all',\n      setFilterType: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      currentPage: 1,\n      setCurrentPage: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      }\n    }\n\n      at Object.<anonymous> (__tests__/components/ChatSidebar/setup.tsx:385:15)\n\n  console.log\n    \ud83d\udd25 HOOK CALLED: useThreadLoader (CONFIGURED) {\n      args: [ false, 'all', 'thread-123', [AsyncFunction (anonymous)] ],\n      returning: {\n        threads: [ [Object], [Object], [Object] ],\n        isLoadingThreads: false,\n        loadError: null,\n        loadThreads: [Function: mockConstructor] {\n          _isMockFunction: true,\n          getMockImplementation: [Function (anonymous)],\n          mock: [Getter/Setter],\n          mockClear: [Function (anonymous)],\n          mockReset: [Function (anonymous)],\n          mockRestore: [Function (anonymous)],\n          mockReturnValueOnce: [Function (anonymous)],\n          mockResolvedValueOnce: [Function (anonymous)],\n          mockRejectedValueOnce: [Function (anonymous)],\n          mockReturnValue: [Function (anonymous)],\n          mockResolvedValue: [Function (anonymous)],\n          mockRejectedValue: [Function (anonymous)],\n          mockImplementationOnce: [Function (anonymous)],\n          withImplementation: [Function: bound withImplementation],\n          mockImplementation: [Function (anonymous)],\n          mockReturnThis: [Function (anonymous)],\n          mockName: [Function (anonymous)],\n          getMockName: [Function (anonymous)],\n          Symbol(Symbol.dispose): [Function (anonymous)]\n        }\n      }\n    }\n\n      at Object.<anonymous> (__tests__/components/ChatSidebar/setup.tsx:390:15)\n\n  console.log\n    \ud83d\udd25 HOOK CALLED: useThreadFiltering (CONFIGURED) {\n      threadsType: 'object',\n      isArray: true,\n      threadsLength: 3,\n      returning: {\n        sortedThreads: [ [Object], [Object], [Object] ],\n        paginatedThreads: [ [Object], [Object], [Object] ],\n        totalPages: 1\n      }\n    }\n\n      at Object.<anonymous> (__tests__/components/ChatSidebar/setup.tsx:395:15)\n\n  console.log\n    \ud83e\uddea TestChatSidebar rendering with threads: {\n      threadsLength: 3,\n      paginatedThreadsLength: 3,\n      isLoadingThreads: false,\n      loadError: null\n    }\n\n      at TestChatSidebar (__tests__/components/ChatSidebar/setup.tsx:571:11)\n\n  console.error\n    [ERROR] Failed to switch thread: TypeError: Cannot destructure property 'clearMessages' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n        at clearChatState (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\components\\chat\\ChatSidebarHandlers.ts:16:11)\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\components\\chat\\ChatSidebarHandlers.ts:95:7\n        at onClick (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\components\\chat\\ChatSidebarThreadList.tsx:169:30)\n        at executeDispatch (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16368:9)\n        at runWithFiberInDEV (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:1522:13)\n        at processDispatchQueue (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16418:19)\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:17016:9\n        at batchedUpdates$1 (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:3262:40)\n        at dispatchEventForPluginEventSystem (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16572:7)\n        at dispatchEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:20658:11)\n        at dispatchDiscreteEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:20626:11)\n        at HTMLDivElement.callTheUserObjectsOperation (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\generated\\EventListener.js:26:30)\n        at innerInvokeEventListeners (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\events\\EventTarget-impl.js:350:25)\n        at invokeEventListeners (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\events\\EventTarget-impl.js:286:3)\n        at HTMLButtonElementImpl._dispatch (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\events\\EventTarget-impl.js:233:9)\n        at HTMLButtonElementImpl.dispatchEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\events\\EventTarget-impl.js:104:17)\n        at HTMLButtonElement.dispatchEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\generated\\EventTarget.js:241:34)\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\event\\dispatchEvent.js:45:43\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\pure.js:108:16\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\act-compat.js:48:24\n        at process.env.NODE_ENV.exports.act (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react\\cjs\\react.development.js:790:22)\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\act-compat.js:47:25\n        at Object.eventWrapper (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\pure.js:107:28)\n        at Object.wrapEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\event\\wrapEvent.js:6:28)\n        at Object.dispatchEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\event\\dispatchEvent.js:45:22)\n        at Object.dispatchUIEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\event\\dispatchEvent.js:22:26)\n        at Mouse.up (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\system\\pointer\\mouse.js:100:30)\n        at PointerHost.release (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\system\\pointer\\index.js:87:24)\n        at pointerAction (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\pointer\\index.js:54:47)\n        at runNextTicks (node:internal/process/task_queues:65:5)\n        at listOnTimeout (node:internal/timers:569:9)\n        at processTimers (node:internal/timers:543:7)\n        at Object.pointer (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\pointer\\index.js:27:9)\n        at Object.asyncWrapper (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\pure.js:88:22)\n        at Object.<anonymous> (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\__tests__\\integration\\thread-navigation.test.tsx:286:7)\n\n    \u001b[0m \u001b[90m 207 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 208 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 209 |\u001b[39m     originalError\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 210 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 211 |\u001b[39m   \n     \u001b[90m 212 |\u001b[39m   console\u001b[33m.\u001b[39mwarn \u001b[33m=\u001b[39m (\u001b[33m...\u001b[39margs) \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at console.call [as error] (jest.setup.js:209:19)\n      at DebugLogger.error (utils/debug-logger.ts:57:15)\n      at components/chat/ChatSidebarHandlers.ts:108:14\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:286:7)\n\n  console.log\n    \ud83d\udd27 Configuring authentication mocks with: { isAuthenticated: true, userTier: 'Early' }\n\n      at ChatSidebarTestSetup.beforeEach (__tests__/components/ChatSidebar/setup.tsx:269:13)\n\n  console.log\n    \ud83d\udd27 configureAuthState called with overrides: { isAuthenticated: true, userTier: 'Early' }\n\n      at ChatSidebarTestSetup.configureAuthState (__tests__/components/ChatSidebar/setup.tsx:433:13)\n\n  console.log\n    \ud83c\udfaf Final authStateConfig: {\n      isAuthenticated: true,\n      isLoading: false,\n      user: { id: 'test-user-1', email: 'test@example.com', role: 'user' },\n      userTier: 'Early',\n      error: null,\n      refreshAuth: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      logout: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      clearError: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      hasPermission: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      isAdminOrHigher: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      isDeveloperOrHigher: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      }\n    }\n\n      at ChatSidebarTestSetup.configureAuthState (__tests__/components/ChatSidebar/setup.tsx:434:13)\n\n  console.log\n    \ud83d\udd27 configureChatSidebarHooks called with: {\n      threadsProvided: true,\n      threadsCount: 3,\n      threadIds: [ 'thread-1', 'thread-2', 'thread-3' ]\n    }\n\n      at ChatSidebarTestSetup.configureChatSidebarHooks (__tests__/components/ChatSidebar/setup.tsx:339:13)\n\n  console.log\n    \ud83c\udfaf Mock configurations: {\n      threadLoaderConfig: {\n        threads: [ [Object], [Object], [Object] ],\n        isLoadingThreads: false,\n        loadError: null,\n        loadThreads: [Function: mockConstructor] {\n          _isMockFunction: true,\n          getMockImplementation: [Function (anonymous)],\n          mock: [Getter/Setter],\n          mockClear: [Function (anonymous)],\n          mockReset: [Function (anonymous)],\n          mockRestore: [Function (anonymous)],\n          mockReturnValueOnce: [Function (anonymous)],\n          mockResolvedValueOnce: [Function (anonymous)],\n          mockRejectedValueOnce: [Function (anonymous)],\n          mockReturnValue: [Function (anonymous)],\n          mockResolvedValue: [Function (anonymous)],\n          mockRejectedValue: [Function (anonymous)],\n          mockImplementationOnce: [Function (anonymous)],\n          withImplementation: [Function: bound withImplementation],\n          mockImplementation: [Function (anonymous)],\n          mockReturnThis: [Function (anonymous)],\n          mockName: [Function (anonymous)],\n          getMockName: [Function (anonymous)],\n          Symbol(Symbol.dispose): [Function (anonymous)]\n        }\n      },\n      threadFilteringConfig: {\n        sortedThreads: [ [Object], [Object], [Object] ],\n        paginatedThreads: [ [Object], [Object], [Object] ],\n        totalPages: 1\n      }\n    }\n\n      at ChatSidebarTestSetup.configureChatSidebarHooks (__tests__/components/ChatSidebar/setup.tsx:377:13)\n\n  console.log\n    \ud83c\udfaf Applied mock configurations using mockImplementation with debugging\n\n      at ChatSidebarTestSetup.configureChatSidebarHooks (__tests__/components/ChatSidebar/setup.tsx:414:13)\n\n  console.log\n    \ud83d\udd25 HOOK CALLED: useChatSidebarState (CONFIGURED) {\n      searchQuery: '',\n      setSearchQuery: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      isCreatingThread: false,\n      setIsCreatingThread: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      showAllThreads: false,\n      setShowAllThreads: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      filterType: 'all',\n      setFilterType: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      currentPage: 1,\n      setCurrentPage: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      }\n    }\n\n      at Object.<anonymous> (__tests__/components/ChatSidebar/setup.tsx:385:15)\n\n  console.log\n    \ud83d\udd25 HOOK CALLED: useThreadLoader (CONFIGURED) {\n      args: [ false, 'all', 'thread-123', [AsyncFunction (anonymous)] ],\n      returning: {\n        threads: [ [Object], [Object], [Object] ],\n        isLoadingThreads: false,\n        loadError: null,\n        loadThreads: [Function: mockConstructor] {\n          _isMockFunction: true,\n          getMockImplementation: [Function (anonymous)],\n          mock: [Getter/Setter],\n          mockClear: [Function (anonymous)],\n          mockReset: [Function (anonymous)],\n          mockRestore: [Function (anonymous)],\n          mockReturnValueOnce: [Function (anonymous)],\n          mockResolvedValueOnce: [Function (anonymous)],\n          mockRejectedValueOnce: [Function (anonymous)],\n          mockReturnValue: [Function (anonymous)],\n          mockResolvedValue: [Function (anonymous)],\n          mockRejectedValue: [Function (anonymous)],\n          mockImplementationOnce: [Function (anonymous)],\n          withImplementation: [Function: bound withImplementation],\n          mockImplementation: [Function (anonymous)],\n          mockReturnThis: [Function (anonymous)],\n          mockName: [Function (anonymous)],\n          getMockName: [Function (anonymous)],\n          Symbol(Symbol.dispose): [Function (anonymous)]\n        }\n      }\n    }\n\n      at Object.<anonymous> (__tests__/components/ChatSidebar/setup.tsx:390:15)\n\n  console.log\n    \ud83d\udd25 HOOK CALLED: useThreadFiltering (CONFIGURED) {\n      threadsType: 'object',\n      isArray: true,\n      threadsLength: 3,\n      returning: {\n        sortedThreads: [ [Object], [Object], [Object] ],\n        paginatedThreads: [ [Object], [Object], [Object] ],\n        totalPages: 1\n      }\n    }\n\n      at Object.<anonymous> (__tests__/components/ChatSidebar/setup.tsx:395:15)\n\n  console.log\n    \ud83e\uddea TestChatSidebar rendering with threads: {\n      threadsLength: 3,\n      paginatedThreadsLength: 3,\n      isLoadingThreads: false,\n      loadError: null\n    }\n\n      at TestChatSidebar (__tests__/components/ChatSidebar/setup.tsx:571:11)\n\n  console.log\n    \ud83d\udd27 Configuring authentication mocks with: { isAuthenticated: true, userTier: 'Early' }\n\n      at ChatSidebarTestSetup.beforeEach (__tests__/components/ChatSidebar/setup.tsx:269:13)\n\n  console.log\n    \ud83d\udd27 configureAuthState called with overrides: { isAuthenticated: true, userTier: 'Early' }\n\n      at ChatSidebarTestSetup.configureAuthState (__tests__/components/ChatSidebar/setup.tsx:433:13)\n\n  console.log\n    \ud83c\udfaf Final authStateConfig: {\n      isAuthenticated: true,\n      isLoading: false,\n      user: { id: 'test-user-1', email: 'test@example.com', role: 'user' },\n      userTier: 'Early',\n      error: null,\n      refreshAuth: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      logout: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      clearError: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      hasPermission: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      isAdminOrHigher: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      isDeveloperOrHigher: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      }\n    }\n\n      at ChatSidebarTestSetup.configureAuthState (__tests__/components/ChatSidebar/setup.tsx:434:13)\n\n  console.log\n    \ud83d\udd27 configureChatSidebarHooks called with: {\n      threadsProvided: true,\n      threadsCount: 3,\n      threadIds: [ 'thread-1', 'thread-2', 'thread-3' ]\n    }\n\n      at ChatSidebarTestSetup.configureChatSidebarHooks (__tests__/components/ChatSidebar/setup.tsx:339:13)\n\n  console.log\n    \ud83c\udfaf Mock configurations: {\n      threadLoaderConfig: {\n        threads: [ [Object], [Object], [Object] ],\n        isLoadingThreads: false,\n        loadError: null,\n        loadThreads: [Function: mockConstructor] {\n          _isMockFunction: true,\n          getMockImplementation: [Function (anonymous)],\n          mock: [Getter/Setter],\n          mockClear: [Function (anonymous)],\n          mockReset: [Function (anonymous)],\n          mockRestore: [Function (anonymous)],\n          mockReturnValueOnce: [Function (anonymous)],\n          mockResolvedValueOnce: [Function (anonymous)],\n          mockRejectedValueOnce: [Function (anonymous)],\n          mockReturnValue: [Function (anonymous)],\n          mockResolvedValue: [Function (anonymous)],\n          mockRejectedValue: [Function (anonymous)],\n          mockImplementationOnce: [Function (anonymous)],\n          withImplementation: [Function: bound withImplementation],\n          mockImplementation: [Function (anonymous)],\n          mockReturnThis: [Function (anonymous)],\n          mockName: [Function (anonymous)],\n          getMockName: [Function (anonymous)],\n          Symbol(Symbol.dispose): [Function (anonymous)]\n        }\n      },\n      threadFilteringConfig: {\n        sortedThreads: [ [Object], [Object], [Object] ],\n        paginatedThreads: [ [Object], [Object], [Object] ],\n        totalPages: 1\n      }\n    }\n\n      at ChatSidebarTestSetup.configureChatSidebarHooks (__tests__/components/ChatSidebar/setup.tsx:377:13)\n\n  console.log\n    \ud83c\udfaf Applied mock configurations using mockImplementation with debugging\n\n      at ChatSidebarTestSetup.configureChatSidebarHooks (__tests__/components/ChatSidebar/setup.tsx:414:13)\n\n  console.log\n    \ud83d\udd25 HOOK CALLED: useChatSidebarState (CONFIGURED) {\n      searchQuery: '',\n      setSearchQuery: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      isCreatingThread: false,\n      setIsCreatingThread: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      showAllThreads: false,\n      setShowAllThreads: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      filterType: 'all',\n      setFilterType: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      currentPage: 1,\n      setCurrentPage: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      }\n    }\n\n      at Object.<anonymous> (__tests__/components/ChatSidebar/setup.tsx:385:15)\n\n  console.log\n    \ud83d\udd25 HOOK CALLED: useThreadLoader (CONFIGURED) {\n      args: [ false, 'all', 'thread-123', [AsyncFunction (anonymous)] ],\n      returning: {\n        threads: [ [Object], [Object], [Object] ],\n        isLoadingThreads: false,\n        loadError: null,\n        loadThreads: [Function: mockConstructor] {\n          _isMockFunction: true,\n          getMockImplementation: [Function (anonymous)],\n          mock: [Getter/Setter],\n          mockClear: [Function (anonymous)],\n          mockReset: [Function (anonymous)],\n          mockRestore: [Function (anonymous)],\n          mockReturnValueOnce: [Function (anonymous)],\n          mockResolvedValueOnce: [Function (anonymous)],\n          mockRejectedValueOnce: [Function (anonymous)],\n          mockReturnValue: [Function (anonymous)],\n          mockResolvedValue: [Function (anonymous)],\n          mockRejectedValue: [Function (anonymous)],\n          mockImplementationOnce: [Function (anonymous)],\n          withImplementation: [Function: bound withImplementation],\n          mockImplementation: [Function (anonymous)],\n          mockReturnThis: [Function (anonymous)],\n          mockName: [Function (anonymous)],\n          getMockName: [Function (anonymous)],\n          Symbol(Symbol.dispose): [Function (anonymous)]\n        }\n      }\n    }\n\n      at Object.<anonymous> (__tests__/components/ChatSidebar/setup.tsx:390:15)\n\n  console.log\n    \ud83d\udd25 HOOK CALLED: useThreadFiltering (CONFIGURED) {\n      threadsType: 'object',\n      isArray: true,\n      threadsLength: 3,\n      returning: {\n        sortedThreads: [ [Object], [Object], [Object] ],\n        paginatedThreads: [ [Object], [Object], [Object] ],\n        totalPages: 1\n      }\n    }\n\n      at Object.<anonymous> (__tests__/components/ChatSidebar/setup.tsx:395:15)\n\n  console.log\n    \ud83e\uddea TestChatSidebar rendering with threads: {\n      threadsLength: 3,\n      paginatedThreadsLength: 3,\n      isLoadingThreads: false,\n      loadError: null\n    }\n\n      at TestChatSidebar (__tests__/components/ChatSidebar/setup.tsx:571:11)\n\n  console.error\n    [ERROR] Failed to switch thread: TypeError: Cannot destructure property 'clearMessages' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n        at clearChatState (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\components\\chat\\ChatSidebarHandlers.ts:16:11)\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\components\\chat\\ChatSidebarHandlers.ts:95:7\n        at onClick (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\components\\chat\\ChatSidebarThreadList.tsx:169:30)\n        at executeDispatch (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16368:9)\n        at runWithFiberInDEV (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:1522:13)\n        at processDispatchQueue (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16418:19)\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:17016:9\n        at batchedUpdates$1 (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:3262:40)\n        at dispatchEventForPluginEventSystem (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16572:7)\n        at dispatchEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:20658:11)\n        at dispatchDiscreteEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:20626:11)\n        at HTMLDivElement.callTheUserObjectsOperation (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\generated\\EventListener.js:26:30)\n        at innerInvokeEventListeners (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\events\\EventTarget-impl.js:350:25)\n        at invokeEventListeners (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\events\\EventTarget-impl.js:286:3)\n        at HTMLButtonElementImpl._dispatch (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\events\\EventTarget-impl.js:233:9)\n        at HTMLButtonElementImpl.dispatchEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\events\\EventTarget-impl.js:104:17)\n        at HTMLButtonElement.dispatchEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\generated\\EventTarget.js:241:34)\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\event\\dispatchEvent.js:45:43\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\pure.js:108:16\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\act-compat.js:48:24\n        at process.env.NODE_ENV.exports.act (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react\\cjs\\react.development.js:790:22)\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\act-compat.js:47:25\n        at Object.eventWrapper (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\pure.js:107:28)\n        at Object.wrapEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\event\\wrapEvent.js:6:28)\n        at Object.dispatchEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\event\\dispatchEvent.js:45:22)\n        at Object.dispatchUIEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\event\\dispatchEvent.js:22:26)\n        at Mouse.up (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\system\\pointer\\mouse.js:100:30)\n        at PointerHost.release (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\system\\pointer\\index.js:87:24)\n        at pointerAction (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\pointer\\index.js:54:47)\n        at runNextTicks (node:internal/process/task_queues:65:5)\n        at listOnTimeout (node:internal/timers:569:9)\n        at processTimers (node:internal/timers:543:7)\n        at Object.pointer (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\pointer\\index.js:27:9)\n        at Object.asyncWrapper (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\pure.js:88:22)\n        at async Promise.all (index 0)\n        at Object.<anonymous> (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\__tests__\\integration\\thread-navigation.test.tsx:330:7)\n\n    \u001b[0m \u001b[90m 207 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 208 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 209 |\u001b[39m     originalError\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 210 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 211 |\u001b[39m   \n     \u001b[90m 212 |\u001b[39m   console\u001b[33m.\u001b[39mwarn \u001b[33m=\u001b[39m (\u001b[33m...\u001b[39margs) \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at console.call [as error] (jest.setup.js:209:19)\n      at DebugLogger.error (utils/debug-logger.ts:57:15)\n      at components/chat/ChatSidebarHandlers.ts:108:14\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n          at async Promise.all (index 0)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:330:7)\n\n  console.error\n    [ERROR] Failed to switch thread: TypeError: Cannot destructure property 'clearMessages' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n        at clearChatState (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\components\\chat\\ChatSidebarHandlers.ts:16:11)\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\components\\chat\\ChatSidebarHandlers.ts:95:7\n        at onClick (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\components\\chat\\ChatSidebarThreadList.tsx:169:30)\n        at executeDispatch (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16368:9)\n        at runWithFiberInDEV (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:1522:13)\n        at processDispatchQueue (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16418:19)\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:17016:9\n        at batchedUpdates$1 (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:3262:40)\n        at dispatchEventForPluginEventSystem (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16572:7)\n        at dispatchEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:20658:11)\n        at dispatchDiscreteEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:20626:11)\n        at HTMLDivElement.callTheUserObjectsOperation (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\generated\\EventListener.js:26:30)\n        at innerInvokeEventListeners (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\events\\EventTarget-impl.js:350:25)\n        at invokeEventListeners (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\events\\EventTarget-impl.js:286:3)\n        at HTMLButtonElementImpl._dispatch (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\events\\EventTarget-impl.js:233:9)\n        at HTMLButtonElementImpl.dispatchEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\events\\EventTarget-impl.js:104:17)\n        at HTMLButtonElement.dispatchEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\generated\\EventTarget.js:241:34)\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\event\\dispatchEvent.js:45:43\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\pure.js:108:16\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\act-compat.js:48:24\n        at process.env.NODE_ENV.exports.act (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react\\cjs\\react.development.js:790:22)\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\act-compat.js:47:25\n        at Object.eventWrapper (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\pure.js:107:28)\n        at Object.wrapEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\event\\wrapEvent.js:6:28)\n        at Object.dispatchEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\event\\dispatchEvent.js:45:22)\n        at Object.dispatchUIEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\event\\dispatchEvent.js:22:26)\n        at Mouse.up (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\system\\pointer\\mouse.js:100:30)\n        at PointerHost.release (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\system\\pointer\\index.js:87:24)\n        at pointerAction (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\pointer\\index.js:54:47)\n        at runNextTicks (node:internal/process/task_queues:65:5)\n        at listOnTimeout (node:internal/timers:569:9)\n        at processTimers (node:internal/timers:543:7)\n        at Object.pointer (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\pointer\\index.js:27:9)\n        at Object.asyncWrapper (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\pure.js:88:22)\n        at async Promise.all (index 1)\n        at Object.<anonymous> (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\__tests__\\integration\\thread-navigation.test.tsx:330:7)\n\n    \u001b[0m \u001b[90m 207 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 208 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 209 |\u001b[39m     originalError\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 210 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 211 |\u001b[39m   \n     \u001b[90m 212 |\u001b[39m   console\u001b[33m.\u001b[39mwarn \u001b[33m=\u001b[39m (\u001b[33m...\u001b[39margs) \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at console.call [as error] (jest.setup.js:209:19)\n      at DebugLogger.error (utils/debug-logger.ts:57:15)\n      at components/chat/ChatSidebarHandlers.ts:108:14\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n          at async Promise.all (index 1)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:330:7)\n\n  console.log\n    \ud83d\udd27 Configuring authentication mocks with: { isAuthenticated: true, userTier: 'Early' }\n\n      at ChatSidebarTestSetup.beforeEach (__tests__/components/ChatSidebar/setup.tsx:269:13)\n\n  console.log\n    \ud83d\udd27 configureAuthState called with overrides: { isAuthenticated: true, userTier: 'Early' }\n\n      at ChatSidebarTestSetup.configureAuthState (__tests__/components/ChatSidebar/setup.tsx:433:13)\n\n  console.log\n    \ud83c\udfaf Final authStateConfig: {\n      isAuthenticated: true,\n      isLoading: false,\n      user: { id: 'test-user-1', email: 'test@example.com', role: 'user' },\n      userTier: 'Early',\n      error: null,\n      refreshAuth: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      logout: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      clearError: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      hasPermission: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      isAdminOrHigher: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      isDeveloperOrHigher: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      }\n    }\n\n      at ChatSidebarTestSetup.configureAuthState (__tests__/components/ChatSidebar/setup.tsx:434:13)\n\n  console.log\n    \ud83d\udd27 configureChatSidebarHooks called with: {\n      threadsProvided: true,\n      threadsCount: 3,\n      threadIds: [ 'thread-1', 'thread-2', 'thread-3' ]\n    }\n\n      at ChatSidebarTestSetup.configureChatSidebarHooks (__tests__/components/ChatSidebar/setup.tsx:339:13)\n\n  console.log\n    \ud83c\udfaf Mock configurations: {\n      threadLoaderConfig: {\n        threads: [ [Object], [Object], [Object] ],\n        isLoadingThreads: false,\n        loadError: null,\n        loadThreads: [Function: mockConstructor] {\n          _isMockFunction: true,\n          getMockImplementation: [Function (anonymous)],\n          mock: [Getter/Setter],\n          mockClear: [Function (anonymous)],\n          mockReset: [Function (anonymous)],\n          mockRestore: [Function (anonymous)],\n          mockReturnValueOnce: [Function (anonymous)],\n          mockResolvedValueOnce: [Function (anonymous)],\n          mockRejectedValueOnce: [Function (anonymous)],\n          mockReturnValue: [Function (anonymous)],\n          mockResolvedValue: [Function (anonymous)],\n          mockRejectedValue: [Function (anonymous)],\n          mockImplementationOnce: [Function (anonymous)],\n          withImplementation: [Function: bound withImplementation],\n          mockImplementation: [Function (anonymous)],\n          mockReturnThis: [Function (anonymous)],\n          mockName: [Function (anonymous)],\n          getMockName: [Function (anonymous)],\n          Symbol(Symbol.dispose): [Function (anonymous)]\n        },\n        preloadThread: [Function: mockConstructor] {\n          _isMockFunction: true,\n          getMockImplementation: [Function (anonymous)],\n          mock: [Getter/Setter],\n          mockClear: [Function (anonymous)],\n          mockReset: [Function (anonymous)],\n          mockRestore: [Function (anonymous)],\n          mockReturnValueOnce: [Function (anonymous)],\n          mockResolvedValueOnce: [Function (anonymous)],\n          mockRejectedValueOnce: [Function (anonymous)],\n          mockReturnValue: [Function (anonymous)],\n          mockResolvedValue: [Function (anonymous)],\n          mockRejectedValue: [Function (anonymous)],\n          mockImplementationOnce: [Function (anonymous)],\n          withImplementation: [Function: bound withImplementation],\n          mockImplementation: [Function (anonymous)],\n          mockReturnThis: [Function (anonymous)],\n          mockName: [Function (anonymous)],\n          getMockName: [Function (anonymous)],\n          Symbol(Symbol.dispose): [Function (anonymous)]\n        }\n      },\n      threadFilteringConfig: {\n        sortedThreads: [ [Object], [Object], [Object] ],\n        paginatedThreads: [ [Object], [Object], [Object] ],\n        totalPages: 1\n      }\n    }\n\n      at ChatSidebarTestSetup.configureChatSidebarHooks (__tests__/components/ChatSidebar/setup.tsx:377:13)\n\n  console.log\n    \ud83c\udfaf Applied mock configurations using mockImplementation with debugging\n\n      at ChatSidebarTestSetup.configureChatSidebarHooks (__tests__/components/ChatSidebar/setup.tsx:414:13)\n\n  console.log\n    \ud83d\udd25 HOOK CALLED: useChatSidebarState (CONFIGURED) {\n      searchQuery: '',\n      setSearchQuery: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      isCreatingThread: false,\n      setIsCreatingThread: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      showAllThreads: false,\n      setShowAllThreads: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      filterType: 'all',\n      setFilterType: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      currentPage: 1,\n      setCurrentPage: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      }\n    }\n\n      at Object.<anonymous> (__tests__/components/ChatSidebar/setup.tsx:385:15)\n\n  console.log\n    \ud83d\udd25 HOOK CALLED: useThreadLoader (CONFIGURED) {\n      args: [ false, 'all', 'thread-123', [AsyncFunction (anonymous)] ],\n      returning: {\n        threads: [ [Object], [Object], [Object] ],\n        isLoadingThreads: false,\n        loadError: null,\n        loadThreads: [Function: mockConstructor] {\n          _isMockFunction: true,\n          getMockImplementation: [Function (anonymous)],\n          mock: [Getter/Setter],\n          mockClear: [Function (anonymous)],\n          mockReset: [Function (anonymous)],\n          mockRestore: [Function (anonymous)],\n          mockReturnValueOnce: [Function (anonymous)],\n          mockResolvedValueOnce: [Function (anonymous)],\n          mockRejectedValueOnce: [Function (anonymous)],\n          mockReturnValue: [Function (anonymous)],\n          mockResolvedValue: [Function (anonymous)],\n          mockRejectedValue: [Function (anonymous)],\n          mockImplementationOnce: [Function (anonymous)],\n          withImplementation: [Function: bound withImplementation],\n          mockImplementation: [Function (anonymous)],\n          mockReturnThis: [Function (anonymous)],\n          mockName: [Function (anonymous)],\n          getMockName: [Function (anonymous)],\n          Symbol(Symbol.dispose): [Function (anonymous)]\n        },\n        preloadThread: [Function: mockConstructor] {\n          _isMockFunction: true,\n          getMockImplementation: [Function (anonymous)],\n          mock: [Getter/Setter],\n          mockClear: [Function (anonymous)],\n          mockReset: [Function (anonymous)],\n          mockRestore: [Function (anonymous)],\n          mockReturnValueOnce: [Function (anonymous)],\n          mockResolvedValueOnce: [Function (anonymous)],\n          mockRejectedValueOnce: [Function (anonymous)],\n          mockReturnValue: [Function (anonymous)],\n          mockResolvedValue: [Function (anonymous)],\n          mockRejectedValue: [Function (anonymous)],\n          mockImplementationOnce: [Function (anonymous)],\n          withImplementation: [Function: bound withImplementation],\n          mockImplementation: [Function (anonymous)],\n          mockReturnThis: [Function (anonymous)],\n          mockName: [Function (anonymous)],\n          getMockName: [Function (anonymous)],\n          Symbol(Symbol.dispose): [Function (anonymous)]\n        }\n      }\n    }\n\n      at Object.<anonymous> (__tests__/components/ChatSidebar/setup.tsx:390:15)\n\n  console.log\n    \ud83d\udd25 HOOK CALLED: useThreadFiltering (CONFIGURED) {\n      threadsType: 'object',\n      isArray: true,\n      threadsLength: 3,\n      returning: {\n        sortedThreads: [ [Object], [Object], [Object] ],\n        paginatedThreads: [ [Object], [Object], [Object] ],\n        totalPages: 1\n      }\n    }\n\n      at Object.<anonymous> (__tests__/components/ChatSidebar/setup.tsx:395:15)\n\n  console.log\n    \ud83e\uddea TestChatSidebar rendering with threads: {\n      threadsLength: 3,\n      paginatedThreadsLength: 3,\n      isLoadingThreads: false,\n      loadError: null\n    }\n\n      at TestChatSidebar (__tests__/components/ChatSidebar/setup.tsx:571:11)\n\n  console.log\n    \ud83d\udd27 Configuring authentication mocks with: { isAuthenticated: true, userTier: 'Early' }\n\n      at ChatSidebarTestSetup.beforeEach (__tests__/components/ChatSidebar/setup.tsx:269:13)\n\n  console.log\n    \ud83d\udd27 configureAuthState called with overrides: { isAuthenticated: true, userTier: 'Early' }\n\n      at ChatSidebarTestSetup.configureAuthState (__tests__/components/ChatSidebar/setup.tsx:433:13)\n\n  console.log\n    \ud83c\udfaf Final authStateConfig: {\n      isAuthenticated: true,\n      isLoading: false,\n      user: { id: 'test-user-1', email: 'test@example.com', role: 'user' },\n      userTier: 'Early',\n      error: null,\n      refreshAuth: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      logout: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      clearError: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      hasPermission: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      isAdminOrHigher: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      isDeveloperOrHigher: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      }\n    }\n\n      at ChatSidebarTestSetup.configureAuthState (__tests__/components/ChatSidebar/setup.tsx:434:13)\n\n  console.log\n    \ud83d\udd27 configureChatSidebarHooks called with: {\n      threadsProvided: true,\n      threadsCount: 1000,\n      threadIds: [\n        'thread-1',  'thread-2',  'thread-3',  'thread-4',  'thread-5',\n        'thread-6',  'thread-7',  'thread-8',  'thread-9',  'thread-10',\n        'thread-11', 'thread-12', 'thread-13', 'thread-14', 'thread-15',\n        'thread-16', 'thread-17', 'thread-18', 'thread-19', 'thread-20',\n        'thread-21', 'thread-22', 'thread-23', 'thread-24', 'thread-25',\n        'thread-26', 'thread-27', 'thread-28', 'thread-29', 'thread-30',\n        'thread-31', 'thread-32', 'thread-33', 'thread-34', 'thread-35',\n        'thread-36', 'thread-37', 'thread-38', 'thread-39', 'thread-40',\n        'thread-41', 'thread-42', 'thread-43', 'thread-44', 'thread-45',\n        'thread-46', 'thread-47', 'thread-48', 'thread-49', 'thread-50',\n        'thread-51', 'thread-52', 'thread-53', 'thread-54', 'thread-55',\n        'thread-56', 'thread-57', 'thread-58', 'thread-59', 'thread-60',\n        'thread-61', 'thread-62', 'thread-63', 'thread-64', 'thread-65',\n        'thread-66', 'thread-67', 'thread-68', 'thread-69', 'thread-70',\n        'thread-71', 'thread-72', 'thread-73', 'thread-74', 'thread-75',\n        'thread-76', 'thread-77', 'thread-78', 'thread-79', 'thread-80',\n        'thread-81', 'thread-82', 'thread-83', 'thread-84', 'thread-85',\n        'thread-86', 'thread-87', 'thread-88', 'thread-89', 'thread-90',\n        'thread-91', 'thread-92', 'thread-93', 'thread-94', 'thread-95',\n        'thread-96', 'thread-97', 'thread-98', 'thread-99', 'thread-100',\n        ... 900 more items\n      ]\n    }\n\n      at ChatSidebarTestSetup.configureChatSidebarHooks (__tests__/components/ChatSidebar/setup.tsx:339:13)\n\n  console.log\n    \ud83c\udfaf Mock configurations: {\n      threadLoaderConfig: {\n        threads: [\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object],\n          ... 900 more items\n        ],\n        isLoadingThreads: false,\n        loadError: null,\n        loadThreads: [Function: mockConstructor] {\n          _isMockFunction: true,\n          getMockImplementation: [Function (anonymous)],\n          mock: [Getter/Setter],\n          mockClear: [Function (anonymous)],\n          mockReset: [Function (anonymous)],\n          mockRestore: [Function (anonymous)],\n          mockReturnValueOnce: [Function (anonymous)],\n          mockResolvedValueOnce: [Function (anonymous)],\n          mockRejectedValueOnce: [Function (anonymous)],\n          mockReturnValue: [Function (anonymous)],\n          mockResolvedValue: [Function (anonymous)],\n          mockRejectedValue: [Function (anonymous)],\n          mockImplementationOnce: [Function (anonymous)],\n          withImplementation: [Function: bound withImplementation],\n          mockImplementation: [Function (anonymous)],\n          mockReturnThis: [Function (anonymous)],\n          mockName: [Function (anonymous)],\n          getMockName: [Function (anonymous)],\n          Symbol(Symbol.dispose): [Function (anonymous)]\n        }\n      },\n      threadFilteringConfig: {\n        sortedThreads: [\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object],\n          ... 900 more items\n        ],\n        paginatedThreads: [\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object],\n          ... 900 more items\n        ],\n        totalPages: 20\n      }\n    }\n\n      at ChatSidebarTestSetup.configureChatSidebarHooks (__tests__/components/ChatSidebar/setup.tsx:377:13)\n\n  console.log\n    \ud83c\udfaf Applied mock configurations using mockImplementation with debugging\n\n      at ChatSidebarTestSetup.configureChatSidebarHooks (__tests__/components/ChatSidebar/setup.tsx:414:13)\n\n  console.log\n    \ud83d\udd25 HOOK CALLED: useChatSidebarState (CONFIGURED) {\n      searchQuery: '',\n      setSearchQuery: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      isCreatingThread: false,\n      setIsCreatingThread: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      showAllThreads: false,\n      setShowAllThreads: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      filterType: 'all',\n      setFilterType: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      currentPage: 1,\n      setCurrentPage: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      }\n    }\n\n      at Object.<anonymous> (__tests__/components/ChatSidebar/setup.tsx:385:15)\n\n  console.log\n    \ud83d\udd25 HOOK CALLED: useThreadLoader (CONFIGURED) {\n      args: [ false, 'all', 'thread-123', [AsyncFunction (anonymous)] ],\n      returning: {\n        threads: [\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object],\n          ... 900 more items\n        ],\n        isLoadingThreads: false,\n        loadError: null,\n        loadThreads: [Function: mockConstructor] {\n          _isMockFunction: true,\n          getMockImplementation: [Function (anonymous)],\n          mock: [Getter/Setter],\n          mockClear: [Function (anonymous)],\n          mockReset: [Function (anonymous)],\n          mockRestore: [Function (anonymous)],\n          mockReturnValueOnce: [Function (anonymous)],\n          mockResolvedValueOnce: [Function (anonymous)],\n          mockRejectedValueOnce: [Function (anonymous)],\n          mockReturnValue: [Function (anonymous)],\n          mockResolvedValue: [Function (anonymous)],\n          mockRejectedValue: [Function (anonymous)],\n          mockImplementationOnce: [Function (anonymous)],\n          withImplementation: [Function: bound withImplementation],\n          mockImplementation: [Function (anonymous)],\n          mockReturnThis: [Function (anonymous)],\n          mockName: [Function (anonymous)],\n          getMockName: [Function (anonymous)],\n          Symbol(Symbol.dispose): [Function (anonymous)]\n        }\n      }\n    }\n\n      at Object.<anonymous> (__tests__/components/ChatSidebar/setup.tsx:390:15)\n\n  console.log\n    \ud83d\udd25 HOOK CALLED: useThreadFiltering (CONFIGURED) {\n      threadsType: 'object',\n      isArray: true,\n      threadsLength: 1000,\n      returning: {\n        sortedThreads: [\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object],\n          ... 900 more items\n        ],\n        paginatedThreads: [\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object], [Object], [Object],\n          [Object], [Object], [Object], [Object],\n          ... 900 more items\n        ],\n        totalPages: 20\n      }\n    }\n\n      at Object.<anonymous> (__tests__/components/ChatSidebar/setup.tsx:395:15)\n\n  console.log\n    \ud83e\uddea TestChatSidebar rendering with threads: {\n      threadsLength: 1000,\n      paginatedThreadsLength: 1000,\n      isLoadingThreads: false,\n      loadError: null\n    }\n\n      at TestChatSidebar (__tests__/components/ChatSidebar/setup.tsx:571:11)\n\n  console.log\n    \ud83d\udd27 Configuring authentication mocks with: { isAuthenticated: true, userTier: 'Early' }\n\n      at ChatSidebarTestSetup.beforeEach (__tests__/components/ChatSidebar/setup.tsx:269:13)\n\n  console.log\n    \ud83d\udd27 configureAuthState called with overrides: { isAuthenticated: true, userTier: 'Early' }\n\n      at ChatSidebarTestSetup.configureAuthState (__tests__/components/ChatSidebar/setup.tsx:433:13)\n\n  console.log\n    \ud83c\udfaf Final authStateConfig: {\n      isAuthenticated: true,\n      isLoading: false,\n      user: { id: 'test-user-1', email: 'test@example.com', role: 'user' },\n      userTier: 'Early',\n      error: null,\n      refreshAuth: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      logout: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      clearError: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      hasPermission: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      isAdminOrHigher: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      isDeveloperOrHigher: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      }\n    }\n\n      at ChatSidebarTestSetup.configureAuthState (__tests__/components/ChatSidebar/setup.tsx:434:13)\n\n  console.log\n    \ud83d\udd27 configureChatSidebarHooks called with: {\n      threadsProvided: true,\n      threadsCount: 3,\n      threadIds: [ 'thread-1', 'thread-2', 'thread-3' ]\n    }\n\n      at ChatSidebarTestSetup.configureChatSidebarHooks (__tests__/components/ChatSidebar/setup.tsx:339:13)\n\n  console.log\n    \ud83c\udfaf Mock configurations: {\n      threadLoaderConfig: {\n        threads: [ [Object], [Object], [Object] ],\n        isLoadingThreads: false,\n        loadError: null,\n        loadThreads: [Function: mockConstructor] {\n          _isMockFunction: true,\n          getMockImplementation: [Function (anonymous)],\n          mock: [Getter/Setter],\n          mockClear: [Function (anonymous)],\n          mockReset: [Function (anonymous)],\n          mockRestore: [Function (anonymous)],\n          mockReturnValueOnce: [Function (anonymous)],\n          mockResolvedValueOnce: [Function (anonymous)],\n          mockRejectedValueOnce: [Function (anonymous)],\n          mockReturnValue: [Function (anonymous)],\n          mockResolvedValue: [Function (anonymous)],\n          mockRejectedValue: [Function (anonymous)],\n          mockImplementationOnce: [Function (anonymous)],\n          withImplementation: [Function: bound withImplementation],\n          mockImplementation: [Function (anonymous)],\n          mockReturnThis: [Function (anonymous)],\n          mockName: [Function (anonymous)],\n          getMockName: [Function (anonymous)],\n          Symbol(Symbol.dispose): [Function (anonymous)]\n        },\n        getCachedThread: [Function: mockConstructor] {\n          _isMockFunction: true,\n          getMockImplementation: [Function (anonymous)],\n          mock: [Getter/Setter],\n          mockClear: [Function (anonymous)],\n          mockReset: [Function (anonymous)],\n          mockRestore: [Function (anonymous)],\n          mockReturnValueOnce: [Function (anonymous)],\n          mockResolvedValueOnce: [Function (anonymous)],\n          mockRejectedValueOnce: [Function (anonymous)],\n          mockReturnValue: [Function (anonymous)],\n          mockResolvedValue: [Function (anonymous)],\n          mockRejectedValue: [Function (anonymous)],\n          mockImplementationOnce: [Function (anonymous)],\n          withImplementation: [Function: bound withImplementation],\n          mockImplementation: [Function (anonymous)],\n          mockReturnThis: [Function (anonymous)],\n          mockName: [Function (anonymous)],\n          getMockName: [Function (anonymous)],\n          Symbol(Symbol.dispose): [Function (anonymous)]\n        }\n      },\n      threadFilteringConfig: {\n        sortedThreads: [ [Object], [Object], [Object] ],\n        paginatedThreads: [ [Object], [Object], [Object] ],\n        totalPages: 1\n      }\n    }\n\n      at ChatSidebarTestSetup.configureChatSidebarHooks (__tests__/components/ChatSidebar/setup.tsx:377:13)\n\n  console.log\n    \ud83c\udfaf Applied mock configurations using mockImplementation with debugging\n\n      at ChatSidebarTestSetup.configureChatSidebarHooks (__tests__/components/ChatSidebar/setup.tsx:414:13)\n\n  console.log\n    \ud83d\udd25 HOOK CALLED: useChatSidebarState (CONFIGURED) {\n      searchQuery: '',\n      setSearchQuery: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      isCreatingThread: false,\n      setIsCreatingThread: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      showAllThreads: false,\n      setShowAllThreads: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      filterType: 'all',\n      setFilterType: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      },\n      currentPage: 1,\n      setCurrentPage: [Function: mockConstructor] {\n        _isMockFunction: true,\n        getMockImplementation: [Function (anonymous)],\n        mock: [Getter/Setter],\n        mockClear: [Function (anonymous)],\n        mockReset: [Function (anonymous)],\n        mockRestore: [Function (anonymous)],\n        mockReturnValueOnce: [Function (anonymous)],\n        mockResolvedValueOnce: [Function (anonymous)],\n        mockRejectedValueOnce: [Function (anonymous)],\n        mockReturnValue: [Function (anonymous)],\n        mockResolvedValue: [Function (anonymous)],\n        mockRejectedValue: [Function (anonymous)],\n        mockImplementationOnce: [Function (anonymous)],\n        withImplementation: [Function: bound withImplementation],\n        mockImplementation: [Function (anonymous)],\n        mockReturnThis: [Function (anonymous)],\n        mockName: [Function (anonymous)],\n        getMockName: [Function (anonymous)],\n        Symbol(Symbol.dispose): [Function (anonymous)]\n      }\n    }\n\n      at Object.<anonymous> (__tests__/components/ChatSidebar/setup.tsx:385:15)\n\n  console.log\n    \ud83d\udd25 HOOK CALLED: useThreadLoader (CONFIGURED) {\n      args: [ false, 'all', 'thread-123', [AsyncFunction (anonymous)] ],\n      returning: {\n        threads: [ [Object], [Object], [Object] ],\n        isLoadingThreads: false,\n        loadError: null,\n        loadThreads: [Function: mockConstructor] {\n          _isMockFunction: true,\n          getMockImplementation: [Function (anonymous)],\n          mock: [Getter/Setter],\n          mockClear: [Function (anonymous)],\n          mockReset: [Function (anonymous)],\n          mockRestore: [Function (anonymous)],\n          mockReturnValueOnce: [Function (anonymous)],\n          mockResolvedValueOnce: [Function (anonymous)],\n          mockRejectedValueOnce: [Function (anonymous)],\n          mockReturnValue: [Function (anonymous)],\n          mockResolvedValue: [Function (anonymous)],\n          mockRejectedValue: [Function (anonymous)],\n          mockImplementationOnce: [Function (anonymous)],\n          withImplementation: [Function: bound withImplementation],\n          mockImplementation: [Function (anonymous)],\n          mockReturnThis: [Function (anonymous)],\n          mockName: [Function (anonymous)],\n          getMockName: [Function (anonymous)],\n          Symbol(Symbol.dispose): [Function (anonymous)]\n        },\n        getCachedThread: [Function: mockConstructor] {\n          _isMockFunction: true,\n          getMockImplementation: [Function (anonymous)],\n          mock: [Getter/Setter],\n          mockClear: [Function (anonymous)],\n          mockReset: [Function (anonymous)],\n          mockRestore: [Function (anonymous)],\n          mockReturnValueOnce: [Function (anonymous)],\n          mockResolvedValueOnce: [Function (anonymous)],\n          mockRejectedValueOnce: [Function (anonymous)],\n          mockReturnValue: [Function (anonymous)],\n          mockResolvedValue: [Function (anonymous)],\n          mockRejectedValue: [Function (anonymous)],\n          mockImplementationOnce: [Function (anonymous)],\n          withImplementation: [Function: bound withImplementation],\n          mockImplementation: [Function (anonymous)],\n          mockReturnThis: [Function (anonymous)],\n          mockName: [Function (anonymous)],\n          getMockName: [Function (anonymous)],\n          Symbol(Symbol.dispose): [Function (anonymous)]\n        }\n      }\n    }\n\n      at Object.<anonymous> (__tests__/components/ChatSidebar/setup.tsx:390:15)\n\n  console.log\n    \ud83d\udd25 HOOK CALLED: useThreadFiltering (CONFIGURED) {\n      threadsType: 'object',\n      isArray: true,\n      threadsLength: 3,\n      returning: {\n        sortedThreads: [ [Object], [Object], [Object] ],\n        paginatedThreads: [ [Object], [Object], [Object] ],\n        totalPages: 1\n      }\n    }\n\n      at Object.<anonymous> (__tests__/components/ChatSidebar/setup.tsx:395:15)\n\n  console.log\n    \ud83e\uddea TestChatSidebar rendering with threads: {\n      threadsLength: 3,\n      paginatedThreadsLength: 3,\n      isLoadingThreads: false,\n      loadError: null\n    }\n\n      at TestChatSidebar (__tests__/components/ChatSidebar/setup.tsx:571:11)\n\n  console.error\n    [ERROR] Failed to switch thread: TypeError: Cannot destructure property 'clearMessages' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n        at clearChatState (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\components\\chat\\ChatSidebarHandlers.ts:16:11)\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\components\\chat\\ChatSidebarHandlers.ts:95:7\n        at onClick (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\components\\chat\\ChatSidebarThreadList.tsx:169:30)\n        at executeDispatch (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16368:9)\n        at runWithFiberInDEV (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:1522:13)\n        at processDispatchQueue (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16418:19)\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:17016:9\n        at batchedUpdates$1 (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:3262:40)\n        at dispatchEventForPluginEventSystem (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16572:7)\n        at dispatchEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:20658:11)\n        at dispatchDiscreteEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:20626:11)\n        at HTMLDivElement.callTheUserObjectsOperation (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\generated\\EventListener.js:26:30)\n        at innerInvokeEventListeners (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\events\\EventTarget-impl.js:350:25)\n        at invokeEventListeners (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\events\\EventTarget-impl.js:286:3)\n        at HTMLButtonElementImpl._dispatch (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\events\\EventTarget-impl.js:233:9)\n        at HTMLButtonElementImpl.dispatchEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\events\\EventTarget-impl.js:104:17)\n        at HTMLButtonElement.dispatchEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jsdom\\lib\\jsdom\\living\\generated\\EventTarget.js:241:34)\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\event\\dispatchEvent.js:45:43\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\pure.js:108:16\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\act-compat.js:48:24\n        at process.env.NODE_ENV.exports.act (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react\\cjs\\react.development.js:790:22)\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\act-compat.js:47:25\n        at Object.eventWrapper (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\pure.js:107:28)\n        at Object.wrapEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\event\\wrapEvent.js:6:28)\n        at Object.dispatchEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\event\\dispatchEvent.js:45:22)\n        at Object.dispatchUIEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\event\\dispatchEvent.js:22:26)\n        at Mouse.up (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\system\\pointer\\mouse.js:100:30)\n        at PointerHost.release (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\system\\pointer\\index.js:87:24)\n        at pointerAction (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\pointer\\index.js:54:47)\n        at runNextTicks (node:internal/process/task_queues:65:5)\n        at listOnTimeout (node:internal/timers:569:9)\n        at processTimers (node:internal/timers:543:7)\n        at Object.pointer (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\user-event\\dist\\cjs\\pointer\\index.js:27:9)\n        at Object.asyncWrapper (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\pure.js:88:22)\n        at Object.<anonymous> (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\__tests__\\integration\\thread-navigation.test.tsx:399:7)\n\n    \u001b[0m \u001b[90m 207 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 208 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 209 |\u001b[39m     originalError\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 210 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 211 |\u001b[39m   \n     \u001b[90m 212 |\u001b[39m   console\u001b[33m.\u001b[39mwarn \u001b[33m=\u001b[39m (\u001b[33m...\u001b[39margs) \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at console.call [as error] (jest.setup.js:209:19)\n      at DebugLogger.error (utils/debug-logger.ts:57:15)\n      at components/chat/ChatSidebarHandlers.ts:108:14\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:399:7)\n\n  console.warn\n    [2025-08-22T00:54:19.406Z] WARN: Received 401, attempting [REDACTED] undefined\n\n    \u001b[0m \u001b[90m 217 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 218 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 219 |\u001b[39m     originalWarn\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 220 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 221 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 222 |\u001b[39m\u001b[0m\n\n      at console.call (jest.setup.js:219:18)\n      at FrontendLogger.log (lib/logger.ts:145:19)\n      at FrontendLogger.warn (lib/logger.ts:211:10)\n      at AuthInterceptor.authenticatedFetch (lib/auth-interceptor.ts:186:16)\n      at performFetch (services/apiClientWrapper.ts:145:24)\n      at ApiClientWrapper.retryRequest (services/apiClientWrapper.ts:83:16)\n      at ApiClientWrapper.request (services/apiClientWrapper.ts:188:16)\n\n  console.info\n    [2025-08-22T00:54:19.453Z] INFO: [REDACTED] successfully undefined\n\n      at FrontendLogger.log (lib/logger.ts:142:19)\n\n  console.info\n    [2025-08-22T00:54:19.454Z] INFO: Retrying request with refreshed token undefined\n\n      at FrontendLogger.log (lib/logger.ts:142:19)\n\n  console.warn\n    [2025-08-22T00:54:20.459Z] WARN: Received 401, attempting [REDACTED] undefined\n\n    \u001b[0m \u001b[90m 217 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 218 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 219 |\u001b[39m     originalWarn\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 220 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 221 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 222 |\u001b[39m\u001b[0m\n\n      at console.call (jest.setup.js:219:18)\n      at FrontendLogger.log (lib/logger.ts:145:19)\n      at FrontendLogger.warn (lib/logger.ts:211:10)\n      at AuthInterceptor.authenticatedFetch (lib/auth-interceptor.ts:186:16)\n      at performFetch (services/apiClientWrapper.ts:145:24)\n      at ApiClientWrapper.retryRequest (services/apiClientWrapper.ts:83:16)\n      at ApiClientWrapper.request (services/apiClientWrapper.ts:188:16)\n      at Object.<anonymous> (__tests__/services/apiClient.test.ts:92:9)\n\n  console.info\n    [2025-08-22T00:54:20.462Z] INFO: [REDACTED] successfully undefined\n\n      at FrontendLogger.log (lib/logger.ts:142:19)\n\n  console.info\n    [2025-08-22T00:54:20.463Z] INFO: Retrying request with refreshed token undefined\n\n      at FrontendLogger.log (lib/logger.ts:142:19)\n\n  console.warn\n    [2025-08-22T00:54:22.464Z] WARN: Received 401, attempting [REDACTED] undefined\n\n    \u001b[0m \u001b[90m 217 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 218 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 219 |\u001b[39m     originalWarn\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 220 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 221 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 222 |\u001b[39m\u001b[0m\n\n      at console.call (jest.setup.js:219:18)\n      at FrontendLogger.log (lib/logger.ts:145:19)\n      at FrontendLogger.warn (lib/logger.ts:211:10)\n      at AuthInterceptor.authenticatedFetch (lib/auth-interceptor.ts:186:16)\n      at performFetch (services/apiClientWrapper.ts:145:24)\n      at ApiClientWrapper.retryRequest (services/apiClientWrapper.ts:83:16)\n      at ApiClientWrapper.request (services/apiClientWrapper.ts:188:16)\n      at Object.<anonymous> (__tests__/services/apiClient.test.ts:92:9)\n\n  console.info\n    [2025-08-22T00:54:22.469Z] INFO: [REDACTED] successfully undefined\n\n      at FrontendLogger.log (lib/logger.ts:142:19)\n\n  console.info\n    [2025-08-22T00:54:22.470Z] INFO: Retrying request with refreshed token undefined\n\n      at FrontendLogger.log (lib/logger.ts:142:19)\n\n  console.error\n    [2025-08-22T00:54:22.490Z] ERROR: Request failed [AuthInterceptor] Error: Connection failed\n        at setupReconnectionMocks (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\__tests__\\services\\apiClient.test.ts:182:32)\n        at Object.<anonymous> (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\__tests__\\services\\apiClient.test.ts:175:7)\n        at Promise.finally.completed (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1559:28)\n        at new Promise (<anonymous>)\n        at callAsyncCircusFn (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1499:10)\n        at _callCircusTest (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1009:40)\n        at _runTest (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:949:3)\n        at _runTestsForDescribeBlock (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:839:13)\n        at _runTestsForDescribeBlock (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n        at _runTestsForDescribeBlock (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n        at run (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:757:3)\n        at runAndTransformResultsToJestFormat (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1920:21)\n        at jestAdapter (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\runner.js:101:19)\n        at runTestInternal (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n        at runTest (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n        at Object.worker (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-runner\\build\\testWorker.js:497:12)\n\n    \u001b[0m \u001b[90m 207 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 208 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 209 |\u001b[39m     originalError\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 210 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 211 |\u001b[39m   \n     \u001b[90m 212 |\u001b[39m   console\u001b[33m.\u001b[39mwarn \u001b[33m=\u001b[39m (\u001b[33m...\u001b[39margs) \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at console.call [as error] (jest.setup.js:209:19)\n      at FrontendLogger.log (lib/logger.ts:148:19)\n      at FrontendLogger.error (lib/logger.ts:215:10)\n      at AuthInterceptor.authenticatedFetch (lib/auth-interceptor.ts:192:14)\n      at performFetch (services/apiClientWrapper.ts:145:24)\n      at ApiClientWrapper.retryRequest (services/apiClientWrapper.ts:83:16)\n      at ApiClientWrapper.request (services/apiClientWrapper.ts:188:16)\n\n  console.error\n    [2025-08-22T00:54:23.510Z] ERROR: Request failed [AuthInterceptor] Error: Network error\n        at setupRetryMocks (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\__tests__\\services\\apiClient.test.ts:217:32)\n        at Object.<anonymous> (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\__tests__\\services\\apiClient.test.ts:199:7)\n        at Promise.finally.completed (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1559:28)\n        at new Promise (<anonymous>)\n        at callAsyncCircusFn (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1499:10)\n        at _callCircusTest (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1009:40)\n        at _runTest (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:949:3)\n        at _runTestsForDescribeBlock (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:839:13)\n        at _runTestsForDescribeBlock (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n        at _runTestsForDescribeBlock (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n        at run (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:757:3)\n        at runAndTransformResultsToJestFormat (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1920:21)\n        at jestAdapter (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\runner.js:101:19)\n        at runTestInternal (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n        at runTest (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n        at Object.worker (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-runner\\build\\testWorker.js:497:12)\n\n    \u001b[0m \u001b[90m 207 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 208 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 209 |\u001b[39m     originalError\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 210 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 211 |\u001b[39m   \n     \u001b[90m 212 |\u001b[39m   console\u001b[33m.\u001b[39mwarn \u001b[33m=\u001b[39m (\u001b[33m...\u001b[39margs) \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at console.call [as error] (jest.setup.js:209:19)\n      at FrontendLogger.log (lib/logger.ts:148:19)\n      at FrontendLogger.error (lib/logger.ts:215:10)\n      at AuthInterceptor.authenticatedFetch (lib/auth-interceptor.ts:192:14)\n      at performFetch (services/apiClientWrapper.ts:145:24)\n      at ApiClientWrapper.retryRequest (services/apiClientWrapper.ts:83:16)\n      at ApiClientWrapper.request (services/apiClientWrapper.ts:188:16)\n\n  console.error\n    [2025-08-22T00:54:23.513Z] ERROR: Request failed [AuthInterceptor] Error: Error 1\n        at setupCustomRetryMocks (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\__tests__\\services\\apiClient.test.ts:248:32)\n        at Object.<anonymous> (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\__tests__\\services\\apiClient.test.ts:235:7)\n        at Promise.finally.completed (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1559:28)\n        at new Promise (<anonymous>)\n        at callAsyncCircusFn (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1499:10)\n        at _callCircusTest (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1009:40)\n        at _runTest (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:949:3)\n        at _runTestsForDescribeBlock (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:839:13)\n        at _runTestsForDescribeBlock (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n        at _runTestsForDescribeBlock (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n        at run (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:757:3)\n        at runAndTransformResultsToJestFormat (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1920:21)\n        at jestAdapter (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\runner.js:101:19)\n        at runTestInternal (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n        at runTest (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n        at Object.worker (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-runner\\build\\testWorker.js:497:12)\n\n    \u001b[0m \u001b[90m 207 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 208 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 209 |\u001b[39m     originalError\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 210 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 211 |\u001b[39m   \n     \u001b[90m 212 |\u001b[39m   console\u001b[33m.\u001b[39mwarn \u001b[33m=\u001b[39m (\u001b[33m...\u001b[39margs) \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at console.call [as error] (jest.setup.js:209:19)\n      at FrontendLogger.log (lib/logger.ts:148:19)\n      at FrontendLogger.error (lib/logger.ts:215:10)\n      at AuthInterceptor.authenticatedFetch (lib/auth-interceptor.ts:192:14)\n      at performFetch (services/apiClientWrapper.ts:145:24)\n      at ApiClientWrapper.retryRequest (services/apiClientWrapper.ts:83:16)\n      at ApiClientWrapper.request (services/apiClientWrapper.ts:188:16)\n\n  console.error\n    [2025-08-22T00:54:23.517Z] ERROR: Request failed [AuthInterceptor] Error: Network error\n        at setupNoRetryMocks (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\__tests__\\services\\apiClient.test.ts:271:35)\n        at Object.<anonymous> (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\__tests__\\services\\apiClient.test.ts:265:7)\n        at Promise.finally.completed (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1559:28)\n        at new Promise (<anonymous>)\n        at callAsyncCircusFn (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1499:10)\n        at _callCircusTest (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1009:40)\n        at _runTest (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:949:3)\n        at _runTestsForDescribeBlock (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:839:13)\n        at _runTestsForDescribeBlock (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n        at _runTestsForDescribeBlock (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n        at run (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:757:3)\n        at runAndTransformResultsToJestFormat (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1920:21)\n        at jestAdapter (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\runner.js:101:19)\n        at runTestInternal (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n        at runTest (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n        at Object.worker (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-runner\\build\\testWorker.js:497:12)\n\n    \u001b[0m \u001b[90m 207 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 208 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 209 |\u001b[39m     originalError\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 210 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 211 |\u001b[39m   \n     \u001b[90m 212 |\u001b[39m   console\u001b[33m.\u001b[39mwarn \u001b[33m=\u001b[39m (\u001b[33m...\u001b[39margs) \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at console.call [as error] (jest.setup.js:209:19)\n      at FrontendLogger.log (lib/logger.ts:148:19)\n      at FrontendLogger.error (lib/logger.ts:215:10)\n      at AuthInterceptor.authenticatedFetch (lib/auth-interceptor.ts:192:14)\n      at performFetch (services/apiClientWrapper.ts:145:24)\n      at ApiClientWrapper.request (services/apiClientWrapper.ts:194:16)\n\n  console.error\n    [2025-08-22T00:54:23.520Z] ERROR: Request failed [AuthInterceptor] Error: Final failure\n        at setupExhaustedRetryMocks (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\__tests__\\services\\apiClient.test.ts:294:35)\n        at Object.<anonymous> (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\__tests__\\services\\apiClient.test.ts:283:7)\n        at Promise.finally.completed (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1559:28)\n        at new Promise (<anonymous>)\n        at callAsyncCircusFn (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1499:10)\n        at _callCircusTest (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1009:40)\n        at _runTest (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:949:3)\n        at _runTestsForDescribeBlock (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:839:13)\n        at _runTestsForDescribeBlock (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n        at _runTestsForDescribeBlock (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n        at run (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:757:3)\n        at runAndTransformResultsToJestFormat (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1920:21)\n        at jestAdapter (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\runner.js:101:19)\n        at runTestInternal (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n        at runTest (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n        at Object.worker (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-runner\\build\\testWorker.js:497:12)\n\n    \u001b[0m \u001b[90m 207 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 208 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 209 |\u001b[39m     originalError\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 210 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 211 |\u001b[39m   \n     \u001b[90m 212 |\u001b[39m   console\u001b[33m.\u001b[39mwarn \u001b[33m=\u001b[39m (\u001b[33m...\u001b[39margs) \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at console.call [as error] (jest.setup.js:209:19)\n      at FrontendLogger.log (lib/logger.ts:148:19)\n      at FrontendLogger.error (lib/logger.ts:215:10)\n      at AuthInterceptor.authenticatedFetch (lib/auth-interceptor.ts:192:14)\n      at performFetch (services/apiClientWrapper.ts:145:24)\n      at ApiClientWrapper.retryRequest (services/apiClientWrapper.ts:83:16)\n      at ApiClientWrapper.request (services/apiClientWrapper.ts:188:16)\n\n  console.error\n    [2025-08-22T00:54:23.527Z] ERROR: Request failed [AuthInterceptor] Error: Temporary failure\n        at setupIntermittentFailureMocks (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\__tests__\\services\\apiClient.test.ts:314:32)\n        at Object.<anonymous> (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\__tests__\\services\\apiClient.test.ts:302:7)\n        at Promise.finally.completed (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1559:28)\n        at new Promise (<anonymous>)\n        at callAsyncCircusFn (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1499:10)\n        at _callCircusTest (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1009:40)\n        at _runTest (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:949:3)\n        at _runTestsForDescribeBlock (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:839:13)\n        at _runTestsForDescribeBlock (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n        at _runTestsForDescribeBlock (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n        at run (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:757:3)\n        at runAndTransformResultsToJestFormat (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1920:21)\n        at jestAdapter (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\runner.js:101:19)\n        at runTestInternal (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n        at runTest (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n        at Object.worker (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-runner\\build\\testWorker.js:497:12)\n\n    \u001b[0m \u001b[90m 207 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 208 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 209 |\u001b[39m     originalError\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 210 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 211 |\u001b[39m   \n     \u001b[90m 212 |\u001b[39m   console\u001b[33m.\u001b[39mwarn \u001b[33m=\u001b[39m (\u001b[33m...\u001b[39margs) \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at console.call [as error] (jest.setup.js:209:19)\n      at FrontendLogger.log (lib/logger.ts:148:19)\n      at FrontendLogger.error (lib/logger.ts:215:10)\n      at AuthInterceptor.authenticatedFetch (lib/auth-interceptor.ts:192:14)\n      at performFetch (services/apiClientWrapper.ts:145:24)\n      at ApiClientWrapper.retryRequest (services/apiClientWrapper.ts:83:16)\n      at ApiClientWrapper.request (services/apiClientWrapper.ts:188:16)\n\n  console.error\n    [2025-08-22T00:54:23.537Z] ERROR: Request failed [AuthInterceptor] Error: Request timeout\n        at Object.<anonymous> (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\__tests__\\services\\apiClient.test.ts:411:28)\n        at Promise.finally.completed (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1559:28)\n        at new Promise (<anonymous>)\n        at callAsyncCircusFn (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1499:10)\n        at _callCircusTest (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1009:40)\n        at _runTest (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:949:3)\n        at _runTestsForDescribeBlock (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:839:13)\n        at _runTestsForDescribeBlock (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n        at _runTestsForDescribeBlock (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n        at run (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:757:3)\n        at runAndTransformResultsToJestFormat (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1920:21)\n        at jestAdapter (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\runner.js:101:19)\n        at runTestInternal (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n        at runTest (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n        at Object.worker (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-runner\\build\\testWorker.js:497:12)\n\n    \u001b[0m \u001b[90m 207 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 208 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 209 |\u001b[39m     originalError\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 210 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 211 |\u001b[39m   \n     \u001b[90m 212 |\u001b[39m   console\u001b[33m.\u001b[39mwarn \u001b[33m=\u001b[39m (\u001b[33m...\u001b[39margs) \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at console.call [as error] (jest.setup.js:209:19)\n      at FrontendLogger.log (lib/logger.ts:148:19)\n      at FrontendLogger.error (lib/logger.ts:215:10)\n      at AuthInterceptor.authenticatedFetch (lib/auth-interceptor.ts:192:14)\n      at performFetch (services/apiClientWrapper.ts:145:24)\n      at ApiClientWrapper.retryRequest (services/apiClientWrapper.ts:83:16)\n      at ApiClientWrapper.request (services/apiClientWrapper.ts:188:16)\n\n  console.error\n    [2025-08-22T00:54:23.542Z] ERROR: Request failed [AuthInterceptor] Error: Authentication failed\n        at Object.<anonymous> (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\__tests__\\services\\apiClient.test.ts:447:30)\n        at Promise.finally.completed (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1559:28)\n        at new Promise (<anonymous>)\n        at callAsyncCircusFn (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1499:10)\n        at _callCircusTest (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1009:40)\n        at _runTest (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:949:3)\n        at _runTestsForDescribeBlock (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:839:13)\n        at _runTestsForDescribeBlock (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n        at _runTestsForDescribeBlock (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n        at run (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:757:3)\n        at runAndTransformResultsToJestFormat (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1920:21)\n        at jestAdapter (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\runner.js:101:19)\n        at runTestInternal (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n        at runTest (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n        at Object.worker (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-runner\\build\\testWorker.js:497:12)\n\n    \u001b[0m \u001b[90m 207 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 208 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 209 |\u001b[39m     originalError\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 210 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 211 |\u001b[39m   \n     \u001b[90m 212 |\u001b[39m   console\u001b[33m.\u001b[39mwarn \u001b[33m=\u001b[39m (\u001b[33m...\u001b[39margs) \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at console.call [as error] (jest.setup.js:209:19)\n      at FrontendLogger.log (lib/logger.ts:148:19)\n      at FrontendLogger.error (lib/logger.ts:215:10)\n      at AuthInterceptor.authenticatedFetch (lib/auth-interceptor.ts:192:14)\n      at performFetch (services/apiClientWrapper.ts:145:24)\n      at ApiClientWrapper.retryRequest (services/apiClientWrapper.ts:83:16)\n      at ApiClientWrapper.request (services/apiClientWrapper.ts:188:16)\n\n  console.error\n    An update to RetryTestComponent inside a test was not wrapped in act(...).\n    \n    When testing, code that causes React state updates should be wrapped into act(...):\n    \n    act(() => {\n      /* fire events that update state */\n    });\n    /* assert on the output */\n    \n    This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act\n\n    \u001b[0m \u001b[90m 207 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 208 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 209 |\u001b[39m     originalError\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 210 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 211 |\u001b[39m   \n     \u001b[90m 212 |\u001b[39m   console\u001b[33m.\u001b[39mwarn \u001b[33m=\u001b[39m (\u001b[33m...\u001b[39margs) \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at console.call [as error] (jest.setup.js:209:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:16023:19\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:16022:9)\n      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:14396:11)\n      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:6969:13)\n      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:6927:7)\n      at onRetry (__tests__/integration/error-handling-retry.test.tsx:173:31)\n      at RobustApiClient.request (__tests__/integration/error-handling-retry.test.tsx:97:11)\n      at makeRequest (__tests__/integration/error-handling-retry.test.tsx:171:22)\n\n  console.error\n    An update to RetryTestComponent inside a test was not wrapped in act(...).\n    \n    When testing, code that causes React state updates should be wrapped into act(...):\n    \n    act(() => {\n      /* fire events that update state */\n    });\n    /* assert on the output */\n    \n    This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act\n\n    \u001b[0m \u001b[90m 207 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 208 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 209 |\u001b[39m     originalError\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 210 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 211 |\u001b[39m   \n     \u001b[90m 212 |\u001b[39m   console\u001b[33m.\u001b[39mwarn \u001b[33m=\u001b[39m (\u001b[33m...\u001b[39margs) \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at console.call [as error] (jest.setup.js:209:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:16023:19\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:16022:9)\n      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:14396:11)\n      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:6969:13)\n      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:6927:7)\n      at onRetry (__tests__/integration/error-handling-retry.test.tsx:173:31)\n      at RobustApiClient.request (__tests__/integration/error-handling-retry.test.tsx:97:11)\n      at makeRequest (__tests__/integration/error-handling-retry.test.tsx:171:22)\n\n  console.error\n    An update to TestComponent inside a test was not wrapped in act(...).\n    \n    When testing, code that causes React state updates should be wrapped into act(...):\n    \n    act(() => {\n      /* fire events that update state */\n    });\n    /* assert on the output */\n    \n    This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act\n\n    \u001b[0m \u001b[90m 207 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 208 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 209 |\u001b[39m     originalError\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 210 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 211 |\u001b[39m   \n     \u001b[90m 212 |\u001b[39m   console\u001b[33m.\u001b[39mwarn \u001b[33m=\u001b[39m (\u001b[33m...\u001b[39margs) \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at console.call [as error] (jest.setup.js:209:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:16023:19\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:16022:9)\n      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:14396:11)\n      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:6969:13)\n      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:6927:7)\n      at onRetry (__tests__/integration/error-handling-retry.test.tsx:460:15)\n      at RobustApiClient.request (__tests__/integration/error-handling-retry.test.tsx:97:11)\n      at makeRequest (__tests__/integration/error-handling-retry.test.tsx:448:11)\n\n  console.error\n    An update to TimeoutComponent inside a test was not wrapped in act(...).\n    \n    When testing, code that causes React state updates should be wrapped into act(...):\n    \n    act(() => {\n      /* fire events that update state */\n    });\n    /* assert on the output */\n    \n    This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act\n\n    \u001b[0m \u001b[90m 207 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 208 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 209 |\u001b[39m     originalError\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 210 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 211 |\u001b[39m   \n     \u001b[90m 212 |\u001b[39m   console\u001b[33m.\u001b[39mwarn \u001b[33m=\u001b[39m (\u001b[33m...\u001b[39margs) \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at console.call [as error] (jest.setup.js:209:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:16023:19\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:16022:9)\n      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:14396:11)\n      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:6969:13)\n      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:6927:7)\n      at testTimeout (__tests__/integration/error-handling-retry.test.tsx:267:7)\n\n  console.error\n    An update to TimeoutComponent inside a test was not wrapped in act(...).\n    \n    When testing, code that causes React state updates should be wrapped into act(...):\n    \n    act(() => {\n      /* fire events that update state */\n    });\n    /* assert on the output */\n    \n    This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act\n\n    \u001b[0m \u001b[90m 207 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 208 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 209 |\u001b[39m     originalError\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 210 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 211 |\u001b[39m   \n     \u001b[90m 212 |\u001b[39m   console\u001b[33m.\u001b[39mwarn \u001b[33m=\u001b[39m (\u001b[33m...\u001b[39margs) \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at console.call [as error] (jest.setup.js:209:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:16023:19\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:16022:9)\n      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:14396:11)\n      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:6969:13)\n      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:6927:7)\n      at testTimeout (__tests__/integration/error-handling-retry.test.tsx:275:7)\n\n  console.error\n    An update to OptimisticThreadManager inside a test was not wrapped in act(...).\n    \n    When testing, code that causes React state updates should be wrapped into act(...):\n    \n    act(() => {\n      /* fire events that update state */\n    });\n    /* assert on the output */\n    \n    This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act\n\n    \u001b[0m \u001b[90m 207 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 208 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 209 |\u001b[39m     originalError\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 210 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 211 |\u001b[39m   \n     \u001b[90m 212 |\u001b[39m   console\u001b[33m.\u001b[39mwarn \u001b[33m=\u001b[39m (\u001b[33m...\u001b[39margs) \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at console.call [as error] (jest.setup.js:209:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:16023:19\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:16022:9)\n      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:14396:11)\n      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:6969:13)\n      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:6927:7)\n      at addOptimistic (__tests__/integration/data-fetching-optimistic.test.tsx:42:7)\n      at handleAddThread (__tests__/integration/data-fetching-optimistic.test.tsx:124:5)\n\n  console.error\n    An update to OptimisticThreadManager inside a test was not wrapped in act(...).\n    \n    When testing, code that causes React state updates should be wrapped into act(...):\n    \n    act(() => {\n      /* fire events that update state */\n    });\n    /* assert on the output */\n    \n    This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act\n\n    \u001b[0m \u001b[90m 207 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 208 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 209 |\u001b[39m     originalError\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 210 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 211 |\u001b[39m   \n     \u001b[90m 212 |\u001b[39m   console\u001b[33m.\u001b[39mwarn \u001b[33m=\u001b[39m (\u001b[33m...\u001b[39margs) \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at console.call [as error] (jest.setup.js:209:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:16023:19\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:16022:9)\n      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:14396:11)\n      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:6969:13)\n      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:6927:7)\n      at addOptimistic (__tests__/integration/data-fetching-optimistic.test.tsx:46:7)\n      at handleAddThread (__tests__/integration/data-fetching-optimistic.test.tsx:124:5)\n\n  console.error\n    An update to OptimisticThreadManager inside a test was not wrapped in act(...).\n    \n    When testing, code that causes React state updates should be wrapped into act(...):\n    \n    act(() => {\n      /* fire events that update state */\n    });\n    /* assert on the output */\n    \n    This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act\n\n    \u001b[0m \u001b[90m 207 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 208 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 209 |\u001b[39m     originalError\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 210 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 211 |\u001b[39m   \n     \u001b[90m 212 |\u001b[39m   console\u001b[33m.\u001b[39mwarn \u001b[33m=\u001b[39m (\u001b[33m...\u001b[39margs) \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at console.call [as error] (jest.setup.js:209:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:16023:19\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:16022:9)\n      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:14396:11)\n      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:6969:13)\n      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:6927:7)\n      at addOptimistic (__tests__/integration/data-fetching-optimistic.test.tsx:42:7)\n      at handleAddThread (__tests__/integration/data-fetching-optimistic.test.tsx:124:5)\n\n  console.warn\n    A function to advance timers was called but the timers APIs are not replaced with fake timers. Call `jest.useFakeTimers()` in this test file or enable fake timers for all tests by setting 'fakeTimers': {'enableGlobally': true} in Jest configuration file.\n    Stack Trace:\n    \n        \u001b[0m \u001b[90m 48 |\u001b[39m\n         \u001b[90m 49 |\u001b[39m   afterEach(() \u001b[33m=>\u001b[39m {\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 50 |\u001b[39m     jest\u001b[33m.\u001b[39mrunOnlyPendingTimers()\u001b[33m;\u001b[39m\n         \u001b[90m    |\u001b[39m          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 51 |\u001b[39m     jest\u001b[33m.\u001b[39museRealTimers()\u001b[33m;\u001b[39m\n         \u001b[90m 52 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n         \u001b[90m 53 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n    \n          Error: \n          at FakeTimers._checkFakeTimers (node_modules/@jest/fake-timers/build/index.js:641:7)\n          at FakeTimers.runOnlyPendingTimers (node_modules/@jest/fake-timers/build/index.js:541:14)\n          at Object.<anonymous> (__tests__/auth/login-to-chat-advanced.test.tsx:50:10)\n\n    \u001b[0m \u001b[90m 217 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 218 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 219 |\u001b[39m     originalWarn\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 220 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 221 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 222 |\u001b[39m\u001b[0m\n\n      at console.call (jest.setup.js:219:18)\n      at FakeTimers._checkFakeTimers (node_modules/@jest/fake-timers/build/index.js:639:28)\n      at FakeTimers.runOnlyPendingTimers (node_modules/@jest/fake-timers/build/index.js:541:14)\n      at Object.<anonymous> (__tests__/auth/login-to-chat-advanced.test.tsx:50:10)\n\n  console.error\n    An update to OptimisticThreadManager inside a test was not wrapped in act(...).\n    \n    When testing, code that causes React state updates should be wrapped into act(...):\n    \n    act(() => {\n      /* fire events that update state */\n    });\n    /* assert on the output */\n    \n    This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act\n\n    \u001b[0m \u001b[90m 207 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 208 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 209 |\u001b[39m     originalError\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 210 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 211 |\u001b[39m   \n     \u001b[90m 212 |\u001b[39m   console\u001b[33m.\u001b[39mwarn \u001b[33m=\u001b[39m (\u001b[33m...\u001b[39margs) \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at console.call [as error] (jest.setup.js:209:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:16023:19\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:16022:9)\n      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:14396:11)\n      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:6969:13)\n      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:6927:7)\n      at addOptimistic (__tests__/integration/data-fetching-optimistic.test.tsx:42:7)\n      at handleAddThread (__tests__/integration/data-fetching-optimistic.test.tsx:124:5)\n\n  console.error\n    An update to OptimisticThreadManager inside a test was not wrapped in act(...).\n    \n    When testing, code that causes React state updates should be wrapped into act(...):\n    \n    act(() => {\n      /* fire events that update state */\n    });\n    /* assert on the output */\n    \n    This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act\n\n    \u001b[0m \u001b[90m 207 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 208 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 209 |\u001b[39m     originalError\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 210 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 211 |\u001b[39m   \n     \u001b[90m 212 |\u001b[39m   console\u001b[33m.\u001b[39mwarn \u001b[33m=\u001b[39m (\u001b[33m...\u001b[39margs) \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at console.call [as error] (jest.setup.js:209:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:16023:19\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:16022:9)\n      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:14396:11)\n      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:6969:13)\n      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:6927:7)\n      at addOptimistic (__tests__/integration/data-fetching-optimistic.test.tsx:42:7)\n      at handleAddThread (__tests__/integration/data-fetching-optimistic.test.tsx:124:5)\n\n  console.error\n    Encountered two children with the same key, `thread-1755824064054`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted \u2014 the behavior is unsupported and could change in a future version.\n\n    \u001b[0m \u001b[90m 207 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 208 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 209 |\u001b[39m     originalError\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 210 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 211 |\u001b[39m   \n     \u001b[90m 212 |\u001b[39m   console\u001b[33m.\u001b[39mwarn \u001b[33m=\u001b[39m (\u001b[33m...\u001b[39margs) \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at console.call [as error] (jest.setup.js:209:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:7563:23\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at warnOnInvalidKey (node_modules/react-dom/cjs/react-dom-client.development.js:7562:13)\n      at reconcileChildrenArray (node_modules/react-dom/cjs/react-dom-client.development.js:7662:29)\n      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7952:30)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33\n      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8622:13)\n      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10870:13)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14419:13)\n      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at performWorkUntilDeadline (node_modules/scheduler/cjs/scheduler.development.js:45:48)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  console.warn\n    A function to advance timers was called but the timers APIs are not replaced with fake timers. Call `jest.useFakeTimers()` in this test file or enable fake timers for all tests by setting 'fakeTimers': {'enableGlobally': true} in Jest configuration file.\n    Stack Trace:\n    \n        \u001b[0m \u001b[90m 48 |\u001b[39m\n         \u001b[90m 49 |\u001b[39m   afterEach(() \u001b[33m=>\u001b[39m {\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 50 |\u001b[39m     jest\u001b[33m.\u001b[39mrunOnlyPendingTimers()\u001b[33m;\u001b[39m\n         \u001b[90m    |\u001b[39m          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 51 |\u001b[39m     jest\u001b[33m.\u001b[39museRealTimers()\u001b[33m;\u001b[39m\n         \u001b[90m 52 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n         \u001b[90m 53 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n    \n          Error: \n          at FakeTimers._checkFakeTimers (node_modules/@jest/fake-timers/build/index.js:641:7)\n          at FakeTimers.runOnlyPendingTimers (node_modules/@jest/fake-timers/build/index.js:541:14)\n          at Object.<anonymous> (__tests__/auth/login-to-chat-advanced.test.tsx:50:10)\n\n    \u001b[0m \u001b[90m 217 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 218 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 219 |\u001b[39m     originalWarn\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 220 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 221 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 222 |\u001b[39m\u001b[0m\n\n      at console.call (jest.setup.js:219:18)\n      at FakeTimers._checkFakeTimers (node_modules/@jest/fake-timers/build/index.js:639:28)\n      at FakeTimers.runOnlyPendingTimers (node_modules/@jest/fake-timers/build/index.js:541:14)\n      at Object.<anonymous> (__tests__/auth/login-to-chat-advanced.test.tsx:50:10)\n\n  console.warn\n    A function to advance timers was called but the timers APIs are not replaced with fake timers. Call `jest.useFakeTimers()` in this test file or enable fake timers for all tests by setting 'fakeTimers': {'enableGlobally': true} in Jest configuration file.\n    Stack Trace:\n    \n        \u001b[0m \u001b[90m 48 |\u001b[39m\n         \u001b[90m 49 |\u001b[39m   afterEach(() \u001b[33m=>\u001b[39m {\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 50 |\u001b[39m     jest\u001b[33m.\u001b[39mrunOnlyPendingTimers()\u001b[33m;\u001b[39m\n         \u001b[90m    |\u001b[39m          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 51 |\u001b[39m     jest\u001b[33m.\u001b[39museRealTimers()\u001b[33m;\u001b[39m\n         \u001b[90m 52 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n         \u001b[90m 53 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n    \n          Error: \n          at FakeTimers._checkFakeTimers (node_modules/@jest/fake-timers/build/index.js:641:7)\n          at FakeTimers.runOnlyPendingTimers (node_modules/@jest/fake-timers/build/index.js:541:14)\n          at Object.<anonymous> (__tests__/auth/login-to-chat-advanced.test.tsx:50:10)\n\n    \u001b[0m \u001b[90m 217 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 218 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 219 |\u001b[39m     originalWarn\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 220 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 221 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 222 |\u001b[39m\u001b[0m\n\n      at console.call (jest.setup.js:219:18)\n      at FakeTimers._checkFakeTimers (node_modules/@jest/fake-timers/build/index.js:639:28)\n      at FakeTimers.runOnlyPendingTimers (node_modules/@jest/fake-timers/build/index.js:541:14)\n      at Object.<anonymous> (__tests__/auth/login-to-chat-advanced.test.tsx:50:10)\n\n  console.warn\n    A function to advance timers was called but the timers APIs are not replaced with fake timers. Call `jest.useFakeTimers()` in this test file or enable fake timers for all tests by setting 'fakeTimers': {'enableGlobally': true} in Jest configuration file.\n    Stack Trace:\n    \n        \u001b[0m \u001b[90m 48 |\u001b[39m\n         \u001b[90m 49 |\u001b[39m   afterEach(() \u001b[33m=>\u001b[39m {\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 50 |\u001b[39m     jest\u001b[33m.\u001b[39mrunOnlyPendingTimers()\u001b[33m;\u001b[39m\n         \u001b[90m    |\u001b[39m          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 51 |\u001b[39m     jest\u001b[33m.\u001b[39museRealTimers()\u001b[33m;\u001b[39m\n         \u001b[90m 52 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n         \u001b[90m 53 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n    \n          Error: \n          at FakeTimers._checkFakeTimers (node_modules/@jest/fake-timers/build/index.js:641:7)\n          at FakeTimers.runOnlyPendingTimers (node_modules/@jest/fake-timers/build/index.js:541:14)\n          at Object.<anonymous> (__tests__/auth/login-to-chat-advanced.test.tsx:50:10)\n\n    \u001b[0m \u001b[90m 217 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 218 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 219 |\u001b[39m     originalWarn\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 220 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 221 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 222 |\u001b[39m\u001b[0m\n\n      at console.call (jest.setup.js:219:18)\n      at FakeTimers._checkFakeTimers (node_modules/@jest/fake-timers/build/index.js:639:28)\n      at FakeTimers.runOnlyPendingTimers (node_modules/@jest/fake-timers/build/index.js:541:14)\n      at Object.<anonymous> (__tests__/auth/login-to-chat-advanced.test.tsx:50:10)\n\n  console.warn\n    A function to advance timers was called but the timers APIs are not replaced with fake timers. Call `jest.useFakeTimers()` in this test file or enable fake timers for all tests by setting 'fakeTimers': {'enableGlobally': true} in Jest configuration file.\n    Stack Trace:\n    \n        \u001b[0m \u001b[90m 48 |\u001b[39m\n         \u001b[90m 49 |\u001b[39m   afterEach(() \u001b[33m=>\u001b[39m {\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 50 |\u001b[39m     jest\u001b[33m.\u001b[39mrunOnlyPendingTimers()\u001b[33m;\u001b[39m\n         \u001b[90m    |\u001b[39m          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 51 |\u001b[39m     jest\u001b[33m.\u001b[39museRealTimers()\u001b[33m;\u001b[39m\n         \u001b[90m 52 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n         \u001b[90m 53 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n    \n          Error: \n          at FakeTimers._checkFakeTimers (node_modules/@jest/fake-timers/build/index.js:641:7)\n          at FakeTimers.runOnlyPendingTimers (node_modules/@jest/fake-timers/build/index.js:541:14)\n          at Object.<anonymous> (__tests__/auth/login-to-chat-advanced.test.tsx:50:10)\n\n    \u001b[0m \u001b[90m 217 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 218 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 219 |\u001b[39m     originalWarn\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 220 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 221 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 222 |\u001b[39m\u001b[0m\n\n      at console.call (jest.setup.js:219:18)\n      at FakeTimers._checkFakeTimers (node_modules/@jest/fake-timers/build/index.js:639:28)\n      at FakeTimers.runOnlyPendingTimers (node_modules/@jest/fake-timers/build/index.js:541:14)\n      at Object.<anonymous> (__tests__/auth/login-to-chat-advanced.test.tsx:50:10)\n\n  console.error\n    An update to TestComponent inside a test was not wrapped in act(...).\n    \n    When testing, code that causes React state updates should be wrapped into act(...):\n    \n    act(() => {\n      /* fire events that update state */\n    });\n    /* assert on the output */\n    \n    This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act\n\n    \u001b[0m \u001b[90m 207 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 208 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 209 |\u001b[39m     originalError\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 210 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 211 |\u001b[39m   \n     \u001b[90m 212 |\u001b[39m   console\u001b[33m.\u001b[39mwarn \u001b[33m=\u001b[39m (\u001b[33m...\u001b[39margs) \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at console.call [as error] (jest.setup.js:209:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:16023:19\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:16022:9)\n      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:14396:11)\n      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:6969:13)\n      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:6927:7)\n      at addOptimistic (__tests__/integration/data-fetching-optimistic.test.tsx:42:7)\n      at addNew (__tests__/integration/data-fetching-optimistic.test.tsx:361:9)\n\n  console.warn\n    A function to advance timers was called but the timers APIs are not replaced with fake timers. Call `jest.useFakeTimers()` in this test file or enable fake timers for all tests by setting 'fakeTimers': {'enableGlobally': true} in Jest configuration file.\n    Stack Trace:\n    \n        \u001b[0m \u001b[90m 48 |\u001b[39m\n         \u001b[90m 49 |\u001b[39m   afterEach(() \u001b[33m=>\u001b[39m {\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 50 |\u001b[39m     jest\u001b[33m.\u001b[39mrunOnlyPendingTimers()\u001b[33m;\u001b[39m\n         \u001b[90m    |\u001b[39m          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 51 |\u001b[39m     jest\u001b[33m.\u001b[39museRealTimers()\u001b[33m;\u001b[39m\n         \u001b[90m 52 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n         \u001b[90m 53 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n    \n          Error: \n          at FakeTimers._checkFakeTimers (node_modules/@jest/fake-timers/build/index.js:641:7)\n          at FakeTimers.runOnlyPendingTimers (node_modules/@jest/fake-timers/build/index.js:541:14)\n          at Object.<anonymous> (__tests__/auth/login-to-chat-advanced.test.tsx:50:10)\n\n    \u001b[0m \u001b[90m 217 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 218 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 219 |\u001b[39m     originalWarn\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 220 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 221 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 222 |\u001b[39m\u001b[0m\n\n      at console.call (jest.setup.js:219:18)\n      at FakeTimers._checkFakeTimers (node_modules/@jest/fake-timers/build/index.js:639:28)\n      at FakeTimers.runOnlyPendingTimers (node_modules/@jest/fake-timers/build/index.js:541:14)\n      at Object.<anonymous> (__tests__/auth/login-to-chat-advanced.test.tsx:50:10)\n\n  console.warn\n    A function to advance timers was called but the timers APIs are not replaced with fake timers. Call `jest.useFakeTimers()` in this test file or enable fake timers for all tests by setting 'fakeTimers': {'enableGlobally': true} in Jest configuration file.\n    Stack Trace:\n    \n        \u001b[0m \u001b[90m 48 |\u001b[39m\n         \u001b[90m 49 |\u001b[39m   afterEach(() \u001b[33m=>\u001b[39m {\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 50 |\u001b[39m     jest\u001b[33m.\u001b[39mrunOnlyPendingTimers()\u001b[33m;\u001b[39m\n         \u001b[90m    |\u001b[39m          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 51 |\u001b[39m     jest\u001b[33m.\u001b[39museRealTimers()\u001b[33m;\u001b[39m\n         \u001b[90m 52 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n         \u001b[90m 53 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n    \n          Error: \n          at FakeTimers._checkFakeTimers (node_modules/@jest/fake-timers/build/index.js:641:7)\n          at FakeTimers.runOnlyPendingTimers (node_modules/@jest/fake-timers/build/index.js:541:14)\n          at Object.<anonymous> (__tests__/auth/login-to-chat-advanced.test.tsx:50:10)\n\n    \u001b[0m \u001b[90m 217 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 218 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 219 |\u001b[39m     originalWarn\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 220 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 221 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 222 |\u001b[39m\u001b[0m\n\n      at console.call (jest.setup.js:219:18)\n      at FakeTimers._checkFakeTimers (node_modules/@jest/fake-timers/build/index.js:639:28)\n      at FakeTimers.runOnlyPendingTimers (node_modules/@jest/fake-timers/build/index.js:541:14)\n      at Object.<anonymous> (__tests__/auth/login-to-chat-advanced.test.tsx:50:10)\n\n  console.warn\n    A function to advance timers was called but the timers APIs are not replaced with fake timers. Call `jest.useFakeTimers()` in this test file or enable fake timers for all tests by setting 'fakeTimers': {'enableGlobally': true} in Jest configuration file.\n    Stack Trace:\n    \n        \u001b[0m \u001b[90m 48 |\u001b[39m\n         \u001b[90m 49 |\u001b[39m   afterEach(() \u001b[33m=>\u001b[39m {\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 50 |\u001b[39m     jest\u001b[33m.\u001b[39mrunOnlyPendingTimers()\u001b[33m;\u001b[39m\n         \u001b[90m    |\u001b[39m          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 51 |\u001b[39m     jest\u001b[33m.\u001b[39museRealTimers()\u001b[33m;\u001b[39m\n         \u001b[90m 52 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n         \u001b[90m 53 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n    \n          Error: \n          at FakeTimers._checkFakeTimers (node_modules/@jest/fake-timers/build/index.js:641:7)\n          at FakeTimers.runOnlyPendingTimers (node_modules/@jest/fake-timers/build/index.js:541:14)\n          at Object.<anonymous> (__tests__/auth/login-to-chat-advanced.test.tsx:50:10)\n\n    \u001b[0m \u001b[90m 217 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 218 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 219 |\u001b[39m     originalWarn\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 220 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 221 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 222 |\u001b[39m\u001b[0m\n\n      at console.call (jest.setup.js:219:18)\n      at FakeTimers._checkFakeTimers (node_modules/@jest/fake-timers/build/index.js:639:28)\n      at FakeTimers.runOnlyPendingTimers (node_modules/@jest/fake-timers/build/index.js:541:14)\n      at Object.<anonymous> (__tests__/auth/login-to-chat-advanced.test.tsx:50:10)\n\n  console.warn\n    A function to advance timers was called but the timers APIs are not replaced with fake timers. Call `jest.useFakeTimers()` in this test file or enable fake timers for all tests by setting 'fakeTimers': {'enableGlobally': true} in Jest configuration file.\n    Stack Trace:\n    \n        \u001b[0m \u001b[90m 48 |\u001b[39m\n         \u001b[90m 49 |\u001b[39m   afterEach(() \u001b[33m=>\u001b[39m {\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 50 |\u001b[39m     jest\u001b[33m.\u001b[39mrunOnlyPendingTimers()\u001b[33m;\u001b[39m\n         \u001b[90m    |\u001b[39m          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 51 |\u001b[39m     jest\u001b[33m.\u001b[39museRealTimers()\u001b[33m;\u001b[39m\n         \u001b[90m 52 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n         \u001b[90m 53 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n    \n          Error: \n          at FakeTimers._checkFakeTimers (node_modules/@jest/fake-timers/build/index.js:641:7)\n          at FakeTimers.runOnlyPendingTimers (node_modules/@jest/fake-timers/build/index.js:541:14)\n          at Object.<anonymous> (__tests__/auth/login-to-chat-advanced.test.tsx:50:10)\n\n    \u001b[0m \u001b[90m 217 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 218 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 219 |\u001b[39m     originalWarn\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 220 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 221 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 222 |\u001b[39m\u001b[0m\n\n      at console.call (jest.setup.js:219:18)\n      at FakeTimers._checkFakeTimers (node_modules/@jest/fake-timers/build/index.js:639:28)\n      at FakeTimers.runOnlyPendingTimers (node_modules/@jest/fake-timers/build/index.js:541:14)\n      at Object.<anonymous> (__tests__/auth/login-to-chat-advanced.test.tsx:50:10)\n\n  console.warn\n    A function to advance timers was called but the timers APIs are not replaced with fake timers. Call `jest.useFakeTimers()` in this test file or enable fake timers for all tests by setting 'fakeTimers': {'enableGlobally': true} in Jest configuration file.\n    Stack Trace:\n    \n        \u001b[0m \u001b[90m 48 |\u001b[39m\n         \u001b[90m 49 |\u001b[39m   afterEach(() \u001b[33m=>\u001b[39m {\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 50 |\u001b[39m     jest\u001b[33m.\u001b[39mrunOnlyPendingTimers()\u001b[33m;\u001b[39m\n         \u001b[90m    |\u001b[39m          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 51 |\u001b[39m     jest\u001b[33m.\u001b[39museRealTimers()\u001b[33m;\u001b[39m\n         \u001b[90m 52 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n         \u001b[90m 53 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n    \n          Error: \n          at FakeTimers._checkFakeTimers (node_modules/@jest/fake-timers/build/index.js:641:7)\n          at FakeTimers.runOnlyPendingTimers (node_modules/@jest/fake-timers/build/index.js:541:14)\n          at Object.<anonymous> (__tests__/auth/login-to-chat-advanced.test.tsx:50:10)\n\n    \u001b[0m \u001b[90m 217 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 218 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 219 |\u001b[39m     originalWarn\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 220 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 221 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 222 |\u001b[39m\u001b[0m\n\n      at console.call (jest.setup.js:219:18)\n      at FakeTimers._checkFakeTimers (node_modules/@jest/fake-timers/build/index.js:639:28)\n      at FakeTimers.runOnlyPendingTimers (node_modules/@jest/fake-timers/build/index.js:541:14)\n      at Object.<anonymous> (__tests__/auth/login-to-chat-advanced.test.tsx:50:10)\n\n  console.debug\n    [2025-08-22T00:54:24.117Z] DEBUG: Creating WebSocket without authentication undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:24.171Z] DEBUG: Creating WebSocket without authentication undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:24.171Z] DEBUG: WebSocket connected, secure authentication completed undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:24.184Z] DEBUG: Creating WebSocket without authentication undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:24.194Z] DEBUG: Creating WebSocket without authentication undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:24.198Z] DEBUG: Creating WebSocket without authentication undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:24.201Z] DEBUG: Creating WebSocket without authentication undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:24.201Z] DEBUG: WebSocket connected, secure authentication completed undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:24.215Z] DEBUG: Creating WebSocket without authentication undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:24.215Z] DEBUG: WebSocket connected, secure authentication completed undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:24.221Z] DEBUG: Creating WebSocket without authentication undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:24.221Z] DEBUG: WebSocket connected, secure authentication completed undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:24.225Z] DEBUG: Creating WebSocket without authentication undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:24.225Z] DEBUG: WebSocket connected, secure authentication completed undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:24.225Z] DEBUG: WebSocket connected, secure authentication completed undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:24.232Z] DEBUG: Creating WebSocket without authentication undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:24.232Z] DEBUG: WebSocket connected, secure authentication completed undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:24.232Z] DEBUG: Unknown WebSocket message type undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:24.238Z] DEBUG: Creating WebSocket without authentication undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:24.238Z] DEBUG: WebSocket connected, secure authentication completed undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:24.238Z] DEBUG: WebSocket connected, secure authentication completed undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:24.243Z] DEBUG: Creating WebSocket without authentication undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:24.243Z] DEBUG: WebSocket connected, secure authentication completed undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:24.243Z] DEBUG: WebSocket connected, secure authentication completed undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:24.250Z] DEBUG: Creating WebSocket without authentication undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:24.250Z] DEBUG: WebSocket connected, secure authentication completed undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:24.255Z] DEBUG: Creating WebSocket without authentication undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:24.255Z] DEBUG: WebSocket connected, secure authentication completed undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:24.259Z] DEBUG: Creating WebSocket without authentication undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:24.259Z] DEBUG: WebSocket connected, secure authentication completed undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:24.263Z] DEBUG: Creating WebSocket without authentication undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:24.263Z] DEBUG: WebSocket connected, secure authentication completed undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:24.266Z] DEBUG: Creating WebSocket without authentication undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:24.266Z] DEBUG: WebSocket connected, secure authentication completed undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:24.269Z] DEBUG: Creating WebSocket without authentication undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:24.269Z] DEBUG: WebSocket connected, secure authentication completed undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:24.274Z] DEBUG: Creating WebSocket without authentication undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:24.274Z] DEBUG: WebSocket connected, secure authentication completed undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:24.278Z] DEBUG: Creating WebSocket without authentication undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:24.281Z] DEBUG: Creating WebSocket without authentication undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.error\n    [2025-08-22T00:54:24.281Z] ERROR: Failed to connect to WebSocket [WebSocketService] (connection_failed) Error: Failed to create WebSocket\n        at mockConstructor.<anonymous> (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\__tests__\\services\\webSocketService.test.ts:460:15)\n        at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-mock\\build\\index.js:295:43\n        at mockConstructor.<anonymous> (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-mock\\build\\index.js:312:13)\n        at new mockConstructor (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-mock\\build\\index.js:102:19)\n        at WebSocketService.createSecureWebSocket (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\services\\webSocketService.ts:962:14)\n        at WebSocketService.connect (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\services\\webSocketService.ts:667:22)\n        at Object.<anonymous> (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\__tests__\\services\\webSocketService.test.ts:463:24)\n        at Promise.finally.completed (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1559:28)\n        at new Promise (<anonymous>)\n        at callAsyncCircusFn (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1499:10)\n        at _callCircusTest (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1009:40)\n        at processTicksAndRejections (node:internal/process/task_queues:105:5)\n        at _runTest (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:949:3)\n        at _runTestsForDescribeBlock (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:839:13)\n        at _runTestsForDescribeBlock (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n        at _runTestsForDescribeBlock (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n        at run (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:757:3)\n        at runAndTransformResultsToJestFormat (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1920:21)\n        at jestAdapter (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\runner.js:101:19)\n        at runTestInternal (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n        at runTest (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n        at Object.worker (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-runner\\build\\testWorker.js:497:12)\n\n    \u001b[0m \u001b[90m 207 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 208 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 209 |\u001b[39m     originalError\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 210 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 211 |\u001b[39m   \n     \u001b[90m 212 |\u001b[39m   console\u001b[33m.\u001b[39mwarn \u001b[33m=\u001b[39m (\u001b[33m...\u001b[39margs) \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at console.call [as error] (jest.setup.js:209:19)\n      at FrontendLogger.log (lib/logger.ts:148:19)\n      at FrontendLogger.error (lib/logger.ts:215:10)\n      at WebSocketService.connect (services/webSocketService.ts:805:14)\n      at Object.<anonymous> (__tests__/services/webSocketService.test.ts:463:24)\n\n  console.debug\n    [2025-08-22T00:54:24.292Z] DEBUG: Creating WebSocket without authentication undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:24.292Z] DEBUG: WebSocket connected, secure authentication completed undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:24.301Z] DEBUG: Creating WebSocket without authentication undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:24.301Z] DEBUG: WebSocket connected, secure authentication completed undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:24.307Z] DEBUG: Creating WebSocket without authentication undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:24.307Z] DEBUG: WebSocket connected, secure authentication completed undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.error\n    An update to TestComponent inside a test was not wrapped in act(...).\n    \n    When testing, code that causes React state updates should be wrapped into act(...):\n    \n    act(() => {\n      /* fire events that update state */\n    });\n    /* assert on the output */\n    \n    This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act\n\n    \u001b[0m \u001b[90m 207 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 208 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 209 |\u001b[39m     originalError\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 210 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 211 |\u001b[39m   \n     \u001b[90m 212 |\u001b[39m   console\u001b[33m.\u001b[39mwarn \u001b[33m=\u001b[39m (\u001b[33m...\u001b[39margs) \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at console.call [as error] (jest.setup.js:209:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:16023:19\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:16022:9)\n      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:14396:11)\n      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:6969:13)\n      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:6927:7)\n      at fetchData (__tests__/integration/data-fetching-core.test.tsx:57:7)\n\n  console.error\n    An update to TestComponent inside a test was not wrapped in act(...).\n    \n    When testing, code that causes React state updates should be wrapped into act(...):\n    \n    act(() => {\n      /* fire events that update state */\n    });\n    /* assert on the output */\n    \n    This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act\n\n    \u001b[0m \u001b[90m 207 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 208 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 209 |\u001b[39m     originalError\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 210 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 211 |\u001b[39m   \n     \u001b[90m 212 |\u001b[39m   console\u001b[33m.\u001b[39mwarn \u001b[33m=\u001b[39m (\u001b[33m...\u001b[39margs) \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at console.call [as error] (jest.setup.js:209:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:16023:19\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:16022:9)\n      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:14396:11)\n      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:6969:13)\n      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:6927:7)\n      at fetchData (__tests__/integration/data-fetching-core.test.tsx:61:7)\n\n  console.error\n    An update to TestComponent inside a test was not wrapped in act(...).\n    \n    When testing, code that causes React state updates should be wrapped into act(...):\n    \n    act(() => {\n      /* fire events that update state */\n    });\n    /* assert on the output */\n    \n    This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act\n\n    \u001b[0m \u001b[90m 207 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 208 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 209 |\u001b[39m     originalError\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 210 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 211 |\u001b[39m   \n     \u001b[90m 212 |\u001b[39m   console\u001b[33m.\u001b[39mwarn \u001b[33m=\u001b[39m (\u001b[33m...\u001b[39margs) \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at console.call [as error] (jest.setup.js:209:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:16023:19\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:16022:9)\n      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:14396:11)\n      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:6969:13)\n      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:6927:7)\n      at fetchData (__tests__/integration/data-fetching-core.test.tsx:57:7)\n\n  console.error\n    An update to TestComponent inside a test was not wrapped in act(...).\n    \n    When testing, code that causes React state updates should be wrapped into act(...):\n    \n    act(() => {\n      /* fire events that update state */\n    });\n    /* assert on the output */\n    \n    This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act\n\n    \u001b[0m \u001b[90m 207 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 208 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 209 |\u001b[39m     originalError\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 210 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 211 |\u001b[39m   \n     \u001b[90m 212 |\u001b[39m   console\u001b[33m.\u001b[39mwarn \u001b[33m=\u001b[39m (\u001b[33m...\u001b[39margs) \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at console.call [as error] (jest.setup.js:209:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:16023:19\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:16022:9)\n      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:14396:11)\n      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:6969:13)\n      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:6927:7)\n      at fetchData (__tests__/integration/data-fetching-core.test.tsx:61:7)\n\n  console.error\n    An update to TestComponent inside a test was not wrapped in act(...).\n    \n    When testing, code that causes React state updates should be wrapped into act(...):\n    \n    act(() => {\n      /* fire events that update state */\n    });\n    /* assert on the output */\n    \n    This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act\n\n    \u001b[0m \u001b[90m 207 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 208 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 209 |\u001b[39m     originalError\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 210 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 211 |\u001b[39m   \n     \u001b[90m 212 |\u001b[39m   console\u001b[33m.\u001b[39mwarn \u001b[33m=\u001b[39m (\u001b[33m...\u001b[39margs) \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at console.call [as error] (jest.setup.js:209:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:16023:19\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:16022:9)\n      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:14396:11)\n      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:6969:13)\n      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:6927:7)\n      at fetchData (__tests__/integration/data-fetching-core.test.tsx:57:7)\n\n  console.error\n    An update to TestComponent inside a test was not wrapped in act(...).\n    \n    When testing, code that causes React state updates should be wrapped into act(...):\n    \n    act(() => {\n      /* fire events that update state */\n    });\n    /* assert on the output */\n    \n    This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act\n\n    \u001b[0m \u001b[90m 207 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 208 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 209 |\u001b[39m     originalError\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 210 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 211 |\u001b[39m   \n     \u001b[90m 212 |\u001b[39m   console\u001b[33m.\u001b[39mwarn \u001b[33m=\u001b[39m (\u001b[33m...\u001b[39margs) \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at console.call [as error] (jest.setup.js:209:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:16023:19\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:16022:9)\n      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:14396:11)\n      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:6969:13)\n      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:6927:7)\n      at fetchData (__tests__/integration/data-fetching-core.test.tsx:61:7)\n\n  console.error\n    An update to TestComponent inside a test was not wrapped in act(...).\n    \n    When testing, code that causes React state updates should be wrapped into act(...):\n    \n    act(() => {\n      /* fire events that update state */\n    });\n    /* assert on the output */\n    \n    This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act\n\n    \u001b[0m \u001b[90m 207 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 208 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 209 |\u001b[39m     originalError\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 210 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 211 |\u001b[39m   \n     \u001b[90m 212 |\u001b[39m   console\u001b[33m.\u001b[39mwarn \u001b[33m=\u001b[39m (\u001b[33m...\u001b[39margs) \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at console.call [as error] (jest.setup.js:209:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:16023:19\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:16022:9)\n      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:14396:11)\n      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:6969:13)\n      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:6927:7)\n      at fetchData (__tests__/integration/data-fetching-core.test.tsx:57:7)\n\n  console.error\n    An update to TestComponent inside a test was not wrapped in act(...).\n    \n    When testing, code that causes React state updates should be wrapped into act(...):\n    \n    act(() => {\n      /* fire events that update state */\n    });\n    /* assert on the output */\n    \n    This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act\n\n    \u001b[0m \u001b[90m 207 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 208 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 209 |\u001b[39m     originalError\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 210 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 211 |\u001b[39m   \n     \u001b[90m 212 |\u001b[39m   console\u001b[33m.\u001b[39mwarn \u001b[33m=\u001b[39m (\u001b[33m...\u001b[39margs) \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at console.call [as error] (jest.setup.js:209:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:16023:19\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:16022:9)\n      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:14396:11)\n      at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:6969:13)\n      at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:6927:7)\n      at fetchData (__tests__/integration/data-fetching-core.test.tsx:61:7)\n\n  console.warn\n    [2025-08-22T00:54:24.627Z] WARN: Received 401, attempting [REDACTED] undefined\n\n    \u001b[0m \u001b[90m 217 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 218 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 219 |\u001b[39m     originalWarn\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 220 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 221 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 222 |\u001b[39m\u001b[0m\n\n      at console.call (jest.setup.js:219:18)\n      at FrontendLogger.log (lib/logger.ts:145:19)\n      at FrontendLogger.warn (lib/logger.ts:211:10)\n      at AuthInterceptor.authenticatedFetch (lib/auth-interceptor.ts:186:16)\n      at DemoService.fetchWithAuth (services/demoService.ts:80:24)\n      at DemoService.sendChatMessage (services/demoService.ts:115:22)\n      at Object.<anonymous> (__tests__/services/demoService.test.ts:164:7)\n\n  console.info\n    [2025-08-22T00:54:24.639Z] INFO: [REDACTED] successfully undefined\n\n      at FrontendLogger.log (lib/logger.ts:142:19)\n\n  console.info\n    [2025-08-22T00:54:24.641Z] INFO: Retrying request with refreshed token undefined\n\n      at FrontendLogger.log (lib/logger.ts:142:19)\n\n  console.error\n    [2025-08-22T00:54:24.642Z] ERROR: Demo service request failed [DemoService] TypeError: response.text is not a function\n        at DemoService.fetchWithAuth (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\services\\demoService.ts:89:42)\n        at processTicksAndRejections (node:internal/process/task_queues:105:5)\n        at DemoService.sendChatMessage (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\services\\demoService.ts:115:22)\n        at Object.<anonymous> (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\__tests__\\services\\demoService.test.ts:164:7)\n\n    \u001b[0m \u001b[90m 207 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 208 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 209 |\u001b[39m     originalError\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 210 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 211 |\u001b[39m   \n     \u001b[90m 212 |\u001b[39m   console\u001b[33m.\u001b[39mwarn \u001b[33m=\u001b[39m (\u001b[33m...\u001b[39margs) \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at console.call [as error] (jest.setup.js:209:19)\n      at FrontendLogger.log (lib/logger.ts:148:19)\n      at FrontendLogger.error (lib/logger.ts:215:10)\n      at DemoService.fetchWithAuth (services/demoService.ts:105:14)\n      at DemoService.sendChatMessage (services/demoService.ts:115:22)\n      at Object.<anonymous> (__tests__/services/demoService.test.ts:164:7)\n\n  console.error\n    [2025-08-22T00:54:24.657Z] ERROR: Demo service request failed [DemoService] TypeError: response.text is not a function\n        at DemoService.fetchWithAuth (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\services\\demoService.ts:89:42)\n        at processTicksAndRejections (node:internal/process/task_queues:105:5)\n        at DemoService.sendChatMessage (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\services\\demoService.ts:115:22)\n        at Object.<anonymous> (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\__tests__\\services\\demoService.test.ts:175:7)\n\n    \u001b[0m \u001b[90m 207 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 208 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 209 |\u001b[39m     originalError\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 210 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 211 |\u001b[39m   \n     \u001b[90m 212 |\u001b[39m   console\u001b[33m.\u001b[39mwarn \u001b[33m=\u001b[39m (\u001b[33m...\u001b[39margs) \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at console.call [as error] (jest.setup.js:209:19)\n      at FrontendLogger.log (lib/logger.ts:148:19)\n      at FrontendLogger.error (lib/logger.ts:215:10)\n      at DemoService.fetchWithAuth (services/demoService.ts:105:14)\n      at DemoService.sendChatMessage (services/demoService.ts:115:22)\n      at Object.<anonymous> (__tests__/services/demoService.test.ts:175:7)\n\n  console.error\n    [2025-08-22T00:54:24.666Z] ERROR: Request failed [AuthInterceptor] Error: Network error\n        at Object.<anonymous> (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\__tests__\\services\\demoService.test.ts:221:46)\n        at Promise.finally.completed (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1559:28)\n        at new Promise (<anonymous>)\n        at callAsyncCircusFn (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1499:10)\n        at _callCircusTest (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1009:40)\n        at processTicksAndRejections (node:internal/process/task_queues:105:5)\n        at _runTest (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:949:3)\n        at _runTestsForDescribeBlock (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:839:13)\n        at _runTestsForDescribeBlock (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n        at _runTestsForDescribeBlock (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n        at run (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:757:3)\n        at runAndTransformResultsToJestFormat (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1920:21)\n        at jestAdapter (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\runner.js:101:19)\n        at runTestInternal (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n        at runTest (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n        at Object.worker (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-runner\\build\\testWorker.js:497:12)\n\n    \u001b[0m \u001b[90m 207 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 208 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 209 |\u001b[39m     originalError\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 210 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 211 |\u001b[39m   \n     \u001b[90m 212 |\u001b[39m   console\u001b[33m.\u001b[39mwarn \u001b[33m=\u001b[39m (\u001b[33m...\u001b[39margs) \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at console.call [as error] (jest.setup.js:209:19)\n      at FrontendLogger.log (lib/logger.ts:148:19)\n      at FrontendLogger.error (lib/logger.ts:215:10)\n      at AuthInterceptor.authenticatedFetch (lib/auth-interceptor.ts:192:14)\n      at DemoService.fetchWithAuth (services/demoService.ts:80:24)\n      at DemoService.sendChatMessage (services/demoService.ts:115:22)\n      at Object.<anonymous> (__tests__/services/demoService.test.ts:224:7)\n\n  console.error\n    [2025-08-22T00:54:24.670Z] ERROR: Demo service request failed [DemoService] Error: Network error\n        at Object.<anonymous> (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\__tests__\\services\\demoService.test.ts:221:46)\n        at Promise.finally.completed (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1559:28)\n        at new Promise (<anonymous>)\n        at callAsyncCircusFn (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1499:10)\n        at _callCircusTest (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1009:40)\n        at processTicksAndRejections (node:internal/process/task_queues:105:5)\n        at _runTest (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:949:3)\n        at _runTestsForDescribeBlock (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:839:13)\n        at _runTestsForDescribeBlock (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n        at _runTestsForDescribeBlock (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n        at run (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:757:3)\n        at runAndTransformResultsToJestFormat (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1920:21)\n        at jestAdapter (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\runner.js:101:19)\n        at runTestInternal (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n        at runTest (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n        at Object.worker (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-runner\\build\\testWorker.js:497:12)\n\n    \u001b[0m \u001b[90m 207 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 208 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 209 |\u001b[39m     originalError\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 210 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 211 |\u001b[39m   \n     \u001b[90m 212 |\u001b[39m   console\u001b[33m.\u001b[39mwarn \u001b[33m=\u001b[39m (\u001b[33m...\u001b[39margs) \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at console.call [as error] (jest.setup.js:209:19)\n      at FrontendLogger.log (lib/logger.ts:148:19)\n      at FrontendLogger.error (lib/logger.ts:215:10)\n      at DemoService.fetchWithAuth (services/demoService.ts:105:14)\n      at DemoService.sendChatMessage (services/demoService.ts:115:22)\n      at Object.<anonymous> (__tests__/services/demoService.test.ts:224:7)\n\n  console.error\n    [2025-08-22T00:54:24.676Z] ERROR: Demo service request failed [DemoService] TypeError: response.text is not a function\n        at DemoService.fetchWithAuth (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\services\\demoService.ts:89:42)\n        at processTicksAndRejections (node:internal/process/task_queues:105:5)\n        at DemoService.calculateROI (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\services\\demoService.ts:128:22)\n        at Object.<anonymous> (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\__tests__\\services\\demoService.test.ts:270:7)\n\n    \u001b[0m \u001b[90m 207 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 208 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 209 |\u001b[39m     originalError\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 210 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 211 |\u001b[39m   \n     \u001b[90m 212 |\u001b[39m   console\u001b[33m.\u001b[39mwarn \u001b[33m=\u001b[39m (\u001b[33m...\u001b[39margs) \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at console.call [as error] (jest.setup.js:209:19)\n      at FrontendLogger.log (lib/logger.ts:148:19)\n      at FrontendLogger.error (lib/logger.ts:215:10)\n      at DemoService.fetchWithAuth (services/demoService.ts:105:14)\n      at DemoService.calculateROI (services/demoService.ts:128:22)\n      at Object.<anonymous> (__tests__/services/demoService.test.ts:270:7)\n\n  console.error\n    [2025-08-22T00:54:24.682Z] ERROR: Demo service request failed [DemoService] TypeError: response.text is not a function\n        at DemoService.fetchWithAuth (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\services\\demoService.ts:89:42)\n        at processTicksAndRejections (node:internal/process/task_queues:105:5)\n        at DemoService.calculateROI (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\services\\demoService.ts:128:22)\n        at Object.<anonymous> (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\__tests__\\services\\demoService.test.ts:282:7)\n\n    \u001b[0m \u001b[90m 207 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 208 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 209 |\u001b[39m     originalError\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 210 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 211 |\u001b[39m   \n     \u001b[90m 212 |\u001b[39m   console\u001b[33m.\u001b[39mwarn \u001b[33m=\u001b[39m (\u001b[33m...\u001b[39margs) \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at console.call [as error] (jest.setup.js:209:19)\n      at FrontendLogger.log (lib/logger.ts:148:19)\n      at FrontendLogger.error (lib/logger.ts:215:10)\n      at DemoService.fetchWithAuth (services/demoService.ts:105:14)\n      at DemoService.calculateROI (services/demoService.ts:128:22)\n      at Object.<anonymous> (__tests__/services/demoService.test.ts:282:7)\n\n  console.error\n    [2025-08-22T00:54:24.697Z] ERROR: Demo service request failed [DemoService] TypeError: response.text is not a function\n        at DemoService.fetchWithAuth (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\services\\demoService.ts:89:42)\n        at processTicksAndRejections (node:internal/process/task_queues:105:5)\n        at DemoService.exportReport (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\services\\demoService.ts:166:22)\n        at Object.<anonymous> (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\__tests__\\services\\demoService.test.ts:424:7)\n\n    \u001b[0m \u001b[90m 207 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 208 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 209 |\u001b[39m     originalError\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 210 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 211 |\u001b[39m   \n     \u001b[90m 212 |\u001b[39m   console\u001b[33m.\u001b[39mwarn \u001b[33m=\u001b[39m (\u001b[33m...\u001b[39margs) \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at console.call [as error] (jest.setup.js:209:19)\n      at FrontendLogger.log (lib/logger.ts:148:19)\n      at FrontendLogger.error (lib/logger.ts:215:10)\n      at DemoService.fetchWithAuth (services/demoService.ts:105:14)\n      at DemoService.exportReport (services/demoService.ts:166:22)\n      at Object.<anonymous> (__tests__/services/demoService.test.ts:424:7)\n\n  console.error\n    [2025-08-22T00:54:24.703Z] ERROR: Demo service request failed [DemoService] TypeError: response.text is not a function\n        at DemoService.fetchWithAuth (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\services\\demoService.ts:89:42)\n        at processTicksAndRejections (node:internal/process/task_queues:105:5)\n        at DemoService.getSessionStatus (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\services\\demoService.ts:179:22)\n        at Object.<anonymous> (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\__tests__\\services\\demoService.test.ts:466:7)\n\n    \u001b[0m \u001b[90m 207 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 208 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 209 |\u001b[39m     originalError\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 210 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 211 |\u001b[39m   \n     \u001b[90m 212 |\u001b[39m   console\u001b[33m.\u001b[39mwarn \u001b[33m=\u001b[39m (\u001b[33m...\u001b[39margs) \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at console.call [as error] (jest.setup.js:209:19)\n      at FrontendLogger.log (lib/logger.ts:148:19)\n      at FrontendLogger.error (lib/logger.ts:215:10)\n      at DemoService.fetchWithAuth (services/demoService.ts:105:14)\n      at DemoService.getSessionStatus (services/demoService.ts:179:22)\n      at Object.<anonymous> (__tests__/services/demoService.test.ts:466:7)\n\n  console.error\n    [2025-08-22T00:54:24.714Z] ERROR: Request failed [AuthInterceptor] Error: Request timeout\n        at Object.<anonymous> (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\__tests__\\services\\demoService.test.ts:521:46)\n        at Promise.finally.completed (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1559:28)\n        at new Promise (<anonymous>)\n        at callAsyncCircusFn (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1499:10)\n        at _callCircusTest (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1009:40)\n        at processTicksAndRejections (node:internal/process/task_queues:105:5)\n        at _runTest (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:949:3)\n        at _runTestsForDescribeBlock (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:839:13)\n        at _runTestsForDescribeBlock (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n        at _runTestsForDescribeBlock (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n        at run (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:757:3)\n        at runAndTransformResultsToJestFormat (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1920:21)\n        at jestAdapter (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\runner.js:101:19)\n        at runTestInternal (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n        at runTest (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n        at Object.worker (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-runner\\build\\testWorker.js:497:12)\n\n    \u001b[0m \u001b[90m 207 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 208 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 209 |\u001b[39m     originalError\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 210 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 211 |\u001b[39m   \n     \u001b[90m 212 |\u001b[39m   console\u001b[33m.\u001b[39mwarn \u001b[33m=\u001b[39m (\u001b[33m...\u001b[39margs) \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at console.call [as error] (jest.setup.js:209:19)\n      at FrontendLogger.log (lib/logger.ts:148:19)\n      at FrontendLogger.error (lib/logger.ts:215:10)\n      at AuthInterceptor.authenticatedFetch (lib/auth-interceptor.ts:192:14)\n      at DemoService.fetchWithAuth (services/demoService.ts:80:24)\n      at DemoService.sendChatMessage (services/demoService.ts:115:22)\n      at Object.<anonymous> (__tests__/services/demoService.test.ts:524:7)\n\n  console.error\n    [2025-08-22T00:54:24.718Z] ERROR: Demo service request failed [DemoService] Error: Request timeout\n        at Object.<anonymous> (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\__tests__\\services\\demoService.test.ts:521:46)\n        at Promise.finally.completed (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1559:28)\n        at new Promise (<anonymous>)\n        at callAsyncCircusFn (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1499:10)\n        at _callCircusTest (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1009:40)\n        at processTicksAndRejections (node:internal/process/task_queues:105:5)\n        at _runTest (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:949:3)\n        at _runTestsForDescribeBlock (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:839:13)\n        at _runTestsForDescribeBlock (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n        at _runTestsForDescribeBlock (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n        at run (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:757:3)\n        at runAndTransformResultsToJestFormat (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1920:21)\n        at jestAdapter (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\runner.js:101:19)\n        at runTestInternal (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n        at runTest (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n        at Object.worker (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-runner\\build\\testWorker.js:497:12)\n\n    \u001b[0m \u001b[90m 207 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 208 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 209 |\u001b[39m     originalError\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 210 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 211 |\u001b[39m   \n     \u001b[90m 212 |\u001b[39m   console\u001b[33m.\u001b[39mwarn \u001b[33m=\u001b[39m (\u001b[33m...\u001b[39margs) \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at console.call [as error] (jest.setup.js:209:19)\n      at FrontendLogger.log (lib/logger.ts:148:19)\n      at FrontendLogger.error (lib/logger.ts:215:10)\n      at DemoService.fetchWithAuth (services/demoService.ts:105:14)\n      at DemoService.sendChatMessage (services/demoService.ts:115:22)\n      at Object.<anonymous> (__tests__/services/demoService.test.ts:524:7)\n\n  console.debug\n    [2025-08-22T00:54:26.722Z] DEBUG: Creating WebSocket without authentication undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:26.771Z] DEBUG: WebSocket connected, secure authentication completed undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n          at Array.forEach (<anonymous>)\n\n  console.debug\n    [2025-08-22T00:54:26.806Z] DEBUG: Creating WebSocket without authentication undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:26.817Z] DEBUG: WebSocket connected, secure authentication completed undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n          at Array.forEach (<anonymous>)\n\n  console.warn\n    [2025-08-22T00:54:26.820Z] WARN: Invalid WebSocket message received undefined\n\n    \u001b[0m \u001b[90m 217 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 218 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 219 |\u001b[39m     originalWarn\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 220 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 221 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 222 |\u001b[39m\u001b[0m\n\n      at console.call (jest.setup.js:219:18)\n      at FrontendLogger.log (lib/logger.ts:145:19)\n      at FrontendLogger.warn (lib/logger.ts:211:10)\n      at Proxy.ws.onmessage (services/webSocketService.ts:709:20)\n      at node_modules/mock-socket/dist/mock-socket.js:859:16\n          at Array.forEach (<anonymous>)\n      at Proxy.dispatchEvent (node_modules/mock-socket/dist/mock-socket.js:855:13)\n      at node_modules/mock-socket/dist/mock-socket.js:2133:16\n          at Array.forEach (<anonymous>)\n      at Server.emit (node_modules/mock-socket/dist/mock-socket.js:2121:16)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:166:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.send (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:165:5)\n      at Object.<anonymous> (__tests__/integration/websocket-setup.test.tsx:140:14)\n\n  console.debug\n    [2025-08-22T00:54:26.836Z] DEBUG: Creating WebSocket without authentication undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:26.848Z] DEBUG: WebSocket connected, secure authentication completed undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n          at Array.forEach (<anonymous>)\n\n  console.warn\n    [2025-08-22T00:54:26.850Z] WARN: Invalid WebSocket message received undefined\n\n    \u001b[0m \u001b[90m 217 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 218 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 219 |\u001b[39m     originalWarn\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 220 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 221 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 222 |\u001b[39m\u001b[0m\n\n      at console.call (jest.setup.js:219:18)\n      at FrontendLogger.log (lib/logger.ts:145:19)\n      at FrontendLogger.warn (lib/logger.ts:211:10)\n      at Proxy.ws.onmessage (services/webSocketService.ts:709:20)\n      at node_modules/mock-socket/dist/mock-socket.js:859:16\n          at Array.forEach (<anonymous>)\n      at Proxy.dispatchEvent (node_modules/mock-socket/dist/mock-socket.js:855:13)\n      at node_modules/mock-socket/dist/mock-socket.js:2133:16\n          at Array.forEach (<anonymous>)\n      at Server.emit (node_modules/mock-socket/dist/mock-socket.js:2121:16)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:166:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.send (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:165:5)\n      at Object.<anonymous> (__tests__/integration/websocket-setup.test.tsx:163:14)\n\n  console.debug\n    [2025-08-22T00:54:26.865Z] DEBUG: Creating WebSocket without authentication undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:26.871Z] DEBUG: WebSocket connected, secure authentication completed undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n          at Array.forEach (<anonymous>)\n\n  console.debug\n    [2025-08-22T00:54:26.879Z] DEBUG: Creating WebSocket without authentication undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:26.885Z] DEBUG: WebSocket connected, secure authentication completed undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n          at Array.forEach (<anonymous>)\n\n  console.debug\n    [2025-08-22T00:54:26.910Z] DEBUG: Creating WebSocket without authentication undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:26.924Z] DEBUG: WebSocket connected, secure authentication completed undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n          at Array.forEach (<anonymous>)\n\n  console.debug\n    [2025-08-22T00:54:26.959Z] DEBUG: Creating WebSocket without authentication undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:26.971Z] DEBUG: WebSocket connected, secure authentication completed undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n          at Array.forEach (<anonymous>)\n\n  console.debug\n    [2025-08-22T00:54:27.021Z] DEBUG: Creating WebSocket without authentication undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:27.034Z] DEBUG: WebSocket connected, secure authentication completed undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n          at Array.forEach (<anonymous>)\n\n  console.debug\n    [2025-08-22T00:54:27.041Z] DEBUG: Creating WebSocket without authentication undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:27.047Z] DEBUG: WebSocket connected, secure authentication completed undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n          at Array.forEach (<anonymous>)\n\n  console.info\n    [2025-08-22T00:54:27.601Z] INFO: User Action: test_button_click (user_interaction) {\n      action: 'user_interaction',\n      metadata: {\n        user_action: 'test_button_click',\n        details: { actionType: 'test', timestamp: 1755824067601 }\n      }\n    }\n\n      at FrontendLogger.log (lib/logger.ts:142:19)\n\n  console.info\n    [2025-08-22T00:54:27.618Z] INFO: API GET /api/test -> 200 (api_call) {\n      action: 'api_call',\n      metadata: { method: 'GET', url: '/api/test', status_code: 200, duration_ms: 0 }\n    }\n\n      at FrontendLogger.log (lib/logger.ts:142:19)\n\n  console.debug\n    [2025-08-22T00:54:27.625Z] DEBUG: WebSocket: test_event (websocket_event) {\n      action: 'websocket_event',\n      metadata: {\n        event: 'test_event',\n        data_preview: '{\"eventType\":\"test\",\"timestamp\":1755824067624}'\n      }\n    }\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.info\n    [2025-08-22T00:54:27.632Z] INFO: Performance: test_operation took 100ms (performance) {\n      action: 'performance',\n      metadata: { operation: 'test_operation', duration_ms: 100 }\n    }\n\n      at FrontendLogger.log (lib/logger.ts:142:19)\n\n  console.group\n      Layer Visibility Debug\n\n      at FrontendLogger.group (lib/logger.ts:305:15)\n\n  console.debug\n      [2025-08-22T00:54:27.643Z] DEBUG: Fast Layer: {}\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n      [2025-08-22T00:54:27.645Z] DEBUG: Medium Layer: false\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n      [2025-08-22T00:54:27.648Z] DEBUG: Slow Layer: false\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n      [2025-08-22T00:54:27.649Z] DEBUG: Data: {\n      fast: {\n        agentName: 'TestAgent',\n        activeTools: [ 'tool1' ],\n        toolStatuses: [],\n        taskId: 'test-123',\n        status: 'running',\n        startTime: 1755824067638\n      },\n      medium: null,\n      slow: null,\n      processing: true\n    }\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.error\n    [2025-08-22T00:54:27.655Z] ERROR: Component error [ErrorComponent] (mount) Error: Test error\n        at Object.<anonymous> (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\__tests__\\integration\\logger-integration.test.tsx:167:21)\n        at Promise.finally.completed (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1559:28)\n        at new Promise (<anonymous>)\n        at callAsyncCircusFn (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1499:10)\n        at _callCircusTest (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1009:40)\n        at processTicksAndRejections (node:internal/process/task_queues:105:5)\n        at _runTest (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:949:3)\n        at _runTestsForDescribeBlock (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:839:13)\n        at _runTestsForDescribeBlock (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n        at _runTestsForDescribeBlock (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n        at run (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:757:3)\n        at runAndTransformResultsToJestFormat (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1920:21)\n        at jestAdapter (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\runner.js:101:19)\n        at runTestInternal (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n        at runTest (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n        at Object.worker (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-runner\\build\\testWorker.js:497:12)\n\n    \u001b[0m \u001b[90m 207 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 208 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 209 |\u001b[39m     originalError\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 210 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 211 |\u001b[39m   \n     \u001b[90m 212 |\u001b[39m   console\u001b[33m.\u001b[39mwarn \u001b[33m=\u001b[39m (\u001b[33m...\u001b[39margs) \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at console.call [as error] (jest.setup.js:209:19)\n      at FrontendLogger.log (lib/logger.ts:148:19)\n      at FrontendLogger.error (lib/logger.ts:215:10)\n      at __tests__/integration/logger-integration.test.tsx:173:20\n      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:23953:20)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at commitHookEffectListMount (node_modules/react-dom/cjs/react-dom-client.development.js:11905:29)\n      at commitHookPassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:12028:11)\n      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13841:13)\n      at recursivelyTraversePassiveMountEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13815:11)\n      at commitPassiveMountOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:13853:11)\n      at flushPassiveEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15737:9)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:15379:15\n      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:860:10)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (__tests__/integration/logger-integration.test.tsx:182:13)\n\n  console.info\n    [2025-08-22T00:54:27.687Z] INFO: User Action: test_button_click (user_interaction) {\n      action: 'user_interaction',\n      metadata: {\n        user_action: 'test_button_click',\n        details: { actionType: 'test', timestamp: 1755824067687 }\n      }\n    }\n\n      at FrontendLogger.log (lib/logger.ts:142:19)\n\n  console.info\n    [2025-08-22T00:54:27.690Z] INFO: API GET /api/test -> 200 (api_call) {\n      action: 'api_call',\n      metadata: { method: 'GET', url: '/api/test', status_code: 200, duration_ms: 0 }\n    }\n\n      at FrontendLogger.log (lib/logger.ts:142:19)\n\n  console.debug\n    [2025-08-22T00:54:27.692Z] DEBUG: WebSocket: test_event (websocket_event) {\n      action: 'websocket_event',\n      metadata: {\n        event: 'test_event',\n        data_preview: '{\"eventType\":\"test\",\"timestamp\":1755824067692}'\n      }\n    }\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.info\n    [2025-08-22T00:54:27.694Z] INFO: Performance: test_operation took 100ms (performance) {\n      action: 'performance',\n      metadata: { operation: 'test_operation', duration_ms: 100 }\n    }\n\n      at FrontendLogger.log (lib/logger.ts:142:19)\n\n  console.info\n    [2025-08-22T00:54:27.698Z] INFO: Auth [REDACTED] [REDACTED] undefined\n\n      at FrontendLogger.log (lib/logger.ts:142:19)\n\n  console.info\n    [2025-08-22T00:54:27.700Z] INFO: User data { metadata: { token: '[REDACTED]', user_id: 'user123' } }\n\n      at FrontendLogger.log (lib/logger.ts:142:19)\n\n  console.info\n    [2025-08-22T00:54:27.705Z] INFO: Grandchild mounted [Grandchild] { component: 'Grandchild' }\n\n      at FrontendLogger.log (lib/logger.ts:142:19)\n\n  console.info\n    [2025-08-22T00:54:27.707Z] INFO: Child mounted [Child] { component: 'Child' }\n\n      at FrontendLogger.log (lib/logger.ts:142:19)\n\n  console.info\n    [2025-08-22T00:54:27.708Z] INFO: Parent mounted [Parent] { component: 'Parent' }\n\n      at FrontendLogger.log (lib/logger.ts:142:19)\n\n  console.debug\n    [2025-08-22T00:54:27.866Z] DEBUG: Automated cleanup started undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:27.866Z] DEBUG: Reconciliation statistics updated undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:27.866Z] DEBUG: Optimistic message added for reconciliation undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:28.866Z] DEBUG: Automated cleanup stopped undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:28.866Z] DEBUG: Timeout timers cleared undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:27.908Z] DEBUG: Automated cleanup started undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:27.908Z] DEBUG: Reconciliation statistics updated undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:27.908Z] DEBUG: Optimistic message added for reconciliation undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:27.908Z] DEBUG: Reconciliation statistics updated undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.error\n    [2025-08-22T00:54:27.885Z] ERROR: Request failed [AuthInterceptor] Error: Network error\n        at Object.<anonymous> (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\__tests__\\services\\messageService.test.ts:89:50)\n        at Promise.finally.completed (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1559:28)\n        at new Promise (<anonymous>)\n        at callAsyncCircusFn (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1499:10)\n        at _callCircusTest (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1009:40)\n        at processTicksAndRejections (node:internal/process/task_queues:105:5)\n        at _runTest (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:949:3)\n        at _runTestsForDescribeBlock (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:839:13)\n        at _runTestsForDescribeBlock (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n        at _runTestsForDescribeBlock (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n        at run (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:757:3)\n        at runAndTransformResultsToJestFormat (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1920:21)\n        at jestAdapter (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\runner.js:101:19)\n        at runTestInternal (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n        at runTest (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n        at Object.worker (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-runner\\build\\testWorker.js:497:12)\n\n    \u001b[0m \u001b[90m 207 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 208 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 209 |\u001b[39m     originalError\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 210 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 211 |\u001b[39m   \n     \u001b[90m 212 |\u001b[39m   console\u001b[33m.\u001b[39mwarn \u001b[33m=\u001b[39m (\u001b[33m...\u001b[39margs) \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at console.call [as error] (jest.setup.js:209:19)\n      at FrontendLogger.log (lib/logger.ts:148:19)\n      at FrontendLogger.error (lib/logger.ts:215:10)\n      at AuthInterceptor.authenticatedFetch (lib/auth-interceptor.ts:192:14)\n\n  console.debug\n    [2025-08-22T00:54:27.908Z] DEBUG: Optimistic message added for reconciliation undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:27.908Z] DEBUG: Reconciliation statistics updated undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:27.908Z] DEBUG: Optimistic message added for reconciliation undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.error\n    [2025-08-22T00:54:27.915Z] ERROR: Failed to fetch threads [MessageService] (getThreads) Error: Network error\n        at Object.<anonymous> (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\__tests__\\services\\messageService.test.ts:89:50)\n        at Promise.finally.completed (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1559:28)\n        at new Promise (<anonymous>)\n        at callAsyncCircusFn (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1499:10)\n        at _callCircusTest (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1009:40)\n        at processTicksAndRejections (node:internal/process/task_queues:105:5)\n        at _runTest (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:949:3)\n        at _runTestsForDescribeBlock (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:839:13)\n        at _runTestsForDescribeBlock (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n        at _runTestsForDescribeBlock (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n        at run (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:757:3)\n        at runAndTransformResultsToJestFormat (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1920:21)\n        at jestAdapter (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\runner.js:101:19)\n        at runTestInternal (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n        at runTest (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n        at Object.worker (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-runner\\build\\testWorker.js:497:12)\n\n    \u001b[0m \u001b[90m 207 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 208 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 209 |\u001b[39m     originalError\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 210 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 211 |\u001b[39m   \n     \u001b[90m 212 |\u001b[39m   console\u001b[33m.\u001b[39mwarn \u001b[33m=\u001b[39m (\u001b[33m...\u001b[39margs) \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at console.call [as error] (jest.setup.js:209:19)\n      at FrontendLogger.log (lib/logger.ts:148:19)\n      at FrontendLogger.error (lib/logger.ts:215:10)\n      at MessageService.getThreads (services/messageService.ts:91:14)\n      at Object.<anonymous> (__tests__/services/messageService.test.ts:91:7)\n\n  console.debug\n    [2025-08-22T00:54:32.908Z] DEBUG: Reconciliation retry attempt undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:32.908Z] DEBUG: Reconciliation retry attempt undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:32.908Z] DEBUG: Reconciliation retry attempt undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:32.908Z] DEBUG: Automated cleanup stopped undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:32.908Z] DEBUG: Timeout timers cleared undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:27.928Z] DEBUG: Automated cleanup started undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:27.928Z] DEBUG: Reconciliation statistics updated undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:27.928Z] DEBUG: Optimistic message added for reconciliation undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:32.928Z] DEBUG: Reconciliation retry attempt undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:33.928Z] DEBUG: Automated cleanup stopped undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.error\n    [2025-08-22T00:54:27.931Z] ERROR: Request failed [AuthInterceptor] Error: Network error\n        at Object.<anonymous> (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\__tests__\\services\\messageService.test.ts:271:50)\n        at Promise.finally.completed (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1559:28)\n        at new Promise (<anonymous>)\n        at callAsyncCircusFn (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1499:10)\n        at _callCircusTest (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1009:40)\n        at processTicksAndRejections (node:internal/process/task_queues:105:5)\n        at _runTest (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:949:3)\n        at _runTestsForDescribeBlock (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:839:13)\n        at _runTestsForDescribeBlock (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n        at _runTestsForDescribeBlock (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n        at run (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:757:3)\n        at runAndTransformResultsToJestFormat (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1920:21)\n        at jestAdapter (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\runner.js:101:19)\n        at runTestInternal (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n        at runTest (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n        at Object.worker (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-runner\\build\\testWorker.js:497:12)\n\n    \u001b[0m \u001b[90m 207 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 208 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 209 |\u001b[39m     originalError\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 210 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 211 |\u001b[39m   \n     \u001b[90m 212 |\u001b[39m   console\u001b[33m.\u001b[39mwarn \u001b[33m=\u001b[39m (\u001b[33m...\u001b[39margs) \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at console.call [as error] (jest.setup.js:209:19)\n      at FrontendLogger.log (lib/logger.ts:148:19)\n      at FrontendLogger.error (lib/logger.ts:215:10)\n      at AuthInterceptor.authenticatedFetch (lib/auth-interceptor.ts:192:14)\n\n  console.debug\n    [2025-08-22T00:54:33.928Z] DEBUG: Timeout timers cleared undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:27.936Z] DEBUG: Automated cleanup started undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.debug\n    [2025-08-22T00:54:29.936Z] DEBUG: Automated cleanup stopped undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n  console.error\n    [2025-08-22T00:54:27.935Z] ERROR: Failed to save message [MessageService] (saveMessage) Error: Network error\n        at Object.<anonymous> (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\__tests__\\services\\messageService.test.ts:271:50)\n        at Promise.finally.completed (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1559:28)\n        at new Promise (<anonymous>)\n        at callAsyncCircusFn (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1499:10)\n        at _callCircusTest (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1009:40)\n        at processTicksAndRejections (node:internal/process/task_queues:105:5)\n        at _runTest (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:949:3)\n        at _runTestsForDescribeBlock (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:839:13)\n        at _runTestsForDescribeBlock (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n        at _runTestsForDescribeBlock (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n        at run (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:757:3)\n        at runAndTransformResultsToJestFormat (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1920:21)\n        at jestAdapter (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\runner.js:101:19)\n        at runTestInternal (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n        at runTest (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n        at Object.worker (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-runner\\build\\testWorker.js:497:12)\n\n    \u001b[0m \u001b[90m 207 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 208 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 209 |\u001b[39m     originalError\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 210 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 211 |\u001b[39m   \n     \u001b[90m 212 |\u001b[39m   console\u001b[33m.\u001b[39mwarn \u001b[33m=\u001b[39m (\u001b[33m...\u001b[39margs) \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at console.call [as error] (jest.setup.js:209:19)\n      at FrontendLogger.log (lib/logger.ts:148:19)\n      at FrontendLogger.error (lib/logger.ts:215:10)\n      at MessageService.saveMessage (services/messageService.ts:137:14)\n      at MessageService.retryQueuedMessages (services/messageService.ts:252:9)\n      at executeRetry (__tests__/services/messageService.test.ts:337:14)\n      at Object.<anonymous> (__tests__/services/messageService.test.ts:295:28)\n\n  console.debug\n    [2025-08-22T00:54:29.936Z] DEBUG: Timeout timers cleared undefined\n\n      at FrontendLogger.log (lib/logger.ts:139:19)\n\n",
      "errors": "ts-jest[ts-jest-transformer] (WARN) Define `ts-jest` config under `globals` is deprecated. Please do\ntransform: {\n    <transform_regex>: ['ts-jest', { /* ts-jest config goes here in Jest */ }],\n},\nSee more at https://kulshekhar.github.io/ts-jest/docs/getting-started/presets#advanced\nts-jest[ts-jest-transformer] (WARN) Define `ts-jest` config under `globals` is deprecated. Please do\ntransform: {\n    <transform_regex>: ['ts-jest', { /* ts-jest config goes here in Jest */ }],\n},\nSee more at https://kulshekhar.github.io/ts-jest/docs/getting-started/presets#advanced\nts-jest[ts-jest-transformer] (WARN) Define `ts-jest` config under `globals` is deprecated. Please do\ntransform: {\n    <transform_regex>: ['ts-jest', { /* ts-jest config goes here in Jest */ }],\n},\nSee more at https://kulshekhar.github.io/ts-jest/docs/getting-started/presets#advanced\nts-jest[ts-jest-transformer] (WARN) Define `ts-jest` config under `globals` is deprecated. Please do\ntransform: {\n    <transform_regex>: ['ts-jest', { /* ts-jest config goes here in Jest */ }],\n},\nSee more at https://kulshekhar.github.io/ts-jest/docs/getting-started/presets#advanced\nts-jest[ts-jest-transformer] (WARN) Define `ts-jest` config under `globals` is deprecated. Please do\ntransform: {\n    <transform_regex>: ['ts-jest', { /* ts-jest config goes here in Jest */ }],\n},\nSee more at https://kulshekhar.github.io/ts-jest/docs/getting-started/presets#advanced\nts-jest[ts-jest-transformer] (WARN) Define `ts-jest` config under `globals` is deprecated. Please do\ntransform: {\n    <transform_regex>: ['ts-jest', { /* ts-jest config goes here in Jest */ }],\n},\nSee more at https://kulshekhar.github.io/ts-jest/docs/getting-started/presets#advanced\nts-jest[ts-jest-transformer] (WARN) Define `ts-jest` config under `globals` is deprecated. Please do\ntransform: {\n    <transform_regex>: ['ts-jest', { /* ts-jest config goes here in Jest */ }],\n},\nSee more at https://kulshekhar.github.io/ts-jest/docs/getting-started/presets#advanced\nts-jest[ts-jest-transformer] (WARN) Define `ts-jest` config under `globals` is deprecated. Please do\ntransform: {\n    <transform_regex>: ['ts-jest', { /* ts-jest config goes here in Jest */ }],\n},\nSee more at https://kulshekhar.github.io/ts-jest/docs/getting-started/presets#advanced\nts-jest[ts-jest-transformer] (WARN) Define `ts-jest` config under `globals` is deprecated. Please do\ntransform: {\n    <transform_regex>: ['ts-jest', { /* ts-jest config goes here in Jest */ }],\n},\nSee more at https://kulshekhar.github.io/ts-jest/docs/getting-started/presets#advanced\nts-jest[ts-jest-transformer] (WARN) Define `ts-jest` config under `globals` is deprecated. Please do\ntransform: {\n    <transform_regex>: ['ts-jest', { /* ts-jest config goes here in Jest */ }],\n},\nSee more at https://kulshekhar.github.io/ts-jest/docs/getting-started/presets#advanced\nFAIL Integration Tests __tests__/integration/thread-navigation.test.tsx (9.832 s)\n  Thread Navigation Integration Tests\n    Thread Switching Performance\n      \u00d7 should switch threads under 200ms performance target (547 ms)\n      \u00d7 should handle rapid thread switching without state corruption (1208 ms)\n      \u00d7 should debounce thread switching to prevent excessive calls (348 ms)\n    URL Synchronization\n      \u00d7 should update URL when thread is selected (1099 ms)\n      \u221a should handle deep linking to specific threads (28 ms)\n      \u00d7 should preserve URL state across navigation (148 ms)\n    State Persistence\n      \u221a should restore active thread on page refresh (23 ms)\n      \u221a should persist sidebar state across refreshes (29 ms)\n      \u221a should handle localStorage corruption gracefully (21 ms)\n    Error Recovery\n      \u221a should handle thread loading failures gracefully (23 ms)\n      \u221a should retry failed thread operations (78 ms)\n      \u00d7 should handle WebSocket disconnection during navigation (72 ms)\n    Multi-Session Synchronization\n      \u00d7 should sync thread updates across multiple tabs (1037 ms)\n      \u00d7 should handle concurrent thread modifications (1080 ms)\n    Navigation Performance Optimization\n      \u00d7 should preload adjacent threads for faster navigation (137 ms)\n      \u00d7 should implement virtual scrolling for large thread lists (1536 ms)\n      \u00d7 should cache thread metadata for instant navigation (76 ms)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should switch threads under 200ms performance target\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:77:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should switch threads under 200ms performance target\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:77:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should switch threads under 200ms performance target\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:77:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should switch threads under 200ms performance target\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:77:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should switch threads under 200ms performance target\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:77:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should handle rapid thread switching without state corruption\n\n    expect(element).toHaveClass(\"bg-emerald-50\")\n\n    Expected the element to have class:\n      bg-emerald-50\n    Received:\n      w-full p-4 text-left hover:bg-gray-50 transition-colors duration-200 border-b border-gray-100 group relative disabled:opacity-50 disabled:cursor-not-allowed\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"w-80 h-full bg-white/95 backdrop-blur-md border-r border-gray-200 flex flex-col\"\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"chat-sidebar\"\u001b[39m\n            \u001b[33mrole\u001b[39m=\u001b[32m\"complementary\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"p-4 border-b border-gray-200\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<button\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"w-full flex items-center justify-center space-x-2 px-4 py-3 bg-emerald-500 hover:bg-emerald-600 text-white rounded-lg transition-all duration-200 transform hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed shadow-sm hover:shadow-md\"\u001b[39m\n                \u001b[33mdata-testid\u001b[39m=\u001b[32m\"new-chat-button\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<svg\u001b[39m\n                  \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-plus w-5 h-5\"\u001b[39m\n                  \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                  \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                  \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                  \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                  \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                  \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                  \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                  \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                  \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<path\u001b[39m\n                    \u001b[33md\u001b[39m=\u001b[32m\"M5 12h14\"\u001b[39m\n                  \u001b[36m/>\u001b[39m\n                  \u001b[36m<path\u001b[39m\n                    \u001b[33md\u001b[39m=\u001b[32m\"M12 5v14\"\u001b[39m\n                  \u001b[36m/>\u001b[39m\n                \u001b[36m</svg>\u001b[39m\n                \u001b[36m<span\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"font-medium\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0mNew Chat\u001b[0m\n                \u001b[36m</span>\u001b[39m\n              \u001b[36m</button>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"p-4 border-b border-gray-100\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<svg\u001b[39m\n                  \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-search absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400\"\u001b[39m\n                  \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                  \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                  \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                  \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                  \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                  \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                  \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                  \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                  \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<path\u001b[39m\n                    \u001b[33md\u001b[39m=\u001b[32m\"m21 21-4.34-4.34\"\u001b[39m\n                  \u001b[36m/>\u001b[39m\n                  \u001b[36m<circle\u001b[39m\n                    \u001b[33mcx\u001b[39m=\u001b[32m\"11\"\u001b[39m\n                    \u001b[33mcy\u001b[39m=\u001b[32m\"11\"\u001b[39m\n                    \u001b[33mr\u001b[39m=\u001b[32m\"8\"\u001b[39m\n                  \u001b[36m/>\u001b[39m\n                \u001b[36m</svg>\u001b[39m\n                \u001b[36m<input\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"w-full pl-10 pr-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500 transition-all duration-200\"\u001b[39m\n                  \u001b[33mdata-testid\u001b[39m=\u001b[32m\"search-input\"\u001b[39m\n                  \u001b[33mplaceholder\u001b[39m=\u001b[32m\"Search conversations...\"\u001b[39m\n                  \u001b[33mtype\u001b[39m=\u001b[32m\"text\"\u001b[39m\n                  \u001b[33mvalue\u001b[39m=\u001b[32m\"\"\u001b[39m\n                \u001b[36m/>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"flex-1 overflow-y-auto\"\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"thread-list\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mstyle\u001b[39m=\u001b[32m\"opacity: 1; transform: none;\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<button\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"w-full p-4 text-left hover:bg-gray-50 transition-colors duration-200 border-b border-gray-100 group relative disabled:opacity-50 disabled:cursor-not-allowed\"\u001b[39m\n                  \u001b[33mdata-testid\u001b[39m=\u001b[32m\"thread-item-thread-1\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-start space-x-3 pl-2\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<svg\u001b[39m\n                      \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-message-square w-5 h-5 mt-0.5 flex-shrink-0 text-gray-400\"\u001b[39m\n                      \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                      \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                      \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                      \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                      \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</svg>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"flex-1 min-w-0\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<p\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"text-sm font-medium truncate text-gray-900\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[0mAI Optimization Discussion\u001b[0m\n                      \u001b[36m</p>\u001b[39m\n                      \u001b[36m<div\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center space-x-3 mt-1\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[36m<span\u001b[39m\n                          \u001b[33mclass\u001b[39m=\u001b[32m\"text-xs text-gray-500 flex items-center\"\u001b[39m\n                        \u001b[36m>\u001b[39m\n                          \u001b[36m<svg\u001b[39m\n                            \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                            \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-clock w-3 h-3 mr-1\"\u001b[39m\n                            \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                            \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                            \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                            \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                            \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                            \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                            \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                            \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                            \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                          \u001b[36m>\u001b[39m\n                            \u001b[36m<path\u001b[39m\n                              \u001b[33md\u001b[39m=\u001b[32m\"M12 6v6l4 2\"\u001b[39m\n                            \u001b[36m/>\u001b[39m\n                            \u001b[36m<circle\u001b[39m\n                              \u001b[33mcx\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                              \u001b[33mcy\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                              \u001b[33mr\u001b[39m=\u001b[32m\"10\"\u001b[39m\n                            \u001b[36m/>\u001b[39m\n                          \u001b[36m</svg>\u001b[39m\n                          \u001b[0mless than a minute ago\u001b[0m\n                        \u001b[36m</span>\u001b[39m\n                        \u001b[36m<span\u001b[39m\n                          \u001b[33mclass\u001b[39m=\u001b[32m\"text-xs text-gray-500\"\u001b[39m\n                        \u001b[36m>\u001b[39m\n                          \u001b[0m15\u001b[0m\n                          \u001b[0m message\u001b[0m\n                          \u001b[0ms\u001b[0m\n                        \u001b[36m</span>\u001b[39m\n                      \u001b[36m</div>\u001b[39m\n                    \u001b[36m</div>\u001b[39m\n                    \u001b[36m<svg\u001b[39m\n                      \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-chevron-right w-4 h-4 text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity duration-200\"\u001b[39m\n                      \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                      \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                      \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                      \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                      \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"m9 18 6-6-6-6\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</svg>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                \u001b[36m</button>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mstyle\u001b[39m=\u001b[32m\"opacity: 1; transform: none;\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<button\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"w-full p-4 text-left hover:bg-gray-50 transition-colors duration-200 border-b border-gray-100 group relative disabled:opacity-50 disabled:cursor-not-allowed\"\u001b[39m\n                  \u001b[33mdata-testid\u001b[39m=\u001b[32m\"thread-item-thread-2\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-start space-x-3 pl-2\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<svg\u001b[39m\n                      \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-message-square w-5 h-5 mt-0.5 flex-shrink-0 text-gray-400\"\u001b[39m\n                      \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                      \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                      \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                      \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                      \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</svg>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"flex-1 min-w-0\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<p\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"text-sm font-medium truncate text-gray-900\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[0mPerformance Analysis\u001b[0m\n                      \u001b[36m</p>\u001b[39m\n                      \u001b[36m<div\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center space-x-3 mt-1\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[36m<span\u001b[39m\n                          \u001b[33mclass\u001b[39m=\u001b[32m\"text-xs text-gray-500 flex items-center\"\u001b[39m\n                        \u001b[36m>\u001b[39m\n                          \u001b[36m<svg\u001b[39m\n                            \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                            \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-clock w-3 h-3 mr-1\"\u001b[39m\n                            \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                            \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                            \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                            \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                            \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                            \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                            \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                            \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                            \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                          \u001b[36m>\u001b[39m\n                            \u001b[36m<path\u001b[39m\n                              \u001b[33md\u001b[39m=\u001b[32m\"M12 6v6l4 2\"\u001b[39m\n                            \u001b[36m/>\u001b[39m\n                            \u001b[36m<circle\u001b[39m\n                              \u001b[33mcx\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                              \u001b[33mcy\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                              \u001b[33mr\u001b[39m=\u001b[32m\"10\"\u001b[39m\n                            \u001b[36m/>\u001b[39m\n                          \u001b[36m</svg>\u001b[39m\n                          \u001b[0mabout 1 hour ago\u001b[0m\n                        \u001b[36m</span>\u001b[39m\n                        \u001b[36m<span\u001b[39m\n                          \u001b[33mclass\u001b[39m=\u001b[32m\"text-xs text-gray-500\"\u001b[39m\n                        \u001b[36m>\u001b[39m\n                          \u001b[0m8\u001b[0m\n                          \u001b[0m message\u001b[0m\n                          \u001b[0ms\u001b[0m\n                        \u001b[36m</span>\u001b[39m\n                      \u001b[36m</div>\u001b[39m\n                    \u001b[36m</div>\u001b[39m\n                    \u001b[36m<svg\u001b[39m\n                      \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-chevron-right w-4 h-4 text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity duration-200\"\u001b[39m\n                      \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                      \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                      \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                      \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                      \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"m9 18 6-6-6-6\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</svg>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                \u001b[36m</button>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mstyle\u001b[39m=\u001b[32m\"opacity: 1; transform: none;\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<button\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"w-full p-4 text-left hover:bg-gray-50 transition-colors duration-200 border-b border-gray-100 group relative disabled:opacity-50 disabled:cursor-not-allowed\"\u001b[39m\n                  \u001b[33mdata-testid\u001b[39m=\u001b[32m\"thread-item-thread-3\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-start space-x-3 pl-2\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<svg\u001b[39m\n                      \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-message-square w-5 h-5 mt-0.5 flex-shrink-0 text-gray-400\"\u001b[39m\n                      \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                      \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                      \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                      \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                      \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</svg>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"flex-1 min-w-0\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<p\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"text-sm font-medium truncate text-gray-900\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[0mData Processing Pipeline\u001b[0m\n                      \u001b[36m</p>\u001b[39m\n                      \u001b[36m<div\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center space-x-3 mt-1\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[36m<span\u001b[39m\n                          \u001b[33mclass\u001b[39m=\u001b[32m\"text-xs text-gray-500 flex items-center\"\u001b[39m\n                        \u001b[36m>\u001b[39m\n                          \u001b[36m<svg\u001b[39m\n                            \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                            \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-clock w-3 h-3 mr-1\"\u001b[39m\n                            \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                            \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                            \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                            \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                            \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                            \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                            \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                            \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                            \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                          \u001b[36m>\u001b[39m\n                            \u001b[36m<path\u001b[39m\n                              \u001b[33md\u001b[39m=\u001b[32m\"M12 6v6l4 2\"\u001b[39m\n                            \u001b[36m/>\u001b[39m\n                            \u001b[36m<circle\u001b[39m\n                              \u001b[33mcx\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                              \u001b[33mcy\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                              \u001b[33mr\u001b[39m=\u001b[32m\"10\"\u001b[39m\n                            \u001b[36m/>\u001b[39m\n                          \u001b[36m</svg>\u001b[39m\n                          \u001b[0mabout 2 hours ago\u001b[0m\n                        \u001b[36m</span>\u001b[39m\n                        \u001b[36m<span\u001b[39m\n                          \u001b[33mclass\u001b[39m=\u001b[32m\"text-xs text-gray-500\"\u001b[39m\n                        \u001b[36m>\u001b[39m\n                          \u001b[0m32\u001b[0m\n                          \u001b[0m message\u001b[0m\n                          \u001b[0ms\u001b[0m\n                        \u001b[36m</span>\u001b[39m\n                      \u001b[36m</div>\u001b[39m\n                    \u001b[36m</div>\u001b[39m\n                    \u001b[36m<svg\u001b[39m\n                      \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-chevron-right w-4 h-4 text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity duration-200\"\u001b[39m\n                      \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                      \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                      \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                      \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                      \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"m9 18 6-6-6-6\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</svg>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                \u001b[36m</button>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"p-4 border-t border-gray-200 bg-gray-50\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<p\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"text-xs text-gray-500 text-center mb-2\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[0m3\u001b[0m\n                \u001b[0m conversation\u001b[0m\n                \u001b[0ms\u001b[0m\n              \u001b[36m</p>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 102 |\u001b[39m       \n     \u001b[90m 103 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 104 |\u001b[39m         expect(thread3)\u001b[33m.\u001b[39mtoHaveClass(\u001b[32m'bg-emerald-50'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 105 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 106 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 107 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/thread-navigation.test.tsx:104:25\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should handle rapid thread switching without state corruption\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:99:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should handle rapid thread switching without state corruption\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:100:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should handle rapid thread switching without state corruption\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:101:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should handle rapid thread switching without state corruption\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:99:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should handle rapid thread switching without state corruption\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:100:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should handle rapid thread switching without state corruption\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:101:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should handle rapid thread switching without state corruption\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:99:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should handle rapid thread switching without state corruption\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:100:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should handle rapid thread switching without state corruption\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:101:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should handle rapid thread switching without state corruption\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:99:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should handle rapid thread switching without state corruption\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:100:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should handle rapid thread switching without state corruption\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:101:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should handle rapid thread switching without state corruption\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:99:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should handle rapid thread switching without state corruption\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:100:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should handle rapid thread switching without state corruption\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:101:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should debounce thread switching to prevent excessive calls\n\n    expect(jest.fn()).toHaveBeenCalledTimes(expected)\n\n    Expected number of calls: 1\n    Received number of calls: 0\n\n    \u001b[0m \u001b[90m 129 |\u001b[39m       \n     \u001b[90m 130 |\u001b[39m       \u001b[90m// Should only trigger once due to debouncing\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 131 |\u001b[39m       expect(switchHandler)\u001b[33m.\u001b[39mtoHaveBeenCalledTimes(\u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 132 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 134 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:131:29)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should debounce thread switching to prevent excessive calls\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:124:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should debounce thread switching to prevent excessive calls\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:125:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should debounce thread switching to prevent excessive calls\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:126:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should debounce thread switching to prevent excessive calls\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:124:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should debounce thread switching to prevent excessive calls\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:125:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should debounce thread switching to prevent excessive calls\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:126:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should debounce thread switching to prevent excessive calls\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:124:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should debounce thread switching to prevent excessive calls\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:125:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should debounce thread switching to prevent excessive calls\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:126:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should debounce thread switching to prevent excessive calls\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:124:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should debounce thread switching to prevent excessive calls\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:125:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should debounce thread switching to prevent excessive calls\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:126:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should debounce thread switching to prevent excessive calls\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:124:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should debounce thread switching to prevent excessive calls\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:125:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should debounce thread switching to prevent excessive calls\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:126:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a URL Synchronization \u203a should update URL when thread is selected\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"/chat/thread-2\"\n\n    Number of calls: 0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"w-80 h-full bg-white/95 backdrop-blur-md border-r border-gray-200 flex flex-col\"\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"chat-sidebar\"\u001b[39m\n            \u001b[33mrole\u001b[39m=\u001b[32m\"complementary\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"p-4 border-b border-gray-200\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<button\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"w-full flex items-center justify-center space-x-2 px-4 py-3 bg-emerald-500 hover:bg-emerald-600 text-white rounded-lg transition-all duration-200 transform hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed shadow-sm hover:shadow-md\"\u001b[39m\n                \u001b[33mdata-testid\u001b[39m=\u001b[32m\"new-chat-button\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<svg\u001b[39m\n                  \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-plus w-5 h-5\"\u001b[39m\n                  \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                  \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                  \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                  \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                  \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                  \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                  \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                  \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                  \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<path\u001b[39m\n                    \u001b[33md\u001b[39m=\u001b[32m\"M5 12h14\"\u001b[39m\n                  \u001b[36m/>\u001b[39m\n                  \u001b[36m<path\u001b[39m\n                    \u001b[33md\u001b[39m=\u001b[32m\"M12 5v14\"\u001b[39m\n                  \u001b[36m/>\u001b[39m\n                \u001b[36m</svg>\u001b[39m\n                \u001b[36m<span\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"font-medium\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0mNew Chat\u001b[0m\n                \u001b[36m</span>\u001b[39m\n              \u001b[36m</button>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"p-4 border-b border-gray-100\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<svg\u001b[39m\n                  \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-search absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400\"\u001b[39m\n                  \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                  \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                  \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                  \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                  \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                  \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                  \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                  \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                  \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<path\u001b[39m\n                    \u001b[33md\u001b[39m=\u001b[32m\"m21 21-4.34-4.34\"\u001b[39m\n                  \u001b[36m/>\u001b[39m\n                  \u001b[36m<circle\u001b[39m\n                    \u001b[33mcx\u001b[39m=\u001b[32m\"11\"\u001b[39m\n                    \u001b[33mcy\u001b[39m=\u001b[32m\"11\"\u001b[39m\n                    \u001b[33mr\u001b[39m=\u001b[32m\"8\"\u001b[39m\n                  \u001b[36m/>\u001b[39m\n                \u001b[36m</svg>\u001b[39m\n                \u001b[36m<input\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"w-full pl-10 pr-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500 transition-all duration-200\"\u001b[39m\n                  \u001b[33mdata-testid\u001b[39m=\u001b[32m\"search-input\"\u001b[39m\n                  \u001b[33mplaceholder\u001b[39m=\u001b[32m\"Search conversations...\"\u001b[39m\n                  \u001b[33mtype\u001b[39m=\u001b[32m\"text\"\u001b[39m\n                  \u001b[33mvalue\u001b[39m=\u001b[32m\"\"\u001b[39m\n                \u001b[36m/>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"flex-1 overflow-y-auto\"\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"thread-list\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mstyle\u001b[39m=\u001b[32m\"opacity: 1; transform: none;\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<button\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"w-full p-4 text-left hover:bg-gray-50 transition-colors duration-200 border-b border-gray-100 group relative disabled:opacity-50 disabled:cursor-not-allowed\"\u001b[39m\n                  \u001b[33mdata-testid\u001b[39m=\u001b[32m\"thread-item-thread-1\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-start space-x-3 pl-2\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<svg\u001b[39m\n                      \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-message-square w-5 h-5 mt-0.5 flex-shrink-0 text-gray-400\"\u001b[39m\n                      \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                      \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                      \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                      \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                      \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</svg>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"flex-1 min-w-0\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<p\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"text-sm font-medium truncate text-gray-900\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[0mAI Optimization Discussion\u001b[0m\n                      \u001b[36m</p>\u001b[39m\n                      \u001b[36m<div\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center space-x-3 mt-1\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[36m<span\u001b[39m\n                          \u001b[33mclass\u001b[39m=\u001b[32m\"text-xs text-gray-500 flex items-center\"\u001b[39m\n                        \u001b[36m>\u001b[39m\n                          \u001b[36m<svg\u001b[39m\n                            \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                            \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-clock w-3 h-3 mr-1\"\u001b[39m\n                            \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                            \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                            \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                            \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                            \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                            \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                            \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                            \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                            \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                          \u001b[36m>\u001b[39m\n                            \u001b[36m<path\u001b[39m\n                              \u001b[33md\u001b[39m=\u001b[32m\"M12 6v6l4 2\"\u001b[39m\n                            \u001b[36m/>\u001b[39m\n                            \u001b[36m<circle\u001b[39m\n                              \u001b[33mcx\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                              \u001b[33mcy\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                              \u001b[33mr\u001b[39m=\u001b[32m\"10\"\u001b[39m\n                            \u001b[36m/>\u001b[39m\n                          \u001b[36m</svg>\u001b[39m\n                          \u001b[0mless than a minute ago\u001b[0m\n                        \u001b[36m</span>\u001b[39m\n                        \u001b[36m<span\u001b[39m\n                          \u001b[33mclass\u001b[39m=\u001b[32m\"text-xs text-gray-500\"\u001b[39m\n                        \u001b[36m>\u001b[39m\n                          \u001b[0m15\u001b[0m\n                          \u001b[0m message\u001b[0m\n                          \u001b[0ms\u001b[0m\n                        \u001b[36m</span>\u001b[39m\n                      \u001b[36m</div>\u001b[39m\n                    \u001b[36m</div>\u001b[39m\n                    \u001b[36m<svg\u001b[39m\n                      \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-chevron-right w-4 h-4 text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity duration-200\"\u001b[39m\n                      \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                      \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                      \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                      \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                      \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"m9 18 6-6-6-6\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</svg>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                \u001b[36m</button>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mstyle\u001b[39m=\u001b[32m\"opacity: 1; transform: none;\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<button\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"w-full p-4 text-left hover:bg-gray-50 transition-colors duration-200 border-b border-gray-100 group relative disabled:opacity-50 disabled:cursor-not-allowed\"\u001b[39m\n                  \u001b[33mdata-testid\u001b[39m=\u001b[32m\"thread-item-thread-2\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-start space-x-3 pl-2\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<svg\u001b[39m\n                      \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-message-square w-5 h-5 mt-0.5 flex-shrink-0 text-gray-400\"\u001b[39m\n                      \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                      \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                      \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                      \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                      \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</svg>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"flex-1 min-w-0\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<p\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"text-sm font-medium truncate text-gray-900\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[0mPerformance Analysis\u001b[0m\n                      \u001b[36m</p>\u001b[39m\n                      \u001b[36m<div\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center space-x-3 mt-1\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[36m<span\u001b[39m\n                          \u001b[33mclass\u001b[39m=\u001b[32m\"text-xs text-gray-500 flex items-center\"\u001b[39m\n                        \u001b[36m>\u001b[39m\n                          \u001b[36m<svg\u001b[39m\n                            \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                            \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-clock w-3 h-3 mr-1\"\u001b[39m\n                            \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                            \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                            \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                            \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                            \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                            \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                            \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                            \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                            \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                          \u001b[36m>\u001b[39m\n                            \u001b[36m<path\u001b[39m\n                              \u001b[33md\u001b[39m=\u001b[32m\"M12 6v6l4 2\"\u001b[39m\n                            \u001b[36m/>\u001b[39m\n                            \u001b[36m<circle\u001b[39m\n                              \u001b[33mcx\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                              \u001b[33mcy\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                              \u001b[33mr\u001b[39m=\u001b[32m\"10\"\u001b[39m\n                            \u001b[36m/>\u001b[39m\n                          \u001b[36m</svg>\u001b[39m\n                          \u001b[0mabout 1 hour ago\u001b[0m\n                        \u001b[36m</span>\u001b[39m\n                        \u001b[36m<span\u001b[39m\n                          \u001b[33mclass\u001b[39m=\u001b[32m\"text-xs text-gray-500\"\u001b[39m\n                        \u001b[36m>\u001b[39m\n                          \u001b[0m8\u001b[0m\n                          \u001b[0m message\u001b[0m\n                          \u001b[0ms\u001b[0m\n                        \u001b[36m</span>\u001b[39m\n                      \u001b[36m</div>\u001b[39m\n                    \u001b[36m</div>\u001b[39m\n                    \u001b[36m<svg\u001b[39m\n                      \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-chevron-right w-4 h-4 text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity duration-200\"\u001b[39m\n                      \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                      \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                      \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                      \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                      \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"m9 18 6-6-6-6\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</svg>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                \u001b[36m</button>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mstyle\u001b[39m=\u001b[32m\"opacity: 1; transform: none;\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<button\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"w-full p-4 text-left hover:bg-gray-50 transition-colors duration-200 border-b border-gray-100 group relative disabled:opacity-50 disabled:cursor-not-allowed\"\u001b[39m\n                  \u001b[33mdata-testid\u001b[39m=\u001b[32m\"thread-item-thread-3\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-start space-x-3 pl-2\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<svg\u001b[39m\n                      \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-message-square w-5 h-5 mt-0.5 flex-shrink-0 text-gray-400\"\u001b[39m\n                      \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                      \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                      \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                      \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                      \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</svg>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"flex-1 min-w-0\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<p\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"text-sm font-medium truncate text-gray-900\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[0mData Processing Pipeline\u001b[0m\n                      \u001b[36m</p>\u001b[39m\n                      \u001b[36m<div\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center space-x-3 mt-1\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[36m<span\u001b[39m\n                          \u001b[33mclass\u001b[39m=\u001b[32m\"text-xs text-gray-500 flex items-center\"\u001b[39m\n                        \u001b[36m>\u001b[39m\n                          \u001b[36m<svg\u001b[39m\n                            \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                            \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-clock w-3 h-3 mr-1\"\u001b[39m\n                            \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                            \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                            \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                            \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                            \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                            \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                            \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                            \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                            \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                          \u001b[36m>\u001b[39m\n                            \u001b[36m<path\u001b[39m\n                              \u001b[33md\u001b[39m=\u001b[32m\"M12 6v6l4 2\"\u001b[39m\n                            \u001b[36m/>\u001b[39m\n                            \u001b[36m<circle\u001b[39m\n                              \u001b[33mcx\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                              \u001b[33mcy\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                              \u001b[33mr\u001b[39m=\u001b[32m\"10\"\u001b[39m\n                            \u001b[36m/>\u001b[39m\n                          \u001b[36m</svg>\u001b[39m\n                          \u001b[0mabout 2 hours ago\u001b[0m\n                        \u001b[36m</span>\u001b[39m\n                        \u001b[36m<span\u001b[39m\n                          \u001b[33mclass\u001b[39m=\u001b[32m\"text-xs text-gray-500\"\u001b[39m\n                        \u001b[36m>\u001b[39m\n                          \u001b[0m32\u001b[0m\n                          \u001b[0m message\u001b[0m\n                          \u001b[0ms\u001b[0m\n                        \u001b[36m</span>\u001b[39m\n                      \u001b[36m</div>\u001b[39m\n                    \u001b[36m</div>\u001b[39m\n                    \u001b[36m<svg\u001b[39m\n                      \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-chevron-right w-4 h-4 text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity duration-200\"\u001b[39m\n                      \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                      \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                      \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                      \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                      \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"m9 18 6-6-6-6\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</svg>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                \u001b[36m</button>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"p-4 border-t border-gray-200 bg-gray-50\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<p\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"text-xs text-gray-500 text-center mb-2\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[0m3\u001b[0m\n                \u001b[0m conversation\u001b[0m\n                \u001b[0ms\u001b[0m\n              \u001b[36m</p>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 146 |\u001b[39m       \n     \u001b[90m 147 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 148 |\u001b[39m         expect(mockPush)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'/chat/thread-2'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 149 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 150 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 151 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/thread-navigation.test.tsx:148:26\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Thread Navigation Integration Tests \u203a URL Synchronization \u203a should update URL when thread is selected\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:145:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a URL Synchronization \u203a should update URL when thread is selected\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:145:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a URL Synchronization \u203a should update URL when thread is selected\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:145:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a URL Synchronization \u203a should update URL when thread is selected\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:145:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a URL Synchronization \u203a should update URL when thread is selected\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:145:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a URL Synchronization \u203a should preserve URL state across navigation\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"/chat/thread-2\"\n\n    Number of calls: 0\n\n    \u001b[0m \u001b[90m 178 |\u001b[39m       \u001b[36mawait\u001b[39m user\u001b[33m.\u001b[39mclick(thread2)\u001b[33m;\u001b[39m\n     \u001b[90m 179 |\u001b[39m       \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 180 |\u001b[39m       expect(mockPush)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'/chat/thread-2'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 181 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 182 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 183 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:180:24)\n\n  \u25cf Thread Navigation Integration Tests \u203a URL Synchronization \u203a should preserve URL state across navigation\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:177:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a URL Synchronization \u203a should preserve URL state across navigation\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:178:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a URL Synchronization \u203a should preserve URL state across navigation\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:177:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a URL Synchronization \u203a should preserve URL state across navigation\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:178:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a URL Synchronization \u203a should preserve URL state across navigation\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:177:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a URL Synchronization \u203a should preserve URL state across navigation\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:178:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a URL Synchronization \u203a should preserve URL state across navigation\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:177:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a URL Synchronization \u203a should preserve URL state across navigation\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:178:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a URL Synchronization \u203a should preserve URL state across navigation\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:177:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a URL Synchronization \u203a should preserve URL state across navigation\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:178:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Error Recovery \u203a should handle WebSocket disconnection during navigation\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:286:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Error Recovery \u203a should handle WebSocket disconnection during navigation\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:286:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Error Recovery \u203a should handle WebSocket disconnection during navigation\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:286:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Error Recovery \u203a should handle WebSocket disconnection during navigation\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:286:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Error Recovery \u203a should handle WebSocket disconnection during navigation\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:286:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Multi-Session Synchronization \u203a should sync thread updates across multiple tabs\n\n    expect(element).toHaveClass(\"bg-emerald-50\")\n\n    Expected the element to have class:\n      bg-emerald-50\n    Received:\n      w-full p-4 text-left hover:bg-gray-50 transition-colors duration-200 border-b border-gray-100 group relative disabled:opacity-50 disabled:cursor-not-allowed\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"w-80 h-full bg-white/95 backdrop-blur-md border-r border-gray-200 flex flex-col\"\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"chat-sidebar\"\u001b[39m\n            \u001b[33mrole\u001b[39m=\u001b[32m\"complementary\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"p-4 border-b border-gray-200\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<button\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"w-full flex items-center justify-center space-x-2 px-4 py-3 bg-emerald-500 hover:bg-emerald-600 text-white rounded-lg transition-all duration-200 transform hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed shadow-sm hover:shadow-md\"\u001b[39m\n                \u001b[33mdata-testid\u001b[39m=\u001b[32m\"new-chat-button\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<svg\u001b[39m\n                  \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-plus w-5 h-5\"\u001b[39m\n                  \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                  \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                  \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                  \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                  \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                  \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                  \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                  \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                  \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<path\u001b[39m\n                    \u001b[33md\u001b[39m=\u001b[32m\"M5 12h14\"\u001b[39m\n                  \u001b[36m/>\u001b[39m\n                  \u001b[36m<path\u001b[39m\n                    \u001b[33md\u001b[39m=\u001b[32m\"M12 5v14\"\u001b[39m\n                  \u001b[36m/>\u001b[39m\n                \u001b[36m</svg>\u001b[39m\n                \u001b[36m<span\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"font-medium\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0mNew Chat\u001b[0m\n                \u001b[36m</span>\u001b[39m\n              \u001b[36m</button>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"p-4 border-b border-gray-100\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<svg\u001b[39m\n                  \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-search absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400\"\u001b[39m\n                  \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                  \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                  \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                  \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                  \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                  \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                  \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                  \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                  \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<path\u001b[39m\n                    \u001b[33md\u001b[39m=\u001b[32m\"m21 21-4.34-4.34\"\u001b[39m\n                  \u001b[36m/>\u001b[39m\n                  \u001b[36m<circle\u001b[39m\n                    \u001b[33mcx\u001b[39m=\u001b[32m\"11\"\u001b[39m\n                    \u001b[33mcy\u001b[39m=\u001b[32m\"11\"\u001b[39m\n                    \u001b[33mr\u001b[39m=\u001b[32m\"8\"\u001b[39m\n                  \u001b[36m/>\u001b[39m\n                \u001b[36m</svg>\u001b[39m\n                \u001b[36m<input\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"w-full pl-10 pr-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500 transition-all duration-200\"\u001b[39m\n                  \u001b[33mdata-testid\u001b[39m=\u001b[32m\"search-input\"\u001b[39m\n                  \u001b[33mplaceholder\u001b[39m=\u001b[32m\"Search conversations...\"\u001b[39m\n                  \u001b[33mtype\u001b[39m=\u001b[32m\"text\"\u001b[39m\n                  \u001b[33mvalue\u001b[39m=\u001b[32m\"\"\u001b[39m\n                \u001b[36m/>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"flex-1 overflow-y-auto\"\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"thread-list\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mstyle\u001b[39m=\u001b[32m\"opacity: 1; transform: none;\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<button\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"w-full p-4 text-left hover:bg-gray-50 transition-colors duration-200 border-b border-gray-100 group relative disabled:opacity-50 disabled:cursor-not-allowed\"\u001b[39m\n                  \u001b[33mdata-testid\u001b[39m=\u001b[32m\"thread-item-thread-1\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-start space-x-3 pl-2\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<svg\u001b[39m\n                      \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-message-square w-5 h-5 mt-0.5 flex-shrink-0 text-gray-400\"\u001b[39m\n                      \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                      \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                      \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                      \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                      \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</svg>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"flex-1 min-w-0\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<p\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"text-sm font-medium truncate text-gray-900\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[0mAI Optimization Discussion\u001b[0m\n                      \u001b[36m</p>\u001b[39m\n                      \u001b[36m<div\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center space-x-3 mt-1\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[36m<span\u001b[39m\n                          \u001b[33mclass\u001b[39m=\u001b[32m\"text-xs text-gray-500 flex items-center\"\u001b[39m\n                        \u001b[36m>\u001b[39m\n                          \u001b[36m<svg\u001b[39m\n                            \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                            \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-clock w-3 h-3 mr-1\"\u001b[39m\n                            \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                            \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                            \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                            \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                            \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                            \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                            \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                            \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                            \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                          \u001b[36m>\u001b[39m\n                            \u001b[36m<path\u001b[39m\n                              \u001b[33md\u001b[39m=\u001b[32m\"M12 6v6l4 2\"\u001b[39m\n                            \u001b[36m/>\u001b[39m\n                            \u001b[36m<circle\u001b[39m\n                              \u001b[33mcx\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                              \u001b[33mcy\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                              \u001b[33mr\u001b[39m=\u001b[32m\"10\"\u001b[39m\n                            \u001b[36m/>\u001b[39m\n                          \u001b[36m</svg>\u001b[39m\n                          \u001b[0mless than a minute ago\u001b[0m\n                        \u001b[36m</span>\u001b[39m\n                        \u001b[36m<span\u001b[39m\n                          \u001b[33mclass\u001b[39m=\u001b[32m\"text-xs text-gray-500\"\u001b[39m\n                        \u001b[36m>\u001b[39m\n                          \u001b[0m15\u001b[0m\n                          \u001b[0m message\u001b[0m\n                          \u001b[0ms\u001b[0m\n                        \u001b[36m</span>\u001b[39m\n                      \u001b[36m</div>\u001b[39m\n                    \u001b[36m</div>\u001b[39m\n                    \u001b[36m<svg\u001b[39m\n                      \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-chevron-right w-4 h-4 text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity duration-200\"\u001b[39m\n                      \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                      \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                      \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                      \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                      \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"m9 18 6-6-6-6\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</svg>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                \u001b[36m</button>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mstyle\u001b[39m=\u001b[32m\"opacity: 1; transform: none;\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<button\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"w-full p-4 text-left hover:bg-gray-50 transition-colors duration-200 border-b border-gray-100 group relative disabled:opacity-50 disabled:cursor-not-allowed\"\u001b[39m\n                  \u001b[33mdata-testid\u001b[39m=\u001b[32m\"thread-item-thread-2\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-start space-x-3 pl-2\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<svg\u001b[39m\n                      \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-message-square w-5 h-5 mt-0.5 flex-shrink-0 text-gray-400\"\u001b[39m\n                      \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                      \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                      \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                      \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                      \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</svg>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"flex-1 min-w-0\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<p\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"text-sm font-medium truncate text-gray-900\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[0mPerformance Analysis\u001b[0m\n                      \u001b[36m</p>\u001b[39m\n                      \u001b[36m<div\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center space-x-3 mt-1\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[36m<span\u001b[39m\n                          \u001b[33mclass\u001b[39m=\u001b[32m\"text-xs text-gray-500 flex items-center\"\u001b[39m\n                        \u001b[36m>\u001b[39m\n                          \u001b[36m<svg\u001b[39m\n                            \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                            \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-clock w-3 h-3 mr-1\"\u001b[39m\n                            \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                            \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                            \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                            \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                            \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                            \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                            \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                            \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                            \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                          \u001b[36m>\u001b[39m\n                            \u001b[36m<path\u001b[39m\n                              \u001b[33md\u001b[39m=\u001b[32m\"M12 6v6l4 2\"\u001b[39m\n                            \u001b[36m/>\u001b[39m\n                            \u001b[36m<circle\u001b[39m\n                              \u001b[33mcx\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                              \u001b[33mcy\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                              \u001b[33mr\u001b[39m=\u001b[32m\"10\"\u001b[39m\n                            \u001b[36m/>\u001b[39m\n                          \u001b[36m</svg>\u001b[39m\n                          \u001b[0mabout 1 hour ago\u001b[0m\n                        \u001b[36m</span>\u001b[39m\n                        \u001b[36m<span\u001b[39m\n                          \u001b[33mclass\u001b[39m=\u001b[32m\"text-xs text-gray-500\"\u001b[39m\n                        \u001b[36m>\u001b[39m\n                          \u001b[0m8\u001b[0m\n                          \u001b[0m message\u001b[0m\n                          \u001b[0ms\u001b[0m\n                        \u001b[36m</span>\u001b[39m\n                      \u001b[36m</div>\u001b[39m\n                    \u001b[36m</div>\u001b[39m\n                    \u001b[36m<svg\u001b[39m\n                      \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-chevron-right w-4 h-4 text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity duration-200\"\u001b[39m\n                      \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                      \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                      \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                      \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                      \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"m9 18 6-6-6-6\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</svg>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                \u001b[36m</button>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mstyle\u001b[39m=\u001b[32m\"opacity: 1; transform: none;\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<button\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"w-full p-4 text-left hover:bg-gray-50 transition-colors duration-200 border-b border-gray-100 group relative disabled:opacity-50 disabled:cursor-not-allowed\"\u001b[39m\n                  \u001b[33mdata-testid\u001b[39m=\u001b[32m\"thread-item-thread-3\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-start space-x-3 pl-2\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<svg\u001b[39m\n                      \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-message-square w-5 h-5 mt-0.5 flex-shrink-0 text-gray-400\"\u001b[39m\n                      \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                      \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                      \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                      \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                      \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</svg>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"flex-1 min-w-0\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<p\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"text-sm font-medium truncate text-gray-900\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[0mData Processing Pipeline\u001b[0m\n                      \u001b[36m</p>\u001b[39m\n                      \u001b[36m<div\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center space-x-3 mt-1\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[36m<span\u001b[39m\n                          \u001b[33mclass\u001b[39m=\u001b[32m\"text-xs text-gray-500 flex items-center\"\u001b[39m\n                        \u001b[36m>\u001b[39m\n                          \u001b[36m<svg\u001b[39m\n                            \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                            \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-clock w-3 h-3 mr-1\"\u001b[39m\n                            \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                            \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                            \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                            \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                            \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                            \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                            \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                            \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                            \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                          \u001b[36m>\u001b[39m\n                            \u001b[36m<path\u001b[39m\n                              \u001b[33md\u001b[39m=\u001b[32m\"M12 6v6l4 2\"\u001b[39m\n                            \u001b[36m/>\u001b[39m\n                            \u001b[36m<circle\u001b[39m\n                              \u001b[33mcx\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                              \u001b[33mcy\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                              \u001b[33mr\u001b[39m=\u001b[32m\"10\"\u001b[39m\n                            \u001b[36m/>\u001b[39m\n                          \u001b[36m</svg>\u001b[39m\n                          \u001b[0mabout 2 hours ago\u001b[0m\n                        \u001b[36m</span>\u001b[39m\n                        \u001b[36m<span\u001b[39m\n                          \u001b[33mclass\u001b[39m=\u001b[32m\"text-xs text-gray-500\"\u001b[39m\n                        \u001b[36m>\u001b[39m\n                          \u001b[0m32\u001b[0m\n                          \u001b[0m message\u001b[0m\n                          \u001b[0ms\u001b[0m\n                        \u001b[36m</span>\u001b[39m\n                      \u001b[36m</div>\u001b[39m\n                    \u001b[36m</div>\u001b[39m\n                    \u001b[36m<svg\u001b[39m\n                      \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-chevron-right w-4 h-4 text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity duration-200\"\u001b[39m\n                      \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                      \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                      \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                      \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                      \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"m9 18 6-6-6-6\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</svg>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                \u001b[36m</button>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"p-4 border-t border-gray-200 bg-gray-50\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<p\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"text-xs text-gray-500 text-center mb-2\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[0m3\u001b[0m\n                \u001b[0m conversation\u001b[0m\n                \u001b[0ms\u001b[0m\n              \u001b[36m</p>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 312 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n     \u001b[90m 313 |\u001b[39m         \u001b[36mconst\u001b[39m activeThread \u001b[33m=\u001b[39m screen\u001b[33m.\u001b[39mgetByTestId(\u001b[32m'thread-item-thread-3'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 314 |\u001b[39m         expect(activeThread)\u001b[33m.\u001b[39mtoHaveClass(\u001b[32m'bg-emerald-50'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 315 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 316 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 317 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/thread-navigation.test.tsx:314:30\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Thread Navigation Integration Tests \u203a Multi-Session Synchronization \u203a should handle concurrent thread modifications\n\n    Unable to find an element with the text: /bg-emerald-50/. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div>\u001b[39m\n        \u001b[36m<div\u001b[39m\n          \u001b[33mclass\u001b[39m=\u001b[32m\"w-80 h-full bg-white/95 backdrop-blur-md border-r border-gray-200 flex flex-col\"\u001b[39m\n          \u001b[33mdata-testid\u001b[39m=\u001b[32m\"chat-sidebar\"\u001b[39m\n          \u001b[33mrole\u001b[39m=\u001b[32m\"complementary\"\u001b[39m\n        \u001b[36m>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"p-4 border-b border-gray-200\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"w-full flex items-center justify-center space-x-2 px-4 py-3 bg-emerald-500 hover:bg-emerald-600 text-white rounded-lg transition-all duration-200 transform hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed shadow-sm hover:shadow-md\"\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"new-chat-button\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<svg\u001b[39m\n                \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-plus w-5 h-5\"\u001b[39m\n                \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<path\u001b[39m\n                  \u001b[33md\u001b[39m=\u001b[32m\"M5 12h14\"\u001b[39m\n                \u001b[36m/>\u001b[39m\n                \u001b[36m<path\u001b[39m\n                  \u001b[33md\u001b[39m=\u001b[32m\"M12 5v14\"\u001b[39m\n                \u001b[36m/>\u001b[39m\n              \u001b[36m</svg>\u001b[39m\n              \u001b[36m<span\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"font-medium\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[0mNew Chat\u001b[0m\n              \u001b[36m</span>\u001b[39m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"p-4 border-b border-gray-100\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<svg\u001b[39m\n                \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-search absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400\"\u001b[39m\n                \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<path\u001b[39m\n                  \u001b[33md\u001b[39m=\u001b[32m\"m21 21-4.34-4.34\"\u001b[39m\n                \u001b[36m/>\u001b[39m\n                \u001b[36m<circle\u001b[39m\n                  \u001b[33mcx\u001b[39m=\u001b[32m\"11\"\u001b[39m\n                  \u001b[33mcy\u001b[39m=\u001b[32m\"11\"\u001b[39m\n                  \u001b[33mr\u001b[39m=\u001b[32m\"8\"\u001b[39m\n                \u001b[36m/>\u001b[39m\n              \u001b[36m</svg>\u001b[39m\n              \u001b[36m<input\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"w-full pl-10 pr-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500 transition-all duration-200\"\u001b[39m\n                \u001b[33mdata-testid\u001b[39m=\u001b[32m\"search-input\"\u001b[39m\n                \u001b[33mplaceholder\u001b[39m=\u001b[32m\"Search conversations...\"\u001b[39m\n                \u001b[33mtype\u001b[39m=\u001b[32m\"text\"\u001b[39m\n                \u001b[33mvalue\u001b[39m=\u001b[32m\"\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"flex-1 overflow-y-auto\"\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"thread-list\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mstyle\u001b[39m=\u001b[32m\"opacity: 1; transform: none;\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<button\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"w-full p-4 text-left hover:bg-gray-50 transition-colors duration-200 border-b border-gray-100 group relative disabled:opacity-50 disabled:cursor-not-allowed\"\u001b[39m\n                \u001b[33mdata-testid\u001b[39m=\u001b[32m\"thread-item-thread-1\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-start space-x-3 pl-2\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<svg\u001b[39m\n                    \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-message-square w-5 h-5 mt-0.5 flex-shrink-0 text-gray-400\"\u001b[39m\n                    \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                    \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                    \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                    \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                    \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                    \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                    \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                    \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                    \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<path\u001b[39m\n                      \u001b[33md\u001b[39m=\u001b[32m\"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z\"\u001b[39m\n                    \u001b[36m/>\u001b[39m\n                  \u001b[36m</svg>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"flex-1 min-w-0\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<p\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"text-sm font-medium truncate text-gray-900\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[0mAI Optimization Discussion\u001b[0m\n                    \u001b[36m</p>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center space-x-3 mt-1\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<span\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"text-xs text-gray-500 flex items-center\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[36m<svg\u001b[39m\n                          \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                          \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-clock w-3 h-3 mr-1\"\u001b[39m\n                          \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                          \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                          \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                          \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                          \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                          \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                          \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                          \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                          \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                        \u001b[36m>\u001b[39m\n                          \u001b[36m<path\u001b[39m\n                            \u001b[33md\u001b[39m=\u001b[32m\"M12 6v6l4 2\"\u001b[39m\n                          \u001b[36m/>\u001b[39m\n                          \u001b[36m<circle\u001b[39m\n                            \u001b[33mcx\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                            \u001b[33mcy\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                            \u001b[33mr\u001b[39m=\u001b[32m\"10\"\u001b[39m\n                          \u001b[36m/>\u001b[39m\n                        \u001b[36m</svg>\u001b[39m\n                        \u001b[0mless than a minute ago\u001b[0m\n                      \u001b[36m</span>\u001b[39m\n                      \u001b[36m<span\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"text-xs text-gray-500\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[0m15\u001b[0m\n                        \u001b[0m message\u001b[0m\n                        \u001b[0ms\u001b[0m\n                      \u001b[36m</span>\u001b[39m\n                    \u001b[36m</div>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                  \u001b[36m<svg\u001b[39m\n                    \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-chevron-right w-4 h-4 text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity duration-200\"\u001b[39m\n                    \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                    \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                    \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                    \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                    \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                    \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                    \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                    \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                    \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<path\u001b[39m\n                      \u001b[33md\u001b[39m=\u001b[32m\"m9 18 6-6-6-6\"\u001b[39m\n                    \u001b[36m/>\u001b[39m\n                  \u001b[36m</svg>\u001b[39m\n                \u001b[36m</div>\u001b[39m\n              \u001b[36m</button>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mstyle\u001b[39m=\u001b[32m\"opacity: 1; transform: none;\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<button\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"w-full p-4 text-left hover:bg-gray-50 transition-colors duration-200 border-b border-gray-100 group relative disabled:opacity-50 disabled:cursor-not-allowed\"\u001b[39m\n                \u001b[33mdata-testid\u001b[39m=\u001b[32m\"thread-item-thread-2\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-start space-x-3 pl-2\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<svg\u001b[39m\n                    \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-message-square w-5 h-5 mt-0.5 flex-shrink-0 text-gray-400\"\u001b[39m\n                    \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                    \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                    \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                    \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                    \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                    \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                    \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                    \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                    \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<path\u001b[39m\n                      \u001b[33md\u001b[39m=\u001b[32m\"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z\"\u001b[39m\n                    \u001b[36m/>\u001b[39m\n                  \u001b[36m</svg>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"flex-1 min-w-0\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<p\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"text-sm font-medium truncate text-gray-900\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[0mPerformance Analysis\u001b[0m\n                    \u001b[36m</p>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center space-x-3 mt-1\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<span\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"text-xs text-gray-500 flex items-center\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[36m<svg\u001b[39m\n                          \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                          \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-clock w-3 h-3 mr-1\"\u001b[39m\n                          \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                          \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                          \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                          \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                          \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                          \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                          \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                          \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                          \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                        \u001b[36m>\u001b[39m\n                          \u001b[36m<path\u001b[39m\n                            \u001b[33md\u001b[39m=\u001b[32m\"M12 6v6l4 2\"\u001b[39m\n                          \u001b[36m/>\u001b[39m\n                          \u001b[36m<circle\u001b[39m\n                            \u001b[33mcx\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                            \u001b[33mcy\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                            \u001b[33mr\u001b[39m=\u001b[32m\"10\"\u001b[39m\n                          \u001b[36m/>\u001b[39m\n                        \u001b[36m</svg>\u001b[39m\n                        \u001b[0mabout 1 hour ago\u001b[0m\n                      \u001b[36m</span>\u001b[39m\n                      \u001b[36m<span\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"text-xs text-gray-500\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[0m8\u001b[0m\n                        \u001b[0m message\u001b[0m\n                        \u001b[0ms\u001b[0m\n                      \u001b[36m</span>\u001b[39m\n                    \u001b[36m</div>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                  \u001b[36m<svg\u001b[39m\n                    \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-chevron-right w-4 h-4 text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity duration-200\"\u001b[39m\n                    \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                    \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                    \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                    \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                    \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                    \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                    \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                    \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                    \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<path\u001b[39m\n                      \u001b[33md\u001b[39m=\u001b[32m\"m9 18 6-6-6-6\"\u001b[39m\n                    \u001b[36m/>\u001b[39m\n                  \u001b[36m</svg>\u001b[39m\n                \u001b[36m</div>\u001b[39m\n              \u001b[36m</button>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mstyle\u001b[39m=\u001b[32m\"opacity: 1; transform: none;\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<button\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"w-full p-4 text-left hover:bg-gray-50 transition-colors duration-200 border-b border-gray-100 group relative disabled:opacity-50 disabled:cursor-not-allowed\"\u001b[39m\n                \u001b[33mdata-testid\u001b[39m=\u001b[32m\"thread-item-thread-3\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-start space-x-3 pl-2\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<svg\u001b[39m\n                    \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-message-square w-5 h-5 mt-0.5 flex-shrink-0 text-gray-400\"\u001b[39m\n                    \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                    \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                    \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                    \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                    \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                    \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                    \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                    \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                    \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<path\u001b[39m\n                      \u001b[33md\u001b[39m=\u001b[32m\"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z\"\u001b[39m\n                    \u001b[36m/>\u001b[39m\n                  \u001b[36m</svg>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"flex-1 min-w-0\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<p\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"text-sm font-medium truncate text-gray-900\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[0mData Processing Pipeline\u001b[0m\n                    \u001b[36m</p>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center space-x-3 mt-1\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<span\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"text-xs text-gray-500 flex items-center\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[36m<svg\u001b[39m\n                          \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                          \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-clock w-3 h-3 mr-1\"\u001b[39m\n                          \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                          \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                          \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                          \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                          \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                          \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                          \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                          \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                          \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                        \u001b[36m>\u001b[39m\n                          \u001b[36m<path\u001b[39m\n                            \u001b[33md\u001b[39m=\u001b[32m\"M12 6v6l4 2\"\u001b[39m\n                          \u001b[36m/>\u001b[39m\n                          \u001b[36m<circle\u001b[39m\n                            \u001b[33mcx\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                            \u001b[33mcy\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                            \u001b[33mr\u001b[39m=\u001b[32m\"10\"\u001b[39m\n                          \u001b[36m/>\u001b[39m\n                        \u001b[36m</svg>\u001b[39m\n                        \u001b[0mabout 2 hours ago\u001b[0m\n                      \u001b[36m</span>\u001b[39m\n                      \u001b[36m<span\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"text-xs text-gray-500\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[0m32\u001b[0m\n                        \u001b[0m message\u001b[0m\n                        \u001b[0ms\u001b[0m\n                      \u001b[36m</span>\u001b[39m\n                    \u001b[36m</div>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                  \u001b[36m<svg\u001b[39m\n                    \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-chevron-right w-4 h-4 text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity duration-200\"\u001b[39m\n                    \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                    \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                    \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                    \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                    \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                    \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                    \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                    \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                    \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<path\u001b[39m\n                      \u001b[33md\u001b[39m=\u001b[32m\"m9 18 6-6-6-6\"\u001b[39m\n                    \u001b[36m/>\u001b[39m\n                  \u001b[36m</svg>\u001b[39m\n                \u001b[36m</div>\u001b[39m\n              \u001b[36m</button>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"p-4 border-t border-gray-200 bg-gray-50\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<p\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"text-xs text-gray-500 text-center mb-2\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0m3\u001b[0m\n              \u001b[0m conversation\u001b[0m\n              \u001b[0ms\u001b[0m\n            \u001b[36m</p>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</div>\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n    \u001b[0m \u001b[90m 334 |\u001b[39m       \n     \u001b[90m 335 |\u001b[39m       \u001b[90m// Should resolve to a consistent state\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 336 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 337 |\u001b[39m         \u001b[36mconst\u001b[39m activeThreads \u001b[33m=\u001b[39m screen\u001b[33m.\u001b[39mgetAllByText(\u001b[35m/bg-emerald-50/\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 338 |\u001b[39m         expect(activeThreads\u001b[33m.\u001b[39mlength)\u001b[33m.\u001b[39mtoBeLessThanOrEqual(\u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 339 |\u001b[39m       })\u001b[33m;\u001b[39m\u001b[0m\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:336:20)\n\n  \u25cf Thread Navigation Integration Tests \u203a Multi-Session Synchronization \u203a should handle concurrent thread modifications\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n          at async Promise.all (index 0)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:330:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Multi-Session Synchronization \u203a should handle concurrent thread modifications\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n          at async Promise.all (index 1)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:330:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Multi-Session Synchronization \u203a should handle concurrent thread modifications\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n          at async Promise.all (index 0)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:330:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Multi-Session Synchronization \u203a should handle concurrent thread modifications\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n          at async Promise.all (index 1)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:330:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Multi-Session Synchronization \u203a should handle concurrent thread modifications\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n          at async Promise.all (index 0)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:330:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Multi-Session Synchronization \u203a should handle concurrent thread modifications\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n          at async Promise.all (index 1)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:330:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Multi-Session Synchronization \u203a should handle concurrent thread modifications\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n          at async Promise.all (index 0)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:330:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Multi-Session Synchronization \u203a should handle concurrent thread modifications\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n          at async Promise.all (index 1)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:330:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Multi-Session Synchronization \u203a should handle concurrent thread modifications\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n          at async Promise.all (index 0)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:330:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Multi-Session Synchronization \u203a should handle concurrent thread modifications\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n          at async Promise.all (index 1)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:330:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Navigation Performance Optimization \u203a should preload adjacent threads for faster navigation\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"thread-1\"\n\n    Number of calls: 0\n\n    \u001b[0m \u001b[90m 359 |\u001b[39m       \u001b[36mawait\u001b[39m simulateNetworkDelay(\u001b[35m100\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 360 |\u001b[39m       \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 361 |\u001b[39m       expect(preloadHandler)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'thread-1'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 362 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 363 |\u001b[39m\n     \u001b[90m 364 |\u001b[39m     it(\u001b[32m'should implement virtual scrolling for large thread lists'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:361:30)\n\n  \u25cf Thread Navigation Integration Tests \u203a Navigation Performance Optimization \u203a should implement virtual scrolling for large thread lists\n\n    expect(received).toBeLessThan(expected)\n\n    Expected: < 100\n    Received:   1000\n\n    \u001b[0m \u001b[90m 380 |\u001b[39m       \u001b[90m// Should only render visible threads\u001b[39m\n     \u001b[90m 381 |\u001b[39m       \u001b[36mconst\u001b[39m visibleThreads \u001b[33m=\u001b[39m screen\u001b[33m.\u001b[39mgetAllByTestId(\u001b[35m/thread-item-/\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 382 |\u001b[39m       expect(visibleThreads\u001b[33m.\u001b[39mlength)\u001b[33m.\u001b[39mtoBeLessThan(\u001b[35m100\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 383 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 384 |\u001b[39m\n     \u001b[90m 385 |\u001b[39m     it(\u001b[32m'should cache thread metadata for instant navigation'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:382:37)\n\n  \u25cf Thread Navigation Integration Tests \u203a Navigation Performance Optimization \u203a should cache thread metadata for instant navigation\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"thread-2\"\n\n    Number of calls: 0\n\n    \u001b[0m \u001b[90m 399 |\u001b[39m       \u001b[36mawait\u001b[39m user\u001b[33m.\u001b[39mclick(targetThread)\u001b[33m;\u001b[39m\n     \u001b[90m 400 |\u001b[39m       \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 401 |\u001b[39m       expect(cacheHandler)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'thread-2'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 402 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 403 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 404 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:401:28)\n\n  \u25cf Thread Navigation Integration Tests \u203a Navigation Performance Optimization \u203a should cache thread metadata for instant navigation\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:399:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Navigation Performance Optimization \u203a should cache thread metadata for instant navigation\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:399:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Navigation Performance Optimization \u203a should cache thread metadata for instant navigation\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:399:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Navigation Performance Optimization \u203a should cache thread metadata for instant navigation\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:399:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Navigation Performance Optimization \u203a should cache thread metadata for instant navigation\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:399:7)\n\nFAIL Integration Tests __tests__/integration/message-sending.test.tsx (10.027 s)\n  Message Sending Integration Tests\n    Send Button Interactions\n      \u221a should handle send button click with immediate UI feedback (362 ms)\n      \u221a should handle Enter key sending with same performance (292 ms)\n      \u221a should not send on Shift+Enter (multiline) (358 ms)\n    Optimistic UI Updates\n      \u221a should show message immediately in UI (324 ms)\n      \u221a should clear input field immediately after send (290 ms)\n      \u221a should show sending indicator during transmission (204 ms)\n    Message ID Generation\n      \u221a should generate unique message IDs (739 ms)\n    WebSocket Message Dispatch\n      \u221a should dispatch properly formatted WebSocket message (450 ms)\n      \u221a should include thread ID in WebSocket message (345 ms)\n      \u221a should handle WebSocket connection failures gracefully (284 ms)\n    Success Confirmation\n      \u221a should handle successful message confirmation (313 ms)\n      \u221a should re-enable input after successful send (358 ms)\n    Concurrent Message Handling\n      \u221a should handle rapid successive sends (1822 ms)\n      \u221a should handle concurrent sends from multiple tabs simulation (621 ms)\n    Performance Requirements\n      \u221a should meet latency requirements for send action (328 ms)\n      \u221a should handle large messages efficiently (147 ms)\n      \u00d7 should maintain 60 FPS during typing simulation (734 ms)\n\n  \u25cf Message Sending Integration Tests \u203a Performance Requirements \u203a should maintain 60 FPS during typing simulation\n\n    expect(received).toBeGreaterThan(expected)\n\n    Expected: > 5\n    Received:   0\n\n    \u001b[0m \u001b[90m 562 |\u001b[39m       \u001b[90m// Most frames should be under target time\u001b[39m\n     \u001b[90m 563 |\u001b[39m       \u001b[36mconst\u001b[39m fastFrames \u001b[33m=\u001b[39m frameTests\u001b[33m.\u001b[39mfilter(time \u001b[33m=>\u001b[39m time \u001b[33m<\u001b[39m targetFrameTime)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 564 |\u001b[39m       expect(fastFrames\u001b[33m.\u001b[39mlength)\u001b[33m.\u001b[39mtoBeGreaterThan(frameTests\u001b[33m.\u001b[39mlength \u001b[33m*\u001b[39m \u001b[35m0.5\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// 50% target (relaxed)\u001b[39m\n     \u001b[90m     |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 565 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 566 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 567 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/message-sending.test.tsx:564:33)\n\nFAIL Integration Tests __tests__/integration/critical/websocket-auth-headers.test.tsx (10.405 s)\n  WebSocket Authentication Headers (SECURITY VERIFICATION)\n    Subprotocol Authentication (SECURE METHOD)\n      \u00d7 should use Sec-WebSocket-Protocol with Bearer token for WebSocket connection (1060 ms)\n      \u00d7 should NOT send JWT token via query parameters (security verified) (1022 ms)\n    WebSocket Subprotocol Authentication (PRIMARY METHOD)\n      \u00d7 should use Sec-WebSocket-Protocol header for JWT authentication (1021 ms)\n      \u00d7 should handle authentication protocol correctly (1020 ms)\n    Secure Connection Endpoint\n      \u00d7 should connect to the secure WebSocket endpoint (1020 ms)\n      \u00d7 should handle authentication errors from secure endpoint (1010 ms)\n    Token Management Integration\n      \u00d7 should not expose token in connection URL (1011 ms)\n      \u00d7 should properly handle token refresh scenarios (1015 ms)\n\n  \u25cf WebSocket Authentication Headers (SECURITY VERIFICATION) \u203a Subprotocol Authentication (SECURE METHOD) \u203a should use Sec-WebSocket-Protocol with Bearer token for WebSocket connection\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"send-message\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mSend Message\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 106 |\u001b[39m       \u001b[90m// Wait for connection attempt\u001b[39m\n     \u001b[90m 107 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 108 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 109 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 110 |\u001b[39m\n     \u001b[90m 111 |\u001b[39m       \u001b[90m// SECURITY VERIFICATION: Check that WebSocket was created with proper authentication\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-auth-headers.test.tsx:108:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf WebSocket Authentication Headers (SECURITY VERIFICATION) \u203a Subprotocol Authentication (SECURE METHOD) \u203a should NOT send JWT token via query parameters (security verified)\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"send-message\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mSend Message\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 139 |\u001b[39m       \n     \u001b[90m 140 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 141 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 142 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 143 |\u001b[39m\n     \u001b[90m 144 |\u001b[39m       \u001b[36mconst\u001b[39m websocketCall \u001b[33m=\u001b[39m (global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmock\u001b[33m.\u001b[39mcalls[\u001b[35m0\u001b[39m]\u001b[33m;\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-auth-headers.test.tsx:141:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf WebSocket Authentication Headers (SECURITY VERIFICATION) \u203a WebSocket Subprotocol Authentication (PRIMARY METHOD) \u203a should use Sec-WebSocket-Protocol header for JWT authentication\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"send-message\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mSend Message\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 172 |\u001b[39m       \n     \u001b[90m 173 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 174 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 175 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 176 |\u001b[39m\n     \u001b[90m 177 |\u001b[39m       \u001b[36mconst\u001b[39m websocketCall \u001b[33m=\u001b[39m (global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmock\u001b[33m.\u001b[39mcalls[\u001b[35m0\u001b[39m]\u001b[33m;\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-auth-headers.test.tsx:174:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf WebSocket Authentication Headers (SECURITY VERIFICATION) \u203a WebSocket Subprotocol Authentication (PRIMARY METHOD) \u203a should handle authentication protocol correctly\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"send-message\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mSend Message\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 197 |\u001b[39m       \n     \u001b[90m 198 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 199 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 200 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 201 |\u001b[39m\n     \u001b[90m 202 |\u001b[39m       \u001b[36mconst\u001b[39m websocketCall \u001b[33m=\u001b[39m (global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmock\u001b[33m.\u001b[39mcalls[\u001b[35m0\u001b[39m]\u001b[33m;\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-auth-headers.test.tsx:199:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf WebSocket Authentication Headers (SECURITY VERIFICATION) \u203a Secure Connection Endpoint \u203a should connect to the secure WebSocket endpoint\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"send-message\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mSend Message\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 225 |\u001b[39m       \n     \u001b[90m 226 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 227 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 228 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 229 |\u001b[39m\n     \u001b[90m 230 |\u001b[39m       \u001b[36mconst\u001b[39m websocketCall \u001b[33m=\u001b[39m (global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmock\u001b[33m.\u001b[39mcalls[\u001b[35m0\u001b[39m]\u001b[33m;\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-auth-headers.test.tsx:227:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf WebSocket Authentication Headers (SECURITY VERIFICATION) \u203a Secure Connection Endpoint \u203a should handle authentication errors from secure endpoint\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"send-message\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mSend Message\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 254 |\u001b[39m       \u001b[90m// Simulate authentication rejection from backend\u001b[39m\n     \u001b[90m 255 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 256 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 257 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 258 |\u001b[39m\n     \u001b[90m 259 |\u001b[39m       \u001b[90m// Simulate backend rejection due to improper auth\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-auth-headers.test.tsx:256:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf WebSocket Authentication Headers (SECURITY VERIFICATION) \u203a Token Management Integration \u203a should not expose token in connection URL\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"send-message\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mSend Message\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 290 |\u001b[39m       \n     \u001b[90m 291 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 292 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 293 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 294 |\u001b[39m\n     \u001b[90m 295 |\u001b[39m       \u001b[36mconst\u001b[39m websocketCall \u001b[33m=\u001b[39m (global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmock\u001b[33m.\u001b[39mcalls[\u001b[35m0\u001b[39m]\u001b[33m;\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-auth-headers.test.tsx:292:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf WebSocket Authentication Headers (SECURITY VERIFICATION) \u203a Token Management Integration \u203a should properly handle token refresh scenarios\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"send-message\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mSend Message\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 321 |\u001b[39m       \n     \u001b[90m 322 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 323 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 324 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 325 |\u001b[39m\n     \u001b[90m 326 |\u001b[39m       \u001b[90m// Simulate token refresh\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-auth-headers.test.tsx:323:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\nFAIL Integration Tests __tests__/integration/critical/websocket-subprotocol-auth.test.tsx (11.471 s)\n  WebSocket Subprotocol Authentication (CRITICAL)\n    Sec-WebSocket-Protocol Header Implementation\n      \u00d7 should include JWT token in Sec-WebSocket-Protocol header (1040 ms)\n      \u00d7 should support multiple protocol negotiation (1022 ms)\n      \u00d7 should handle protocol selection from backend (1005 ms)\n    Fallback Authentication Methods\n      \u00d7 should fallback from header auth to subprotocol auth (1026 ms)\n      \u00d7 should retry connection with different auth method on failure (1010 ms)\n    JWT Token Format Validation\n      \u00d7 should properly format JWT token in subprotocol (1022 ms)\n      \u00d7 should handle token with special characters (1007 ms)\n    Security and Error Handling\n      \u221a should not send token if not authenticated (114 ms)\n      \u00d7 should handle subprotocol negotiation failure (1018 ms)\n      \u00d7 should clean up protocols on disconnect (1006 ms)\n\n  \u25cf WebSocket Subprotocol Authentication (CRITICAL) \u203a Sec-WebSocket-Protocol Header Implementation \u203a should include JWT token in Sec-WebSocket-Protocol header\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"auth-method\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0msubprotocol\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"test-connection\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mTest Connection\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 120 |\u001b[39m       \n     \u001b[90m 121 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 122 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 123 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 124 |\u001b[39m\n     \u001b[90m 125 |\u001b[39m       expect(connectionAttempts)\u001b[33m.\u001b[39mtoHaveLength(\u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-subprotocol-auth.test.tsx:122:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf WebSocket Subprotocol Authentication (CRITICAL) \u203a Sec-WebSocket-Protocol Header Implementation \u203a should support multiple protocol negotiation\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"auth-method\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0msubprotocol\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"test-connection\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mTest Connection\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 151 |\u001b[39m       \n     \u001b[90m 152 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 153 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 154 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 155 |\u001b[39m\n     \u001b[90m 156 |\u001b[39m       \u001b[36mconst\u001b[39m { protocols } \u001b[33m=\u001b[39m connectionAttempts[\u001b[35m0\u001b[39m]\u001b[33m;\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-subprotocol-auth.test.tsx:153:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf WebSocket Subprotocol Authentication (CRITICAL) \u203a Sec-WebSocket-Protocol Header Implementation \u203a should handle protocol selection from backend\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"auth-method\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0msubprotocol\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"test-connection\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mTest Connection\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 177 |\u001b[39m       \n     \u001b[90m 178 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 179 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 180 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 181 |\u001b[39m\n     \u001b[90m 182 |\u001b[39m       \u001b[90m// Simulate successful connection with protocol selection\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-subprotocol-auth.test.tsx:179:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf WebSocket Subprotocol Authentication (CRITICAL) \u203a Fallback Authentication Methods \u203a should fallback from header auth to subprotocol auth\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"auth-method\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0msubprotocol\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"test-connection\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mTest Connection\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 218 |\u001b[39m       \n     \u001b[90m 219 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 220 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 221 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 222 |\u001b[39m\n     \u001b[90m 223 |\u001b[39m       \u001b[90m// First attempt should include both auth methods\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-subprotocol-auth.test.tsx:220:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf WebSocket Subprotocol Authentication (CRITICAL) \u203a Fallback Authentication Methods \u203a should retry connection with different auth method on failure\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"auth-method\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0msubprotocol\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"test-connection\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mTest Connection\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 243 |\u001b[39m       \n     \u001b[90m 244 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 245 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 246 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 247 |\u001b[39m\n     \u001b[90m 248 |\u001b[39m       \u001b[90m// Simulate auth failure\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-subprotocol-auth.test.tsx:245:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf WebSocket Subprotocol Authentication (CRITICAL) \u203a JWT Token Format Validation \u203a should properly format JWT token in subprotocol\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"auth-method\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0msubprotocol\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"test-connection\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mTest Connection\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 289 |\u001b[39m       \n     \u001b[90m 290 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 291 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 292 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 293 |\u001b[39m\n     \u001b[90m 294 |\u001b[39m       \u001b[36mconst\u001b[39m { protocols } \u001b[33m=\u001b[39m connectionAttempts[\u001b[35m0\u001b[39m]\u001b[33m;\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-subprotocol-auth.test.tsx:291:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf WebSocket Subprotocol Authentication (CRITICAL) \u203a JWT Token Format Validation \u203a should handle token with special characters\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"auth-method\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0msubprotocol\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"test-connection\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mTest Connection\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 324 |\u001b[39m       \n     \u001b[90m 325 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 326 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 327 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 328 |\u001b[39m\n     \u001b[90m 329 |\u001b[39m       \u001b[36mconst\u001b[39m { protocols } \u001b[33m=\u001b[39m connectionAttempts[\u001b[35m0\u001b[39m]\u001b[33m;\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-subprotocol-auth.test.tsx:326:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf WebSocket Subprotocol Authentication (CRITICAL) \u203a Security and Error Handling \u203a should handle subprotocol negotiation failure\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"auth-method\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0msubprotocol\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"test-connection\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mTest Connection\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 380 |\u001b[39m       \n     \u001b[90m 381 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 382 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 383 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 384 |\u001b[39m\n     \u001b[90m 385 |\u001b[39m       \u001b[90m// Simulate backend rejecting all proposed protocols\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-subprotocol-auth.test.tsx:382:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf WebSocket Subprotocol Authentication (CRITICAL) \u203a Security and Error Handling \u203a should clean up protocols on disconnect\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"auth-method\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0msubprotocol\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"test-connection\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mTest Connection\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 417 |\u001b[39m       \n     \u001b[90m 418 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 419 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 420 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 421 |\u001b[39m\n     \u001b[90m 422 |\u001b[39m       \u001b[90m// Simulate connection and then disconnection\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-subprotocol-auth.test.tsx:419:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\nFAIL Integration Tests __tests__/integration/critical/websocket-auth-rejection.test.tsx (13.254 s)\n  WebSocket Authentication Rejection (SECURITY)\n    Secure Authentication Verification\n      \u00d7 should use secure authentication methods and avoid query parameters (1084 ms)\n      \u00d7 should handle authentication errors gracefully when they occur (1023 ms)\n      \u00d7 should use consistent secure authentication method (1012 ms)\n    Enhanced Error Handling\n      \u00d7 should properly categorize different types of authentication errors (1009 ms)\n      \u00d7 should provide appropriate error messages for security violations (1009 ms)\n      \u00d7 should not expose sensitive token data in error messages (1011 ms)\n    Migration from Insecure to Secure Authentication\n      \u00d7 should detect when using deprecated query param method (1017 ms)\n      \u00d7 should attempt upgrade to secure authentication (1005 ms)\n      \u00d7 should connect to secure endpoint when available (1012 ms)\n    Backward Compatibility and Fallback\n      \u00d7 should fail gracefully when secure methods are not available (1020 ms)\n      \u00d7 should provide clear upgrade instructions for unsupported clients (1020 ms)\n\n  \u25cf WebSocket Authentication Rejection (SECURITY) \u203a Secure Authentication Verification \u203a should use secure authentication methods and avoid query parameters\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"error-message\"\u001b[39m\n            \u001b[36m/>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"retry-connection\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mRetry Connection\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 153 |\u001b[39m       \n     \u001b[90m 154 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 155 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 156 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 157 |\u001b[39m\n     \u001b[90m 158 |\u001b[39m       expect(connectionAttempts)\u001b[33m.\u001b[39mtoHaveLength(\u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-auth-rejection.test.tsx:155:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf WebSocket Authentication Rejection (SECURITY) \u203a Secure Authentication Verification \u203a should handle authentication errors gracefully when they occur\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"error-message\"\u001b[39m\n            \u001b[36m/>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"retry-connection\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mRetry Connection\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 187 |\u001b[39m       \n     \u001b[90m 188 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 189 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 190 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 191 |\u001b[39m\n     \u001b[90m 192 |\u001b[39m       \u001b[90m// Should properly handle the authentication rejection\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-auth-rejection.test.tsx:189:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf WebSocket Authentication Rejection (SECURITY) \u203a Secure Authentication Verification \u203a should use consistent secure authentication method\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"error-message\"\u001b[39m\n            \u001b[36m/>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"retry-connection\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mRetry Connection\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 218 |\u001b[39m       \n     \u001b[90m 219 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 220 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 221 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 222 |\u001b[39m\n     \u001b[90m 223 |\u001b[39m       \u001b[90m// Trigger retry\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-auth-rejection.test.tsx:220:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf WebSocket Authentication Rejection (SECURITY) \u203a Enhanced Error Handling \u203a should properly categorize different types of authentication errors\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"error-message\"\u001b[39m\n            \u001b[36m/>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"retry-connection\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mRetry Connection\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 258 |\u001b[39m       \n     \u001b[90m 259 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 260 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 261 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 262 |\u001b[39m\n     \u001b[90m 263 |\u001b[39m       \u001b[90m// For a properly formatted token, connection should succeed\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-auth-rejection.test.tsx:260:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf WebSocket Authentication Rejection (SECURITY) \u203a Enhanced Error Handling \u203a should provide appropriate error messages for security violations\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"error-message\"\u001b[39m\n            \u001b[36m/>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"retry-connection\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mRetry Connection\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 296 |\u001b[39m       \n     \u001b[90m 297 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 298 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 299 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 300 |\u001b[39m\n     \u001b[90m 301 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at __tests__/integration/critical/websocket-auth-rejection.test.tsx:298:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf WebSocket Authentication Rejection (SECURITY) \u203a Enhanced Error Handling \u203a should not expose sensitive token data in error messages\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"error-message\"\u001b[39m\n            \u001b[36m/>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"retry-connection\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mRetry Connection\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 323 |\u001b[39m       \n     \u001b[90m 324 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 325 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 326 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 327 |\u001b[39m\n     \u001b[90m 328 |\u001b[39m       \u001b[90m// Since we're using proper auth, there should be no error message\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-auth-rejection.test.tsx:325:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf WebSocket Authentication Rejection (SECURITY) \u203a Migration from Insecure to Secure Authentication \u203a should detect when using deprecated query param method\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"error-message\"\u001b[39m\n            \u001b[36m/>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"retry-connection\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mRetry Connection\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 354 |\u001b[39m       \n     \u001b[90m 355 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 356 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 357 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 358 |\u001b[39m\n     \u001b[90m 359 |\u001b[39m       \u001b[36mconst\u001b[39m { url } \u001b[33m=\u001b[39m connectionAttempts[\u001b[35m0\u001b[39m]\u001b[33m;\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-auth-rejection.test.tsx:356:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf WebSocket Authentication Rejection (SECURITY) \u203a Migration from Insecure to Secure Authentication \u203a should attempt upgrade to secure authentication\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"error-message\"\u001b[39m\n            \u001b[36m/>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"retry-connection\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mRetry Connection\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 384 |\u001b[39m       \n     \u001b[90m 385 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 386 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 387 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 388 |\u001b[39m\n     \u001b[90m 389 |\u001b[39m       \u001b[90m// Should attempt secure authentication after query param rejection\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-auth-rejection.test.tsx:386:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf WebSocket Authentication Rejection (SECURITY) \u203a Migration from Insecure to Secure Authentication \u203a should connect to secure endpoint when available\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"error-message\"\u001b[39m\n            \u001b[36m/>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"retry-connection\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mRetry Connection\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 420 |\u001b[39m       \n     \u001b[90m 421 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 422 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 423 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 424 |\u001b[39m\n     \u001b[90m 425 |\u001b[39m       \u001b[36mconst\u001b[39m { url } \u001b[33m=\u001b[39m connectionAttempts[\u001b[35m0\u001b[39m]\u001b[33m;\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-auth-rejection.test.tsx:422:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf WebSocket Authentication Rejection (SECURITY) \u203a Backward Compatibility and Fallback \u203a should fail gracefully when secure methods are not available\n\n    expect(received).toContain(expected) // indexOf\n\n    Expected substring: \"not supported\"\n    Received string:    \"\"\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"error-message\"\u001b[39m\n            \u001b[36m/>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"retry-connection\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mRetry Connection\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 459 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n     \u001b[90m 460 |\u001b[39m         \u001b[36mconst\u001b[39m errorMessage \u001b[33m=\u001b[39m screen\u001b[33m.\u001b[39mgetByTestId(\u001b[32m'error-message'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 461 |\u001b[39m         expect(errorMessage\u001b[33m.\u001b[39mtextContent)\u001b[33m.\u001b[39mtoContain(\u001b[32m'not supported'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 462 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 463 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 464 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-auth-rejection.test.tsx:461:42\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf WebSocket Authentication Rejection (SECURITY) \u203a Backward Compatibility and Fallback \u203a should provide clear upgrade instructions for unsupported clients\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"error-message\"\u001b[39m\n            \u001b[36m/>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"retry-connection\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mRetry Connection\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 477 |\u001b[39m       \n     \u001b[90m 478 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 479 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 480 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 481 |\u001b[39m\n     \u001b[90m 482 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at __tests__/integration/critical/websocket-auth-rejection.test.tsx:479:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\nFAIL Integration Tests __tests__/integration/critical/websocket-token-refresh.test.tsx (13.472 s)\n  WebSocket Token Refresh Management (CRITICAL)\n    Token Expiry Detection and Refresh\n      \u00d7 should detect when token is about to expire (1062 ms)\n      \u00d7 should refresh token before WebSocket connection fails (1013 ms)\n      \u00d7 should handle token refresh during active connection (1008 ms)\n    Reconnection with New Token\n      \u00d7 should reconnect with new token after refresh (1012 ms)\n      \u00d7 should not reuse expired tokens for reconnection (1008 ms)\n      \u00d7 should handle refresh failure gracefully (1023 ms)\n    Message Queue Management During Refresh\n      \u00d7 should queue messages during token refresh (1008 ms)\n      \u00d7 should maintain message order during reconnection (1010 ms)\n      \u00d7 should handle message timeouts during refresh (1007 ms)\n    Token Lifecycle Integration\n      \u00d7 should synchronize token state across WebSocket and auth contexts (1021 ms)\n      \u00d7 should clean up old connections when token changes (1014 ms)\n\n  \u25cf WebSocket Token Refresh Management (CRITICAL) \u203a Token Expiry Detection and Refresh \u203a should detect when token is about to expire\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"refresh-count\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0m0\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"last-token\"\u001b[39m\n            \u001b[36m/>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"trigger-refresh\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mTrigger Token Refresh\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"send-message\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mSend Message\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 158 |\u001b[39m       \n     \u001b[90m 159 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 160 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 161 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 162 |\u001b[39m\n     \u001b[90m 163 |\u001b[39m       \u001b[90m// Frontend should detect impending expiry and trigger refresh\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-token-refresh.test.tsx:160:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf WebSocket Token Refresh Management (CRITICAL) \u203a Token Expiry Detection and Refresh \u203a should refresh token before WebSocket connection fails\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"refresh-count\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0m0\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"last-token\"\u001b[39m\n            \u001b[36m/>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"trigger-refresh\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mTrigger Token Refresh\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"send-message\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mSend Message\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 190 |\u001b[39m       \n     \u001b[90m 191 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 192 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 193 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 194 |\u001b[39m\n     \u001b[90m 195 |\u001b[39m       \u001b[90m// Simulate connection established\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-token-refresh.test.tsx:192:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf WebSocket Token Refresh Management (CRITICAL) \u203a Token Expiry Detection and Refresh \u203a should handle token refresh during active connection\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"refresh-count\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0m0\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"last-token\"\u001b[39m\n            \u001b[36m/>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"trigger-refresh\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mTrigger Token Refresh\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"send-message\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mSend Message\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 226 |\u001b[39m       \n     \u001b[90m 227 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 228 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 229 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 230 |\u001b[39m\n     \u001b[90m 231 |\u001b[39m       \u001b[90m// Establish connection\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-token-refresh.test.tsx:228:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf WebSocket Token Refresh Management (CRITICAL) \u203a Reconnection with New Token \u203a should reconnect with new token after refresh\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"refresh-count\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0m0\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"last-token\"\u001b[39m\n            \u001b[36m/>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"trigger-refresh\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mTrigger Token Refresh\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"send-message\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mSend Message\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 270 |\u001b[39m       \n     \u001b[90m 271 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 272 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 273 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 274 |\u001b[39m\n     \u001b[90m 275 |\u001b[39m       \u001b[90m// Simulate connection failure due to token expiry\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-token-refresh.test.tsx:272:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf WebSocket Token Refresh Management (CRITICAL) \u203a Reconnection with New Token \u203a should not reuse expired tokens for reconnection\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"refresh-count\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0m0\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"last-token\"\u001b[39m\n            \u001b[36m/>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"trigger-refresh\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mTrigger Token Refresh\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"send-message\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mSend Message\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 320 |\u001b[39m       \n     \u001b[90m 321 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 322 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 323 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 324 |\u001b[39m\n     \u001b[90m 325 |\u001b[39m       \u001b[90m// Simulate auth failure\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-token-refresh.test.tsx:322:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf WebSocket Token Refresh Management (CRITICAL) \u203a Reconnection with New Token \u203a should handle refresh failure gracefully\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"refresh-count\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0m0\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"last-token\"\u001b[39m\n            \u001b[36m/>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"trigger-refresh\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mTrigger Token Refresh\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"send-message\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mSend Message\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 358 |\u001b[39m       \n     \u001b[90m 359 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 360 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 361 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 362 |\u001b[39m\n     \u001b[90m 363 |\u001b[39m       \u001b[90m// Simulate auth failure\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-token-refresh.test.tsx:360:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf WebSocket Token Refresh Management (CRITICAL) \u203a Message Queue Management During Refresh \u203a should queue messages during token refresh\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"refresh-count\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0m0\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"last-token\"\u001b[39m\n            \u001b[36m/>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"trigger-refresh\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mTrigger Token Refresh\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"send-message\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mSend Message\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 401 |\u001b[39m       \n     \u001b[90m 402 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 403 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 404 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 405 |\u001b[39m\n     \u001b[90m 406 |\u001b[39m       \u001b[90m// Establish connection\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-token-refresh.test.tsx:403:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf WebSocket Token Refresh Management (CRITICAL) \u203a Message Queue Management During Refresh \u203a should maintain message order during reconnection\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"refresh-count\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0m0\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"last-token\"\u001b[39m\n            \u001b[36m/>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"trigger-refresh\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mTrigger Token Refresh\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"send-message\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mSend Message\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 451 |\u001b[39m       \n     \u001b[90m 452 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 453 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 454 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 455 |\u001b[39m\n     \u001b[90m 456 |\u001b[39m       \u001b[90m// Establish connection\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-token-refresh.test.tsx:453:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf WebSocket Token Refresh Management (CRITICAL) \u203a Message Queue Management During Refresh \u203a should handle message timeouts during refresh\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"refresh-count\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0m0\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"last-token\"\u001b[39m\n            \u001b[36m/>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"trigger-refresh\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mTrigger Token Refresh\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"send-message\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mSend Message\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 493 |\u001b[39m       \n     \u001b[90m 494 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 495 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 496 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 497 |\u001b[39m\n     \u001b[90m 498 |\u001b[39m       \u001b[90m// Start with open connection\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-token-refresh.test.tsx:495:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf WebSocket Token Refresh Management (CRITICAL) \u203a Token Lifecycle Integration \u203a should synchronize token state across WebSocket and auth contexts\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"refresh-count\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0m0\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"last-token\"\u001b[39m\n            \u001b[36m/>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"trigger-refresh\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mTrigger Token Refresh\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"send-message\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mSend Message\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 533 |\u001b[39m       \n     \u001b[90m 534 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 535 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 536 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 537 |\u001b[39m\n     \u001b[90m 538 |\u001b[39m       \u001b[90m// Update token in auth context\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-token-refresh.test.tsx:535:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf WebSocket Token Refresh Management (CRITICAL) \u203a Token Lifecycle Integration \u203a should clean up old connections when token changes\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"refresh-count\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0m0\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"last-token\"\u001b[39m\n            \u001b[36m/>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"trigger-refresh\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mTrigger Token Refresh\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"send-message\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mSend Message\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 565 |\u001b[39m       \n     \u001b[90m 566 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 567 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 568 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 569 |\u001b[39m\n     \u001b[90m 570 |\u001b[39m       \u001b[90m// Establish connection\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-token-refresh.test.tsx:567:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\nFAIL Integration Tests __tests__/integration/collaboration-state.test.tsx (5.356 s)\n  Collaboration Features\n    \u221a should share threads with team members (40 ms)\n    \u00d7 should sync collaborative edits in real-time (1013 ms)\n    \u00d7 should handle presence awareness (1006 ms)\n  Jupyter Notebook Support\n    \u221a should execute notebook cells (29 ms)\n    \u221a should render notebook visualizations (35 ms)\n  State Persistence and Recovery\n    \u00d7 should persist application state across sessions (1018 ms)\n    \u00d7 should recover from corrupted state gracefully (1019 ms)\n    \u00d7 should migrate state between versions (1011 ms)\n\n  \u25cf Collaboration Features \u203a should sync collaborative edits in real-time\n\n    expect(element).toHaveTextContent()\n\n    Expected element to have text content:\n      other_user: Collaborative change\n    Received:\n\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<button>\u001b[39m\n              \u001b[0mSend Edit\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"edits\"\u001b[39m\n            \u001b[36m/>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 269 |\u001b[39m     \n     \u001b[90m 270 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 271 |\u001b[39m       expect(getByTestId(\u001b[32m'edits'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'other_user: Collaborative change'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 272 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 273 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 274 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/collaboration-state.test.tsx:271:36\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Collaboration Features \u203a should handle presence awareness\n\n    expect(element).toHaveTextContent()\n\n    Expected element to have text content:\n      Active users: 2\n    Received:\n      Active users: 0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"presence\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<div>\u001b[39m\n              \u001b[0mActive users: \u001b[0m\n              \u001b[0m0\u001b[0m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 331 |\u001b[39m     \n     \u001b[90m 332 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 333 |\u001b[39m       expect(getByTestId(\u001b[32m'presence'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'Active users: 2'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 334 |\u001b[39m       expect(getByTestId(\u001b[32m'presence'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'Alice - typing'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 335 |\u001b[39m       expect(getByTestId(\u001b[32m'presence'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'Bob - viewing'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 336 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at __tests__/integration/collaboration-state.test.tsx:333:39\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf State Persistence and Recovery \u203a should persist application state across sessions\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"app_state\", \"{\\\"version\\\":2,\\\"timestamp\\\":1755824058763,\\\"data\\\":{\\\"user_preferences\\\":{\\\"theme\\\":\\\"dark\\\",\\\"language\\\":\\\"en\\\"},\\\"session_data\\\":{\\\"last_thread\\\":\\\"thread-123\\\"},\\\"cached_results\\\":{\\\"optimization_1\\\":{\\\"result\\\":\\\"cached\\\"}}}}\"\n\n    Number of calls: 0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<button>\u001b[39m\n              \u001b[0mSave State\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button>\u001b[39m\n              \u001b[0mLoad State\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"state\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div>\u001b[39m\n                \u001b[0mTheme: \u001b[0m\n                \u001b[0mdark\u001b[0m\n              \u001b[36m</div>\u001b[39m\n              \u001b[36m<div>\u001b[39m\n                \u001b[0mLast thread: \u001b[0m\n                \u001b[0mthread-123\u001b[0m\n              \u001b[36m</div>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 490 |\u001b[39m     \n     \u001b[90m 491 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 492 |\u001b[39m       expect(localStorageMock\u001b[33m.\u001b[39msetItem)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\n     \u001b[90m     |\u001b[39m                                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 493 |\u001b[39m         \u001b[32m'app_state'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 494 |\u001b[39m         \u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mstringify(mockPersistedState)\n     \u001b[90m 495 |\u001b[39m       )\u001b[33m;\u001b[39m\u001b[0m\n\n      at __tests__/integration/collaboration-state.test.tsx:492:40\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf State Persistence and Recovery \u203a should recover from corrupted state gracefully\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"app_state\"\n\n    Number of calls: 0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<button>\u001b[39m\n              \u001b[0mLoad State\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"error\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mState corrupted, using defaults\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"state\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mState loaded\u001b[0m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 553 |\u001b[39m       expect(getByTestId(\u001b[32m'error'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'State corrupted, using defaults'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 554 |\u001b[39m       expect(getByTestId(\u001b[32m'state'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'State loaded'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 555 |\u001b[39m       expect(localStorageMock\u001b[33m.\u001b[39mremoveItem)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'app_state'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 556 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 557 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 558 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/collaboration-state.test.tsx:555:43\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf State Persistence and Recovery \u203a should migrate state between versions\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<button>\u001b[39m\n              \u001b[0mMigrate State\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"migrated\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mState migrated to v2\u001b[0m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 599 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n     \u001b[90m 600 |\u001b[39m       expect(getByTestId(\u001b[32m'migrated'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'State migrated to v2'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 601 |\u001b[39m       expect(localStorageMock\u001b[33m.\u001b[39msetItem)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 602 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 603 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 604 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at __tests__/integration/collaboration-state.test.tsx:601:40\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\nFAIL Integration Tests __tests__/integration/session-management.test.tsx (5.895 s)\n  Session Management Integration\n    Session Persistence\n      \u00d7 should persist session across page reloads (1019 ms)\n      \u00d7 should restore user state from localStorage (9 ms)\n      \u00d7 should handle corrupted session data gracefully (1008 ms)\n    Token Refresh\n      \u00d7 should refresh tokens before expiration (1009 ms)\n      \u00d7 should handle refresh failures (1007 ms)\n      \u00d7 should queue operations during refresh (1080 ms)\n    Multi-Tab Synchronization\n      \u25cb skipped should sync login across tabs\n      \u25cb skipped should sync logout across tabs\n      \u25cb skipped should handle conflicting session states\n    Session Timeout\n      \u00d7 should detect session timeout (177 ms)\n      \u221a should provide timeout warnings (92 ms)\n      \u00d7 should handle session extension (94 ms)\n\n  \u25cf Session Management Integration \u203a Session Persistence \u203a should persist session across page reloads\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"jwt_token\"\n\n    Number of calls: 0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"session-status\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0munauthenticated\u001b[0m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 317 |\u001b[39m   \u001b[36masync\u001b[39m \u001b[36mfunction\u001b[39m verifySessionRestored() {\n     \u001b[90m 318 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 319 |\u001b[39m       expect(mockLocalStorage\u001b[33m.\u001b[39mgetItem)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'jwt_token'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 320 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 321 |\u001b[39m   }\n     \u001b[90m 322 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/session-management.test.tsx:319:40\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Session Management Integration \u203a Session Persistence \u203a should restore user state from localStorage\n\n    expect(received).toEqual(expected) // deep equality\n\n    Expected: {\"email\": \"test@example.com\", \"id\": \"test-user-id\", \"name\": \"Test User\", \"sessionId\": \"session-123\"}\n    Received: null\n\n    \u001b[0m \u001b[90m 337 |\u001b[39m\n     \u001b[90m 338 |\u001b[39m   \u001b[36mfunction\u001b[39m expectUserDataRestored() {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 339 |\u001b[39m     expect(useAuthStore()\u001b[33m.\u001b[39muser)\u001b[33m.\u001b[39mtoEqual(sessionTestData\u001b[33m.\u001b[39msessionUser)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 340 |\u001b[39m   }\n     \u001b[90m 341 |\u001b[39m\n     \u001b[90m 342 |\u001b[39m   \u001b[36masync\u001b[39m \u001b[36mfunction\u001b[39m seedCorruptedSessionData() {\u001b[0m\n\n      at expectUserDataRestored (__tests__/integration/session-management.test.tsx:339:33)\n      at Object.<anonymous> (__tests__/integration/session-management.test.tsx:125:7)\n\n  \u25cf Session Management Integration \u203a Session Persistence \u203a should handle corrupted session data gracefully\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"session-status\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0munauthenticated\u001b[0m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 347 |\u001b[39m   \u001b[36masync\u001b[39m \u001b[36mfunction\u001b[39m verifyGracefulDegradation() {\n     \u001b[90m 348 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 349 |\u001b[39m       expect(useAuthStore()\u001b[33m.\u001b[39mlogout)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 350 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 351 |\u001b[39m   }\n     \u001b[90m 352 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/session-management.test.tsx:349:37\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Session Management Integration \u203a Token Refresh \u203a should refresh tokens before expiration\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"jwt_token\", StringContaining \"refreshed\"\n    Received: \"jwt_token\", \"expired.jwt.token.456\"\n\n    Number of calls: 1\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"refresh-status\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0midle\u001b[0m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 385 |\u001b[39m   \u001b[36masync\u001b[39m \u001b[36mfunction\u001b[39m waitForTokenRefresh() {\n     \u001b[90m 386 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 387 |\u001b[39m       expect(mockLocalStorage\u001b[33m.\u001b[39msetItem)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\n     \u001b[90m     |\u001b[39m                                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 388 |\u001b[39m         \u001b[32m'jwt_token'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 389 |\u001b[39m         expect\u001b[33m.\u001b[39mstringContaining(\u001b[32m'refreshed'\u001b[39m)\n     \u001b[90m 390 |\u001b[39m       )\u001b[33m;\u001b[39m\u001b[0m\n\n      at __tests__/integration/session-management.test.tsx:387:40\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Session Management Integration \u203a Token Refresh \u203a should handle refresh failures\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"refresh-status\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0midle\u001b[0m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 407 |\u001b[39m   \u001b[36masync\u001b[39m \u001b[36mfunction\u001b[39m waitForRefreshAttempt() {\n     \u001b[90m 408 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 409 |\u001b[39m       expect(global\u001b[33m.\u001b[39mfetch)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 410 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 411 |\u001b[39m   }\n     \u001b[90m 412 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/session-management.test.tsx:409:28\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Session Management Integration \u203a Token Refresh \u203a should queue operations during refresh\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: \"refreshed.jwt.token.789\"\n    Received: \"expired.jwt.token.456\"\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"operations\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<div>\u001b[39m\n              \u001b[0mop1\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div>\u001b[39m\n              \u001b[0mop2\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div>\u001b[39m\n              \u001b[0mop3\u001b[0m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 449 |\u001b[39m   \u001b[36masync\u001b[39m \u001b[36mfunction\u001b[39m waitForRefreshCompletion() {\n     \u001b[90m 450 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 451 |\u001b[39m       expect(mockLocalStorage\u001b[33m.\u001b[39mgetItem(\u001b[32m'jwt_token'\u001b[39m))\u001b[33m.\u001b[39mtoBe(sessionTestData\u001b[33m.\u001b[39mrefreshedToken)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 452 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 453 |\u001b[39m   }\n     \u001b[90m 454 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/session-management.test.tsx:451:53\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Session Management Integration \u203a Session Timeout \u203a should detect session timeout\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    \u001b[0m \u001b[90m 583 |\u001b[39m\n     \u001b[90m 584 |\u001b[39m   \u001b[36mfunction\u001b[39m expectSessionCleanup() {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 585 |\u001b[39m     expect(useAuthStore()\u001b[33m.\u001b[39mlogout)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 586 |\u001b[39m   }\n     \u001b[90m 587 |\u001b[39m\n     \u001b[90m 588 |\u001b[39m   \u001b[36mfunction\u001b[39m createTimeoutWarningComponent() {\u001b[0m\n\n      at expectSessionCleanup (__tests__/integration/session-management.test.tsx:585:35)\n      at Object.<anonymous> (__tests__/integration/session-management.test.tsx:215:7)\n\n  \u25cf Session Management Integration \u203a Session Timeout \u203a should handle session extension\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 659 |\u001b[39m\n     \u001b[90m 660 |\u001b[39m   \u001b[36mfunction\u001b[39m expectContinuedSession() {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 661 |\u001b[39m     expect(useAuthStore()\u001b[33m.\u001b[39misAuthenticated)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 662 |\u001b[39m   }\n     \u001b[90m 663 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at expectContinuedSession (__tests__/integration/session-management.test.tsx:661:44)\n      at Object.<anonymous> (__tests__/integration/session-management.test.tsx:237:7)\n\nFAIL Integration Tests __tests__/auth/context.dev-mode.test.tsx (5.197 s)\n  AuthContext - Development Mode\n    \u00d7 should auto-login in development mode when not logged out (3019 ms)\n    \u00d7 should skip auto-login if user has logged out in dev mode (1011 ms)\n    \u00d7 should handle dev login failure gracefully (1002 ms)\n\n  \u25cf AuthContext - Development Mode \u203a should auto-login in development mode when not logged out\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: {\"authorized_javascript_origins\": [\"http://localhost:3000\"], \"authorized_redirect_uris\": [\"http://localhost:3000/auth/callback\"], \"development_mode\": true, \"endpoints\": {\"callback\": \"http://localhost:8081/auth/callback\", \"dev_login\": \"http://localhost:8081/auth/dev/login\", \"login\": \"http://localhost:8081/auth/login\", \"logout\": \"http://localhost:8081/auth/logout\", \"token\": \"http://localhost:8081/auth/token\", \"user\": \"http://localhost:8081/auth/me\"}, \"google_client_id\": \"mock-google-client-id\"}\n\n    Number of calls: 0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[0mTest Content\u001b[0m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 61 |\u001b[39m   \u001b[36mconst\u001b[39m expectDevLogin \u001b[33m=\u001b[39m \u001b[36masync\u001b[39m (devConfig\u001b[33m:\u001b[39m any) \u001b[33m=>\u001b[39m {\n     \u001b[90m 62 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 63 |\u001b[39m       expect(authService\u001b[33m.\u001b[39mhandleDevLogin)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(devConfig)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 64 |\u001b[39m     }\u001b[33m,\u001b[39m { timeout\u001b[33m:\u001b[39m \u001b[35m3000\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 65 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 66 |\u001b[39m\u001b[0m\n\n      at timeout (__tests__/auth/context.dev-mode.test.tsx:63:42)\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf AuthContext - Development Mode \u203a should skip auto-login if user has logged out in dev mode\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"Skipping auto dev login - user has logged out\", {\"action\": \"auto_dev_login_skipped\", \"component\": \"AuthContext\"}\n\n    Number of calls: 0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[0mTest Content\u001b[0m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 88 |\u001b[39m   \u001b[36mconst\u001b[39m expectSkipMessage \u001b[33m=\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 89 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 90 |\u001b[39m       expect(logger\u001b[33m.\u001b[39minfo)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\n     \u001b[90m    |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 91 |\u001b[39m         \u001b[32m'Skipping auto dev login - user has logged out'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 92 |\u001b[39m         {\n     \u001b[90m 93 |\u001b[39m           component\u001b[33m:\u001b[39m \u001b[32m'AuthContext'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at __tests__/auth/context.dev-mode.test.tsx:90:27\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf AuthContext - Development Mode \u203a should handle dev login failure gracefully\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[0mTest Content\u001b[0m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 113 |\u001b[39m   \u001b[36mconst\u001b[39m expectNoAuthUpdate \u001b[33m=\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 114 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 115 |\u001b[39m       expect(authService\u001b[33m.\u001b[39mhandleDevLogin)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 116 |\u001b[39m       expect(jwtDecode)\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m 117 |\u001b[39m       expect(mockAuthStore\u001b[33m.\u001b[39mlogin)\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m 118 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at __tests__/auth/context.dev-mode.test.tsx:115:42\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\nFAIL Integration Tests __tests__/integration/logout-flow-core.test.tsx (17.112 s)\n  Logout Flow Core Tests\n    Logout Button Click\n      \u00d7 should trigger logout when button is clicked (1246 ms)\n      \u00d7 should call auth store logout (1095 ms)\n      \u00d7 should redirect to login page after logout (1076 ms)\n    API Logout Call\n      \u00d7 should call auth service logout API (1076 ms)\n      \u00d7 should complete logout within 500ms (1091 ms)\n      \u00d7 should handle logout errors gracefully (1086 ms)\n    Development Mode Logout\n      \u00d7 should set dev logout flag in development mode (1081 ms)\n      \u00d7 should still perform standard logout in dev mode (1068 ms)\n    Error Handling During Logout\n      \u00d7 should handle auth service errors during logout (1056 ms)\n      \u00d7 should complete logout even with partial failures (1066 ms)\n      \u00d7 should use replace instead of push for security (1087 ms)\n    Logout Flow Security\n      \u00d7 should ensure no sensitive data remains after logout (1079 ms)\n      \u00d7 should reset authentication status (1089 ms)\n      \u00d7 should ensure clean state for next login (1077 ms)\n\n  \u25cf Logout Flow Core Tests \u203a Logout Button Click \u203a should trigger logout when button is clicked\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: {\"development_mode\": false, \"endpoints\": {\"callback\": \"http://localhost:8081/auth/callback\", \"login\": \"http://localhost:8081/auth/login\", \"logout\": \"http://localhost:8081/auth/logout\", \"token\": \"http://localhost:8081/auth/token\", \"user\": \"http://localhost:8081/auth/me\"}, \"google_client_id\": \"test-client-id\"}\n\n    Number of calls: 0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mLogout\u001b[0m\n          \u001b[36m</button>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 112 |\u001b[39m       \u001b[36mawait\u001b[39m clickLogoutButton()\u001b[33m;\u001b[39m\n     \u001b[90m 113 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 114 |\u001b[39m         expect(authService\u001b[33m.\u001b[39mhandleLogout)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(createMockAuthConfig())\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 115 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 116 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 117 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/logout-flow-core.test.tsx:114:42\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Flow Core Tests \u203a Logout Button Click \u203a should call auth store logout\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mLogout\u001b[0m\n          \u001b[36m</button>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 119 |\u001b[39m       \u001b[36mawait\u001b[39m clickLogoutButton()\u001b[33m;\u001b[39m\n     \u001b[90m 120 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 121 |\u001b[39m         expect(mockAuthStore\u001b[33m.\u001b[39mlogout)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 122 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 123 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 124 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/logout-flow-core.test.tsx:121:38\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Flow Core Tests \u203a Logout Button Click \u203a should redirect to login page after logout\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"/login\"\n\n    Number of calls: 0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mLogout\u001b[0m\n          \u001b[36m</button>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 126 |\u001b[39m       \u001b[36mawait\u001b[39m clickLogoutButton()\u001b[33m;\u001b[39m\n     \u001b[90m 127 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 128 |\u001b[39m         expect(mockReplace)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'/login'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 129 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 130 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 131 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n\n      at __tests__/integration/logout-flow-core.test.tsx:128:29\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Flow Core Tests \u203a API Logout Call \u203a should call auth service logout API\n\n    expect(jest.fn()).toHaveBeenCalledTimes(expected)\n\n    Expected number of calls: 1\n    Received number of calls: 0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mLogout\u001b[0m\n          \u001b[36m</button>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 144 |\u001b[39m       \u001b[36mawait\u001b[39m performLogout()\u001b[33m;\u001b[39m\n     \u001b[90m 145 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 146 |\u001b[39m         expect(authService\u001b[33m.\u001b[39mhandleLogout)\u001b[33m.\u001b[39mtoHaveBeenCalledTimes(\u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 147 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 148 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 149 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/logout-flow-core.test.tsx:146:42\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Flow Core Tests \u203a API Logout Call \u203a should complete logout within 500ms\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mLogout\u001b[0m\n          \u001b[36m</button>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 151 |\u001b[39m       \u001b[36mconst\u001b[39m { startTime } \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m performLogout()\u001b[33m;\u001b[39m\n     \u001b[90m 152 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 153 |\u001b[39m         expect(authService\u001b[33m.\u001b[39mhandleLogout)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 154 |\u001b[39m         \u001b[36mconst\u001b[39m endTime \u001b[33m=\u001b[39m performance\u001b[33m.\u001b[39mnow()\u001b[33m;\u001b[39m\n     \u001b[90m 155 |\u001b[39m         expect(endTime \u001b[33m-\u001b[39m startTime)\u001b[33m.\u001b[39mtoBeLessThan(\u001b[35m500\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 156 |\u001b[39m       })\u001b[33m;\u001b[39m\u001b[0m\n\n      at __tests__/integration/logout-flow-core.test.tsx:153:42\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Flow Core Tests \u203a API Logout Call \u203a should handle logout errors gracefully\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mLogout\u001b[0m\n          \u001b[36m</button>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 161 |\u001b[39m       \u001b[36mawait\u001b[39m performLogout()\u001b[33m;\u001b[39m\n     \u001b[90m 162 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 163 |\u001b[39m         expect(mockAuthStore\u001b[33m.\u001b[39mlogout)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 164 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 165 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 166 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n\n      at __tests__/integration/logout-flow-core.test.tsx:163:38\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Flow Core Tests \u203a Development Mode Logout \u203a should set dev logout flag in development mode\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mLogout\u001b[0m\n          \u001b[36m</button>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 184 |\u001b[39m       \u001b[36mawait\u001b[39m testDevModeLogout()\u001b[33m;\u001b[39m\n     \u001b[90m 185 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 186 |\u001b[39m         expect(authService\u001b[33m.\u001b[39msetDevLogoutFlag)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 187 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 188 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 189 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/logout-flow-core.test.tsx:186:46\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Flow Core Tests \u203a Development Mode Logout \u203a should still perform standard logout in dev mode\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mLogout\u001b[0m\n          \u001b[36m</button>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 191 |\u001b[39m       \u001b[36mawait\u001b[39m testDevModeLogout()\u001b[33m;\u001b[39m\n     \u001b[90m 192 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 193 |\u001b[39m         expect(authService\u001b[33m.\u001b[39mhandleLogout)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 194 |\u001b[39m         expect(mockAuthStore\u001b[33m.\u001b[39mlogout)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m 195 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 196 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at __tests__/integration/logout-flow-core.test.tsx:193:42\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Flow Core Tests \u203a Error Handling During Logout \u203a should handle auth service errors during logout\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mLogout\u001b[0m\n          \u001b[36m</button>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 209 |\u001b[39m       \u001b[36mawait\u001b[39m testErrorHandling()\u001b[33m;\u001b[39m\n     \u001b[90m 210 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 211 |\u001b[39m         expect(mockAuthStore\u001b[33m.\u001b[39mlogout)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 212 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 213 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 214 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/logout-flow-core.test.tsx:211:38\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Flow Core Tests \u203a Error Handling During Logout \u203a should complete logout even with partial failures\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mLogout\u001b[0m\n          \u001b[36m</button>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 217 |\u001b[39m       \u001b[36mawait\u001b[39m testErrorHandling()\u001b[33m;\u001b[39m\n     \u001b[90m 218 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 219 |\u001b[39m         expect(mockAuthStore\u001b[33m.\u001b[39mlogout)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 220 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 221 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 222 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/logout-flow-core.test.tsx:219:38\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Flow Core Tests \u203a Error Handling During Logout \u203a should use replace instead of push for security\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mLogout\u001b[0m\n          \u001b[36m</button>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 224 |\u001b[39m       \u001b[36mawait\u001b[39m testErrorHandling()\u001b[33m;\u001b[39m\n     \u001b[90m 225 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 226 |\u001b[39m         expect(mockReplace)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 227 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 228 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 229 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n\n      at __tests__/integration/logout-flow-core.test.tsx:226:29\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Flow Core Tests \u203a Logout Flow Security \u203a should ensure no sensitive data remains after logout\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mLogout\u001b[0m\n          \u001b[36m</button>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 240 |\u001b[39m       \u001b[36mawait\u001b[39m verifySecurityMeasures()\u001b[33m;\u001b[39m\n     \u001b[90m 241 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 242 |\u001b[39m         expect(mockAuthStore\u001b[33m.\u001b[39mlogout)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 243 |\u001b[39m         expect(mockAuthStore\u001b[33m.\u001b[39muser)\u001b[33m.\u001b[39mtoBeNull()\u001b[33m;\u001b[39m\n     \u001b[90m 244 |\u001b[39m         expect(mockAuthStore\u001b[33m.\u001b[39mtoken)\u001b[33m.\u001b[39mtoBeNull()\u001b[33m;\u001b[39m\n     \u001b[90m 245 |\u001b[39m       })\u001b[33m;\u001b[39m\u001b[0m\n\n      at __tests__/integration/logout-flow-core.test.tsx:242:38\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Flow Core Tests \u203a Logout Flow Security \u203a should reset authentication status\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: false\n    Received: true\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mLogout\u001b[0m\n          \u001b[36m</button>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 249 |\u001b[39m       \u001b[36mawait\u001b[39m verifySecurityMeasures()\u001b[33m;\u001b[39m\n     \u001b[90m 250 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 251 |\u001b[39m         expect(mockAuthStore\u001b[33m.\u001b[39misAuthenticated)\u001b[33m.\u001b[39mtoBe(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 252 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 253 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 254 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/logout-flow-core.test.tsx:251:47\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Flow Core Tests \u203a Logout Flow Security \u203a should ensure clean state for next login\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mLogout\u001b[0m\n          \u001b[36m</button>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 256 |\u001b[39m       \u001b[36mawait\u001b[39m verifySecurityMeasures()\u001b[33m;\u001b[39m\n     \u001b[90m 257 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 258 |\u001b[39m         expect(mockAuthStore\u001b[33m.\u001b[39mlogout)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 259 |\u001b[39m         expect(authService\u001b[33m.\u001b[39mhandleLogout)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m 260 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 261 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at __tests__/integration/logout-flow-core.test.tsx:258:38\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\nFAIL Integration Tests __tests__/integration/auth-complete.test.tsx (7.309 s)\n  Complete Authentication Flow Integration\n    OAuth Login Flow\n      \u00d7 should complete OAuth login with token validation (1026 ms)\n      \u221a should handle OAuth callback with state validation (5 ms)\n      \u00d7 should reject invalid OAuth state (1015 ms)\n    Development Mode Authentication\n      \u00d7 should auto-login in development mode (2014 ms)\n      \u00d7 should respect dev logout flag (1013 ms)\n    Logout Flow\n      \u00d7 should complete logout with full cleanup (1021 ms)\n      \u00d7 should handle logout during active session (15 ms)\n    Token Management\n      \u00d7 should validate token format and claims (15 ms)\n      \u00d7 should handle malformed tokens (15 ms)\n      \u00d7 should handle expired tokens (1021 ms)\n\n  \u25cf Complete Authentication Flow Integration \u203a OAuth Login Flow \u203a should complete OAuth login with token validation\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: {\"authorized_javascript_origins\": [\"http://localhost:3000\"], \"authorized_redirect_uris\": [\"http://localhost:3000/auth/callback\"], \"development_mode\": false, \"endpoints\": {\"callback\": \"/auth/callback\", \"login\": \"/auth/login\", \"logout\": \"/auth/logout\", \"token\": \"/auth/token\", \"user\": \"/auth/me\"}, \"google_client_id\": \"test-google-client-id\"}\n\n    Number of calls: 0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"login-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogin\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogout\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"auth-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mAuthenticated\u001b[0m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 332 |\u001b[39m   \u001b[36masync\u001b[39m \u001b[36mfunction\u001b[39m verifyOAuthLoginSuccess(mockLogin\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m) {\n     \u001b[90m 333 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 334 |\u001b[39m       expect(mockAuthService\u001b[33m.\u001b[39mhandleLogin)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(mockAuthConfig)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 335 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 336 |\u001b[39m   }\n     \u001b[90m 337 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/auth-complete.test.tsx:334:43\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Complete Authentication Flow Integration \u203a OAuth Login Flow \u203a should reject invalid OAuth state\n\n    expect(element).toHaveTextContent()\n\n    Expected element to have text content:\n      Not authenticated\n    Received:\n      Authenticated\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"login-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogin\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogout\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"auth-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mAuthenticated\u001b[0m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 383 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n     \u001b[90m 384 |\u001b[39m       \u001b[36mconst\u001b[39m authStatus \u001b[33m=\u001b[39m screen\u001b[33m.\u001b[39mgetByTestId(\u001b[32m'auth-status'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 385 |\u001b[39m       expect(authStatus)\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'Not authenticated'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 386 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 387 |\u001b[39m   }\n     \u001b[90m 388 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/auth-complete.test.tsx:385:26\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Complete Authentication Flow Integration \u203a Development Mode Authentication \u203a should auto-login in development mode\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"login-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogin\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogout\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"auth-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mAuthenticated\u001b[0m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 410 |\u001b[39m   \u001b[36masync\u001b[39m \u001b[36mfunction\u001b[39m waitForDevAutoLogin() {\n     \u001b[90m 411 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 412 |\u001b[39m       expect(mockAuthService\u001b[33m.\u001b[39mhandleDevLogin)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 413 |\u001b[39m     }\u001b[33m,\u001b[39m { timeout\u001b[33m:\u001b[39m \u001b[35m2000\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 414 |\u001b[39m   }\n     \u001b[90m 415 |\u001b[39m\u001b[0m\n\n      at timeout (__tests__/integration/auth-complete.test.tsx:412:46)\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Complete Authentication Flow Integration \u203a Development Mode Authentication \u203a should respect dev logout flag\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"login-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogin\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogout\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"auth-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mAuthenticated\u001b[0m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 440 |\u001b[39m   \u001b[36masync\u001b[39m \u001b[36mfunction\u001b[39m waitForAuthInitialization() {\n     \u001b[90m 441 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 442 |\u001b[39m       expect(mockAuthService\u001b[33m.\u001b[39mgetAuthConfig)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 443 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 444 |\u001b[39m   }\n     \u001b[90m 445 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/auth-complete.test.tsx:442:45\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Complete Authentication Flow Integration \u203a Logout Flow \u203a should complete logout with full cleanup\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: {\"authorized_javascript_origins\": [\"http://localhost:3000\"], \"authorized_redirect_uris\": [\"http://localhost:3000/auth/callback\"], \"development_mode\": false, \"endpoints\": {\"callback\": \"/auth/callback\", \"login\": \"/auth/login\", \"logout\": \"/auth/logout\", \"token\": \"/auth/token\", \"user\": \"/auth/me\"}, \"google_client_id\": \"test-google-client-id\"}\n\n    Number of calls: 0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"login-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogin\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogout\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"auth-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mAuthenticated\u001b[0m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 472 |\u001b[39m   \u001b[36masync\u001b[39m \u001b[36mfunction\u001b[39m verifyLogoutSuccess(mockLogout\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m) {\n     \u001b[90m 473 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 474 |\u001b[39m       expect(mockLogout)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(mockAuthConfig)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 475 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 476 |\u001b[39m   }\n     \u001b[90m 477 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/auth-complete.test.tsx:474:26\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Complete Authentication Flow Integration \u203a Logout Flow \u203a should handle logout during active session\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    \u001b[0m \u001b[90m 500 |\u001b[39m\n     \u001b[90m 501 |\u001b[39m   \u001b[36mfunction\u001b[39m expectSessionTerminated() {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 502 |\u001b[39m     expect(mockUseAuthStore()\u001b[33m.\u001b[39mlogout)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 503 |\u001b[39m   }\n     \u001b[90m 504 |\u001b[39m\n     \u001b[90m 505 |\u001b[39m   \u001b[36mfunction\u001b[39m expectRedirectToLogin() {\u001b[0m\n\n      at expectSessionTerminated (__tests__/integration/auth-complete.test.tsx:502:39)\n      at Object.<anonymous> (__tests__/integration/auth-complete.test.tsx:198:7)\n\n  \u25cf Complete Authentication Flow Integration \u203a Token Management \u203a should validate token format and claims\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: Any<String>\n\n    Number of calls: 0\n\n    \u001b[0m \u001b[90m 517 |\u001b[39m\n     \u001b[90m 518 |\u001b[39m   \u001b[36mfunction\u001b[39m expectTokenValidated() {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 519 |\u001b[39m     expect(jwtDecode)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(expect\u001b[33m.\u001b[39many(\u001b[33mString\u001b[39m))\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 520 |\u001b[39m   }\n     \u001b[90m 521 |\u001b[39m\n     \u001b[90m 522 |\u001b[39m   \u001b[36mfunction\u001b[39m expectClaimsExtracted() {\u001b[0m\n\n      at expectTokenValidated (__tests__/integration/auth-complete.test.tsx:519:23)\n      at Object.<anonymous> (__tests__/integration/auth-complete.test.tsx:216:7)\n\n  \u25cf Complete Authentication Flow Integration \u203a Token Management \u203a should handle malformed tokens\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    \u001b[0m \u001b[90m 532 |\u001b[39m\n     \u001b[90m 533 |\u001b[39m   \u001b[36mfunction\u001b[39m expectTokenRejected() {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 534 |\u001b[39m     expect(mockAuthService\u001b[33m.\u001b[39mremoveToken)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 535 |\u001b[39m   }\n     \u001b[90m 536 |\u001b[39m\n     \u001b[90m 537 |\u001b[39m   \u001b[36mfunction\u001b[39m expectSecurityCleanup() {\u001b[0m\n\n      at expectTokenRejected (__tests__/integration/auth-complete.test.tsx:534:41)\n      at Object.<anonymous> (__tests__/integration/auth-complete.test.tsx:230:7)\n\n  \u25cf Complete Authentication Flow Integration \u203a Token Management \u203a should handle expired tokens\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"login-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogin\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogout\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"auth-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mAuthenticated\u001b[0m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 248 |\u001b[39m       \u001b[90m// The AuthProvider should detect expired token and remove it\u001b[39m\n     \u001b[90m 249 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 250 |\u001b[39m         expect(mockAuthService\u001b[33m.\u001b[39mremoveToken)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 251 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 252 |\u001b[39m       \n     \u001b[90m 253 |\u001b[39m       \u001b[90m// Verify user remains unauthenticated\u001b[39m\u001b[0m\n\n      at __tests__/integration/auth-complete.test.tsx:250:45\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\nFAIL Integration Tests __tests__/integration/data-fetching-pagination.test.tsx\n  Data Fetching - Pagination\n    \u221a loads first page by default (25 ms)\n    \u221a navigates to next page correctly (31 ms)\n    \u00d7 disables navigation buttons appropriately (26 ms)\n    \u221a jumps to first page correctly (37 ms)\n    \u221a handles pagination with different page sizes (5 ms)\n  Data Fetching - Infinite Scrolling\n    \u221a loads more data when scrolling to bottom (16 ms)\n    \u221a prevents duplicate loading requests (15 ms)\n\n  \u25cf Data Fetching - Pagination \u203a disables navigation buttons appropriately\n\n    TestingLibraryElementError: Unable to find an element by: [data-testid=\"next-page\"]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[0mLoading...\u001b[0m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</div>\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n    \u001b[0m \u001b[90m 325 |\u001b[39m     }\n     \u001b[90m 326 |\u001b[39m     \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 327 |\u001b[39m     expect(screen\u001b[33m.\u001b[39mgetByTestId(\u001b[32m'next-page'\u001b[39m))\u001b[33m.\u001b[39mtoBeDisabled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 328 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 329 |\u001b[39m\n     \u001b[90m 330 |\u001b[39m   it(\u001b[32m'jumps to first page correctly'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)\n      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38\n      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17\n      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19\n      at Object.<anonymous> (__tests__/integration/data-fetching-pagination.test.tsx:327:19)\n\nFAIL Integration Tests __tests__/integration/role-based-access.test.tsx\n  Role-Based Access Control Integration\n    Tier-Based Feature Access\n      \u221a should restrict free users to basic features (13 ms)\n      \u221a should grant early users advanced features (15 ms)\n      \u221a should grant mid users analytics access (7 ms)\n      \u221a should grant enterprise users full access (16 ms)\n    Protected Route Navigation\n      \u00d7 should redirect unauthorized users from admin routes (14 ms)\n      \u00d7 should allow enterprise users to access admin routes (2 ms)\n      \u221a should handle route permissions dynamically (13 ms)\n    Feature Limitations\n      \u221a should enforce thread creation limits for free users (135 ms)\n      \u221a should enforce message limits per thread (15 ms)\n      \u221a should remove limits for enterprise users (39 ms)\n    Permission Validation\n      \u221a should validate permissions before feature access (5 ms)\n      \u221a should handle missing permissions gracefully (2 ms)\n      \u221a should support hierarchical permissions (2 ms)\n    Upgrade Flow Integration\n      \u221a should trigger upgrade flow for premium features (1 ms)\n      \u221a should handle upgrade completion (6 ms)\n\n  \u25cf Role-Based Access Control Integration \u203a Protected Route Navigation \u203a should redirect unauthorized users from admin routes\n\n    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.\n\n    Check the render method of `ProtectedComponent`.\n\n    \u001b[0m \u001b[90m 151 |\u001b[39m       \u001b[36mconst\u001b[39m { \u001b[33mProtectedComponent\u001b[39m } \u001b[33m=\u001b[39m setupUnauthorizedUserRoute()\u001b[33m;\u001b[39m\n     \u001b[90m 152 |\u001b[39m       \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 153 |\u001b[39m       render(\u001b[33m<\u001b[39m\u001b[33mProtectedComponent\u001b[39m \u001b[33m/\u001b[39m\u001b[33m>\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 154 |\u001b[39m       \u001b[36mawait\u001b[39m attemptAdminRouteAccess()\u001b[33m;\u001b[39m\n     \u001b[90m 155 |\u001b[39m       \n     \u001b[90m 156 |\u001b[39m       expectAccessDenied()\u001b[33m;\u001b[39m\u001b[0m\n\n      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)\n      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)\n      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33\n      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)\n      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)\n      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:860:10)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (__tests__/integration/role-based-access.test.tsx:153:13)\n\n  \u25cf Role-Based Access Control Integration \u203a Protected Route Navigation \u203a should allow enterprise users to access admin routes\n\n    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.\n\n    Check the render method of `ProtectedComponent`.\n\n    \u001b[0m \u001b[90m 161 |\u001b[39m       \u001b[36mconst\u001b[39m { \u001b[33mProtectedComponent\u001b[39m } \u001b[33m=\u001b[39m setupAuthorizedAdminRoute()\u001b[33m;\u001b[39m\n     \u001b[90m 162 |\u001b[39m       \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 163 |\u001b[39m       render(\u001b[33m<\u001b[39m\u001b[33mProtectedComponent\u001b[39m \u001b[33m/\u001b[39m\u001b[33m>\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 164 |\u001b[39m       \u001b[36mawait\u001b[39m verifyAdminRouteAccess()\u001b[33m;\u001b[39m\n     \u001b[90m 165 |\u001b[39m       expectAdminInterfaceRendered()\u001b[33m;\u001b[39m\n     \u001b[90m 166 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)\n      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)\n      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33\n      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)\n      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)\n      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:860:10)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (__tests__/integration/role-based-access.test.tsx:163:13)\n\nFAIL Integration Tests __tests__/services/apiClient.test.ts\n  ApiClient Infrastructure Tests\n    Authentication Management\n      \u00d7 includes auth token from localStorage (8 ms)\n      \u00d7 falls back to sessionStorage when localStorage empty (2 ms)\n      \u00d7 handles missing auth tokens gracefully (1 ms)\n      \u221a prevents token leakage in error responses (3067 ms)\n    HTTP Method Support\n      \u221a GET requests with query parameters (3 ms)\n      \u221a POST requests with JSON body (2 ms)\n      \u221a PUT requests update existing resources (2 ms)\n      \u221a DELETE requests remove resources (3 ms)\n    Connection Health Management\n      \u221a performs health check on initialization (5 ms)\n      \u221a handles 307 redirects as healthy connection\n      \u221a marks connection as unhealthy on network failures\n      \u221a reconnects before failed requests (1020 ms)\n    Retry Logic with Exponential Backoff\n      \u221a retries failed requests with exponential delay (4 ms)\n      \u221a respects custom retry configuration (3 ms)\n      \u221a disables retry when configured (3 ms)\n      \u221a throws last error after all retries exhausted (7 ms)\n      \u00d7 handles intermittent network failures gracefully (5 ms)\n    Error Response Handling\n      \u221a parses JSON error responses (1 ms)\n      \u221a handles text error responses\n      \u221a prioritizes error message hierarchy (1 ms)\n      \u221a handles malformed JSON responses gracefully\n    Concurrent Request Management\n      \u221a handles multiple simultaneous requests\n      \u221a isolates failures between concurrent requests (1 ms)\n    Timeout and Rate Limiting\n      \u221a handles request timeouts gracefully (4 ms)\n      \u221a respects rate limiting responses (1 ms)\n    Security and Data Protection\n      \u221a includes credentials for authentication (1 ms)\n      \u221a sanitizes sensitive data from error logs (2 ms)\n\n  \u25cf ApiClient Infrastructure Tests \u203a Authentication Management \u203a includes auth token from localStorage\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: \"Bearer test-token\"\n    Received: \"Bearer mock-token\"\n\n    \u001b[0m \u001b[90m 495 |\u001b[39m   \u001b[36mconst\u001b[39m lastCall \u001b[33m=\u001b[39m mockFetch\u001b[33m.\u001b[39mmock\u001b[33m.\u001b[39mcalls[mockFetch\u001b[33m.\u001b[39mmock\u001b[33m.\u001b[39mcalls\u001b[33m.\u001b[39mlength \u001b[33m-\u001b[39m \u001b[35m1\u001b[39m]\u001b[33m;\u001b[39m\n     \u001b[90m 496 |\u001b[39m   \u001b[36mconst\u001b[39m headers \u001b[33m=\u001b[39m lastCall[\u001b[35m1\u001b[39m]\u001b[33m.\u001b[39mheaders\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 497 |\u001b[39m   expect(headers\u001b[33m.\u001b[39m\u001b[33mAuthorization\u001b[39m)\u001b[33m.\u001b[39mtoBe(expectedAuth)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 498 |\u001b[39m }\n     \u001b[90m 499 |\u001b[39m\n     \u001b[90m 500 |\u001b[39m \u001b[36mfunction\u001b[39m expectNoAuthHeaders() {\u001b[0m\n\n      at expectAuthHeaders (__tests__/services/apiClient.test.ts:497:33)\n      at Object.<anonymous> (__tests__/services/apiClient.test.ts:68:7)\n\n  \u25cf ApiClient Infrastructure Tests \u203a Authentication Management \u203a falls back to sessionStorage when localStorage empty\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: \"Bearer session-token\"\n    Received: \"Bearer mock-token\"\n\n    \u001b[0m \u001b[90m 495 |\u001b[39m   \u001b[36mconst\u001b[39m lastCall \u001b[33m=\u001b[39m mockFetch\u001b[33m.\u001b[39mmock\u001b[33m.\u001b[39mcalls[mockFetch\u001b[33m.\u001b[39mmock\u001b[33m.\u001b[39mcalls\u001b[33m.\u001b[39mlength \u001b[33m-\u001b[39m \u001b[35m1\u001b[39m]\u001b[33m;\u001b[39m\n     \u001b[90m 496 |\u001b[39m   \u001b[36mconst\u001b[39m headers \u001b[33m=\u001b[39m lastCall[\u001b[35m1\u001b[39m]\u001b[33m.\u001b[39mheaders\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 497 |\u001b[39m   expect(headers\u001b[33m.\u001b[39m\u001b[33mAuthorization\u001b[39m)\u001b[33m.\u001b[39mtoBe(expectedAuth)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 498 |\u001b[39m }\n     \u001b[90m 499 |\u001b[39m\n     \u001b[90m 500 |\u001b[39m \u001b[36mfunction\u001b[39m expectNoAuthHeaders() {\u001b[0m\n\n      at expectAuthHeaders (__tests__/services/apiClient.test.ts:497:33)\n      at Object.<anonymous> (__tests__/services/apiClient.test.ts:76:7)\n\n  \u25cf ApiClient Infrastructure Tests \u203a Authentication Management \u203a handles missing auth tokens gracefully\n\n    expect(received).toBeUndefined()\n\n    Received: \"Bearer mock-token\"\n\n    \u001b[0m \u001b[90m 501 |\u001b[39m   \u001b[36mconst\u001b[39m lastCall \u001b[33m=\u001b[39m mockFetch\u001b[33m.\u001b[39mmock\u001b[33m.\u001b[39mcalls[mockFetch\u001b[33m.\u001b[39mmock\u001b[33m.\u001b[39mcalls\u001b[33m.\u001b[39mlength \u001b[33m-\u001b[39m \u001b[35m1\u001b[39m]\u001b[33m;\u001b[39m\n     \u001b[90m 502 |\u001b[39m   \u001b[36mconst\u001b[39m headers \u001b[33m=\u001b[39m lastCall[\u001b[35m1\u001b[39m]\u001b[33m.\u001b[39mheaders\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 503 |\u001b[39m   expect(headers\u001b[33m.\u001b[39m\u001b[33mAuthorization\u001b[39m)\u001b[33m.\u001b[39mtoBeUndefined()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 504 |\u001b[39m }\n     \u001b[90m 505 |\u001b[39m\n     \u001b[90m 506 |\u001b[39m \u001b[36mfunction\u001b[39m expectMethodCall(method\u001b[33m:\u001b[39m string\u001b[33m,\u001b[39m expectedUrl\u001b[33m:\u001b[39m string\u001b[33m,\u001b[39m data\u001b[33m?\u001b[39m\u001b[33m:\u001b[39m any) {\u001b[0m\n\n      at expectNoAuthHeaders (__tests__/services/apiClient.test.ts:503:33)\n      at Object.<anonymous> (__tests__/services/apiClient.test.ts:84:7)\n\n  \u25cf ApiClient Infrastructure Tests \u203a Retry Logic with Exponential Backoff \u203a handles intermittent network failures gracefully\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: undefined\n\n    \u001b[0m \u001b[90m 321 |\u001b[39m\n     \u001b[90m 322 |\u001b[39m     \u001b[36mfunction\u001b[39m verifyIntermittentFailureRecovery(result\u001b[33m:\u001b[39m any) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 323 |\u001b[39m       expect(result\u001b[33m.\u001b[39mdata\u001b[33m.\u001b[39mrecovered)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 324 |\u001b[39m     }\n     \u001b[90m 325 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 326 |\u001b[39m\u001b[0m\n\n      at verifyIntermittentFailureRecovery (__tests__/services/apiClient.test.ts:323:37)\n      at Object.<anonymous> (__tests__/services/apiClient.test.ts:304:7)\n\nFAIL Integration Tests __tests__/integration/store-persistence.test.tsx\n  Store Persistence Integration Tests\n    State Persistence Across Page Refreshes\n      \u221a persists authentication state across refreshes (80 ms)\n      \u221a persists chat messages across browser sessions (219 ms)\n      \u221a handles partial state restoration gracefully (167 ms)\n    Large State Persistence\n      \u00d7 handles large message history persistence efficiently (24 ms)\n      \u00d7 implements storage quota management (5 ms)\n    Cross-Tab State Synchronization\n      \u00d7 synchronizes state changes across browser tabs (36 ms)\n      \u00d7 prevents infinite sync loops between tabs (58 ms)\n    Migration and Versioning\n      \u00d7 handles legacy state format migration (4 ms)\n      \u221a maintains backwards compatibility with older versions (3 ms)\n    Error Recovery and Resilience\n      \u221a recovers from corrupted localStorage data (2 ms)\n      \u221a handles localStorage unavailability gracefully (52 ms)\n      \u221a implements automatic state cleanup for old data (3 ms)\n\n  \u25cf Store Persistence Integration Tests \u203a Large State Persistence \u203a handles large message history persistence efficiently\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    \u001b[0m \u001b[90m 218 |\u001b[39m       \n     \u001b[90m 219 |\u001b[39m       \u001b[90m// Verify localStorage can handle large data\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 220 |\u001b[39m       expect(mockLocalStorage\u001b[33m.\u001b[39msetItem)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 221 |\u001b[39m       \n     \u001b[90m 222 |\u001b[39m       \u001b[90m// Check performance of persistence operation\u001b[39m\n     \u001b[90m 223 |\u001b[39m       \u001b[36mconst\u001b[39m startTime \u001b[33m=\u001b[39m performance\u001b[33m.\u001b[39mnow()\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/store-persistence.test.tsx:220:40)\n\n  \u25cf Store Persistence Integration Tests \u203a Large State Persistence \u203a implements storage quota management\n\n    expect(element).toHaveTextContent()\n\n    Expected element to have text content:\n      1\n    Received:\n      0\n\n    \u001b[0m \u001b[90m 245 |\u001b[39m       \n     \u001b[90m 246 |\u001b[39m       \u001b[90m// Verify graceful handling of quota issues\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 247 |\u001b[39m       expect(screen\u001b[33m.\u001b[39mgetByTestId(\u001b[32m'messages-count'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'1'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 248 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 249 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 250 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/store-persistence.test.tsx:247:52)\n\n  \u25cf Store Persistence Integration Tests \u203a Cross-Tab State Synchronization \u203a synchronizes state changes across browser tabs\n\n    TypeError: Failed to construct 'StorageEvent': parameter 2 has member 'storageArea' that is not of type 'Storage'.\n\n    \u001b[0m \u001b[90m 260 |\u001b[39m       \n     \u001b[90m 261 |\u001b[39m       \u001b[90m// Simulate storage event from another tab\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 262 |\u001b[39m       \u001b[36mconst\u001b[39m storageEvent \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mStorageEvent\u001b[39m(\u001b[32m'storage'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m     |\u001b[39m                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 263 |\u001b[39m         key\u001b[33m:\u001b[39m \u001b[32m'auth-store'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 264 |\u001b[39m         newValue\u001b[33m:\u001b[39m \u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mstringify({\n     \u001b[90m 265 |\u001b[39m           state\u001b[33m:\u001b[39m {\u001b[0m\n\n      at Object.exports.convert (node_modules/jsdom/lib/jsdom/living/generated/Storage.js:21:9)\n      at Object.exports._convertInherit (node_modules/jsdom/lib/jsdom/living/generated/StorageEventInit.js:70:25)\n      at Object.exports.convert (node_modules/jsdom/lib/jsdom/living/generated/StorageEventInit.js:97:11)\n      at new StorageEvent (node_modules/jsdom/lib/jsdom/living/generated/StorageEvent.js:112:35)\n      at Object.<anonymous> (__tests__/integration/store-persistence.test.tsx:262:28)\n\n  \u25cf Store Persistence Integration Tests \u203a Cross-Tab State Synchronization \u203a prevents infinite sync loops between tabs\n\n    TypeError: Failed to construct 'StorageEvent': parameter 2 has member 'storageArea' that is not of type 'Storage'.\n\n    \u001b[0m \u001b[90m 299 |\u001b[39m       \u001b[90m// Simulate multiple rapid storage events\u001b[39m\n     \u001b[90m 300 |\u001b[39m       \u001b[36mfor\u001b[39m (\u001b[36mlet\u001b[39m i \u001b[33m=\u001b[39m \u001b[35m0\u001b[39m\u001b[33m;\u001b[39m i \u001b[33m<\u001b[39m \u001b[35m10\u001b[39m\u001b[33m;\u001b[39m i\u001b[33m++\u001b[39m) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 301 |\u001b[39m         \u001b[36mconst\u001b[39m storageEvent \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mStorageEvent\u001b[39m(\u001b[32m'storage'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 302 |\u001b[39m           key\u001b[33m:\u001b[39m \u001b[32m'auth-store'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 303 |\u001b[39m           newValue\u001b[33m:\u001b[39m \u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mstringify({\n     \u001b[90m 304 |\u001b[39m             state\u001b[33m:\u001b[39m { user\u001b[33m:\u001b[39m { id\u001b[33m:\u001b[39m \u001b[32m`user-${i}`\u001b[39m }\u001b[33m,\u001b[39m token\u001b[33m:\u001b[39m \u001b[32m`token-${i}`\u001b[39m }\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.exports.convert (node_modules/jsdom/lib/jsdom/living/generated/Storage.js:21:9)\n      at Object.exports._convertInherit (node_modules/jsdom/lib/jsdom/living/generated/StorageEventInit.js:70:25)\n      at Object.exports.convert (node_modules/jsdom/lib/jsdom/living/generated/StorageEventInit.js:97:11)\n      at new StorageEvent (node_modules/jsdom/lib/jsdom/living/generated/StorageEvent.js:112:35)\n      at Object.<anonymous> (__tests__/integration/store-persistence.test.tsx:301:30)\n\n  \u25cf Store Persistence Integration Tests \u203a Migration and Versioning \u203a handles legacy state format migration\n\n    expect(element).toHaveTextContent()\n\n    Expected element to have text content:\n      none\n    Received:\n      test-thread-123\n\n    \u001b[0m \u001b[90m 331 |\u001b[39m       \u001b[90m// Verify app handles legacy format gracefully\u001b[39m\n     \u001b[90m 332 |\u001b[39m       expect(screen\u001b[33m.\u001b[39mgetByTestId(\u001b[32m'messages-count'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'0'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 333 |\u001b[39m       expect(screen\u001b[33m.\u001b[39mgetByTestId(\u001b[32m'active-thread'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'none'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 334 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 335 |\u001b[39m\n     \u001b[90m 336 |\u001b[39m     it(\u001b[32m'maintains backwards compatibility with older versions'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/store-persistence.test.tsx:333:51)\n\nFAIL Integration Tests __tests__/integration/first-load.test.tsx\n  First Load Integration Tests\n    Unauthenticated First Visit\n      \u221a should load application bundle and show loading state (140 ms)\n      \u221a should complete initial page load within 3 seconds (137 ms)\n      \u221a should show page as interactive within performance threshold (168 ms)\n      \u221a should handle bundle loading failures gracefully (143 ms)\n    Auth State Checking\n      \u00d7 should check authentication status on first load (1008 ms)\n      \u00d7 should redirect authenticated users to main app (1005 ms)\n      \u00d7 should handle auth service unavailable gracefully (1017 ms)\n      \u221a should show loading during auth check (3 ms)\n    Redirect to Login\n      \u221a should render login page with Google OAuth button (71 ms)\n      \u221a should show loading state during login process (7 ms)\n    Error Handling and Performance\n      \u221a should display proper loading indicators (2 ms)\n      \u221a should not show console errors during normal load (142 ms)\n      \u221a should provide retry mechanism for failed loads (191 ms)\n      \u221a should handle network failures gracefully (3 ms)\n\n  \u25cf First Load Integration Tests \u203a Auth State Checking \u203a should check authentication status on first load\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"/login\"\n\n    Number of calls: 0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center justify-center h-screen\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<p>\u001b[39m\n              \u001b[0mLoading...\u001b[0m\n            \u001b[36m</p>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 114 |\u001b[39m       \n     \u001b[90m 115 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 116 |\u001b[39m         expect(mockPush)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'/login'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 117 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 118 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 119 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/first-load.test.tsx:116:26\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf First Load Integration Tests \u203a Auth State Checking \u203a should redirect authenticated users to main app\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"/enterprise-demo\"\n\n    Number of calls: 0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center justify-center h-screen\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<p>\u001b[39m\n              \u001b[0mLoading...\u001b[0m\n            \u001b[36m</p>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 138 |\u001b[39m       \n     \u001b[90m 139 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 140 |\u001b[39m         expect(mockPush)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'/enterprise-demo'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 141 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 142 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 143 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/first-load.test.tsx:140:26\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf First Load Integration Tests \u203a Auth State Checking \u203a should handle auth service unavailable gracefully\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"/login\"\n\n    Number of calls: 0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center justify-center h-screen\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<p>\u001b[39m\n              \u001b[0mLoading...\u001b[0m\n            \u001b[36m</p>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 156 |\u001b[39m       \n     \u001b[90m 157 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 158 |\u001b[39m         expect(mockPush)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'/login'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 159 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 160 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 161 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/first-load.test.tsx:158:26\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\nFAIL Integration Tests __tests__/integration/error-handling-retry.test.tsx\n  Error Handling - Retry Logic\n    \u00d7 retries failed requests with exponential backoff (77 ms)\n    \u221a respects max retry limit (32 ms)\n    \u221a uses linear backoff when exponential is disabled (15 ms)\n  Error Handling - Request Cancellation\n    \u00d7 cancels ongoing requests (19 ms)\n    \u221a handles multiple concurrent cancellations (37 ms)\n  Error Handling - Timeout Handling\n    \u00d7 handles request timeouts correctly (15 ms)\n    \u221a succeeds when response is within timeout (26 ms)\n\n  \u25cf Error Handling - Retry Logic \u203a retries failed requests with exponential backoff\n\n    expect(element).toHaveTextContent()\n\n    Expected element to have text content:\n      Retry 1\n    Received:\n      Retry 2\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"retry-test-component\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"start-request\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mStart Request\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"loading\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLoading...\u001b[0m\n              \u001b[36m<span\u001b[39m\n                \u001b[33mdata-testid\u001b[39m=\u001b[32m\"retry-count\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[0mRetry \u001b[0m\n                \u001b[0m2\u001b[0m\n              \u001b[36m</span>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 393 |\u001b[39m     \n     \u001b[90m 394 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 395 |\u001b[39m       expect(screen\u001b[33m.\u001b[39mgetByTestId(\u001b[32m'retry-count'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'Retry 1'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 396 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 397 |\u001b[39m     \n     \u001b[90m 398 |\u001b[39m     act(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at __tests__/integration/error-handling-retry.test.tsx:395:49\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at node_modules/@testing-library/dom/dist/wait-for.js:82:9\n\n  \u25cf Error Handling - Request Cancellation \u203a cancels ongoing requests\n\n    Unable to find an element by: [data-testid=\"error\"]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div>\u001b[39m\n        \u001b[36m<div\u001b[39m\n          \u001b[33mdata-testid\u001b[39m=\u001b[32m\"cancellable-request\"\u001b[39m\n        \u001b[36m>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"start-request\"\u001b[39m\n            \u001b[33mdisabled\u001b[39m=\u001b[32m\"\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mStart Request\u001b[0m\n          \u001b[36m</button>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"cancel-request\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mCancel Request\u001b[0m\n          \u001b[36m</button>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"loading\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mLoading...\u001b[0m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</div>\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n    \u001b[0m \u001b[90m 508 |\u001b[39m     userEvent\u001b[33m.\u001b[39mclick(screen\u001b[33m.\u001b[39mgetByTestId(\u001b[32m'cancel-request'\u001b[39m))\u001b[33m;\u001b[39m\n     \u001b[90m 509 |\u001b[39m     \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 510 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 511 |\u001b[39m       expect(screen\u001b[33m.\u001b[39mgetByTestId(\u001b[32m'error'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'Request cancelled'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 512 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 513 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at Object.<anonymous> (__tests__/integration/error-handling-retry.test.tsx:510:18)\n\n  \u25cf Error Handling - Timeout Handling \u203a handles request timeouts correctly\n\n    expect(element).toHaveTextContent()\n\n    Expected element to have text content:\n      Timeout\n    Received:\n\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"timeout-component\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"fast-timeout\"\u001b[39m\n              \u001b[33mdisabled\u001b[39m=\u001b[32m\"\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mFast Timeout (100ms)\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"slow-timeout\"\u001b[39m\n              \u001b[33mdisabled\u001b[39m=\u001b[32m\"\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mSlow Timeout (10s)\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"loading\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLoading...\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"result\"\u001b[39m\n            \u001b[36m/>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 585 |\u001b[39m     \n     \u001b[90m 586 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 587 |\u001b[39m       expect(screen\u001b[33m.\u001b[39mgetByTestId(\u001b[32m'result'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'Timeout'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 588 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 589 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 590 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/error-handling-retry.test.tsx:587:44\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at node_modules/@testing-library/dom/dist/wait-for.js:82:9\n\nFAIL Integration Tests __tests__/integration/comprehensive-integration.test.tsx\n  Corpus Management Integration\n    \u00d7 should upload documents to corpus and update UI (1 ms)\n    \u00d7 should search corpus with embeddings (1 ms)\n  Synthetic Data Generation Flow\n    \u00d7 should generate synthetic data based on user input (1 ms)\n    \u00d7 should export synthetic data in multiple formats (1 ms)\n  Generation Service Integration\n    \u00d7 should handle batch generation jobs (1 ms)\n    \u00d7 should stream generation progress via WebSocket (1 ms)\n  LLM Cache Management Integration\n    \u00d7 should clear LLM cache and update UI\n    \u00d7 should update cache TTL settings\n  Supply Catalog Integration\n    \u00d7 should load and display supply catalog\n    \u00d7 should switch between different model providers (1 ms)\n  Configuration Management\n    \u00d7 should load and display configuration\n    \u00d7 should update nested configuration values\n  Health Check Monitoring\n    \u00d7 should fetch and display system health status (1 ms)\n  OAuth Secrets Management\n    \u00d7 should handle OAuth token refresh (1 ms)\n    \u00d7 should manage secrets securely (1 ms)\n  Security Service Integration\n    \u00d7 should validate user permissions for protected resources (1 ms)\n    \u00d7 should handle security token rotation (1 ms)\n  Key Manager Integration\n    \u00d7 should manage API keys lifecycle (1 ms)\n    \u00d7 should revoke compromised keys (1 ms)\n  Admin Functionality Integration\n    \u00d7 should manage user roles and permissions (1 ms)\n    \u00d7 should access admin-only endpoints with proper auth\n  Infrastructure Integration Test Suite\n    \u00d7 should reference modular test architecture (1 ms)\n    \u00d7 should maintain Enterprise reliability standards (1 ms)\n  Demo Mode Functionality\n    \u00d7 should enable demo mode with limited features\n    \u00d7 should simulate data in demo mode\n  Enterprise Demo Features\n    \u00d7 should showcase enterprise optimization features (1 ms)\n    \u00d7 should display ROI calculations (1 ms)\n  PDF and Image Processing\n    \u00d7 should extract text from PDF files (1 ms)\n    \u00d7 should analyze images using vision models\n  Export and Import Functionality\n    \u00d7 should export data in multiple formats (1 ms)\n    \u00d7 should import and validate data (1 ms)\n  Real-time Metrics Dashboard\n    \u00d7 should display live performance metrics\n  Agent Tool Dispatcher Integration\n    \u00d7 should dispatch tools to appropriate agents\n  Collaboration Features\n    \u00d7 should share threads with team members (1 ms)\n    \u00d7 should sync collaborative edits in real-time\n    \u00d7 should handle presence awareness (1 ms)\n  Jupyter Notebook Support\n    \u00d7 should execute notebook cells\n    \u00d7 should render notebook visualizations\n  State Persistence and Recovery\n    \u00d7 should persist application state across sessions\n    \u00d7 should recover from corrupted state gracefully\n    \u00d7 should migrate state between versions\n  Comprehensive Frontend Integration Tests\n    \u00d7 should load all test suites (1 ms)\n\n  \u25cf Corpus Management Integration \u203a should upload documents to corpus and update UI\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf Corpus Management Integration \u203a should upload documents to corpus and update UI\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf Corpus Management Integration \u203a should upload documents to corpus and update UI\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Corpus Management Integration \u203a should search corpus with embeddings\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf Corpus Management Integration \u203a should search corpus with embeddings\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf Corpus Management Integration \u203a should search corpus with embeddings\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Synthetic Data Generation Flow \u203a should generate synthetic data based on user input\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf Synthetic Data Generation Flow \u203a should generate synthetic data based on user input\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf Synthetic Data Generation Flow \u203a should generate synthetic data based on user input\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Synthetic Data Generation Flow \u203a should export synthetic data in multiple formats\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf Synthetic Data Generation Flow \u203a should export synthetic data in multiple formats\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf Synthetic Data Generation Flow \u203a should export synthetic data in multiple formats\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Generation Service Integration \u203a should handle batch generation jobs\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf Generation Service Integration \u203a should handle batch generation jobs\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf Generation Service Integration \u203a should handle batch generation jobs\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Generation Service Integration \u203a should stream generation progress via WebSocket\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf Generation Service Integration \u203a should stream generation progress via WebSocket\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf Generation Service Integration \u203a should stream generation progress via WebSocket\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf LLM Cache Management Integration \u203a should clear LLM cache and update UI\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf LLM Cache Management Integration \u203a should clear LLM cache and update UI\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf LLM Cache Management Integration \u203a should clear LLM cache and update UI\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf LLM Cache Management Integration \u203a should update cache TTL settings\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf LLM Cache Management Integration \u203a should update cache TTL settings\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf LLM Cache Management Integration \u203a should update cache TTL settings\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Supply Catalog Integration \u203a should load and display supply catalog\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf Supply Catalog Integration \u203a should load and display supply catalog\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf Supply Catalog Integration \u203a should load and display supply catalog\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Supply Catalog Integration \u203a should switch between different model providers\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf Supply Catalog Integration \u203a should switch between different model providers\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf Supply Catalog Integration \u203a should switch between different model providers\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Configuration Management \u203a should load and display configuration\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf Configuration Management \u203a should load and display configuration\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf Configuration Management \u203a should load and display configuration\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Configuration Management \u203a should update nested configuration values\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf Configuration Management \u203a should update nested configuration values\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf Configuration Management \u203a should update nested configuration values\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Health Check Monitoring \u203a should fetch and display system health status\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf Health Check Monitoring \u203a should fetch and display system health status\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf Health Check Monitoring \u203a should fetch and display system health status\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf OAuth Secrets Management \u203a should handle OAuth token refresh\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf OAuth Secrets Management \u203a should handle OAuth token refresh\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf OAuth Secrets Management \u203a should handle OAuth token refresh\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf OAuth Secrets Management \u203a should manage secrets securely\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf OAuth Secrets Management \u203a should manage secrets securely\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf OAuth Secrets Management \u203a should manage secrets securely\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Security Service Integration \u203a should validate user permissions for protected resources\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf Security Service Integration \u203a should validate user permissions for protected resources\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf Security Service Integration \u203a should validate user permissions for protected resources\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Security Service Integration \u203a should handle security token rotation\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf Security Service Integration \u203a should handle security token rotation\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf Security Service Integration \u203a should handle security token rotation\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Key Manager Integration \u203a should manage API keys lifecycle\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf Key Manager Integration \u203a should manage API keys lifecycle\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf Key Manager Integration \u203a should manage API keys lifecycle\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Key Manager Integration \u203a should revoke compromised keys\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf Key Manager Integration \u203a should revoke compromised keys\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf Key Manager Integration \u203a should revoke compromised keys\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Admin Functionality Integration \u203a should manage user roles and permissions\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf Admin Functionality Integration \u203a should manage user roles and permissions\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf Admin Functionality Integration \u203a should manage user roles and permissions\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Admin Functionality Integration \u203a should access admin-only endpoints with proper auth\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf Admin Functionality Integration \u203a should access admin-only endpoints with proper auth\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf Admin Functionality Integration \u203a should access admin-only endpoints with proper auth\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Infrastructure Integration Test Suite \u203a should reference modular test architecture\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf Infrastructure Integration Test Suite \u203a should reference modular test architecture\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf Infrastructure Integration Test Suite \u203a should reference modular test architecture\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Infrastructure Integration Test Suite \u203a should maintain Enterprise reliability standards\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf Infrastructure Integration Test Suite \u203a should maintain Enterprise reliability standards\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf Infrastructure Integration Test Suite \u203a should maintain Enterprise reliability standards\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Demo Mode Functionality \u203a should enable demo mode with limited features\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf Demo Mode Functionality \u203a should enable demo mode with limited features\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf Demo Mode Functionality \u203a should enable demo mode with limited features\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Demo Mode Functionality \u203a should simulate data in demo mode\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf Demo Mode Functionality \u203a should simulate data in demo mode\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf Demo Mode Functionality \u203a should simulate data in demo mode\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Enterprise Demo Features \u203a should showcase enterprise optimization features\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf Enterprise Demo Features \u203a should showcase enterprise optimization features\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf Enterprise Demo Features \u203a should showcase enterprise optimization features\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Enterprise Demo Features \u203a should display ROI calculations\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf Enterprise Demo Features \u203a should display ROI calculations\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf Enterprise Demo Features \u203a should display ROI calculations\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf PDF and Image Processing \u203a should extract text from PDF files\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf PDF and Image Processing \u203a should extract text from PDF files\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf PDF and Image Processing \u203a should extract text from PDF files\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf PDF and Image Processing \u203a should analyze images using vision models\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf PDF and Image Processing \u203a should analyze images using vision models\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf PDF and Image Processing \u203a should analyze images using vision models\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Export and Import Functionality \u203a should export data in multiple formats\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf Export and Import Functionality \u203a should export data in multiple formats\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf Export and Import Functionality \u203a should export data in multiple formats\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Export and Import Functionality \u203a should import and validate data\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf Export and Import Functionality \u203a should import and validate data\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf Export and Import Functionality \u203a should import and validate data\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Real-time Metrics Dashboard \u203a should display live performance metrics\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf Real-time Metrics Dashboard \u203a should display live performance metrics\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf Real-time Metrics Dashboard \u203a should display live performance metrics\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Agent Tool Dispatcher Integration \u203a should dispatch tools to appropriate agents\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf Agent Tool Dispatcher Integration \u203a should dispatch tools to appropriate agents\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf Agent Tool Dispatcher Integration \u203a should dispatch tools to appropriate agents\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Collaboration Features \u203a should share threads with team members\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf Collaboration Features \u203a should share threads with team members\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf Collaboration Features \u203a should share threads with team members\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Collaboration Features \u203a should sync collaborative edits in real-time\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf Collaboration Features \u203a should sync collaborative edits in real-time\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf Collaboration Features \u203a should sync collaborative edits in real-time\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Collaboration Features \u203a should handle presence awareness\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf Collaboration Features \u203a should handle presence awareness\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf Collaboration Features \u203a should handle presence awareness\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Jupyter Notebook Support \u203a should execute notebook cells\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf Jupyter Notebook Support \u203a should execute notebook cells\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf Jupyter Notebook Support \u203a should execute notebook cells\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Jupyter Notebook Support \u203a should render notebook visualizations\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf Jupyter Notebook Support \u203a should render notebook visualizations\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf Jupyter Notebook Support \u203a should render notebook visualizations\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf State Persistence and Recovery \u203a should persist application state across sessions\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf State Persistence and Recovery \u203a should persist application state across sessions\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf State Persistence and Recovery \u203a should persist application state across sessions\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf State Persistence and Recovery \u203a should recover from corrupted state gracefully\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf State Persistence and Recovery \u203a should recover from corrupted state gracefully\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf State Persistence and Recovery \u203a should recover from corrupted state gracefully\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf State Persistence and Recovery \u203a should migrate state between versions\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf State Persistence and Recovery \u203a should migrate state between versions\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf State Persistence and Recovery \u203a should migrate state between versions\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Comprehensive Frontend Integration Tests \u203a should load all test suites\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf Comprehensive Frontend Integration Tests \u203a should load all test suites\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf Comprehensive Frontend Integration Tests \u203a should load all test suites\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\nFAIL Integration Tests __tests__/auth/context.token-management.test.tsx\n  AuthContext - Token Management\n    \u00d7 should use existing token from storage (1009 ms)\n    \u00d7 should handle invalid token gracefully (1013 ms)\n    \u221a should handle token refresh mechanism (29 ms)\n\n  \u25cf AuthContext - Token Management \u203a should use existing token from storage\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"mock-jwt-token-123\"\n\n    Number of calls: 0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[0mTest Content\u001b[0m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 54 |\u001b[39m   \u001b[36mconst\u001b[39m waitForTokenProcessing \u001b[33m=\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 55 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 56 |\u001b[39m       expect(jwtDecode)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(mockToken)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 57 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 58 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 59 |\u001b[39m\u001b[0m\n\n      at __tests__/auth/context.token-management.test.tsx:56:25\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf AuthContext - Token Management \u203a should handle invalid token gracefully\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"Invalid token detected\", Any<Error>, {\"action\": \"token_validation_failed\", \"component\": \"AuthContext\"}\n\n    Number of calls: 0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[0mTest Content\u001b[0m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 73 |\u001b[39m   \u001b[36mconst\u001b[39m expectInvalidTokenHandling \u001b[33m=\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 74 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 75 |\u001b[39m       expect(logger\u001b[33m.\u001b[39merror)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\n     \u001b[90m    |\u001b[39m                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 76 |\u001b[39m         \u001b[32m'Invalid token detected'\u001b[39m\u001b[33m,\u001b[39m \n     \u001b[90m 77 |\u001b[39m         expect\u001b[33m.\u001b[39many(\u001b[33mError\u001b[39m)\u001b[33m,\u001b[39m\n     \u001b[90m 78 |\u001b[39m         {\u001b[0m\n\n      at __tests__/auth/context.token-management.test.tsx:75:28\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\nFAIL Integration Tests __tests__/integration/auth-flow.test.tsx\n  Authentication Flow Integration\n    \u00d7 should handle login and authentication (18 ms)\n    \u00d7 should handle logout and cleanup (22 ms)\n    \u221a should persist authentication state (14 ms)\n    \u221a should support onboarding flow authentication (1 ms)\n    \u221a should handle session timeout during onboarding (2 ms)\n\n  \u25cf Authentication Flow Integration \u203a should handle login and authentication\n\n    ReferenceError: useAuthStore is not defined\n\n    \u001b[0m \u001b[90m 75 |\u001b[39m \u001b[36mexport\u001b[39m \u001b[36mconst\u001b[39m expectAuthenticatedState \u001b[33m=\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 76 |\u001b[39m   \u001b[90m// Use mock expectations when store is mocked\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 77 |\u001b[39m   \u001b[36mif\u001b[39m (\u001b[36mtypeof\u001b[39m useAuthStore\u001b[33m.\u001b[39mgetState \u001b[33m===\u001b[39m \u001b[32m'function'\u001b[39m) {\n     \u001b[90m    |\u001b[39m   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 78 |\u001b[39m     \u001b[36mconst\u001b[39m authState \u001b[33m=\u001b[39m useAuthStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m 79 |\u001b[39m     expect(authState\u001b[33m.\u001b[39misAuthenticated)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 80 |\u001b[39m     expect(authState\u001b[33m.\u001b[39muser)\u001b[33m.\u001b[39mtoEqual(mockUser)\u001b[33m;\u001b[39m\u001b[0m\n\n      at expectAuthenticatedState (__tests__/test-utils/integration-test-setup.ts:77:3)\n      at Object.<anonymous> (__tests__/integration/auth-flow.test.tsx:205:29)\n\n  \u25cf Authentication Flow Integration \u203a should handle logout and cleanup\n\n    ReferenceError: useAuthStore is not defined\n\n    \u001b[0m \u001b[90m 90 |\u001b[39m \u001b[36mexport\u001b[39m \u001b[36mconst\u001b[39m expectUnauthenticatedState \u001b[33m=\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 91 |\u001b[39m   \u001b[90m// Use mock expectations when store is mocked\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 92 |\u001b[39m   \u001b[36mif\u001b[39m (\u001b[36mtypeof\u001b[39m useAuthStore\u001b[33m.\u001b[39mgetState \u001b[33m===\u001b[39m \u001b[32m'function'\u001b[39m) {\n     \u001b[90m    |\u001b[39m   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 93 |\u001b[39m     \u001b[36mconst\u001b[39m authState \u001b[33m=\u001b[39m useAuthStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m 94 |\u001b[39m     expect(authState\u001b[33m.\u001b[39misAuthenticated)\u001b[33m.\u001b[39mtoBe(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 95 |\u001b[39m     expect(authState\u001b[33m.\u001b[39muser)\u001b[33m.\u001b[39mtoBe(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at expectUnauthenticatedState (__tests__/test-utils/integration-test-setup.ts:92:3)\n      at Object.<anonymous> (__tests__/integration/auth-flow.test.tsx:218:31)\n\nFAIL Integration Tests __tests__/integration/data-fetching-optimistic.test.tsx\n  Data Fetching - Optimistic Updates\n    \u221a immediately shows optimistic update before server confirmation (109 ms)\n    \u00d7 reverts optimistic update on server error (22 ms)\n    \u221a handles optimistic updates for edit operations (13 ms)\n    \u00d7 handles multiple concurrent optimistic updates (69 ms)\n    \u221a maintains order during optimistic operations (15 ms)\n\n  \u25cf Data Fetching - Optimistic Updates \u203a reverts optimistic update on server error\n\n    FetchError: invalid json response body at http://localhost:8000/api/threads reason: Unexpected end of JSON input\n\n      at node_modules/node-fetch/lib/index.js:273:32\n\n  \u25cf Data Fetching - Optimistic Updates \u203a reverts optimistic update on server error\n\n    FetchError: invalid json response body at http://localhost:8000/api/threads reason: Unexpected end of JSON input\n\n      at node_modules/node-fetch/lib/index.js:273:32\n\n  \u25cf Data Fetching - Optimistic Updates \u203a reverts optimistic update on server error\n\n    FetchError: invalid json response body at http://localhost:8000/api/threads reason: Unexpected end of JSON input\n\n      at node_modules/node-fetch/lib/index.js:273:32\n\n  \u25cf Data Fetching - Optimistic Updates \u203a reverts optimistic update on server error\n\n    FetchError: invalid json response body at http://localhost:8000/api/threads reason: Unexpected end of JSON input\n\n      at node_modules/node-fetch/lib/index.js:273:32\n\n  \u25cf Data Fetching - Optimistic Updates \u203a reverts optimistic update on server error\n\n    FetchError: invalid json response body at http://localhost:8000/api/threads reason: Unexpected end of JSON input\n\n      at node_modules/node-fetch/lib/index.js:273:32\n\n  \u25cf Data Fetching - Optimistic Updates \u203a handles multiple concurrent optimistic updates\n\n    Unable to find an element by: [data-testid=\"pending\"]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div>\u001b[39m\n        \u001b[36m<div\u001b[39m\n          \u001b[33mdata-testid\u001b[39m=\u001b[32m\"optimistic-thread-manager\"\u001b[39m\n        \u001b[36m>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"add-thread\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mAdd Thread\u001b[0m\n          \u001b[36m</button>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"thread-thread-1755824064054\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<span>\u001b[39m\n              \u001b[0mNew Thread\u001b[0m\n            \u001b[36m</span>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"update-thread-1755824064054\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mUpdate\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"delete-thread-1755824064054\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mDelete\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"thread-thread-1755824064054\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<span>\u001b[39m\n              \u001b[0mNew Thread\u001b[0m\n            \u001b[36m</span>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"update-thread-1755824064054\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mUpdate\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"delete-thread-1755824064054\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mDelete\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"thread-thread-1755824064055\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<span>\u001b[39m\n              \u001b[0mNew Thread\u001b[0m\n            \u001b[36m</span>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"update-thread-1755824064055\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mUpdate\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"delete-thread-1755824064055\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mDelete\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</div>\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n    \u001b[0m \u001b[90m 345 |\u001b[39m     \n     \u001b[90m 346 |\u001b[39m     \u001b[90m// Should handle all pending states\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 347 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 348 |\u001b[39m       \u001b[36mconst\u001b[39m pendingStates \u001b[33m=\u001b[39m screen\u001b[33m.\u001b[39mgetAllByTestId(\u001b[32m'pending'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 349 |\u001b[39m       expect(pendingStates\u001b[33m.\u001b[39mlength)\u001b[33m.\u001b[39mtoBeGreaterThan(\u001b[35m0\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 350 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at Object.<anonymous> (__tests__/integration/data-fetching-optimistic.test.tsx:347:18)\n\nFAIL Integration Tests __tests__/integration/error-handling-core.test.tsx\n  Error Handling - 4xx Client Errors\n    \u00d7 handles 404 Not Found errors (36 ms)\n    \u00d7 handles 401 Unauthorized errors (11 ms)\n    \u221a handles 403 Forbidden errors (8 ms)\n    \u00d7 handles 422 Validation errors with details (7 ms)\n    \u00d7 handles 429 Rate Limiting errors (18 ms)\n  Error Handling - 5xx Server Errors\n    \u00d7 handles 500 Internal Server errors with retry (19 ms)\n    \u00d7 handles 502 Bad Gateway errors (15 ms)\n    \u00d7 handles 503 Service Unavailable errors (15 ms)\n    \u00d7 allows manual retry after failure (15 ms)\n\n  \u25cf Error Handling - 4xx Client Errors \u203a handles 404 Not Found errors\n\n    expect(element).toHaveTextContent()\n\n    Expected element to have text content:\n      Resource not found\n    Received:\n      Error: HTTP 404: Not Found\n\n    \u001b[0m \u001b[90m 374 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 375 |\u001b[39m     \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 376 |\u001b[39m     expect(screen\u001b[33m.\u001b[39mgetByTestId(\u001b[32m'error-message'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'Resource not found'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 377 |\u001b[39m     expect(screen\u001b[33m.\u001b[39mgetByTestId(\u001b[32m'error-status'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'404'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 378 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 379 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/error-handling-core.test.tsx:376:49)\n\n  \u25cf Error Handling - 4xx Client Errors \u203a handles 401 Unauthorized errors\n\n    expect(element).toHaveTextContent()\n\n    Expected element to have text content:\n      Unauthorized access\n    Received:\n      Error: HTTP 401: Unauthorized\n\n    \u001b[0m \u001b[90m 385 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 386 |\u001b[39m     \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 387 |\u001b[39m     expect(screen\u001b[33m.\u001b[39mgetByTestId(\u001b[32m'error-message'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'Unauthorized access'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 388 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 389 |\u001b[39m\n     \u001b[90m 390 |\u001b[39m   it(\u001b[32m'handles 403 Forbidden errors'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/error-handling-core.test.tsx:387:49)\n\n  \u25cf Error Handling - 4xx Client Errors \u203a handles 422 Validation errors with details\n\n    expect(element).toHaveTextContent()\n\n    Expected element to have text content:\n      Validation failed\n    Received:\n      Error: HTTP 422: Unprocessable Entity\n\n    \u001b[0m \u001b[90m 403 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 404 |\u001b[39m     \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 405 |\u001b[39m     expect(screen\u001b[33m.\u001b[39mgetByTestId(\u001b[32m'error-message'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'Validation failed'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 406 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 407 |\u001b[39m\n     \u001b[90m 408 |\u001b[39m   it(\u001b[32m'handles 429 Rate Limiting errors'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/error-handling-core.test.tsx:405:49)\n\n  \u25cf Error Handling - 4xx Client Errors \u203a handles 429 Rate Limiting errors\n\n    Unable to find an element by: [data-testid=\"error-status\"]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div>\u001b[39m\n        \u001b[36m<div\u001b[39m\n          \u001b[33mdata-testid\u001b[39m=\u001b[32m\"loading\"\u001b[39m\n        \u001b[36m>\u001b[39m\n          \u001b[0mLoading... \u001b[0m\n          \u001b[36m<span\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"retry-count\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mRetry \u001b[0m\n            \u001b[0m2\u001b[0m\n          \u001b[36m</span>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</div>\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n    \u001b[0m \u001b[90m 422 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 423 |\u001b[39m     \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 424 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 425 |\u001b[39m       expect(screen\u001b[33m.\u001b[39mgetByTestId(\u001b[32m'error-status'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'429'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 426 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 427 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at Object.<anonymous> (__tests__/integration/error-handling-core.test.tsx:424:18)\n\n  \u25cf Error Handling - 5xx Server Errors \u203a handles 500 Internal Server errors with retry\n\n    Unable to find an element by: [data-testid=\"error-status\"]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div>\u001b[39m\n        \u001b[36m<div\u001b[39m\n          \u001b[33mdata-testid\u001b[39m=\u001b[32m\"loading\"\u001b[39m\n        \u001b[36m>\u001b[39m\n          \u001b[0mLoading... \u001b[0m\n          \u001b[36m<span\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"retry-count\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mRetry \u001b[0m\n            \u001b[0m2\u001b[0m\n          \u001b[36m</span>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</div>\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n    \u001b[0m \u001b[90m 449 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 450 |\u001b[39m     \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 451 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 452 |\u001b[39m       expect(screen\u001b[33m.\u001b[39mgetByTestId(\u001b[32m'error-status'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'500'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 453 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 454 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at Object.<anonymous> (__tests__/integration/error-handling-core.test.tsx:451:18)\n\n  \u25cf Error Handling - 5xx Server Errors \u203a handles 502 Bad Gateway errors\n\n    Unable to find an element by: [data-testid=\"error-status\"]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div>\u001b[39m\n        \u001b[36m<div\u001b[39m\n          \u001b[33mdata-testid\u001b[39m=\u001b[32m\"loading\"\u001b[39m\n        \u001b[36m>\u001b[39m\n          \u001b[0mLoading... \u001b[0m\n          \u001b[36m<span\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"retry-count\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mRetry \u001b[0m\n            \u001b[0m1\u001b[0m\n          \u001b[36m</span>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</div>\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n    \u001b[0m \u001b[90m 457 |\u001b[39m     render(\u001b[33m<\u001b[39m\u001b[33mErrorHandlingComponent\u001b[39m url\u001b[33m=\u001b[39m{\u001b[32m`${mockApiUrl}/api/bad-gateway`\u001b[39m} \u001b[33m/\u001b[39m\u001b[33m>\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 458 |\u001b[39m     \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 459 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 460 |\u001b[39m       expect(screen\u001b[33m.\u001b[39mgetByTestId(\u001b[32m'error-status'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'502'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 461 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 462 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at Object.<anonymous> (__tests__/integration/error-handling-core.test.tsx:459:18)\n\n  \u25cf Error Handling - 5xx Server Errors \u203a handles 503 Service Unavailable errors\n\n    Unable to find an element by: [data-testid=\"error-status\"]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div>\u001b[39m\n        \u001b[36m<div\u001b[39m\n          \u001b[33mdata-testid\u001b[39m=\u001b[32m\"loading\"\u001b[39m\n        \u001b[36m>\u001b[39m\n          \u001b[0mLoading... \u001b[0m\n          \u001b[36m<span\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"retry-count\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mRetry \u001b[0m\n            \u001b[0m1\u001b[0m\n          \u001b[36m</span>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</div>\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n    \u001b[0m \u001b[90m 465 |\u001b[39m     render(\u001b[33m<\u001b[39m\u001b[33mErrorHandlingComponent\u001b[39m url\u001b[33m=\u001b[39m{\u001b[32m`${mockApiUrl}/api/service-unavailable`\u001b[39m} \u001b[33m/\u001b[39m\u001b[33m>\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 466 |\u001b[39m     \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 467 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 468 |\u001b[39m       expect(screen\u001b[33m.\u001b[39mgetByTestId(\u001b[32m'error-status'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'503'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 469 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 470 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at Object.<anonymous> (__tests__/integration/error-handling-core.test.tsx:467:18)\n\n  \u25cf Error Handling - 5xx Server Errors \u203a allows manual retry after failure\n\n    Unable to find an element by: [data-testid=\"error-display\"]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div>\u001b[39m\n        \u001b[36m<div\u001b[39m\n          \u001b[33mdata-testid\u001b[39m=\u001b[32m\"loading\"\u001b[39m\n        \u001b[36m>\u001b[39m\n          \u001b[0mLoading... \u001b[0m\n          \u001b[36m<span\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"retry-count\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mRetry \u001b[0m\n            \u001b[0m1\u001b[0m\n          \u001b[36m</span>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</div>\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n    \u001b[0m \u001b[90m 473 |\u001b[39m     render(\u001b[33m<\u001b[39m\u001b[33mErrorHandlingComponent\u001b[39m url\u001b[33m=\u001b[39m{\u001b[32m`${mockApiUrl}/api/server-error`\u001b[39m} \u001b[33m/\u001b[39m\u001b[33m>\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 474 |\u001b[39m     \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 475 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 476 |\u001b[39m       expect(screen\u001b[33m.\u001b[39mgetByTestId(\u001b[32m'error-display'\u001b[39m))\u001b[33m.\u001b[39mtoBeInTheDocument()\u001b[33m;\u001b[39m\n     \u001b[90m 477 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 478 |\u001b[39m     \u001b[0m\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at Object.<anonymous> (__tests__/integration/error-handling-core.test.tsx:475:18)\n\nFAIL Integration Tests __tests__/auth/login-to-chat-advanced.test.tsx\n  Auth Login Advanced Features\n    Remember Me Functionality\n      \u00d7 stores remember me preference in cookies (13 ms)\n      \u00d7 extends token expiration with remember me (6 ms)\n      \u00d7 clears remember me on explicit logout (13 ms)\n    Social Login Integration\n      \u00d7 initiates Google OAuth flow (4 ms)\n      \u00d7 handles OAuth callback with authorization code (6 ms)\n      \u00d7 displays error for failed OAuth flow (6 ms)\n    MFA (Multi-Factor Authentication)\n      \u00d7 prompts for MFA code when required (6 ms)\n      \u00d7 validates MFA code and completes login (7 ms)\n      \u00d7 handles invalid MFA code gracefully (7 ms)\n      \u00d7 handles MFA verification failure (7 ms)\n\n  \u25cf Auth Login Advanced Features \u203a Remember Me Functionality \u203a stores remember me preference in cookies\n\n    ReferenceError: Invalid left-hand side in assignment\n\n    \u001b[0m \u001b[90m 49 |\u001b[39m\n     \u001b[90m 50 |\u001b[39m \u001b[36mexport\u001b[39m \u001b[36mfunction\u001b[39m setupMockAuthService() {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 51 |\u001b[39m   jest\u001b[33m.\u001b[39mmocked(authService\u001b[33m.\u001b[39mhandleLogin) \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockResolvedValue({\n     \u001b[90m    |\u001b[39m        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 52 |\u001b[39m     success\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 53 |\u001b[39m     user\u001b[33m:\u001b[39m mockUser\u001b[33m,\u001b[39m\n     \u001b[90m 54 |\u001b[39m     token\u001b[33m:\u001b[39m mockToken\u001b[0m\n\n      at setupMockAuthService (__tests__/auth/login-to-chat-utils.tsx:51:8)\n      at Object.<anonymous> (__tests__/auth/login-to-chat-advanced.test.tsx:43:25)\n\n  \u25cf Auth Login Advanced Features \u203a Remember Me Functionality \u203a extends token expiration with remember me\n\n    ReferenceError: Invalid left-hand side in assignment\n\n    \u001b[0m \u001b[90m 49 |\u001b[39m\n     \u001b[90m 50 |\u001b[39m \u001b[36mexport\u001b[39m \u001b[36mfunction\u001b[39m setupMockAuthService() {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 51 |\u001b[39m   jest\u001b[33m.\u001b[39mmocked(authService\u001b[33m.\u001b[39mhandleLogin) \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockResolvedValue({\n     \u001b[90m    |\u001b[39m        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 52 |\u001b[39m     success\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 53 |\u001b[39m     user\u001b[33m:\u001b[39m mockUser\u001b[33m,\u001b[39m\n     \u001b[90m 54 |\u001b[39m     token\u001b[33m:\u001b[39m mockToken\u001b[0m\n\n      at setupMockAuthService (__tests__/auth/login-to-chat-utils.tsx:51:8)\n      at Object.<anonymous> (__tests__/auth/login-to-chat-advanced.test.tsx:43:25)\n\n  \u25cf Auth Login Advanced Features \u203a Remember Me Functionality \u203a clears remember me on explicit logout\n\n    ReferenceError: Invalid left-hand side in assignment\n\n    \u001b[0m \u001b[90m 49 |\u001b[39m\n     \u001b[90m 50 |\u001b[39m \u001b[36mexport\u001b[39m \u001b[36mfunction\u001b[39m setupMockAuthService() {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 51 |\u001b[39m   jest\u001b[33m.\u001b[39mmocked(authService\u001b[33m.\u001b[39mhandleLogin) \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockResolvedValue({\n     \u001b[90m    |\u001b[39m        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 52 |\u001b[39m     success\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 53 |\u001b[39m     user\u001b[33m:\u001b[39m mockUser\u001b[33m,\u001b[39m\n     \u001b[90m 54 |\u001b[39m     token\u001b[33m:\u001b[39m mockToken\u001b[0m\n\n      at setupMockAuthService (__tests__/auth/login-to-chat-utils.tsx:51:8)\n      at Object.<anonymous> (__tests__/auth/login-to-chat-advanced.test.tsx:43:25)\n\n  \u25cf Auth Login Advanced Features \u203a Social Login Integration \u203a initiates Google OAuth flow\n\n    ReferenceError: Invalid left-hand side in assignment\n\n    \u001b[0m \u001b[90m 49 |\u001b[39m\n     \u001b[90m 50 |\u001b[39m \u001b[36mexport\u001b[39m \u001b[36mfunction\u001b[39m setupMockAuthService() {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 51 |\u001b[39m   jest\u001b[33m.\u001b[39mmocked(authService\u001b[33m.\u001b[39mhandleLogin) \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockResolvedValue({\n     \u001b[90m    |\u001b[39m        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 52 |\u001b[39m     success\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 53 |\u001b[39m     user\u001b[33m:\u001b[39m mockUser\u001b[33m,\u001b[39m\n     \u001b[90m 54 |\u001b[39m     token\u001b[33m:\u001b[39m mockToken\u001b[0m\n\n      at setupMockAuthService (__tests__/auth/login-to-chat-utils.tsx:51:8)\n      at Object.<anonymous> (__tests__/auth/login-to-chat-advanced.test.tsx:43:25)\n\n  \u25cf Auth Login Advanced Features \u203a Social Login Integration \u203a handles OAuth callback with authorization code\n\n    ReferenceError: Invalid left-hand side in assignment\n\n    \u001b[0m \u001b[90m 49 |\u001b[39m\n     \u001b[90m 50 |\u001b[39m \u001b[36mexport\u001b[39m \u001b[36mfunction\u001b[39m setupMockAuthService() {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 51 |\u001b[39m   jest\u001b[33m.\u001b[39mmocked(authService\u001b[33m.\u001b[39mhandleLogin) \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockResolvedValue({\n     \u001b[90m    |\u001b[39m        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 52 |\u001b[39m     success\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 53 |\u001b[39m     user\u001b[33m:\u001b[39m mockUser\u001b[33m,\u001b[39m\n     \u001b[90m 54 |\u001b[39m     token\u001b[33m:\u001b[39m mockToken\u001b[0m\n\n      at setupMockAuthService (__tests__/auth/login-to-chat-utils.tsx:51:8)\n      at Object.<anonymous> (__tests__/auth/login-to-chat-advanced.test.tsx:43:25)\n\n  \u25cf Auth Login Advanced Features \u203a Social Login Integration \u203a displays error for failed OAuth flow\n\n    ReferenceError: Invalid left-hand side in assignment\n\n    \u001b[0m \u001b[90m 49 |\u001b[39m\n     \u001b[90m 50 |\u001b[39m \u001b[36mexport\u001b[39m \u001b[36mfunction\u001b[39m setupMockAuthService() {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 51 |\u001b[39m   jest\u001b[33m.\u001b[39mmocked(authService\u001b[33m.\u001b[39mhandleLogin) \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockResolvedValue({\n     \u001b[90m    |\u001b[39m        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 52 |\u001b[39m     success\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 53 |\u001b[39m     user\u001b[33m:\u001b[39m mockUser\u001b[33m,\u001b[39m\n     \u001b[90m 54 |\u001b[39m     token\u001b[33m:\u001b[39m mockToken\u001b[0m\n\n      at setupMockAuthService (__tests__/auth/login-to-chat-utils.tsx:51:8)\n      at Object.<anonymous> (__tests__/auth/login-to-chat-advanced.test.tsx:43:25)\n\n  \u25cf Auth Login Advanced Features \u203a MFA (Multi-Factor Authentication) \u203a prompts for MFA code when required\n\n    ReferenceError: Invalid left-hand side in assignment\n\n    \u001b[0m \u001b[90m 49 |\u001b[39m\n     \u001b[90m 50 |\u001b[39m \u001b[36mexport\u001b[39m \u001b[36mfunction\u001b[39m setupMockAuthService() {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 51 |\u001b[39m   jest\u001b[33m.\u001b[39mmocked(authService\u001b[33m.\u001b[39mhandleLogin) \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockResolvedValue({\n     \u001b[90m    |\u001b[39m        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 52 |\u001b[39m     success\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 53 |\u001b[39m     user\u001b[33m:\u001b[39m mockUser\u001b[33m,\u001b[39m\n     \u001b[90m 54 |\u001b[39m     token\u001b[33m:\u001b[39m mockToken\u001b[0m\n\n      at setupMockAuthService (__tests__/auth/login-to-chat-utils.tsx:51:8)\n      at Object.<anonymous> (__tests__/auth/login-to-chat-advanced.test.tsx:43:25)\n\n  \u25cf Auth Login Advanced Features \u203a MFA (Multi-Factor Authentication) \u203a validates MFA code and completes login\n\n    ReferenceError: Invalid left-hand side in assignment\n\n    \u001b[0m \u001b[90m 49 |\u001b[39m\n     \u001b[90m 50 |\u001b[39m \u001b[36mexport\u001b[39m \u001b[36mfunction\u001b[39m setupMockAuthService() {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 51 |\u001b[39m   jest\u001b[33m.\u001b[39mmocked(authService\u001b[33m.\u001b[39mhandleLogin) \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockResolvedValue({\n     \u001b[90m    |\u001b[39m        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 52 |\u001b[39m     success\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 53 |\u001b[39m     user\u001b[33m:\u001b[39m mockUser\u001b[33m,\u001b[39m\n     \u001b[90m 54 |\u001b[39m     token\u001b[33m:\u001b[39m mockToken\u001b[0m\n\n      at setupMockAuthService (__tests__/auth/login-to-chat-utils.tsx:51:8)\n      at Object.<anonymous> (__tests__/auth/login-to-chat-advanced.test.tsx:43:25)\n\n  \u25cf Auth Login Advanced Features \u203a MFA (Multi-Factor Authentication) \u203a handles invalid MFA code gracefully\n\n    ReferenceError: Invalid left-hand side in assignment\n\n    \u001b[0m \u001b[90m 49 |\u001b[39m\n     \u001b[90m 50 |\u001b[39m \u001b[36mexport\u001b[39m \u001b[36mfunction\u001b[39m setupMockAuthService() {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 51 |\u001b[39m   jest\u001b[33m.\u001b[39mmocked(authService\u001b[33m.\u001b[39mhandleLogin) \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockResolvedValue({\n     \u001b[90m    |\u001b[39m        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 52 |\u001b[39m     success\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 53 |\u001b[39m     user\u001b[33m:\u001b[39m mockUser\u001b[33m,\u001b[39m\n     \u001b[90m 54 |\u001b[39m     token\u001b[33m:\u001b[39m mockToken\u001b[0m\n\n      at setupMockAuthService (__tests__/auth/login-to-chat-utils.tsx:51:8)\n      at Object.<anonymous> (__tests__/auth/login-to-chat-advanced.test.tsx:43:25)\n\n  \u25cf Auth Login Advanced Features \u203a MFA (Multi-Factor Authentication) \u203a handles MFA verification failure\n\n    ReferenceError: Invalid left-hand side in assignment\n\n    \u001b[0m \u001b[90m 49 |\u001b[39m\n     \u001b[90m 50 |\u001b[39m \u001b[36mexport\u001b[39m \u001b[36mfunction\u001b[39m setupMockAuthService() {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 51 |\u001b[39m   jest\u001b[33m.\u001b[39mmocked(authService\u001b[33m.\u001b[39mhandleLogin) \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockResolvedValue({\n     \u001b[90m    |\u001b[39m        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 52 |\u001b[39m     success\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 53 |\u001b[39m     user\u001b[33m:\u001b[39m mockUser\u001b[33m,\u001b[39m\n     \u001b[90m 54 |\u001b[39m     token\u001b[33m:\u001b[39m mockToken\u001b[0m\n\n      at setupMockAuthService (__tests__/auth/login-to-chat-utils.tsx:51:8)\n      at Object.<anonymous> (__tests__/auth/login-to-chat-advanced.test.tsx:43:25)\n\nFAIL Integration Tests __tests__/integration/thread-creation-advanced.test.tsx\n  Thread Creation Advanced Scenarios\n    Input Field Auto-Focus\n      \u00d7 focuses message input after thread creation (1 ms)\n      \u00d7 positions cursor at start of input (1 ms)\n      \u00d7 clears any existing draft content (1 ms)\n      \u00d7 maintains focus after thread switch (1 ms)\n    Duplicate Prevention\n      \u00d7 prevents duplicate threads on double-click\n      \u00d7 prevents rapid clicking during API call\n      \u00d7 uses unique thread IDs for each creation\n      \u00d7 handles race conditions correctly\n    Error Recovery and Retry\n      \u00d7 allows retry after network failure (1 ms)\n      \u00d7 handles timeout errors gracefully\n      \u00d7 shows appropriate error messages\n      \u00d7 preserves user context after error\n    Performance Edge Cases\n      \u00d7 handles creation during high CPU load\n      \u00d7 works with slow network conditions\n      \u00d7 handles memory constraints gracefully\n    Mobile and Touch Specific Tests\n      \u00d7 prevents accidental double-tap creation\n      \u00d7 handles touch gestures correctly\n      \u00d7 works with virtual keyboard open\n\n  \u25cf Thread Creation Advanced Scenarios \u203a Input Field Auto-Focus \u203a focuses message input after thread creation\n\n    TypeError: navigation_1.useRouter.mockReturnValue is not a function\n\n    \u001b[0m \u001b[90m 221 |\u001b[39m   \u001b[36mfunction\u001b[39m setupAdvancedTests()\u001b[33m:\u001b[39m \u001b[36mvoid\u001b[39m {\n     \u001b[90m 222 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 223 |\u001b[39m     (useRouter \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockReturnValue(mockRouter)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 224 |\u001b[39m     mockAuthServiceFetch()\u001b[33m;\u001b[39m\n     \u001b[90m 225 |\u001b[39m     setupDefaultMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 226 |\u001b[39m   }\u001b[0m\n\n      at setupAdvancedTests (__tests__/integration/thread-creation-advanced.test.tsx:223:30)\n      at Object.<anonymous> (__tests__/integration/thread-creation-advanced.test.tsx:72:5)\n\n  \u25cf Thread Creation Advanced Scenarios \u203a Input Field Auto-Focus \u203a positions cursor at start of input\n\n    TypeError: navigation_1.useRouter.mockReturnValue is not a function\n\n    \u001b[0m \u001b[90m 221 |\u001b[39m   \u001b[36mfunction\u001b[39m setupAdvancedTests()\u001b[33m:\u001b[39m \u001b[36mvoid\u001b[39m {\n     \u001b[90m 222 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 223 |\u001b[39m     (useRouter \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockReturnValue(mockRouter)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 224 |\u001b[39m     mockAuthServiceFetch()\u001b[33m;\u001b[39m\n     \u001b[90m 225 |\u001b[39m     setupDefaultMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 226 |\u001b[39m   }\u001b[0m\n\n      at setupAdvancedTests (__tests__/integration/thread-creation-advanced.test.tsx:223:30)\n      at Object.<anonymous> (__tests__/integration/thread-creation-advanced.test.tsx:72:5)\n\n  \u25cf Thread Creation Advanced Scenarios \u203a Input Field Auto-Focus \u203a clears any existing draft content\n\n    TypeError: navigation_1.useRouter.mockReturnValue is not a function\n\n    \u001b[0m \u001b[90m 221 |\u001b[39m   \u001b[36mfunction\u001b[39m setupAdvancedTests()\u001b[33m:\u001b[39m \u001b[36mvoid\u001b[39m {\n     \u001b[90m 222 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 223 |\u001b[39m     (useRouter \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockReturnValue(mockRouter)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 224 |\u001b[39m     mockAuthServiceFetch()\u001b[33m;\u001b[39m\n     \u001b[90m 225 |\u001b[39m     setupDefaultMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 226 |\u001b[39m   }\u001b[0m\n\n      at setupAdvancedTests (__tests__/integration/thread-creation-advanced.test.tsx:223:30)\n      at Object.<anonymous> (__tests__/integration/thread-creation-advanced.test.tsx:72:5)\n\n  \u25cf Thread Creation Advanced Scenarios \u203a Input Field Auto-Focus \u203a maintains focus after thread switch\n\n    TypeError: navigation_1.useRouter.mockReturnValue is not a function\n\n    \u001b[0m \u001b[90m 221 |\u001b[39m   \u001b[36mfunction\u001b[39m setupAdvancedTests()\u001b[33m:\u001b[39m \u001b[36mvoid\u001b[39m {\n     \u001b[90m 222 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 223 |\u001b[39m     (useRouter \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockReturnValue(mockRouter)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 224 |\u001b[39m     mockAuthServiceFetch()\u001b[33m;\u001b[39m\n     \u001b[90m 225 |\u001b[39m     setupDefaultMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 226 |\u001b[39m   }\u001b[0m\n\n      at setupAdvancedTests (__tests__/integration/thread-creation-advanced.test.tsx:223:30)\n      at Object.<anonymous> (__tests__/integration/thread-creation-advanced.test.tsx:72:5)\n\n  \u25cf Thread Creation Advanced Scenarios \u203a Duplicate Prevention \u203a prevents duplicate threads on double-click\n\n    TypeError: navigation_1.useRouter.mockReturnValue is not a function\n\n    \u001b[0m \u001b[90m 221 |\u001b[39m   \u001b[36mfunction\u001b[39m setupAdvancedTests()\u001b[33m:\u001b[39m \u001b[36mvoid\u001b[39m {\n     \u001b[90m 222 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 223 |\u001b[39m     (useRouter \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockReturnValue(mockRouter)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 224 |\u001b[39m     mockAuthServiceFetch()\u001b[33m;\u001b[39m\n     \u001b[90m 225 |\u001b[39m     setupDefaultMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 226 |\u001b[39m   }\u001b[0m\n\n      at setupAdvancedTests (__tests__/integration/thread-creation-advanced.test.tsx:223:30)\n      at Object.<anonymous> (__tests__/integration/thread-creation-advanced.test.tsx:72:5)\n\n  \u25cf Thread Creation Advanced Scenarios \u203a Duplicate Prevention \u203a prevents rapid clicking during API call\n\n    TypeError: navigation_1.useRouter.mockReturnValue is not a function\n\n    \u001b[0m \u001b[90m 221 |\u001b[39m   \u001b[36mfunction\u001b[39m setupAdvancedTests()\u001b[33m:\u001b[39m \u001b[36mvoid\u001b[39m {\n     \u001b[90m 222 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 223 |\u001b[39m     (useRouter \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockReturnValue(mockRouter)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 224 |\u001b[39m     mockAuthServiceFetch()\u001b[33m;\u001b[39m\n     \u001b[90m 225 |\u001b[39m     setupDefaultMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 226 |\u001b[39m   }\u001b[0m\n\n      at setupAdvancedTests (__tests__/integration/thread-creation-advanced.test.tsx:223:30)\n      at Object.<anonymous> (__tests__/integration/thread-creation-advanced.test.tsx:72:5)\n\n  \u25cf Thread Creation Advanced Scenarios \u203a Duplicate Prevention \u203a uses unique thread IDs for each creation\n\n    TypeError: navigation_1.useRouter.mockReturnValue is not a function\n\n    \u001b[0m \u001b[90m 221 |\u001b[39m   \u001b[36mfunction\u001b[39m setupAdvancedTests()\u001b[33m:\u001b[39m \u001b[36mvoid\u001b[39m {\n     \u001b[90m 222 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 223 |\u001b[39m     (useRouter \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockReturnValue(mockRouter)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 224 |\u001b[39m     mockAuthServiceFetch()\u001b[33m;\u001b[39m\n     \u001b[90m 225 |\u001b[39m     setupDefaultMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 226 |\u001b[39m   }\u001b[0m\n\n      at setupAdvancedTests (__tests__/integration/thread-creation-advanced.test.tsx:223:30)\n      at Object.<anonymous> (__tests__/integration/thread-creation-advanced.test.tsx:72:5)\n\n  \u25cf Thread Creation Advanced Scenarios \u203a Duplicate Prevention \u203a handles race conditions correctly\n\n    TypeError: navigation_1.useRouter.mockReturnValue is not a function\n\n    \u001b[0m \u001b[90m 221 |\u001b[39m   \u001b[36mfunction\u001b[39m setupAdvancedTests()\u001b[33m:\u001b[39m \u001b[36mvoid\u001b[39m {\n     \u001b[90m 222 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 223 |\u001b[39m     (useRouter \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockReturnValue(mockRouter)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 224 |\u001b[39m     mockAuthServiceFetch()\u001b[33m;\u001b[39m\n     \u001b[90m 225 |\u001b[39m     setupDefaultMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 226 |\u001b[39m   }\u001b[0m\n\n      at setupAdvancedTests (__tests__/integration/thread-creation-advanced.test.tsx:223:30)\n      at Object.<anonymous> (__tests__/integration/thread-creation-advanced.test.tsx:72:5)\n\n  \u25cf Thread Creation Advanced Scenarios \u203a Error Recovery and Retry \u203a allows retry after network failure\n\n    TypeError: navigation_1.useRouter.mockReturnValue is not a function\n\n    \u001b[0m \u001b[90m 221 |\u001b[39m   \u001b[36mfunction\u001b[39m setupAdvancedTests()\u001b[33m:\u001b[39m \u001b[36mvoid\u001b[39m {\n     \u001b[90m 222 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 223 |\u001b[39m     (useRouter \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockReturnValue(mockRouter)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 224 |\u001b[39m     mockAuthServiceFetch()\u001b[33m;\u001b[39m\n     \u001b[90m 225 |\u001b[39m     setupDefaultMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 226 |\u001b[39m   }\u001b[0m\n\n      at setupAdvancedTests (__tests__/integration/thread-creation-advanced.test.tsx:223:30)\n      at Object.<anonymous> (__tests__/integration/thread-creation-advanced.test.tsx:72:5)\n\n  \u25cf Thread Creation Advanced Scenarios \u203a Error Recovery and Retry \u203a handles timeout errors gracefully\n\n    TypeError: navigation_1.useRouter.mockReturnValue is not a function\n\n    \u001b[0m \u001b[90m 221 |\u001b[39m   \u001b[36mfunction\u001b[39m setupAdvancedTests()\u001b[33m:\u001b[39m \u001b[36mvoid\u001b[39m {\n     \u001b[90m 222 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 223 |\u001b[39m     (useRouter \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockReturnValue(mockRouter)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 224 |\u001b[39m     mockAuthServiceFetch()\u001b[33m;\u001b[39m\n     \u001b[90m 225 |\u001b[39m     setupDefaultMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 226 |\u001b[39m   }\u001b[0m\n\n      at setupAdvancedTests (__tests__/integration/thread-creation-advanced.test.tsx:223:30)\n      at Object.<anonymous> (__tests__/integration/thread-creation-advanced.test.tsx:72:5)\n\n  \u25cf Thread Creation Advanced Scenarios \u203a Error Recovery and Retry \u203a shows appropriate error messages\n\n    TypeError: navigation_1.useRouter.mockReturnValue is not a function\n\n    \u001b[0m \u001b[90m 221 |\u001b[39m   \u001b[36mfunction\u001b[39m setupAdvancedTests()\u001b[33m:\u001b[39m \u001b[36mvoid\u001b[39m {\n     \u001b[90m 222 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 223 |\u001b[39m     (useRouter \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockReturnValue(mockRouter)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 224 |\u001b[39m     mockAuthServiceFetch()\u001b[33m;\u001b[39m\n     \u001b[90m 225 |\u001b[39m     setupDefaultMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 226 |\u001b[39m   }\u001b[0m\n\n      at setupAdvancedTests (__tests__/integration/thread-creation-advanced.test.tsx:223:30)\n      at Object.<anonymous> (__tests__/integration/thread-creation-advanced.test.tsx:72:5)\n\n  \u25cf Thread Creation Advanced Scenarios \u203a Error Recovery and Retry \u203a preserves user context after error\n\n    TypeError: navigation_1.useRouter.mockReturnValue is not a function\n\n    \u001b[0m \u001b[90m 221 |\u001b[39m   \u001b[36mfunction\u001b[39m setupAdvancedTests()\u001b[33m:\u001b[39m \u001b[36mvoid\u001b[39m {\n     \u001b[90m 222 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 223 |\u001b[39m     (useRouter \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockReturnValue(mockRouter)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 224 |\u001b[39m     mockAuthServiceFetch()\u001b[33m;\u001b[39m\n     \u001b[90m 225 |\u001b[39m     setupDefaultMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 226 |\u001b[39m   }\u001b[0m\n\n      at setupAdvancedTests (__tests__/integration/thread-creation-advanced.test.tsx:223:30)\n      at Object.<anonymous> (__tests__/integration/thread-creation-advanced.test.tsx:72:5)\n\n  \u25cf Thread Creation Advanced Scenarios \u203a Performance Edge Cases \u203a handles creation during high CPU load\n\n    TypeError: navigation_1.useRouter.mockReturnValue is not a function\n\n    \u001b[0m \u001b[90m 221 |\u001b[39m   \u001b[36mfunction\u001b[39m setupAdvancedTests()\u001b[33m:\u001b[39m \u001b[36mvoid\u001b[39m {\n     \u001b[90m 222 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 223 |\u001b[39m     (useRouter \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockReturnValue(mockRouter)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 224 |\u001b[39m     mockAuthServiceFetch()\u001b[33m;\u001b[39m\n     \u001b[90m 225 |\u001b[39m     setupDefaultMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 226 |\u001b[39m   }\u001b[0m\n\n      at setupAdvancedTests (__tests__/integration/thread-creation-advanced.test.tsx:223:30)\n      at Object.<anonymous> (__tests__/integration/thread-creation-advanced.test.tsx:72:5)\n\n  \u25cf Thread Creation Advanced Scenarios \u203a Performance Edge Cases \u203a works with slow network conditions\n\n    TypeError: navigation_1.useRouter.mockReturnValue is not a function\n\n    \u001b[0m \u001b[90m 221 |\u001b[39m   \u001b[36mfunction\u001b[39m setupAdvancedTests()\u001b[33m:\u001b[39m \u001b[36mvoid\u001b[39m {\n     \u001b[90m 222 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 223 |\u001b[39m     (useRouter \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockReturnValue(mockRouter)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 224 |\u001b[39m     mockAuthServiceFetch()\u001b[33m;\u001b[39m\n     \u001b[90m 225 |\u001b[39m     setupDefaultMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 226 |\u001b[39m   }\u001b[0m\n\n      at setupAdvancedTests (__tests__/integration/thread-creation-advanced.test.tsx:223:30)\n      at Object.<anonymous> (__tests__/integration/thread-creation-advanced.test.tsx:72:5)\n\n  \u25cf Thread Creation Advanced Scenarios \u203a Performance Edge Cases \u203a handles memory constraints gracefully\n\n    TypeError: navigation_1.useRouter.mockReturnValue is not a function\n\n    \u001b[0m \u001b[90m 221 |\u001b[39m   \u001b[36mfunction\u001b[39m setupAdvancedTests()\u001b[33m:\u001b[39m \u001b[36mvoid\u001b[39m {\n     \u001b[90m 222 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 223 |\u001b[39m     (useRouter \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockReturnValue(mockRouter)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 224 |\u001b[39m     mockAuthServiceFetch()\u001b[33m;\u001b[39m\n     \u001b[90m 225 |\u001b[39m     setupDefaultMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 226 |\u001b[39m   }\u001b[0m\n\n      at setupAdvancedTests (__tests__/integration/thread-creation-advanced.test.tsx:223:30)\n      at Object.<anonymous> (__tests__/integration/thread-creation-advanced.test.tsx:72:5)\n\n  \u25cf Thread Creation Advanced Scenarios \u203a Mobile and Touch Specific Tests \u203a prevents accidental double-tap creation\n\n    TypeError: navigation_1.useRouter.mockReturnValue is not a function\n\n    \u001b[0m \u001b[90m 221 |\u001b[39m   \u001b[36mfunction\u001b[39m setupAdvancedTests()\u001b[33m:\u001b[39m \u001b[36mvoid\u001b[39m {\n     \u001b[90m 222 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 223 |\u001b[39m     (useRouter \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockReturnValue(mockRouter)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 224 |\u001b[39m     mockAuthServiceFetch()\u001b[33m;\u001b[39m\n     \u001b[90m 225 |\u001b[39m     setupDefaultMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 226 |\u001b[39m   }\u001b[0m\n\n      at setupAdvancedTests (__tests__/integration/thread-creation-advanced.test.tsx:223:30)\n      at Object.<anonymous> (__tests__/integration/thread-creation-advanced.test.tsx:72:5)\n\n  \u25cf Thread Creation Advanced Scenarios \u203a Mobile and Touch Specific Tests \u203a handles touch gestures correctly\n\n    TypeError: navigation_1.useRouter.mockReturnValue is not a function\n\n    \u001b[0m \u001b[90m 221 |\u001b[39m   \u001b[36mfunction\u001b[39m setupAdvancedTests()\u001b[33m:\u001b[39m \u001b[36mvoid\u001b[39m {\n     \u001b[90m 222 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 223 |\u001b[39m     (useRouter \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockReturnValue(mockRouter)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 224 |\u001b[39m     mockAuthServiceFetch()\u001b[33m;\u001b[39m\n     \u001b[90m 225 |\u001b[39m     setupDefaultMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 226 |\u001b[39m   }\u001b[0m\n\n      at setupAdvancedTests (__tests__/integration/thread-creation-advanced.test.tsx:223:30)\n      at Object.<anonymous> (__tests__/integration/thread-creation-advanced.test.tsx:72:5)\n\n  \u25cf Thread Creation Advanced Scenarios \u203a Mobile and Touch Specific Tests \u203a works with virtual keyboard open\n\n    TypeError: navigation_1.useRouter.mockReturnValue is not a function\n\n    \u001b[0m \u001b[90m 221 |\u001b[39m   \u001b[36mfunction\u001b[39m setupAdvancedTests()\u001b[33m:\u001b[39m \u001b[36mvoid\u001b[39m {\n     \u001b[90m 222 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 223 |\u001b[39m     (useRouter \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockReturnValue(mockRouter)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 224 |\u001b[39m     mockAuthServiceFetch()\u001b[33m;\u001b[39m\n     \u001b[90m 225 |\u001b[39m     setupDefaultMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 226 |\u001b[39m   }\u001b[0m\n\n      at setupAdvancedTests (__tests__/integration/thread-creation-advanced.test.tsx:223:30)\n      at Object.<anonymous> (__tests__/integration/thread-creation-advanced.test.tsx:72:5)\n\nFAIL Integration Tests __tests__/auth/context.auth-operations.test.tsx\n  AuthContext - Auth Operations\n    \u00d7 should handle login action (1011 ms)\n    \u221a should not login when auth config is not available (2 ms)\n    \u00d7 should handle logout action (1010 ms)\n    \u00d7 should set dev logout flag in development mode (15 ms)\n    \u221a should not logout when auth config is not available (18 ms)\n\n  \u25cf AuthContext - Auth Operations \u203a should handle login action\n\n    expect(received).toEqual(expected) // deep equality\n\n    - Expected  - 1\n    + Received  + 1\n\n    @@ -3,11 +3,11 @@\n          \"http://localhost:3000\",\n        ],\n        \"authorized_redirect_uris\": Array [\n          \"http://localhost:3000/auth/callback\",\n        ],\n    -   \"development_mode\": false,\n    +   \"development_mode\": true,\n        \"endpoints\": Object {\n          \"callback\": \"http://localhost:8081/auth/callback\",\n          \"dev_login\": \"http://localhost:8081/auth/dev/login\",\n          \"login\": \"http://localhost:8081/auth/login\",\n          \"logout\": \"http://localhost:8081/auth/logout\",\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div />\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 43 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n     \u001b[90m 44 |\u001b[39m       expect(result\u001b[33m.\u001b[39mcurrent)\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 45 |\u001b[39m       expect(result\u001b[33m.\u001b[39mcurrent\u001b[33m?\u001b[39m\u001b[33m.\u001b[39mauthConfig)\u001b[33m.\u001b[39mtoEqual(mockAuthConfig)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 46 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 47 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 48 |\u001b[39m\u001b[0m\n\n      at __tests__/auth/context.auth-operations.test.tsx:45:42\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf AuthContext - Auth Operations \u203a should handle logout action\n\n    expect(received).toEqual(expected) // deep equality\n\n    - Expected  - 1\n    + Received  + 1\n\n    @@ -3,11 +3,11 @@\n          \"http://localhost:3000\",\n        ],\n        \"authorized_redirect_uris\": Array [\n          \"http://localhost:3000/auth/callback\",\n        ],\n    -   \"development_mode\": false,\n    +   \"development_mode\": true,\n        \"endpoints\": Object {\n          \"callback\": \"http://localhost:8081/auth/callback\",\n          \"dev_login\": \"http://localhost:8081/auth/dev/login\",\n          \"login\": \"http://localhost:8081/auth/login\",\n          \"logout\": \"http://localhost:8081/auth/logout\",\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div />\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 43 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n     \u001b[90m 44 |\u001b[39m       expect(result\u001b[33m.\u001b[39mcurrent)\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 45 |\u001b[39m       expect(result\u001b[33m.\u001b[39mcurrent\u001b[33m?\u001b[39m\u001b[33m.\u001b[39mauthConfig)\u001b[33m.\u001b[39mtoEqual(mockAuthConfig)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 46 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 47 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 48 |\u001b[39m\u001b[0m\n\n      at __tests__/auth/context.auth-operations.test.tsx:45:42\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf AuthContext - Auth Operations \u203a should set dev logout flag in development mode\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    \u001b[0m \u001b[90m 116 |\u001b[39m     \n     \u001b[90m 117 |\u001b[39m     \u001b[90m// Check dev logout flag was set\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 118 |\u001b[39m     expect(authService\u001b[33m.\u001b[39msetDevLogoutFlag)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 119 |\u001b[39m     expect(authService\u001b[33m.\u001b[39mhandleLogout)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\n     \u001b[90m 120 |\u001b[39m       expect\u001b[33m.\u001b[39mobjectContaining({ development_mode\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m })\n     \u001b[90m 121 |\u001b[39m     )\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/auth/context.auth-operations.test.tsx:118:42)\n\nFAIL Integration Tests __tests__/services/webSocketService.test.ts\n  webSocketService\n    Connection Management\n      \u221a should establish WebSocket connection (54 ms)\n      \u00d7 should handle connection success (5 ms)\n      \u00d7 should handle connection errors (9 ms)\n      \u00d7 should disconnect WebSocket properly (3 ms)\n      \u221a should handle multiple connection attempts gracefully (3 ms)\n      \u00d7 should handle connection state transitions (5 ms)\n    Message Sending and Receiving\n      \u221a should send messages when connected (5 ms)\n      \u221a should queue messages when disconnected (5 ms)\n      \u00d7 should send queued messages after reconnection (6 ms)\n      \u221a should handle message receiving with proper parsing (6 ms)\n      \u221a should handle malformed message data gracefully (5 ms)\n      \u00d7 should handle binary message data (6 ms)\n    Reconnection Logic\n      \u00d7 should attempt reconnection when onReconnect is provided (4 ms)\n      \u00d7 should not attempt reconnection without onReconnect (3 ms)\n      \u00d7 should cancel reconnection on explicit disconnect (3 ms)\n    Heartbeat Mechanism\n      \u00d7 should send heartbeat messages at configured interval (3 ms)\n      \u221a should stop heartbeat on disconnect (3 ms)\n    Rate Limiting\n      \u221a should enforce rate limits when configured (4 ms)\n      \u00d7 should reset rate limit window over time (4 ms)\n    Error Handling\n      \u00d7 should handle WebSocket errors gracefully (2 ms)\n      \u00d7 should handle connection failure gracefully (11 ms)\n      \u00d7 should handle message sending errors (9 ms)\n    State Management\n      \u00d7 should track connection state accurately (5 ms)\n      \u00d7 should track reconnecting state (4 ms)\n\n  \u25cf webSocketService \u203a Connection Management \u203a should handle connection success\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"{\\\"type\\\":\\\"auth\\\",\\\"token\\\":\\\"test-token-123\\\"}\"\n\n    Number of calls: 0\n\n    \u001b[0m \u001b[90m 88 |\u001b[39m\n     \u001b[90m 89 |\u001b[39m     \u001b[36mfunction\u001b[39m expectAuthTokenSent() {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 90 |\u001b[39m       expect(mockWebSocket\u001b[33m.\u001b[39msend)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\n     \u001b[90m    |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 91 |\u001b[39m         \u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mstringify({ type\u001b[33m:\u001b[39m \u001b[32m'auth'\u001b[39m\u001b[33m,\u001b[39m token\u001b[33m:\u001b[39m \u001b[32m'test-token-123'\u001b[39m })\n     \u001b[90m 92 |\u001b[39m       )\u001b[33m;\u001b[39m\n     \u001b[90m 93 |\u001b[39m     }\u001b[0m\n\n      at expectAuthTokenSent (__tests__/services/webSocketService.test.ts:90:34)\n      at expectSuccessfulConnection (__tests__/services/webSocketService.test.ts:86:7)\n      at Object.<anonymous> (__tests__/services/webSocketService.test.ts:64:7)\n\n  \u25cf webSocketService \u203a Connection Management \u203a should handle connection errors\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    - Expected\n    + Received\n\n    - [Error: Connection failed]\n    + Object {\n    +   \"code\": 1006,\n    +   \"message\": \"WebSocket connection error\",\n    +   \"recoverable\": true,\n    +   \"timestamp\": 1755824064184,\n    +   \"type\": \"connection\",\n    + },\n\n    Number of calls: 1\n\n    \u001b[0m \u001b[90m 119 |\u001b[39m     \u001b[36mfunction\u001b[39m expectErrorHandling(statusHandler\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m\u001b[33m,\u001b[39m errorHandler\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m\u001b[33m,\u001b[39m error\u001b[33m:\u001b[39m \u001b[33mError\u001b[39m) {\n     \u001b[90m 120 |\u001b[39m       expect(statusHandler)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'CLOSED'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 121 |\u001b[39m       expect(errorHandler)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(error)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 122 |\u001b[39m     }\n     \u001b[90m 123 |\u001b[39m\n     \u001b[90m 124 |\u001b[39m     it(\u001b[32m'should disconnect WebSocket properly'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at expectErrorHandling (__tests__/services/webSocketService.test.ts:121:28)\n      at Object.<anonymous> (__tests__/services/webSocketService.test.ts:99:7)\n\n  \u25cf webSocketService \u203a Connection Management \u203a should disconnect WebSocket properly\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       webSocketService\u001b[33m.\u001b[39mdisconnect()\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m       expect(mockWebSocket\u001b[33m.\u001b[39mclose)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m\n     \u001b[90m 133 |\u001b[39m     it(\u001b[32m'should handle multiple connection attempts gracefully'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.<anonymous> (__tests__/services/webSocketService.test.ts:130:35)\n\n  \u25cf webSocketService \u203a Connection Management \u203a should handle connection state transitions\n\n    TypeError: Cannot read properties of undefined (reading 'code')\n\n    \u001b[0m \u001b[90m 746 |\u001b[39m         \n     \u001b[90m 747 |\u001b[39m         \u001b[90m// Handle authentication errors specifically\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 748 |\u001b[39m         \u001b[36mif\u001b[39m (event\u001b[33m.\u001b[39mcode \u001b[33m===\u001b[39m \u001b[35m1008\u001b[39m) {\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 749 |\u001b[39m           logger\u001b[33m.\u001b[39merror(\u001b[32m'WebSocket authentication failed'\u001b[39m\u001b[33m,\u001b[39m undefined\u001b[33m,\u001b[39m {\n     \u001b[90m 750 |\u001b[39m             component\u001b[33m:\u001b[39m \u001b[32m'WebSocketService'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 751 |\u001b[39m             action\u001b[33m:\u001b[39m \u001b[32m'auth_rejection'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.ws.onclose (services/webSocketService.ts:748:19)\n      at simulateCloseAndVerify (__tests__/services/webSocketService.test.ts:167:28)\n      at Object.<anonymous> (__tests__/services/webSocketService.test.ts:145:7)\n\n  \u25cf webSocketService \u203a Message Sending and Receiving \u203a should send queued messages after reconnection\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"{\\\"type\\\":\\\"auth\\\",\\\"token\\\":\\\"test-token-123\\\"}\"\n\n    Number of calls: 0\n\n    \u001b[0m \u001b[90m 238 |\u001b[39m\n     \u001b[90m 239 |\u001b[39m       \u001b[90m// Should send auth token and queued messages\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 240 |\u001b[39m       expect(mockWebSocket\u001b[33m.\u001b[39msend)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mstringify({ type\u001b[33m:\u001b[39m \u001b[32m'auth'\u001b[39m\u001b[33m,\u001b[39m token\u001b[33m:\u001b[39m \u001b[32m'test-token-123'\u001b[39m }))\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 241 |\u001b[39m       expect(mockWebSocket\u001b[33m.\u001b[39msend)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mstringify(message1))\u001b[33m;\u001b[39m\n     \u001b[90m 242 |\u001b[39m       expect(mockWebSocket\u001b[33m.\u001b[39msend)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mstringify(message2))\u001b[33m;\u001b[39m\n     \u001b[90m 243 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/services/webSocketService.test.ts:240:34)\n\n  \u25cf webSocketService \u203a Message Sending and Receiving \u203a should handle binary message data\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: [0, 0, 0, 0, 0, 0, 0, 0]\n\n    Number of calls: 0\n\n    \u001b[0m \u001b[90m 299 |\u001b[39m       mockWebSocket\u001b[33m.\u001b[39monmessage\u001b[33m?\u001b[39m\u001b[33m.\u001b[39m(messageEvent)\u001b[33m;\u001b[39m\n     \u001b[90m 300 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 301 |\u001b[39m       expect(onBinaryMessage)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(binaryData)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 302 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 303 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 304 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/services/webSocketService.test.ts:301:31)\n\n  \u25cf webSocketService \u203a Reconnection Logic \u203a should attempt reconnection when onReconnect is provided\n\n    TypeError: Cannot read properties of undefined (reading 'code')\n\n    \u001b[0m \u001b[90m 746 |\u001b[39m         \n     \u001b[90m 747 |\u001b[39m         \u001b[90m// Handle authentication errors specifically\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 748 |\u001b[39m         \u001b[36mif\u001b[39m (event\u001b[33m.\u001b[39mcode \u001b[33m===\u001b[39m \u001b[35m1008\u001b[39m) {\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 749 |\u001b[39m           logger\u001b[33m.\u001b[39merror(\u001b[32m'WebSocket authentication failed'\u001b[39m\u001b[33m,\u001b[39m undefined\u001b[33m,\u001b[39m {\n     \u001b[90m 750 |\u001b[39m             component\u001b[33m:\u001b[39m \u001b[32m'WebSocketService'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 751 |\u001b[39m             action\u001b[33m:\u001b[39m \u001b[32m'auth_rejection'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.ws.onclose (services/webSocketService.ts:748:19)\n      at Object.<anonymous> (__tests__/services/webSocketService.test.ts:314:28)\n\n  \u25cf webSocketService \u203a Reconnection Logic \u203a should not attempt reconnection without onReconnect\n\n    TypeError: Cannot read properties of undefined (reading 'code')\n\n    \u001b[0m \u001b[90m 746 |\u001b[39m         \n     \u001b[90m 747 |\u001b[39m         \u001b[90m// Handle authentication errors specifically\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 748 |\u001b[39m         \u001b[36mif\u001b[39m (event\u001b[33m.\u001b[39mcode \u001b[33m===\u001b[39m \u001b[35m1008\u001b[39m) {\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 749 |\u001b[39m           logger\u001b[33m.\u001b[39merror(\u001b[32m'WebSocket authentication failed'\u001b[39m\u001b[33m,\u001b[39m undefined\u001b[33m,\u001b[39m {\n     \u001b[90m 750 |\u001b[39m             component\u001b[33m:\u001b[39m \u001b[32m'WebSocketService'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 751 |\u001b[39m             action\u001b[33m:\u001b[39m \u001b[32m'auth_rejection'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.ws.onclose (services/webSocketService.ts:748:19)\n      at Object.<anonymous> (__tests__/services/webSocketService.test.ts:328:28)\n\n  \u25cf webSocketService \u203a Reconnection Logic \u203a should cancel reconnection on explicit disconnect\n\n    TypeError: Cannot read properties of undefined (reading 'code')\n\n    \u001b[0m \u001b[90m 746 |\u001b[39m         \n     \u001b[90m 747 |\u001b[39m         \u001b[90m// Handle authentication errors specifically\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 748 |\u001b[39m         \u001b[36mif\u001b[39m (event\u001b[33m.\u001b[39mcode \u001b[33m===\u001b[39m \u001b[35m1008\u001b[39m) {\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 749 |\u001b[39m           logger\u001b[33m.\u001b[39merror(\u001b[32m'WebSocket authentication failed'\u001b[39m\u001b[33m,\u001b[39m undefined\u001b[33m,\u001b[39m {\n     \u001b[90m 750 |\u001b[39m             component\u001b[33m:\u001b[39m \u001b[32m'WebSocketService'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 751 |\u001b[39m             action\u001b[33m:\u001b[39m \u001b[32m'auth_rejection'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.ws.onclose (services/webSocketService.ts:748:19)\n      at Object.<anonymous> (__tests__/services/webSocketService.test.ts:345:28)\n\n  \u25cf webSocketService \u203a Heartbeat Mechanism \u203a should send heartbeat messages at configured interval\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"{\\\"type\\\":\\\"ping\\\"}\"\n    Received: \"{\\\"type\\\":\\\"ping\\\",\\\"timestamp\\\":1755824094263}\"\n\n    Number of calls: 1\n\n    \u001b[0m \u001b[90m 367 |\u001b[39m       jest\u001b[33m.\u001b[39madvanceTimersByTime(\u001b[35m30000\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 368 |\u001b[39m       \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 369 |\u001b[39m       expect(mockWebSocket\u001b[33m.\u001b[39msend)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 370 |\u001b[39m         \u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mstringify({ type\u001b[33m:\u001b[39m \u001b[32m'ping'\u001b[39m })\n     \u001b[90m 371 |\u001b[39m       )\u001b[33m;\u001b[39m\n     \u001b[90m 372 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/services/webSocketService.test.ts:369:34)\n\n  \u25cf webSocketService \u203a Rate Limiting \u203a should reset rate limit window over time\n\n    expect(jest.fn()).toHaveBeenCalledTimes(expected)\n\n    Expected number of calls: 2\n    Received number of calls: 0\n\n    \u001b[0m \u001b[90m 426 |\u001b[39m       webSocketService\u001b[33m.\u001b[39msendMessage({ type\u001b[33m:\u001b[39m \u001b[32m'test2'\u001b[39m\u001b[33m,\u001b[39m payload\u001b[33m:\u001b[39m {} })\u001b[33m;\u001b[39m\n     \u001b[90m 427 |\u001b[39m       \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 428 |\u001b[39m       expect(mockWebSocket\u001b[33m.\u001b[39msend)\u001b[33m.\u001b[39mtoHaveBeenCalledTimes(\u001b[35m2\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 429 |\u001b[39m       \n     \u001b[90m 430 |\u001b[39m       \u001b[90m// Advance time past window\u001b[39m\n     \u001b[90m 431 |\u001b[39m       jest\u001b[33m.\u001b[39madvanceTimersByTime(\u001b[35m1100\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/services/webSocketService.test.ts:428:34)\n\n  \u25cf webSocketService \u203a Error Handling \u203a should handle WebSocket errors gracefully\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    - Expected\n    + Received\n\n    - [Error: WebSocket error]\n    + Object {\n    +   \"code\": 1006,\n    +   \"message\": \"WebSocket connection error\",\n    +   \"recoverable\": true,\n    +   \"timestamp\": 1755824064278,\n    +   \"type\": \"connection\",\n    + },\n\n    Number of calls: 1\n\n    \u001b[0m \u001b[90m 449 |\u001b[39m       mockWebSocket\u001b[33m.\u001b[39monerror\u001b[33m?\u001b[39m\u001b[33m.\u001b[39m(error \u001b[36mas\u001b[39m any)\u001b[33m;\u001b[39m\n     \u001b[90m 450 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 451 |\u001b[39m       expect(onError)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(error)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 452 |\u001b[39m       expect(onStatusChange)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'CLOSED'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 453 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 454 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/services/webSocketService.test.ts:451:23)\n\n  \u25cf webSocketService \u203a Error Handling \u203a should handle connection failure gracefully\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: Any<Error>\n    Received: {\"code\": 1000, \"message\": \"Failed to create WebSocket\", \"recoverable\": true, \"timestamp\": 1755824064281, \"type\": \"connection\"}\n\n    Number of calls: 1\n\n    \u001b[0m \u001b[90m 463 |\u001b[39m       webSocketService\u001b[33m.\u001b[39mconnect(\u001b[32m'ws://localhost:8000/ws'\u001b[39m\u001b[33m,\u001b[39m { onError })\u001b[33m;\u001b[39m\n     \u001b[90m 464 |\u001b[39m       \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 465 |\u001b[39m       expect(onError)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(expect\u001b[33m.\u001b[39many(\u001b[33mError\u001b[39m))\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 466 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 467 |\u001b[39m\n     \u001b[90m 468 |\u001b[39m     it(\u001b[32m'should handle message sending errors'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.<anonymous> (__tests__/services/webSocketService.test.ts:465:23)\n\n  \u25cf webSocketService \u203a Error Handling \u203a should handle message sending errors\n\n    expect(received).not.toThrow()\n\n    Error name:    \"Error\"\n    Error message: \"Send failed\"\n\n        \u001b[0m \u001b[90m 473 |\u001b[39m       \u001b[90m// Make send throw an error\u001b[39m\n         \u001b[90m 474 |\u001b[39m       mockWebSocket\u001b[33m.\u001b[39msend\u001b[33m.\u001b[39mmockImplementation(() \u001b[33m=>\u001b[39m {\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 475 |\u001b[39m         \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Send failed'\u001b[39m)\u001b[33m;\u001b[39m\n         \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 476 |\u001b[39m       })\u001b[33m;\u001b[39m\n         \u001b[90m 477 |\u001b[39m       \n         \u001b[90m 478 |\u001b[39m       \u001b[90m// Should not throw when sending message\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/services/webSocketService.test.ts:475:15)\n      at WebSocketService.send (services/webSocketService.ts:886:15)\n      at WebSocketService.sendMessage (services/webSocketService.ts:894:10)\n      at __tests__/services/webSocketService.test.ts:480:26\n      at Object.<anonymous> (node_modules/expect/build/index.js:1824:9)\n      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:2235:93)\n      at Object.<anonymous> (__tests__/services/webSocketService.test.ts:481:14)\n      at Object.<anonymous> (__tests__/services/webSocketService.test.ts:481:14)\n\n  \u25cf webSocketService \u203a State Management \u203a should track connection state accurately\n\n    TypeError: Cannot read properties of undefined (reading 'code')\n\n    \u001b[0m \u001b[90m 746 |\u001b[39m         \n     \u001b[90m 747 |\u001b[39m         \u001b[90m// Handle authentication errors specifically\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 748 |\u001b[39m         \u001b[36mif\u001b[39m (event\u001b[33m.\u001b[39mcode \u001b[33m===\u001b[39m \u001b[35m1008\u001b[39m) {\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 749 |\u001b[39m           logger\u001b[33m.\u001b[39merror(\u001b[32m'WebSocket authentication failed'\u001b[39m\u001b[33m,\u001b[39m undefined\u001b[33m,\u001b[39m {\n     \u001b[90m 750 |\u001b[39m             component\u001b[33m:\u001b[39m \u001b[32m'WebSocketService'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 751 |\u001b[39m             action\u001b[33m:\u001b[39m \u001b[32m'auth_rejection'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.ws.onclose (services/webSocketService.ts:748:19)\n      at Object.<anonymous> (__tests__/services/webSocketService.test.ts:496:28)\n\n  \u25cf webSocketService \u203a State Management \u203a should track reconnecting state\n\n    TypeError: Cannot read properties of undefined (reading 'code')\n\n    \u001b[0m \u001b[90m 746 |\u001b[39m         \n     \u001b[90m 747 |\u001b[39m         \u001b[90m// Handle authentication errors specifically\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 748 |\u001b[39m         \u001b[36mif\u001b[39m (event\u001b[33m.\u001b[39mcode \u001b[33m===\u001b[39m \u001b[35m1008\u001b[39m) {\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 749 |\u001b[39m           logger\u001b[33m.\u001b[39merror(\u001b[32m'WebSocket authentication failed'\u001b[39m\u001b[33m,\u001b[39m undefined\u001b[33m,\u001b[39m {\n     \u001b[90m 750 |\u001b[39m             component\u001b[33m:\u001b[39m \u001b[32m'WebSocketService'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 751 |\u001b[39m             action\u001b[33m:\u001b[39m \u001b[32m'auth_rejection'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.ws.onclose (services/webSocketService.ts:748:19)\n      at Object.<anonymous> (__tests__/services/webSocketService.test.ts:508:28)\n\nFAIL Integration Tests __tests__/integration/offline-mode.test.tsx\n  Enhanced Offline Mode Tests\n    Offline/Online Transitions\n      \u00d7 should detect offline/online status changes (1 ms)\n      \u00d7 should queue actions when offline and sync when online (1 ms)\n    Data Persistence\n      \u00d7 should persist offline data in localStorage (1 ms)\n      \u00d7 should restore data after page refresh (1 ms)\n    Draft Message Persistence\n      \u00d7 should save and restore draft messages\n      \u00d7 should clear draft after sending message\n    Network Quality Detection\n      \u00d7 should detect network connection type and quality (1 ms)\n    Storage Management\n      \u00d7 should handle storage quota limits gracefully (1 ms)\n      \u00d7 should export offline data for backup (1 ms)\n    Error Handling\n      \u00d7 should handle localStorage failures gracefully\n      \u00d7 should handle sync failures with retry\n    Manual Sync Operations\n      \u00d7 should allow manual sync when online (1 ms)\n\n  \u25cf Enhanced Offline Mode Tests \u203a Offline/Online Transitions \u203a should detect offline/online status changes\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/offline-mode.test.tsx:458:15)\n\n  \u25cf Enhanced Offline Mode Tests \u203a Offline/Online Transitions \u203a should detect offline/online status changes\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/offline-mode.test.tsx:477:15)\n\n  \u25cf Enhanced Offline Mode Tests \u203a Offline/Online Transitions \u203a should queue actions when offline and sync when online\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/offline-mode.test.tsx:458:15)\n\n  \u25cf Enhanced Offline Mode Tests \u203a Offline/Online Transitions \u203a should queue actions when offline and sync when online\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/offline-mode.test.tsx:477:15)\n\n  \u25cf Enhanced Offline Mode Tests \u203a Data Persistence \u203a should persist offline data in localStorage\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/offline-mode.test.tsx:458:15)\n\n  \u25cf Enhanced Offline Mode Tests \u203a Data Persistence \u203a should persist offline data in localStorage\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/offline-mode.test.tsx:477:15)\n\n  \u25cf Enhanced Offline Mode Tests \u203a Data Persistence \u203a should restore data after page refresh\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/offline-mode.test.tsx:458:15)\n\n  \u25cf Enhanced Offline Mode Tests \u203a Data Persistence \u203a should restore data after page refresh\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/offline-mode.test.tsx:477:15)\n\n  \u25cf Enhanced Offline Mode Tests \u203a Draft Message Persistence \u203a should save and restore draft messages\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/offline-mode.test.tsx:458:15)\n\n  \u25cf Enhanced Offline Mode Tests \u203a Draft Message Persistence \u203a should save and restore draft messages\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/offline-mode.test.tsx:477:15)\n\n  \u25cf Enhanced Offline Mode Tests \u203a Draft Message Persistence \u203a should clear draft after sending message\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/offline-mode.test.tsx:458:15)\n\n  \u25cf Enhanced Offline Mode Tests \u203a Draft Message Persistence \u203a should clear draft after sending message\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/offline-mode.test.tsx:477:15)\n\n  \u25cf Enhanced Offline Mode Tests \u203a Network Quality Detection \u203a should detect network connection type and quality\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/offline-mode.test.tsx:458:15)\n\n  \u25cf Enhanced Offline Mode Tests \u203a Network Quality Detection \u203a should detect network connection type and quality\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/offline-mode.test.tsx:477:15)\n\n  \u25cf Enhanced Offline Mode Tests \u203a Storage Management \u203a should handle storage quota limits gracefully\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/offline-mode.test.tsx:458:15)\n\n  \u25cf Enhanced Offline Mode Tests \u203a Storage Management \u203a should handle storage quota limits gracefully\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/offline-mode.test.tsx:477:15)\n\n  \u25cf Enhanced Offline Mode Tests \u203a Storage Management \u203a should export offline data for backup\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/offline-mode.test.tsx:458:15)\n\n  \u25cf Enhanced Offline Mode Tests \u203a Storage Management \u203a should export offline data for backup\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/offline-mode.test.tsx:477:15)\n\n  \u25cf Enhanced Offline Mode Tests \u203a Error Handling \u203a should handle localStorage failures gracefully\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/offline-mode.test.tsx:458:15)\n\n  \u25cf Enhanced Offline Mode Tests \u203a Error Handling \u203a should handle localStorage failures gracefully\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/offline-mode.test.tsx:477:15)\n\n  \u25cf Enhanced Offline Mode Tests \u203a Error Handling \u203a should handle sync failures with retry\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/offline-mode.test.tsx:458:15)\n\n  \u25cf Enhanced Offline Mode Tests \u203a Error Handling \u203a should handle sync failures with retry\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/offline-mode.test.tsx:477:15)\n\n  \u25cf Enhanced Offline Mode Tests \u203a Manual Sync Operations \u203a should allow manual sync when online\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/offline-mode.test.tsx:458:15)\n\n  \u25cf Enhanced Offline Mode Tests \u203a Manual Sync Operations \u203a should allow manual sync when online\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/offline-mode.test.tsx:477:15)\n\nFAIL Integration Tests __tests__/integration/thread-creation.test.tsx\n  Thread Creation Core Integration\n    API Call to Create Thread\n      \u00d7 successfully creates thread with valid API response (1 ms)\n      \u00d7 handles API failure gracefully\n      \u00d7 creates thread with < 300ms response time requirement (1 ms)\n      \u00d7 includes authentication token in API request\n      \u00d7 generates unique thread ID for each creation\n    Optimistic UI Updates\n      \u00d7 shows thread immediately in sidebar (1 ms)\n      \u00d7 shows creating state during API call\n      \u00d7 reverts optimistic update on API failure\n    Sidebar and Navigation Updates\n      \u00d7 adds new thread to sidebar list immediately (1 ms)\n      \u00d7 highlights new thread as active (1 ms)\n      \u00d7 navigates to new thread URL immediately\n    Error Handling and Analytics\n      \u00d7 shows error message on API failure (2 ms)\n      \u00d7 fires thread_creation_started event on click\n\n  \u25cf Thread Creation Core Integration \u203a API Call to Create Thread \u203a successfully creates thread with valid API response\n\n    TypeError: navigation_1.useRouter.mockReturnValue is not a function\n\n    \u001b[0m \u001b[90m 190 |\u001b[39m   \u001b[36mfunction\u001b[39m setupIntegrationTests()\u001b[33m:\u001b[39m \u001b[36mvoid\u001b[39m {\n     \u001b[90m 191 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 192 |\u001b[39m     (useRouter \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockReturnValue(mockRouter)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 193 |\u001b[39m     mockAuthServiceFetch()\u001b[33m;\u001b[39m\n     \u001b[90m 194 |\u001b[39m     setupDefaultMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 195 |\u001b[39m   }\u001b[0m\n\n      at setupIntegrationTests (__tests__/integration/thread-creation.test.tsx:192:30)\n      at Object.<anonymous> (__tests__/integration/thread-creation.test.tsx:62:5)\n\n  \u25cf Thread Creation Core Integration \u203a API Call to Create Thread \u203a handles API failure gracefully\n\n    TypeError: navigation_1.useRouter.mockReturnValue is not a function\n\n    \u001b[0m \u001b[90m 190 |\u001b[39m   \u001b[36mfunction\u001b[39m setupIntegrationTests()\u001b[33m:\u001b[39m \u001b[36mvoid\u001b[39m {\n     \u001b[90m 191 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 192 |\u001b[39m     (useRouter \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockReturnValue(mockRouter)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 193 |\u001b[39m     mockAuthServiceFetch()\u001b[33m;\u001b[39m\n     \u001b[90m 194 |\u001b[39m     setupDefaultMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 195 |\u001b[39m   }\u001b[0m\n\n      at setupIntegrationTests (__tests__/integration/thread-creation.test.tsx:192:30)\n      at Object.<anonymous> (__tests__/integration/thread-creation.test.tsx:62:5)\n\n  \u25cf Thread Creation Core Integration \u203a API Call to Create Thread \u203a creates thread with < 300ms response time requirement\n\n    TypeError: navigation_1.useRouter.mockReturnValue is not a function\n\n    \u001b[0m \u001b[90m 190 |\u001b[39m   \u001b[36mfunction\u001b[39m setupIntegrationTests()\u001b[33m:\u001b[39m \u001b[36mvoid\u001b[39m {\n     \u001b[90m 191 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 192 |\u001b[39m     (useRouter \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockReturnValue(mockRouter)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 193 |\u001b[39m     mockAuthServiceFetch()\u001b[33m;\u001b[39m\n     \u001b[90m 194 |\u001b[39m     setupDefaultMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 195 |\u001b[39m   }\u001b[0m\n\n      at setupIntegrationTests (__tests__/integration/thread-creation.test.tsx:192:30)\n      at Object.<anonymous> (__tests__/integration/thread-creation.test.tsx:62:5)\n\n  \u25cf Thread Creation Core Integration \u203a API Call to Create Thread \u203a includes authentication token in API request\n\n    TypeError: navigation_1.useRouter.mockReturnValue is not a function\n\n    \u001b[0m \u001b[90m 190 |\u001b[39m   \u001b[36mfunction\u001b[39m setupIntegrationTests()\u001b[33m:\u001b[39m \u001b[36mvoid\u001b[39m {\n     \u001b[90m 191 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 192 |\u001b[39m     (useRouter \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockReturnValue(mockRouter)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 193 |\u001b[39m     mockAuthServiceFetch()\u001b[33m;\u001b[39m\n     \u001b[90m 194 |\u001b[39m     setupDefaultMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 195 |\u001b[39m   }\u001b[0m\n\n      at setupIntegrationTests (__tests__/integration/thread-creation.test.tsx:192:30)\n      at Object.<anonymous> (__tests__/integration/thread-creation.test.tsx:62:5)\n\n  \u25cf Thread Creation Core Integration \u203a API Call to Create Thread \u203a generates unique thread ID for each creation\n\n    TypeError: navigation_1.useRouter.mockReturnValue is not a function\n\n    \u001b[0m \u001b[90m 190 |\u001b[39m   \u001b[36mfunction\u001b[39m setupIntegrationTests()\u001b[33m:\u001b[39m \u001b[36mvoid\u001b[39m {\n     \u001b[90m 191 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 192 |\u001b[39m     (useRouter \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockReturnValue(mockRouter)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 193 |\u001b[39m     mockAuthServiceFetch()\u001b[33m;\u001b[39m\n     \u001b[90m 194 |\u001b[39m     setupDefaultMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 195 |\u001b[39m   }\u001b[0m\n\n      at setupIntegrationTests (__tests__/integration/thread-creation.test.tsx:192:30)\n      at Object.<anonymous> (__tests__/integration/thread-creation.test.tsx:62:5)\n\n  \u25cf Thread Creation Core Integration \u203a Optimistic UI Updates \u203a shows thread immediately in sidebar\n\n    TypeError: navigation_1.useRouter.mockReturnValue is not a function\n\n    \u001b[0m \u001b[90m 190 |\u001b[39m   \u001b[36mfunction\u001b[39m setupIntegrationTests()\u001b[33m:\u001b[39m \u001b[36mvoid\u001b[39m {\n     \u001b[90m 191 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 192 |\u001b[39m     (useRouter \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockReturnValue(mockRouter)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 193 |\u001b[39m     mockAuthServiceFetch()\u001b[33m;\u001b[39m\n     \u001b[90m 194 |\u001b[39m     setupDefaultMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 195 |\u001b[39m   }\u001b[0m\n\n      at setupIntegrationTests (__tests__/integration/thread-creation.test.tsx:192:30)\n      at Object.<anonymous> (__tests__/integration/thread-creation.test.tsx:62:5)\n\n  \u25cf Thread Creation Core Integration \u203a Optimistic UI Updates \u203a shows creating state during API call\n\n    TypeError: navigation_1.useRouter.mockReturnValue is not a function\n\n    \u001b[0m \u001b[90m 190 |\u001b[39m   \u001b[36mfunction\u001b[39m setupIntegrationTests()\u001b[33m:\u001b[39m \u001b[36mvoid\u001b[39m {\n     \u001b[90m 191 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 192 |\u001b[39m     (useRouter \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockReturnValue(mockRouter)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 193 |\u001b[39m     mockAuthServiceFetch()\u001b[33m;\u001b[39m\n     \u001b[90m 194 |\u001b[39m     setupDefaultMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 195 |\u001b[39m   }\u001b[0m\n\n      at setupIntegrationTests (__tests__/integration/thread-creation.test.tsx:192:30)\n      at Object.<anonymous> (__tests__/integration/thread-creation.test.tsx:62:5)\n\n  \u25cf Thread Creation Core Integration \u203a Optimistic UI Updates \u203a reverts optimistic update on API failure\n\n    TypeError: navigation_1.useRouter.mockReturnValue is not a function\n\n    \u001b[0m \u001b[90m 190 |\u001b[39m   \u001b[36mfunction\u001b[39m setupIntegrationTests()\u001b[33m:\u001b[39m \u001b[36mvoid\u001b[39m {\n     \u001b[90m 191 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 192 |\u001b[39m     (useRouter \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockReturnValue(mockRouter)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 193 |\u001b[39m     mockAuthServiceFetch()\u001b[33m;\u001b[39m\n     \u001b[90m 194 |\u001b[39m     setupDefaultMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 195 |\u001b[39m   }\u001b[0m\n\n      at setupIntegrationTests (__tests__/integration/thread-creation.test.tsx:192:30)\n      at Object.<anonymous> (__tests__/integration/thread-creation.test.tsx:62:5)\n\n  \u25cf Thread Creation Core Integration \u203a Sidebar and Navigation Updates \u203a adds new thread to sidebar list immediately\n\n    TypeError: navigation_1.useRouter.mockReturnValue is not a function\n\n    \u001b[0m \u001b[90m 190 |\u001b[39m   \u001b[36mfunction\u001b[39m setupIntegrationTests()\u001b[33m:\u001b[39m \u001b[36mvoid\u001b[39m {\n     \u001b[90m 191 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 192 |\u001b[39m     (useRouter \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockReturnValue(mockRouter)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 193 |\u001b[39m     mockAuthServiceFetch()\u001b[33m;\u001b[39m\n     \u001b[90m 194 |\u001b[39m     setupDefaultMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 195 |\u001b[39m   }\u001b[0m\n\n      at setupIntegrationTests (__tests__/integration/thread-creation.test.tsx:192:30)\n      at Object.<anonymous> (__tests__/integration/thread-creation.test.tsx:62:5)\n\n  \u25cf Thread Creation Core Integration \u203a Sidebar and Navigation Updates \u203a highlights new thread as active\n\n    TypeError: navigation_1.useRouter.mockReturnValue is not a function\n\n    \u001b[0m \u001b[90m 190 |\u001b[39m   \u001b[36mfunction\u001b[39m setupIntegrationTests()\u001b[33m:\u001b[39m \u001b[36mvoid\u001b[39m {\n     \u001b[90m 191 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 192 |\u001b[39m     (useRouter \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockReturnValue(mockRouter)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 193 |\u001b[39m     mockAuthServiceFetch()\u001b[33m;\u001b[39m\n     \u001b[90m 194 |\u001b[39m     setupDefaultMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 195 |\u001b[39m   }\u001b[0m\n\n      at setupIntegrationTests (__tests__/integration/thread-creation.test.tsx:192:30)\n      at Object.<anonymous> (__tests__/integration/thread-creation.test.tsx:62:5)\n\n  \u25cf Thread Creation Core Integration \u203a Sidebar and Navigation Updates \u203a navigates to new thread URL immediately\n\n    TypeError: navigation_1.useRouter.mockReturnValue is not a function\n\n    \u001b[0m \u001b[90m 190 |\u001b[39m   \u001b[36mfunction\u001b[39m setupIntegrationTests()\u001b[33m:\u001b[39m \u001b[36mvoid\u001b[39m {\n     \u001b[90m 191 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 192 |\u001b[39m     (useRouter \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockReturnValue(mockRouter)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 193 |\u001b[39m     mockAuthServiceFetch()\u001b[33m;\u001b[39m\n     \u001b[90m 194 |\u001b[39m     setupDefaultMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 195 |\u001b[39m   }\u001b[0m\n\n      at setupIntegrationTests (__tests__/integration/thread-creation.test.tsx:192:30)\n      at Object.<anonymous> (__tests__/integration/thread-creation.test.tsx:62:5)\n\n  \u25cf Thread Creation Core Integration \u203a Error Handling and Analytics \u203a shows error message on API failure\n\n    TypeError: navigation_1.useRouter.mockReturnValue is not a function\n\n    \u001b[0m \u001b[90m 190 |\u001b[39m   \u001b[36mfunction\u001b[39m setupIntegrationTests()\u001b[33m:\u001b[39m \u001b[36mvoid\u001b[39m {\n     \u001b[90m 191 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 192 |\u001b[39m     (useRouter \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockReturnValue(mockRouter)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 193 |\u001b[39m     mockAuthServiceFetch()\u001b[33m;\u001b[39m\n     \u001b[90m 194 |\u001b[39m     setupDefaultMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 195 |\u001b[39m   }\u001b[0m\n\n      at setupIntegrationTests (__tests__/integration/thread-creation.test.tsx:192:30)\n      at Object.<anonymous> (__tests__/integration/thread-creation.test.tsx:62:5)\n\n  \u25cf Thread Creation Core Integration \u203a Error Handling and Analytics \u203a fires thread_creation_started event on click\n\n    TypeError: navigation_1.useRouter.mockReturnValue is not a function\n\n    \u001b[0m \u001b[90m 190 |\u001b[39m   \u001b[36mfunction\u001b[39m setupIntegrationTests()\u001b[33m:\u001b[39m \u001b[36mvoid\u001b[39m {\n     \u001b[90m 191 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 192 |\u001b[39m     (useRouter \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockReturnValue(mockRouter)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 193 |\u001b[39m     mockAuthServiceFetch()\u001b[33m;\u001b[39m\n     \u001b[90m 194 |\u001b[39m     setupDefaultMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 195 |\u001b[39m   }\u001b[0m\n\n      at setupIntegrationTests (__tests__/integration/thread-creation.test.tsx:192:30)\n      at Object.<anonymous> (__tests__/integration/thread-creation.test.tsx:62:5)\n\nFAIL Integration Tests __tests__/integration/connection-management-advanced.test.tsx\n  Connection Management Advanced Tests\n    Reconnection Management\n      \u00d7 should handle reconnection logic (1 ms)\n      \u00d7 should respect maximum attempts (1 ms)\n      \u00d7 should reset attempt counter (1 ms)\n      \u00d7 should cancel reconnection timers (1 ms)\n    State Machine\n      \u00d7 should validate state transitions (1 ms)\n      \u00d7 should enforce valid transition paths (1 ms)\n      \u00d7 should handle error transitions (1 ms)\n    Network Condition Simulation\n      \u00d7 should simulate high latency conditions\n      \u00d7 should simulate packet loss (1 ms)\n      \u00d7 should categorize connection quality (1 ms)\n      \u00d7 should simulate latency delays (1 ms)\n    Error Recovery Scenarios\n      \u00d7 should recover from multiple failures\n      \u00d7 should handle cascading failures\n      \u00d7 should maintain connection isolation during failures\n    Resource Management\n      \u00d7 should clean up timers and resources\n\n  \u25cf Connection Management Advanced Tests \u203a Reconnection Management \u203a should handle reconnection logic\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-management-advanced.test.tsx:158:15)\n\n  \u25cf Connection Management Advanced Tests \u203a Reconnection Management \u203a should handle reconnection logic\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-management-advanced.test.tsx:163:15)\n\n  \u25cf Connection Management Advanced Tests \u203a Reconnection Management \u203a should respect maximum attempts\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-management-advanced.test.tsx:158:15)\n\n  \u25cf Connection Management Advanced Tests \u203a Reconnection Management \u203a should respect maximum attempts\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-management-advanced.test.tsx:163:15)\n\n  \u25cf Connection Management Advanced Tests \u203a Reconnection Management \u203a should reset attempt counter\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-management-advanced.test.tsx:158:15)\n\n  \u25cf Connection Management Advanced Tests \u203a Reconnection Management \u203a should reset attempt counter\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-management-advanced.test.tsx:163:15)\n\n  \u25cf Connection Management Advanced Tests \u203a Reconnection Management \u203a should cancel reconnection timers\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-management-advanced.test.tsx:158:15)\n\n  \u25cf Connection Management Advanced Tests \u203a Reconnection Management \u203a should cancel reconnection timers\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-management-advanced.test.tsx:163:15)\n\n  \u25cf Connection Management Advanced Tests \u203a State Machine \u203a should validate state transitions\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-management-advanced.test.tsx:158:15)\n\n  \u25cf Connection Management Advanced Tests \u203a State Machine \u203a should validate state transitions\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-management-advanced.test.tsx:163:15)\n\n  \u25cf Connection Management Advanced Tests \u203a State Machine \u203a should enforce valid transition paths\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-management-advanced.test.tsx:158:15)\n\n  \u25cf Connection Management Advanced Tests \u203a State Machine \u203a should enforce valid transition paths\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-management-advanced.test.tsx:163:15)\n\n  \u25cf Connection Management Advanced Tests \u203a State Machine \u203a should handle error transitions\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-management-advanced.test.tsx:158:15)\n\n  \u25cf Connection Management Advanced Tests \u203a State Machine \u203a should handle error transitions\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-management-advanced.test.tsx:163:15)\n\n  \u25cf Connection Management Advanced Tests \u203a Network Condition Simulation \u203a should simulate high latency conditions\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-management-advanced.test.tsx:158:15)\n\n  \u25cf Connection Management Advanced Tests \u203a Network Condition Simulation \u203a should simulate high latency conditions\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-management-advanced.test.tsx:163:15)\n\n  \u25cf Connection Management Advanced Tests \u203a Network Condition Simulation \u203a should simulate packet loss\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-management-advanced.test.tsx:158:15)\n\n  \u25cf Connection Management Advanced Tests \u203a Network Condition Simulation \u203a should simulate packet loss\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-management-advanced.test.tsx:163:15)\n\n  \u25cf Connection Management Advanced Tests \u203a Network Condition Simulation \u203a should categorize connection quality\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-management-advanced.test.tsx:158:15)\n\n  \u25cf Connection Management Advanced Tests \u203a Network Condition Simulation \u203a should categorize connection quality\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-management-advanced.test.tsx:163:15)\n\n  \u25cf Connection Management Advanced Tests \u203a Network Condition Simulation \u203a should simulate latency delays\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-management-advanced.test.tsx:158:15)\n\n  \u25cf Connection Management Advanced Tests \u203a Network Condition Simulation \u203a should simulate latency delays\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-management-advanced.test.tsx:163:15)\n\n  \u25cf Connection Management Advanced Tests \u203a Error Recovery Scenarios \u203a should recover from multiple failures\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-management-advanced.test.tsx:158:15)\n\n  \u25cf Connection Management Advanced Tests \u203a Error Recovery Scenarios \u203a should recover from multiple failures\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-management-advanced.test.tsx:163:15)\n\n  \u25cf Connection Management Advanced Tests \u203a Error Recovery Scenarios \u203a should handle cascading failures\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-management-advanced.test.tsx:158:15)\n\n  \u25cf Connection Management Advanced Tests \u203a Error Recovery Scenarios \u203a should handle cascading failures\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-management-advanced.test.tsx:163:15)\n\n  \u25cf Connection Management Advanced Tests \u203a Error Recovery Scenarios \u203a should maintain connection isolation during failures\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-management-advanced.test.tsx:158:15)\n\n  \u25cf Connection Management Advanced Tests \u203a Error Recovery Scenarios \u203a should maintain connection isolation during failures\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-management-advanced.test.tsx:163:15)\n\n  \u25cf Connection Management Advanced Tests \u203a Resource Management \u203a should clean up timers and resources\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-management-advanced.test.tsx:158:15)\n\n  \u25cf Connection Management Advanced Tests \u203a Resource Management \u203a should clean up timers and resources\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-management-advanced.test.tsx:163:15)\n\nFAIL Integration Tests __tests__/integration/websocket-messaging.test.tsx\n  WebSocket Message Processing Tests\n    Message Sending\n      \u00d7 should handle real message sending with queue tracking\n      \u00d7 should queue messages when connection is not ready\n      \u00d7 should handle message serialization correctly\n    Message Receiving\n      \u00d7 should handle real message receiving with event simulation\n      \u00d7 should handle multiple incoming messages in sequence\n      \u00d7 should handle message parsing and validation\n    Message Queuing\n      \u00d7 should handle message queuing with real buffer behavior\n      \u00d7 should respect buffer size limits (1 ms)\n      \u00d7 should handle buffer overflow gracefully\n    Message Failure Handling\n      \u00d7 should handle failed messages with real error conditions\n      \u00d7 should track failed message attempts\n    Message Performance\n      \u00d7 should measure real message round-trip latency\n      \u00d7 should handle concurrent message processing\n      \u00d7 should handle message throughput testing (1 ms)\n\n  \u25cf WebSocket Message Processing Tests \u203a Message Sending \u203a should handle real message sending with queue tracking\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-messaging.test.tsx:21:15)\n\n  \u25cf WebSocket Message Processing Tests \u203a Message Sending \u203a should handle real message sending with queue tracking\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-messaging.test.tsx:25:15)\n\n  \u25cf WebSocket Message Processing Tests \u203a Message Sending \u203a should queue messages when connection is not ready\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-messaging.test.tsx:21:15)\n\n  \u25cf WebSocket Message Processing Tests \u203a Message Sending \u203a should queue messages when connection is not ready\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-messaging.test.tsx:25:15)\n\n  \u25cf WebSocket Message Processing Tests \u203a Message Sending \u203a should handle message serialization correctly\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-messaging.test.tsx:21:15)\n\n  \u25cf WebSocket Message Processing Tests \u203a Message Sending \u203a should handle message serialization correctly\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-messaging.test.tsx:25:15)\n\n  \u25cf WebSocket Message Processing Tests \u203a Message Receiving \u203a should handle real message receiving with event simulation\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-messaging.test.tsx:21:15)\n\n  \u25cf WebSocket Message Processing Tests \u203a Message Receiving \u203a should handle real message receiving with event simulation\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-messaging.test.tsx:25:15)\n\n  \u25cf WebSocket Message Processing Tests \u203a Message Receiving \u203a should handle multiple incoming messages in sequence\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-messaging.test.tsx:21:15)\n\n  \u25cf WebSocket Message Processing Tests \u203a Message Receiving \u203a should handle multiple incoming messages in sequence\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-messaging.test.tsx:25:15)\n\n  \u25cf WebSocket Message Processing Tests \u203a Message Receiving \u203a should handle message parsing and validation\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-messaging.test.tsx:21:15)\n\n  \u25cf WebSocket Message Processing Tests \u203a Message Receiving \u203a should handle message parsing and validation\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-messaging.test.tsx:25:15)\n\n  \u25cf WebSocket Message Processing Tests \u203a Message Queuing \u203a should handle message queuing with real buffer behavior\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-messaging.test.tsx:21:15)\n\n  \u25cf WebSocket Message Processing Tests \u203a Message Queuing \u203a should handle message queuing with real buffer behavior\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-messaging.test.tsx:25:15)\n\n  \u25cf WebSocket Message Processing Tests \u203a Message Queuing \u203a should respect buffer size limits\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-messaging.test.tsx:21:15)\n\n  \u25cf WebSocket Message Processing Tests \u203a Message Queuing \u203a should respect buffer size limits\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-messaging.test.tsx:25:15)\n\n  \u25cf WebSocket Message Processing Tests \u203a Message Queuing \u203a should handle buffer overflow gracefully\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-messaging.test.tsx:21:15)\n\n  \u25cf WebSocket Message Processing Tests \u203a Message Queuing \u203a should handle buffer overflow gracefully\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-messaging.test.tsx:25:15)\n\n  \u25cf WebSocket Message Processing Tests \u203a Message Failure Handling \u203a should handle failed messages with real error conditions\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-messaging.test.tsx:21:15)\n\n  \u25cf WebSocket Message Processing Tests \u203a Message Failure Handling \u203a should handle failed messages with real error conditions\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-messaging.test.tsx:25:15)\n\n  \u25cf WebSocket Message Processing Tests \u203a Message Failure Handling \u203a should track failed message attempts\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-messaging.test.tsx:21:15)\n\n  \u25cf WebSocket Message Processing Tests \u203a Message Failure Handling \u203a should track failed message attempts\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-messaging.test.tsx:25:15)\n\n  \u25cf WebSocket Message Processing Tests \u203a Message Performance \u203a should measure real message round-trip latency\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-messaging.test.tsx:21:15)\n\n  \u25cf WebSocket Message Processing Tests \u203a Message Performance \u203a should measure real message round-trip latency\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-messaging.test.tsx:25:15)\n\n  \u25cf WebSocket Message Processing Tests \u203a Message Performance \u203a should handle concurrent message processing\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-messaging.test.tsx:21:15)\n\n  \u25cf WebSocket Message Processing Tests \u203a Message Performance \u203a should handle concurrent message processing\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-messaging.test.tsx:25:15)\n\n  \u25cf WebSocket Message Processing Tests \u203a Message Performance \u203a should handle message throughput testing\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-messaging.test.tsx:21:15)\n\n  \u25cf WebSocket Message Processing Tests \u203a Message Performance \u203a should handle message throughput testing\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-messaging.test.tsx:25:15)\n\nFAIL Integration Tests __tests__/integration/websocket-stress.test.tsx\n  WebSocket Stress Testing\n    Connection Stress\n      \u00d7 should handle rapid connect/disconnect cycles (1 ms)\n      \u00d7 should handle multiple simultaneous connection attempts (1 ms)\n    Memory Management\n      \u00d7 should handle memory cleanup during stress testing (1 ms)\n      \u00d7 should handle repeated message sending without memory leaks\n    Load Testing\n      \u00d7 should handle high message volume (1 ms)\n      \u00d7 should handle concurrent message bursts\n    Error Recovery Stress\n      \u00d7 should handle repeated error/recovery cycles\n      \u00d7 should maintain message queue integrity during stress\n\n  \u25cf WebSocket Stress Testing \u203a Connection Stress \u203a should handle rapid connect/disconnect cycles\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-stress.test.tsx:18:15)\n\n  \u25cf WebSocket Stress Testing \u203a Connection Stress \u203a should handle rapid connect/disconnect cycles\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-stress.test.tsx:22:15)\n\n  \u25cf WebSocket Stress Testing \u203a Connection Stress \u203a should handle multiple simultaneous connection attempts\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-stress.test.tsx:18:15)\n\n  \u25cf WebSocket Stress Testing \u203a Connection Stress \u203a should handle multiple simultaneous connection attempts\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-stress.test.tsx:22:15)\n\n  \u25cf WebSocket Stress Testing \u203a Memory Management \u203a should handle memory cleanup during stress testing\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-stress.test.tsx:18:15)\n\n  \u25cf WebSocket Stress Testing \u203a Memory Management \u203a should handle memory cleanup during stress testing\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-stress.test.tsx:22:15)\n\n  \u25cf WebSocket Stress Testing \u203a Memory Management \u203a should handle repeated message sending without memory leaks\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-stress.test.tsx:18:15)\n\n  \u25cf WebSocket Stress Testing \u203a Memory Management \u203a should handle repeated message sending without memory leaks\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-stress.test.tsx:22:15)\n\n  \u25cf WebSocket Stress Testing \u203a Load Testing \u203a should handle high message volume\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-stress.test.tsx:18:15)\n\n  \u25cf WebSocket Stress Testing \u203a Load Testing \u203a should handle high message volume\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-stress.test.tsx:22:15)\n\n  \u25cf WebSocket Stress Testing \u203a Load Testing \u203a should handle concurrent message bursts\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-stress.test.tsx:18:15)\n\n  \u25cf WebSocket Stress Testing \u203a Load Testing \u203a should handle concurrent message bursts\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-stress.test.tsx:22:15)\n\n  \u25cf WebSocket Stress Testing \u203a Error Recovery Stress \u203a should handle repeated error/recovery cycles\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-stress.test.tsx:18:15)\n\n  \u25cf WebSocket Stress Testing \u203a Error Recovery Stress \u203a should handle repeated error/recovery cycles\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-stress.test.tsx:22:15)\n\n  \u25cf WebSocket Stress Testing \u203a Error Recovery Stress \u203a should maintain message queue integrity during stress\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-stress.test.tsx:18:15)\n\n  \u25cf WebSocket Stress Testing \u203a Error Recovery Stress \u203a should maintain message queue integrity during stress\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-stress.test.tsx:22:15)\n\nFAIL Integration Tests __tests__/integration/data-fetching-core.test.tsx\n  Data Fetching - Core Caching\n    \u221a fetches data on initial load (32 ms)\n    \u221a caches fetched data for subsequent requests (11 ms)\n    \u221a bypasses cache when explicitly requested (100 ms)\n    \u221a handles cache misses gracefully (6 ms)\n    \u00d7 implements request deduplication (29 ms)\n    \u221a handles large datasets efficiently (26 ms)\n\n  \u25cf Data Fetching - Core Caching \u203a implements request deduplication\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 1\n    Received: 3\n\n    \u001b[0m \u001b[90m 283 |\u001b[39m     \n     \u001b[90m 284 |\u001b[39m     \u001b[90m// With proper deduplication, should only make one request\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 285 |\u001b[39m     expect(requestCount)\u001b[33m.\u001b[39mtoBe(\u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 286 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 287 |\u001b[39m\n     \u001b[90m 288 |\u001b[39m   it(\u001b[32m'handles large datasets efficiently'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/data-fetching-core.test.tsx:285:26)\n\nFAIL Integration Tests __tests__/integration/websocket-resilience.test.tsx\n  WebSocket Resilience Tests\n    Connection Status Management\n      \u00d7 should display connection status correctly (1 ms)\n      \u00d7 should handle connection errors\n      \u00d7 should track reconnection attempts\n    Message Queue Management\n      \u00d7 should queue messages when disconnected\n      \u00d7 should clear message queue\n    WebSocket Service Integration\n      \u00d7 should handle WebSocket service errors gracefully\n      \u00d7 should clean up resources properly\n    Resilience Patterns\n      \u00d7 should recover from error state to connected state\n      \u00d7 should handle rapid state changes\n\n  \u25cf WebSocket Resilience Tests \u203a Connection Status Management \u203a should display connection status correctly\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-resilience.test.tsx:118:15)\n\n  \u25cf WebSocket Resilience Tests \u203a Connection Status Management \u203a should display connection status correctly\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-resilience.test.tsx:122:15)\n\n  \u25cf WebSocket Resilience Tests \u203a Connection Status Management \u203a should handle connection errors\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-resilience.test.tsx:118:15)\n\n  \u25cf WebSocket Resilience Tests \u203a Connection Status Management \u203a should handle connection errors\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-resilience.test.tsx:122:15)\n\n  \u25cf WebSocket Resilience Tests \u203a Connection Status Management \u203a should track reconnection attempts\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-resilience.test.tsx:118:15)\n\n  \u25cf WebSocket Resilience Tests \u203a Connection Status Management \u203a should track reconnection attempts\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-resilience.test.tsx:122:15)\n\n  \u25cf WebSocket Resilience Tests \u203a Message Queue Management \u203a should queue messages when disconnected\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-resilience.test.tsx:118:15)\n\n  \u25cf WebSocket Resilience Tests \u203a Message Queue Management \u203a should queue messages when disconnected\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-resilience.test.tsx:122:15)\n\n  \u25cf WebSocket Resilience Tests \u203a Message Queue Management \u203a should clear message queue\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-resilience.test.tsx:118:15)\n\n  \u25cf WebSocket Resilience Tests \u203a Message Queue Management \u203a should clear message queue\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-resilience.test.tsx:122:15)\n\n  \u25cf WebSocket Resilience Tests \u203a WebSocket Service Integration \u203a should handle WebSocket service errors gracefully\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-resilience.test.tsx:118:15)\n\n  \u25cf WebSocket Resilience Tests \u203a WebSocket Service Integration \u203a should handle WebSocket service errors gracefully\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-resilience.test.tsx:122:15)\n\n  \u25cf WebSocket Resilience Tests \u203a WebSocket Service Integration \u203a should clean up resources properly\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-resilience.test.tsx:118:15)\n\n  \u25cf WebSocket Resilience Tests \u203a WebSocket Service Integration \u203a should clean up resources properly\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-resilience.test.tsx:122:15)\n\n  \u25cf WebSocket Resilience Tests \u203a Resilience Patterns \u203a should recover from error state to connected state\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-resilience.test.tsx:118:15)\n\n  \u25cf WebSocket Resilience Tests \u203a Resilience Patterns \u203a should recover from error state to connected state\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-resilience.test.tsx:122:15)\n\n  \u25cf WebSocket Resilience Tests \u203a Resilience Patterns \u203a should handle rapid state changes\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-resilience.test.tsx:118:15)\n\n  \u25cf WebSocket Resilience Tests \u203a Resilience Patterns \u203a should handle rapid state changes\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-resilience.test.tsx:122:15)\n\nFAIL Integration Tests __tests__/integration/thread-switching.test.tsx\n  Thread Switching and Navigation Tests\n    Basic Thread Switching\n      \u00d7 should switch threads with loading state (1 ms)\n      \u00d7 should load message history for selected thread (1 ms)\n      \u00d7 should update URL correctly on thread switch\n      \u00d7 should show active thread indication\n    Draft Message Preservation\n      \u00d7 should preserve draft messages when switching threads\n      \u00d7 should clear draft after sending message\n    Rapid Thread Switching\n      \u00d7 should handle 10 rapid thread switches within 2 seconds\n      \u00d7 should prevent clicks during loading state (1 ms)\n    Message Isolation\n      \u00d7 should not mix messages between threads (1 ms)\n      \u00d7 should maintain separate message histories\n    WebSocket Subscription Updates\n      \u00d7 should update WebSocket subscriptions on thread switch\n    Browser Navigation Integration\n      \u00d7 should handle browser back/forward navigation\n      \u00d7 should maintain thread state during navigation\n    Performance Metrics\n      \u00d7 should switch threads in less than 200ms\n      \u00d7 should handle concurrent rapid switches without performance degradation\n\n  \u25cf Thread Switching and Navigation Tests \u203a Basic Thread Switching \u203a should switch threads with loading state\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/thread-switching.test.tsx:267:15)\n\n  \u25cf Thread Switching and Navigation Tests \u203a Basic Thread Switching \u203a should switch threads with loading state\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/thread-switching.test.tsx:273:15)\n\n  \u25cf Thread Switching and Navigation Tests \u203a Basic Thread Switching \u203a should load message history for selected thread\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/thread-switching.test.tsx:267:15)\n\n  \u25cf Thread Switching and Navigation Tests \u203a Basic Thread Switching \u203a should load message history for selected thread\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/thread-switching.test.tsx:273:15)\n\n  \u25cf Thread Switching and Navigation Tests \u203a Basic Thread Switching \u203a should update URL correctly on thread switch\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/thread-switching.test.tsx:267:15)\n\n  \u25cf Thread Switching and Navigation Tests \u203a Basic Thread Switching \u203a should update URL correctly on thread switch\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/thread-switching.test.tsx:273:15)\n\n  \u25cf Thread Switching and Navigation Tests \u203a Basic Thread Switching \u203a should show active thread indication\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/thread-switching.test.tsx:267:15)\n\n  \u25cf Thread Switching and Navigation Tests \u203a Basic Thread Switching \u203a should show active thread indication\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/thread-switching.test.tsx:273:15)\n\n  \u25cf Thread Switching and Navigation Tests \u203a Draft Message Preservation \u203a should preserve draft messages when switching threads\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/thread-switching.test.tsx:267:15)\n\n  \u25cf Thread Switching and Navigation Tests \u203a Draft Message Preservation \u203a should preserve draft messages when switching threads\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/thread-switching.test.tsx:273:15)\n\n  \u25cf Thread Switching and Navigation Tests \u203a Draft Message Preservation \u203a should clear draft after sending message\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/thread-switching.test.tsx:267:15)\n\n  \u25cf Thread Switching and Navigation Tests \u203a Draft Message Preservation \u203a should clear draft after sending message\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/thread-switching.test.tsx:273:15)\n\n  \u25cf Thread Switching and Navigation Tests \u203a Rapid Thread Switching \u203a should handle 10 rapid thread switches within 2 seconds\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/thread-switching.test.tsx:267:15)\n\n  \u25cf Thread Switching and Navigation Tests \u203a Rapid Thread Switching \u203a should handle 10 rapid thread switches within 2 seconds\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/thread-switching.test.tsx:273:15)\n\n  \u25cf Thread Switching and Navigation Tests \u203a Rapid Thread Switching \u203a should prevent clicks during loading state\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/thread-switching.test.tsx:267:15)\n\n  \u25cf Thread Switching and Navigation Tests \u203a Rapid Thread Switching \u203a should prevent clicks during loading state\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/thread-switching.test.tsx:273:15)\n\n  \u25cf Thread Switching and Navigation Tests \u203a Message Isolation \u203a should not mix messages between threads\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/thread-switching.test.tsx:267:15)\n\n  \u25cf Thread Switching and Navigation Tests \u203a Message Isolation \u203a should not mix messages between threads\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/thread-switching.test.tsx:273:15)\n\n  \u25cf Thread Switching and Navigation Tests \u203a Message Isolation \u203a should maintain separate message histories\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/thread-switching.test.tsx:267:15)\n\n  \u25cf Thread Switching and Navigation Tests \u203a Message Isolation \u203a should maintain separate message histories\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/thread-switching.test.tsx:273:15)\n\n  \u25cf Thread Switching and Navigation Tests \u203a WebSocket Subscription Updates \u203a should update WebSocket subscriptions on thread switch\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/thread-switching.test.tsx:267:15)\n\n  \u25cf Thread Switching and Navigation Tests \u203a WebSocket Subscription Updates \u203a should update WebSocket subscriptions on thread switch\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/thread-switching.test.tsx:273:15)\n\n  \u25cf Thread Switching and Navigation Tests \u203a Browser Navigation Integration \u203a should handle browser back/forward navigation\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/thread-switching.test.tsx:267:15)\n\n  \u25cf Thread Switching and Navigation Tests \u203a Browser Navigation Integration \u203a should handle browser back/forward navigation\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/thread-switching.test.tsx:273:15)\n\n  \u25cf Thread Switching and Navigation Tests \u203a Browser Navigation Integration \u203a should maintain thread state during navigation\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/thread-switching.test.tsx:267:15)\n\n  \u25cf Thread Switching and Navigation Tests \u203a Browser Navigation Integration \u203a should maintain thread state during navigation\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/thread-switching.test.tsx:273:15)\n\n  \u25cf Thread Switching and Navigation Tests \u203a Performance Metrics \u203a should switch threads in less than 200ms\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/thread-switching.test.tsx:267:15)\n\n  \u25cf Thread Switching and Navigation Tests \u203a Performance Metrics \u203a should switch threads in less than 200ms\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/thread-switching.test.tsx:273:15)\n\n  \u25cf Thread Switching and Navigation Tests \u203a Performance Metrics \u203a should handle concurrent rapid switches without performance degradation\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/thread-switching.test.tsx:267:15)\n\n  \u25cf Thread Switching and Navigation Tests \u203a Performance Metrics \u203a should handle concurrent rapid switches without performance degradation\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/thread-switching.test.tsx:273:15)\n\nFAIL Integration Tests __tests__/services/demoService.test.ts\n  DemoService\n    Authentication Handling\n      \u00d7 should include auth header when token exists (2 ms)\n      \u00d7 should handle requests without auth token (1 ms)\n      \u00d7 should redirect to login on 401 response (27 ms)\n      \u00d7 should not redirect on other error codes (7 ms)\n    Chat Message Handling\n      \u221a should send chat message successfully (1 ms)\n      \u221a should handle chat message with minimal data (1 ms)\n      \u221a should handle chat message network errors (7 ms)\n    ROI Calculation - Business Critical\n      \u221a should calculate ROI accurately for enterprise prospects (1 ms)\n      \u221a should validate ROI calculation input bounds (1 ms)\n      \u00d7 should handle ROI calculation server errors gracefully (6 ms)\n      \u00d7 should handle malformed ROI input data (7 ms)\n    Industry Templates\n      \u221a should fetch industry templates successfully (1 ms)\n      \u221a should handle special characters in industry names\n      \u221a should handle empty industry templates response\n    Synthetic Metrics Generation\n      \u221a should generate synthetic metrics with default parameters (2 ms)\n      \u221a should generate synthetic metrics with custom parameters (1 ms)\n      \u221a should validate performance improvement metrics\n    Report Export - Enterprise Feature\n      \u221a should export report successfully (1 ms)\n      \u221a should handle different export formats (1 ms)\n      \u00d7 should handle export failures gracefully (3 ms)\n    Session Management\n      \u221a should get session status successfully (1 ms)\n      \u221a should submit feedback successfully\n      \u00d7 should handle session status for non-existent session (6 ms)\n    Analytics Summary\n      \u221a should get analytics summary with default period\n      \u221a should get analytics summary with custom period (1 ms)\n      \u221a should validate analytics data format (1 ms)\n    Error Handling and Edge Cases\n      \u221a should handle network timeouts gracefully (9 ms)\n      \u221a should handle malformed JSON responses (1 ms)\n      \u221a should handle concurrent requests correctly (1 ms)\n\n  \u25cf DemoService \u203a Authentication Handling \u203a should include auth header when token exists\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: StringContaining \"/api/demo/chat\", ObjectContaining {\"headers\": ObjectContaining {\"Authorization\": \"Bearer valid-token\"}}\n    Received: \"http://localhost:8081/api/demo/chat\", {\"body\": \"{\\\"message\\\":\\\"What are the cost savings for Financial Services?\\\",\\\"industry\\\":\\\"Financial Services\\\",\\\"session_id\\\":\\\"demo-session-123\\\",\\\"context\\\":{\\\"user_type\\\":\\\"enterprise_prospect\\\"}}\", \"headers\": {\"Authorization\": \"Bearer mock-token\", \"Content-Type\": \"application/json\"}, \"method\": \"POST\"}\n\n    Number of calls: 1\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mawait\u001b[39m demoService\u001b[33m.\u001b[39msendChatMessage(request)\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m       expect(fetch)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\n     \u001b[90m     |\u001b[39m                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m         expect\u001b[33m.\u001b[39mstringContaining(\u001b[32m'/api/demo/chat'\u001b[39m)\u001b[33m,\u001b[39m\n     \u001b[90m 132 |\u001b[39m         expect\u001b[33m.\u001b[39mobjectContaining({\n     \u001b[90m 133 |\u001b[39m           headers\u001b[33m:\u001b[39m expect\u001b[33m.\u001b[39mobjectContaining({\u001b[0m\n\n      at Object.<anonymous> (__tests__/services/demoService.test.ts:130:21)\n\n  \u25cf DemoService \u203a Authentication Handling \u203a should handle requests without auth token\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: StringContaining \"/api/demo/chat\", ObjectContaining {\"headers\": ObjectNotContaining {\"Authorization\": Any<String>}}\n    Received: \"http://localhost:8081/api/demo/chat\", {\"body\": \"{\\\"message\\\":\\\"What are the cost savings for Financial Services?\\\",\\\"industry\\\":\\\"Financial Services\\\",\\\"session_id\\\":\\\"demo-session-123\\\",\\\"context\\\":{\\\"user_type\\\":\\\"enterprise_prospect\\\"}}\", \"headers\": {\"Authorization\": \"Bearer mock-token\", \"Content-Type\": \"application/json\"}, \"method\": \"POST\"}\n\n    Number of calls: 1\n\n    \u001b[0m \u001b[90m 146 |\u001b[39m       \u001b[36mawait\u001b[39m demoService\u001b[33m.\u001b[39msendChatMessage(request)\u001b[33m;\u001b[39m\n     \u001b[90m 147 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 148 |\u001b[39m       expect(fetch)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\n     \u001b[90m     |\u001b[39m                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 149 |\u001b[39m         expect\u001b[33m.\u001b[39mstringContaining(\u001b[32m'/api/demo/chat'\u001b[39m)\u001b[33m,\u001b[39m\n     \u001b[90m 150 |\u001b[39m         expect\u001b[33m.\u001b[39mobjectContaining({\n     \u001b[90m 151 |\u001b[39m           headers\u001b[33m:\u001b[39m expect\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mobjectContaining({\u001b[0m\n\n      at Object.<anonymous> (__tests__/services/demoService.test.ts:148:21)\n\n  \u25cf DemoService \u203a Authentication Handling \u203a should redirect to login on 401 response\n\n    expect(received).rejects.toThrow(expected)\n\n    Expected substring: \"Unauthorized\"\n    Received message:   \"response.text is not a function\"\n\n        \u001b[0m \u001b[90m 87 |\u001b[39m       \n         \u001b[90m 88 |\u001b[39m       \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mresponse\u001b[33m.\u001b[39mok) {\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 89 |\u001b[39m         \u001b[36mconst\u001b[39m errorData \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m response\u001b[33m.\u001b[39mtext()\u001b[33m;\u001b[39m\n         \u001b[90m    |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 90 |\u001b[39m         \u001b[36mlet\u001b[39m errorMessage\u001b[33m:\u001b[39m string\u001b[33m;\u001b[39m\n         \u001b[90m 91 |\u001b[39m         \u001b[36mtry\u001b[39m {\n         \u001b[90m 92 |\u001b[39m           \u001b[36mconst\u001b[39m parsed \u001b[33m=\u001b[39m \u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mparse(errorData)\u001b[33m;\u001b[39m\u001b[0m\n\n      at DemoService.fetchWithAuth (services/demoService.ts:89:42)\n      at DemoService.sendChatMessage (services/demoService.ts:115:22)\n      at Object.<anonymous> (__tests__/services/demoService.test.ts:164:7)\n      at Object.toThrow (node_modules/expect/build/index.js:2155:20)\n      at Object.<anonymous> (__tests__/services/demoService.test.ts:164:66)\n\n  \u25cf DemoService \u203a Authentication Handling \u203a should not redirect on other error codes\n\n    expect(received).rejects.toThrow(expected)\n\n    Expected substring: \"Failed to send demo chat message: Server Error\"\n    Received message:   \"response.text is not a function\"\n\n        \u001b[0m \u001b[90m 87 |\u001b[39m       \n         \u001b[90m 88 |\u001b[39m       \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mresponse\u001b[33m.\u001b[39mok) {\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 89 |\u001b[39m         \u001b[36mconst\u001b[39m errorData \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m response\u001b[33m.\u001b[39mtext()\u001b[33m;\u001b[39m\n         \u001b[90m    |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 90 |\u001b[39m         \u001b[36mlet\u001b[39m errorMessage\u001b[33m:\u001b[39m string\u001b[33m;\u001b[39m\n         \u001b[90m 91 |\u001b[39m         \u001b[36mtry\u001b[39m {\n         \u001b[90m 92 |\u001b[39m           \u001b[36mconst\u001b[39m parsed \u001b[33m=\u001b[39m \u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mparse(errorData)\u001b[33m;\u001b[39m\u001b[0m\n\n      at DemoService.fetchWithAuth (services/demoService.ts:89:42)\n      at DemoService.sendChatMessage (services/demoService.ts:115:22)\n      at Object.<anonymous> (__tests__/services/demoService.test.ts:175:7)\n      at Object.toThrow (node_modules/expect/build/index.js:2155:20)\n      at Object.<anonymous> (__tests__/services/demoService.test.ts:175:66)\n\n  \u25cf DemoService \u203a ROI Calculation - Business Critical \u203a should handle ROI calculation server errors gracefully\n\n    expect(received).rejects.toThrow(expected)\n\n    Expected substring: \"Failed to calculate ROI: Calculation Error\"\n    Received message:   \"response.text is not a function\"\n\n        \u001b[0m \u001b[90m 87 |\u001b[39m       \n         \u001b[90m 88 |\u001b[39m       \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mresponse\u001b[33m.\u001b[39mok) {\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 89 |\u001b[39m         \u001b[36mconst\u001b[39m errorData \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m response\u001b[33m.\u001b[39mtext()\u001b[33m;\u001b[39m\n         \u001b[90m    |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 90 |\u001b[39m         \u001b[36mlet\u001b[39m errorMessage\u001b[33m:\u001b[39m string\u001b[33m;\u001b[39m\n         \u001b[90m 91 |\u001b[39m         \u001b[36mtry\u001b[39m {\n         \u001b[90m 92 |\u001b[39m           \u001b[36mconst\u001b[39m parsed \u001b[33m=\u001b[39m \u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mparse(errorData)\u001b[33m;\u001b[39m\u001b[0m\n\n      at DemoService.fetchWithAuth (services/demoService.ts:89:42)\n      at DemoService.calculateROI (services/demoService.ts:128:22)\n      at Object.<anonymous> (__tests__/services/demoService.test.ts:270:7)\n      at Object.toThrow (node_modules/expect/build/index.js:2155:20)\n      at Object.<anonymous> (__tests__/services/demoService.test.ts:270:63)\n\n  \u25cf DemoService \u203a ROI Calculation - Business Critical \u203a should handle malformed ROI input data\n\n    expect(received).rejects.toThrow(expected)\n\n    Expected substring: \"Failed to calculate ROI: Bad Request\"\n    Received message:   \"response.text is not a function\"\n\n        \u001b[0m \u001b[90m 87 |\u001b[39m       \n         \u001b[90m 88 |\u001b[39m       \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mresponse\u001b[33m.\u001b[39mok) {\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 89 |\u001b[39m         \u001b[36mconst\u001b[39m errorData \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m response\u001b[33m.\u001b[39mtext()\u001b[33m;\u001b[39m\n         \u001b[90m    |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 90 |\u001b[39m         \u001b[36mlet\u001b[39m errorMessage\u001b[33m:\u001b[39m string\u001b[33m;\u001b[39m\n         \u001b[90m 91 |\u001b[39m         \u001b[36mtry\u001b[39m {\n         \u001b[90m 92 |\u001b[39m           \u001b[36mconst\u001b[39m parsed \u001b[33m=\u001b[39m \u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mparse(errorData)\u001b[33m;\u001b[39m\u001b[0m\n\n      at DemoService.fetchWithAuth (services/demoService.ts:89:42)\n      at DemoService.calculateROI (services/demoService.ts:128:22)\n      at Object.<anonymous> (__tests__/services/demoService.test.ts:282:7)\n      at Object.toThrow (node_modules/expect/build/index.js:2155:20)\n      at Object.<anonymous> (__tests__/services/demoService.test.ts:282:70)\n\n  \u25cf DemoService \u203a Report Export - Enterprise Feature \u203a should handle export failures gracefully\n\n    expect(received).rejects.toThrow(expected)\n\n    Expected substring: \"Failed to export report: Service Unavailable\"\n    Received message:   \"response.text is not a function\"\n\n        \u001b[0m \u001b[90m 87 |\u001b[39m       \n         \u001b[90m 88 |\u001b[39m       \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mresponse\u001b[33m.\u001b[39mok) {\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 89 |\u001b[39m         \u001b[36mconst\u001b[39m errorData \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m response\u001b[33m.\u001b[39mtext()\u001b[33m;\u001b[39m\n         \u001b[90m    |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 90 |\u001b[39m         \u001b[36mlet\u001b[39m errorMessage\u001b[33m:\u001b[39m string\u001b[33m;\u001b[39m\n         \u001b[90m 91 |\u001b[39m         \u001b[36mtry\u001b[39m {\n         \u001b[90m 92 |\u001b[39m           \u001b[36mconst\u001b[39m parsed \u001b[33m=\u001b[39m \u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mparse(errorData)\u001b[33m;\u001b[39m\u001b[0m\n\n      at DemoService.fetchWithAuth (services/demoService.ts:89:42)\n      at DemoService.exportReport (services/demoService.ts:166:22)\n      at Object.<anonymous> (__tests__/services/demoService.test.ts:424:7)\n      at Object.toThrow (node_modules/expect/build/index.js:2155:20)\n      at Object.<anonymous> (__tests__/services/demoService.test.ts:424:69)\n\n  \u25cf DemoService \u203a Session Management \u203a should handle session status for non-existent session\n\n    expect(received).rejects.toThrow(expected)\n\n    Expected substring: \"Failed to get session status: Session Not Found\"\n    Received message:   \"response.text is not a function\"\n\n        \u001b[0m \u001b[90m 87 |\u001b[39m       \n         \u001b[90m 88 |\u001b[39m       \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mresponse\u001b[33m.\u001b[39mok) {\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 89 |\u001b[39m         \u001b[36mconst\u001b[39m errorData \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m response\u001b[33m.\u001b[39mtext()\u001b[33m;\u001b[39m\n         \u001b[90m    |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 90 |\u001b[39m         \u001b[36mlet\u001b[39m errorMessage\u001b[33m:\u001b[39m string\u001b[33m;\u001b[39m\n         \u001b[90m 91 |\u001b[39m         \u001b[36mtry\u001b[39m {\n         \u001b[90m 92 |\u001b[39m           \u001b[36mconst\u001b[39m parsed \u001b[33m=\u001b[39m \u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mparse(errorData)\u001b[33m;\u001b[39m\u001b[0m\n\n      at DemoService.fetchWithAuth (services/demoService.ts:89:42)\n      at DemoService.getSessionStatus (services/demoService.ts:179:22)\n      at Object.<anonymous> (__tests__/services/demoService.test.ts:466:7)\n      at Object.toThrow (node_modules/expect/build/index.js:2155:20)\n      at Object.<anonymous> (__tests__/services/demoService.test.ts:466:77)\n\nFAIL Integration Tests __tests__/integration/connection-performance.test.tsx\n  Connection Performance Tests\n    Multiple Concurrent Connections\n      \u00d7 should handle multiple WebSocket connections (1 ms)\n      \u00d7 should isolate connection states (1 ms)\n      \u00d7 should close individual connections\n      \u00d7 should close all connections (1 ms)\n    Performance Under Load\n      \u00d7 should handle concurrent connection attempts (1 ms)\n      \u00d7 should maintain performance with many connections\n      \u00d7 should handle rapid state changes\n      \u00d7 should scale connection management\n    Memory Management\n      \u00d7 should prevent memory leaks (1 ms)\n      \u00d7 should handle cleanup during active operations (1 ms)\n      \u00d7 should manage connection lifecycle efficiently (1 ms)\n    Stress Testing\n      \u00d7 should handle rapid create/destroy cycles (1 ms)\n      \u00d7 should maintain state consistency under load (1 ms)\n      \u00d7 should handle burst connection requests (1 ms)\n    Resource Optimization\n      \u00d7 should optimize connection reuse (1 ms)\n      \u00d7 should efficiently batch operations (1 ms)\n      \u00d7 should handle connection pool efficiently\n\n  \u25cf Connection Performance Tests \u203a Multiple Concurrent Connections \u203a should handle multiple WebSocket connections\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-performance.test.tsx:80:15)\n\n  \u25cf Connection Performance Tests \u203a Multiple Concurrent Connections \u203a should handle multiple WebSocket connections\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-performance.test.tsx:85:15)\n\n  \u25cf Connection Performance Tests \u203a Multiple Concurrent Connections \u203a should isolate connection states\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-performance.test.tsx:80:15)\n\n  \u25cf Connection Performance Tests \u203a Multiple Concurrent Connections \u203a should isolate connection states\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-performance.test.tsx:85:15)\n\n  \u25cf Connection Performance Tests \u203a Multiple Concurrent Connections \u203a should close individual connections\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-performance.test.tsx:80:15)\n\n  \u25cf Connection Performance Tests \u203a Multiple Concurrent Connections \u203a should close individual connections\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-performance.test.tsx:85:15)\n\n  \u25cf Connection Performance Tests \u203a Multiple Concurrent Connections \u203a should close all connections\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-performance.test.tsx:80:15)\n\n  \u25cf Connection Performance Tests \u203a Multiple Concurrent Connections \u203a should close all connections\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-performance.test.tsx:85:15)\n\n  \u25cf Connection Performance Tests \u203a Performance Under Load \u203a should handle concurrent connection attempts\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-performance.test.tsx:80:15)\n\n  \u25cf Connection Performance Tests \u203a Performance Under Load \u203a should handle concurrent connection attempts\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-performance.test.tsx:85:15)\n\n  \u25cf Connection Performance Tests \u203a Performance Under Load \u203a should maintain performance with many connections\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-performance.test.tsx:80:15)\n\n  \u25cf Connection Performance Tests \u203a Performance Under Load \u203a should maintain performance with many connections\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-performance.test.tsx:85:15)\n\n  \u25cf Connection Performance Tests \u203a Performance Under Load \u203a should handle rapid state changes\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-performance.test.tsx:80:15)\n\n  \u25cf Connection Performance Tests \u203a Performance Under Load \u203a should handle rapid state changes\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-performance.test.tsx:85:15)\n\n  \u25cf Connection Performance Tests \u203a Performance Under Load \u203a should scale connection management\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-performance.test.tsx:80:15)\n\n  \u25cf Connection Performance Tests \u203a Performance Under Load \u203a should scale connection management\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-performance.test.tsx:85:15)\n\n  \u25cf Connection Performance Tests \u203a Memory Management \u203a should prevent memory leaks\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-performance.test.tsx:80:15)\n\n  \u25cf Connection Performance Tests \u203a Memory Management \u203a should prevent memory leaks\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-performance.test.tsx:85:15)\n\n  \u25cf Connection Performance Tests \u203a Memory Management \u203a should handle cleanup during active operations\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-performance.test.tsx:80:15)\n\n  \u25cf Connection Performance Tests \u203a Memory Management \u203a should handle cleanup during active operations\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-performance.test.tsx:85:15)\n\n  \u25cf Connection Performance Tests \u203a Memory Management \u203a should manage connection lifecycle efficiently\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-performance.test.tsx:80:15)\n\n  \u25cf Connection Performance Tests \u203a Memory Management \u203a should manage connection lifecycle efficiently\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-performance.test.tsx:85:15)\n\n  \u25cf Connection Performance Tests \u203a Stress Testing \u203a should handle rapid create/destroy cycles\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-performance.test.tsx:80:15)\n\n  \u25cf Connection Performance Tests \u203a Stress Testing \u203a should handle rapid create/destroy cycles\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-performance.test.tsx:85:15)\n\n  \u25cf Connection Performance Tests \u203a Stress Testing \u203a should maintain state consistency under load\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-performance.test.tsx:80:15)\n\n  \u25cf Connection Performance Tests \u203a Stress Testing \u203a should maintain state consistency under load\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-performance.test.tsx:85:15)\n\n  \u25cf Connection Performance Tests \u203a Stress Testing \u203a should handle burst connection requests\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-performance.test.tsx:80:15)\n\n  \u25cf Connection Performance Tests \u203a Stress Testing \u203a should handle burst connection requests\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-performance.test.tsx:85:15)\n\n  \u25cf Connection Performance Tests \u203a Resource Optimization \u203a should optimize connection reuse\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-performance.test.tsx:80:15)\n\n  \u25cf Connection Performance Tests \u203a Resource Optimization \u203a should optimize connection reuse\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-performance.test.tsx:85:15)\n\n  \u25cf Connection Performance Tests \u203a Resource Optimization \u203a should efficiently batch operations\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-performance.test.tsx:80:15)\n\n  \u25cf Connection Performance Tests \u203a Resource Optimization \u203a should efficiently batch operations\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-performance.test.tsx:85:15)\n\n  \u25cf Connection Performance Tests \u203a Resource Optimization \u203a should handle connection pool efficiently\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-performance.test.tsx:80:15)\n\n  \u25cf Connection Performance Tests \u203a Resource Optimization \u203a should handle connection pool efficiently\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-performance.test.tsx:85:15)\n\nFAIL Integration Tests __tests__/integration/api-calls-basic.test.tsx\n  API Calls - GET Requests\n    \u00d7 fetches thread list successfully (17 ms)\n    \u00d7 fetches single thread with auth token\n    \u00d7 handles GET request without auth token\n    \u221a constructs correct API URL for GET requests (1 ms)\n  API Calls - POST Requests\n    \u00d7 creates new thread with POST request\n    \u00d7 creates message with POST and validates payload\n    \u00d7 includes correct headers in POST requests (1 ms)\n    \u00d7 serializes request body correctly (1 ms)\n  API Calls - PUT Requests\n    \u00d7 updates thread with PUT request (1 ms)\n    \u00d7 handles PUT request with complex data (1 ms)\n  API Calls - DELETE Requests\n    \u00d7 deletes thread with DELETE request\n    \u00d7 includes auth header in DELETE requests\n\n  \u25cf API Calls - GET Requests \u203a fetches thread list successfully\n\n    Endpoint get_threads not found\n\n    \u001b[0m \u001b[90m  7 |\u001b[39m     \u001b[36mconst\u001b[39m endpoint \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m getEndpoint(endpointName\u001b[33m,\u001b[39m method)\u001b[33m;\u001b[39m\n     \u001b[90m  8 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mendpoint) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Endpoint ${endpointName} not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 10 |\u001b[39m     }\n     \u001b[90m 11 |\u001b[39m\n     \u001b[90m 12 |\u001b[39m     \u001b[36mconst\u001b[39m url \u001b[33m=\u001b[39m getApiUrl(endpoint\u001b[33m.\u001b[39mpath)\u001b[33m;\u001b[39m\u001b[0m\n\n      at ApiClient.request (services/apiClient.ts:9:13)\n      at Object.<anonymous> (__tests__/integration/api-calls-basic.test.tsx:130:22)\n\n  \u25cf API Calls - GET Requests \u203a fetches single thread with auth token\n\n    Endpoint get_thread not found\n\n    \u001b[0m \u001b[90m  7 |\u001b[39m     \u001b[36mconst\u001b[39m endpoint \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m getEndpoint(endpointName\u001b[33m,\u001b[39m method)\u001b[33m;\u001b[39m\n     \u001b[90m  8 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mendpoint) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Endpoint ${endpointName} not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 10 |\u001b[39m     }\n     \u001b[90m 11 |\u001b[39m\n     \u001b[90m 12 |\u001b[39m     \u001b[36mconst\u001b[39m url \u001b[33m=\u001b[39m getApiUrl(endpoint\u001b[33m.\u001b[39mpath)\u001b[33m;\u001b[39m\u001b[0m\n\n      at ApiClient.request (services/apiClient.ts:9:13)\n      at Object.<anonymous> (__tests__/integration/api-calls-basic.test.tsx:141:22)\n\n  \u25cf API Calls - GET Requests \u203a handles GET request without auth token\n\n    Endpoint get_threads not found\n\n    \u001b[0m \u001b[90m  7 |\u001b[39m     \u001b[36mconst\u001b[39m endpoint \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m getEndpoint(endpointName\u001b[33m,\u001b[39m method)\u001b[33m;\u001b[39m\n     \u001b[90m  8 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mendpoint) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Endpoint ${endpointName} not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 10 |\u001b[39m     }\n     \u001b[90m 11 |\u001b[39m\n     \u001b[90m 12 |\u001b[39m     \u001b[36mconst\u001b[39m url \u001b[33m=\u001b[39m getApiUrl(endpoint\u001b[33m.\u001b[39mpath)\u001b[33m;\u001b[39m\u001b[0m\n\n      at ApiClient.request (services/apiClient.ts:9:13)\n      at Object.<anonymous> (__tests__/integration/api-calls-basic.test.tsx:151:22)\n\n  \u25cf API Calls - POST Requests \u203a creates new thread with POST request\n\n    Endpoint create_thread not found\n\n    \u001b[0m \u001b[90m  7 |\u001b[39m     \u001b[36mconst\u001b[39m endpoint \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m getEndpoint(endpointName\u001b[33m,\u001b[39m method)\u001b[33m;\u001b[39m\n     \u001b[90m  8 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mendpoint) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Endpoint ${endpointName} not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 10 |\u001b[39m     }\n     \u001b[90m 11 |\u001b[39m\n     \u001b[90m 12 |\u001b[39m     \u001b[36mconst\u001b[39m url \u001b[33m=\u001b[39m getApiUrl(endpoint\u001b[33m.\u001b[39mpath)\u001b[33m;\u001b[39m\u001b[0m\n\n      at ApiClient.request (services/apiClient.ts:9:13)\n      at Object.<anonymous> (__tests__/integration/api-calls-basic.test.tsx:169:22)\n\n  \u25cf API Calls - POST Requests \u203a creates message with POST and validates payload\n\n    Endpoint create_message not found\n\n    \u001b[0m \u001b[90m  7 |\u001b[39m     \u001b[36mconst\u001b[39m endpoint \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m getEndpoint(endpointName\u001b[33m,\u001b[39m method)\u001b[33m;\u001b[39m\n     \u001b[90m  8 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mendpoint) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Endpoint ${endpointName} not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 10 |\u001b[39m     }\n     \u001b[90m 11 |\u001b[39m\n     \u001b[90m 12 |\u001b[39m     \u001b[36mconst\u001b[39m url \u001b[33m=\u001b[39m getApiUrl(endpoint\u001b[33m.\u001b[39mpath)\u001b[33m;\u001b[39m\u001b[0m\n\n      at ApiClient.request (services/apiClient.ts:9:13)\n      at Object.<anonymous> (__tests__/integration/api-calls-basic.test.tsx:184:22)\n\n  \u25cf API Calls - POST Requests \u203a includes correct headers in POST requests\n\n    Endpoint create_thread not found\n\n    \u001b[0m \u001b[90m  7 |\u001b[39m     \u001b[36mconst\u001b[39m endpoint \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m getEndpoint(endpointName\u001b[33m,\u001b[39m method)\u001b[33m;\u001b[39m\n     \u001b[90m  8 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mendpoint) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Endpoint ${endpointName} not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 10 |\u001b[39m     }\n     \u001b[90m 11 |\u001b[39m\n     \u001b[90m 12 |\u001b[39m     \u001b[36mconst\u001b[39m url \u001b[33m=\u001b[39m getApiUrl(endpoint\u001b[33m.\u001b[39mpath)\u001b[33m;\u001b[39m\u001b[0m\n\n      at ApiClient.request (services/apiClient.ts:9:13)\n      at Object.<anonymous> (__tests__/integration/api-calls-basic.test.tsx:204:5)\n\n  \u25cf API Calls - POST Requests \u203a serializes request body correctly\n\n    Endpoint create_thread not found\n\n    \u001b[0m \u001b[90m  7 |\u001b[39m     \u001b[36mconst\u001b[39m endpoint \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m getEndpoint(endpointName\u001b[33m,\u001b[39m method)\u001b[33m;\u001b[39m\n     \u001b[90m  8 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mendpoint) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Endpoint ${endpointName} not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 10 |\u001b[39m     }\n     \u001b[90m 11 |\u001b[39m\n     \u001b[90m 12 |\u001b[39m     \u001b[36mconst\u001b[39m url \u001b[33m=\u001b[39m getApiUrl(endpoint\u001b[33m.\u001b[39mpath)\u001b[33m;\u001b[39m\u001b[0m\n\n      at ApiClient.request (services/apiClient.ts:9:13)\n      at Object.<anonymous> (__tests__/integration/api-calls-basic.test.tsx:221:5)\n\n  \u25cf API Calls - PUT Requests \u203a updates thread with PUT request\n\n    Endpoint update_thread not found\n\n    \u001b[0m \u001b[90m  7 |\u001b[39m     \u001b[36mconst\u001b[39m endpoint \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m getEndpoint(endpointName\u001b[33m,\u001b[39m method)\u001b[33m;\u001b[39m\n     \u001b[90m  8 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mendpoint) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Endpoint ${endpointName} not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 10 |\u001b[39m     }\n     \u001b[90m 11 |\u001b[39m\n     \u001b[90m 12 |\u001b[39m     \u001b[36mconst\u001b[39m url \u001b[33m=\u001b[39m getApiUrl(endpoint\u001b[33m.\u001b[39mpath)\u001b[33m;\u001b[39m\u001b[0m\n\n      at ApiClient.request (services/apiClient.ts:9:13)\n      at Object.<anonymous> (__tests__/integration/api-calls-basic.test.tsx:246:22)\n\n  \u25cf API Calls - PUT Requests \u203a handles PUT request with complex data\n\n    Endpoint update_thread not found\n\n    \u001b[0m \u001b[90m  7 |\u001b[39m     \u001b[36mconst\u001b[39m endpoint \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m getEndpoint(endpointName\u001b[33m,\u001b[39m method)\u001b[33m;\u001b[39m\n     \u001b[90m  8 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mendpoint) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Endpoint ${endpointName} not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 10 |\u001b[39m     }\n     \u001b[90m 11 |\u001b[39m\n     \u001b[90m 12 |\u001b[39m     \u001b[36mconst\u001b[39m url \u001b[33m=\u001b[39m getApiUrl(endpoint\u001b[33m.\u001b[39mpath)\u001b[33m;\u001b[39m\u001b[0m\n\n      at ApiClient.request (services/apiClient.ts:9:13)\n      at Object.<anonymous> (__tests__/integration/api-calls-basic.test.tsx:277:5)\n\n  \u25cf API Calls - DELETE Requests \u203a deletes thread with DELETE request\n\n    Endpoint delete_thread not found\n\n    \u001b[0m \u001b[90m  7 |\u001b[39m     \u001b[36mconst\u001b[39m endpoint \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m getEndpoint(endpointName\u001b[33m,\u001b[39m method)\u001b[33m;\u001b[39m\n     \u001b[90m  8 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mendpoint) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Endpoint ${endpointName} not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 10 |\u001b[39m     }\n     \u001b[90m 11 |\u001b[39m\n     \u001b[90m 12 |\u001b[39m     \u001b[36mconst\u001b[39m url \u001b[33m=\u001b[39m getApiUrl(endpoint\u001b[33m.\u001b[39mpath)\u001b[33m;\u001b[39m\u001b[0m\n\n      at ApiClient.request (services/apiClient.ts:9:13)\n      at Object.<anonymous> (__tests__/integration/api-calls-basic.test.tsx:293:22)\n\n  \u25cf API Calls - DELETE Requests \u203a includes auth header in DELETE requests\n\n    Endpoint delete_thread not found\n\n    \u001b[0m \u001b[90m  7 |\u001b[39m     \u001b[36mconst\u001b[39m endpoint \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m getEndpoint(endpointName\u001b[33m,\u001b[39m method)\u001b[33m;\u001b[39m\n     \u001b[90m  8 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mendpoint) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Endpoint ${endpointName} not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 10 |\u001b[39m     }\n     \u001b[90m 11 |\u001b[39m\n     \u001b[90m 12 |\u001b[39m     \u001b[36mconst\u001b[39m url \u001b[33m=\u001b[39m getApiUrl(endpoint\u001b[33m.\u001b[39mpath)\u001b[33m;\u001b[39m\u001b[0m\n\n      at ApiClient.request (services/apiClient.ts:9:13)\n      at Object.<anonymous> (__tests__/integration/api-calls-basic.test.tsx:312:5)\n\nFAIL Integration Tests __tests__/integration/error-recovery.test.tsx\n  Error Handling and Recovery Tests\n    API Error Handling with Exponential Backoff\n      \u00d7 should handle API failures with automatic retry (1 ms)\n      \u00d7 should show clear error messages for different error types (1 ms)\n    Session Timeout Recovery\n      \u00d7 should handle session timeout with warning and recovery\n      \u00d7 should redirect to login after session expires\n    Rate Limiting with User Feedback\n      \u00d7 should handle rate limiting with clear feedback\n    Recovery Without Page Refresh\n      \u00d7 should recover from errors without losing application state\n    Graceful Feature Degradation\n      \u00d7 should degrade gracefully when WebSocket is unavailable (1 ms)\n    Error Boundary Integration\n      \u00d7 should catch and handle component errors gracefully (1 ms)\n\n  \u25cf Error Handling and Recovery Tests \u203a API Error Handling with Exponential Backoff \u203a should handle API failures with automatic retry\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/error-recovery.test.tsx:276:15)\n\n  \u25cf Error Handling and Recovery Tests \u203a API Error Handling with Exponential Backoff \u203a should handle API failures with automatic retry\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/error-recovery.test.tsx:287:15)\n\n  \u25cf Error Handling and Recovery Tests \u203a API Error Handling with Exponential Backoff \u203a should show clear error messages for different error types\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/error-recovery.test.tsx:276:15)\n\n  \u25cf Error Handling and Recovery Tests \u203a API Error Handling with Exponential Backoff \u203a should show clear error messages for different error types\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/error-recovery.test.tsx:287:15)\n\n  \u25cf Error Handling and Recovery Tests \u203a Session Timeout Recovery \u203a should handle session timeout with warning and recovery\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/error-recovery.test.tsx:276:15)\n\n  \u25cf Error Handling and Recovery Tests \u203a Session Timeout Recovery \u203a should handle session timeout with warning and recovery\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/error-recovery.test.tsx:287:15)\n\n  \u25cf Error Handling and Recovery Tests \u203a Session Timeout Recovery \u203a should redirect to login after session expires\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/error-recovery.test.tsx:276:15)\n\n  \u25cf Error Handling and Recovery Tests \u203a Session Timeout Recovery \u203a should redirect to login after session expires\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/error-recovery.test.tsx:287:15)\n\n  \u25cf Error Handling and Recovery Tests \u203a Rate Limiting with User Feedback \u203a should handle rate limiting with clear feedback\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/error-recovery.test.tsx:276:15)\n\n  \u25cf Error Handling and Recovery Tests \u203a Rate Limiting with User Feedback \u203a should handle rate limiting with clear feedback\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/error-recovery.test.tsx:287:15)\n\n  \u25cf Error Handling and Recovery Tests \u203a Recovery Without Page Refresh \u203a should recover from errors without losing application state\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/error-recovery.test.tsx:276:15)\n\n  \u25cf Error Handling and Recovery Tests \u203a Recovery Without Page Refresh \u203a should recover from errors without losing application state\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/error-recovery.test.tsx:287:15)\n\n  \u25cf Error Handling and Recovery Tests \u203a Graceful Feature Degradation \u203a should degrade gracefully when WebSocket is unavailable\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/error-recovery.test.tsx:276:15)\n\n  \u25cf Error Handling and Recovery Tests \u203a Graceful Feature Degradation \u203a should degrade gracefully when WebSocket is unavailable\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/error-recovery.test.tsx:287:15)\n\n  \u25cf Error Handling and Recovery Tests \u203a Error Boundary Integration \u203a should catch and handle component errors gracefully\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/error-recovery.test.tsx:276:15)\n\n  \u25cf Error Handling and Recovery Tests \u203a Error Boundary Integration \u203a should catch and handle component errors gracefully\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/error-recovery.test.tsx:287:15)\n\nFAIL Integration Tests __tests__/integration/websocket-complete-refactored.test.tsx\n  WebSocket Complete Integration Tests - Refactored Modular\n    Refactored Architecture Validation\n      \u00d7 should maintain function size limit (\u22648 lines) (1 ms)\n      \u00d7 should maintain real behavior simulation (1 ms)\n      \u00d7 should preserve comprehensive utilities (1 ms)\n    Enhanced Testing Capabilities\n      \u00d7 should handle refactored connection lifecycle (1 ms)\n      \u00d7 should handle refactored message processing (1 ms)\n      \u00d7 should handle refactored error scenarios (1 ms)\n      \u00d7 should handle refactored performance monitoring (1 ms)\n    Protocol and Security Features\n      \u00d7 should validate message security\n      \u00d7 should handle protocol negotiation\n      \u00d7 should manage connection security\n    Resource Management\n      \u00d7 should handle cleanup efficiently\n      \u00d7 should manage memory resources\n      \u00d7 should handle multiple cleanup calls safely\n\n  \u25cf WebSocket Complete Integration Tests - Refactored Modular \u203a Refactored Architecture Validation \u203a should maintain function size limit (\u22648 lines)\n\n    TypeError: websocket_test_utils_1.AdvancedWebSocketTester is not a constructor\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m     stateManager \u001b[33m=\u001b[39m wsManager\u001b[33m.\u001b[39mgetStateManager()\u001b[33m;\u001b[39m\n     \u001b[90m 51 |\u001b[39m     messageBuffer \u001b[33m=\u001b[39m wsManager\u001b[33m.\u001b[39mgetMessageBuffer()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m     advancedTester \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mAdvancedWebSocketTester\u001b[39m()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m     wsManager\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/websocket-complete-refactored.test.tsx:52:22)\n\n  \u25cf WebSocket Complete Integration Tests - Refactored Modular \u203a Refactored Architecture Validation \u203a should maintain function size limit (\u22648 lines)\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-complete-refactored.test.tsx:57:15)\n\n  \u25cf WebSocket Complete Integration Tests - Refactored Modular \u203a Refactored Architecture Validation \u203a should maintain real behavior simulation\n\n    TypeError: websocket_test_utils_1.AdvancedWebSocketTester is not a constructor\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m     stateManager \u001b[33m=\u001b[39m wsManager\u001b[33m.\u001b[39mgetStateManager()\u001b[33m;\u001b[39m\n     \u001b[90m 51 |\u001b[39m     messageBuffer \u001b[33m=\u001b[39m wsManager\u001b[33m.\u001b[39mgetMessageBuffer()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m     advancedTester \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mAdvancedWebSocketTester\u001b[39m()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m     wsManager\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/websocket-complete-refactored.test.tsx:52:22)\n\n  \u25cf WebSocket Complete Integration Tests - Refactored Modular \u203a Refactored Architecture Validation \u203a should maintain real behavior simulation\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-complete-refactored.test.tsx:57:15)\n\n  \u25cf WebSocket Complete Integration Tests - Refactored Modular \u203a Refactored Architecture Validation \u203a should preserve comprehensive utilities\n\n    TypeError: websocket_test_utils_1.AdvancedWebSocketTester is not a constructor\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m     stateManager \u001b[33m=\u001b[39m wsManager\u001b[33m.\u001b[39mgetStateManager()\u001b[33m;\u001b[39m\n     \u001b[90m 51 |\u001b[39m     messageBuffer \u001b[33m=\u001b[39m wsManager\u001b[33m.\u001b[39mgetMessageBuffer()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m     advancedTester \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mAdvancedWebSocketTester\u001b[39m()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m     wsManager\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/websocket-complete-refactored.test.tsx:52:22)\n\n  \u25cf WebSocket Complete Integration Tests - Refactored Modular \u203a Refactored Architecture Validation \u203a should preserve comprehensive utilities\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-complete-refactored.test.tsx:57:15)\n\n  \u25cf WebSocket Complete Integration Tests - Refactored Modular \u203a Enhanced Testing Capabilities \u203a should handle refactored connection lifecycle\n\n    TypeError: websocket_test_utils_1.AdvancedWebSocketTester is not a constructor\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m     stateManager \u001b[33m=\u001b[39m wsManager\u001b[33m.\u001b[39mgetStateManager()\u001b[33m;\u001b[39m\n     \u001b[90m 51 |\u001b[39m     messageBuffer \u001b[33m=\u001b[39m wsManager\u001b[33m.\u001b[39mgetMessageBuffer()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m     advancedTester \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mAdvancedWebSocketTester\u001b[39m()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m     wsManager\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/websocket-complete-refactored.test.tsx:52:22)\n\n  \u25cf WebSocket Complete Integration Tests - Refactored Modular \u203a Enhanced Testing Capabilities \u203a should handle refactored connection lifecycle\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-complete-refactored.test.tsx:57:15)\n\n  \u25cf WebSocket Complete Integration Tests - Refactored Modular \u203a Enhanced Testing Capabilities \u203a should handle refactored message processing\n\n    TypeError: websocket_test_utils_1.AdvancedWebSocketTester is not a constructor\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m     stateManager \u001b[33m=\u001b[39m wsManager\u001b[33m.\u001b[39mgetStateManager()\u001b[33m;\u001b[39m\n     \u001b[90m 51 |\u001b[39m     messageBuffer \u001b[33m=\u001b[39m wsManager\u001b[33m.\u001b[39mgetMessageBuffer()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m     advancedTester \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mAdvancedWebSocketTester\u001b[39m()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m     wsManager\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/websocket-complete-refactored.test.tsx:52:22)\n\n  \u25cf WebSocket Complete Integration Tests - Refactored Modular \u203a Enhanced Testing Capabilities \u203a should handle refactored message processing\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-complete-refactored.test.tsx:57:15)\n\n  \u25cf WebSocket Complete Integration Tests - Refactored Modular \u203a Enhanced Testing Capabilities \u203a should handle refactored error scenarios\n\n    TypeError: websocket_test_utils_1.AdvancedWebSocketTester is not a constructor\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m     stateManager \u001b[33m=\u001b[39m wsManager\u001b[33m.\u001b[39mgetStateManager()\u001b[33m;\u001b[39m\n     \u001b[90m 51 |\u001b[39m     messageBuffer \u001b[33m=\u001b[39m wsManager\u001b[33m.\u001b[39mgetMessageBuffer()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m     advancedTester \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mAdvancedWebSocketTester\u001b[39m()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m     wsManager\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/websocket-complete-refactored.test.tsx:52:22)\n\n  \u25cf WebSocket Complete Integration Tests - Refactored Modular \u203a Enhanced Testing Capabilities \u203a should handle refactored error scenarios\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-complete-refactored.test.tsx:57:15)\n\n  \u25cf WebSocket Complete Integration Tests - Refactored Modular \u203a Enhanced Testing Capabilities \u203a should handle refactored performance monitoring\n\n    TypeError: websocket_test_utils_1.AdvancedWebSocketTester is not a constructor\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m     stateManager \u001b[33m=\u001b[39m wsManager\u001b[33m.\u001b[39mgetStateManager()\u001b[33m;\u001b[39m\n     \u001b[90m 51 |\u001b[39m     messageBuffer \u001b[33m=\u001b[39m wsManager\u001b[33m.\u001b[39mgetMessageBuffer()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m     advancedTester \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mAdvancedWebSocketTester\u001b[39m()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m     wsManager\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/websocket-complete-refactored.test.tsx:52:22)\n\n  \u25cf WebSocket Complete Integration Tests - Refactored Modular \u203a Enhanced Testing Capabilities \u203a should handle refactored performance monitoring\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-complete-refactored.test.tsx:57:15)\n\n  \u25cf WebSocket Complete Integration Tests - Refactored Modular \u203a Protocol and Security Features \u203a should validate message security\n\n    TypeError: websocket_test_utils_1.AdvancedWebSocketTester is not a constructor\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m     stateManager \u001b[33m=\u001b[39m wsManager\u001b[33m.\u001b[39mgetStateManager()\u001b[33m;\u001b[39m\n     \u001b[90m 51 |\u001b[39m     messageBuffer \u001b[33m=\u001b[39m wsManager\u001b[33m.\u001b[39mgetMessageBuffer()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m     advancedTester \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mAdvancedWebSocketTester\u001b[39m()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m     wsManager\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/websocket-complete-refactored.test.tsx:52:22)\n\n  \u25cf WebSocket Complete Integration Tests - Refactored Modular \u203a Protocol and Security Features \u203a should validate message security\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-complete-refactored.test.tsx:57:15)\n\n  \u25cf WebSocket Complete Integration Tests - Refactored Modular \u203a Protocol and Security Features \u203a should handle protocol negotiation\n\n    TypeError: websocket_test_utils_1.AdvancedWebSocketTester is not a constructor\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m     stateManager \u001b[33m=\u001b[39m wsManager\u001b[33m.\u001b[39mgetStateManager()\u001b[33m;\u001b[39m\n     \u001b[90m 51 |\u001b[39m     messageBuffer \u001b[33m=\u001b[39m wsManager\u001b[33m.\u001b[39mgetMessageBuffer()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m     advancedTester \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mAdvancedWebSocketTester\u001b[39m()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m     wsManager\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/websocket-complete-refactored.test.tsx:52:22)\n\n  \u25cf WebSocket Complete Integration Tests - Refactored Modular \u203a Protocol and Security Features \u203a should handle protocol negotiation\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-complete-refactored.test.tsx:57:15)\n\n  \u25cf WebSocket Complete Integration Tests - Refactored Modular \u203a Protocol and Security Features \u203a should manage connection security\n\n    TypeError: websocket_test_utils_1.AdvancedWebSocketTester is not a constructor\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m     stateManager \u001b[33m=\u001b[39m wsManager\u001b[33m.\u001b[39mgetStateManager()\u001b[33m;\u001b[39m\n     \u001b[90m 51 |\u001b[39m     messageBuffer \u001b[33m=\u001b[39m wsManager\u001b[33m.\u001b[39mgetMessageBuffer()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m     advancedTester \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mAdvancedWebSocketTester\u001b[39m()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m     wsManager\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/websocket-complete-refactored.test.tsx:52:22)\n\n  \u25cf WebSocket Complete Integration Tests - Refactored Modular \u203a Protocol and Security Features \u203a should manage connection security\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-complete-refactored.test.tsx:57:15)\n\n  \u25cf WebSocket Complete Integration Tests - Refactored Modular \u203a Resource Management \u203a should handle cleanup efficiently\n\n    TypeError: websocket_test_utils_1.AdvancedWebSocketTester is not a constructor\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m     stateManager \u001b[33m=\u001b[39m wsManager\u001b[33m.\u001b[39mgetStateManager()\u001b[33m;\u001b[39m\n     \u001b[90m 51 |\u001b[39m     messageBuffer \u001b[33m=\u001b[39m wsManager\u001b[33m.\u001b[39mgetMessageBuffer()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m     advancedTester \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mAdvancedWebSocketTester\u001b[39m()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m     wsManager\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/websocket-complete-refactored.test.tsx:52:22)\n\n  \u25cf WebSocket Complete Integration Tests - Refactored Modular \u203a Resource Management \u203a should handle cleanup efficiently\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-complete-refactored.test.tsx:57:15)\n\n  \u25cf WebSocket Complete Integration Tests - Refactored Modular \u203a Resource Management \u203a should manage memory resources\n\n    TypeError: websocket_test_utils_1.AdvancedWebSocketTester is not a constructor\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m     stateManager \u001b[33m=\u001b[39m wsManager\u001b[33m.\u001b[39mgetStateManager()\u001b[33m;\u001b[39m\n     \u001b[90m 51 |\u001b[39m     messageBuffer \u001b[33m=\u001b[39m wsManager\u001b[33m.\u001b[39mgetMessageBuffer()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m     advancedTester \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mAdvancedWebSocketTester\u001b[39m()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m     wsManager\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/websocket-complete-refactored.test.tsx:52:22)\n\n  \u25cf WebSocket Complete Integration Tests - Refactored Modular \u203a Resource Management \u203a should manage memory resources\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-complete-refactored.test.tsx:57:15)\n\n  \u25cf WebSocket Complete Integration Tests - Refactored Modular \u203a Resource Management \u203a should handle multiple cleanup calls safely\n\n    TypeError: websocket_test_utils_1.AdvancedWebSocketTester is not a constructor\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m     stateManager \u001b[33m=\u001b[39m wsManager\u001b[33m.\u001b[39mgetStateManager()\u001b[33m;\u001b[39m\n     \u001b[90m 51 |\u001b[39m     messageBuffer \u001b[33m=\u001b[39m wsManager\u001b[33m.\u001b[39mgetMessageBuffer()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m     advancedTester \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mAdvancedWebSocketTester\u001b[39m()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m     wsManager\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/websocket-complete-refactored.test.tsx:52:22)\n\n  \u25cf WebSocket Complete Integration Tests - Refactored Modular \u203a Resource Management \u203a should handle multiple cleanup calls safely\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-complete-refactored.test.tsx:57:15)\n\nFAIL Integration Tests __tests__/integration/connection-management-core.test.tsx\n  Connection Management Core Tests\n    Connection State Management\n      \u00d7 should track connection status changes (1 ms)\n      \u00d7 should track reconnection attempts\n    Exponential Backoff\n      \u00d7 should calculate exponential delays\n      \u00d7 should add jitter to delays\n    Heartbeat Management\n      \u00d7 should track heartbeat metrics\n      \u00d7 should track missed heartbeats (1 ms)\n      \u00d7 should toggle heartbeat enabled state (1 ms)\n      \u00d7 should manage heartbeat lifecycle with React sync (1 ms)\n    Connection Quality Monitoring\n      \u00d7 should calculate quality based on latency (1 ms)\n      \u00d7 should track average latency\n      \u00d7 should limit latency history\n    Resource Cleanup\n      \u00d7 should clean up connection resources\n      \u00d7 should stop heartbeat on cleanup\n\n  \u25cf Connection Management Core Tests \u203a Connection State Management \u203a should track connection status changes\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-management-core.test.tsx:191:15)\n\n  \u25cf Connection Management Core Tests \u203a Connection State Management \u203a should track connection status changes\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-management-core.test.tsx:195:15)\n\n  \u25cf Connection Management Core Tests \u203a Connection State Management \u203a should track reconnection attempts\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-management-core.test.tsx:191:15)\n\n  \u25cf Connection Management Core Tests \u203a Connection State Management \u203a should track reconnection attempts\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-management-core.test.tsx:195:15)\n\n  \u25cf Connection Management Core Tests \u203a Exponential Backoff \u203a should calculate exponential delays\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-management-core.test.tsx:191:15)\n\n  \u25cf Connection Management Core Tests \u203a Exponential Backoff \u203a should calculate exponential delays\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-management-core.test.tsx:195:15)\n\n  \u25cf Connection Management Core Tests \u203a Exponential Backoff \u203a should add jitter to delays\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-management-core.test.tsx:191:15)\n\n  \u25cf Connection Management Core Tests \u203a Exponential Backoff \u203a should add jitter to delays\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-management-core.test.tsx:195:15)\n\n  \u25cf Connection Management Core Tests \u203a Heartbeat Management \u203a should track heartbeat metrics\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-management-core.test.tsx:191:15)\n\n  \u25cf Connection Management Core Tests \u203a Heartbeat Management \u203a should track heartbeat metrics\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-management-core.test.tsx:195:15)\n\n  \u25cf Connection Management Core Tests \u203a Heartbeat Management \u203a should track missed heartbeats\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-management-core.test.tsx:191:15)\n\n  \u25cf Connection Management Core Tests \u203a Heartbeat Management \u203a should track missed heartbeats\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-management-core.test.tsx:195:15)\n\n  \u25cf Connection Management Core Tests \u203a Heartbeat Management \u203a should toggle heartbeat enabled state\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-management-core.test.tsx:191:15)\n\n  \u25cf Connection Management Core Tests \u203a Heartbeat Management \u203a should toggle heartbeat enabled state\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-management-core.test.tsx:195:15)\n\n  \u25cf Connection Management Core Tests \u203a Heartbeat Management \u203a should manage heartbeat lifecycle with React sync\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-management-core.test.tsx:191:15)\n\n  \u25cf Connection Management Core Tests \u203a Heartbeat Management \u203a should manage heartbeat lifecycle with React sync\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-management-core.test.tsx:195:15)\n\n  \u25cf Connection Management Core Tests \u203a Connection Quality Monitoring \u203a should calculate quality based on latency\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-management-core.test.tsx:191:15)\n\n  \u25cf Connection Management Core Tests \u203a Connection Quality Monitoring \u203a should calculate quality based on latency\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-management-core.test.tsx:195:15)\n\n  \u25cf Connection Management Core Tests \u203a Connection Quality Monitoring \u203a should track average latency\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-management-core.test.tsx:191:15)\n\n  \u25cf Connection Management Core Tests \u203a Connection Quality Monitoring \u203a should track average latency\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-management-core.test.tsx:195:15)\n\n  \u25cf Connection Management Core Tests \u203a Connection Quality Monitoring \u203a should limit latency history\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-management-core.test.tsx:191:15)\n\n  \u25cf Connection Management Core Tests \u203a Connection Quality Monitoring \u203a should limit latency history\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-management-core.test.tsx:195:15)\n\n  \u25cf Connection Management Core Tests \u203a Resource Cleanup \u203a should clean up connection resources\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-management-core.test.tsx:191:15)\n\n  \u25cf Connection Management Core Tests \u203a Resource Cleanup \u203a should clean up connection resources\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-management-core.test.tsx:195:15)\n\n  \u25cf Connection Management Core Tests \u203a Resource Cleanup \u203a should stop heartbeat on cleanup\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-management-core.test.tsx:191:15)\n\n  \u25cf Connection Management Core Tests \u203a Resource Cleanup \u203a should stop heartbeat on cleanup\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-management-core.test.tsx:195:15)\n\nFAIL Integration Tests __tests__/integration/critical/websocket-cors-validation.test.tsx\n  WebSocket CORS Validation (CRITICAL SECURITY)\n    Origin Header Validation\n      \u00d7 should include proper Origin header in WebSocket connection (1 ms)\n      \u00d7 should handle CORS validation failure gracefully\n      \u00d7 should not attempt connection from invalid origins (1 ms)\n    Allowed Origins Configuration\n      \u00d7 should connect successfully from allowed development origin\n      \u00d7 should connect successfully from allowed production origin\n      \u00d7 should handle subdomain restrictions properly (1 ms)\n    Cross-Origin Request Handling\n      \u00d7 should handle mixed content scenarios (HTTP to HTTPS)\n      \u00d7 should validate referrer policies\n      \u00d7 should handle iframe embedding restrictions\n    Security Headers and Validation\n      \u00d7 should respect Content Security Policy for WebSocket connections\n      \u00d7 should handle Sec-Fetch-Site header validation (1 ms)\n      \u00d7 should validate against XSS injection in WebSocket URLs\n    CORS Error Recovery and Fallback\n      \u00d7 should provide actionable CORS error messages (1 ms)\n      \u00d7 should not retry CORS-blocked connections indefinitely\n      \u00d7 should provide fallback options for CORS issues\n\n  \u25cf WebSocket CORS Validation (CRITICAL SECURITY) \u203a Origin Header Validation \u203a should include proper Origin header in WebSocket connection\n\n    TypeError: Cannot redefine property: location\n        at Object.defineProperty (<anonymous>)\n\n    \u001b[0m \u001b[90m 79 |\u001b[39m     \n     \u001b[90m 80 |\u001b[39m     \u001b[90m// Mock different origin scenarios\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 81 |\u001b[39m     \u001b[33mObject\u001b[39m\u001b[33m.\u001b[39mdefineProperty(window\u001b[33m,\u001b[39m \u001b[32m'location'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 82 |\u001b[39m       value\u001b[33m:\u001b[39m {\n     \u001b[90m 83 |\u001b[39m         origin\u001b[33m:\u001b[39m \u001b[32m'http://localhost:3000'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 84 |\u001b[39m         href\u001b[33m:\u001b[39m \u001b[32m'http://localhost:3000'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/critical/websocket-cors-validation.test.tsx:81:12)\n\n  \u25cf WebSocket CORS Validation (CRITICAL SECURITY) \u203a Origin Header Validation \u203a should handle CORS validation failure gracefully\n\n    TypeError: Cannot redefine property: location\n        at Object.defineProperty (<anonymous>)\n\n    \u001b[0m \u001b[90m 79 |\u001b[39m     \n     \u001b[90m 80 |\u001b[39m     \u001b[90m// Mock different origin scenarios\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 81 |\u001b[39m     \u001b[33mObject\u001b[39m\u001b[33m.\u001b[39mdefineProperty(window\u001b[33m,\u001b[39m \u001b[32m'location'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 82 |\u001b[39m       value\u001b[33m:\u001b[39m {\n     \u001b[90m 83 |\u001b[39m         origin\u001b[33m:\u001b[39m \u001b[32m'http://localhost:3000'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 84 |\u001b[39m         href\u001b[33m:\u001b[39m \u001b[32m'http://localhost:3000'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/critical/websocket-cors-validation.test.tsx:81:12)\n\n  \u25cf WebSocket CORS Validation (CRITICAL SECURITY) \u203a Origin Header Validation \u203a should not attempt connection from invalid origins\n\n    TypeError: Cannot redefine property: location\n        at Object.defineProperty (<anonymous>)\n\n    \u001b[0m \u001b[90m 79 |\u001b[39m     \n     \u001b[90m 80 |\u001b[39m     \u001b[90m// Mock different origin scenarios\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 81 |\u001b[39m     \u001b[33mObject\u001b[39m\u001b[33m.\u001b[39mdefineProperty(window\u001b[33m,\u001b[39m \u001b[32m'location'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 82 |\u001b[39m       value\u001b[33m:\u001b[39m {\n     \u001b[90m 83 |\u001b[39m         origin\u001b[33m:\u001b[39m \u001b[32m'http://localhost:3000'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 84 |\u001b[39m         href\u001b[33m:\u001b[39m \u001b[32m'http://localhost:3000'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/critical/websocket-cors-validation.test.tsx:81:12)\n\n  \u25cf WebSocket CORS Validation (CRITICAL SECURITY) \u203a Allowed Origins Configuration \u203a should connect successfully from allowed development origin\n\n    TypeError: Cannot redefine property: location\n        at Object.defineProperty (<anonymous>)\n\n    \u001b[0m \u001b[90m 79 |\u001b[39m     \n     \u001b[90m 80 |\u001b[39m     \u001b[90m// Mock different origin scenarios\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 81 |\u001b[39m     \u001b[33mObject\u001b[39m\u001b[33m.\u001b[39mdefineProperty(window\u001b[33m,\u001b[39m \u001b[32m'location'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 82 |\u001b[39m       value\u001b[33m:\u001b[39m {\n     \u001b[90m 83 |\u001b[39m         origin\u001b[33m:\u001b[39m \u001b[32m'http://localhost:3000'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 84 |\u001b[39m         href\u001b[33m:\u001b[39m \u001b[32m'http://localhost:3000'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/critical/websocket-cors-validation.test.tsx:81:12)\n\n  \u25cf WebSocket CORS Validation (CRITICAL SECURITY) \u203a Allowed Origins Configuration \u203a should connect successfully from allowed production origin\n\n    TypeError: Cannot redefine property: location\n        at Object.defineProperty (<anonymous>)\n\n    \u001b[0m \u001b[90m 79 |\u001b[39m     \n     \u001b[90m 80 |\u001b[39m     \u001b[90m// Mock different origin scenarios\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 81 |\u001b[39m     \u001b[33mObject\u001b[39m\u001b[33m.\u001b[39mdefineProperty(window\u001b[33m,\u001b[39m \u001b[32m'location'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 82 |\u001b[39m       value\u001b[33m:\u001b[39m {\n     \u001b[90m 83 |\u001b[39m         origin\u001b[33m:\u001b[39m \u001b[32m'http://localhost:3000'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 84 |\u001b[39m         href\u001b[33m:\u001b[39m \u001b[32m'http://localhost:3000'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/critical/websocket-cors-validation.test.tsx:81:12)\n\n  \u25cf WebSocket CORS Validation (CRITICAL SECURITY) \u203a Allowed Origins Configuration \u203a should handle subdomain restrictions properly\n\n    TypeError: Cannot redefine property: location\n        at Object.defineProperty (<anonymous>)\n\n    \u001b[0m \u001b[90m 79 |\u001b[39m     \n     \u001b[90m 80 |\u001b[39m     \u001b[90m// Mock different origin scenarios\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 81 |\u001b[39m     \u001b[33mObject\u001b[39m\u001b[33m.\u001b[39mdefineProperty(window\u001b[33m,\u001b[39m \u001b[32m'location'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 82 |\u001b[39m       value\u001b[33m:\u001b[39m {\n     \u001b[90m 83 |\u001b[39m         origin\u001b[33m:\u001b[39m \u001b[32m'http://localhost:3000'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 84 |\u001b[39m         href\u001b[33m:\u001b[39m \u001b[32m'http://localhost:3000'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/critical/websocket-cors-validation.test.tsx:81:12)\n\n  \u25cf WebSocket CORS Validation (CRITICAL SECURITY) \u203a Cross-Origin Request Handling \u203a should handle mixed content scenarios (HTTP to HTTPS)\n\n    TypeError: Cannot redefine property: location\n        at Object.defineProperty (<anonymous>)\n\n    \u001b[0m \u001b[90m 79 |\u001b[39m     \n     \u001b[90m 80 |\u001b[39m     \u001b[90m// Mock different origin scenarios\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 81 |\u001b[39m     \u001b[33mObject\u001b[39m\u001b[33m.\u001b[39mdefineProperty(window\u001b[33m,\u001b[39m \u001b[32m'location'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 82 |\u001b[39m       value\u001b[33m:\u001b[39m {\n     \u001b[90m 83 |\u001b[39m         origin\u001b[33m:\u001b[39m \u001b[32m'http://localhost:3000'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 84 |\u001b[39m         href\u001b[33m:\u001b[39m \u001b[32m'http://localhost:3000'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/critical/websocket-cors-validation.test.tsx:81:12)\n\n  \u25cf WebSocket CORS Validation (CRITICAL SECURITY) \u203a Cross-Origin Request Handling \u203a should validate referrer policies\n\n    TypeError: Cannot redefine property: location\n        at Object.defineProperty (<anonymous>)\n\n    \u001b[0m \u001b[90m 79 |\u001b[39m     \n     \u001b[90m 80 |\u001b[39m     \u001b[90m// Mock different origin scenarios\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 81 |\u001b[39m     \u001b[33mObject\u001b[39m\u001b[33m.\u001b[39mdefineProperty(window\u001b[33m,\u001b[39m \u001b[32m'location'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 82 |\u001b[39m       value\u001b[33m:\u001b[39m {\n     \u001b[90m 83 |\u001b[39m         origin\u001b[33m:\u001b[39m \u001b[32m'http://localhost:3000'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 84 |\u001b[39m         href\u001b[33m:\u001b[39m \u001b[32m'http://localhost:3000'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/critical/websocket-cors-validation.test.tsx:81:12)\n\n  \u25cf WebSocket CORS Validation (CRITICAL SECURITY) \u203a Cross-Origin Request Handling \u203a should handle iframe embedding restrictions\n\n    TypeError: Cannot redefine property: location\n        at Object.defineProperty (<anonymous>)\n\n    \u001b[0m \u001b[90m 79 |\u001b[39m     \n     \u001b[90m 80 |\u001b[39m     \u001b[90m// Mock different origin scenarios\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 81 |\u001b[39m     \u001b[33mObject\u001b[39m\u001b[33m.\u001b[39mdefineProperty(window\u001b[33m,\u001b[39m \u001b[32m'location'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 82 |\u001b[39m       value\u001b[33m:\u001b[39m {\n     \u001b[90m 83 |\u001b[39m         origin\u001b[33m:\u001b[39m \u001b[32m'http://localhost:3000'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 84 |\u001b[39m         href\u001b[33m:\u001b[39m \u001b[32m'http://localhost:3000'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/critical/websocket-cors-validation.test.tsx:81:12)\n\n  \u25cf WebSocket CORS Validation (CRITICAL SECURITY) \u203a Security Headers and Validation \u203a should respect Content Security Policy for WebSocket connections\n\n    TypeError: Cannot redefine property: location\n        at Object.defineProperty (<anonymous>)\n\n    \u001b[0m \u001b[90m 79 |\u001b[39m     \n     \u001b[90m 80 |\u001b[39m     \u001b[90m// Mock different origin scenarios\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 81 |\u001b[39m     \u001b[33mObject\u001b[39m\u001b[33m.\u001b[39mdefineProperty(window\u001b[33m,\u001b[39m \u001b[32m'location'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 82 |\u001b[39m       value\u001b[33m:\u001b[39m {\n     \u001b[90m 83 |\u001b[39m         origin\u001b[33m:\u001b[39m \u001b[32m'http://localhost:3000'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 84 |\u001b[39m         href\u001b[33m:\u001b[39m \u001b[32m'http://localhost:3000'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/critical/websocket-cors-validation.test.tsx:81:12)\n\n  \u25cf WebSocket CORS Validation (CRITICAL SECURITY) \u203a Security Headers and Validation \u203a should handle Sec-Fetch-Site header validation\n\n    TypeError: Cannot redefine property: location\n        at Object.defineProperty (<anonymous>)\n\n    \u001b[0m \u001b[90m 79 |\u001b[39m     \n     \u001b[90m 80 |\u001b[39m     \u001b[90m// Mock different origin scenarios\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 81 |\u001b[39m     \u001b[33mObject\u001b[39m\u001b[33m.\u001b[39mdefineProperty(window\u001b[33m,\u001b[39m \u001b[32m'location'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 82 |\u001b[39m       value\u001b[33m:\u001b[39m {\n     \u001b[90m 83 |\u001b[39m         origin\u001b[33m:\u001b[39m \u001b[32m'http://localhost:3000'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 84 |\u001b[39m         href\u001b[33m:\u001b[39m \u001b[32m'http://localhost:3000'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/critical/websocket-cors-validation.test.tsx:81:12)\n\n  \u25cf WebSocket CORS Validation (CRITICAL SECURITY) \u203a Security Headers and Validation \u203a should validate against XSS injection in WebSocket URLs\n\n    TypeError: Cannot redefine property: location\n        at Object.defineProperty (<anonymous>)\n\n    \u001b[0m \u001b[90m 79 |\u001b[39m     \n     \u001b[90m 80 |\u001b[39m     \u001b[90m// Mock different origin scenarios\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 81 |\u001b[39m     \u001b[33mObject\u001b[39m\u001b[33m.\u001b[39mdefineProperty(window\u001b[33m,\u001b[39m \u001b[32m'location'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 82 |\u001b[39m       value\u001b[33m:\u001b[39m {\n     \u001b[90m 83 |\u001b[39m         origin\u001b[33m:\u001b[39m \u001b[32m'http://localhost:3000'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 84 |\u001b[39m         href\u001b[33m:\u001b[39m \u001b[32m'http://localhost:3000'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/critical/websocket-cors-validation.test.tsx:81:12)\n\n  \u25cf WebSocket CORS Validation (CRITICAL SECURITY) \u203a CORS Error Recovery and Fallback \u203a should provide actionable CORS error messages\n\n    TypeError: Cannot redefine property: location\n        at Object.defineProperty (<anonymous>)\n\n    \u001b[0m \u001b[90m 79 |\u001b[39m     \n     \u001b[90m 80 |\u001b[39m     \u001b[90m// Mock different origin scenarios\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 81 |\u001b[39m     \u001b[33mObject\u001b[39m\u001b[33m.\u001b[39mdefineProperty(window\u001b[33m,\u001b[39m \u001b[32m'location'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 82 |\u001b[39m       value\u001b[33m:\u001b[39m {\n     \u001b[90m 83 |\u001b[39m         origin\u001b[33m:\u001b[39m \u001b[32m'http://localhost:3000'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 84 |\u001b[39m         href\u001b[33m:\u001b[39m \u001b[32m'http://localhost:3000'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/critical/websocket-cors-validation.test.tsx:81:12)\n\n  \u25cf WebSocket CORS Validation (CRITICAL SECURITY) \u203a CORS Error Recovery and Fallback \u203a should not retry CORS-blocked connections indefinitely\n\n    TypeError: Cannot redefine property: location\n        at Object.defineProperty (<anonymous>)\n\n    \u001b[0m \u001b[90m 79 |\u001b[39m     \n     \u001b[90m 80 |\u001b[39m     \u001b[90m// Mock different origin scenarios\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 81 |\u001b[39m     \u001b[33mObject\u001b[39m\u001b[33m.\u001b[39mdefineProperty(window\u001b[33m,\u001b[39m \u001b[32m'location'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 82 |\u001b[39m       value\u001b[33m:\u001b[39m {\n     \u001b[90m 83 |\u001b[39m         origin\u001b[33m:\u001b[39m \u001b[32m'http://localhost:3000'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 84 |\u001b[39m         href\u001b[33m:\u001b[39m \u001b[32m'http://localhost:3000'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/critical/websocket-cors-validation.test.tsx:81:12)\n\n  \u25cf WebSocket CORS Validation (CRITICAL SECURITY) \u203a CORS Error Recovery and Fallback \u203a should provide fallback options for CORS issues\n\n    TypeError: Cannot redefine property: location\n        at Object.defineProperty (<anonymous>)\n\n    \u001b[0m \u001b[90m 79 |\u001b[39m     \n     \u001b[90m 80 |\u001b[39m     \u001b[90m// Mock different origin scenarios\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 81 |\u001b[39m     \u001b[33mObject\u001b[39m\u001b[33m.\u001b[39mdefineProperty(window\u001b[33m,\u001b[39m \u001b[32m'location'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 82 |\u001b[39m       value\u001b[33m:\u001b[39m {\n     \u001b[90m 83 |\u001b[39m         origin\u001b[33m:\u001b[39m \u001b[32m'http://localhost:3000'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 84 |\u001b[39m         href\u001b[33m:\u001b[39m \u001b[32m'http://localhost:3000'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/critical/websocket-cors-validation.test.tsx:81:12)\n\nFAIL Integration Tests __tests__/integration/advanced-features.test.tsx\n  Demo Mode Functionality\n    \u00d7 should enable demo mode with limited features (1 ms)\n    \u00d7 should simulate data in demo mode\n  Enterprise Demo Features\n    \u00d7 should showcase enterprise optimization features\n    \u00d7 should display ROI calculations (1 ms)\n  PDF and Image Processing\n    \u00d7 should extract text from PDF files (1 ms)\n    \u00d7 should analyze images using vision models\n  Export and Import Functionality\n    \u00d7 should export data in multiple formats\n    \u00d7 should import and validate data\n  Real-time Metrics Dashboard\n    \u00d7 should display live performance metrics\n  Agent Tool Dispatcher Integration\n    \u00d7 should dispatch tools to appropriate agents\n\n  \u25cf Demo Mode Functionality \u203a should enable demo mode with limited features\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:25:13)\n\n  \u25cf Demo Mode Functionality \u203a should enable demo mode with limited features\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Demo Mode Functionality \u203a should simulate data in demo mode\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:25:13)\n\n  \u25cf Demo Mode Functionality \u203a should simulate data in demo mode\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Enterprise Demo Features \u203a should showcase enterprise optimization features\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:25:13)\n\n  \u25cf Enterprise Demo Features \u203a should showcase enterprise optimization features\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Enterprise Demo Features \u203a should display ROI calculations\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:25:13)\n\n  \u25cf Enterprise Demo Features \u203a should display ROI calculations\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf PDF and Image Processing \u203a should extract text from PDF files\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:25:13)\n\n  \u25cf PDF and Image Processing \u203a should extract text from PDF files\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf PDF and Image Processing \u203a should analyze images using vision models\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:25:13)\n\n  \u25cf PDF and Image Processing \u203a should analyze images using vision models\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Export and Import Functionality \u203a should export data in multiple formats\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:25:13)\n\n  \u25cf Export and Import Functionality \u203a should export data in multiple formats\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Export and Import Functionality \u203a should import and validate data\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:25:13)\n\n  \u25cf Export and Import Functionality \u203a should import and validate data\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Real-time Metrics Dashboard \u203a should display live performance metrics\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:25:13)\n\n  \u25cf Real-time Metrics Dashboard \u203a should display live performance metrics\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Agent Tool Dispatcher Integration \u203a should dispatch tools to appropriate agents\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:25:13)\n\n  \u25cf Agent Tool Dispatcher Integration \u203a should dispatch tools to appropriate agents\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\nFAIL Integration Tests __tests__/integration/critical/websocket-token-refresh-working.test.tsx\n  WebSocket Token Refresh Implementation (Working)\n    JWT Token Parsing\n      \u00d7 should correctly parse JWT token expiry (13 ms)\n      \u00d7 should detect expiring tokens and setup refresh timer (9 ms)\n    Token Refresh Flow\n      \u00d7 should queue messages during token refresh (5 ms)\n      \u00d7 should handle token refresh on authentication failure (6 ms)\n    Token Synchronization\n      \u00d7 should update WebSocket when auth context token changes (8 ms)\n    Message Handling During Refresh\n      \u00d7 should process pending messages after successful refresh (6 ms)\n\n  \u25cf WebSocket Token Refresh Implementation (Working) \u203a JWT Token Parsing \u203a should correctly parse JWT token expiry\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"refresh-triggered\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mno\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"send-message\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mSend Message\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"trigger-manual-refresh\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mManual Refresh\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 158 |\u001b[39m       \n     \u001b[90m 159 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 160 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 161 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 162 |\u001b[39m\n     \u001b[90m 163 |\u001b[39m       \u001b[90m// Verify WebSocket connection was attempted with the token\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-token-refresh-working.test.tsx:160:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at node_modules/@testing-library/dom/dist/wait-for.js:82:9\n\n  \u25cf WebSocket Token Refresh Implementation (Working) \u203a JWT Token Parsing \u203a should detect expiring tokens and setup refresh timer\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"refresh-triggered\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mno\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"send-message\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mSend Message\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"trigger-manual-refresh\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mManual Refresh\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 184 |\u001b[39m       \n     \u001b[90m 185 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 186 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 187 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 188 |\u001b[39m\n     \u001b[90m 189 |\u001b[39m       \u001b[90m// Simulate connection opening\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-token-refresh-working.test.tsx:186:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at node_modules/@testing-library/dom/dist/wait-for.js:82:9\n\n  \u25cf WebSocket Token Refresh Implementation (Working) \u203a Token Refresh Flow \u203a should queue messages during token refresh\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"refresh-triggered\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mno\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"send-message\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mSend Message\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"trigger-manual-refresh\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mManual Refresh\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 227 |\u001b[39m       \n     \u001b[90m 228 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 229 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 230 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 231 |\u001b[39m\n     \u001b[90m 232 |\u001b[39m       \u001b[90m// Simulate connection opening\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-token-refresh-working.test.tsx:229:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at node_modules/@testing-library/dom/dist/wait-for.js:82:9\n\n  \u25cf WebSocket Token Refresh Implementation (Working) \u203a Token Refresh Flow \u203a should handle token refresh on authentication failure\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"refresh-triggered\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mno\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"send-message\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mSend Message\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"trigger-manual-refresh\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mManual Refresh\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 270 |\u001b[39m       \n     \u001b[90m 271 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 272 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 273 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 274 |\u001b[39m\n     \u001b[90m 275 |\u001b[39m       \u001b[90m// Simulate connection opening first\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-token-refresh-working.test.tsx:272:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at node_modules/@testing-library/dom/dist/wait-for.js:82:9\n\n  \u25cf WebSocket Token Refresh Implementation (Working) \u203a Token Synchronization \u203a should update WebSocket when auth context token changes\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"refresh-triggered\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mno\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"send-message\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mSend Message\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"trigger-manual-refresh\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mManual Refresh\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 320 |\u001b[39m       \n     \u001b[90m 321 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 322 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 323 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 324 |\u001b[39m\n     \u001b[90m 325 |\u001b[39m       \u001b[90m// Update the token in auth context\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-token-refresh-working.test.tsx:322:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at node_modules/@testing-library/dom/dist/wait-for.js:82:9\n\n  \u25cf WebSocket Token Refresh Implementation (Working) \u203a Message Handling During Refresh \u203a should process pending messages after successful refresh\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"refresh-triggered\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mno\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"send-message\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mSend Message\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"trigger-manual-refresh\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mManual Refresh\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 361 |\u001b[39m       \n     \u001b[90m 362 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 363 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 364 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 365 |\u001b[39m\n     \u001b[90m 366 |\u001b[39m       \u001b[90m// Simulate connection opening\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-token-refresh-working.test.tsx:363:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at node_modules/@testing-library/dom/dist/wait-for.js:82:9\n\nFAIL Integration Tests __tests__/integration/websocket-performance.test.tsx\n  WebSocket Performance and Advanced Tests\n    Performance Monitoring\n      \u00d7 should measure real connection performance with timing (1 ms)\n      \u00d7 should track connection stability over time (1 ms)\n      \u00d7 should measure message throughput performance\n    Connection Pooling\n      \u00d7 should handle real concurrent connections with load testing (1 ms)\n      \u00d7 should test real connection pool management\n      \u00d7 should handle pool failover scenarios\n    Broadcasting\n      \u00d7 should test real multi-connection broadcasting\n      \u00d7 should handle selective broadcasting (1 ms)\n    Benchmarking\n      \u00d7 should benchmark real vs mock WebSocket test performance (1 ms)\n      \u00d7 should benchmark connection establishment times (1 ms)\n      \u00d7 should benchmark message processing latency (1 ms)\n\n  \u25cf WebSocket Performance and Advanced Tests \u203a Performance Monitoring \u203a should measure real connection performance with timing\n\n    TypeError: websocket_test_utils_2.AdvancedWebSocketTester is not a constructor\n\n    \u001b[0m \u001b[90m 23 |\u001b[39m     \u001b[90m// Use real WebSocket simulation instead of mocks\u001b[39m\n     \u001b[90m 24 |\u001b[39m     wsManager \u001b[33m=\u001b[39m createWebSocketManager(undefined\u001b[33m,\u001b[39m \u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 25 |\u001b[39m     advancedTester \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mAdvancedWebSocketTester\u001b[39m()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 26 |\u001b[39m     wsManager\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 28 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/websocket-performance.test.tsx:25:22)\n\n  \u25cf WebSocket Performance and Advanced Tests \u203a Performance Monitoring \u203a should measure real connection performance with timing\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-performance.test.tsx:30:15)\n\n  \u25cf WebSocket Performance and Advanced Tests \u203a Performance Monitoring \u203a should track connection stability over time\n\n    TypeError: websocket_test_utils_2.AdvancedWebSocketTester is not a constructor\n\n    \u001b[0m \u001b[90m 23 |\u001b[39m     \u001b[90m// Use real WebSocket simulation instead of mocks\u001b[39m\n     \u001b[90m 24 |\u001b[39m     wsManager \u001b[33m=\u001b[39m createWebSocketManager(undefined\u001b[33m,\u001b[39m \u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 25 |\u001b[39m     advancedTester \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mAdvancedWebSocketTester\u001b[39m()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 26 |\u001b[39m     wsManager\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 28 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/websocket-performance.test.tsx:25:22)\n\n  \u25cf WebSocket Performance and Advanced Tests \u203a Performance Monitoring \u203a should track connection stability over time\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-performance.test.tsx:30:15)\n\n  \u25cf WebSocket Performance and Advanced Tests \u203a Performance Monitoring \u203a should measure message throughput performance\n\n    TypeError: websocket_test_utils_2.AdvancedWebSocketTester is not a constructor\n\n    \u001b[0m \u001b[90m 23 |\u001b[39m     \u001b[90m// Use real WebSocket simulation instead of mocks\u001b[39m\n     \u001b[90m 24 |\u001b[39m     wsManager \u001b[33m=\u001b[39m createWebSocketManager(undefined\u001b[33m,\u001b[39m \u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 25 |\u001b[39m     advancedTester \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mAdvancedWebSocketTester\u001b[39m()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 26 |\u001b[39m     wsManager\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 28 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/websocket-performance.test.tsx:25:22)\n\n  \u25cf WebSocket Performance and Advanced Tests \u203a Performance Monitoring \u203a should measure message throughput performance\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-performance.test.tsx:30:15)\n\n  \u25cf WebSocket Performance and Advanced Tests \u203a Connection Pooling \u203a should handle real concurrent connections with load testing\n\n    TypeError: websocket_test_utils_2.AdvancedWebSocketTester is not a constructor\n\n    \u001b[0m \u001b[90m 23 |\u001b[39m     \u001b[90m// Use real WebSocket simulation instead of mocks\u001b[39m\n     \u001b[90m 24 |\u001b[39m     wsManager \u001b[33m=\u001b[39m createWebSocketManager(undefined\u001b[33m,\u001b[39m \u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 25 |\u001b[39m     advancedTester \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mAdvancedWebSocketTester\u001b[39m()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 26 |\u001b[39m     wsManager\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 28 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/websocket-performance.test.tsx:25:22)\n\n  \u25cf WebSocket Performance and Advanced Tests \u203a Connection Pooling \u203a should handle real concurrent connections with load testing\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-performance.test.tsx:30:15)\n\n  \u25cf WebSocket Performance and Advanced Tests \u203a Connection Pooling \u203a should test real connection pool management\n\n    TypeError: websocket_test_utils_2.AdvancedWebSocketTester is not a constructor\n\n    \u001b[0m \u001b[90m 23 |\u001b[39m     \u001b[90m// Use real WebSocket simulation instead of mocks\u001b[39m\n     \u001b[90m 24 |\u001b[39m     wsManager \u001b[33m=\u001b[39m createWebSocketManager(undefined\u001b[33m,\u001b[39m \u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 25 |\u001b[39m     advancedTester \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mAdvancedWebSocketTester\u001b[39m()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 26 |\u001b[39m     wsManager\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 28 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/websocket-performance.test.tsx:25:22)\n\n  \u25cf WebSocket Performance and Advanced Tests \u203a Connection Pooling \u203a should test real connection pool management\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-performance.test.tsx:30:15)\n\n  \u25cf WebSocket Performance and Advanced Tests \u203a Connection Pooling \u203a should handle pool failover scenarios\n\n    TypeError: websocket_test_utils_2.AdvancedWebSocketTester is not a constructor\n\n    \u001b[0m \u001b[90m 23 |\u001b[39m     \u001b[90m// Use real WebSocket simulation instead of mocks\u001b[39m\n     \u001b[90m 24 |\u001b[39m     wsManager \u001b[33m=\u001b[39m createWebSocketManager(undefined\u001b[33m,\u001b[39m \u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 25 |\u001b[39m     advancedTester \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mAdvancedWebSocketTester\u001b[39m()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 26 |\u001b[39m     wsManager\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 28 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/websocket-performance.test.tsx:25:22)\n\n  \u25cf WebSocket Performance and Advanced Tests \u203a Connection Pooling \u203a should handle pool failover scenarios\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-performance.test.tsx:30:15)\n\n  \u25cf WebSocket Performance and Advanced Tests \u203a Broadcasting \u203a should test real multi-connection broadcasting\n\n    TypeError: websocket_test_utils_2.AdvancedWebSocketTester is not a constructor\n\n    \u001b[0m \u001b[90m 23 |\u001b[39m     \u001b[90m// Use real WebSocket simulation instead of mocks\u001b[39m\n     \u001b[90m 24 |\u001b[39m     wsManager \u001b[33m=\u001b[39m createWebSocketManager(undefined\u001b[33m,\u001b[39m \u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 25 |\u001b[39m     advancedTester \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mAdvancedWebSocketTester\u001b[39m()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 26 |\u001b[39m     wsManager\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 28 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/websocket-performance.test.tsx:25:22)\n\n  \u25cf WebSocket Performance and Advanced Tests \u203a Broadcasting \u203a should test real multi-connection broadcasting\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-performance.test.tsx:30:15)\n\n  \u25cf WebSocket Performance and Advanced Tests \u203a Broadcasting \u203a should handle selective broadcasting\n\n    TypeError: websocket_test_utils_2.AdvancedWebSocketTester is not a constructor\n\n    \u001b[0m \u001b[90m 23 |\u001b[39m     \u001b[90m// Use real WebSocket simulation instead of mocks\u001b[39m\n     \u001b[90m 24 |\u001b[39m     wsManager \u001b[33m=\u001b[39m createWebSocketManager(undefined\u001b[33m,\u001b[39m \u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 25 |\u001b[39m     advancedTester \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mAdvancedWebSocketTester\u001b[39m()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 26 |\u001b[39m     wsManager\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 28 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/websocket-performance.test.tsx:25:22)\n\n  \u25cf WebSocket Performance and Advanced Tests \u203a Broadcasting \u203a should handle selective broadcasting\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-performance.test.tsx:30:15)\n\n  \u25cf WebSocket Performance and Advanced Tests \u203a Benchmarking \u203a should benchmark real vs mock WebSocket test performance\n\n    TypeError: websocket_test_utils_2.AdvancedWebSocketTester is not a constructor\n\n    \u001b[0m \u001b[90m 23 |\u001b[39m     \u001b[90m// Use real WebSocket simulation instead of mocks\u001b[39m\n     \u001b[90m 24 |\u001b[39m     wsManager \u001b[33m=\u001b[39m createWebSocketManager(undefined\u001b[33m,\u001b[39m \u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 25 |\u001b[39m     advancedTester \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mAdvancedWebSocketTester\u001b[39m()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 26 |\u001b[39m     wsManager\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 28 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/websocket-performance.test.tsx:25:22)\n\n  \u25cf WebSocket Performance and Advanced Tests \u203a Benchmarking \u203a should benchmark real vs mock WebSocket test performance\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-performance.test.tsx:30:15)\n\n  \u25cf WebSocket Performance and Advanced Tests \u203a Benchmarking \u203a should benchmark connection establishment times\n\n    TypeError: websocket_test_utils_2.AdvancedWebSocketTester is not a constructor\n\n    \u001b[0m \u001b[90m 23 |\u001b[39m     \u001b[90m// Use real WebSocket simulation instead of mocks\u001b[39m\n     \u001b[90m 24 |\u001b[39m     wsManager \u001b[33m=\u001b[39m createWebSocketManager(undefined\u001b[33m,\u001b[39m \u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 25 |\u001b[39m     advancedTester \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mAdvancedWebSocketTester\u001b[39m()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 26 |\u001b[39m     wsManager\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 28 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/websocket-performance.test.tsx:25:22)\n\n  \u25cf WebSocket Performance and Advanced Tests \u203a Benchmarking \u203a should benchmark connection establishment times\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-performance.test.tsx:30:15)\n\n  \u25cf WebSocket Performance and Advanced Tests \u203a Benchmarking \u203a should benchmark message processing latency\n\n    TypeError: websocket_test_utils_2.AdvancedWebSocketTester is not a constructor\n\n    \u001b[0m \u001b[90m 23 |\u001b[39m     \u001b[90m// Use real WebSocket simulation instead of mocks\u001b[39m\n     \u001b[90m 24 |\u001b[39m     wsManager \u001b[33m=\u001b[39m createWebSocketManager(undefined\u001b[33m,\u001b[39m \u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 25 |\u001b[39m     advancedTester \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mAdvancedWebSocketTester\u001b[39m()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 26 |\u001b[39m     wsManager\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 28 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/websocket-performance.test.tsx:25:22)\n\n  \u25cf WebSocket Performance and Advanced Tests \u203a Benchmarking \u203a should benchmark message processing latency\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-performance.test.tsx:30:15)\n\nFAIL Integration Tests __tests__/integration/api-calls-advanced.test.tsx\n  API Calls - Request Interceptors\n    \u00d7 handles API spec fetching for endpoint resolution (5 ms)\n    \u00d7 caches OpenAPI spec for subsequent requests (2 ms)\n    \u221a handles endpoint resolution failure gracefully (2 ms)\n    \u221a handles malformed OpenAPI specs (2 ms)\n    \u00d7 retries spec fetching on failure (1 ms)\n  API Calls - API Versioning\n    \u221a supports versioned API endpoints (2 ms)\n    \u00d7 handles version-specific endpoints in OpenAPI spec (1 ms)\n    \u00d7 handles version migration scenarios (1 ms)\n    \u221a validates version compatibility (2 ms)\n  API Calls - Response Interceptors\n    \u00d7 parses JSON responses correctly\n    \u00d7 handles empty response bodies (1 ms)\n    \u00d7 preserves response metadata (1 ms)\n    \u00d7 handles large response payloads efficiently (1 ms)\n    \u221a validates response content types (1 ms)\n  API Calls - Performance\n    \u00d7 handles concurrent requests efficiently\n    \u00d7 implements connection pooling\n    \u00d7 optimizes payload serialization (2 ms)\n\n  \u25cf API Calls - Request Interceptors \u203a handles API spec fetching for endpoint resolution\n\n    Endpoint get_threads_v1 not found\n\n    \u001b[0m \u001b[90m  7 |\u001b[39m     \u001b[36mconst\u001b[39m endpoint \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m getEndpoint(endpointName\u001b[33m,\u001b[39m method)\u001b[33m;\u001b[39m\n     \u001b[90m  8 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mendpoint) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Endpoint ${endpointName} not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 10 |\u001b[39m     }\n     \u001b[90m 11 |\u001b[39m\n     \u001b[90m 12 |\u001b[39m     \u001b[36mconst\u001b[39m url \u001b[33m=\u001b[39m getApiUrl(endpoint\u001b[33m.\u001b[39mpath)\u001b[33m;\u001b[39m\u001b[0m\n\n      at ApiClient.request (services/apiClient.ts:9:13)\n      at Object.<anonymous> (__tests__/integration/api-calls-advanced.test.tsx:131:20)\n\n  \u25cf API Calls - Request Interceptors \u203a caches OpenAPI spec for subsequent requests\n\n    Endpoint cached_endpoint not found\n\n    \u001b[0m \u001b[90m  7 |\u001b[39m     \u001b[36mconst\u001b[39m endpoint \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m getEndpoint(endpointName\u001b[33m,\u001b[39m method)\u001b[33m;\u001b[39m\n     \u001b[90m  8 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mendpoint) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Endpoint ${endpointName} not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 10 |\u001b[39m     }\n     \u001b[90m 11 |\u001b[39m\n     \u001b[90m 12 |\u001b[39m     \u001b[36mconst\u001b[39m url \u001b[33m=\u001b[39m getApiUrl(endpoint\u001b[33m.\u001b[39mpath)\u001b[33m;\u001b[39m\u001b[0m\n\n      at ApiClient.request (services/apiClient.ts:9:13)\n      at Object.<anonymous> (__tests__/integration/api-calls-advanced.test.tsx:158:5)\n\n  \u25cf API Calls - Request Interceptors \u203a retries spec fetching on failure\n\n    expect(received).resolves.toBeDefined()\n\n    Received promise rejected instead of resolved\n    Rejected to value: [Error: Endpoint retry_test not found]\n\n    \u001b[0m \u001b[90m 209 |\u001b[39m\n     \u001b[90m 210 |\u001b[39m     \u001b[90m// Should eventually succeed after retry\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 211 |\u001b[39m     \u001b[36mawait\u001b[39m expect(\n     \u001b[90m     |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 212 |\u001b[39m       apiClient\u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m'retry_test'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'test-token'\u001b[39m)\n     \u001b[90m 213 |\u001b[39m     )\u001b[33m.\u001b[39mresolves\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\n     \u001b[90m 214 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n\n      at expect (node_modules/expect/build/index.js:2116:15)\n      at Object.<anonymous> (__tests__/integration/api-calls-advanced.test.tsx:211:11)\n\n  \u25cf API Calls - API Versioning \u203a handles version-specific endpoints in OpenAPI spec\n\n    Endpoint get_threads_v2 not found\n\n    \u001b[0m \u001b[90m  7 |\u001b[39m     \u001b[36mconst\u001b[39m endpoint \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m getEndpoint(endpointName\u001b[33m,\u001b[39m method)\u001b[33m;\u001b[39m\n     \u001b[90m  8 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mendpoint) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Endpoint ${endpointName} not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 10 |\u001b[39m     }\n     \u001b[90m 11 |\u001b[39m\n     \u001b[90m 12 |\u001b[39m     \u001b[36mconst\u001b[39m url \u001b[33m=\u001b[39m getApiUrl(endpoint\u001b[33m.\u001b[39mpath)\u001b[33m;\u001b[39m\u001b[0m\n\n      at ApiClient.request (services/apiClient.ts:9:13)\n      at Object.<anonymous> (__tests__/integration/api-calls-advanced.test.tsx:258:20)\n\n  \u25cf API Calls - API Versioning \u203a handles version migration scenarios\n\n    Endpoint get_threads_v1 not found\n\n    \u001b[0m \u001b[90m  7 |\u001b[39m     \u001b[36mconst\u001b[39m endpoint \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m getEndpoint(endpointName\u001b[33m,\u001b[39m method)\u001b[33m;\u001b[39m\n     \u001b[90m  8 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mendpoint) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Endpoint ${endpointName} not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 10 |\u001b[39m     }\n     \u001b[90m 11 |\u001b[39m\n     \u001b[90m 12 |\u001b[39m     \u001b[36mconst\u001b[39m url \u001b[33m=\u001b[39m getApiUrl(endpoint\u001b[33m.\u001b[39mpath)\u001b[33m;\u001b[39m\u001b[0m\n\n      at ApiClient.request (services/apiClient.ts:9:13)\n      at Object.<anonymous> (__tests__/integration/api-calls-advanced.test.tsx:268:24)\n\n  \u25cf API Calls - Response Interceptors \u203a parses JSON responses correctly\n\n    Endpoint get_threads_v1 not found\n\n    \u001b[0m \u001b[90m  7 |\u001b[39m     \u001b[36mconst\u001b[39m endpoint \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m getEndpoint(endpointName\u001b[33m,\u001b[39m method)\u001b[33m;\u001b[39m\n     \u001b[90m  8 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mendpoint) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Endpoint ${endpointName} not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 10 |\u001b[39m     }\n     \u001b[90m 11 |\u001b[39m\n     \u001b[90m 12 |\u001b[39m     \u001b[36mconst\u001b[39m url \u001b[33m=\u001b[39m getApiUrl(endpoint\u001b[33m.\u001b[39mpath)\u001b[33m;\u001b[39m\u001b[0m\n\n      at ApiClient.request (services/apiClient.ts:9:13)\n      at Object.<anonymous> (__tests__/integration/api-calls-advanced.test.tsx:300:22)\n\n  \u25cf API Calls - Response Interceptors \u203a handles empty response bodies\n\n    Endpoint delete_empty not found\n\n    \u001b[0m \u001b[90m  7 |\u001b[39m     \u001b[36mconst\u001b[39m endpoint \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m getEndpoint(endpointName\u001b[33m,\u001b[39m method)\u001b[33m;\u001b[39m\n     \u001b[90m  8 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mendpoint) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Endpoint ${endpointName} not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 10 |\u001b[39m     }\n     \u001b[90m 11 |\u001b[39m\n     \u001b[90m 12 |\u001b[39m     \u001b[36mconst\u001b[39m url \u001b[33m=\u001b[39m getApiUrl(endpoint\u001b[33m.\u001b[39mpath)\u001b[33m;\u001b[39m\u001b[0m\n\n      at ApiClient.request (services/apiClient.ts:9:13)\n      at Object.<anonymous> (__tests__/integration/api-calls-advanced.test.tsx:313:22)\n\n  \u25cf API Calls - Response Interceptors \u203a preserves response metadata\n\n    Endpoint metadata_test not found\n\n    \u001b[0m \u001b[90m  7 |\u001b[39m     \u001b[36mconst\u001b[39m endpoint \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m getEndpoint(endpointName\u001b[33m,\u001b[39m method)\u001b[33m;\u001b[39m\n     \u001b[90m  8 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mendpoint) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Endpoint ${endpointName} not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 10 |\u001b[39m     }\n     \u001b[90m 11 |\u001b[39m\n     \u001b[90m 12 |\u001b[39m     \u001b[36mconst\u001b[39m url \u001b[33m=\u001b[39m getApiUrl(endpoint\u001b[33m.\u001b[39mpath)\u001b[33m;\u001b[39m\u001b[0m\n\n      at ApiClient.request (services/apiClient.ts:9:13)\n      at Object.<anonymous> (__tests__/integration/api-calls-advanced.test.tsx:356:22)\n\n  \u25cf API Calls - Response Interceptors \u203a handles large response payloads efficiently\n\n    Endpoint get_large_data not found\n\n    \u001b[0m \u001b[90m  7 |\u001b[39m     \u001b[36mconst\u001b[39m endpoint \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m getEndpoint(endpointName\u001b[33m,\u001b[39m method)\u001b[33m;\u001b[39m\n     \u001b[90m  8 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mendpoint) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Endpoint ${endpointName} not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 10 |\u001b[39m     }\n     \u001b[90m 11 |\u001b[39m\n     \u001b[90m 12 |\u001b[39m     \u001b[36mconst\u001b[39m url \u001b[33m=\u001b[39m getApiUrl(endpoint\u001b[33m.\u001b[39mpath)\u001b[33m;\u001b[39m\u001b[0m\n\n      at ApiClient.request (services/apiClient.ts:9:13)\n      at Object.<anonymous> (__tests__/integration/api-calls-advanced.test.tsx:363:22)\n\n  \u25cf API Calls - Performance \u203a handles concurrent requests efficiently\n\n    Endpoint get_threads_v1 not found\n\n    \u001b[0m \u001b[90m  7 |\u001b[39m     \u001b[36mconst\u001b[39m endpoint \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m getEndpoint(endpointName\u001b[33m,\u001b[39m method)\u001b[33m;\u001b[39m\n     \u001b[90m  8 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mendpoint) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Endpoint ${endpointName} not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 10 |\u001b[39m     }\n     \u001b[90m 11 |\u001b[39m\n     \u001b[90m 12 |\u001b[39m     \u001b[36mconst\u001b[39m url \u001b[33m=\u001b[39m getApiUrl(endpoint\u001b[33m.\u001b[39mpath)\u001b[33m;\u001b[39m\u001b[0m\n\n      at ApiClient.request (services/apiClient.ts:9:13)\n          at async Promise.all (index 0)\n      at Object.<anonymous> (__tests__/integration/api-calls-advanced.test.tsx:409:23)\n\n  \u25cf API Calls - Performance \u203a implements connection pooling\n\n    Endpoint connection_test not found\n\n    \u001b[0m \u001b[90m  7 |\u001b[39m     \u001b[36mconst\u001b[39m endpoint \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m getEndpoint(endpointName\u001b[33m,\u001b[39m method)\u001b[33m;\u001b[39m\n     \u001b[90m  8 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mendpoint) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Endpoint ${endpointName} not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 10 |\u001b[39m     }\n     \u001b[90m 11 |\u001b[39m\n     \u001b[90m 12 |\u001b[39m     \u001b[36mconst\u001b[39m url \u001b[33m=\u001b[39m getApiUrl(endpoint\u001b[33m.\u001b[39mpath)\u001b[33m;\u001b[39m\u001b[0m\n\n      at ApiClient.request (services/apiClient.ts:9:13)\n          at async Promise.all (index 0)\n      at Object.<anonymous> (__tests__/integration/api-calls-advanced.test.tsx:443:5)\n\n  \u25cf API Calls - Performance \u203a optimizes payload serialization\n\n    Endpoint large_payload_test not found\n\n    \u001b[0m \u001b[90m  7 |\u001b[39m     \u001b[36mconst\u001b[39m endpoint \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m getEndpoint(endpointName\u001b[33m,\u001b[39m method)\u001b[33m;\u001b[39m\n     \u001b[90m  8 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mendpoint) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Endpoint ${endpointName} not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 10 |\u001b[39m     }\n     \u001b[90m 11 |\u001b[39m\n     \u001b[90m 12 |\u001b[39m     \u001b[36mconst\u001b[39m url \u001b[33m=\u001b[39m getApiUrl(endpoint\u001b[33m.\u001b[39mpath)\u001b[33m;\u001b[39m\u001b[0m\n\n      at ApiClient.request (services/apiClient.ts:9:13)\n      at Object.<anonymous> (__tests__/integration/api-calls-advanced.test.tsx:477:5)\n\nFAIL Integration Tests __tests__/integration/websocket-lifecycle.test.tsx\n  WebSocket Connection Lifecycle Tests\n    Connection Establishment\n      \u00d7 should handle complete connection lifecycle with real timing (1 ms)\n      \u00d7 should track real connection state transitions with history\n      \u00d7 should measure real connection performance (1 ms)\n    Error Handling\n      \u00d7 should handle real connection errors with proper state transitions\n      \u00d7 should handle network disconnections gracefully\n    Reconnection Scenarios\n      \u00d7 should handle real reconnection with timing simulation\n      \u00d7 should test real WebSocket reconnection strategies (1 ms)\n      \u00d7 should handle multiple reconnection attempts (1 ms)\n    Performance Measurement\n      \u00d7 should measure real connection performance with timing (1 ms)\n      \u00d7 should track connection stability metrics (1 ms)\n\n  \u25cf WebSocket Connection Lifecycle Tests \u203a Connection Establishment \u203a should handle complete connection lifecycle with real timing\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-lifecycle.test.tsx:31:15)\n\n  \u25cf WebSocket Connection Lifecycle Tests \u203a Connection Establishment \u203a should handle complete connection lifecycle with real timing\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-lifecycle.test.tsx:35:15)\n\n  \u25cf WebSocket Connection Lifecycle Tests \u203a Connection Establishment \u203a should track real connection state transitions with history\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-lifecycle.test.tsx:31:15)\n\n  \u25cf WebSocket Connection Lifecycle Tests \u203a Connection Establishment \u203a should track real connection state transitions with history\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-lifecycle.test.tsx:35:15)\n\n  \u25cf WebSocket Connection Lifecycle Tests \u203a Connection Establishment \u203a should measure real connection performance\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-lifecycle.test.tsx:31:15)\n\n  \u25cf WebSocket Connection Lifecycle Tests \u203a Connection Establishment \u203a should measure real connection performance\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-lifecycle.test.tsx:35:15)\n\n  \u25cf WebSocket Connection Lifecycle Tests \u203a Error Handling \u203a should handle real connection errors with proper state transitions\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-lifecycle.test.tsx:31:15)\n\n  \u25cf WebSocket Connection Lifecycle Tests \u203a Error Handling \u203a should handle real connection errors with proper state transitions\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-lifecycle.test.tsx:35:15)\n\n  \u25cf WebSocket Connection Lifecycle Tests \u203a Error Handling \u203a should handle network disconnections gracefully\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-lifecycle.test.tsx:31:15)\n\n  \u25cf WebSocket Connection Lifecycle Tests \u203a Error Handling \u203a should handle network disconnections gracefully\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-lifecycle.test.tsx:35:15)\n\n  \u25cf WebSocket Connection Lifecycle Tests \u203a Reconnection Scenarios \u203a should handle real reconnection with timing simulation\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-lifecycle.test.tsx:31:15)\n\n  \u25cf WebSocket Connection Lifecycle Tests \u203a Reconnection Scenarios \u203a should handle real reconnection with timing simulation\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-lifecycle.test.tsx:35:15)\n\n  \u25cf WebSocket Connection Lifecycle Tests \u203a Reconnection Scenarios \u203a should test real WebSocket reconnection strategies\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-lifecycle.test.tsx:31:15)\n\n  \u25cf WebSocket Connection Lifecycle Tests \u203a Reconnection Scenarios \u203a should test real WebSocket reconnection strategies\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-lifecycle.test.tsx:35:15)\n\n  \u25cf WebSocket Connection Lifecycle Tests \u203a Reconnection Scenarios \u203a should handle multiple reconnection attempts\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-lifecycle.test.tsx:31:15)\n\n  \u25cf WebSocket Connection Lifecycle Tests \u203a Reconnection Scenarios \u203a should handle multiple reconnection attempts\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-lifecycle.test.tsx:35:15)\n\n  \u25cf WebSocket Connection Lifecycle Tests \u203a Performance Measurement \u203a should measure real connection performance with timing\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-lifecycle.test.tsx:31:15)\n\n  \u25cf WebSocket Connection Lifecycle Tests \u203a Performance Measurement \u203a should measure real connection performance with timing\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-lifecycle.test.tsx:35:15)\n\n  \u25cf WebSocket Connection Lifecycle Tests \u203a Performance Measurement \u203a should track connection stability metrics\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-lifecycle.test.tsx:31:15)\n\n  \u25cf WebSocket Connection Lifecycle Tests \u203a Performance Measurement \u203a should track connection stability metrics\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-lifecycle.test.tsx:35:15)\n\nFAIL Integration Tests __tests__/integration/corpus-management.test.tsx\n  Corpus Management Integration\n    \u00d7 should upload documents to corpus and update UI (3 ms)\n    \u00d7 should search corpus with embeddings\n\n  \u25cf Corpus Management Integration \u203a should upload documents to corpus and update UI\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf Corpus Management Integration \u203a should upload documents to corpus and update UI\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf Corpus Management Integration \u203a should search corpus with embeddings\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf Corpus Management Integration \u203a should search corpus with embeddings\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\nFAIL Integration Tests __tests__/auth/auth-components-states.test.tsx\n  Auth Components States\n    Loading State\n      \u221a should render loading state when loading is true (56 ms)\n      \u221a should not be clickable when loading (7 ms)\n    Logged Out State\n      \u00d7 should render login button when user is not authenticated (6 ms)\n      \u221a should call login function when login button is clicked (6 ms)\n      \u221a should render correctly with null auth config (4 ms)\n    Logged In State - Production Mode\n      \u221a should display user name when authenticated (3 ms)\n      \u221a should display email when full_name is not available (2 ms)\n      \u221a should render logout button in production mode (2 ms)\n      \u221a should call logout function when logout button is clicked (2 ms)\n      \u221a should not show DEV MODE badge in production (1 ms)\n    Logged In State - Development Mode\n      \u00d7 should show DEV MODE badge in development mode (3 ms)\n      \u221a should render both logout and OAuth login buttons in dev mode (3 ms)\n      \u00d7 should style logout button as outline variant in dev mode (4 ms)\n      \u00d7 should style OAuth login button as default variant in dev mode (2 ms)\n      \u221a should call logout when dev logout button is clicked (3 ms)\n      \u221a should call login when OAuth login button is clicked in dev mode (3 ms)\n    State Transitions\n      \u221a should handle state change from loading to logged out (3 ms)\n      \u221a should handle state change from logged out to logged in (3 ms)\n      \u221a should handle development mode toggle (3 ms)\n\n  \u25cf Auth Components States \u203a Logged Out State \u203a should render login button when user is not authenticated\n\n    expect(element).toHaveAttribute(\"data-size\", \"lg\") // element.getAttribute(\"data-size\") === \"lg\"\n\n    Expected the element to have attribute:\n      data-size=\"lg\"\n    Received:\n      null\n\n    \u001b[0m \u001b[90m 74 |\u001b[39m       \u001b[36mconst\u001b[39m button \u001b[33m=\u001b[39m screen\u001b[33m.\u001b[39mgetByRole(\u001b[32m'button'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 75 |\u001b[39m       expect(button)\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'Login with Google'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 76 |\u001b[39m       expect(button)\u001b[33m.\u001b[39mtoHaveAttribute(\u001b[32m'data-size'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'lg'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 77 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 78 |\u001b[39m\n     \u001b[90m 79 |\u001b[39m     it(\u001b[32m'should call login function when login button is clicked'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.<anonymous> (__tests__/auth/auth-components-states.test.tsx:76:22)\n\n  \u25cf Auth Components States \u203a Logged In State - Development Mode \u203a should show DEV MODE badge in development mode\n\n    expect(element).toHaveAttribute(\"data-variant\", \"secondary\") // element.getAttribute(\"data-variant\") === \"secondary\"\n\n    Expected the element to have attribute:\n      data-variant=\"secondary\"\n    Received:\n      null\n\n    \u001b[0m \u001b[90m 180 |\u001b[39m       expect(badge)\u001b[33m.\u001b[39mtoBeInTheDocument()\u001b[33m;\u001b[39m\n     \u001b[90m 181 |\u001b[39m       expect(badge)\u001b[33m.\u001b[39mtoHaveClass(\u001b[32m'bg-yellow-100'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'text-yellow-800'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 182 |\u001b[39m       expect(badge)\u001b[33m.\u001b[39mtoHaveAttribute(\u001b[32m'data-variant'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'secondary'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 183 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 184 |\u001b[39m\n     \u001b[90m 185 |\u001b[39m     it(\u001b[32m'should render both logout and OAuth login buttons in dev mode'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.<anonymous> (__tests__/auth/auth-components-states.test.tsx:182:21)\n\n  \u25cf Auth Components States \u203a Logged In State - Development Mode \u203a should style logout button as outline variant in dev mode\n\n    expect(element).toHaveAttribute(\"data-variant\", \"outline\") // element.getAttribute(\"data-variant\") === \"outline\"\n\n    Expected the element to have attribute:\n      data-variant=\"outline\"\n    Received:\n      null\n\n    \u001b[0m \u001b[90m 194 |\u001b[39m\n     \u001b[90m 195 |\u001b[39m       \u001b[36mconst\u001b[39m logoutButton \u001b[33m=\u001b[39m screen\u001b[33m.\u001b[39mgetByText(\u001b[32m'Logout'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 196 |\u001b[39m       expect(logoutButton)\u001b[33m.\u001b[39mtoHaveAttribute(\u001b[32m'data-variant'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'outline'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 197 |\u001b[39m       expect(logoutButton)\u001b[33m.\u001b[39mtoHaveAttribute(\u001b[32m'data-size'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'sm'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 198 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 199 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/auth/auth-components-states.test.tsx:196:28)\n\n  \u25cf Auth Components States \u203a Logged In State - Development Mode \u203a should style OAuth login button as default variant in dev mode\n\n    expect(element).toHaveAttribute(\"data-variant\", \"default\") // element.getAttribute(\"data-variant\") === \"default\"\n\n    Expected the element to have attribute:\n      data-variant=\"default\"\n    Received:\n      null\n\n    \u001b[0m \u001b[90m 202 |\u001b[39m\n     \u001b[90m 203 |\u001b[39m       \u001b[36mconst\u001b[39m oauthButton \u001b[33m=\u001b[39m screen\u001b[33m.\u001b[39mgetByText(\u001b[32m'OAuth Login'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 204 |\u001b[39m       expect(oauthButton)\u001b[33m.\u001b[39mtoHaveAttribute(\u001b[32m'data-variant'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'default'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 205 |\u001b[39m       expect(oauthButton)\u001b[33m.\u001b[39mtoHaveAttribute(\u001b[32m'data-size'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'sm'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 206 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 207 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/auth/auth-components-states.test.tsx:204:27)\n\nPASS Integration Tests __tests__/integration/advanced-integration/form-validation.test.tsx\n  Complex Form Validation Integration\n    \u221a should validate multi-step forms with dependencies (29 ms)\n    \u221a should handle async validation with debouncing (435 ms)\n    \u221a should handle conditional field validation (15 ms)\n    \u221a should validate forms with file uploads (155 ms)\n\nPASS Integration Tests __tests__/integration/advanced-integration/search-ui-interactions.test.tsx\n  Search and UI Interactions Integration\n    Advanced Search\n      \u221a should implement fuzzy search with highlighting (248 ms)\n      \u221a should implement search with filters and facets (16 ms)\n    Drag and Drop\n      \u221a should handle file drag and drop with preview (5 ms)\n      \u221a should reorder items with drag and drop (10 ms)\n    Infinite Scroll\n      \u221a should load more content on scroll (139 ms)\n      \u221a should implement virtual scrolling for large lists (4 ms)\n    Complex Animations\n      \u221a should chain animations with proper timing (214 ms)\n      \u221a should handle gesture-based animations (30 ms)\n\nPASS Integration Tests __tests__/integration/store-sync.test.tsx\n  Store Synchronization Integration Tests\n    Cross-Component Store Synchronization\n      \u221a synchronizes store updates across components (72 ms)\n      \u221a prevents unnecessary re-renders with selective subscriptions (62 ms)\n      \u221a handles rapid state updates without race conditions (63 ms)\n    Store State Isolation\n      \u221a maintains state isolation between different stores (183 ms)\n      \u221a handles store reset without affecting other stores (187 ms)\n    Complex State Transactions\n      \u221a handles complex multi-store state updates atomically (52 ms)\n      \u221a maintains state consistency during concurrent updates (4 ms)\n    Memory Management\n      \u221a prevents memory leaks with large state objects\n      \u221a handles subscription cleanup properly (1 ms)\n    DevTools Integration\n      \u221a maintains devtools integration with store updates\n      \u221a supports time-travel debugging through state snapshots (1 ms)\n\nPASS Integration Tests __tests__/integration/thread-switching-simple.test.tsx\n  Simple Thread Switching\n    \u221a should switch threads correctly (99 ms)\n    \u221a should handle rapid switching (284 ms)\n    \u221a should show active state correctly (63 ms)\n\nPASS Integration Tests __tests__/integration/basic-integration-ui.test.tsx\n  UI Interaction Integration Tests\n    Navigation and Routing\n      \u221a should handle navigation between views (44 ms)\n    Performance and Optimization\n      \u221a should debounce rapid input changes (422 ms)\n      \u221a should implement virtual scrolling for large lists (6 ms)\n    Form Interactions\n      \u221a should handle form validation and submission (41 ms)\n      \u221a should handle keyboard interactions (61 ms)\n\nPASS Integration Tests __tests__/integration/advanced-integration.test.tsx\n  Advanced Frontend Integration Tests - Collaboration\n    18. Collaborative Features Integration\n      \u221a should sync cursor positions in real-time (34 ms)\n      \u221a should handle presence and activity status (46 ms)\n    26. Real-time Collaboration Sync\n      \u221a should handle conflict resolution in collaborative editing (16 ms)\n      \u221a should maintain operation history for undo/redo (9 ms)\n  Advanced Frontend Integration Tests - Offline Mode\n    19. Offline Mode Integration\n      \u221a should queue actions when offline and sync when online (23 ms)\n      \u221a should use local storage for offline persistence (14 ms)\n  Advanced Frontend Integration Tests - Navigation\n    20. Complex Navigation Flows\n      \u221a should handle deep linking with state preservation (14 ms)\n      \u221a should handle protected route redirects (15 ms)\n  Advanced Frontend Integration Tests - Search and Drag-Drop\n    21. Advanced Search Integration\n      \u221a should implement fuzzy search with highlighting (251 ms)\n      \u221a should implement search with filters and facets (15 ms)\n    22. Drag and Drop Integration\n      \u221a should handle file drag and drop with preview (17 ms)\n      \u221a should reorder items with drag and drop (14 ms)\n  Advanced Frontend Integration Tests - Infinite Scroll and Animations\n    23. Infinite Scroll Integration\n      \u221a should load more content on scroll (138 ms)\n      \u221a should implement virtual scrolling for large lists (3 ms)\n    24. Complex Animation Sequences\n      \u221a should chain animations with proper timing (237 ms)\n      \u221a should handle gesture-based animations (30 ms)\n    25. Memory Management Integration\n      \u221a should cleanup resources on unmount (2 ms)\n      \u221a should manage large data sets efficiently (44 ms)\n  Advanced Frontend Integration Tests - Error, i18n, WebSocket\n    27. Advanced Error Boundaries\n      \u221a should recover from component errors gracefully (15 ms)\n      \u221a should report errors to monitoring service (13 ms)\n    28. Multi-language Support Integration\n      \u221a should switch languages dynamically (18 ms)\n      \u221a should handle RTL languages correctly (15 ms)\n    29. WebSocket Resilience Integration\n      \u221a should handle WebSocket message buffering during reconnection (139 ms)\n      \u221a should implement exponential backoff for reconnection (23 ms)\n  Advanced Frontend Integration Tests - End-to-End Journey\n    30. End-to-End User Journey\n      \u221a should complete full optimization workflow (293 ms)\n\nPASS Integration Tests __tests__/integration/advanced-integration/infinite-scroll-animations.test.tsx\n  Advanced Frontend Integration Tests - Infinite Scroll and Animations\n    23. Infinite Scroll Integration\n      \u221a should load more content on scroll (144 ms)\n      \u221a should implement virtual scrolling for large lists (5 ms)\n    24. Complex Animation Sequences\n      \u221a should chain animations with proper timing (243 ms)\n      \u221a should handle gesture-based animations (31 ms)\n    25. Memory Management Integration\n      \u221a should cleanup resources on unmount (2 ms)\n      \u221a should manage large data sets efficiently (43 ms)\n\nPASS Integration Tests __tests__/integration/advanced-integration/index.test.tsx\n  Advanced Frontend Integration Tests - Collaboration\n    18. Collaborative Features Integration\n      \u221a should sync cursor positions in real-time (26 ms)\n      \u221a should handle presence and activity status (46 ms)\n    26. Real-time Collaboration Sync\n      \u221a should handle conflict resolution in collaborative editing (16 ms)\n      \u221a should maintain operation history for undo/redo (9 ms)\n  Advanced Frontend Integration Tests - Offline Mode\n    19. Offline Mode Integration\n      \u221a should queue actions when offline and sync when online (36 ms)\n      \u221a should use local storage for offline persistence (18 ms)\n  Advanced Frontend Integration Tests - Navigation\n    20. Complex Navigation Flows\n      \u221a should handle deep linking with state preservation (14 ms)\n      \u221a should handle protected route redirects (15 ms)\n  Advanced Frontend Integration Tests - Search and Drag-Drop\n    21. Advanced Search Integration\n      \u221a should implement fuzzy search with highlighting (233 ms)\n      \u221a should implement search with filters and facets (6 ms)\n    22. Drag and Drop Integration\n      \u221a should handle file drag and drop with preview (8 ms)\n      \u221a should reorder items with drag and drop (15 ms)\n  Advanced Frontend Integration Tests - Infinite Scroll and Animations\n    23. Infinite Scroll Integration\n      \u221a should load more content on scroll (140 ms)\n      \u221a should implement virtual scrolling for large lists (11 ms)\n    24. Complex Animation Sequences\n      \u221a should chain animations with proper timing (256 ms)\n      \u221a should handle gesture-based animations (31 ms)\n    25. Memory Management Integration\n      \u221a should cleanup resources on unmount (4 ms)\n      \u221a should manage large data sets efficiently (43 ms)\n  Advanced Frontend Integration Tests - Error, i18n, WebSocket\n    27. Advanced Error Boundaries\n      \u221a should recover from component errors gracefully (30 ms)\n      \u221a should report errors to monitoring service (13 ms)\n    28. Multi-language Support Integration\n      \u221a should switch languages dynamically (18 ms)\n      \u221a should handle RTL languages correctly (15 ms)\n    29. WebSocket Resilience Integration\n      \u221a should handle WebSocket message buffering during reconnection (146 ms)\n      \u221a should implement exponential backoff for reconnection (14 ms)\n  Advanced Frontend Integration Tests - End-to-End Journey\n    30. End-to-End User Journey\n      \u221a should complete full optimization workflow (294 ms)\n\nPASS Integration Tests __tests__/integration/navigation-complete.test.tsx\n  Complete Navigation Integration Tests\n    Basic Navigation Between Routes\n      \u221a should navigate to all main routes (246 ms)\n      \u221a should handle navigation component interactions (126 ms)\n      \u221a should maintain navigation call history\n      \u221a should handle rapid navigation clicks (62 ms)\n    Browser Navigation Controls\n      \u221a should trigger browser back navigation\n      \u221a should trigger browser forward navigation (1 ms)\n      \u221a should handle page refresh\n      \u221a should simulate popstate events (1 ms)\n    Concurrent Navigation Requests\n      \u221a should handle multiple navigation calls (59 ms)\n      \u221a should handle navigation with debouncing simulation (1 ms)\n      \u221a should queue navigation requests (45 ms)\n      \u221a should handle navigation interruption (109 ms)\n    Navigation Cleanup and Memory Management\n      \u221a should handle component unmounting (2 ms)\n      \u221a should prevent memory leaks during navigation (720 ms)\n      \u221a should handle navigation with state cleanup (2 ms)\n      \u221a should handle unsaved changes confirmation (1 ms)\n    URL State Synchronization\n      \u221a should synchronize navigation with URL state\n      \u221a should handle query parameters in navigation (1 ms)\n      \u221a should preserve hash navigation\n      \u221a should handle URL encoding correctly\n    Error Handling and Edge Cases\n      \u221a should handle invalid routes gracefully\n      \u221a should handle network errors during navigation (1 ms)\n      \u221a should prevent infinite redirect loops\n      \u221a should handle malformed URL parameters\n    Performance and Optimization\n      \u221a should preload routes for better performance (1 ms)\n      \u221a should implement navigation caching\n      \u221a should optimize navigation for large datasets (147 ms)\n      \u221a should handle virtual navigation for performance (1 ms)\n\nPASS Integration Tests __tests__/integration/advanced-integration/error-handling-edge-cases.test.tsx\n  Error Handling and Edge Cases Integration\n    Advanced Error Boundaries\n      \u221a should recover from component errors gracefully (26 ms)\n      \u221a should report errors to monitoring service (14 ms)\n    Memory Management\n      \u221a should cleanup resources on unmount (2 ms)\n      \u221a should manage large data sets efficiently (41 ms)\n    Multi-language Support\n      \u221a should switch languages dynamically (15 ms)\n      \u221a should handle RTL languages correctly (15 ms)\n    WebSocket Resilience\n      \u221a should handle WebSocket message buffering during reconnection (141 ms)\n      \u221a should implement exponential backoff for reconnection (13 ms)\n\nPASS Integration Tests __tests__/integration/data-generation.test.tsx\n  Synthetic Data Generation Flow\n    \u221a should generate synthetic data based on user input (34 ms)\n    \u221a should export synthetic data in multiple formats (31 ms)\n  Generation Service Integration\n    \u221a should handle batch generation jobs (140 ms)\n    \u221a should stream generation progress via WebSocket (28 ms)\n\nPASS Integration Tests __tests__/integration/advanced-integration/search-drag-drop.test.tsx\n  Advanced Frontend Integration Tests - Search and Drag-Drop\n    21. Advanced Search Integration\n      \u221a should implement fuzzy search with highlighting (242 ms)\n      \u221a should implement search with filters and facets (15 ms)\n    22. Drag and Drop Integration\n      \u221a should handle file drag and drop with preview (13 ms)\n      \u221a should reorder items with drag and drop (15 ms)\n\nPASS Integration Tests __tests__/integration/websocket-setup.test.tsx\n  WebSocket Setup Integration Tests - Agent 6\n    WebSocket Connection with Authentication\n      \u221a should connect with valid auth token within 500ms (88 ms)\n      \u221a should handle auth token validation correctly (30 ms)\n      \u221a should reject invalid auth tokens (29 ms)\n    Auto-Reconnection with Exponential Backoff\n      \u221a should automatically reconnect after unexpected disconnect (13 ms)\n    Message Queue During Disconnection\n      \u221a should queue messages when disconnected and send on reconnect (81 ms)\n    Connection State Management\n      \u221a should accurately track connection state transitions (62 ms)\n    Concurrent Message Handling\n      \u221a should handle multiple simultaneous messages (20 ms)\n    Connection Cleanup\n      \u221a should cleanup connection properly (49 ms)\n\nPASS Integration Tests __tests__/integration/advanced-integration/theme-preferences.test.tsx\n  Theme and Preferences Synchronization\n    \u221a should sync theme preferences across components (8 ms)\n    \u221a should persist user preferences across sessions\n    \u221a should handle theme changes with animation transitions (137 ms)\n    \u221a should sync preferences with server (146 ms)\n\nPASS Integration Tests __tests__/integration/critical/error-recovery.test.tsx\n  Error Recovery Integration\n    Connection Recovery\n      \u221a should recover from WebSocket disconnection (6 ms)\n      \u221a should retry failed API calls with exponential backoff (309 ms)\n      \u221a should handle session expiration gracefully (3 ms)\n\nPASS Integration Tests __tests__/integration/advanced-integration/offline-mode.test.tsx\n  Advanced Frontend Integration Tests - Offline Mode\n    19. Offline Mode Integration\n      \u221a should queue actions when offline and sync when online (45 ms)\n      \u221a should use local storage for offline persistence (6 ms)\n\nPASS Integration Tests __tests__/integration/deep-linking.test.tsx\n  Deep Linking Integration Tests\n    Thread Deep Linking\n      \u221a should navigate to specific thread via deep link (11 ms)\n      \u221a should handle thread deep links with query parameters (1 ms)\n      \u221a should restore thread state from URL parameters\n      \u221a should handle invalid thread IDs in deep links gracefully (7 ms)\n    Query Parameter Handling\n      \u221a should parse and apply search query parameters (3 ms)\n      \u221a should handle multiple filter parameters (2 ms)\n      \u221a should preserve query parameters during navigation\n      \u221a should handle URL encoding and special characters (1 ms)\n    Hash Navigation and Anchors\n      \u221a should navigate to page sections via hash (1 ms)\n      \u221a should update hash on section navigation (41 ms)\n      \u221a should handle smooth scrolling to hash targets\n      \u221a should fallback gracefully for invalid hash targets\n    Complex URL State Management\n      \u221a should handle URLs with multiple parameter types\n      \u221a should maintain state consistency across complex navigation (1 ms)\n      \u221a should handle URL state conflicts gracefully\n      \u221a should optimize URL structure for SEO and sharing\n    Browser History and State Restoration\n      \u221a should restore application state from browser history (1 ms)\n      \u221a should handle popstate events correctly (12 ms)\n      \u221a should preserve scroll position in browser history (1 ms)\n      \u221a should limit browser history size for performance\n    URL Validation and Security\n      \u221a should validate URL parameters for security (1 ms)\n      \u221a should handle malformed URLs gracefully (1 ms)\n      \u221a should prevent URL manipulation attacks\n      \u221a should enforce URL length limits (1 ms)\n\nPASS Integration Tests __tests__/integration/advanced-integration/error-i18n-websocket.test.tsx\n  Advanced Frontend Integration Tests - Error, i18n, WebSocket\n    27. Advanced Error Boundaries\n      \u221a should recover from component errors gracefully (21 ms)\n      \u221a should report errors to monitoring service (13 ms)\n    28. Multi-language Support Integration\n      \u221a should switch languages dynamically (18 ms)\n      \u221a should handle RTL languages correctly (16 ms)\n    29. WebSocket Resilience Integration\n      \u221a should handle WebSocket message buffering during reconnection (138 ms)\n      \u221a should implement exponential backoff for reconnection (16 ms)\n\nPASS Integration Tests __tests__/integration/advanced-integration/offline-navigation.test.tsx\n  Offline Mode and Navigation Integration\n    Offline Mode\n      \u221a should queue actions when offline and sync when online (45 ms)\n      \u221a should use local storage for offline persistence (19 ms)\n    Complex Navigation Flows\n      \u221a should handle deep linking with state preservation (13 ms)\n      \u221a should handle protected route redirects (13 ms)\n      \u221a should handle navigation with query parameters (16 ms)\n\nPASS Integration Tests __tests__/integration/advanced-integration/end-to-end-journey.test.tsx\n  Advanced Frontend Integration Tests - End-to-End Journey\n    30. End-to-End User Journey\n      \u221a should complete full optimization workflow (288 ms)\n\nPASS Integration Tests __tests__/integration/advanced-integration/collaboration.test.tsx\n  Advanced Frontend Integration Tests - Collaboration\n    18. Collaborative Features Integration\n      \u221a should sync cursor positions in real-time (30 ms)\n      \u221a should handle presence and activity status (45 ms)\n    26. Real-time Collaboration Sync\n      \u221a should handle conflict resolution in collaborative editing (14 ms)\n      \u221a should maintain operation history for undo/redo (8 ms)\n\nPASS Integration Tests __tests__/integration/system-management.test.tsx\n  LLM Cache Management Integration\n    \u221a should clear LLM cache and update UI (34 ms)\n    \u221a should update cache TTL settings (31 ms)\n  Supply Catalog Integration\n    \u221a should load and display supply catalog (16 ms)\n    \u221a should switch between different model providers (14 ms)\n  Configuration Management\n    \u221a should load and display configuration (15 ms)\n    \u221a should update nested configuration values (16 ms)\n  Health Check Monitoring\n    \u221a should fetch and display system health status (32 ms)\n\nFAIL Integration Tests __tests__/integration/logout-websocket.test.tsx (21.724 s)\n  Logout WebSocket Disconnection Tests\n    WebSocket Disconnection\n      \u00d7 should disconnect WebSocket on logout (1300 ms)\n      \u221a should verify WebSocket is disconnected (74 ms)\n      \u00d7 should clear WebSocket message queue (1082 ms)\n      \u00d7 should handle WebSocket disconnection errors (1082 ms)\n    WebSocket State Cleanup\n      \u00d7 should ensure WebSocket connection is terminated (1078 ms)\n      \u221a should prevent new WebSocket messages after logout (75 ms)\n      \u00d7 should clear any pending WebSocket operations (1068 ms)\n      \u00d7 should ensure clean WebSocket state for next session (1093 ms)\n    WebSocket Timing Requirements\n      \u00d7 should complete WebSocket disconnect within 25ms (1061 ms)\n      \u00d7 should not block logout process if WebSocket fails (1079 ms)\n      \u00d7 should handle WebSocket timeout gracefully (1082 ms)\n      \u00d7 should complete logout even if WebSocket is slow (1080 ms)\n    WebSocket Error Handling\n      \u00d7 should handle WebSocket disconnect errors gracefully (1068 ms)\n      \u00d7 should handle WebSocket state check errors (1047 ms)\n      \u00d7 should continue logout process despite WebSocket errors (1079 ms)\n      \u00d7 should log WebSocket errors without blocking logout (1090 ms)\n    WebSocket Security Cleanup\n      \u00d7 should ensure no WebSocket connections remain active (1060 ms)\n      \u00d7 should prevent unauthorized WebSocket access after logout (1076 ms)\n      \u00d7 should clear any WebSocket authentication tokens (1080 ms)\n      \u00d7 should ensure complete WebSocket session termination (1071 ms)\n\n  \u25cf Logout WebSocket Disconnection Tests \u203a WebSocket Disconnection \u203a should disconnect WebSocket on logout\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mLogout\u001b[0m\n          \u001b[36m</button>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 88 |\u001b[39m       \u001b[36mawait\u001b[39m testWebSocketDisconnection()\u001b[33m;\u001b[39m\n     \u001b[90m 89 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 90 |\u001b[39m         expect(webSocketService\u001b[33m.\u001b[39mdisconnect)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 91 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 92 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 93 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/logout-websocket.test.tsx:90:45\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout WebSocket Disconnection Tests \u203a WebSocket Disconnection \u203a should clear WebSocket message queue\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mLogout\u001b[0m\n          \u001b[36m</button>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 102 |\u001b[39m       \u001b[36mawait\u001b[39m testWebSocketDisconnection()\u001b[33m;\u001b[39m\n     \u001b[90m 103 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 104 |\u001b[39m         expect(webSocketService\u001b[33m.\u001b[39mdisconnect)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 105 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 106 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 107 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/logout-websocket.test.tsx:104:45\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout WebSocket Disconnection Tests \u203a WebSocket Disconnection \u203a should handle WebSocket disconnection errors\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mLogout\u001b[0m\n          \u001b[36m</button>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 112 |\u001b[39m       \u001b[36mawait\u001b[39m testWebSocketDisconnection()\u001b[33m;\u001b[39m\n     \u001b[90m 113 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 114 |\u001b[39m         expect(mockAuthStore\u001b[33m.\u001b[39mlogout)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 115 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 116 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 117 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n\n      at __tests__/integration/logout-websocket.test.tsx:114:38\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout WebSocket Disconnection Tests \u203a WebSocket State Cleanup \u203a should ensure WebSocket connection is terminated\n\n    expect(jest.fn()).toHaveBeenCalledTimes(expected)\n\n    Expected number of calls: 1\n    Received number of calls: 0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mLogout\u001b[0m\n          \u001b[36m</button>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mawait\u001b[39m verifyWebSocketCleanup()\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m         expect(webSocketService\u001b[33m.\u001b[39mdisconnect)\u001b[33m.\u001b[39mtoHaveBeenCalledTimes(\u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/logout-websocket.test.tsx:130:45\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout WebSocket Disconnection Tests \u203a WebSocket State Cleanup \u203a should clear any pending WebSocket operations\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mLogout\u001b[0m\n          \u001b[36m</button>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 142 |\u001b[39m       \u001b[36mawait\u001b[39m verifyWebSocketCleanup()\u001b[33m;\u001b[39m\n     \u001b[90m 143 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 144 |\u001b[39m         expect(webSocketService\u001b[33m.\u001b[39mdisconnect)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 145 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 146 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 147 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/logout-websocket.test.tsx:144:45\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout WebSocket Disconnection Tests \u203a WebSocket State Cleanup \u203a should ensure clean WebSocket state for next session\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mLogout\u001b[0m\n          \u001b[36m</button>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 150 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n     \u001b[90m 151 |\u001b[39m         expect(webSocketService\u001b[33m.\u001b[39mgetState())\u001b[33m.\u001b[39mtoBe(\u001b[32m'disconnected'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 152 |\u001b[39m         expect(mockAuthStore\u001b[33m.\u001b[39mlogout)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 153 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 154 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 155 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n\n      at __tests__/integration/logout-websocket.test.tsx:152:38\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout WebSocket Disconnection Tests \u203a WebSocket Timing Requirements \u203a should complete WebSocket disconnect within 25ms\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mLogout\u001b[0m\n          \u001b[36m</button>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 163 |\u001b[39m       \u001b[36mawait\u001b[39m user\u001b[33m.\u001b[39mclick(logoutBtn)\u001b[33m;\u001b[39m\n     \u001b[90m 164 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 165 |\u001b[39m         expect(webSocketService\u001b[33m.\u001b[39mdisconnect)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 166 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 167 |\u001b[39m       \u001b[36mconst\u001b[39m endTime \u001b[33m=\u001b[39m performance\u001b[33m.\u001b[39mnow()\u001b[33m;\u001b[39m\n     \u001b[90m 168 |\u001b[39m       \u001b[36mreturn\u001b[39m endTime \u001b[33m-\u001b[39m startTime\u001b[33m;\u001b[39m\u001b[0m\n\n      at __tests__/integration/logout-websocket.test.tsx:165:45\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout WebSocket Disconnection Tests \u203a WebSocket Timing Requirements \u203a should not block logout process if WebSocket fails\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mLogout\u001b[0m\n          \u001b[36m</button>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 183 |\u001b[39m       \u001b[36mawait\u001b[39m user\u001b[33m.\u001b[39mclick(logoutBtn)\u001b[33m;\u001b[39m\n     \u001b[90m 184 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 185 |\u001b[39m         expect(mockAuthStore\u001b[33m.\u001b[39mlogout)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 186 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 187 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 188 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/logout-websocket.test.tsx:185:38\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout WebSocket Disconnection Tests \u203a WebSocket Timing Requirements \u203a should handle WebSocket timeout gracefully\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mLogout\u001b[0m\n          \u001b[36m</button>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 196 |\u001b[39m       \u001b[36mawait\u001b[39m user\u001b[33m.\u001b[39mclick(logoutBtn)\u001b[33m;\u001b[39m\n     \u001b[90m 197 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 198 |\u001b[39m         expect(mockAuthStore\u001b[33m.\u001b[39mlogout)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 199 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 200 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 201 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/logout-websocket.test.tsx:198:38\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout WebSocket Disconnection Tests \u203a WebSocket Timing Requirements \u203a should complete logout even if WebSocket is slow\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mLogout\u001b[0m\n          \u001b[36m</button>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 210 |\u001b[39m       \u001b[36mawait\u001b[39m user\u001b[33m.\u001b[39mclick(logoutBtn)\u001b[33m;\u001b[39m\n     \u001b[90m 211 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 212 |\u001b[39m         expect(mockAuthStore\u001b[33m.\u001b[39mlogout)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 213 |\u001b[39m         \u001b[36mconst\u001b[39m endTime \u001b[33m=\u001b[39m performance\u001b[33m.\u001b[39mnow()\u001b[33m;\u001b[39m\n     \u001b[90m 214 |\u001b[39m         expect(endTime \u001b[33m-\u001b[39m startTime)\u001b[33m.\u001b[39mtoBeLessThan(\u001b[35m500\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 215 |\u001b[39m       })\u001b[33m;\u001b[39m\u001b[0m\n\n      at __tests__/integration/logout-websocket.test.tsx:212:38\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout WebSocket Disconnection Tests \u203a WebSocket Error Handling \u203a should handle WebSocket disconnect errors gracefully\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mLogout\u001b[0m\n          \u001b[36m</button>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 231 |\u001b[39m       \u001b[36mawait\u001b[39m testWebSocketErrorHandling(\u001b[32m'connection'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 232 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 233 |\u001b[39m         expect(mockAuthStore\u001b[33m.\u001b[39mlogout)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 234 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 235 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 236 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/logout-websocket.test.tsx:233:38\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout WebSocket Disconnection Tests \u203a WebSocket Error Handling \u203a should handle WebSocket state check errors\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mLogout\u001b[0m\n          \u001b[36m</button>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 241 |\u001b[39m       \u001b[36mawait\u001b[39m testWebSocketErrorHandling(\u001b[32m'state'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 242 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 243 |\u001b[39m         expect(mockAuthStore\u001b[33m.\u001b[39mlogout)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 244 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 245 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 246 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/logout-websocket.test.tsx:243:38\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout WebSocket Disconnection Tests \u203a WebSocket Error Handling \u203a should continue logout process despite WebSocket errors\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mLogout\u001b[0m\n          \u001b[36m</button>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 251 |\u001b[39m       \u001b[36mawait\u001b[39m testWebSocketErrorHandling(\u001b[32m'general'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 252 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 253 |\u001b[39m         expect(mockAuthStore\u001b[33m.\u001b[39mlogout)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 254 |\u001b[39m         expect(mockAuthStore\u001b[33m.\u001b[39mreset)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m 255 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 256 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at __tests__/integration/logout-websocket.test.tsx:253:38\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout WebSocket Disconnection Tests \u203a WebSocket Error Handling \u203a should log WebSocket errors without blocking logout\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mLogout\u001b[0m\n          \u001b[36m</button>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 262 |\u001b[39m       \u001b[36mawait\u001b[39m testWebSocketErrorHandling(\u001b[32m'logging'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 263 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 264 |\u001b[39m         expect(mockAuthStore\u001b[33m.\u001b[39mlogout)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 265 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 266 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 267 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n\n      at __tests__/integration/logout-websocket.test.tsx:264:38\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout WebSocket Disconnection Tests \u203a WebSocket Security Cleanup \u203a should ensure no WebSocket connections remain active\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mLogout\u001b[0m\n          \u001b[36m</button>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 278 |\u001b[39m       \u001b[36mawait\u001b[39m verifyWebSocketSecurity()\u001b[33m;\u001b[39m\n     \u001b[90m 279 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 280 |\u001b[39m         expect(webSocketService\u001b[33m.\u001b[39mdisconnect)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 281 |\u001b[39m         expect(webSocketService\u001b[33m.\u001b[39mgetState())\u001b[33m.\u001b[39mtoBe(\u001b[32m'disconnected'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 282 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 283 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at __tests__/integration/logout-websocket.test.tsx:280:45\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout WebSocket Disconnection Tests \u203a WebSocket Security Cleanup \u203a should prevent unauthorized WebSocket access after logout\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: false\n    Received: true\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mLogout\u001b[0m\n          \u001b[36m</button>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 287 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n     \u001b[90m 288 |\u001b[39m         expect(webSocketService\u001b[33m.\u001b[39mgetState())\u001b[33m.\u001b[39mtoBe(\u001b[32m'disconnected'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 289 |\u001b[39m         expect(mockAuthStore\u001b[33m.\u001b[39misAuthenticated)\u001b[33m.\u001b[39mtoBe(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 290 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 291 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 292 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/logout-websocket.test.tsx:289:47\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout WebSocket Disconnection Tests \u203a WebSocket Security Cleanup \u203a should clear any WebSocket authentication tokens\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mLogout\u001b[0m\n          \u001b[36m</button>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 294 |\u001b[39m       \u001b[36mawait\u001b[39m verifyWebSocketSecurity()\u001b[33m;\u001b[39m\n     \u001b[90m 295 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 296 |\u001b[39m         expect(webSocketService\u001b[33m.\u001b[39mdisconnect)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 297 |\u001b[39m         expect(mockAuthStore\u001b[33m.\u001b[39mtoken)\u001b[33m.\u001b[39mtoBeNull()\u001b[33m;\u001b[39m\n     \u001b[90m 298 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 299 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at __tests__/integration/logout-websocket.test.tsx:296:45\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout WebSocket Disconnection Tests \u203a WebSocket Security Cleanup \u203a should ensure complete WebSocket session termination\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mLogout\u001b[0m\n          \u001b[36m</button>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 302 |\u001b[39m       \u001b[36mawait\u001b[39m verifyWebSocketSecurity()\u001b[33m;\u001b[39m\n     \u001b[90m 303 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 304 |\u001b[39m         expect(webSocketService\u001b[33m.\u001b[39mdisconnect)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 305 |\u001b[39m         expect(mockAuthStore\u001b[33m.\u001b[39mreset)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m 306 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 307 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at __tests__/integration/logout-websocket.test.tsx:304:45\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\nPASS Integration Tests __tests__/integration/security-auth.test.tsx\n  OAuth Secrets Management\n    \u221a should handle OAuth token refresh (17 ms)\n    \u221a should manage secrets securely (30 ms)\n  Security Service Integration\n    \u221a should validate user permissions for protected resources (30 ms)\n    \u221a should handle security token rotation (31 ms)\n  Key Manager Integration\n    \u221a should manage API keys lifecycle (29 ms)\n    \u221a should revoke compromised keys (31 ms)\n  Admin Functionality Integration\n    \u221a should manage user roles and permissions (31 ms)\n    \u221a should access admin-only endpoints with proper auth (32 ms)\n\nPASS Integration Tests __tests__/integration/critical/state-sync.test.tsx\n  State Synchronization\n    Server State Sync\n      \u221a should sync local state with server state (2 ms)\n      \u221a should handle concurrent state updates (25 ms)\n\nFAIL Integration Tests __tests__/auth/logout-state-cleanup-complete.test.tsx (21.563 s)\n  Logout State Cleanup Complete Tests\n    Token Removal Verification\n      \u00d7 should remove JWT token from localStorage (1056 ms)\n      \u00d7 should remove auth token from localStorage (1016 ms)\n      \u00d7 should clear refresh token completely (1013 ms)\n      \u00d7 should remove session tokens from sessionStorage (1009 ms)\n    Memory State Cleanup\n      \u00d7 should clear user object from memory (1011 ms)\n      \u00d7 should reset authentication status (1010 ms)\n      \u00d7 should clear token from memory (1009 ms)\n      \u00d7 should reset all auth store state (1014 ms)\n    LocalStorage Complete Cleanup\n      \u00d7 should remove user preferences from storage (1009 ms)\n      \u00d7 should clear cached user data (1006 ms)\n      \u00d7 should remove remember me settings (1017 ms)\n      \u00d7 should preserve non-auth localStorage items (1016 ms)\n    Memory Leak Prevention\n      \u00d7 should clear all user-specific data from memory (1008 ms)\n      \u00d7 should reset error states to prevent leaks (1008 ms)\n      \u00d7 should reset loading states completely (1017 ms)\n      \u00d7 should clear cached API responses (1005 ms)\n    Performance and Timing\n      \u00d7 should complete cleanup within 100ms (1016 ms)\n      \u00d7 should not block UI during cleanup (1011 ms)\n      \u00d7 should handle rapid logout requests efficiently (240 ms)\n      \u00d7 should maintain consistent cleanup time under load (1006 ms)\n\n  \u25cf Logout State Cleanup Complete Tests \u203a Token Removal Verification \u203a should remove JWT token from localStorage\n\n    Unable to find an element by: [data-testid=\"logout-button\"]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div />\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n    \u001b[0m \u001b[90m 139 |\u001b[39m       \u001b[36mconst\u001b[39m user \u001b[33m=\u001b[39m userEvent\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 140 |\u001b[39m       renderLogoutComponent()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 141 |\u001b[39m       \u001b[36mconst\u001b[39m logoutBtn \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m screen\u001b[33m.\u001b[39mfindByTestId(\u001b[32m'logout-button'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 142 |\u001b[39m       \u001b[36mawait\u001b[39m user\u001b[33m.\u001b[39mclick(logoutBtn)\u001b[33m;\u001b[39m\n     \u001b[90m 143 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 144 |\u001b[39m\u001b[0m\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at node_modules/@testing-library/dom/dist/query-helpers.js:86:33\n      at triggerLogout (__tests__/auth/logout-state-cleanup-complete.test.tsx:141:38)\n      at __tests__/auth/logout-state-cleanup-complete.test.tsx:147:15\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.<anonymous> (__tests__/auth/logout-state-cleanup-complete.test.tsx:146:16)\n\n  \u25cf Logout State Cleanup Complete Tests \u203a Token Removal Verification \u203a should remove auth token from localStorage\n\n    Unable to find an element by: [data-testid=\"logout-button\"]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div />\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n    \u001b[0m \u001b[90m 139 |\u001b[39m       \u001b[36mconst\u001b[39m user \u001b[33m=\u001b[39m userEvent\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 140 |\u001b[39m       renderLogoutComponent()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 141 |\u001b[39m       \u001b[36mconst\u001b[39m logoutBtn \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m screen\u001b[33m.\u001b[39mfindByTestId(\u001b[32m'logout-button'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 142 |\u001b[39m       \u001b[36mawait\u001b[39m user\u001b[33m.\u001b[39mclick(logoutBtn)\u001b[33m;\u001b[39m\n     \u001b[90m 143 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 144 |\u001b[39m\u001b[0m\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at node_modules/@testing-library/dom/dist/query-helpers.js:86:33\n      at triggerLogout (__tests__/auth/logout-state-cleanup-complete.test.tsx:141:38)\n      at __tests__/auth/logout-state-cleanup-complete.test.tsx:156:15\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.<anonymous> (__tests__/auth/logout-state-cleanup-complete.test.tsx:155:16)\n\n  \u25cf Logout State Cleanup Complete Tests \u203a Token Removal Verification \u203a should clear refresh token completely\n\n    Unable to find an element by: [data-testid=\"logout-button\"]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div />\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n    \u001b[0m \u001b[90m 139 |\u001b[39m       \u001b[36mconst\u001b[39m user \u001b[33m=\u001b[39m userEvent\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 140 |\u001b[39m       renderLogoutComponent()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 141 |\u001b[39m       \u001b[36mconst\u001b[39m logoutBtn \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m screen\u001b[33m.\u001b[39mfindByTestId(\u001b[32m'logout-button'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 142 |\u001b[39m       \u001b[36mawait\u001b[39m user\u001b[33m.\u001b[39mclick(logoutBtn)\u001b[33m;\u001b[39m\n     \u001b[90m 143 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 144 |\u001b[39m\u001b[0m\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at node_modules/@testing-library/dom/dist/query-helpers.js:86:33\n      at triggerLogout (__tests__/auth/logout-state-cleanup-complete.test.tsx:141:38)\n      at __tests__/auth/logout-state-cleanup-complete.test.tsx:165:15\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.<anonymous> (__tests__/auth/logout-state-cleanup-complete.test.tsx:164:16)\n\n  \u25cf Logout State Cleanup Complete Tests \u203a Token Removal Verification \u203a should remove session tokens from sessionStorage\n\n    Unable to find an element by: [data-testid=\"logout-button\"]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div />\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n    \u001b[0m \u001b[90m 139 |\u001b[39m       \u001b[36mconst\u001b[39m user \u001b[33m=\u001b[39m userEvent\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 140 |\u001b[39m       renderLogoutComponent()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 141 |\u001b[39m       \u001b[36mconst\u001b[39m logoutBtn \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m screen\u001b[33m.\u001b[39mfindByTestId(\u001b[32m'logout-button'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 142 |\u001b[39m       \u001b[36mawait\u001b[39m user\u001b[33m.\u001b[39mclick(logoutBtn)\u001b[33m;\u001b[39m\n     \u001b[90m 143 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 144 |\u001b[39m\u001b[0m\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at node_modules/@testing-library/dom/dist/query-helpers.js:86:33\n      at triggerLogout (__tests__/auth/logout-state-cleanup-complete.test.tsx:141:38)\n      at __tests__/auth/logout-state-cleanup-complete.test.tsx:174:15\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.<anonymous> (__tests__/auth/logout-state-cleanup-complete.test.tsx:173:16)\n\n  \u25cf Logout State Cleanup Complete Tests \u203a Memory State Cleanup \u203a should clear user object from memory\n\n    Unable to find an element by: [data-testid=\"logout-button\"]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div />\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n    \u001b[0m \u001b[90m 185 |\u001b[39m       \u001b[36mconst\u001b[39m user \u001b[33m=\u001b[39m userEvent\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 186 |\u001b[39m       renderLogoutComponent()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 187 |\u001b[39m       \u001b[36mconst\u001b[39m logoutBtn \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m screen\u001b[33m.\u001b[39mfindByTestId(\u001b[32m'logout-button'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 188 |\u001b[39m       \u001b[36mawait\u001b[39m user\u001b[33m.\u001b[39mclick(logoutBtn)\u001b[33m;\u001b[39m\n     \u001b[90m 189 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 190 |\u001b[39m\u001b[0m\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at node_modules/@testing-library/dom/dist/query-helpers.js:86:33\n      at executeMemoryCleanup (__tests__/auth/logout-state-cleanup-complete.test.tsx:187:38)\n      at __tests__/auth/logout-state-cleanup-complete.test.tsx:193:15\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.<anonymous> (__tests__/auth/logout-state-cleanup-complete.test.tsx:192:16)\n\n  \u25cf Logout State Cleanup Complete Tests \u203a Memory State Cleanup \u203a should reset authentication status\n\n    Unable to find an element by: [data-testid=\"logout-button\"]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div />\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n    \u001b[0m \u001b[90m 185 |\u001b[39m       \u001b[36mconst\u001b[39m user \u001b[33m=\u001b[39m userEvent\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 186 |\u001b[39m       renderLogoutComponent()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 187 |\u001b[39m       \u001b[36mconst\u001b[39m logoutBtn \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m screen\u001b[33m.\u001b[39mfindByTestId(\u001b[32m'logout-button'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 188 |\u001b[39m       \u001b[36mawait\u001b[39m user\u001b[33m.\u001b[39mclick(logoutBtn)\u001b[33m;\u001b[39m\n     \u001b[90m 189 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 190 |\u001b[39m\u001b[0m\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at node_modules/@testing-library/dom/dist/query-helpers.js:86:33\n      at executeMemoryCleanup (__tests__/auth/logout-state-cleanup-complete.test.tsx:187:38)\n      at __tests__/auth/logout-state-cleanup-complete.test.tsx:203:15\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.<anonymous> (__tests__/auth/logout-state-cleanup-complete.test.tsx:202:16)\n\n  \u25cf Logout State Cleanup Complete Tests \u203a Memory State Cleanup \u203a should clear token from memory\n\n    Unable to find an element by: [data-testid=\"logout-button\"]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div />\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n    \u001b[0m \u001b[90m 185 |\u001b[39m       \u001b[36mconst\u001b[39m user \u001b[33m=\u001b[39m userEvent\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 186 |\u001b[39m       renderLogoutComponent()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 187 |\u001b[39m       \u001b[36mconst\u001b[39m logoutBtn \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m screen\u001b[33m.\u001b[39mfindByTestId(\u001b[32m'logout-button'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 188 |\u001b[39m       \u001b[36mawait\u001b[39m user\u001b[33m.\u001b[39mclick(logoutBtn)\u001b[33m;\u001b[39m\n     \u001b[90m 189 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 190 |\u001b[39m\u001b[0m\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at node_modules/@testing-library/dom/dist/query-helpers.js:86:33\n      at executeMemoryCleanup (__tests__/auth/logout-state-cleanup-complete.test.tsx:187:38)\n      at __tests__/auth/logout-state-cleanup-complete.test.tsx:212:15\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.<anonymous> (__tests__/auth/logout-state-cleanup-complete.test.tsx:211:16)\n\n  \u25cf Logout State Cleanup Complete Tests \u203a Memory State Cleanup \u203a should reset all auth store state\n\n    Unable to find an element by: [data-testid=\"logout-button\"]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div />\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n    \u001b[0m \u001b[90m 185 |\u001b[39m       \u001b[36mconst\u001b[39m user \u001b[33m=\u001b[39m userEvent\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 186 |\u001b[39m       renderLogoutComponent()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 187 |\u001b[39m       \u001b[36mconst\u001b[39m logoutBtn \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m screen\u001b[33m.\u001b[39mfindByTestId(\u001b[32m'logout-button'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 188 |\u001b[39m       \u001b[36mawait\u001b[39m user\u001b[33m.\u001b[39mclick(logoutBtn)\u001b[33m;\u001b[39m\n     \u001b[90m 189 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 190 |\u001b[39m\u001b[0m\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at node_modules/@testing-library/dom/dist/query-helpers.js:86:33\n      at executeMemoryCleanup (__tests__/auth/logout-state-cleanup-complete.test.tsx:187:38)\n      at __tests__/auth/logout-state-cleanup-complete.test.tsx:221:15\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.<anonymous> (__tests__/auth/logout-state-cleanup-complete.test.tsx:220:16)\n\n  \u25cf Logout State Cleanup Complete Tests \u203a LocalStorage Complete Cleanup \u203a should remove user preferences from storage\n\n    Unable to find an element by: [data-testid=\"logout-button\"]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div />\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n    \u001b[0m \u001b[90m 232 |\u001b[39m       \u001b[36mconst\u001b[39m user \u001b[33m=\u001b[39m userEvent\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 233 |\u001b[39m       renderLogoutComponent()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 234 |\u001b[39m       \u001b[36mconst\u001b[39m logoutBtn \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m screen\u001b[33m.\u001b[39mfindByTestId(\u001b[32m'logout-button'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 235 |\u001b[39m       \u001b[36mawait\u001b[39m user\u001b[33m.\u001b[39mclick(logoutBtn)\u001b[33m;\u001b[39m\n     \u001b[90m 236 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 237 |\u001b[39m\u001b[0m\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at node_modules/@testing-library/dom/dist/query-helpers.js:86:33\n      at verifyLocalStorageCleanup (__tests__/auth/logout-state-cleanup-complete.test.tsx:234:38)\n      at __tests__/auth/logout-state-cleanup-complete.test.tsx:240:15\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.<anonymous> (__tests__/auth/logout-state-cleanup-complete.test.tsx:239:16)\n\n  \u25cf Logout State Cleanup Complete Tests \u203a LocalStorage Complete Cleanup \u203a should clear cached user data\n\n    Unable to find an element by: [data-testid=\"logout-button\"]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div />\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n    \u001b[0m \u001b[90m 232 |\u001b[39m       \u001b[36mconst\u001b[39m user \u001b[33m=\u001b[39m userEvent\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 233 |\u001b[39m       renderLogoutComponent()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 234 |\u001b[39m       \u001b[36mconst\u001b[39m logoutBtn \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m screen\u001b[33m.\u001b[39mfindByTestId(\u001b[32m'logout-button'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 235 |\u001b[39m       \u001b[36mawait\u001b[39m user\u001b[33m.\u001b[39mclick(logoutBtn)\u001b[33m;\u001b[39m\n     \u001b[90m 236 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 237 |\u001b[39m\u001b[0m\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at node_modules/@testing-library/dom/dist/query-helpers.js:86:33\n      at verifyLocalStorageCleanup (__tests__/auth/logout-state-cleanup-complete.test.tsx:234:38)\n      at __tests__/auth/logout-state-cleanup-complete.test.tsx:249:15\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.<anonymous> (__tests__/auth/logout-state-cleanup-complete.test.tsx:248:16)\n\n  \u25cf Logout State Cleanup Complete Tests \u203a LocalStorage Complete Cleanup \u203a should remove remember me settings\n\n    Unable to find an element by: [data-testid=\"logout-button\"]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div />\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n    \u001b[0m \u001b[90m 232 |\u001b[39m       \u001b[36mconst\u001b[39m user \u001b[33m=\u001b[39m userEvent\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 233 |\u001b[39m       renderLogoutComponent()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 234 |\u001b[39m       \u001b[36mconst\u001b[39m logoutBtn \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m screen\u001b[33m.\u001b[39mfindByTestId(\u001b[32m'logout-button'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 235 |\u001b[39m       \u001b[36mawait\u001b[39m user\u001b[33m.\u001b[39mclick(logoutBtn)\u001b[33m;\u001b[39m\n     \u001b[90m 236 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 237 |\u001b[39m\u001b[0m\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at node_modules/@testing-library/dom/dist/query-helpers.js:86:33\n      at verifyLocalStorageCleanup (__tests__/auth/logout-state-cleanup-complete.test.tsx:234:38)\n      at __tests__/auth/logout-state-cleanup-complete.test.tsx:258:15\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.<anonymous> (__tests__/auth/logout-state-cleanup-complete.test.tsx:257:16)\n\n  \u25cf Logout State Cleanup Complete Tests \u203a LocalStorage Complete Cleanup \u203a should preserve non-auth localStorage items\n\n    Unable to find an element by: [data-testid=\"logout-button\"]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div />\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n    \u001b[0m \u001b[90m 232 |\u001b[39m       \u001b[36mconst\u001b[39m user \u001b[33m=\u001b[39m userEvent\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 233 |\u001b[39m       renderLogoutComponent()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 234 |\u001b[39m       \u001b[36mconst\u001b[39m logoutBtn \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m screen\u001b[33m.\u001b[39mfindByTestId(\u001b[32m'logout-button'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 235 |\u001b[39m       \u001b[36mawait\u001b[39m user\u001b[33m.\u001b[39mclick(logoutBtn)\u001b[33m;\u001b[39m\n     \u001b[90m 236 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 237 |\u001b[39m\u001b[0m\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at node_modules/@testing-library/dom/dist/query-helpers.js:86:33\n      at verifyLocalStorageCleanup (__tests__/auth/logout-state-cleanup-complete.test.tsx:234:38)\n      at __tests__/auth/logout-state-cleanup-complete.test.tsx:271:15\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.<anonymous> (__tests__/auth/logout-state-cleanup-complete.test.tsx:270:16)\n\n  \u25cf Logout State Cleanup Complete Tests \u203a Memory Leak Prevention \u203a should clear all user-specific data from memory\n\n    Unable to find an element by: [data-testid=\"logout-button\"]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div />\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n    \u001b[0m \u001b[90m 280 |\u001b[39m       \u001b[36mconst\u001b[39m user \u001b[33m=\u001b[39m userEvent\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 281 |\u001b[39m       renderLogoutComponent()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 282 |\u001b[39m       \u001b[36mconst\u001b[39m logoutBtn \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m screen\u001b[33m.\u001b[39mfindByTestId(\u001b[32m'logout-button'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 283 |\u001b[39m       \u001b[36mawait\u001b[39m user\u001b[33m.\u001b[39mclick(logoutBtn)\u001b[33m;\u001b[39m\n     \u001b[90m 284 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 285 |\u001b[39m\u001b[0m\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at node_modules/@testing-library/dom/dist/query-helpers.js:86:33\n      at testMemoryLeakPrevention (__tests__/auth/logout-state-cleanup-complete.test.tsx:282:38)\n      at __tests__/auth/logout-state-cleanup-complete.test.tsx:288:15\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.<anonymous> (__tests__/auth/logout-state-cleanup-complete.test.tsx:287:16)\n\n  \u25cf Logout State Cleanup Complete Tests \u203a Memory Leak Prevention \u203a should reset error states to prevent leaks\n\n    Unable to find an element by: [data-testid=\"logout-button\"]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div />\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n    \u001b[0m \u001b[90m 280 |\u001b[39m       \u001b[36mconst\u001b[39m user \u001b[33m=\u001b[39m userEvent\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 281 |\u001b[39m       renderLogoutComponent()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 282 |\u001b[39m       \u001b[36mconst\u001b[39m logoutBtn \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m screen\u001b[33m.\u001b[39mfindByTestId(\u001b[32m'logout-button'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 283 |\u001b[39m       \u001b[36mawait\u001b[39m user\u001b[33m.\u001b[39mclick(logoutBtn)\u001b[33m;\u001b[39m\n     \u001b[90m 284 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 285 |\u001b[39m\u001b[0m\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at node_modules/@testing-library/dom/dist/query-helpers.js:86:33\n      at testMemoryLeakPrevention (__tests__/auth/logout-state-cleanup-complete.test.tsx:282:38)\n      at __tests__/auth/logout-state-cleanup-complete.test.tsx:298:15\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.<anonymous> (__tests__/auth/logout-state-cleanup-complete.test.tsx:297:16)\n\n  \u25cf Logout State Cleanup Complete Tests \u203a Memory Leak Prevention \u203a should reset loading states completely\n\n    Unable to find an element by: [data-testid=\"logout-button\"]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div />\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n    \u001b[0m \u001b[90m 280 |\u001b[39m       \u001b[36mconst\u001b[39m user \u001b[33m=\u001b[39m userEvent\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 281 |\u001b[39m       renderLogoutComponent()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 282 |\u001b[39m       \u001b[36mconst\u001b[39m logoutBtn \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m screen\u001b[33m.\u001b[39mfindByTestId(\u001b[32m'logout-button'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 283 |\u001b[39m       \u001b[36mawait\u001b[39m user\u001b[33m.\u001b[39mclick(logoutBtn)\u001b[33m;\u001b[39m\n     \u001b[90m 284 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 285 |\u001b[39m\u001b[0m\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at node_modules/@testing-library/dom/dist/query-helpers.js:86:33\n      at testMemoryLeakPrevention (__tests__/auth/logout-state-cleanup-complete.test.tsx:282:38)\n      at __tests__/auth/logout-state-cleanup-complete.test.tsx:307:15\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.<anonymous> (__tests__/auth/logout-state-cleanup-complete.test.tsx:306:16)\n\n  \u25cf Logout State Cleanup Complete Tests \u203a Memory Leak Prevention \u203a should clear cached API responses\n\n    Unable to find an element by: [data-testid=\"logout-button\"]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div />\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n    \u001b[0m \u001b[90m 280 |\u001b[39m       \u001b[36mconst\u001b[39m user \u001b[33m=\u001b[39m userEvent\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 281 |\u001b[39m       renderLogoutComponent()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 282 |\u001b[39m       \u001b[36mconst\u001b[39m logoutBtn \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m screen\u001b[33m.\u001b[39mfindByTestId(\u001b[32m'logout-button'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 283 |\u001b[39m       \u001b[36mawait\u001b[39m user\u001b[33m.\u001b[39mclick(logoutBtn)\u001b[33m;\u001b[39m\n     \u001b[90m 284 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 285 |\u001b[39m\u001b[0m\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at node_modules/@testing-library/dom/dist/query-helpers.js:86:33\n      at testMemoryLeakPrevention (__tests__/auth/logout-state-cleanup-complete.test.tsx:282:38)\n      at __tests__/auth/logout-state-cleanup-complete.test.tsx:316:15\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.<anonymous> (__tests__/auth/logout-state-cleanup-complete.test.tsx:315:16)\n\n  \u25cf Logout State Cleanup Complete Tests \u203a Performance and Timing \u203a should complete cleanup within 100ms\n\n    Unable to find an element by: [data-testid=\"logout-button\"]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div />\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n    \u001b[0m \u001b[90m 328 |\u001b[39m       \u001b[36mconst\u001b[39m user \u001b[33m=\u001b[39m userEvent\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 329 |\u001b[39m       renderLogoutComponent()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 330 |\u001b[39m       \u001b[36mconst\u001b[39m logoutBtn \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m screen\u001b[33m.\u001b[39mfindByTestId(\u001b[32m'logout-button'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 331 |\u001b[39m       \u001b[36mawait\u001b[39m user\u001b[33m.\u001b[39mclick(logoutBtn)\u001b[33m;\u001b[39m\n     \u001b[90m 332 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n     \u001b[90m 333 |\u001b[39m         expect(mockAuthStore\u001b[33m.\u001b[39mlogout)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\u001b[0m\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at node_modules/@testing-library/dom/dist/query-helpers.js:86:33\n      at measureCleanupPerformance (__tests__/auth/logout-state-cleanup-complete.test.tsx:330:38)\n      at __tests__/auth/logout-state-cleanup-complete.test.tsx:340:22\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.<anonymous> (__tests__/auth/logout-state-cleanup-complete.test.tsx:339:36)\n\n  \u25cf Logout State Cleanup Complete Tests \u203a Performance and Timing \u203a should not block UI during cleanup\n\n    Unable to find an element by: [data-testid=\"logout-button\"]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div />\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n    \u001b[0m \u001b[90m 328 |\u001b[39m       \u001b[36mconst\u001b[39m user \u001b[33m=\u001b[39m userEvent\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 329 |\u001b[39m       renderLogoutComponent()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 330 |\u001b[39m       \u001b[36mconst\u001b[39m logoutBtn \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m screen\u001b[33m.\u001b[39mfindByTestId(\u001b[32m'logout-button'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 331 |\u001b[39m       \u001b[36mawait\u001b[39m user\u001b[33m.\u001b[39mclick(logoutBtn)\u001b[33m;\u001b[39m\n     \u001b[90m 332 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n     \u001b[90m 333 |\u001b[39m         expect(mockAuthStore\u001b[33m.\u001b[39mlogout)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\u001b[0m\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at node_modules/@testing-library/dom/dist/query-helpers.js:86:33\n      at measureCleanupPerformance (__tests__/auth/logout-state-cleanup-complete.test.tsx:330:38)\n      at __tests__/auth/logout-state-cleanup-complete.test.tsx:347:22\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.<anonymous> (__tests__/auth/logout-state-cleanup-complete.test.tsx:346:36)\n\n  \u25cf Logout State Cleanup Complete Tests \u203a Performance and Timing \u203a should handle rapid logout requests efficiently\n\n    expect(received).toBeLessThan(expected)\n\n    Expected: < 75\n    Received:   223.19919999999547\n\n    \u001b[0m \u001b[90m 366 |\u001b[39m       \n     \u001b[90m 367 |\u001b[39m       \u001b[36mconst\u001b[39m endTime \u001b[33m=\u001b[39m performance\u001b[33m.\u001b[39mnow()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 368 |\u001b[39m       expect(endTime \u001b[33m-\u001b[39m startTime)\u001b[33m.\u001b[39mtoBeLessThan(\u001b[35m75\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 369 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 370 |\u001b[39m\n     \u001b[90m 371 |\u001b[39m     it(\u001b[32m'should maintain consistent cleanup time under load'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.<anonymous> (__tests__/auth/logout-state-cleanup-complete.test.tsx:368:35)\n\n  \u25cf Logout State Cleanup Complete Tests \u203a Performance and Timing \u203a should maintain consistent cleanup time under load\n\n    Unable to find an element by: [data-testid=\"logout-button\"]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div />\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n    \u001b[0m \u001b[90m 328 |\u001b[39m       \u001b[36mconst\u001b[39m user \u001b[33m=\u001b[39m userEvent\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 329 |\u001b[39m       renderLogoutComponent()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 330 |\u001b[39m       \u001b[36mconst\u001b[39m logoutBtn \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m screen\u001b[33m.\u001b[39mfindByTestId(\u001b[32m'logout-button'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 331 |\u001b[39m       \u001b[36mawait\u001b[39m user\u001b[33m.\u001b[39mclick(logoutBtn)\u001b[33m;\u001b[39m\n     \u001b[90m 332 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n     \u001b[90m 333 |\u001b[39m         expect(mockAuthStore\u001b[33m.\u001b[39mlogout)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\u001b[0m\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at node_modules/@testing-library/dom/dist/query-helpers.js:86:33\n      at measureCleanupPerformance (__tests__/auth/logout-state-cleanup-complete.test.tsx:330:38)\n      at __tests__/auth/logout-state-cleanup-complete.test.tsx:376:24\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.<anonymous> (__tests__/auth/logout-state-cleanup-complete.test.tsx:375:38)\n\nPASS Integration Tests __tests__/integration/logger-integration.test.tsx\n  Logger Integration - Cross-Component Usage\n    Component Logger Usage\n      \u221a logs user actions from components (19 ms)\n      \u221a logs API calls from components (5 ms)\n      \u221a logs WebSocket events from components (8 ms)\n      \u221a logs performance metrics from components (6 ms)\n    Layer Visibility Manager Integration\n      \u221a uses logger group methods for debugging (17 ms)\n    Error Handling Integration\n      \u221a logs errors with proper context (32 ms)\n    Log Buffer Verification\n      \u221a accumulates logs from multiple sources (12 ms)\n    Production Safety\n      \u221a sanitizes sensitive data in logs (7 ms)\n    Multi-Component Orchestration\n      \u221a tracks logs across component hierarchy (7 ms)\n\nPASS Integration Tests __tests__/integration/basic-integration-auth.test.tsx\n  Authentication Integration Tests\n    Authentication Flow\n      \u221a should handle login and authentication (40 ms)\n      \u221a should handle logout and cleanup (16 ms)\n    Error Handling\n      \u221a should handle network errors gracefully (12 ms)\n      \u221a should handle WebSocket disconnection (46 ms)\n\nPASS Integration Tests __tests__/integration/critical/file-upload.test.tsx\n  File Upload Integration\n    Upload Functionality\n      \u221a should upload file and process with agent (3 ms)\n      \u221a should track upload progress (124 ms)\n\nPASS Integration Tests __tests__/integration/critical/performance-monitoring.test.tsx\n  Performance Monitoring Integration\n    Metrics Tracking\n      \u221a should track and report performance metrics (81 ms)\n      \u221a should detect and report performance degradation\n\nPASS Integration Tests __tests__/integration/advanced-integration/collaborative-features.test.tsx\n  Collaborative Features Integration\n    \u221a should sync cursor positions in real-time (32 ms)\n    \u221a should handle presence and activity status (45 ms)\n    \u221a should handle conflict resolution in collaborative editing (15 ms)\n    \u221a should maintain operation history for undo/redo (13 ms)\n    \u221a should handle collaborative document versioning (21 ms)\n\nPASS Integration Tests __tests__/integration/critical/message-streaming.test.tsx\n  Real-time Message Streaming\n    Streaming Integration\n      \u221a should stream agent responses to chat (92 ms)\n      \u221a should handle message interruption gracefully (6 ms)\n\nPASS Integration Tests __tests__/integration/advanced-integration/navigation.test.tsx\n  Advanced Frontend Integration Tests - Navigation\n    20. Complex Navigation Flows\n      \u221a should handle deep linking with state preservation (19 ms)\n      \u221a should handle protected route redirects (15 ms)\n\nPASS Integration Tests __tests__/integration/route-guards.test.tsx\n  Route Guards Integration Tests\n    Authentication-Required Routes\n      \u221a should redirect unauthenticated users to login (13 ms)\n      \u221a should allow authenticated users access to basic routes (3 ms)\n      \u221a should maintain auth state across route changes (13 ms)\n      \u221a should handle auth token expiration during navigation (15 ms)\n    Tier-Based Access Control\n      \u221a should block Free users from Early tier features (2 ms)\n      \u221a should allow Early users access to Early tier features (1 ms)\n      \u221a should block Early users from Mid tier features (2 ms)\n      \u221a should allow Mid users access to Mid tier features (2 ms)\n      \u221a should block Mid users from Enterprise features (2 ms)\n      \u221a should allow Enterprise users access to all features (2 ms)\n    Dynamic Route Protection\n      \u221a should protect dynamic thread routes (2 ms)\n      \u221a should allow access to user-owned threads (1 ms)\n      \u221a should block access to threads from higher tiers (2 ms)\n      \u221a should handle invalid thread IDs gracefully\n    Route Redirect Flows\n      \u221a should redirect to intended page after login (1 ms)\n      \u221a should redirect to appropriate home based on user tier\n      \u221a should handle logout redirects properly (1 ms)\n      \u221a should preserve query parameters during redirects (1 ms)\n    Error Handling and Edge Cases\n      \u221a should handle network errors during auth checks (2 ms)\n      \u221a should handle concurrent auth state changes (70 ms)\n      \u221a should handle malformed auth tokens gracefully\n      \u221a should prevent infinite redirect loops (3 ms)\n\nPASS Integration Tests __tests__/auth/auth-components-features.test.tsx\n  Auth Components Features\n    Edge Cases\n      \u221a should handle user with no name or email (14 ms)\n      \u221a should handle undefined auth config gracefully (5 ms)\n      \u221a should handle rapid state changes (8 ms)\n      \u221a should handle empty string user names (4 ms)\n    Accessibility\n      \u221a should have accessible button roles (17 ms)\n      \u221a should properly disable button when loading (4 ms)\n      \u221a should have proper button text for screen readers (6 ms)\n    Layout and Styling\n      \u221a should apply correct layout classes for logged in state (4 ms)\n      \u221a should apply correct text styling for user name (5 ms)\n      \u221a should apply correct layout for dev mode buttons (4 ms)\n    Integration Tests\n      \u221a should handle complete login flow (11 ms)\n      \u221a should handle complete logout flow (5 ms)\n\nPASS Integration Tests __tests__/integration/tool-lifecycle-integration.test.ts\n  Tool Lifecycle Integration\n    \u221a should handle complete tool lifecycle: start -> display -> timeout -> cleanup (8 ms)\n    \u221a should prevent duplicate tools from being added (4 ms)\n    \u221a should handle multiple tools simultaneously (5 ms)\n    \u221a should maintain backward compatibility with legacy activeTools array (3 ms)\n\nPASS Integration Tests __tests__/integration/critical/keyboard-shortcuts.test.tsx\n  Keyboard Shortcuts Integration\n    Global Shortcuts\n      \u221a should handle global keyboard shortcuts (8 ms)\n      \u221a should prevent shortcut conflicts in input fields (3 ms)\n\nPASS Integration Tests __tests__/services/reconciliation-cleanup.test.ts\n  Reconciliation Cleanup Fix\n    \u221a should execute cleanup without \"this.cleanup is not a function\" error (42 ms)\n    \u221a should handle multiple cleanup cycles without errors (19 ms)\n    \u221a should properly clean up expired messages (8 ms)\n    \u221a should maintain proper context binding in cleanup callback (6 ms)\n\nPASS Integration Tests __tests__/services/messageService.test.ts\n  MessageService\n    Thread Management\n      \u221a should create a new thread (2 ms)\n      \u221a should fetch threads for a user (1 ms)\n      \u221a should handle thread fetch errors (38 ms)\n    Message Persistence\n      \u221a should save a message to the server (1 ms)\n      \u221a should fetch messages for a thread (1 ms)\n      \u221a should handle pagination for large message lists (2 ms)\n    Local Cache Management\n      \u221a should cache messages locally (1 ms)\n      \u221a should sync local cache with server (1 ms)\n      \u221a should handle offline mode (1 ms)\n      \u221a should retry failed message sends (12 ms)\n    Thread State Management\n      \u221a should save thread state (1 ms)\n      \u221a should update thread metadata\n\nPASS Integration Tests __tests__/integration/task-processing-integration.test.tsx\n  Task Processing Integration Test Suite\n    \u221a should reference modular task processing architecture (2 ms)\n    \u221a should maintain Enterprise background processing standards\n\nPASS Integration Tests __tests__/integration/critical/accessibility.test.tsx\n  Accessibility Integration\n    Focus Management\n      \u221a should maintain focus management during navigation (18 ms)\n      \u221a should announce dynamic content updates to screen readers (4 ms)\n\nPASS Integration Tests __tests__/integration/critical/agent-provider.test.tsx\n  Agent Provider Integration\n    Agent State Coordination\n      \u221a should coordinate agent state with WebSocket messages (10 ms)\n      \u221a should sync agent reports with chat messages (5 ms)\n\nPASS Integration Tests __tests__/integration/error-tracing-integration.test.tsx\n  Error Tracing Integration Test Suite\n    \u221a should reference modular error tracing architecture (1 ms)\n    \u221a should maintain Enterprise observability standards (1 ms)\n\nPASS Integration Tests __tests__/integration/tool-lifecycle-integration-simple.test.ts\n  Tool Lifecycle Integration - Simplified\n    Tool Status Management\n      \u221a should create and track tool status (1 ms)\n      \u221a should update tool statuses array correctly (1 ms)\n      \u221a should remove tools correctly (1 ms)\n      \u221a should convert to active tools array for legacy support\n    Tool Deduplication\n      \u221a should prevent duplicate tools in statuses\n      \u221a should handle similar but different tool names correctly\n\nPASS Integration Tests __tests__/integration/critical/thread-management.test.tsx\n  Thread Management Integration\n    Thread Creation and Message Sync\n      \u221a should create thread and sync with messages (7 ms)\n      \u221a should switch threads and load messages (1 ms)\n\nPASS Integration Tests __tests__/services/messageFormatter.test.ts\n  MessageFormatter Service\n    Content Type Detection\n      \u221a detects markdown content correctly (1 ms)\n      \u221a detects code blocks correctly\n      \u221a detects mixed content correctly (1 ms)\n      \u221a detects plain text correctly\n    Formatting Metadata Creation\n      \u221a creates metadata for markdown content\n      \u221a creates metadata for plain content\n    Content Processing\n      \u221a processes markdown content correctly\n      \u221a handles content normalization\n    Message Enhancement\n      \u221a enhances message with formatting metadata (1 ms)\n    MessageFormatterService\n      \u221a formats single message\n      \u221a formats multiple messages (1 ms)\n      \u221a gets render configuration\n      \u221a validates formatting integrity (1 ms)\n\nPASS Integration Tests __tests__/integration/critical/notifications.test.tsx\n  Notification System Integration\n    Notification Display\n      \u221a should show notifications for important events (5 ms)\n      \u221a should queue notifications when offline (1 ms)\n\nPASS Integration Tests __tests__/integration/infrastructure.test.tsx\n  Infrastructure Integration Test Suite\n    \u221a should reference modular test architecture (1 ms)\n    \u221a should maintain Enterprise reliability standards\n\nFAIL Integration Tests __tests__/integration/comprehensive/performance-benchmarks/index.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module '../test-utils' from '__tests__/integration/comprehensive/performance-benchmarks/render-performance.test.tsx'\n\n    Require stack:\n      __tests__/integration/comprehensive/performance-benchmarks/render-performance.test.tsx\n      __tests__/integration/comprehensive/performance-benchmarks/index.test.tsx\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m  7 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m   \u001b[33mReact\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 10 |\u001b[39m   render\u001b[33m,\u001b[39m\n     \u001b[90m 11 |\u001b[39m   setupTestEnvironment\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/comprehensive/performance-benchmarks/render-performance.test.tsx:8:1)\n      at Object.<anonymous> (__tests__/integration/comprehensive/performance-benchmarks/index.test.tsx:9:1)\n\nPASS Integration Tests __tests__/services/tool-tracking-service.test.ts\n  ToolTrackingService\n    startTool\n      \u221a should start a new tool and notify listeners (6 ms)\n      \u221a should not add duplicate tools (1 ms)\n      \u221a should respect max active tools limit (2 ms)\n    completeTool\n      \u221a should complete a tool and notify listeners (1 ms)\n      \u221a should handle completing non-existent tool gracefully (1 ms)\n    auto-removal timeout\n      \u221a should auto-remove tools after timeout (2 ms)\n      \u221a should not auto-remove manually completed tools (1 ms)\n    cleanup interval\n      \u221a should periodically cleanup expired tools (1 ms)\n    service cleanup\n      \u221a should cleanup all timeouts on service cleanup (1 ms)\n    configuration\n      \u221a should use default configuration when not provided (1 ms)\n      \u221a should merge partial configuration with defaults\n\nPASS Integration Tests __tests__/integration/analytics-integration.test.tsx\n  Analytics Integration Test Suite\n    \u221a should reference modular analytics architecture (1 ms)\n    \u221a should maintain Enterprise data insights standards (1 ms)\n\nFAIL Integration Tests __tests__/integration/comprehensive/performance-benchmarks/render-performance.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module '../test-utils' from '__tests__/integration/comprehensive/performance-benchmarks/render-performance.test.tsx'\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m  7 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m   \u001b[33mReact\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 10 |\u001b[39m   render\u001b[33m,\u001b[39m\n     \u001b[90m 11 |\u001b[39m   setupTestEnvironment\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/comprehensive/performance-benchmarks/render-performance.test.tsx:8:1)\n\nFAIL Integration Tests __tests__/integration/comprehensive/performance-benchmarks/interaction-latency.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module '../test-utils' from '__tests__/integration/comprehensive/performance-benchmarks/interaction-latency.test.tsx'\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m  7 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m   \u001b[33mReact\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 10 |\u001b[39m   render\u001b[33m,\u001b[39m\n     \u001b[90m 11 |\u001b[39m   setupTestEnvironment\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/comprehensive/performance-benchmarks/interaction-latency.test.tsx:8:1)\n\nFAIL Integration Tests __tests__/integration/comprehensive/performance-benchmarks/resource-utilization.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module '../test-utils' from '__tests__/integration/comprehensive/performance-benchmarks/resource-utilization.test.tsx'\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m  7 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m   \u001b[33mReact\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 10 |\u001b[39m   render\u001b[33m,\u001b[39m\n     \u001b[90m 11 |\u001b[39m   setupTestEnvironment\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/comprehensive/performance-benchmarks/resource-utilization.test.tsx:8:1)\n\nFAIL Integration Tests __tests__/integration/comprehensive/performance-benchmarks/concurrent-performance.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module '../test-utils' from '__tests__/integration/comprehensive/performance-benchmarks/concurrent-performance.test.tsx'\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m  7 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m   \u001b[33mReact\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 10 |\u001b[39m   render\u001b[33m,\u001b[39m\n     \u001b[90m 11 |\u001b[39m   act\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/comprehensive/performance-benchmarks/concurrent-performance.test.tsx:8:1)\n\nFAIL Integration Tests __tests__/integration/comprehensive/websocket-resilience.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './test-utils' from '__tests__/integration/comprehensive/websocket-resilience.test.tsx'\n\n    \u001b[0m \u001b[90m  7 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m  8 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 10 |\u001b[39m   \u001b[33mReact\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 11 |\u001b[39m   render\u001b[33m,\u001b[39m\n     \u001b[90m 12 |\u001b[39m   waitFor\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/comprehensive/websocket-resilience.test.tsx:9:1)\n\nFAIL Integration Tests __tests__/integration/comprehensive/user-journey.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './user-journey-utils' from '__tests__/integration/comprehensive/user-journey.test.tsx'\n\n    \u001b[0m \u001b[90m 4 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m 5 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 6 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 7 |\u001b[39m   \u001b[33mReact\u001b[39m\u001b[33m,\u001b[39m render\u001b[33m,\u001b[39m waitFor\u001b[33m,\u001b[39m fireEvent\u001b[33m,\u001b[39m \u001b[33mTEST_TIMEOUTS\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 8 |\u001b[39m   setupUserJourneyTest\u001b[33m,\u001b[39m teardownUserJourneyTest\u001b[33m,\u001b[39m\n     \u001b[90m 9 |\u001b[39m   createMockWebSocketServer\u001b[33m,\u001b[39m createWebSocketMessage\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/comprehensive/user-journey.test.tsx:6:1)\n\nFAIL Integration Tests __tests__/integration/critical/websocket-auth.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module '../../shared/unified-test-utilities' from '__tests__/integration/critical/websocket-auth.test.tsx'\n\n    \u001b[0m \u001b[90m 13 |\u001b[39m\n     \u001b[90m 14 |\u001b[39m \u001b[90m// Import unified test utilities\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 15 |\u001b[39m \u001b[36mimport\u001b[39m { renderWithProviders\u001b[33m,\u001b[39m waitForElement\u001b[33m,\u001b[39m safeAsync\u001b[33m,\u001b[39m resetAllMocks } \u001b[36mfrom\u001b[39m \u001b[32m'../../shared/unified-test-utilities'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 16 |\u001b[39m \u001b[36mimport\u001b[39m { safeAct\u001b[33m,\u001b[39m waitForCondition\u001b[33m,\u001b[39m flushPromises } \u001b[36mfrom\u001b[39m \u001b[32m'../../helpers/test-timing-utilities'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 17 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mTestProviders\u001b[39m\u001b[33m,\u001b[39m mockWebSocketContextValue } \u001b[36mfrom\u001b[39m \u001b[32m'../../setup/test-providers'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 18 |\u001b[39m \u001b[36mimport\u001b[39m { createTestUser\u001b[33m,\u001b[39m createMockToken\u001b[33m,\u001b[39m setAuthenticatedState\u001b[33m,\u001b[39m setupMockFetchForConfig } \u001b[36mfrom\u001b[39m \u001b[32m'../../helpers/test-setup-helpers'\u001b[39m\u001b[33m;\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/critical/websocket-auth.test.tsx:15:1)\n\nFAIL Integration Tests __tests__/integration/comprehensive/interactive-features.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './interactive-features-utils' from '__tests__/integration/comprehensive/interactive-features.test.tsx'\n\n    \u001b[0m \u001b[90m 4 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m 5 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 6 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 7 |\u001b[39m   \u001b[33mReact\u001b[39m\u001b[33m,\u001b[39m render\u001b[33m,\u001b[39m waitFor\u001b[33m,\u001b[39m fireEvent\u001b[33m,\u001b[39m \u001b[33mTEST_TIMEOUTS\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 8 |\u001b[39m   setupInteractiveTest\u001b[33m,\u001b[39m teardownInteractiveTest\u001b[33m,\u001b[39m\n     \u001b[90m 9 |\u001b[39m   waitForUserInteraction\u001b[33m,\u001b[39m getMovementDirection\u001b[33m,\u001b[39m calculateNewPosition\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/comprehensive/interactive-features.test.tsx:6:1)\n\nFAIL Integration Tests __tests__/integration/critical/error-recovery-refactored.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module '../../helpers/test-setup-helpers' from '__tests__/integration/critical/error-recovery-refactored.test.tsx'\n\n    \u001b[0m \u001b[90m 14 |\u001b[39m \u001b[90m// Import test utilities\u001b[39m\n     \u001b[90m 15 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mTestProviders\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'../../test-utils/providers'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 16 |\u001b[39m \u001b[36mimport\u001b[39m { setupTestEnvironment\u001b[33m,\u001b[39m cleanupTestEnvironment\u001b[33m,\u001b[39m resetTestStores\u001b[33m,\u001b[39m clearTestStorage } \u001b[36mfrom\u001b[39m \u001b[32m'../../helpers/test-setup-helpers'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 17 |\u001b[39m \u001b[36mimport\u001b[39m { createExpiredToken\u001b[33m,\u001b[39m setupRetryFetchMock } \u001b[36mfrom\u001b[39m \u001b[32m'../../helpers/test-mock-helpers'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 18 |\u001b[39m \u001b[36mimport\u001b[39m { retryWithBackoff } \u001b[36mfrom\u001b[39m \u001b[32m'../../helpers/test-async-helpers'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 19 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mConnectionRecoveryComponent\u001b[39m\u001b[33m,\u001b[39m \u001b[33mAuthStatusComponent\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'../../helpers/test-component-helpers'\u001b[39m\u001b[33m;\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/critical/error-recovery-refactored.test.tsx:16:1)\n\nFAIL Integration Tests __tests__/integration/comprehensive/user-journey-errors.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './user-journey-utils' from '__tests__/integration/comprehensive/user-journey-errors.test.tsx'\n\n    \u001b[0m \u001b[90m 4 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m 5 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 6 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 7 |\u001b[39m   \u001b[33mReact\u001b[39m\u001b[33m,\u001b[39m render\u001b[33m,\u001b[39m waitFor\u001b[33m,\u001b[39m fireEvent\u001b[33m,\u001b[39m \u001b[33mTEST_TIMEOUTS\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 8 |\u001b[39m   setupUserJourneyTest\u001b[33m,\u001b[39m teardownUserJourneyTest\u001b[33m,\u001b[39m\n     \u001b[90m 9 |\u001b[39m   simulateNetworkDelay\u001b[33m,\u001b[39m createValidJsonFile\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/comprehensive/user-journey-errors.test.tsx:6:1)\n\nFAIL Integration Tests __tests__/integration/comprehensive/user-journey-workflow.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './user-journey-utils' from '__tests__/integration/comprehensive/user-journey-workflow.test.tsx'\n\n    \u001b[0m \u001b[90m 4 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m 5 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 6 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 7 |\u001b[39m   \u001b[33mReact\u001b[39m\u001b[33m,\u001b[39m render\u001b[33m,\u001b[39m waitFor\u001b[33m,\u001b[39m fireEvent\u001b[33m,\u001b[39m \u001b[33mTEST_TIMEOUTS\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 8 |\u001b[39m   setupUserJourneyTest\u001b[33m,\u001b[39m teardownUserJourneyTest\u001b[33m,\u001b[39m\n     \u001b[90m 9 |\u001b[39m   validateFileType\u001b[33m,\u001b[39m validateFileSize\u001b[33m,\u001b[39m parseFileContent\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/comprehensive/user-journey-workflow.test.tsx:6:1)\n\nFAIL Integration Tests __tests__/integration/comprehensive/navigation-search.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './test-utils' from '__tests__/integration/comprehensive/navigation-search.test.tsx'\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m  7 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m   \u001b[33mReact\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 10 |\u001b[39m   render\u001b[33m,\u001b[39m\n     \u001b[90m 11 |\u001b[39m   waitFor\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/comprehensive/navigation-search.test.tsx:8:1)\n\nPASS Integration Tests __tests__/integration/message-reception.test.tsx\n  Message Reception Integration Tests\n    WebSocket Message Parsing\n      \u221a should parse structured WebSocket messages correctly (20 ms)\n      \u221a should handle malformed WebSocket messages gracefully (15 ms)\n    First Token Display Performance\n      \u221a should display first token within 1 second (47 ms)\n      \u221a should measure and record token display metrics (93 ms)\n    Streaming Text Accumulation\n      \u221a should accumulate text progressively without jumps (93 ms)\n      \u221a should handle very long messages without performance degradation (1606 ms)\n    Markdown Real-time Rendering\n      \u221a should render markdown during streaming (928 ms)\n    Auto-scroll Behavior\n      \u221a should auto-scroll during message streaming (62 ms)\n    Stream Completion Detection\n      \u221a should detect when streaming is complete (73 ms)\n      \u221a should enable message actions after completion (145 ms)\n    Network Disconnection Recovery\n      \u221a should handle WebSocket disconnection during streaming (147 ms)\n\nFAIL Integration Tests __tests__/integration/comprehensive/theme-preferences.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './test-utils' from '__tests__/integration/comprehensive/theme-preferences.test.tsx'\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m  7 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m   \u001b[33mReact\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 10 |\u001b[39m   render\u001b[33m,\u001b[39m\n     \u001b[90m 11 |\u001b[39m   waitFor\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/comprehensive/theme-preferences.test.tsx:8:1)\n\nFAIL Integration Tests __tests__/integration/comprehensive/interactive-features-scroll.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './interactive-features-utils' from '__tests__/integration/comprehensive/interactive-features-scroll-basic.test.tsx'\n\n    Require stack:\n      __tests__/integration/comprehensive/interactive-features-scroll-basic.test.tsx\n      __tests__/integration/comprehensive/interactive-features-scroll.test.tsx\n\n    \u001b[0m \u001b[90m 4 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m 5 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 6 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 7 |\u001b[39m   \u001b[33mReact\u001b[39m\u001b[33m,\u001b[39m render\u001b[33m,\u001b[39m waitFor\u001b[33m,\u001b[39m \u001b[33mTEST_TIMEOUTS\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 8 |\u001b[39m   setupInteractiveTest\u001b[33m,\u001b[39m teardownInteractiveTest\u001b[33m,\u001b[39m\n     \u001b[90m 9 |\u001b[39m   simulateNetworkDelay\u001b[33m,\u001b[39m simulateScroll\u001b[33m,\u001b[39m createScrollContainer\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/comprehensive/interactive-features-scroll-basic.test.tsx:6:1)\n      at Object.<anonymous> (__tests__/integration/comprehensive/interactive-features-scroll.test.tsx:10:1)\n\nFAIL Integration Tests __tests__/integration/comprehensive/memory-management.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './test-utils' from '__tests__/integration/comprehensive/memory-management.test.tsx'\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m  7 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m   \u001b[33mReact\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 10 |\u001b[39m   render\u001b[33m,\u001b[39m\n     \u001b[90m 11 |\u001b[39m   waitFor\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/comprehensive/memory-management.test.tsx:8:1)\n\nFAIL Integration Tests __tests__/integration/comprehensive/interactive-features-scroll-basic.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './interactive-features-utils' from '__tests__/integration/comprehensive/interactive-features-scroll-basic.test.tsx'\n\n    \u001b[0m \u001b[90m 4 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m 5 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 6 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 7 |\u001b[39m   \u001b[33mReact\u001b[39m\u001b[33m,\u001b[39m render\u001b[33m,\u001b[39m waitFor\u001b[33m,\u001b[39m \u001b[33mTEST_TIMEOUTS\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 8 |\u001b[39m   setupInteractiveTest\u001b[33m,\u001b[39m teardownInteractiveTest\u001b[33m,\u001b[39m\n     \u001b[90m 9 |\u001b[39m   simulateNetworkDelay\u001b[33m,\u001b[39m simulateScroll\u001b[33m,\u001b[39m createScrollContainer\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/comprehensive/interactive-features-scroll-basic.test.tsx:6:1)\n\nFAIL Integration Tests __tests__/integration/comprehensive/interactive-features-drag-drop-advanced.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './interactive-features-utils' from '__tests__/integration/comprehensive/interactive-features-drag-drop-advanced.test.tsx'\n\n    \u001b[0m \u001b[90m 4 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m 5 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 6 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 7 |\u001b[39m   \u001b[33mReact\u001b[39m\u001b[33m,\u001b[39m render\u001b[33m,\u001b[39m waitFor\u001b[33m,\u001b[39m fireEvent\u001b[33m,\u001b[39m\n     \u001b[90m 8 |\u001b[39m   setupInteractiveTest\u001b[33m,\u001b[39m teardownInteractiveTest\u001b[33m,\u001b[39m\n     \u001b[90m 9 |\u001b[39m   simulateDragStart\u001b[33m,\u001b[39m reorderItems\u001b[33m,\u001b[39m generateItems\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/comprehensive/interactive-features-drag-drop-advanced.test.tsx:6:1)\n\nFAIL Integration Tests __tests__/integration/comprehensive/interactive-features-scroll-advanced.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './interactive-features-utils' from '__tests__/integration/comprehensive/interactive-features-scroll-advanced.test.tsx'\n\n    \u001b[0m \u001b[90m 4 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m 5 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 6 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 7 |\u001b[39m   \u001b[33mReact\u001b[39m\u001b[33m,\u001b[39m render\u001b[33m,\u001b[39m waitFor\u001b[33m,\u001b[39m \u001b[33mTEST_TIMEOUTS\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 8 |\u001b[39m   setupInteractiveTest\u001b[33m,\u001b[39m teardownInteractiveTest\u001b[33m,\u001b[39m\n     \u001b[90m 9 |\u001b[39m   simulateNetworkDelay\u001b[33m,\u001b[39m simulateScroll\u001b[33m,\u001b[39m createScrollContainer\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/comprehensive/interactive-features-scroll-advanced.test.tsx:6:1)\n\nFAIL Integration Tests __tests__/integration/comprehensive/performance-memory.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './test-utils' from '__tests__/integration/comprehensive/performance-memory.test.tsx'\n\n    \u001b[0m \u001b[90m 12 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m 13 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 14 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 15 |\u001b[39m   setupTestEnvironment\u001b[33m,\u001b[39m\n     \u001b[90m 16 |\u001b[39m   cleanupTestEnvironment\u001b[33m,\u001b[39m\n     \u001b[90m 17 |\u001b[39m   createMockWebSocketServer\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/comprehensive/performance-memory.test.tsx:14:1)\n\nFAIL Integration Tests __tests__/integration/comprehensive/interactive-features-drag-drop.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './interactive-features-utils' from '__tests__/integration/comprehensive/interactive-features-drag-drop-basic.test.tsx'\n\n    Require stack:\n      __tests__/integration/comprehensive/interactive-features-drag-drop-basic.test.tsx\n      __tests__/integration/comprehensive/interactive-features-drag-drop.test.tsx\n\n    \u001b[0m \u001b[90m 4 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m 5 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 6 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 7 |\u001b[39m   \u001b[33mReact\u001b[39m\u001b[33m,\u001b[39m render\u001b[33m,\u001b[39m waitFor\u001b[33m,\u001b[39m fireEvent\u001b[33m,\u001b[39m\n     \u001b[90m 8 |\u001b[39m   setupInteractiveTest\u001b[33m,\u001b[39m teardownInteractiveTest\u001b[33m,\u001b[39m\n     \u001b[90m 9 |\u001b[39m   createMockDataTransfer\u001b[33m,\u001b[39m createTestFile\u001b[33m,\u001b[39m generateImagePreview\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/comprehensive/interactive-features-drag-drop-basic.test.tsx:6:1)\n      at Object.<anonymous> (__tests__/integration/comprehensive/interactive-features-drag-drop.test.tsx:10:1)\n\nFAIL Integration Tests __tests__/integration/comprehensive/interactive-features-drag-drop-basic.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './interactive-features-utils' from '__tests__/integration/comprehensive/interactive-features-drag-drop-basic.test.tsx'\n\n    \u001b[0m \u001b[90m 4 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m 5 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 6 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 7 |\u001b[39m   \u001b[33mReact\u001b[39m\u001b[33m,\u001b[39m render\u001b[33m,\u001b[39m waitFor\u001b[33m,\u001b[39m fireEvent\u001b[33m,\u001b[39m\n     \u001b[90m 8 |\u001b[39m   setupInteractiveTest\u001b[33m,\u001b[39m teardownInteractiveTest\u001b[33m,\u001b[39m\n     \u001b[90m 9 |\u001b[39m   createMockDataTransfer\u001b[33m,\u001b[39m createTestFile\u001b[33m,\u001b[39m generateImagePreview\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/comprehensive/interactive-features-drag-drop-basic.test.tsx:6:1)\n\nFAIL Integration Tests __tests__/integration/comprehensive/index.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './test-utils' from '__tests__/integration/comprehensive/index.test.tsx'\n\n    \u001b[0m \u001b[90m 34 |\u001b[39m\n     \u001b[90m 35 |\u001b[39m \u001b[90m// Import test utilities first to ensure setup\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 36 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33m*\u001b[39m \u001b[36mas\u001b[39m testUtils \u001b[36mfrom\u001b[39m \u001b[32m'./test-utils'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m \u001b[90m// Import all test modules - commented out temporarily to prevent import errors\u001b[39m\n     \u001b[90m 39 |\u001b[39m \u001b[90m// These modules need fixing to work with the current test-utils structure\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/comprehensive/index.test.tsx:36:1)\n\nFAIL Integration Tests __tests__/integration/comprehensive/error-recovery.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './test-utils' from '__tests__/integration/comprehensive/error-recovery.test.tsx'\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m  7 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m   \u001b[33mReact\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 10 |\u001b[39m   render\u001b[33m,\u001b[39m\n     \u001b[90m 11 |\u001b[39m   waitFor\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/comprehensive/error-recovery.test.tsx:8:1)\n\nFAIL Integration Tests __tests__/integration/comprehensive/i18n-tests.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './test-utils' from '__tests__/integration/comprehensive/i18n-tests.test.tsx'\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m  7 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m   \u001b[33mReact\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 10 |\u001b[39m   render\u001b[33m,\u001b[39m\n     \u001b[90m 11 |\u001b[39m   waitFor\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/comprehensive/i18n-tests.test.tsx:8:1)\n\nFAIL Integration Tests __tests__/integration/comprehensive/collaboration-features.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './test-utils' from '__tests__/integration/comprehensive/collaboration-features.test.tsx'\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m  7 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m   \u001b[33mReact\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 10 |\u001b[39m   render\u001b[33m,\u001b[39m\n     \u001b[90m 11 |\u001b[39m   waitFor\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/comprehensive/collaboration-features.test.tsx:8:1)\n\nFAIL Integration Tests __tests__/integration/advanced-integration/end-to-end-journey-refactored.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module '../../helpers/test-setup-helpers' from '__tests__/integration/advanced-integration/end-to-end-journey-refactored.test.tsx'\n\n    \u001b[0m \u001b[90m  7 |\u001b[39m \u001b[36mimport\u001b[39m { render\u001b[33m,\u001b[39m waitFor\u001b[33m,\u001b[39m fireEvent } \u001b[36mfrom\u001b[39m \u001b[32m'@testing-library/react'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m  8 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33mWS\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'jest-websocket-mock'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m \u001b[36mimport\u001b[39m { setupTestEnvironment\u001b[33m,\u001b[39m cleanupTestEnvironment } \u001b[36mfrom\u001b[39m \u001b[32m'../../helpers/test-setup-helpers'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 10 |\u001b[39m \u001b[36mimport\u001b[39m { createOptimizationWorkflowComponent\u001b[33m,\u001b[39m createTestFile\u001b[33m,\u001b[39m simulateFileInput } \u001b[36mfrom\u001b[39m \u001b[32m'../../helpers/optimization-workflow-helpers'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 11 |\u001b[39m \u001b[36mimport\u001b[39m { assertElementText\u001b[33m,\u001b[39m waitForElementText\u001b[33m,\u001b[39m assertOptimizationResults } \u001b[36mfrom\u001b[39m \u001b[32m'../../helpers/test-assertion-helpers'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 12 |\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/advanced-integration/end-to-end-journey-refactored.test.tsx:9:1)\n\nFAIL Integration Tests __tests__/integration/websocket-large-messages.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module '../helpers/websocket-test-utilities' from '__tests__/integration/websocket-large-messages.test.tsx'\n\n    \u001b[0m \u001b[90m  9 |\u001b[39m \u001b[36mimport\u001b[39m { jest } \u001b[36mfrom\u001b[39m \u001b[32m'@jest/globals'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 10 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mWebSocketTestManager\u001b[39m\u001b[33m,\u001b[39m createWebSocketManager } \u001b[36mfrom\u001b[39m \u001b[32m'../helpers/websocket-test-manager'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 11 |\u001b[39m \u001b[36mimport\u001b[39m { generateLargeMessage } \u001b[36mfrom\u001b[39m \u001b[32m'../helpers/websocket-test-utilities'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 12 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mMessageBuffer\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'../setup/websocket-test-utils'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 13 |\u001b[39m\n     \u001b[90m 14 |\u001b[39m describe(\u001b[32m'WebSocket Large Message Handling Tests'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/websocket-large-messages.test.tsx:11:1)\n\nFAIL Integration Tests __tests__/integration/comprehensive/collaboration-sync.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './real-state-utils' from '__tests__/test-utils/render-with-providers.tsx'\n\n    Require stack:\n      __tests__/test-utils/render-with-providers.tsx\n      __tests__/test-utils.tsx\n      __tests__/integration/comprehensive/collaboration-sync.test.tsx\n\n    \u001b[0m \u001b[90m 23 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mUser\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'@/types'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 24 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mWebSocketContextType\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'@/types/websocket-context-types'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 25 |\u001b[39m \u001b[36mimport\u001b[39m { createRealTestUser } \u001b[36mfrom\u001b[39m \u001b[32m'./real-state-utils'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 26 |\u001b[39m\n     \u001b[90m 27 |\u001b[39m \u001b[90m// Real Provider Configuration Types\u001b[39m\n     \u001b[90m 28 |\u001b[39m \u001b[36mexport\u001b[39m \u001b[36minterface\u001b[39m \u001b[33mRealProviderOptions\u001b[39m {\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/test-utils/render-with-providers.tsx:25:1)\n      at Object.<anonymous> (__tests__/test-utils.tsx:102:1)\n      at Object.<anonymous> (__tests__/integration/comprehensive/collaboration-sync.test.tsx:8:1)\n\nFAIL Integration Tests __tests__/integration/task-retry-mechanisms.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './utils/infrastructure-test-utils' from '__tests__/integration/task-retry-mechanisms.test.tsx'\n\n    \u001b[0m \u001b[90m  9 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[32m'@testing-library/jest-dom'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 10 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mTestProviders\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'../test-utils/providers'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 11 |\u001b[39m \u001b[36mimport\u001b[39m { \n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 12 |\u001b[39m   initInfrastructureTest\u001b[33m,\u001b[39m\n     \u001b[90m 13 |\u001b[39m   setupFetchMock\u001b[33m,\u001b[39m\n     \u001b[90m 14 |\u001b[39m   waitForAsyncOperation\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/task-retry-mechanisms.test.tsx:11:1)\n\nFAIL Integration Tests __tests__/integration/login-token-management.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './message-test-helpers' from '__tests__/utils/test-utils.tsx'\n\n    Require stack:\n      __tests__/utils/test-utils.tsx\n      __tests__/utils/index.ts\n      __tests__/integration/login-token-management.test.tsx\n\n    \u001b[0m \u001b[90m 137 |\u001b[39m\n     \u001b[90m 138 |\u001b[39m \u001b[90m// Message test helpers\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 139 |\u001b[39m \u001b[36mexport\u001b[39m \u001b[33m*\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'./message-test-helpers'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 140 |\u001b[39m\n     \u001b[90m 141 |\u001b[39m \u001b[90m// Thread test helpers  \u001b[39m\n     \u001b[90m 142 |\u001b[39m \u001b[36mexport\u001b[39m \u001b[33m*\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'./thread-test-helpers'\u001b[39m\u001b[33m;\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/utils/test-utils.tsx:139:1)\n      at Object.<anonymous> (__tests__/utils/index.ts:21:1)\n      at Object.<anonymous> (__tests__/integration/login-token-management.test.tsx:21:1)\n\nFAIL Integration Tests __tests__/integration/task-processing-basic.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './utils/infrastructure-test-utils' from '__tests__/integration/task-processing-basic.test.tsx'\n\n    \u001b[0m \u001b[90m  9 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[32m'@testing-library/jest-dom'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 10 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mTestProviders\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'../test-utils/providers'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 11 |\u001b[39m \u001b[36mimport\u001b[39m { \n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 12 |\u001b[39m   initInfrastructureTest\u001b[33m,\u001b[39m\n     \u001b[90m 13 |\u001b[39m   setupFetchMock\u001b[33m,\u001b[39m\n     \u001b[90m 14 |\u001b[39m   createMockTaskResponse\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/task-processing-basic.test.tsx:11:1)\n\nFAIL Integration Tests __tests__/integration/login-websocket-setup.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './message-test-helpers' from '__tests__/utils/test-utils.tsx'\n\n    Require stack:\n      __tests__/utils/test-utils.tsx\n      __tests__/utils/index.ts\n      __tests__/integration/login-websocket-setup.test.tsx\n\n    \u001b[0m \u001b[90m 137 |\u001b[39m\n     \u001b[90m 138 |\u001b[39m \u001b[90m// Message test helpers\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 139 |\u001b[39m \u001b[36mexport\u001b[39m \u001b[33m*\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'./message-test-helpers'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 140 |\u001b[39m\n     \u001b[90m 141 |\u001b[39m \u001b[90m// Thread test helpers  \u001b[39m\n     \u001b[90m 142 |\u001b[39m \u001b[36mexport\u001b[39m \u001b[33m*\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'./thread-test-helpers'\u001b[39m\u001b[33m;\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/utils/test-utils.tsx:139:1)\n      at Object.<anonymous> (__tests__/utils/index.ts:21:1)\n      at Object.<anonymous> (__tests__/integration/login-websocket-setup.test.tsx:21:1)\n\nFAIL Integration Tests __tests__/integration/login-complete.test.tsx\n  \u25cf Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @/components/MainChat mapped as:\n    C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\components\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@\\/components\\/(.*)$/\": \"C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\components\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m \u001b[90m 30 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mMockMessageInput\u001b[39m \u001b[33m=\u001b[39m () \u001b[33m=>\u001b[39m \u001b[33m<\u001b[39m\u001b[33minput\u001b[39m data\u001b[33m-\u001b[39mtestid\u001b[33m=\u001b[39m\u001b[32m\"message-input\"\u001b[39m placeholder\u001b[33m=\u001b[39m\u001b[32m\"Type message...\"\u001b[39m \u001b[33m/\u001b[39m\u001b[33m>\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 32 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@/components/MainChat'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 33 |\u001b[39m   \u001b[33mMainChat\u001b[39m\u001b[33m:\u001b[39m \u001b[33mMockChatInterface\u001b[39m\n     \u001b[90m 34 |\u001b[39m }))\u001b[33m;\u001b[39m\n     \u001b[90m 35 |\u001b[39m\u001b[0m\n\n      at createNoMappedModuleFoundError (node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.<anonymous> (__tests__/integration/login-complete.test.tsx:32:6)\n\nFAIL Integration Tests __tests__/integration/websocket-complete.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module '../helpers/websocket-test-utilities' from '__tests__/integration/websocket-large-messages.test.tsx'\n\n    Require stack:\n      __tests__/integration/websocket-large-messages.test.tsx\n      __tests__/integration/websocket-complete.test.tsx\n\n    \u001b[0m \u001b[90m  9 |\u001b[39m \u001b[36mimport\u001b[39m { jest } \u001b[36mfrom\u001b[39m \u001b[32m'@jest/globals'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 10 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mWebSocketTestManager\u001b[39m\u001b[33m,\u001b[39m createWebSocketManager } \u001b[36mfrom\u001b[39m \u001b[32m'../helpers/websocket-test-manager'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 11 |\u001b[39m \u001b[36mimport\u001b[39m { generateLargeMessage } \u001b[36mfrom\u001b[39m \u001b[32m'../helpers/websocket-test-utilities'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 12 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mMessageBuffer\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'../setup/websocket-test-utils'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 13 |\u001b[39m\n     \u001b[90m 14 |\u001b[39m describe(\u001b[32m'WebSocket Large Message Handling Tests'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/websocket-large-messages.test.tsx:11:1)\n      at Object.<anonymous> (__tests__/integration/websocket-complete.test.tsx:25:1)\n\nFAIL Integration Tests __tests__/integration/message-streaming-core.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module '../helpers/websocket-test-utilities' from '__tests__/integration/message-streaming-core.test.tsx'\n\n    \u001b[0m \u001b[90m 11 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mTestProviders\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'../setup/test-providers'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 12 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mWebSocketTestManager\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'../helpers/websocket-test-manager'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 13 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mStreamingMetrics\u001b[39m\u001b[33m,\u001b[39m \u001b[33mMessageChunk\u001b[39m\u001b[33m,\u001b[39m createMessageChunk } \u001b[36mfrom\u001b[39m \u001b[32m'../helpers/websocket-test-utilities'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 14 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mStreamBuffer\u001b[39m\u001b[33m,\u001b[39m \u001b[33mFrameRateController\u001b[39m\u001b[33m,\u001b[39m \u001b[33mStreamingPerformanceMonitor\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'../helpers/streaming-test-utilities'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 15 |\u001b[39m\n     \u001b[90m 16 |\u001b[39m \u001b[90m// Core streaming test component\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/message-streaming-core.test.tsx:13:1)\n\nFAIL Integration Tests __tests__/integration/integration-corpus.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './integration-shared-utilities' from '__tests__/integration/integration-corpus.test.tsx'\n\n    \u001b[0m \u001b[90m  7 |\u001b[39m \u001b[36mimport\u001b[39m { render } \u001b[36mfrom\u001b[39m \u001b[32m'@testing-library/react'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m  8 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[32m'@testing-library/jest-dom'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 10 |\u001b[39m   setupIntegrationTest\u001b[33m,\u001b[39m\n     \u001b[90m 11 |\u001b[39m   teardownIntegrationTest\u001b[33m,\u001b[39m\n     \u001b[90m 12 |\u001b[39m   createMockDocument\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/integration-corpus.test.tsx:9:1)\n\nFAIL Integration Tests __tests__/integration/login-complete-flow.test.tsx\n  \u25cf Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @/services/websocket mapped as:\n    C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\services\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@\\/services\\/(.*)$/\": \"C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\services\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m \u001b[90m 65 |\u001b[39m \u001b[90m// Mock implementations\u001b[39m\n     \u001b[90m 66 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@/store/authStore'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({ useAuthStore\u001b[33m:\u001b[39m mockUseAuthStore }))\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 67 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@/services/websocket'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({ useWebSocket\u001b[33m:\u001b[39m mockUseWebSocket }))\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 68 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'next/navigation'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({ useRouter\u001b[33m:\u001b[39m mockUseRouter }))\u001b[33m;\u001b[39m\n     \u001b[90m 69 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@/auth/service'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({ authService\u001b[33m:\u001b[39m mockAuthService }))\u001b[33m;\u001b[39m\n     \u001b[90m 70 |\u001b[39m\u001b[0m\n\n      at createNoMappedModuleFoundError (node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.<anonymous> (__tests__/integration/login-complete-flow.test.tsx:67:6)\n\nFAIL Integration Tests __tests__/integration/integration-tasks.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './integration-shared-utilities' from '__tests__/integration/integration-tasks.test.tsx'\n\n    \u001b[0m \u001b[90m  7 |\u001b[39m \u001b[36mimport\u001b[39m { render\u001b[33m,\u001b[39m screen\u001b[33m,\u001b[39m waitFor } \u001b[36mfrom\u001b[39m \u001b[32m'@testing-library/react'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m  8 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[32m'@testing-library/jest-dom'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 10 |\u001b[39m   setupIntegrationTest\u001b[33m,\u001b[39m\n     \u001b[90m 11 |\u001b[39m   teardownIntegrationTest\u001b[33m,\u001b[39m\n     \u001b[90m 12 |\u001b[39m   createTaskRetryComponent\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/integration-tasks.test.tsx:9:1)\n\nFAIL Integration Tests __tests__/integration/integration-health.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './integration-shared-utilities' from '__tests__/integration/integration-health.test.tsx'\n\n    \u001b[0m \u001b[90m  7 |\u001b[39m \u001b[36mimport\u001b[39m { render\u001b[33m,\u001b[39m screen\u001b[33m,\u001b[39m waitFor } \u001b[36mfrom\u001b[39m \u001b[32m'@testing-library/react'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m  8 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[32m'@testing-library/jest-dom'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 10 |\u001b[39m   setupIntegrationTest\u001b[33m,\u001b[39m\n     \u001b[90m 11 |\u001b[39m   teardownIntegrationTest\u001b[33m,\u001b[39m\n     \u001b[90m 12 |\u001b[39m   createMockHealthStatus\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/integration-health.test.tsx:9:1)\n\nFAIL Integration Tests __tests__/integration/integration-cache.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './integration-shared-utilities' from '__tests__/integration/integration-cache.test.tsx'\n\n    \u001b[0m \u001b[90m  7 |\u001b[39m \u001b[36mimport\u001b[39m { render\u001b[33m,\u001b[39m screen\u001b[33m,\u001b[39m fireEvent\u001b[33m,\u001b[39m waitFor } \u001b[36mfrom\u001b[39m \u001b[32m'@testing-library/react'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m  8 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[32m'@testing-library/jest-dom'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 10 |\u001b[39m   setupIntegrationTest\u001b[33m,\u001b[39m\n     \u001b[90m 11 |\u001b[39m   teardownIntegrationTest\u001b[33m,\u001b[39m\n     \u001b[90m 12 |\u001b[39m   createLLMCacheStore\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/integration-cache.test.tsx:9:1)\n\nFAIL Integration Tests __tests__/integration/integration-comprehensive-core.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './integration-comprehensive-helpers' from '__tests__/integration/integration-comprehensive-core.test.tsx'\n\n    \u001b[0m \u001b[90m  8 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[32m'@testing-library/jest-dom'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m  9 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mTestProviders\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'../test-utils/providers'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 10 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 11 |\u001b[39m   setupComprehensiveMocks\u001b[33m,\u001b[39m\n     \u001b[90m 12 |\u001b[39m   setupComprehensiveTestEnvironment\u001b[33m,\u001b[39m\n     \u001b[90m 13 |\u001b[39m   cleanupComprehensiveTestEnvironment\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/integration-comprehensive-core.test.tsx:10:1)\n\nFAIL Integration Tests __tests__/integration/integration-data-generation.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './integration-shared-utilities' from '__tests__/integration/integration-data-generation.test.tsx'\n\n    \u001b[0m \u001b[90m  7 |\u001b[39m \u001b[36mimport\u001b[39m { render\u001b[33m,\u001b[39m screen\u001b[33m,\u001b[39m fireEvent\u001b[33m,\u001b[39m waitFor } \u001b[36mfrom\u001b[39m \u001b[32m'@testing-library/react'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m  8 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[32m'@testing-library/jest-dom'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 10 |\u001b[39m   setupIntegrationTest\u001b[33m,\u001b[39m\n     \u001b[90m 11 |\u001b[39m   teardownIntegrationTest\u001b[33m,\u001b[39m\n     \u001b[90m 12 |\u001b[39m   createMockGenerationJob\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/integration-data-generation.test.tsx:9:1)\n\nFAIL Integration Tests __tests__/integration/error-remediation.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './utils/infrastructure-test-utils' from '__tests__/integration/error-remediation.test.tsx'\n\n    \u001b[0m \u001b[90m  9 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[32m'@testing-library/jest-dom'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 10 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mTestProviders\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'../test-utils/providers'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 11 |\u001b[39m \u001b[36mimport\u001b[39m { \n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 12 |\u001b[39m   initInfrastructureTest\u001b[33m,\u001b[39m\n     \u001b[90m 13 |\u001b[39m   setupFetchMock\u001b[33m,\u001b[39m\n     \u001b[90m 14 |\u001b[39m   \u001b[33mInfrastructureTestContext\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/error-remediation.test.tsx:11:1)\n\nFAIL Integration Tests __tests__/integration/first-load-performance.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './message-test-helpers' from '__tests__/utils/test-utils.tsx'\n\n    Require stack:\n      __tests__/utils/test-utils.tsx\n      __tests__/utils/index.ts\n      __tests__/integration/first-load-performance.test.tsx\n\n    \u001b[0m \u001b[90m 137 |\u001b[39m\n     \u001b[90m 138 |\u001b[39m \u001b[90m// Message test helpers\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 139 |\u001b[39m \u001b[36mexport\u001b[39m \u001b[33m*\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'./message-test-helpers'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 140 |\u001b[39m\n     \u001b[90m 141 |\u001b[39m \u001b[90m// Thread test helpers  \u001b[39m\n     \u001b[90m 142 |\u001b[39m \u001b[36mexport\u001b[39m \u001b[33m*\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'./thread-test-helpers'\u001b[39m\u001b[33m;\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/utils/test-utils.tsx:139:1)\n      at Object.<anonymous> (__tests__/utils/index.ts:21:1)\n      at Object.<anonymous> (__tests__/integration/first-load-performance.test.tsx:31:1)\n\nFAIL Integration Tests __tests__/integration/first-load-bundle.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './message-test-helpers' from '__tests__/utils/test-utils.tsx'\n\n    Require stack:\n      __tests__/utils/test-utils.tsx\n      __tests__/utils/index.ts\n      __tests__/integration/first-load-bundle.test.tsx\n\n    \u001b[0m \u001b[90m 137 |\u001b[39m\n     \u001b[90m 138 |\u001b[39m \u001b[90m// Message test helpers\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 139 |\u001b[39m \u001b[36mexport\u001b[39m \u001b[33m*\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'./message-test-helpers'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 140 |\u001b[39m\n     \u001b[90m 141 |\u001b[39m \u001b[90m// Thread test helpers  \u001b[39m\n     \u001b[90m 142 |\u001b[39m \u001b[36mexport\u001b[39m \u001b[33m*\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'./thread-test-helpers'\u001b[39m\u001b[33m;\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/utils/test-utils.tsx:139:1)\n      at Object.<anonymous> (__tests__/utils/index.ts:21:1)\n      at Object.<anonymous> (__tests__/integration/first-load-bundle.test.tsx:30:1)\n\nFAIL Integration Tests __tests__/integration/database-integration.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './utils/infrastructure-test-utils' from '__tests__/integration/database-integration.test.tsx'\n\n    \u001b[0m \u001b[90m  9 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[32m'@testing-library/jest-dom'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 10 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mTestProviders\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'../test-utils/providers'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 11 |\u001b[39m \u001b[36mimport\u001b[39m { \n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 12 |\u001b[39m   initInfrastructureTest\u001b[33m,\u001b[39m\n     \u001b[90m 13 |\u001b[39m   setupFetchMock\u001b[33m,\u001b[39m\n     \u001b[90m 14 |\u001b[39m   createMockTransactionResponse\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/database-integration.test.tsx:11:1)\n\nFAIL Integration Tests __tests__/integration/error-context-tracing.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './utils/infrastructure-test-utils' from '__tests__/integration/error-context-tracing.test.tsx'\n\n    \u001b[0m \u001b[90m  9 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[32m'@testing-library/jest-dom'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 10 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mTestProviders\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'../test-utils/providers'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 11 |\u001b[39m \u001b[36mimport\u001b[39m { \n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 12 |\u001b[39m   initInfrastructureTest\u001b[33m,\u001b[39m\n     \u001b[90m 13 |\u001b[39m   setupFetchMock\u001b[33m,\u001b[39m\n     \u001b[90m 14 |\u001b[39m   createMockErrorResponse\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/error-context-tracing.test.tsx:11:1)\n\nFAIL Integration Tests __tests__/integration/first-load-edge-cases.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './message-test-helpers' from '__tests__/utils/test-utils.tsx'\n\n    Require stack:\n      __tests__/utils/test-utils.tsx\n      __tests__/utils/index.ts\n      __tests__/integration/first-load-edge-cases.test.tsx\n\n    \u001b[0m \u001b[90m 137 |\u001b[39m\n     \u001b[90m 138 |\u001b[39m \u001b[90m// Message test helpers\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 139 |\u001b[39m \u001b[36mexport\u001b[39m \u001b[33m*\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'./message-test-helpers'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 140 |\u001b[39m\n     \u001b[90m 141 |\u001b[39m \u001b[90m// Thread test helpers  \u001b[39m\n     \u001b[90m 142 |\u001b[39m \u001b[36mexport\u001b[39m \u001b[33m*\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'./thread-test-helpers'\u001b[39m\u001b[33m;\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/utils/test-utils.tsx:139:1)\n      at Object.<anonymous> (__tests__/utils/index.ts:21:1)\n      at Object.<anonymous> (__tests__/integration/first-load-edge-cases.test.tsx:32:1)\n\nFAIL Integration Tests __tests__/integration/caching-integration.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './utils/infrastructure-test-utils' from '__tests__/integration/caching-integration.test.tsx'\n\n    \u001b[0m \u001b[90m  9 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[32m'@testing-library/jest-dom'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 10 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mTestProviders\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'../test-utils/providers'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 11 |\u001b[39m \u001b[36mimport\u001b[39m { \n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 12 |\u001b[39m   initInfrastructureTest\u001b[33m,\u001b[39m\n     \u001b[90m 13 |\u001b[39m   setupFetchMock\u001b[33m,\u001b[39m\n     \u001b[90m 14 |\u001b[39m   createMockCacheResponse\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/caching-integration.test.tsx:11:1)\n\nFAIL Integration Tests __tests__/integration/comprehensive-integration-elite.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module '../helpers/test-setup-helpers' from '__tests__/integration/comprehensive-integration-elite.test.tsx'\n\n    \u001b[0m \u001b[90m 71 |\u001b[39m\n     \u001b[90m 72 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mTestProviders\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'../test-utils/providers'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 73 |\u001b[39m \u001b[36mimport\u001b[39m { setupTestEnvironment\u001b[33m,\u001b[39m cleanupTestEnvironment\u001b[33m,\u001b[39m resetTestStores\u001b[33m,\u001b[39m clearTestStorage\u001b[33m,\u001b[39m setupMockFetch } \u001b[36mfrom\u001b[39m \u001b[32m'../helpers/test-setup-helpers'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 74 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m 75 |\u001b[39m   createMockDocument\u001b[33m,\u001b[39m\n     \u001b[90m 76 |\u001b[39m   createMockSearchResults\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/comprehensive-integration-elite.test.tsx:73:1)\n\nFAIL Integration Tests __tests__/integration/basic-integration-data.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './helpers/websocket-helpers' from '__tests__/integration/basic-integration-data.test.tsx'\n\n    \u001b[0m \u001b[90m 15 |\u001b[39m \u001b[36mimport\u001b[39m { createMockMessage\u001b[33m,\u001b[39m createMockThread } \u001b[36mfrom\u001b[39m \u001b[32m'./helpers/test-builders'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 16 |\u001b[39m \u001b[36mimport\u001b[39m { assertTextContent\u001b[33m,\u001b[39m assertMessageCount\u001b[33m,\u001b[39m assertThreadCount } \u001b[36mfrom\u001b[39m \u001b[32m'./helpers/test-assertions'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 17 |\u001b[39m \u001b[36mimport\u001b[39m { waitForConnection\u001b[33m,\u001b[39m sendMessage\u001b[33m,\u001b[39m sendStreamChunk\u001b[33m,\u001b[39m sendAgentStart\u001b[33m,\u001b[39m sendAgentMessage\u001b[33m,\u001b[39m sendAgentComplete } \u001b[36mfrom\u001b[39m \u001b[32m'./helpers/websocket-helpers'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 18 |\u001b[39m\n     \u001b[90m 19 |\u001b[39m describe(\u001b[32m'Data Flow Integration Tests'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 20 |\u001b[39m   \u001b[36mlet\u001b[39m server\u001b[33m:\u001b[39m \u001b[33mWS\u001b[39m\u001b[33m;\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/basic-integration-data.test.tsx:17:1)\n\nFAIL Integration Tests __tests__/integration/auth-flow-refactored.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './utils/auth-flow-utils' from '__tests__/integration/auth-flow-refactored.test.tsx'\n\n    \u001b[0m \u001b[90m 70 |\u001b[39m   mockNextRouter\n     \u001b[90m 71 |\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'../test-utils/integration-test-setup'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 72 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 73 |\u001b[39m   createLoginComponent\u001b[33m,\u001b[39m\n     \u001b[90m 74 |\u001b[39m   createLogoutComponent\u001b[33m,\u001b[39m\n     \u001b[90m 75 |\u001b[39m   performLoginAction\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/auth-flow-refactored.test.tsx:72:1)\n\nFAIL Integration Tests __tests__/auth/auth-token.test.ts\n  \u25cf Test suite failed to run\n\n    Cannot find module './auth-test-utils' from '__tests__/auth/auth-token.test.ts'\n\n    \u001b[0m \u001b[90m 11 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[32m'./auth-test-setup'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 12 |\u001b[39m \u001b[36mimport\u001b[39m { authService } \u001b[36mfrom\u001b[39m \u001b[32m'@/auth'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 13 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 14 |\u001b[39m   setupAuthTestEnvironment\u001b[33m,\u001b[39m\n     \u001b[90m 15 |\u001b[39m   resetAuthTestMocks\u001b[33m,\u001b[39m\n     \u001b[90m 16 |\u001b[39m   createMockToken\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/auth/auth-token.test.ts:13:1)\n\nFAIL Integration Tests __tests__/integration/analytics-clickhouse.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './utils/infrastructure-test-utils' from '__tests__/integration/analytics-clickhouse.test.tsx'\n\n    \u001b[0m \u001b[90m  9 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[32m'@testing-library/jest-dom'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 10 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mTestProviders\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'../test-utils/providers'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 11 |\u001b[39m \u001b[36mimport\u001b[39m { \n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 12 |\u001b[39m   initInfrastructureTest\u001b[33m,\u001b[39m\n     \u001b[90m 13 |\u001b[39m   setupFetchMock\u001b[33m,\u001b[39m\n     \u001b[90m 14 |\u001b[39m   createMockAnalyticsResponse\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/analytics-clickhouse.test.tsx:11:1)\n\nFAIL Integration Tests __tests__/integration/analytics-realtime.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './utils/infrastructure-test-utils' from '__tests__/integration/analytics-realtime.test.tsx'\n\n    \u001b[0m \u001b[90m  9 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[32m'@testing-library/jest-dom'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 10 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mTestProviders\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'../test-utils/providers'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 11 |\u001b[39m \u001b[36mimport\u001b[39m { \n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 12 |\u001b[39m   initInfrastructureTest\u001b[33m,\u001b[39m\n     \u001b[90m 13 |\u001b[39m   setupFetchMock\u001b[33m,\u001b[39m\n     \u001b[90m 14 |\u001b[39m   simulateWebSocketMessage\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/analytics-realtime.test.tsx:11:1)\n\nFAIL Integration Tests __tests__/auth/auth-security.test.ts\n  \u25cf Test suite failed to run\n\n    Cannot find module './auth-test-utils' from '__tests__/auth/auth-security.test.ts'\n\n    \u001b[0m \u001b[90m  9 |\u001b[39m\n     \u001b[90m 10 |\u001b[39m \u001b[36mimport\u001b[39m { authService } \u001b[36mfrom\u001b[39m \u001b[32m'@/auth'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 11 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 12 |\u001b[39m   setupAuthTestEnvironment\u001b[33m,\u001b[39m\n     \u001b[90m 13 |\u001b[39m   resetAuthTestMocks\u001b[33m,\u001b[39m\n     \u001b[90m 14 |\u001b[39m   createMockAuthConfig\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/auth/auth-security.test.ts:11:1)\n\nFAIL Integration Tests __tests__/auth/auth-logout.test.ts\n  \u25cf Test suite failed to run\n\n    Cannot find module './auth-test-utils' from '__tests__/auth/auth-logout.test.ts'\n\n    \u001b[0m \u001b[90m 11 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[32m'./auth-test-setup'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 12 |\u001b[39m \u001b[36mimport\u001b[39m { authService } \u001b[36mfrom\u001b[39m \u001b[32m'@/auth'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 13 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 14 |\u001b[39m   setupAuthTestEnvironment\u001b[33m,\u001b[39m\n     \u001b[90m 15 |\u001b[39m   resetAuthTestMocks\u001b[33m,\u001b[39m\n     \u001b[90m 16 |\u001b[39m   createMockAuthConfig\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/auth/auth-logout.test.ts:13:1)\n\nFAIL Integration Tests __tests__/services/threadService.test.ts\n  \u25cf Test suite failed to run\n\n    Cannot find module './threadService-helpers' from '__tests__/services/threadService.test.ts'\n\n    \u001b[0m \u001b[90m  7 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mThreadService\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'@/services/threadService'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m  8 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mThreadMetadata\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'@/types/registry'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 10 |\u001b[39m   createMockThread\u001b[33m,\u001b[39m\n     \u001b[90m 11 |\u001b[39m   createMockThreads\u001b[33m,\u001b[39m\n     \u001b[90m 12 |\u001b[39m   createMockMessagesResponse\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/services/threadService.test.ts:9:1)\n\nFAIL Integration Tests __tests__/auth/auth-login.test.ts\n  \u25cf Test suite failed to run\n\n    Cannot find module './auth-test-utils' from '__tests__/auth/auth-login.test.ts'\n\n    \u001b[0m \u001b[90m 11 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[32m'./auth-test-setup'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 12 |\u001b[39m \u001b[36mimport\u001b[39m { authService } \u001b[36mfrom\u001b[39m \u001b[32m'@/auth'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 13 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 14 |\u001b[39m   setupAuthTestEnvironment\u001b[33m,\u001b[39m\n     \u001b[90m 15 |\u001b[39m   resetAuthTestMocks\u001b[33m,\u001b[39m\n     \u001b[90m 16 |\u001b[39m   createMockAuthConfig\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/auth/auth-login.test.ts:13:1)\n\nFAIL Integration Tests __tests__/auth/auth-token-refresh-auto.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './auth-test-utils' from '__tests__/auth/auth-token-refresh-auto.test.tsx'\n\n    \u001b[0m \u001b[90m 15 |\u001b[39m \u001b[36mimport\u001b[39m { logger } \u001b[36mfrom\u001b[39m \u001b[32m'@/lib/logger'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 16 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[32m'@testing-library/jest-dom'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 17 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 18 |\u001b[39m   setupAuthTestEnvironment\u001b[33m,\u001b[39m\n     \u001b[90m 19 |\u001b[39m   createMockAuthConfig\u001b[33m,\u001b[39m\n     \u001b[90m 20 |\u001b[39m   createMockToken\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/auth/auth-token-refresh-auto.test.tsx:17:1)\n\nFAIL Integration Tests __tests__/auth/auth-session-detection.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './auth-test-utils' from '__tests__/auth/auth-session-detection.test.tsx'\n\n    \u001b[0m \u001b[90m 15 |\u001b[39m \u001b[36mimport\u001b[39m { logger } \u001b[36mfrom\u001b[39m \u001b[32m'@/lib/logger'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 16 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[32m'@testing-library/jest-dom'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 17 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 18 |\u001b[39m   setupAuthTestEnvironment\u001b[33m,\u001b[39m\n     \u001b[90m 19 |\u001b[39m   createMockAuthConfig\u001b[33m,\u001b[39m\n     \u001b[90m 20 |\u001b[39m   createMockToken\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/auth/auth-session-detection.test.tsx:17:1)\n\nFAIL Integration Tests __tests__/integration/initial-state.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module '../helpers/initial-state-storage-helpers' from '__tests__/integration/initial-state.test.tsx'\n\n    \u001b[0m \u001b[90m 19 |\u001b[39m   \u001b[33mWebSocketConnectionComponent\u001b[39m\n     \u001b[90m 20 |\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'../helpers/initial-state-helpers'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 21 |\u001b[39m \u001b[36mimport\u001b[39m { setupStorageTestMocks\u001b[33m,\u001b[39m setupCookieTestMocks } \u001b[36mfrom\u001b[39m \u001b[32m'../helpers/initial-state-storage-helpers'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 22 |\u001b[39m \u001b[36mimport\u001b[39m { setupInitialStateMockComponents } \u001b[36mfrom\u001b[39m \u001b[32m'../helpers/initial-state-mock-components'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n     \u001b[90m 24 |\u001b[39m \u001b[90m// Setup all mocks\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/initial-state.test.tsx:21:1)\n\nFAIL Integration Tests __tests__/auth/logout-security.test.tsx (26.463 s)\n  Logout Security and Multi-Tab Tests\n    All Auth Tokens Removed\n      \u00d7 should remove JWT token from localStorage (1029 ms)\n      \u00d7 should remove auth token from localStorage (1007 ms)\n      \u00d7 should remove refresh token from localStorage (1009 ms)\n      \u00d7 should remove session ID from localStorage (1004 ms)\n    LocalStorage Cleared\n      \u00d7 should remove user preferences from localStorage (1014 ms)\n      \u00d7 should remove cached user data from localStorage (1024 ms)\n      \u00d7 should remove remember me flag from localStorage (1008 ms)\n      \u00d7 should not affect non-auth localStorage items (1009 ms)\n    Cookies Deleted\n      \u00d7 should remove auth cookies (1007 ms)\n      \u00d7 should remove session cookies (1005 ms)\n      \u00d7 should remove remember me cookies (1016 ms)\n      \u00d7 should preserve non-auth cookies (1002 ms)\n    Browser Back Prevention\n      \u00d7 should replace history state after logout (1 ms)\n      \u00d7 should prevent navigation to authenticated pages (2 ms)\n      \u00d7 should clear browser navigation state (1 ms)\n      \u00d7 should ensure no cached authenticated state (1 ms)\n    Security Validation\n      \u00d7 should not leave sensitive data in memory (1004 ms)\n      \u00d7 should clear all authentication artifacts (1004 ms)\n      \u00d7 should ensure complete session termination (1003 ms)\n      \u00d7 should clear permissions and role data (1008 ms)\n    Clean Slate for Next Login\n      \u00d7 should reset all error states (1015 ms)\n      \u00d7 should reset loading states (1004 ms)\n      \u00d7 should clear any cached authentication state (1009 ms)\n      \u00d7 should ensure fresh authentication flow on next login (1012 ms)\n    No Authenticated Content Visible\n      \u00d7 should set authenticated status to false (1011 ms)\n      \u00d7 should clear user identity information (1005 ms)\n      \u00d7 should clear role and permissions (1002 ms)\n      \u00d7 should ensure no sensitive data remains in DOM (1007 ms)\n\n  \u25cf Logout Security and Multi-Tab Tests \u203a All Auth Tokens Removed \u203a should remove JWT token from localStorage\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"jwt_token\"\n\n    Number of calls: 0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body />\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m  97 |\u001b[39m       \u001b[36mawait\u001b[39m performLogoutCleanup()\u001b[33m;\u001b[39m\n     \u001b[90m  98 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  99 |\u001b[39m         expect(mockLocalStorage\u001b[33m.\u001b[39mremoveItem)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'jwt_token'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 100 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 101 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 102 |\u001b[39m\u001b[0m\n\n      at __tests__/auth/logout-security.test.tsx:99:45\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Security and Multi-Tab Tests \u203a All Auth Tokens Removed \u203a should remove auth token from localStorage\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"jwt_token\"\n\n    Number of calls: 0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body />\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m  97 |\u001b[39m       \u001b[36mawait\u001b[39m performLogoutCleanup()\u001b[33m;\u001b[39m\n     \u001b[90m  98 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  99 |\u001b[39m         expect(mockLocalStorage\u001b[33m.\u001b[39mremoveItem)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'jwt_token'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 100 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 101 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 102 |\u001b[39m\u001b[0m\n\n      at __tests__/auth/logout-security.test.tsx:99:45\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Security and Multi-Tab Tests \u203a All Auth Tokens Removed \u203a should remove refresh token from localStorage\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"jwt_token\"\n\n    Number of calls: 0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body />\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m  97 |\u001b[39m       \u001b[36mawait\u001b[39m performLogoutCleanup()\u001b[33m;\u001b[39m\n     \u001b[90m  98 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  99 |\u001b[39m         expect(mockLocalStorage\u001b[33m.\u001b[39mremoveItem)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'jwt_token'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 100 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 101 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 102 |\u001b[39m\u001b[0m\n\n      at __tests__/auth/logout-security.test.tsx:99:45\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Security and Multi-Tab Tests \u203a All Auth Tokens Removed \u203a should remove session ID from localStorage\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"jwt_token\"\n\n    Number of calls: 0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body />\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m  97 |\u001b[39m       \u001b[36mawait\u001b[39m performLogoutCleanup()\u001b[33m;\u001b[39m\n     \u001b[90m  98 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  99 |\u001b[39m         expect(mockLocalStorage\u001b[33m.\u001b[39mremoveItem)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'jwt_token'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 100 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 101 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 102 |\u001b[39m\u001b[0m\n\n      at __tests__/auth/logout-security.test.tsx:99:45\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Security and Multi-Tab Tests \u203a LocalStorage Cleared \u203a should remove user preferences from localStorage\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body />\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 134 |\u001b[39m       \u001b[36mawait\u001b[39m performLogoutCleanup()\u001b[33m;\u001b[39m\n     \u001b[90m 135 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 136 |\u001b[39m         expect(mockLocalStorage\u001b[33m.\u001b[39mremoveItem)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 137 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 138 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 139 |\u001b[39m\u001b[0m\n\n      at __tests__/auth/logout-security.test.tsx:136:45\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Security and Multi-Tab Tests \u203a LocalStorage Cleared \u203a should remove cached user data from localStorage\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body />\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 134 |\u001b[39m       \u001b[36mawait\u001b[39m performLogoutCleanup()\u001b[33m;\u001b[39m\n     \u001b[90m 135 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 136 |\u001b[39m         expect(mockLocalStorage\u001b[33m.\u001b[39mremoveItem)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 137 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 138 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 139 |\u001b[39m\u001b[0m\n\n      at __tests__/auth/logout-security.test.tsx:136:45\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Security and Multi-Tab Tests \u203a LocalStorage Cleared \u203a should remove remember me flag from localStorage\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body />\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 134 |\u001b[39m       \u001b[36mawait\u001b[39m performLogoutCleanup()\u001b[33m;\u001b[39m\n     \u001b[90m 135 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 136 |\u001b[39m         expect(mockLocalStorage\u001b[33m.\u001b[39mremoveItem)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 137 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 138 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 139 |\u001b[39m\u001b[0m\n\n      at __tests__/auth/logout-security.test.tsx:136:45\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Security and Multi-Tab Tests \u203a LocalStorage Cleared \u203a should not affect non-auth localStorage items\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body />\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 134 |\u001b[39m       \u001b[36mawait\u001b[39m performLogoutCleanup()\u001b[33m;\u001b[39m\n     \u001b[90m 135 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 136 |\u001b[39m         expect(mockLocalStorage\u001b[33m.\u001b[39mremoveItem)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 137 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 138 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 139 |\u001b[39m\u001b[0m\n\n      at __tests__/auth/logout-security.test.tsx:136:45\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Security and Multi-Tab Tests \u203a Cookies Deleted \u203a should remove auth cookies\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body />\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 171 |\u001b[39m       \u001b[36mawait\u001b[39m performLogoutCleanup()\u001b[33m;\u001b[39m\n     \u001b[90m 172 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 173 |\u001b[39m         expect(mockStore\u001b[33m.\u001b[39mlogout)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 174 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 175 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 176 |\u001b[39m\u001b[0m\n\n      at __tests__/auth/logout-security.test.tsx:173:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Security and Multi-Tab Tests \u203a Cookies Deleted \u203a should remove session cookies\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body />\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 171 |\u001b[39m       \u001b[36mawait\u001b[39m performLogoutCleanup()\u001b[33m;\u001b[39m\n     \u001b[90m 172 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 173 |\u001b[39m         expect(mockStore\u001b[33m.\u001b[39mlogout)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 174 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 175 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 176 |\u001b[39m\u001b[0m\n\n      at __tests__/auth/logout-security.test.tsx:173:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Security and Multi-Tab Tests \u203a Cookies Deleted \u203a should remove remember me cookies\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body />\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 171 |\u001b[39m       \u001b[36mawait\u001b[39m performLogoutCleanup()\u001b[33m;\u001b[39m\n     \u001b[90m 172 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 173 |\u001b[39m         expect(mockStore\u001b[33m.\u001b[39mlogout)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 174 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 175 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 176 |\u001b[39m\u001b[0m\n\n      at __tests__/auth/logout-security.test.tsx:173:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Security and Multi-Tab Tests \u203a Cookies Deleted \u203a should preserve non-auth cookies\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body />\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 171 |\u001b[39m       \u001b[36mawait\u001b[39m performLogoutCleanup()\u001b[33m;\u001b[39m\n     \u001b[90m 172 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 173 |\u001b[39m         expect(mockStore\u001b[33m.\u001b[39mlogout)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 174 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 175 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 176 |\u001b[39m\u001b[0m\n\n      at __tests__/auth/logout-security.test.tsx:173:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Security and Multi-Tab Tests \u203a Browser Back Prevention \u203a should replace history state after logout\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    \u001b[0m \u001b[90m 228 |\u001b[39m         \u001b[36mreturn\u001b[39m \u001b[36mawait\u001b[39m verifyBackPrevention()\u001b[33m;\u001b[39m\n     \u001b[90m 229 |\u001b[39m       })\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 230 |\u001b[39m       expect(mockHistory\u001b[33m.\u001b[39mreplaceState)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 231 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 232 |\u001b[39m\n     \u001b[90m 233 |\u001b[39m     it(\u001b[32m'should prevent navigation to authenticated pages'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.<anonymous> (__tests__/auth/logout-security.test.tsx:230:40)\n\n  \u25cf Logout Security and Multi-Tab Tests \u203a Browser Back Prevention \u203a should prevent navigation to authenticated pages\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: false\n    Received: true\n\n    \u001b[0m \u001b[90m 235 |\u001b[39m         \u001b[36mawait\u001b[39m verifyBackPrevention()\u001b[33m;\u001b[39m\n     \u001b[90m 236 |\u001b[39m       })\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 237 |\u001b[39m       expect(mockStore\u001b[33m.\u001b[39misAuthenticated)\u001b[33m.\u001b[39mtoBe(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 238 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 239 |\u001b[39m\n     \u001b[90m 240 |\u001b[39m     it(\u001b[32m'should clear browser navigation state'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.<anonymous> (__tests__/auth/logout-security.test.tsx:237:41)\n\n  \u25cf Logout Security and Multi-Tab Tests \u203a Browser Back Prevention \u203a should clear browser navigation state\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    \u001b[0m \u001b[90m 242 |\u001b[39m         \u001b[36mreturn\u001b[39m \u001b[36mawait\u001b[39m verifyBackPrevention()\u001b[33m;\u001b[39m\n     \u001b[90m 243 |\u001b[39m       })\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 244 |\u001b[39m       expect(mockHistory\u001b[33m.\u001b[39mreplaceState)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 245 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 246 |\u001b[39m\n     \u001b[90m 247 |\u001b[39m     it(\u001b[32m'should ensure no cached authenticated state'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.<anonymous> (__tests__/auth/logout-security.test.tsx:244:40)\n\n  \u25cf Logout Security and Multi-Tab Tests \u203a Browser Back Prevention \u203a should ensure no cached authenticated state\n\n    expect(received).toBeNull()\n\n    Received: {\"email\": \"test@example.com\", \"full_name\": \"Test User\", \"id\": \"user-123\", \"permissions\": [\"read\", \"write\"], \"role\": \"admin\"}\n\n    \u001b[0m \u001b[90m 249 |\u001b[39m         \u001b[36mawait\u001b[39m verifyBackPrevention()\u001b[33m;\u001b[39m\n     \u001b[90m 250 |\u001b[39m       })\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 251 |\u001b[39m       expect(mockStore\u001b[33m.\u001b[39muser)\u001b[33m.\u001b[39mtoBeNull()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 252 |\u001b[39m       expect(mockStore\u001b[33m.\u001b[39mtoken)\u001b[33m.\u001b[39mtoBeNull()\u001b[33m;\u001b[39m\n     \u001b[90m 253 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 254 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/auth/logout-security.test.tsx:251:30)\n\n  \u25cf Logout Security and Multi-Tab Tests \u203a Security Validation \u203a should not leave sensitive data in memory\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body />\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 259 |\u001b[39m       \u001b[36mawait\u001b[39m performLogoutCleanup()\u001b[33m;\u001b[39m\n     \u001b[90m 260 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 261 |\u001b[39m         expect(mockStore\u001b[33m.\u001b[39mlogout)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 262 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 263 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 264 |\u001b[39m\u001b[0m\n\n      at __tests__/auth/logout-security.test.tsx:261:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Security and Multi-Tab Tests \u203a Security Validation \u203a should clear all authentication artifacts\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body />\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 259 |\u001b[39m       \u001b[36mawait\u001b[39m performLogoutCleanup()\u001b[33m;\u001b[39m\n     \u001b[90m 260 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 261 |\u001b[39m         expect(mockStore\u001b[33m.\u001b[39mlogout)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 262 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 263 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 264 |\u001b[39m\u001b[0m\n\n      at __tests__/auth/logout-security.test.tsx:261:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Security and Multi-Tab Tests \u203a Security Validation \u203a should ensure complete session termination\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body />\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 259 |\u001b[39m       \u001b[36mawait\u001b[39m performLogoutCleanup()\u001b[33m;\u001b[39m\n     \u001b[90m 260 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 261 |\u001b[39m         expect(mockStore\u001b[33m.\u001b[39mlogout)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 262 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 263 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 264 |\u001b[39m\u001b[0m\n\n      at __tests__/auth/logout-security.test.tsx:261:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Security and Multi-Tab Tests \u203a Security Validation \u203a should clear permissions and role data\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body />\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 259 |\u001b[39m       \u001b[36mawait\u001b[39m performLogoutCleanup()\u001b[33m;\u001b[39m\n     \u001b[90m 260 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 261 |\u001b[39m         expect(mockStore\u001b[33m.\u001b[39mlogout)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 262 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 263 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 264 |\u001b[39m\u001b[0m\n\n      at __tests__/auth/logout-security.test.tsx:261:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Security and Multi-Tab Tests \u203a Clean Slate for Next Login \u203a should reset all error states\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body />\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 299 |\u001b[39m       \u001b[36mawait\u001b[39m performLogoutCleanup()\u001b[33m;\u001b[39m\n     \u001b[90m 300 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 301 |\u001b[39m         expect(mockStore\u001b[33m.\u001b[39mreset)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 302 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 303 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 304 |\u001b[39m\u001b[0m\n\n      at __tests__/auth/logout-security.test.tsx:301:33\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Security and Multi-Tab Tests \u203a Clean Slate for Next Login \u203a should reset loading states\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body />\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 299 |\u001b[39m       \u001b[36mawait\u001b[39m performLogoutCleanup()\u001b[33m;\u001b[39m\n     \u001b[90m 300 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 301 |\u001b[39m         expect(mockStore\u001b[33m.\u001b[39mreset)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 302 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 303 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 304 |\u001b[39m\u001b[0m\n\n      at __tests__/auth/logout-security.test.tsx:301:33\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Security and Multi-Tab Tests \u203a Clean Slate for Next Login \u203a should clear any cached authentication state\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body />\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 299 |\u001b[39m       \u001b[36mawait\u001b[39m performLogoutCleanup()\u001b[33m;\u001b[39m\n     \u001b[90m 300 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 301 |\u001b[39m         expect(mockStore\u001b[33m.\u001b[39mreset)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 302 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 303 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 304 |\u001b[39m\u001b[0m\n\n      at __tests__/auth/logout-security.test.tsx:301:33\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Security and Multi-Tab Tests \u203a Clean Slate for Next Login \u203a should ensure fresh authentication flow on next login\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body />\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 299 |\u001b[39m       \u001b[36mawait\u001b[39m performLogoutCleanup()\u001b[33m;\u001b[39m\n     \u001b[90m 300 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 301 |\u001b[39m         expect(mockStore\u001b[33m.\u001b[39mreset)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 302 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 303 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 304 |\u001b[39m\u001b[0m\n\n      at __tests__/auth/logout-security.test.tsx:301:33\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Security and Multi-Tab Tests \u203a No Authenticated Content Visible \u203a should set authenticated status to false\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: false\n    Received: true\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body />\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 337 |\u001b[39m       \u001b[36mawait\u001b[39m performLogoutCleanup()\u001b[33m;\u001b[39m\n     \u001b[90m 338 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 339 |\u001b[39m         expect(mockStore\u001b[33m.\u001b[39misAuthenticated)\u001b[33m.\u001b[39mtoBe(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 340 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 341 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 342 |\u001b[39m\u001b[0m\n\n      at __tests__/auth/logout-security.test.tsx:339:43\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Security and Multi-Tab Tests \u203a No Authenticated Content Visible \u203a should clear user identity information\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: false\n    Received: true\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body />\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 337 |\u001b[39m       \u001b[36mawait\u001b[39m performLogoutCleanup()\u001b[33m;\u001b[39m\n     \u001b[90m 338 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 339 |\u001b[39m         expect(mockStore\u001b[33m.\u001b[39misAuthenticated)\u001b[33m.\u001b[39mtoBe(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 340 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 341 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 342 |\u001b[39m\u001b[0m\n\n      at __tests__/auth/logout-security.test.tsx:339:43\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Security and Multi-Tab Tests \u203a No Authenticated Content Visible \u203a should clear role and permissions\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: false\n    Received: true\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body />\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 337 |\u001b[39m       \u001b[36mawait\u001b[39m performLogoutCleanup()\u001b[33m;\u001b[39m\n     \u001b[90m 338 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 339 |\u001b[39m         expect(mockStore\u001b[33m.\u001b[39misAuthenticated)\u001b[33m.\u001b[39mtoBe(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 340 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 341 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 342 |\u001b[39m\u001b[0m\n\n      at __tests__/auth/logout-security.test.tsx:339:43\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Security and Multi-Tab Tests \u203a No Authenticated Content Visible \u203a should ensure no sensitive data remains in DOM\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: false\n    Received: true\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body />\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 337 |\u001b[39m       \u001b[36mawait\u001b[39m performLogoutCleanup()\u001b[33m;\u001b[39m\n     \u001b[90m 338 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 339 |\u001b[39m         expect(mockStore\u001b[33m.\u001b[39misAuthenticated)\u001b[33m.\u001b[39mtoBe(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 340 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 341 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 342 |\u001b[39m\u001b[0m\n\n      at __tests__/auth/logout-security.test.tsx:339:43\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\nSummary of all failing tests\nFAIL __tests__/integration/thread-navigation.test.tsx (9.832 s)\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should switch threads under 200ms performance target\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:77:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should switch threads under 200ms performance target\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:77:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should switch threads under 200ms performance target\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:77:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should switch threads under 200ms performance target\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:77:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should switch threads under 200ms performance target\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:77:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should handle rapid thread switching without state corruption\n\n    expect(element).toHaveClass(\"bg-emerald-50\")\n\n    Expected the element to have class:\n      bg-emerald-50\n    Received:\n      w-full p-4 text-left hover:bg-gray-50 transition-colors duration-200 border-b border-gray-100 group relative disabled:opacity-50 disabled:cursor-not-allowed\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"w-80 h-full bg-white/95 backdrop-blur-md border-r border-gray-200 flex flex-col\"\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"chat-sidebar\"\u001b[39m\n            \u001b[33mrole\u001b[39m=\u001b[32m\"complementary\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"p-4 border-b border-gray-200\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<button\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"w-full flex items-center justify-center space-x-2 px-4 py-3 bg-emerald-500 hover:bg-emerald-600 text-white rounded-lg transition-all duration-200 transform hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed shadow-sm hover:shadow-md\"\u001b[39m\n                \u001b[33mdata-testid\u001b[39m=\u001b[32m\"new-chat-button\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<svg\u001b[39m\n                  \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-plus w-5 h-5\"\u001b[39m\n                  \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                  \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                  \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                  \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                  \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                  \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                  \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                  \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                  \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<path\u001b[39m\n                    \u001b[33md\u001b[39m=\u001b[32m\"M5 12h14\"\u001b[39m\n                  \u001b[36m/>\u001b[39m\n                  \u001b[36m<path\u001b[39m\n                    \u001b[33md\u001b[39m=\u001b[32m\"M12 5v14\"\u001b[39m\n                  \u001b[36m/>\u001b[39m\n                \u001b[36m</svg>\u001b[39m\n                \u001b[36m<span\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"font-medium\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0mNew Chat\u001b[0m\n                \u001b[36m</span>\u001b[39m\n              \u001b[36m</button>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"p-4 border-b border-gray-100\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<svg\u001b[39m\n                  \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-search absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400\"\u001b[39m\n                  \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                  \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                  \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                  \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                  \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                  \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                  \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                  \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                  \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<path\u001b[39m\n                    \u001b[33md\u001b[39m=\u001b[32m\"m21 21-4.34-4.34\"\u001b[39m\n                  \u001b[36m/>\u001b[39m\n                  \u001b[36m<circle\u001b[39m\n                    \u001b[33mcx\u001b[39m=\u001b[32m\"11\"\u001b[39m\n                    \u001b[33mcy\u001b[39m=\u001b[32m\"11\"\u001b[39m\n                    \u001b[33mr\u001b[39m=\u001b[32m\"8\"\u001b[39m\n                  \u001b[36m/>\u001b[39m\n                \u001b[36m</svg>\u001b[39m\n                \u001b[36m<input\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"w-full pl-10 pr-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500 transition-all duration-200\"\u001b[39m\n                  \u001b[33mdata-testid\u001b[39m=\u001b[32m\"search-input\"\u001b[39m\n                  \u001b[33mplaceholder\u001b[39m=\u001b[32m\"Search conversations...\"\u001b[39m\n                  \u001b[33mtype\u001b[39m=\u001b[32m\"text\"\u001b[39m\n                  \u001b[33mvalue\u001b[39m=\u001b[32m\"\"\u001b[39m\n                \u001b[36m/>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"flex-1 overflow-y-auto\"\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"thread-list\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mstyle\u001b[39m=\u001b[32m\"opacity: 1; transform: none;\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<button\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"w-full p-4 text-left hover:bg-gray-50 transition-colors duration-200 border-b border-gray-100 group relative disabled:opacity-50 disabled:cursor-not-allowed\"\u001b[39m\n                  \u001b[33mdata-testid\u001b[39m=\u001b[32m\"thread-item-thread-1\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-start space-x-3 pl-2\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<svg\u001b[39m\n                      \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-message-square w-5 h-5 mt-0.5 flex-shrink-0 text-gray-400\"\u001b[39m\n                      \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                      \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                      \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                      \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                      \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</svg>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"flex-1 min-w-0\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<p\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"text-sm font-medium truncate text-gray-900\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[0mAI Optimization Discussion\u001b[0m\n                      \u001b[36m</p>\u001b[39m\n                      \u001b[36m<div\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center space-x-3 mt-1\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[36m<span\u001b[39m\n                          \u001b[33mclass\u001b[39m=\u001b[32m\"text-xs text-gray-500 flex items-center\"\u001b[39m\n                        \u001b[36m>\u001b[39m\n                          \u001b[36m<svg\u001b[39m\n                            \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                            \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-clock w-3 h-3 mr-1\"\u001b[39m\n                            \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                            \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                            \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                            \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                            \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                            \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                            \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                            \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                            \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                          \u001b[36m>\u001b[39m\n                            \u001b[36m<path\u001b[39m\n                              \u001b[33md\u001b[39m=\u001b[32m\"M12 6v6l4 2\"\u001b[39m\n                            \u001b[36m/>\u001b[39m\n                            \u001b[36m<circle\u001b[39m\n                              \u001b[33mcx\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                              \u001b[33mcy\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                              \u001b[33mr\u001b[39m=\u001b[32m\"10\"\u001b[39m\n                            \u001b[36m/>\u001b[39m\n                          \u001b[36m</svg>\u001b[39m\n                          \u001b[0mless than a minute ago\u001b[0m\n                        \u001b[36m</span>\u001b[39m\n                        \u001b[36m<span\u001b[39m\n                          \u001b[33mclass\u001b[39m=\u001b[32m\"text-xs text-gray-500\"\u001b[39m\n                        \u001b[36m>\u001b[39m\n                          \u001b[0m15\u001b[0m\n                          \u001b[0m message\u001b[0m\n                          \u001b[0ms\u001b[0m\n                        \u001b[36m</span>\u001b[39m\n                      \u001b[36m</div>\u001b[39m\n                    \u001b[36m</div>\u001b[39m\n                    \u001b[36m<svg\u001b[39m\n                      \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-chevron-right w-4 h-4 text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity duration-200\"\u001b[39m\n                      \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                      \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                      \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                      \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                      \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"m9 18 6-6-6-6\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</svg>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                \u001b[36m</button>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mstyle\u001b[39m=\u001b[32m\"opacity: 1; transform: none;\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<button\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"w-full p-4 text-left hover:bg-gray-50 transition-colors duration-200 border-b border-gray-100 group relative disabled:opacity-50 disabled:cursor-not-allowed\"\u001b[39m\n                  \u001b[33mdata-testid\u001b[39m=\u001b[32m\"thread-item-thread-2\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-start space-x-3 pl-2\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<svg\u001b[39m\n                      \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-message-square w-5 h-5 mt-0.5 flex-shrink-0 text-gray-400\"\u001b[39m\n                      \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                      \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                      \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                      \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                      \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</svg>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"flex-1 min-w-0\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<p\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"text-sm font-medium truncate text-gray-900\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[0mPerformance Analysis\u001b[0m\n                      \u001b[36m</p>\u001b[39m\n                      \u001b[36m<div\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center space-x-3 mt-1\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[36m<span\u001b[39m\n                          \u001b[33mclass\u001b[39m=\u001b[32m\"text-xs text-gray-500 flex items-center\"\u001b[39m\n                        \u001b[36m>\u001b[39m\n                          \u001b[36m<svg\u001b[39m\n                            \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                            \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-clock w-3 h-3 mr-1\"\u001b[39m\n                            \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                            \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                            \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                            \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                            \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                            \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                            \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                            \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                            \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                          \u001b[36m>\u001b[39m\n                            \u001b[36m<path\u001b[39m\n                              \u001b[33md\u001b[39m=\u001b[32m\"M12 6v6l4 2\"\u001b[39m\n                            \u001b[36m/>\u001b[39m\n                            \u001b[36m<circle\u001b[39m\n                              \u001b[33mcx\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                              \u001b[33mcy\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                              \u001b[33mr\u001b[39m=\u001b[32m\"10\"\u001b[39m\n                            \u001b[36m/>\u001b[39m\n                          \u001b[36m</svg>\u001b[39m\n                          \u001b[0mabout 1 hour ago\u001b[0m\n                        \u001b[36m</span>\u001b[39m\n                        \u001b[36m<span\u001b[39m\n                          \u001b[33mclass\u001b[39m=\u001b[32m\"text-xs text-gray-500\"\u001b[39m\n                        \u001b[36m>\u001b[39m\n                          \u001b[0m8\u001b[0m\n                          \u001b[0m message\u001b[0m\n                          \u001b[0ms\u001b[0m\n                        \u001b[36m</span>\u001b[39m\n                      \u001b[36m</div>\u001b[39m\n                    \u001b[36m</div>\u001b[39m\n                    \u001b[36m<svg\u001b[39m\n                      \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-chevron-right w-4 h-4 text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity duration-200\"\u001b[39m\n                      \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                      \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                      \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                      \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                      \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"m9 18 6-6-6-6\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</svg>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                \u001b[36m</button>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mstyle\u001b[39m=\u001b[32m\"opacity: 1; transform: none;\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<button\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"w-full p-4 text-left hover:bg-gray-50 transition-colors duration-200 border-b border-gray-100 group relative disabled:opacity-50 disabled:cursor-not-allowed\"\u001b[39m\n                  \u001b[33mdata-testid\u001b[39m=\u001b[32m\"thread-item-thread-3\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-start space-x-3 pl-2\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<svg\u001b[39m\n                      \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-message-square w-5 h-5 mt-0.5 flex-shrink-0 text-gray-400\"\u001b[39m\n                      \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                      \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                      \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                      \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                      \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</svg>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"flex-1 min-w-0\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<p\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"text-sm font-medium truncate text-gray-900\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[0mData Processing Pipeline\u001b[0m\n                      \u001b[36m</p>\u001b[39m\n                      \u001b[36m<div\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center space-x-3 mt-1\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[36m<span\u001b[39m\n                          \u001b[33mclass\u001b[39m=\u001b[32m\"text-xs text-gray-500 flex items-center\"\u001b[39m\n                        \u001b[36m>\u001b[39m\n                          \u001b[36m<svg\u001b[39m\n                            \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                            \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-clock w-3 h-3 mr-1\"\u001b[39m\n                            \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                            \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                            \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                            \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                            \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                            \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                            \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                            \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                            \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                          \u001b[36m>\u001b[39m\n                            \u001b[36m<path\u001b[39m\n                              \u001b[33md\u001b[39m=\u001b[32m\"M12 6v6l4 2\"\u001b[39m\n                            \u001b[36m/>\u001b[39m\n                            \u001b[36m<circle\u001b[39m\n                              \u001b[33mcx\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                              \u001b[33mcy\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                              \u001b[33mr\u001b[39m=\u001b[32m\"10\"\u001b[39m\n                            \u001b[36m/>\u001b[39m\n                          \u001b[36m</svg>\u001b[39m\n                          \u001b[0mabout 2 hours ago\u001b[0m\n                        \u001b[36m</span>\u001b[39m\n                        \u001b[36m<span\u001b[39m\n                          \u001b[33mclass\u001b[39m=\u001b[32m\"text-xs text-gray-500\"\u001b[39m\n                        \u001b[36m>\u001b[39m\n                          \u001b[0m32\u001b[0m\n                          \u001b[0m message\u001b[0m\n                          \u001b[0ms\u001b[0m\n                        \u001b[36m</span>\u001b[39m\n                      \u001b[36m</div>\u001b[39m\n                    \u001b[36m</div>\u001b[39m\n                    \u001b[36m<svg\u001b[39m\n                      \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-chevron-right w-4 h-4 text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity duration-200\"\u001b[39m\n                      \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                      \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                      \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                      \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                      \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"m9 18 6-6-6-6\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</svg>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                \u001b[36m</button>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"p-4 border-t border-gray-200 bg-gray-50\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<p\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"text-xs text-gray-500 text-center mb-2\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[0m3\u001b[0m\n                \u001b[0m conversation\u001b[0m\n                \u001b[0ms\u001b[0m\n              \u001b[36m</p>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 102 |\u001b[39m       \n     \u001b[90m 103 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 104 |\u001b[39m         expect(thread3)\u001b[33m.\u001b[39mtoHaveClass(\u001b[32m'bg-emerald-50'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 105 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 106 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 107 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/thread-navigation.test.tsx:104:25\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should handle rapid thread switching without state corruption\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:99:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should handle rapid thread switching without state corruption\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:100:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should handle rapid thread switching without state corruption\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:101:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should handle rapid thread switching without state corruption\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:99:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should handle rapid thread switching without state corruption\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:100:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should handle rapid thread switching without state corruption\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:101:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should handle rapid thread switching without state corruption\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:99:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should handle rapid thread switching without state corruption\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:100:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should handle rapid thread switching without state corruption\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:101:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should handle rapid thread switching without state corruption\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:99:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should handle rapid thread switching without state corruption\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:100:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should handle rapid thread switching without state corruption\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:101:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should handle rapid thread switching without state corruption\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:99:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should handle rapid thread switching without state corruption\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:100:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should handle rapid thread switching without state corruption\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:101:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should debounce thread switching to prevent excessive calls\n\n    expect(jest.fn()).toHaveBeenCalledTimes(expected)\n\n    Expected number of calls: 1\n    Received number of calls: 0\n\n    \u001b[0m \u001b[90m 129 |\u001b[39m       \n     \u001b[90m 130 |\u001b[39m       \u001b[90m// Should only trigger once due to debouncing\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 131 |\u001b[39m       expect(switchHandler)\u001b[33m.\u001b[39mtoHaveBeenCalledTimes(\u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 132 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 134 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:131:29)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should debounce thread switching to prevent excessive calls\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:124:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should debounce thread switching to prevent excessive calls\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:125:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should debounce thread switching to prevent excessive calls\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:126:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should debounce thread switching to prevent excessive calls\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:124:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should debounce thread switching to prevent excessive calls\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:125:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should debounce thread switching to prevent excessive calls\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:126:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should debounce thread switching to prevent excessive calls\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:124:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should debounce thread switching to prevent excessive calls\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:125:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should debounce thread switching to prevent excessive calls\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:126:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should debounce thread switching to prevent excessive calls\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:124:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should debounce thread switching to prevent excessive calls\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:125:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should debounce thread switching to prevent excessive calls\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:126:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should debounce thread switching to prevent excessive calls\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:124:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should debounce thread switching to prevent excessive calls\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:125:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Thread Switching Performance \u203a should debounce thread switching to prevent excessive calls\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:126:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a URL Synchronization \u203a should update URL when thread is selected\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"/chat/thread-2\"\n\n    Number of calls: 0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"w-80 h-full bg-white/95 backdrop-blur-md border-r border-gray-200 flex flex-col\"\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"chat-sidebar\"\u001b[39m\n            \u001b[33mrole\u001b[39m=\u001b[32m\"complementary\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"p-4 border-b border-gray-200\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<button\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"w-full flex items-center justify-center space-x-2 px-4 py-3 bg-emerald-500 hover:bg-emerald-600 text-white rounded-lg transition-all duration-200 transform hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed shadow-sm hover:shadow-md\"\u001b[39m\n                \u001b[33mdata-testid\u001b[39m=\u001b[32m\"new-chat-button\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<svg\u001b[39m\n                  \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-plus w-5 h-5\"\u001b[39m\n                  \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                  \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                  \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                  \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                  \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                  \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                  \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                  \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                  \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<path\u001b[39m\n                    \u001b[33md\u001b[39m=\u001b[32m\"M5 12h14\"\u001b[39m\n                  \u001b[36m/>\u001b[39m\n                  \u001b[36m<path\u001b[39m\n                    \u001b[33md\u001b[39m=\u001b[32m\"M12 5v14\"\u001b[39m\n                  \u001b[36m/>\u001b[39m\n                \u001b[36m</svg>\u001b[39m\n                \u001b[36m<span\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"font-medium\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0mNew Chat\u001b[0m\n                \u001b[36m</span>\u001b[39m\n              \u001b[36m</button>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"p-4 border-b border-gray-100\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<svg\u001b[39m\n                  \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-search absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400\"\u001b[39m\n                  \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                  \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                  \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                  \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                  \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                  \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                  \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                  \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                  \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<path\u001b[39m\n                    \u001b[33md\u001b[39m=\u001b[32m\"m21 21-4.34-4.34\"\u001b[39m\n                  \u001b[36m/>\u001b[39m\n                  \u001b[36m<circle\u001b[39m\n                    \u001b[33mcx\u001b[39m=\u001b[32m\"11\"\u001b[39m\n                    \u001b[33mcy\u001b[39m=\u001b[32m\"11\"\u001b[39m\n                    \u001b[33mr\u001b[39m=\u001b[32m\"8\"\u001b[39m\n                  \u001b[36m/>\u001b[39m\n                \u001b[36m</svg>\u001b[39m\n                \u001b[36m<input\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"w-full pl-10 pr-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500 transition-all duration-200\"\u001b[39m\n                  \u001b[33mdata-testid\u001b[39m=\u001b[32m\"search-input\"\u001b[39m\n                  \u001b[33mplaceholder\u001b[39m=\u001b[32m\"Search conversations...\"\u001b[39m\n                  \u001b[33mtype\u001b[39m=\u001b[32m\"text\"\u001b[39m\n                  \u001b[33mvalue\u001b[39m=\u001b[32m\"\"\u001b[39m\n                \u001b[36m/>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"flex-1 overflow-y-auto\"\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"thread-list\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mstyle\u001b[39m=\u001b[32m\"opacity: 1; transform: none;\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<button\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"w-full p-4 text-left hover:bg-gray-50 transition-colors duration-200 border-b border-gray-100 group relative disabled:opacity-50 disabled:cursor-not-allowed\"\u001b[39m\n                  \u001b[33mdata-testid\u001b[39m=\u001b[32m\"thread-item-thread-1\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-start space-x-3 pl-2\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<svg\u001b[39m\n                      \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-message-square w-5 h-5 mt-0.5 flex-shrink-0 text-gray-400\"\u001b[39m\n                      \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                      \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                      \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                      \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                      \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</svg>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"flex-1 min-w-0\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<p\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"text-sm font-medium truncate text-gray-900\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[0mAI Optimization Discussion\u001b[0m\n                      \u001b[36m</p>\u001b[39m\n                      \u001b[36m<div\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center space-x-3 mt-1\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[36m<span\u001b[39m\n                          \u001b[33mclass\u001b[39m=\u001b[32m\"text-xs text-gray-500 flex items-center\"\u001b[39m\n                        \u001b[36m>\u001b[39m\n                          \u001b[36m<svg\u001b[39m\n                            \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                            \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-clock w-3 h-3 mr-1\"\u001b[39m\n                            \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                            \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                            \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                            \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                            \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                            \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                            \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                            \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                            \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                          \u001b[36m>\u001b[39m\n                            \u001b[36m<path\u001b[39m\n                              \u001b[33md\u001b[39m=\u001b[32m\"M12 6v6l4 2\"\u001b[39m\n                            \u001b[36m/>\u001b[39m\n                            \u001b[36m<circle\u001b[39m\n                              \u001b[33mcx\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                              \u001b[33mcy\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                              \u001b[33mr\u001b[39m=\u001b[32m\"10\"\u001b[39m\n                            \u001b[36m/>\u001b[39m\n                          \u001b[36m</svg>\u001b[39m\n                          \u001b[0mless than a minute ago\u001b[0m\n                        \u001b[36m</span>\u001b[39m\n                        \u001b[36m<span\u001b[39m\n                          \u001b[33mclass\u001b[39m=\u001b[32m\"text-xs text-gray-500\"\u001b[39m\n                        \u001b[36m>\u001b[39m\n                          \u001b[0m15\u001b[0m\n                          \u001b[0m message\u001b[0m\n                          \u001b[0ms\u001b[0m\n                        \u001b[36m</span>\u001b[39m\n                      \u001b[36m</div>\u001b[39m\n                    \u001b[36m</div>\u001b[39m\n                    \u001b[36m<svg\u001b[39m\n                      \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-chevron-right w-4 h-4 text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity duration-200\"\u001b[39m\n                      \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                      \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                      \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                      \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                      \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"m9 18 6-6-6-6\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</svg>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                \u001b[36m</button>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mstyle\u001b[39m=\u001b[32m\"opacity: 1; transform: none;\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<button\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"w-full p-4 text-left hover:bg-gray-50 transition-colors duration-200 border-b border-gray-100 group relative disabled:opacity-50 disabled:cursor-not-allowed\"\u001b[39m\n                  \u001b[33mdata-testid\u001b[39m=\u001b[32m\"thread-item-thread-2\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-start space-x-3 pl-2\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<svg\u001b[39m\n                      \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-message-square w-5 h-5 mt-0.5 flex-shrink-0 text-gray-400\"\u001b[39m\n                      \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                      \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                      \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                      \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                      \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</svg>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"flex-1 min-w-0\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<p\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"text-sm font-medium truncate text-gray-900\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[0mPerformance Analysis\u001b[0m\n                      \u001b[36m</p>\u001b[39m\n                      \u001b[36m<div\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center space-x-3 mt-1\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[36m<span\u001b[39m\n                          \u001b[33mclass\u001b[39m=\u001b[32m\"text-xs text-gray-500 flex items-center\"\u001b[39m\n                        \u001b[36m>\u001b[39m\n                          \u001b[36m<svg\u001b[39m\n                            \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                            \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-clock w-3 h-3 mr-1\"\u001b[39m\n                            \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                            \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                            \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                            \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                            \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                            \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                            \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                            \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                            \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                          \u001b[36m>\u001b[39m\n                            \u001b[36m<path\u001b[39m\n                              \u001b[33md\u001b[39m=\u001b[32m\"M12 6v6l4 2\"\u001b[39m\n                            \u001b[36m/>\u001b[39m\n                            \u001b[36m<circle\u001b[39m\n                              \u001b[33mcx\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                              \u001b[33mcy\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                              \u001b[33mr\u001b[39m=\u001b[32m\"10\"\u001b[39m\n                            \u001b[36m/>\u001b[39m\n                          \u001b[36m</svg>\u001b[39m\n                          \u001b[0mabout 1 hour ago\u001b[0m\n                        \u001b[36m</span>\u001b[39m\n                        \u001b[36m<span\u001b[39m\n                          \u001b[33mclass\u001b[39m=\u001b[32m\"text-xs text-gray-500\"\u001b[39m\n                        \u001b[36m>\u001b[39m\n                          \u001b[0m8\u001b[0m\n                          \u001b[0m message\u001b[0m\n                          \u001b[0ms\u001b[0m\n                        \u001b[36m</span>\u001b[39m\n                      \u001b[36m</div>\u001b[39m\n                    \u001b[36m</div>\u001b[39m\n                    \u001b[36m<svg\u001b[39m\n                      \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-chevron-right w-4 h-4 text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity duration-200\"\u001b[39m\n                      \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                      \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                      \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                      \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                      \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"m9 18 6-6-6-6\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</svg>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                \u001b[36m</button>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mstyle\u001b[39m=\u001b[32m\"opacity: 1; transform: none;\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<button\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"w-full p-4 text-left hover:bg-gray-50 transition-colors duration-200 border-b border-gray-100 group relative disabled:opacity-50 disabled:cursor-not-allowed\"\u001b[39m\n                  \u001b[33mdata-testid\u001b[39m=\u001b[32m\"thread-item-thread-3\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-start space-x-3 pl-2\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<svg\u001b[39m\n                      \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-message-square w-5 h-5 mt-0.5 flex-shrink-0 text-gray-400\"\u001b[39m\n                      \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                      \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                      \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                      \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                      \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</svg>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"flex-1 min-w-0\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<p\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"text-sm font-medium truncate text-gray-900\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[0mData Processing Pipeline\u001b[0m\n                      \u001b[36m</p>\u001b[39m\n                      \u001b[36m<div\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center space-x-3 mt-1\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[36m<span\u001b[39m\n                          \u001b[33mclass\u001b[39m=\u001b[32m\"text-xs text-gray-500 flex items-center\"\u001b[39m\n                        \u001b[36m>\u001b[39m\n                          \u001b[36m<svg\u001b[39m\n                            \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                            \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-clock w-3 h-3 mr-1\"\u001b[39m\n                            \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                            \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                            \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                            \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                            \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                            \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                            \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                            \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                            \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                          \u001b[36m>\u001b[39m\n                            \u001b[36m<path\u001b[39m\n                              \u001b[33md\u001b[39m=\u001b[32m\"M12 6v6l4 2\"\u001b[39m\n                            \u001b[36m/>\u001b[39m\n                            \u001b[36m<circle\u001b[39m\n                              \u001b[33mcx\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                              \u001b[33mcy\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                              \u001b[33mr\u001b[39m=\u001b[32m\"10\"\u001b[39m\n                            \u001b[36m/>\u001b[39m\n                          \u001b[36m</svg>\u001b[39m\n                          \u001b[0mabout 2 hours ago\u001b[0m\n                        \u001b[36m</span>\u001b[39m\n                        \u001b[36m<span\u001b[39m\n                          \u001b[33mclass\u001b[39m=\u001b[32m\"text-xs text-gray-500\"\u001b[39m\n                        \u001b[36m>\u001b[39m\n                          \u001b[0m32\u001b[0m\n                          \u001b[0m message\u001b[0m\n                          \u001b[0ms\u001b[0m\n                        \u001b[36m</span>\u001b[39m\n                      \u001b[36m</div>\u001b[39m\n                    \u001b[36m</div>\u001b[39m\n                    \u001b[36m<svg\u001b[39m\n                      \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-chevron-right w-4 h-4 text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity duration-200\"\u001b[39m\n                      \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                      \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                      \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                      \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                      \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"m9 18 6-6-6-6\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</svg>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                \u001b[36m</button>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"p-4 border-t border-gray-200 bg-gray-50\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<p\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"text-xs text-gray-500 text-center mb-2\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[0m3\u001b[0m\n                \u001b[0m conversation\u001b[0m\n                \u001b[0ms\u001b[0m\n              \u001b[36m</p>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 146 |\u001b[39m       \n     \u001b[90m 147 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 148 |\u001b[39m         expect(mockPush)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'/chat/thread-2'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 149 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 150 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 151 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/thread-navigation.test.tsx:148:26\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Thread Navigation Integration Tests \u203a URL Synchronization \u203a should update URL when thread is selected\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:145:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a URL Synchronization \u203a should update URL when thread is selected\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:145:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a URL Synchronization \u203a should update URL when thread is selected\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:145:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a URL Synchronization \u203a should update URL when thread is selected\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:145:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a URL Synchronization \u203a should update URL when thread is selected\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:145:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a URL Synchronization \u203a should preserve URL state across navigation\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"/chat/thread-2\"\n\n    Number of calls: 0\n\n    \u001b[0m \u001b[90m 178 |\u001b[39m       \u001b[36mawait\u001b[39m user\u001b[33m.\u001b[39mclick(thread2)\u001b[33m;\u001b[39m\n     \u001b[90m 179 |\u001b[39m       \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 180 |\u001b[39m       expect(mockPush)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'/chat/thread-2'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 181 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 182 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 183 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:180:24)\n\n  \u25cf Thread Navigation Integration Tests \u203a URL Synchronization \u203a should preserve URL state across navigation\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:177:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a URL Synchronization \u203a should preserve URL state across navigation\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:178:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a URL Synchronization \u203a should preserve URL state across navigation\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:177:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a URL Synchronization \u203a should preserve URL state across navigation\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:178:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a URL Synchronization \u203a should preserve URL state across navigation\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:177:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a URL Synchronization \u203a should preserve URL state across navigation\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:178:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a URL Synchronization \u203a should preserve URL state across navigation\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:177:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a URL Synchronization \u203a should preserve URL state across navigation\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:178:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a URL Synchronization \u203a should preserve URL state across navigation\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:177:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a URL Synchronization \u203a should preserve URL state across navigation\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:178:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Error Recovery \u203a should handle WebSocket disconnection during navigation\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:286:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Error Recovery \u203a should handle WebSocket disconnection during navigation\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:286:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Error Recovery \u203a should handle WebSocket disconnection during navigation\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:286:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Error Recovery \u203a should handle WebSocket disconnection during navigation\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:286:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Error Recovery \u203a should handle WebSocket disconnection during navigation\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:286:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Multi-Session Synchronization \u203a should sync thread updates across multiple tabs\n\n    expect(element).toHaveClass(\"bg-emerald-50\")\n\n    Expected the element to have class:\n      bg-emerald-50\n    Received:\n      w-full p-4 text-left hover:bg-gray-50 transition-colors duration-200 border-b border-gray-100 group relative disabled:opacity-50 disabled:cursor-not-allowed\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"w-80 h-full bg-white/95 backdrop-blur-md border-r border-gray-200 flex flex-col\"\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"chat-sidebar\"\u001b[39m\n            \u001b[33mrole\u001b[39m=\u001b[32m\"complementary\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"p-4 border-b border-gray-200\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<button\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"w-full flex items-center justify-center space-x-2 px-4 py-3 bg-emerald-500 hover:bg-emerald-600 text-white rounded-lg transition-all duration-200 transform hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed shadow-sm hover:shadow-md\"\u001b[39m\n                \u001b[33mdata-testid\u001b[39m=\u001b[32m\"new-chat-button\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<svg\u001b[39m\n                  \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-plus w-5 h-5\"\u001b[39m\n                  \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                  \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                  \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                  \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                  \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                  \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                  \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                  \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                  \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<path\u001b[39m\n                    \u001b[33md\u001b[39m=\u001b[32m\"M5 12h14\"\u001b[39m\n                  \u001b[36m/>\u001b[39m\n                  \u001b[36m<path\u001b[39m\n                    \u001b[33md\u001b[39m=\u001b[32m\"M12 5v14\"\u001b[39m\n                  \u001b[36m/>\u001b[39m\n                \u001b[36m</svg>\u001b[39m\n                \u001b[36m<span\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"font-medium\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0mNew Chat\u001b[0m\n                \u001b[36m</span>\u001b[39m\n              \u001b[36m</button>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"p-4 border-b border-gray-100\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<svg\u001b[39m\n                  \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-search absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400\"\u001b[39m\n                  \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                  \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                  \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                  \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                  \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                  \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                  \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                  \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                  \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<path\u001b[39m\n                    \u001b[33md\u001b[39m=\u001b[32m\"m21 21-4.34-4.34\"\u001b[39m\n                  \u001b[36m/>\u001b[39m\n                  \u001b[36m<circle\u001b[39m\n                    \u001b[33mcx\u001b[39m=\u001b[32m\"11\"\u001b[39m\n                    \u001b[33mcy\u001b[39m=\u001b[32m\"11\"\u001b[39m\n                    \u001b[33mr\u001b[39m=\u001b[32m\"8\"\u001b[39m\n                  \u001b[36m/>\u001b[39m\n                \u001b[36m</svg>\u001b[39m\n                \u001b[36m<input\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"w-full pl-10 pr-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500 transition-all duration-200\"\u001b[39m\n                  \u001b[33mdata-testid\u001b[39m=\u001b[32m\"search-input\"\u001b[39m\n                  \u001b[33mplaceholder\u001b[39m=\u001b[32m\"Search conversations...\"\u001b[39m\n                  \u001b[33mtype\u001b[39m=\u001b[32m\"text\"\u001b[39m\n                  \u001b[33mvalue\u001b[39m=\u001b[32m\"\"\u001b[39m\n                \u001b[36m/>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"flex-1 overflow-y-auto\"\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"thread-list\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mstyle\u001b[39m=\u001b[32m\"opacity: 1; transform: none;\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<button\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"w-full p-4 text-left hover:bg-gray-50 transition-colors duration-200 border-b border-gray-100 group relative disabled:opacity-50 disabled:cursor-not-allowed\"\u001b[39m\n                  \u001b[33mdata-testid\u001b[39m=\u001b[32m\"thread-item-thread-1\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-start space-x-3 pl-2\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<svg\u001b[39m\n                      \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-message-square w-5 h-5 mt-0.5 flex-shrink-0 text-gray-400\"\u001b[39m\n                      \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                      \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                      \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                      \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                      \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</svg>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"flex-1 min-w-0\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<p\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"text-sm font-medium truncate text-gray-900\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[0mAI Optimization Discussion\u001b[0m\n                      \u001b[36m</p>\u001b[39m\n                      \u001b[36m<div\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center space-x-3 mt-1\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[36m<span\u001b[39m\n                          \u001b[33mclass\u001b[39m=\u001b[32m\"text-xs text-gray-500 flex items-center\"\u001b[39m\n                        \u001b[36m>\u001b[39m\n                          \u001b[36m<svg\u001b[39m\n                            \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                            \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-clock w-3 h-3 mr-1\"\u001b[39m\n                            \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                            \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                            \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                            \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                            \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                            \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                            \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                            \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                            \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                          \u001b[36m>\u001b[39m\n                            \u001b[36m<path\u001b[39m\n                              \u001b[33md\u001b[39m=\u001b[32m\"M12 6v6l4 2\"\u001b[39m\n                            \u001b[36m/>\u001b[39m\n                            \u001b[36m<circle\u001b[39m\n                              \u001b[33mcx\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                              \u001b[33mcy\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                              \u001b[33mr\u001b[39m=\u001b[32m\"10\"\u001b[39m\n                            \u001b[36m/>\u001b[39m\n                          \u001b[36m</svg>\u001b[39m\n                          \u001b[0mless than a minute ago\u001b[0m\n                        \u001b[36m</span>\u001b[39m\n                        \u001b[36m<span\u001b[39m\n                          \u001b[33mclass\u001b[39m=\u001b[32m\"text-xs text-gray-500\"\u001b[39m\n                        \u001b[36m>\u001b[39m\n                          \u001b[0m15\u001b[0m\n                          \u001b[0m message\u001b[0m\n                          \u001b[0ms\u001b[0m\n                        \u001b[36m</span>\u001b[39m\n                      \u001b[36m</div>\u001b[39m\n                    \u001b[36m</div>\u001b[39m\n                    \u001b[36m<svg\u001b[39m\n                      \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-chevron-right w-4 h-4 text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity duration-200\"\u001b[39m\n                      \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                      \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                      \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                      \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                      \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"m9 18 6-6-6-6\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</svg>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                \u001b[36m</button>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mstyle\u001b[39m=\u001b[32m\"opacity: 1; transform: none;\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<button\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"w-full p-4 text-left hover:bg-gray-50 transition-colors duration-200 border-b border-gray-100 group relative disabled:opacity-50 disabled:cursor-not-allowed\"\u001b[39m\n                  \u001b[33mdata-testid\u001b[39m=\u001b[32m\"thread-item-thread-2\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-start space-x-3 pl-2\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<svg\u001b[39m\n                      \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-message-square w-5 h-5 mt-0.5 flex-shrink-0 text-gray-400\"\u001b[39m\n                      \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                      \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                      \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                      \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                      \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</svg>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"flex-1 min-w-0\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<p\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"text-sm font-medium truncate text-gray-900\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[0mPerformance Analysis\u001b[0m\n                      \u001b[36m</p>\u001b[39m\n                      \u001b[36m<div\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center space-x-3 mt-1\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[36m<span\u001b[39m\n                          \u001b[33mclass\u001b[39m=\u001b[32m\"text-xs text-gray-500 flex items-center\"\u001b[39m\n                        \u001b[36m>\u001b[39m\n                          \u001b[36m<svg\u001b[39m\n                            \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                            \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-clock w-3 h-3 mr-1\"\u001b[39m\n                            \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                            \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                            \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                            \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                            \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                            \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                            \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                            \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                            \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                          \u001b[36m>\u001b[39m\n                            \u001b[36m<path\u001b[39m\n                              \u001b[33md\u001b[39m=\u001b[32m\"M12 6v6l4 2\"\u001b[39m\n                            \u001b[36m/>\u001b[39m\n                            \u001b[36m<circle\u001b[39m\n                              \u001b[33mcx\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                              \u001b[33mcy\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                              \u001b[33mr\u001b[39m=\u001b[32m\"10\"\u001b[39m\n                            \u001b[36m/>\u001b[39m\n                          \u001b[36m</svg>\u001b[39m\n                          \u001b[0mabout 1 hour ago\u001b[0m\n                        \u001b[36m</span>\u001b[39m\n                        \u001b[36m<span\u001b[39m\n                          \u001b[33mclass\u001b[39m=\u001b[32m\"text-xs text-gray-500\"\u001b[39m\n                        \u001b[36m>\u001b[39m\n                          \u001b[0m8\u001b[0m\n                          \u001b[0m message\u001b[0m\n                          \u001b[0ms\u001b[0m\n                        \u001b[36m</span>\u001b[39m\n                      \u001b[36m</div>\u001b[39m\n                    \u001b[36m</div>\u001b[39m\n                    \u001b[36m<svg\u001b[39m\n                      \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-chevron-right w-4 h-4 text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity duration-200\"\u001b[39m\n                      \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                      \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                      \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                      \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                      \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"m9 18 6-6-6-6\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</svg>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                \u001b[36m</button>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mstyle\u001b[39m=\u001b[32m\"opacity: 1; transform: none;\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<button\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"w-full p-4 text-left hover:bg-gray-50 transition-colors duration-200 border-b border-gray-100 group relative disabled:opacity-50 disabled:cursor-not-allowed\"\u001b[39m\n                  \u001b[33mdata-testid\u001b[39m=\u001b[32m\"thread-item-thread-3\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-start space-x-3 pl-2\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<svg\u001b[39m\n                      \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-message-square w-5 h-5 mt-0.5 flex-shrink-0 text-gray-400\"\u001b[39m\n                      \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                      \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                      \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                      \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                      \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</svg>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"flex-1 min-w-0\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<p\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"text-sm font-medium truncate text-gray-900\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[0mData Processing Pipeline\u001b[0m\n                      \u001b[36m</p>\u001b[39m\n                      \u001b[36m<div\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center space-x-3 mt-1\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[36m<span\u001b[39m\n                          \u001b[33mclass\u001b[39m=\u001b[32m\"text-xs text-gray-500 flex items-center\"\u001b[39m\n                        \u001b[36m>\u001b[39m\n                          \u001b[36m<svg\u001b[39m\n                            \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                            \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-clock w-3 h-3 mr-1\"\u001b[39m\n                            \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                            \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                            \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                            \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                            \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                            \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                            \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                            \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                            \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                          \u001b[36m>\u001b[39m\n                            \u001b[36m<path\u001b[39m\n                              \u001b[33md\u001b[39m=\u001b[32m\"M12 6v6l4 2\"\u001b[39m\n                            \u001b[36m/>\u001b[39m\n                            \u001b[36m<circle\u001b[39m\n                              \u001b[33mcx\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                              \u001b[33mcy\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                              \u001b[33mr\u001b[39m=\u001b[32m\"10\"\u001b[39m\n                            \u001b[36m/>\u001b[39m\n                          \u001b[36m</svg>\u001b[39m\n                          \u001b[0mabout 2 hours ago\u001b[0m\n                        \u001b[36m</span>\u001b[39m\n                        \u001b[36m<span\u001b[39m\n                          \u001b[33mclass\u001b[39m=\u001b[32m\"text-xs text-gray-500\"\u001b[39m\n                        \u001b[36m>\u001b[39m\n                          \u001b[0m32\u001b[0m\n                          \u001b[0m message\u001b[0m\n                          \u001b[0ms\u001b[0m\n                        \u001b[36m</span>\u001b[39m\n                      \u001b[36m</div>\u001b[39m\n                    \u001b[36m</div>\u001b[39m\n                    \u001b[36m<svg\u001b[39m\n                      \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-chevron-right w-4 h-4 text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity duration-200\"\u001b[39m\n                      \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                      \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                      \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                      \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                      \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"m9 18 6-6-6-6\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</svg>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                \u001b[36m</button>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"p-4 border-t border-gray-200 bg-gray-50\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<p\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"text-xs text-gray-500 text-center mb-2\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[0m3\u001b[0m\n                \u001b[0m conversation\u001b[0m\n                \u001b[0ms\u001b[0m\n              \u001b[36m</p>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 312 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n     \u001b[90m 313 |\u001b[39m         \u001b[36mconst\u001b[39m activeThread \u001b[33m=\u001b[39m screen\u001b[33m.\u001b[39mgetByTestId(\u001b[32m'thread-item-thread-3'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 314 |\u001b[39m         expect(activeThread)\u001b[33m.\u001b[39mtoHaveClass(\u001b[32m'bg-emerald-50'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 315 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 316 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 317 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/thread-navigation.test.tsx:314:30\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Thread Navigation Integration Tests \u203a Multi-Session Synchronization \u203a should handle concurrent thread modifications\n\n    Unable to find an element with the text: /bg-emerald-50/. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div>\u001b[39m\n        \u001b[36m<div\u001b[39m\n          \u001b[33mclass\u001b[39m=\u001b[32m\"w-80 h-full bg-white/95 backdrop-blur-md border-r border-gray-200 flex flex-col\"\u001b[39m\n          \u001b[33mdata-testid\u001b[39m=\u001b[32m\"chat-sidebar\"\u001b[39m\n          \u001b[33mrole\u001b[39m=\u001b[32m\"complementary\"\u001b[39m\n        \u001b[36m>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"p-4 border-b border-gray-200\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"w-full flex items-center justify-center space-x-2 px-4 py-3 bg-emerald-500 hover:bg-emerald-600 text-white rounded-lg transition-all duration-200 transform hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed shadow-sm hover:shadow-md\"\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"new-chat-button\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<svg\u001b[39m\n                \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-plus w-5 h-5\"\u001b[39m\n                \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<path\u001b[39m\n                  \u001b[33md\u001b[39m=\u001b[32m\"M5 12h14\"\u001b[39m\n                \u001b[36m/>\u001b[39m\n                \u001b[36m<path\u001b[39m\n                  \u001b[33md\u001b[39m=\u001b[32m\"M12 5v14\"\u001b[39m\n                \u001b[36m/>\u001b[39m\n              \u001b[36m</svg>\u001b[39m\n              \u001b[36m<span\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"font-medium\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[0mNew Chat\u001b[0m\n              \u001b[36m</span>\u001b[39m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"p-4 border-b border-gray-100\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<svg\u001b[39m\n                \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-search absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400\"\u001b[39m\n                \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<path\u001b[39m\n                  \u001b[33md\u001b[39m=\u001b[32m\"m21 21-4.34-4.34\"\u001b[39m\n                \u001b[36m/>\u001b[39m\n                \u001b[36m<circle\u001b[39m\n                  \u001b[33mcx\u001b[39m=\u001b[32m\"11\"\u001b[39m\n                  \u001b[33mcy\u001b[39m=\u001b[32m\"11\"\u001b[39m\n                  \u001b[33mr\u001b[39m=\u001b[32m\"8\"\u001b[39m\n                \u001b[36m/>\u001b[39m\n              \u001b[36m</svg>\u001b[39m\n              \u001b[36m<input\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"w-full pl-10 pr-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500 transition-all duration-200\"\u001b[39m\n                \u001b[33mdata-testid\u001b[39m=\u001b[32m\"search-input\"\u001b[39m\n                \u001b[33mplaceholder\u001b[39m=\u001b[32m\"Search conversations...\"\u001b[39m\n                \u001b[33mtype\u001b[39m=\u001b[32m\"text\"\u001b[39m\n                \u001b[33mvalue\u001b[39m=\u001b[32m\"\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"flex-1 overflow-y-auto\"\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"thread-list\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mstyle\u001b[39m=\u001b[32m\"opacity: 1; transform: none;\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<button\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"w-full p-4 text-left hover:bg-gray-50 transition-colors duration-200 border-b border-gray-100 group relative disabled:opacity-50 disabled:cursor-not-allowed\"\u001b[39m\n                \u001b[33mdata-testid\u001b[39m=\u001b[32m\"thread-item-thread-1\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-start space-x-3 pl-2\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<svg\u001b[39m\n                    \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-message-square w-5 h-5 mt-0.5 flex-shrink-0 text-gray-400\"\u001b[39m\n                    \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                    \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                    \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                    \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                    \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                    \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                    \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                    \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                    \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<path\u001b[39m\n                      \u001b[33md\u001b[39m=\u001b[32m\"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z\"\u001b[39m\n                    \u001b[36m/>\u001b[39m\n                  \u001b[36m</svg>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"flex-1 min-w-0\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<p\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"text-sm font-medium truncate text-gray-900\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[0mAI Optimization Discussion\u001b[0m\n                    \u001b[36m</p>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center space-x-3 mt-1\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<span\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"text-xs text-gray-500 flex items-center\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[36m<svg\u001b[39m\n                          \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                          \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-clock w-3 h-3 mr-1\"\u001b[39m\n                          \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                          \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                          \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                          \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                          \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                          \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                          \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                          \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                          \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                        \u001b[36m>\u001b[39m\n                          \u001b[36m<path\u001b[39m\n                            \u001b[33md\u001b[39m=\u001b[32m\"M12 6v6l4 2\"\u001b[39m\n                          \u001b[36m/>\u001b[39m\n                          \u001b[36m<circle\u001b[39m\n                            \u001b[33mcx\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                            \u001b[33mcy\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                            \u001b[33mr\u001b[39m=\u001b[32m\"10\"\u001b[39m\n                          \u001b[36m/>\u001b[39m\n                        \u001b[36m</svg>\u001b[39m\n                        \u001b[0mless than a minute ago\u001b[0m\n                      \u001b[36m</span>\u001b[39m\n                      \u001b[36m<span\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"text-xs text-gray-500\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[0m15\u001b[0m\n                        \u001b[0m message\u001b[0m\n                        \u001b[0ms\u001b[0m\n                      \u001b[36m</span>\u001b[39m\n                    \u001b[36m</div>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                  \u001b[36m<svg\u001b[39m\n                    \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-chevron-right w-4 h-4 text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity duration-200\"\u001b[39m\n                    \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                    \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                    \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                    \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                    \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                    \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                    \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                    \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                    \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<path\u001b[39m\n                      \u001b[33md\u001b[39m=\u001b[32m\"m9 18 6-6-6-6\"\u001b[39m\n                    \u001b[36m/>\u001b[39m\n                  \u001b[36m</svg>\u001b[39m\n                \u001b[36m</div>\u001b[39m\n              \u001b[36m</button>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mstyle\u001b[39m=\u001b[32m\"opacity: 1; transform: none;\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<button\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"w-full p-4 text-left hover:bg-gray-50 transition-colors duration-200 border-b border-gray-100 group relative disabled:opacity-50 disabled:cursor-not-allowed\"\u001b[39m\n                \u001b[33mdata-testid\u001b[39m=\u001b[32m\"thread-item-thread-2\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-start space-x-3 pl-2\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<svg\u001b[39m\n                    \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-message-square w-5 h-5 mt-0.5 flex-shrink-0 text-gray-400\"\u001b[39m\n                    \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                    \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                    \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                    \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                    \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                    \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                    \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                    \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                    \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<path\u001b[39m\n                      \u001b[33md\u001b[39m=\u001b[32m\"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z\"\u001b[39m\n                    \u001b[36m/>\u001b[39m\n                  \u001b[36m</svg>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"flex-1 min-w-0\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<p\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"text-sm font-medium truncate text-gray-900\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[0mPerformance Analysis\u001b[0m\n                    \u001b[36m</p>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center space-x-3 mt-1\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<span\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"text-xs text-gray-500 flex items-center\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[36m<svg\u001b[39m\n                          \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                          \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-clock w-3 h-3 mr-1\"\u001b[39m\n                          \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                          \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                          \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                          \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                          \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                          \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                          \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                          \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                          \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                        \u001b[36m>\u001b[39m\n                          \u001b[36m<path\u001b[39m\n                            \u001b[33md\u001b[39m=\u001b[32m\"M12 6v6l4 2\"\u001b[39m\n                          \u001b[36m/>\u001b[39m\n                          \u001b[36m<circle\u001b[39m\n                            \u001b[33mcx\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                            \u001b[33mcy\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                            \u001b[33mr\u001b[39m=\u001b[32m\"10\"\u001b[39m\n                          \u001b[36m/>\u001b[39m\n                        \u001b[36m</svg>\u001b[39m\n                        \u001b[0mabout 1 hour ago\u001b[0m\n                      \u001b[36m</span>\u001b[39m\n                      \u001b[36m<span\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"text-xs text-gray-500\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[0m8\u001b[0m\n                        \u001b[0m message\u001b[0m\n                        \u001b[0ms\u001b[0m\n                      \u001b[36m</span>\u001b[39m\n                    \u001b[36m</div>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                  \u001b[36m<svg\u001b[39m\n                    \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-chevron-right w-4 h-4 text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity duration-200\"\u001b[39m\n                    \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                    \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                    \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                    \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                    \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                    \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                    \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                    \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                    \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<path\u001b[39m\n                      \u001b[33md\u001b[39m=\u001b[32m\"m9 18 6-6-6-6\"\u001b[39m\n                    \u001b[36m/>\u001b[39m\n                  \u001b[36m</svg>\u001b[39m\n                \u001b[36m</div>\u001b[39m\n              \u001b[36m</button>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mstyle\u001b[39m=\u001b[32m\"opacity: 1; transform: none;\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<button\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"w-full p-4 text-left hover:bg-gray-50 transition-colors duration-200 border-b border-gray-100 group relative disabled:opacity-50 disabled:cursor-not-allowed\"\u001b[39m\n                \u001b[33mdata-testid\u001b[39m=\u001b[32m\"thread-item-thread-3\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-start space-x-3 pl-2\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<svg\u001b[39m\n                    \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-message-square w-5 h-5 mt-0.5 flex-shrink-0 text-gray-400\"\u001b[39m\n                    \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                    \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                    \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                    \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                    \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                    \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                    \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                    \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                    \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<path\u001b[39m\n                      \u001b[33md\u001b[39m=\u001b[32m\"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z\"\u001b[39m\n                    \u001b[36m/>\u001b[39m\n                  \u001b[36m</svg>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"flex-1 min-w-0\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<p\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"text-sm font-medium truncate text-gray-900\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[0mData Processing Pipeline\u001b[0m\n                    \u001b[36m</p>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center space-x-3 mt-1\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<span\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"text-xs text-gray-500 flex items-center\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[36m<svg\u001b[39m\n                          \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                          \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-clock w-3 h-3 mr-1\"\u001b[39m\n                          \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                          \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                          \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                          \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                          \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                          \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                          \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                          \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                          \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                        \u001b[36m>\u001b[39m\n                          \u001b[36m<path\u001b[39m\n                            \u001b[33md\u001b[39m=\u001b[32m\"M12 6v6l4 2\"\u001b[39m\n                          \u001b[36m/>\u001b[39m\n                          \u001b[36m<circle\u001b[39m\n                            \u001b[33mcx\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                            \u001b[33mcy\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                            \u001b[33mr\u001b[39m=\u001b[32m\"10\"\u001b[39m\n                          \u001b[36m/>\u001b[39m\n                        \u001b[36m</svg>\u001b[39m\n                        \u001b[0mabout 2 hours ago\u001b[0m\n                      \u001b[36m</span>\u001b[39m\n                      \u001b[36m<span\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"text-xs text-gray-500\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[0m32\u001b[0m\n                        \u001b[0m message\u001b[0m\n                        \u001b[0ms\u001b[0m\n                      \u001b[36m</span>\u001b[39m\n                    \u001b[36m</div>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                  \u001b[36m<svg\u001b[39m\n                    \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-chevron-right w-4 h-4 text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity duration-200\"\u001b[39m\n                    \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                    \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                    \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                    \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                    \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                    \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                    \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                    \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                    \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<path\u001b[39m\n                      \u001b[33md\u001b[39m=\u001b[32m\"m9 18 6-6-6-6\"\u001b[39m\n                    \u001b[36m/>\u001b[39m\n                  \u001b[36m</svg>\u001b[39m\n                \u001b[36m</div>\u001b[39m\n              \u001b[36m</button>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"p-4 border-t border-gray-200 bg-gray-50\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<p\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"text-xs text-gray-500 text-center mb-2\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0m3\u001b[0m\n              \u001b[0m conversation\u001b[0m\n              \u001b[0ms\u001b[0m\n            \u001b[36m</p>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</div>\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n    \u001b[0m \u001b[90m 334 |\u001b[39m       \n     \u001b[90m 335 |\u001b[39m       \u001b[90m// Should resolve to a consistent state\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 336 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 337 |\u001b[39m         \u001b[36mconst\u001b[39m activeThreads \u001b[33m=\u001b[39m screen\u001b[33m.\u001b[39mgetAllByText(\u001b[35m/bg-emerald-50/\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 338 |\u001b[39m         expect(activeThreads\u001b[33m.\u001b[39mlength)\u001b[33m.\u001b[39mtoBeLessThanOrEqual(\u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 339 |\u001b[39m       })\u001b[33m;\u001b[39m\u001b[0m\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:336:20)\n\n  \u25cf Thread Navigation Integration Tests \u203a Multi-Session Synchronization \u203a should handle concurrent thread modifications\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n          at async Promise.all (index 0)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:330:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Multi-Session Synchronization \u203a should handle concurrent thread modifications\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n          at async Promise.all (index 1)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:330:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Multi-Session Synchronization \u203a should handle concurrent thread modifications\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n          at async Promise.all (index 0)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:330:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Multi-Session Synchronization \u203a should handle concurrent thread modifications\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n          at async Promise.all (index 1)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:330:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Multi-Session Synchronization \u203a should handle concurrent thread modifications\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n          at async Promise.all (index 0)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:330:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Multi-Session Synchronization \u203a should handle concurrent thread modifications\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n          at async Promise.all (index 1)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:330:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Multi-Session Synchronization \u203a should handle concurrent thread modifications\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n          at async Promise.all (index 0)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:330:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Multi-Session Synchronization \u203a should handle concurrent thread modifications\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n          at async Promise.all (index 1)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:330:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Multi-Session Synchronization \u203a should handle concurrent thread modifications\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n          at async Promise.all (index 0)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:330:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Multi-Session Synchronization \u203a should handle concurrent thread modifications\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n          at async Promise.all (index 1)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:330:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Navigation Performance Optimization \u203a should preload adjacent threads for faster navigation\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"thread-1\"\n\n    Number of calls: 0\n\n    \u001b[0m \u001b[90m 359 |\u001b[39m       \u001b[36mawait\u001b[39m simulateNetworkDelay(\u001b[35m100\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 360 |\u001b[39m       \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 361 |\u001b[39m       expect(preloadHandler)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'thread-1'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 362 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 363 |\u001b[39m\n     \u001b[90m 364 |\u001b[39m     it(\u001b[32m'should implement virtual scrolling for large thread lists'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:361:30)\n\n  \u25cf Thread Navigation Integration Tests \u203a Navigation Performance Optimization \u203a should implement virtual scrolling for large thread lists\n\n    expect(received).toBeLessThan(expected)\n\n    Expected: < 100\n    Received:   1000\n\n    \u001b[0m \u001b[90m 380 |\u001b[39m       \u001b[90m// Should only render visible threads\u001b[39m\n     \u001b[90m 381 |\u001b[39m       \u001b[36mconst\u001b[39m visibleThreads \u001b[33m=\u001b[39m screen\u001b[33m.\u001b[39mgetAllByTestId(\u001b[35m/thread-item-/\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 382 |\u001b[39m       expect(visibleThreads\u001b[33m.\u001b[39mlength)\u001b[33m.\u001b[39mtoBeLessThan(\u001b[35m100\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 383 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 384 |\u001b[39m\n     \u001b[90m 385 |\u001b[39m     it(\u001b[32m'should cache thread metadata for instant navigation'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:382:37)\n\n  \u25cf Thread Navigation Integration Tests \u203a Navigation Performance Optimization \u203a should cache thread metadata for instant navigation\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"thread-2\"\n\n    Number of calls: 0\n\n    \u001b[0m \u001b[90m 399 |\u001b[39m       \u001b[36mawait\u001b[39m user\u001b[33m.\u001b[39mclick(targetThread)\u001b[33m;\u001b[39m\n     \u001b[90m 400 |\u001b[39m       \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 401 |\u001b[39m       expect(cacheHandler)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'thread-2'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 402 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 403 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 404 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:401:28)\n\n  \u25cf Thread Navigation Integration Tests \u203a Navigation Performance Optimization \u203a should cache thread metadata for instant navigation\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:399:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Navigation Performance Optimization \u203a should cache thread metadata for instant navigation\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:399:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Navigation Performance Optimization \u203a should cache thread metadata for instant navigation\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:399:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Navigation Performance Optimization \u203a should cache thread metadata for instant navigation\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:399:7)\n\n  \u25cf Thread Navigation Integration Tests \u203a Navigation Performance Optimization \u203a should cache thread metadata for instant navigation\n\n    TypeError: Cannot destructure property 'setThreadLoading' of 'unified_chat_1.useUnifiedChatStore.getState(...)' as it is undefined.\n\n    \u001b[0m \u001b[90m 45 |\u001b[39m\n     \u001b[90m 46 |\u001b[39m \u001b[36mconst\u001b[39m setThreadLoadingState \u001b[33m=\u001b[39m (loading\u001b[33m:\u001b[39m boolean) \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 47 |\u001b[39m   \u001b[36mconst\u001b[39m { setThreadLoading } \u001b[33m=\u001b[39m useUnifiedChatStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 48 |\u001b[39m   setThreadLoading(loading)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 50 |\u001b[39m\u001b[0m\n\n      at setThreadLoadingState (components/chat/ChatSidebarHandlers.ts:47:11)\n      at components/chat/ChatSidebarHandlers.ts:109:7\n      at onClick (components/chat/ChatSidebarThreadList.tsx:169:30)\n      at executeDispatch (node_modules/react-dom/cjs/react-dom-client.development.js:16368:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at processDispatchQueue (node_modules/react-dom/cjs/react-dom-client.development.js:16418:19)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:17016:9\n      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom-client.development.js:3262:40)\n      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom-client.development.js:16572:7)\n      at dispatchEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20658:11)\n      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom-client.development.js:20626:11)\n      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at HTMLButtonElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at HTMLButtonElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)\n      at HTMLButtonElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)\n      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43\n      at node_modules/@testing-library/react/dist/pure.js:108:16\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)\n      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)\n      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)\n      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)\n      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)\n      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)\n      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)\n      at Object.asyncWrapper (node_modules/@testing-library/react/dist/pure.js:88:22)\n      at Object.<anonymous> (__tests__/integration/thread-navigation.test.tsx:399:7)\n\nFAIL __tests__/integration/message-sending.test.tsx (10.027 s)\n  \u25cf Message Sending Integration Tests \u203a Performance Requirements \u203a should maintain 60 FPS during typing simulation\n\n    expect(received).toBeGreaterThan(expected)\n\n    Expected: > 5\n    Received:   0\n\n    \u001b[0m \u001b[90m 562 |\u001b[39m       \u001b[90m// Most frames should be under target time\u001b[39m\n     \u001b[90m 563 |\u001b[39m       \u001b[36mconst\u001b[39m fastFrames \u001b[33m=\u001b[39m frameTests\u001b[33m.\u001b[39mfilter(time \u001b[33m=>\u001b[39m time \u001b[33m<\u001b[39m targetFrameTime)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 564 |\u001b[39m       expect(fastFrames\u001b[33m.\u001b[39mlength)\u001b[33m.\u001b[39mtoBeGreaterThan(frameTests\u001b[33m.\u001b[39mlength \u001b[33m*\u001b[39m \u001b[35m0.5\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// 50% target (relaxed)\u001b[39m\n     \u001b[90m     |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 565 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 566 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 567 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/message-sending.test.tsx:564:33)\n\nFAIL __tests__/integration/critical/websocket-auth-headers.test.tsx (10.405 s)\n  \u25cf WebSocket Authentication Headers (SECURITY VERIFICATION) \u203a Subprotocol Authentication (SECURE METHOD) \u203a should use Sec-WebSocket-Protocol with Bearer token for WebSocket connection\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"send-message\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mSend Message\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 106 |\u001b[39m       \u001b[90m// Wait for connection attempt\u001b[39m\n     \u001b[90m 107 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 108 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 109 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 110 |\u001b[39m\n     \u001b[90m 111 |\u001b[39m       \u001b[90m// SECURITY VERIFICATION: Check that WebSocket was created with proper authentication\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-auth-headers.test.tsx:108:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf WebSocket Authentication Headers (SECURITY VERIFICATION) \u203a Subprotocol Authentication (SECURE METHOD) \u203a should NOT send JWT token via query parameters (security verified)\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"send-message\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mSend Message\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 139 |\u001b[39m       \n     \u001b[90m 140 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 141 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 142 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 143 |\u001b[39m\n     \u001b[90m 144 |\u001b[39m       \u001b[36mconst\u001b[39m websocketCall \u001b[33m=\u001b[39m (global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmock\u001b[33m.\u001b[39mcalls[\u001b[35m0\u001b[39m]\u001b[33m;\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-auth-headers.test.tsx:141:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf WebSocket Authentication Headers (SECURITY VERIFICATION) \u203a WebSocket Subprotocol Authentication (PRIMARY METHOD) \u203a should use Sec-WebSocket-Protocol header for JWT authentication\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"send-message\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mSend Message\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 172 |\u001b[39m       \n     \u001b[90m 173 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 174 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 175 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 176 |\u001b[39m\n     \u001b[90m 177 |\u001b[39m       \u001b[36mconst\u001b[39m websocketCall \u001b[33m=\u001b[39m (global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmock\u001b[33m.\u001b[39mcalls[\u001b[35m0\u001b[39m]\u001b[33m;\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-auth-headers.test.tsx:174:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf WebSocket Authentication Headers (SECURITY VERIFICATION) \u203a WebSocket Subprotocol Authentication (PRIMARY METHOD) \u203a should handle authentication protocol correctly\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"send-message\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mSend Message\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 197 |\u001b[39m       \n     \u001b[90m 198 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 199 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 200 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 201 |\u001b[39m\n     \u001b[90m 202 |\u001b[39m       \u001b[36mconst\u001b[39m websocketCall \u001b[33m=\u001b[39m (global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmock\u001b[33m.\u001b[39mcalls[\u001b[35m0\u001b[39m]\u001b[33m;\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-auth-headers.test.tsx:199:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf WebSocket Authentication Headers (SECURITY VERIFICATION) \u203a Secure Connection Endpoint \u203a should connect to the secure WebSocket endpoint\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"send-message\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mSend Message\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 225 |\u001b[39m       \n     \u001b[90m 226 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 227 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 228 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 229 |\u001b[39m\n     \u001b[90m 230 |\u001b[39m       \u001b[36mconst\u001b[39m websocketCall \u001b[33m=\u001b[39m (global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmock\u001b[33m.\u001b[39mcalls[\u001b[35m0\u001b[39m]\u001b[33m;\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-auth-headers.test.tsx:227:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf WebSocket Authentication Headers (SECURITY VERIFICATION) \u203a Secure Connection Endpoint \u203a should handle authentication errors from secure endpoint\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"send-message\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mSend Message\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 254 |\u001b[39m       \u001b[90m// Simulate authentication rejection from backend\u001b[39m\n     \u001b[90m 255 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 256 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 257 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 258 |\u001b[39m\n     \u001b[90m 259 |\u001b[39m       \u001b[90m// Simulate backend rejection due to improper auth\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-auth-headers.test.tsx:256:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf WebSocket Authentication Headers (SECURITY VERIFICATION) \u203a Token Management Integration \u203a should not expose token in connection URL\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"send-message\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mSend Message\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 290 |\u001b[39m       \n     \u001b[90m 291 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 292 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 293 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 294 |\u001b[39m\n     \u001b[90m 295 |\u001b[39m       \u001b[36mconst\u001b[39m websocketCall \u001b[33m=\u001b[39m (global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmock\u001b[33m.\u001b[39mcalls[\u001b[35m0\u001b[39m]\u001b[33m;\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-auth-headers.test.tsx:292:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf WebSocket Authentication Headers (SECURITY VERIFICATION) \u203a Token Management Integration \u203a should properly handle token refresh scenarios\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"send-message\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mSend Message\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 321 |\u001b[39m       \n     \u001b[90m 322 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 323 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 324 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 325 |\u001b[39m\n     \u001b[90m 326 |\u001b[39m       \u001b[90m// Simulate token refresh\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-auth-headers.test.tsx:323:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\nFAIL __tests__/integration/critical/websocket-subprotocol-auth.test.tsx (11.471 s)\n  \u25cf WebSocket Subprotocol Authentication (CRITICAL) \u203a Sec-WebSocket-Protocol Header Implementation \u203a should include JWT token in Sec-WebSocket-Protocol header\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"auth-method\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0msubprotocol\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"test-connection\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mTest Connection\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 120 |\u001b[39m       \n     \u001b[90m 121 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 122 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 123 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 124 |\u001b[39m\n     \u001b[90m 125 |\u001b[39m       expect(connectionAttempts)\u001b[33m.\u001b[39mtoHaveLength(\u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-subprotocol-auth.test.tsx:122:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf WebSocket Subprotocol Authentication (CRITICAL) \u203a Sec-WebSocket-Protocol Header Implementation \u203a should support multiple protocol negotiation\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"auth-method\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0msubprotocol\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"test-connection\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mTest Connection\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 151 |\u001b[39m       \n     \u001b[90m 152 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 153 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 154 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 155 |\u001b[39m\n     \u001b[90m 156 |\u001b[39m       \u001b[36mconst\u001b[39m { protocols } \u001b[33m=\u001b[39m connectionAttempts[\u001b[35m0\u001b[39m]\u001b[33m;\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-subprotocol-auth.test.tsx:153:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf WebSocket Subprotocol Authentication (CRITICAL) \u203a Sec-WebSocket-Protocol Header Implementation \u203a should handle protocol selection from backend\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"auth-method\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0msubprotocol\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"test-connection\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mTest Connection\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 177 |\u001b[39m       \n     \u001b[90m 178 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 179 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 180 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 181 |\u001b[39m\n     \u001b[90m 182 |\u001b[39m       \u001b[90m// Simulate successful connection with protocol selection\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-subprotocol-auth.test.tsx:179:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf WebSocket Subprotocol Authentication (CRITICAL) \u203a Fallback Authentication Methods \u203a should fallback from header auth to subprotocol auth\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"auth-method\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0msubprotocol\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"test-connection\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mTest Connection\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 218 |\u001b[39m       \n     \u001b[90m 219 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 220 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 221 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 222 |\u001b[39m\n     \u001b[90m 223 |\u001b[39m       \u001b[90m// First attempt should include both auth methods\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-subprotocol-auth.test.tsx:220:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf WebSocket Subprotocol Authentication (CRITICAL) \u203a Fallback Authentication Methods \u203a should retry connection with different auth method on failure\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"auth-method\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0msubprotocol\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"test-connection\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mTest Connection\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 243 |\u001b[39m       \n     \u001b[90m 244 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 245 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 246 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 247 |\u001b[39m\n     \u001b[90m 248 |\u001b[39m       \u001b[90m// Simulate auth failure\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-subprotocol-auth.test.tsx:245:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf WebSocket Subprotocol Authentication (CRITICAL) \u203a JWT Token Format Validation \u203a should properly format JWT token in subprotocol\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"auth-method\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0msubprotocol\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"test-connection\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mTest Connection\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 289 |\u001b[39m       \n     \u001b[90m 290 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 291 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 292 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 293 |\u001b[39m\n     \u001b[90m 294 |\u001b[39m       \u001b[36mconst\u001b[39m { protocols } \u001b[33m=\u001b[39m connectionAttempts[\u001b[35m0\u001b[39m]\u001b[33m;\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-subprotocol-auth.test.tsx:291:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf WebSocket Subprotocol Authentication (CRITICAL) \u203a JWT Token Format Validation \u203a should handle token with special characters\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"auth-method\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0msubprotocol\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"test-connection\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mTest Connection\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 324 |\u001b[39m       \n     \u001b[90m 325 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 326 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 327 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 328 |\u001b[39m\n     \u001b[90m 329 |\u001b[39m       \u001b[36mconst\u001b[39m { protocols } \u001b[33m=\u001b[39m connectionAttempts[\u001b[35m0\u001b[39m]\u001b[33m;\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-subprotocol-auth.test.tsx:326:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf WebSocket Subprotocol Authentication (CRITICAL) \u203a Security and Error Handling \u203a should handle subprotocol negotiation failure\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"auth-method\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0msubprotocol\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"test-connection\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mTest Connection\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 380 |\u001b[39m       \n     \u001b[90m 381 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 382 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 383 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 384 |\u001b[39m\n     \u001b[90m 385 |\u001b[39m       \u001b[90m// Simulate backend rejecting all proposed protocols\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-subprotocol-auth.test.tsx:382:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf WebSocket Subprotocol Authentication (CRITICAL) \u203a Security and Error Handling \u203a should clean up protocols on disconnect\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"auth-method\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0msubprotocol\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"test-connection\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mTest Connection\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 417 |\u001b[39m       \n     \u001b[90m 418 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 419 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 420 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 421 |\u001b[39m\n     \u001b[90m 422 |\u001b[39m       \u001b[90m// Simulate connection and then disconnection\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-subprotocol-auth.test.tsx:419:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\nFAIL __tests__/integration/critical/websocket-auth-rejection.test.tsx (13.254 s)\n  \u25cf WebSocket Authentication Rejection (SECURITY) \u203a Secure Authentication Verification \u203a should use secure authentication methods and avoid query parameters\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"error-message\"\u001b[39m\n            \u001b[36m/>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"retry-connection\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mRetry Connection\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 153 |\u001b[39m       \n     \u001b[90m 154 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 155 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 156 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 157 |\u001b[39m\n     \u001b[90m 158 |\u001b[39m       expect(connectionAttempts)\u001b[33m.\u001b[39mtoHaveLength(\u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-auth-rejection.test.tsx:155:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf WebSocket Authentication Rejection (SECURITY) \u203a Secure Authentication Verification \u203a should handle authentication errors gracefully when they occur\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"error-message\"\u001b[39m\n            \u001b[36m/>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"retry-connection\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mRetry Connection\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 187 |\u001b[39m       \n     \u001b[90m 188 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 189 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 190 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 191 |\u001b[39m\n     \u001b[90m 192 |\u001b[39m       \u001b[90m// Should properly handle the authentication rejection\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-auth-rejection.test.tsx:189:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf WebSocket Authentication Rejection (SECURITY) \u203a Secure Authentication Verification \u203a should use consistent secure authentication method\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"error-message\"\u001b[39m\n            \u001b[36m/>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"retry-connection\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mRetry Connection\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 218 |\u001b[39m       \n     \u001b[90m 219 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 220 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 221 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 222 |\u001b[39m\n     \u001b[90m 223 |\u001b[39m       \u001b[90m// Trigger retry\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-auth-rejection.test.tsx:220:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf WebSocket Authentication Rejection (SECURITY) \u203a Enhanced Error Handling \u203a should properly categorize different types of authentication errors\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"error-message\"\u001b[39m\n            \u001b[36m/>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"retry-connection\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mRetry Connection\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 258 |\u001b[39m       \n     \u001b[90m 259 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 260 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 261 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 262 |\u001b[39m\n     \u001b[90m 263 |\u001b[39m       \u001b[90m// For a properly formatted token, connection should succeed\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-auth-rejection.test.tsx:260:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf WebSocket Authentication Rejection (SECURITY) \u203a Enhanced Error Handling \u203a should provide appropriate error messages for security violations\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"error-message\"\u001b[39m\n            \u001b[36m/>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"retry-connection\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mRetry Connection\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 296 |\u001b[39m       \n     \u001b[90m 297 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 298 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 299 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 300 |\u001b[39m\n     \u001b[90m 301 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at __tests__/integration/critical/websocket-auth-rejection.test.tsx:298:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf WebSocket Authentication Rejection (SECURITY) \u203a Enhanced Error Handling \u203a should not expose sensitive token data in error messages\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"error-message\"\u001b[39m\n            \u001b[36m/>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"retry-connection\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mRetry Connection\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 323 |\u001b[39m       \n     \u001b[90m 324 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 325 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 326 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 327 |\u001b[39m\n     \u001b[90m 328 |\u001b[39m       \u001b[90m// Since we're using proper auth, there should be no error message\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-auth-rejection.test.tsx:325:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf WebSocket Authentication Rejection (SECURITY) \u203a Migration from Insecure to Secure Authentication \u203a should detect when using deprecated query param method\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"error-message\"\u001b[39m\n            \u001b[36m/>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"retry-connection\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mRetry Connection\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 354 |\u001b[39m       \n     \u001b[90m 355 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 356 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 357 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 358 |\u001b[39m\n     \u001b[90m 359 |\u001b[39m       \u001b[36mconst\u001b[39m { url } \u001b[33m=\u001b[39m connectionAttempts[\u001b[35m0\u001b[39m]\u001b[33m;\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-auth-rejection.test.tsx:356:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf WebSocket Authentication Rejection (SECURITY) \u203a Migration from Insecure to Secure Authentication \u203a should attempt upgrade to secure authentication\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"error-message\"\u001b[39m\n            \u001b[36m/>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"retry-connection\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mRetry Connection\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 384 |\u001b[39m       \n     \u001b[90m 385 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 386 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 387 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 388 |\u001b[39m\n     \u001b[90m 389 |\u001b[39m       \u001b[90m// Should attempt secure authentication after query param rejection\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-auth-rejection.test.tsx:386:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf WebSocket Authentication Rejection (SECURITY) \u203a Migration from Insecure to Secure Authentication \u203a should connect to secure endpoint when available\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"error-message\"\u001b[39m\n            \u001b[36m/>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"retry-connection\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mRetry Connection\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 420 |\u001b[39m       \n     \u001b[90m 421 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 422 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 423 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 424 |\u001b[39m\n     \u001b[90m 425 |\u001b[39m       \u001b[36mconst\u001b[39m { url } \u001b[33m=\u001b[39m connectionAttempts[\u001b[35m0\u001b[39m]\u001b[33m;\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-auth-rejection.test.tsx:422:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf WebSocket Authentication Rejection (SECURITY) \u203a Backward Compatibility and Fallback \u203a should fail gracefully when secure methods are not available\n\n    expect(received).toContain(expected) // indexOf\n\n    Expected substring: \"not supported\"\n    Received string:    \"\"\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"error-message\"\u001b[39m\n            \u001b[36m/>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"retry-connection\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mRetry Connection\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 459 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n     \u001b[90m 460 |\u001b[39m         \u001b[36mconst\u001b[39m errorMessage \u001b[33m=\u001b[39m screen\u001b[33m.\u001b[39mgetByTestId(\u001b[32m'error-message'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 461 |\u001b[39m         expect(errorMessage\u001b[33m.\u001b[39mtextContent)\u001b[33m.\u001b[39mtoContain(\u001b[32m'not supported'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 462 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 463 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 464 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-auth-rejection.test.tsx:461:42\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf WebSocket Authentication Rejection (SECURITY) \u203a Backward Compatibility and Fallback \u203a should provide clear upgrade instructions for unsupported clients\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"error-message\"\u001b[39m\n            \u001b[36m/>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"retry-connection\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mRetry Connection\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 477 |\u001b[39m       \n     \u001b[90m 478 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 479 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 480 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 481 |\u001b[39m\n     \u001b[90m 482 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at __tests__/integration/critical/websocket-auth-rejection.test.tsx:479:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\nFAIL __tests__/integration/critical/websocket-token-refresh.test.tsx (13.472 s)\n  \u25cf WebSocket Token Refresh Management (CRITICAL) \u203a Token Expiry Detection and Refresh \u203a should detect when token is about to expire\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"refresh-count\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0m0\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"last-token\"\u001b[39m\n            \u001b[36m/>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"trigger-refresh\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mTrigger Token Refresh\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"send-message\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mSend Message\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 158 |\u001b[39m       \n     \u001b[90m 159 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 160 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 161 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 162 |\u001b[39m\n     \u001b[90m 163 |\u001b[39m       \u001b[90m// Frontend should detect impending expiry and trigger refresh\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-token-refresh.test.tsx:160:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf WebSocket Token Refresh Management (CRITICAL) \u203a Token Expiry Detection and Refresh \u203a should refresh token before WebSocket connection fails\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"refresh-count\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0m0\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"last-token\"\u001b[39m\n            \u001b[36m/>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"trigger-refresh\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mTrigger Token Refresh\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"send-message\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mSend Message\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 190 |\u001b[39m       \n     \u001b[90m 191 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 192 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 193 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 194 |\u001b[39m\n     \u001b[90m 195 |\u001b[39m       \u001b[90m// Simulate connection established\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-token-refresh.test.tsx:192:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf WebSocket Token Refresh Management (CRITICAL) \u203a Token Expiry Detection and Refresh \u203a should handle token refresh during active connection\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"refresh-count\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0m0\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"last-token\"\u001b[39m\n            \u001b[36m/>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"trigger-refresh\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mTrigger Token Refresh\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"send-message\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mSend Message\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 226 |\u001b[39m       \n     \u001b[90m 227 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 228 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 229 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 230 |\u001b[39m\n     \u001b[90m 231 |\u001b[39m       \u001b[90m// Establish connection\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-token-refresh.test.tsx:228:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf WebSocket Token Refresh Management (CRITICAL) \u203a Reconnection with New Token \u203a should reconnect with new token after refresh\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"refresh-count\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0m0\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"last-token\"\u001b[39m\n            \u001b[36m/>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"trigger-refresh\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mTrigger Token Refresh\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"send-message\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mSend Message\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 270 |\u001b[39m       \n     \u001b[90m 271 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 272 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 273 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 274 |\u001b[39m\n     \u001b[90m 275 |\u001b[39m       \u001b[90m// Simulate connection failure due to token expiry\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-token-refresh.test.tsx:272:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf WebSocket Token Refresh Management (CRITICAL) \u203a Reconnection with New Token \u203a should not reuse expired tokens for reconnection\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"refresh-count\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0m0\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"last-token\"\u001b[39m\n            \u001b[36m/>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"trigger-refresh\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mTrigger Token Refresh\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"send-message\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mSend Message\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 320 |\u001b[39m       \n     \u001b[90m 321 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 322 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 323 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 324 |\u001b[39m\n     \u001b[90m 325 |\u001b[39m       \u001b[90m// Simulate auth failure\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-token-refresh.test.tsx:322:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf WebSocket Token Refresh Management (CRITICAL) \u203a Reconnection with New Token \u203a should handle refresh failure gracefully\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"refresh-count\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0m0\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"last-token\"\u001b[39m\n            \u001b[36m/>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"trigger-refresh\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mTrigger Token Refresh\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"send-message\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mSend Message\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 358 |\u001b[39m       \n     \u001b[90m 359 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 360 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 361 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 362 |\u001b[39m\n     \u001b[90m 363 |\u001b[39m       \u001b[90m// Simulate auth failure\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-token-refresh.test.tsx:360:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf WebSocket Token Refresh Management (CRITICAL) \u203a Message Queue Management During Refresh \u203a should queue messages during token refresh\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"refresh-count\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0m0\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"last-token\"\u001b[39m\n            \u001b[36m/>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"trigger-refresh\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mTrigger Token Refresh\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"send-message\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mSend Message\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 401 |\u001b[39m       \n     \u001b[90m 402 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 403 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 404 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 405 |\u001b[39m\n     \u001b[90m 406 |\u001b[39m       \u001b[90m// Establish connection\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-token-refresh.test.tsx:403:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf WebSocket Token Refresh Management (CRITICAL) \u203a Message Queue Management During Refresh \u203a should maintain message order during reconnection\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"refresh-count\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0m0\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"last-token\"\u001b[39m\n            \u001b[36m/>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"trigger-refresh\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mTrigger Token Refresh\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"send-message\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mSend Message\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 451 |\u001b[39m       \n     \u001b[90m 452 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 453 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 454 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 455 |\u001b[39m\n     \u001b[90m 456 |\u001b[39m       \u001b[90m// Establish connection\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-token-refresh.test.tsx:453:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf WebSocket Token Refresh Management (CRITICAL) \u203a Message Queue Management During Refresh \u203a should handle message timeouts during refresh\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"refresh-count\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0m0\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"last-token\"\u001b[39m\n            \u001b[36m/>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"trigger-refresh\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mTrigger Token Refresh\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"send-message\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mSend Message\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 493 |\u001b[39m       \n     \u001b[90m 494 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 495 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 496 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 497 |\u001b[39m\n     \u001b[90m 498 |\u001b[39m       \u001b[90m// Start with open connection\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-token-refresh.test.tsx:495:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf WebSocket Token Refresh Management (CRITICAL) \u203a Token Lifecycle Integration \u203a should synchronize token state across WebSocket and auth contexts\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"refresh-count\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0m0\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"last-token\"\u001b[39m\n            \u001b[36m/>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"trigger-refresh\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mTrigger Token Refresh\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"send-message\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mSend Message\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 533 |\u001b[39m       \n     \u001b[90m 534 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 535 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 536 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 537 |\u001b[39m\n     \u001b[90m 538 |\u001b[39m       \u001b[90m// Update token in auth context\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-token-refresh.test.tsx:535:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf WebSocket Token Refresh Management (CRITICAL) \u203a Token Lifecycle Integration \u203a should clean up old connections when token changes\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"refresh-count\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0m0\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"last-token\"\u001b[39m\n            \u001b[36m/>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"trigger-refresh\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mTrigger Token Refresh\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"send-message\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mSend Message\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 565 |\u001b[39m       \n     \u001b[90m 566 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 567 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 568 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 569 |\u001b[39m\n     \u001b[90m 570 |\u001b[39m       \u001b[90m// Establish connection\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-token-refresh.test.tsx:567:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\nFAIL __tests__/integration/collaboration-state.test.tsx (5.356 s)\n  \u25cf Collaboration Features \u203a should sync collaborative edits in real-time\n\n    expect(element).toHaveTextContent()\n\n    Expected element to have text content:\n      other_user: Collaborative change\n    Received:\n\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<button>\u001b[39m\n              \u001b[0mSend Edit\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"edits\"\u001b[39m\n            \u001b[36m/>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 269 |\u001b[39m     \n     \u001b[90m 270 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 271 |\u001b[39m       expect(getByTestId(\u001b[32m'edits'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'other_user: Collaborative change'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 272 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 273 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 274 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/collaboration-state.test.tsx:271:36\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Collaboration Features \u203a should handle presence awareness\n\n    expect(element).toHaveTextContent()\n\n    Expected element to have text content:\n      Active users: 2\n    Received:\n      Active users: 0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"presence\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<div>\u001b[39m\n              \u001b[0mActive users: \u001b[0m\n              \u001b[0m0\u001b[0m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 331 |\u001b[39m     \n     \u001b[90m 332 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 333 |\u001b[39m       expect(getByTestId(\u001b[32m'presence'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'Active users: 2'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 334 |\u001b[39m       expect(getByTestId(\u001b[32m'presence'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'Alice - typing'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 335 |\u001b[39m       expect(getByTestId(\u001b[32m'presence'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'Bob - viewing'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 336 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at __tests__/integration/collaboration-state.test.tsx:333:39\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf State Persistence and Recovery \u203a should persist application state across sessions\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"app_state\", \"{\\\"version\\\":2,\\\"timestamp\\\":1755824058763,\\\"data\\\":{\\\"user_preferences\\\":{\\\"theme\\\":\\\"dark\\\",\\\"language\\\":\\\"en\\\"},\\\"session_data\\\":{\\\"last_thread\\\":\\\"thread-123\\\"},\\\"cached_results\\\":{\\\"optimization_1\\\":{\\\"result\\\":\\\"cached\\\"}}}}\"\n\n    Number of calls: 0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<button>\u001b[39m\n              \u001b[0mSave State\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button>\u001b[39m\n              \u001b[0mLoad State\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"state\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div>\u001b[39m\n                \u001b[0mTheme: \u001b[0m\n                \u001b[0mdark\u001b[0m\n              \u001b[36m</div>\u001b[39m\n              \u001b[36m<div>\u001b[39m\n                \u001b[0mLast thread: \u001b[0m\n                \u001b[0mthread-123\u001b[0m\n              \u001b[36m</div>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 490 |\u001b[39m     \n     \u001b[90m 491 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 492 |\u001b[39m       expect(localStorageMock\u001b[33m.\u001b[39msetItem)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\n     \u001b[90m     |\u001b[39m                                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 493 |\u001b[39m         \u001b[32m'app_state'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 494 |\u001b[39m         \u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mstringify(mockPersistedState)\n     \u001b[90m 495 |\u001b[39m       )\u001b[33m;\u001b[39m\u001b[0m\n\n      at __tests__/integration/collaboration-state.test.tsx:492:40\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf State Persistence and Recovery \u203a should recover from corrupted state gracefully\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"app_state\"\n\n    Number of calls: 0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<button>\u001b[39m\n              \u001b[0mLoad State\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"error\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mState corrupted, using defaults\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"state\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mState loaded\u001b[0m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 553 |\u001b[39m       expect(getByTestId(\u001b[32m'error'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'State corrupted, using defaults'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 554 |\u001b[39m       expect(getByTestId(\u001b[32m'state'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'State loaded'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 555 |\u001b[39m       expect(localStorageMock\u001b[33m.\u001b[39mremoveItem)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'app_state'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 556 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 557 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 558 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/collaboration-state.test.tsx:555:43\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf State Persistence and Recovery \u203a should migrate state between versions\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<button>\u001b[39m\n              \u001b[0mMigrate State\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"migrated\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mState migrated to v2\u001b[0m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 599 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n     \u001b[90m 600 |\u001b[39m       expect(getByTestId(\u001b[32m'migrated'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'State migrated to v2'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 601 |\u001b[39m       expect(localStorageMock\u001b[33m.\u001b[39msetItem)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 602 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 603 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 604 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at __tests__/integration/collaboration-state.test.tsx:601:40\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\nFAIL __tests__/integration/session-management.test.tsx (5.895 s)\n  \u25cf Session Management Integration \u203a Session Persistence \u203a should persist session across page reloads\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"jwt_token\"\n\n    Number of calls: 0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"session-status\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0munauthenticated\u001b[0m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 317 |\u001b[39m   \u001b[36masync\u001b[39m \u001b[36mfunction\u001b[39m verifySessionRestored() {\n     \u001b[90m 318 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 319 |\u001b[39m       expect(mockLocalStorage\u001b[33m.\u001b[39mgetItem)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'jwt_token'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 320 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 321 |\u001b[39m   }\n     \u001b[90m 322 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/session-management.test.tsx:319:40\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Session Management Integration \u203a Session Persistence \u203a should restore user state from localStorage\n\n    expect(received).toEqual(expected) // deep equality\n\n    Expected: {\"email\": \"test@example.com\", \"id\": \"test-user-id\", \"name\": \"Test User\", \"sessionId\": \"session-123\"}\n    Received: null\n\n    \u001b[0m \u001b[90m 337 |\u001b[39m\n     \u001b[90m 338 |\u001b[39m   \u001b[36mfunction\u001b[39m expectUserDataRestored() {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 339 |\u001b[39m     expect(useAuthStore()\u001b[33m.\u001b[39muser)\u001b[33m.\u001b[39mtoEqual(sessionTestData\u001b[33m.\u001b[39msessionUser)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 340 |\u001b[39m   }\n     \u001b[90m 341 |\u001b[39m\n     \u001b[90m 342 |\u001b[39m   \u001b[36masync\u001b[39m \u001b[36mfunction\u001b[39m seedCorruptedSessionData() {\u001b[0m\n\n      at expectUserDataRestored (__tests__/integration/session-management.test.tsx:339:33)\n      at Object.<anonymous> (__tests__/integration/session-management.test.tsx:125:7)\n\n  \u25cf Session Management Integration \u203a Session Persistence \u203a should handle corrupted session data gracefully\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"session-status\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0munauthenticated\u001b[0m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 347 |\u001b[39m   \u001b[36masync\u001b[39m \u001b[36mfunction\u001b[39m verifyGracefulDegradation() {\n     \u001b[90m 348 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 349 |\u001b[39m       expect(useAuthStore()\u001b[33m.\u001b[39mlogout)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 350 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 351 |\u001b[39m   }\n     \u001b[90m 352 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/session-management.test.tsx:349:37\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Session Management Integration \u203a Token Refresh \u203a should refresh tokens before expiration\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"jwt_token\", StringContaining \"refreshed\"\n    Received: \"jwt_token\", \"expired.jwt.token.456\"\n\n    Number of calls: 1\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"refresh-status\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0midle\u001b[0m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 385 |\u001b[39m   \u001b[36masync\u001b[39m \u001b[36mfunction\u001b[39m waitForTokenRefresh() {\n     \u001b[90m 386 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 387 |\u001b[39m       expect(mockLocalStorage\u001b[33m.\u001b[39msetItem)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\n     \u001b[90m     |\u001b[39m                                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 388 |\u001b[39m         \u001b[32m'jwt_token'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 389 |\u001b[39m         expect\u001b[33m.\u001b[39mstringContaining(\u001b[32m'refreshed'\u001b[39m)\n     \u001b[90m 390 |\u001b[39m       )\u001b[33m;\u001b[39m\u001b[0m\n\n      at __tests__/integration/session-management.test.tsx:387:40\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Session Management Integration \u203a Token Refresh \u203a should handle refresh failures\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"refresh-status\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0midle\u001b[0m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 407 |\u001b[39m   \u001b[36masync\u001b[39m \u001b[36mfunction\u001b[39m waitForRefreshAttempt() {\n     \u001b[90m 408 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 409 |\u001b[39m       expect(global\u001b[33m.\u001b[39mfetch)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 410 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 411 |\u001b[39m   }\n     \u001b[90m 412 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/session-management.test.tsx:409:28\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Session Management Integration \u203a Token Refresh \u203a should queue operations during refresh\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: \"refreshed.jwt.token.789\"\n    Received: \"expired.jwt.token.456\"\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"operations\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<div>\u001b[39m\n              \u001b[0mop1\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div>\u001b[39m\n              \u001b[0mop2\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div>\u001b[39m\n              \u001b[0mop3\u001b[0m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 449 |\u001b[39m   \u001b[36masync\u001b[39m \u001b[36mfunction\u001b[39m waitForRefreshCompletion() {\n     \u001b[90m 450 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 451 |\u001b[39m       expect(mockLocalStorage\u001b[33m.\u001b[39mgetItem(\u001b[32m'jwt_token'\u001b[39m))\u001b[33m.\u001b[39mtoBe(sessionTestData\u001b[33m.\u001b[39mrefreshedToken)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 452 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 453 |\u001b[39m   }\n     \u001b[90m 454 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/session-management.test.tsx:451:53\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Session Management Integration \u203a Session Timeout \u203a should detect session timeout\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    \u001b[0m \u001b[90m 583 |\u001b[39m\n     \u001b[90m 584 |\u001b[39m   \u001b[36mfunction\u001b[39m expectSessionCleanup() {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 585 |\u001b[39m     expect(useAuthStore()\u001b[33m.\u001b[39mlogout)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 586 |\u001b[39m   }\n     \u001b[90m 587 |\u001b[39m\n     \u001b[90m 588 |\u001b[39m   \u001b[36mfunction\u001b[39m createTimeoutWarningComponent() {\u001b[0m\n\n      at expectSessionCleanup (__tests__/integration/session-management.test.tsx:585:35)\n      at Object.<anonymous> (__tests__/integration/session-management.test.tsx:215:7)\n\n  \u25cf Session Management Integration \u203a Session Timeout \u203a should handle session extension\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 659 |\u001b[39m\n     \u001b[90m 660 |\u001b[39m   \u001b[36mfunction\u001b[39m expectContinuedSession() {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 661 |\u001b[39m     expect(useAuthStore()\u001b[33m.\u001b[39misAuthenticated)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 662 |\u001b[39m   }\n     \u001b[90m 663 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at expectContinuedSession (__tests__/integration/session-management.test.tsx:661:44)\n      at Object.<anonymous> (__tests__/integration/session-management.test.tsx:237:7)\n\nFAIL __tests__/auth/context.dev-mode.test.tsx (5.197 s)\n  \u25cf AuthContext - Development Mode \u203a should auto-login in development mode when not logged out\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: {\"authorized_javascript_origins\": [\"http://localhost:3000\"], \"authorized_redirect_uris\": [\"http://localhost:3000/auth/callback\"], \"development_mode\": true, \"endpoints\": {\"callback\": \"http://localhost:8081/auth/callback\", \"dev_login\": \"http://localhost:8081/auth/dev/login\", \"login\": \"http://localhost:8081/auth/login\", \"logout\": \"http://localhost:8081/auth/logout\", \"token\": \"http://localhost:8081/auth/token\", \"user\": \"http://localhost:8081/auth/me\"}, \"google_client_id\": \"mock-google-client-id\"}\n\n    Number of calls: 0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[0mTest Content\u001b[0m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 61 |\u001b[39m   \u001b[36mconst\u001b[39m expectDevLogin \u001b[33m=\u001b[39m \u001b[36masync\u001b[39m (devConfig\u001b[33m:\u001b[39m any) \u001b[33m=>\u001b[39m {\n     \u001b[90m 62 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 63 |\u001b[39m       expect(authService\u001b[33m.\u001b[39mhandleDevLogin)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(devConfig)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 64 |\u001b[39m     }\u001b[33m,\u001b[39m { timeout\u001b[33m:\u001b[39m \u001b[35m3000\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 65 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 66 |\u001b[39m\u001b[0m\n\n      at timeout (__tests__/auth/context.dev-mode.test.tsx:63:42)\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf AuthContext - Development Mode \u203a should skip auto-login if user has logged out in dev mode\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"Skipping auto dev login - user has logged out\", {\"action\": \"auto_dev_login_skipped\", \"component\": \"AuthContext\"}\n\n    Number of calls: 0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[0mTest Content\u001b[0m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 88 |\u001b[39m   \u001b[36mconst\u001b[39m expectSkipMessage \u001b[33m=\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 89 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 90 |\u001b[39m       expect(logger\u001b[33m.\u001b[39minfo)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\n     \u001b[90m    |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 91 |\u001b[39m         \u001b[32m'Skipping auto dev login - user has logged out'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 92 |\u001b[39m         {\n     \u001b[90m 93 |\u001b[39m           component\u001b[33m:\u001b[39m \u001b[32m'AuthContext'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at __tests__/auth/context.dev-mode.test.tsx:90:27\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf AuthContext - Development Mode \u203a should handle dev login failure gracefully\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[0mTest Content\u001b[0m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 113 |\u001b[39m   \u001b[36mconst\u001b[39m expectNoAuthUpdate \u001b[33m=\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 114 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 115 |\u001b[39m       expect(authService\u001b[33m.\u001b[39mhandleDevLogin)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 116 |\u001b[39m       expect(jwtDecode)\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m 117 |\u001b[39m       expect(mockAuthStore\u001b[33m.\u001b[39mlogin)\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m 118 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at __tests__/auth/context.dev-mode.test.tsx:115:42\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\nFAIL __tests__/integration/logout-flow-core.test.tsx (17.112 s)\n  \u25cf Logout Flow Core Tests \u203a Logout Button Click \u203a should trigger logout when button is clicked\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: {\"development_mode\": false, \"endpoints\": {\"callback\": \"http://localhost:8081/auth/callback\", \"login\": \"http://localhost:8081/auth/login\", \"logout\": \"http://localhost:8081/auth/logout\", \"token\": \"http://localhost:8081/auth/token\", \"user\": \"http://localhost:8081/auth/me\"}, \"google_client_id\": \"test-client-id\"}\n\n    Number of calls: 0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mLogout\u001b[0m\n          \u001b[36m</button>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 112 |\u001b[39m       \u001b[36mawait\u001b[39m clickLogoutButton()\u001b[33m;\u001b[39m\n     \u001b[90m 113 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 114 |\u001b[39m         expect(authService\u001b[33m.\u001b[39mhandleLogout)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(createMockAuthConfig())\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 115 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 116 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 117 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/logout-flow-core.test.tsx:114:42\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Flow Core Tests \u203a Logout Button Click \u203a should call auth store logout\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mLogout\u001b[0m\n          \u001b[36m</button>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 119 |\u001b[39m       \u001b[36mawait\u001b[39m clickLogoutButton()\u001b[33m;\u001b[39m\n     \u001b[90m 120 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 121 |\u001b[39m         expect(mockAuthStore\u001b[33m.\u001b[39mlogout)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 122 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 123 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 124 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/logout-flow-core.test.tsx:121:38\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Flow Core Tests \u203a Logout Button Click \u203a should redirect to login page after logout\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"/login\"\n\n    Number of calls: 0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mLogout\u001b[0m\n          \u001b[36m</button>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 126 |\u001b[39m       \u001b[36mawait\u001b[39m clickLogoutButton()\u001b[33m;\u001b[39m\n     \u001b[90m 127 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 128 |\u001b[39m         expect(mockReplace)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'/login'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 129 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 130 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 131 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n\n      at __tests__/integration/logout-flow-core.test.tsx:128:29\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Flow Core Tests \u203a API Logout Call \u203a should call auth service logout API\n\n    expect(jest.fn()).toHaveBeenCalledTimes(expected)\n\n    Expected number of calls: 1\n    Received number of calls: 0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mLogout\u001b[0m\n          \u001b[36m</button>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 144 |\u001b[39m       \u001b[36mawait\u001b[39m performLogout()\u001b[33m;\u001b[39m\n     \u001b[90m 145 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 146 |\u001b[39m         expect(authService\u001b[33m.\u001b[39mhandleLogout)\u001b[33m.\u001b[39mtoHaveBeenCalledTimes(\u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 147 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 148 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 149 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/logout-flow-core.test.tsx:146:42\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Flow Core Tests \u203a API Logout Call \u203a should complete logout within 500ms\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mLogout\u001b[0m\n          \u001b[36m</button>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 151 |\u001b[39m       \u001b[36mconst\u001b[39m { startTime } \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m performLogout()\u001b[33m;\u001b[39m\n     \u001b[90m 152 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 153 |\u001b[39m         expect(authService\u001b[33m.\u001b[39mhandleLogout)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 154 |\u001b[39m         \u001b[36mconst\u001b[39m endTime \u001b[33m=\u001b[39m performance\u001b[33m.\u001b[39mnow()\u001b[33m;\u001b[39m\n     \u001b[90m 155 |\u001b[39m         expect(endTime \u001b[33m-\u001b[39m startTime)\u001b[33m.\u001b[39mtoBeLessThan(\u001b[35m500\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 156 |\u001b[39m       })\u001b[33m;\u001b[39m\u001b[0m\n\n      at __tests__/integration/logout-flow-core.test.tsx:153:42\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Flow Core Tests \u203a API Logout Call \u203a should handle logout errors gracefully\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mLogout\u001b[0m\n          \u001b[36m</button>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 161 |\u001b[39m       \u001b[36mawait\u001b[39m performLogout()\u001b[33m;\u001b[39m\n     \u001b[90m 162 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 163 |\u001b[39m         expect(mockAuthStore\u001b[33m.\u001b[39mlogout)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 164 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 165 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 166 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n\n      at __tests__/integration/logout-flow-core.test.tsx:163:38\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Flow Core Tests \u203a Development Mode Logout \u203a should set dev logout flag in development mode\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mLogout\u001b[0m\n          \u001b[36m</button>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 184 |\u001b[39m       \u001b[36mawait\u001b[39m testDevModeLogout()\u001b[33m;\u001b[39m\n     \u001b[90m 185 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 186 |\u001b[39m         expect(authService\u001b[33m.\u001b[39msetDevLogoutFlag)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 187 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 188 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 189 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/logout-flow-core.test.tsx:186:46\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Flow Core Tests \u203a Development Mode Logout \u203a should still perform standard logout in dev mode\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mLogout\u001b[0m\n          \u001b[36m</button>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 191 |\u001b[39m       \u001b[36mawait\u001b[39m testDevModeLogout()\u001b[33m;\u001b[39m\n     \u001b[90m 192 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 193 |\u001b[39m         expect(authService\u001b[33m.\u001b[39mhandleLogout)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 194 |\u001b[39m         expect(mockAuthStore\u001b[33m.\u001b[39mlogout)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m 195 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 196 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at __tests__/integration/logout-flow-core.test.tsx:193:42\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Flow Core Tests \u203a Error Handling During Logout \u203a should handle auth service errors during logout\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mLogout\u001b[0m\n          \u001b[36m</button>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 209 |\u001b[39m       \u001b[36mawait\u001b[39m testErrorHandling()\u001b[33m;\u001b[39m\n     \u001b[90m 210 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 211 |\u001b[39m         expect(mockAuthStore\u001b[33m.\u001b[39mlogout)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 212 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 213 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 214 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/logout-flow-core.test.tsx:211:38\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Flow Core Tests \u203a Error Handling During Logout \u203a should complete logout even with partial failures\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mLogout\u001b[0m\n          \u001b[36m</button>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 217 |\u001b[39m       \u001b[36mawait\u001b[39m testErrorHandling()\u001b[33m;\u001b[39m\n     \u001b[90m 218 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 219 |\u001b[39m         expect(mockAuthStore\u001b[33m.\u001b[39mlogout)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 220 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 221 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 222 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/logout-flow-core.test.tsx:219:38\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Flow Core Tests \u203a Error Handling During Logout \u203a should use replace instead of push for security\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mLogout\u001b[0m\n          \u001b[36m</button>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 224 |\u001b[39m       \u001b[36mawait\u001b[39m testErrorHandling()\u001b[33m;\u001b[39m\n     \u001b[90m 225 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 226 |\u001b[39m         expect(mockReplace)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 227 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 228 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 229 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n\n      at __tests__/integration/logout-flow-core.test.tsx:226:29\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Flow Core Tests \u203a Logout Flow Security \u203a should ensure no sensitive data remains after logout\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mLogout\u001b[0m\n          \u001b[36m</button>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 240 |\u001b[39m       \u001b[36mawait\u001b[39m verifySecurityMeasures()\u001b[33m;\u001b[39m\n     \u001b[90m 241 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 242 |\u001b[39m         expect(mockAuthStore\u001b[33m.\u001b[39mlogout)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 243 |\u001b[39m         expect(mockAuthStore\u001b[33m.\u001b[39muser)\u001b[33m.\u001b[39mtoBeNull()\u001b[33m;\u001b[39m\n     \u001b[90m 244 |\u001b[39m         expect(mockAuthStore\u001b[33m.\u001b[39mtoken)\u001b[33m.\u001b[39mtoBeNull()\u001b[33m;\u001b[39m\n     \u001b[90m 245 |\u001b[39m       })\u001b[33m;\u001b[39m\u001b[0m\n\n      at __tests__/integration/logout-flow-core.test.tsx:242:38\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Flow Core Tests \u203a Logout Flow Security \u203a should reset authentication status\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: false\n    Received: true\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mLogout\u001b[0m\n          \u001b[36m</button>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 249 |\u001b[39m       \u001b[36mawait\u001b[39m verifySecurityMeasures()\u001b[33m;\u001b[39m\n     \u001b[90m 250 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 251 |\u001b[39m         expect(mockAuthStore\u001b[33m.\u001b[39misAuthenticated)\u001b[33m.\u001b[39mtoBe(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 252 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 253 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 254 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/logout-flow-core.test.tsx:251:47\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Flow Core Tests \u203a Logout Flow Security \u203a should ensure clean state for next login\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mLogout\u001b[0m\n          \u001b[36m</button>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 256 |\u001b[39m       \u001b[36mawait\u001b[39m verifySecurityMeasures()\u001b[33m;\u001b[39m\n     \u001b[90m 257 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 258 |\u001b[39m         expect(mockAuthStore\u001b[33m.\u001b[39mlogout)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 259 |\u001b[39m         expect(authService\u001b[33m.\u001b[39mhandleLogout)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m 260 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 261 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at __tests__/integration/logout-flow-core.test.tsx:258:38\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\nFAIL __tests__/integration/auth-complete.test.tsx (7.309 s)\n  \u25cf Complete Authentication Flow Integration \u203a OAuth Login Flow \u203a should complete OAuth login with token validation\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: {\"authorized_javascript_origins\": [\"http://localhost:3000\"], \"authorized_redirect_uris\": [\"http://localhost:3000/auth/callback\"], \"development_mode\": false, \"endpoints\": {\"callback\": \"/auth/callback\", \"login\": \"/auth/login\", \"logout\": \"/auth/logout\", \"token\": \"/auth/token\", \"user\": \"/auth/me\"}, \"google_client_id\": \"test-google-client-id\"}\n\n    Number of calls: 0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"login-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogin\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogout\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"auth-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mAuthenticated\u001b[0m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 332 |\u001b[39m   \u001b[36masync\u001b[39m \u001b[36mfunction\u001b[39m verifyOAuthLoginSuccess(mockLogin\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m) {\n     \u001b[90m 333 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 334 |\u001b[39m       expect(mockAuthService\u001b[33m.\u001b[39mhandleLogin)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(mockAuthConfig)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 335 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 336 |\u001b[39m   }\n     \u001b[90m 337 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/auth-complete.test.tsx:334:43\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Complete Authentication Flow Integration \u203a OAuth Login Flow \u203a should reject invalid OAuth state\n\n    expect(element).toHaveTextContent()\n\n    Expected element to have text content:\n      Not authenticated\n    Received:\n      Authenticated\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"login-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogin\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogout\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"auth-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mAuthenticated\u001b[0m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 383 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n     \u001b[90m 384 |\u001b[39m       \u001b[36mconst\u001b[39m authStatus \u001b[33m=\u001b[39m screen\u001b[33m.\u001b[39mgetByTestId(\u001b[32m'auth-status'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 385 |\u001b[39m       expect(authStatus)\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'Not authenticated'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 386 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 387 |\u001b[39m   }\n     \u001b[90m 388 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/auth-complete.test.tsx:385:26\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Complete Authentication Flow Integration \u203a Development Mode Authentication \u203a should auto-login in development mode\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"login-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogin\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogout\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"auth-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mAuthenticated\u001b[0m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 410 |\u001b[39m   \u001b[36masync\u001b[39m \u001b[36mfunction\u001b[39m waitForDevAutoLogin() {\n     \u001b[90m 411 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 412 |\u001b[39m       expect(mockAuthService\u001b[33m.\u001b[39mhandleDevLogin)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 413 |\u001b[39m     }\u001b[33m,\u001b[39m { timeout\u001b[33m:\u001b[39m \u001b[35m2000\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 414 |\u001b[39m   }\n     \u001b[90m 415 |\u001b[39m\u001b[0m\n\n      at timeout (__tests__/integration/auth-complete.test.tsx:412:46)\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Complete Authentication Flow Integration \u203a Development Mode Authentication \u203a should respect dev logout flag\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"login-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogin\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogout\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"auth-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mAuthenticated\u001b[0m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 440 |\u001b[39m   \u001b[36masync\u001b[39m \u001b[36mfunction\u001b[39m waitForAuthInitialization() {\n     \u001b[90m 441 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 442 |\u001b[39m       expect(mockAuthService\u001b[33m.\u001b[39mgetAuthConfig)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 443 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 444 |\u001b[39m   }\n     \u001b[90m 445 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/auth-complete.test.tsx:442:45\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Complete Authentication Flow Integration \u203a Logout Flow \u203a should complete logout with full cleanup\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: {\"authorized_javascript_origins\": [\"http://localhost:3000\"], \"authorized_redirect_uris\": [\"http://localhost:3000/auth/callback\"], \"development_mode\": false, \"endpoints\": {\"callback\": \"/auth/callback\", \"login\": \"/auth/login\", \"logout\": \"/auth/logout\", \"token\": \"/auth/token\", \"user\": \"/auth/me\"}, \"google_client_id\": \"test-google-client-id\"}\n\n    Number of calls: 0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"login-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogin\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogout\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"auth-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mAuthenticated\u001b[0m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 472 |\u001b[39m   \u001b[36masync\u001b[39m \u001b[36mfunction\u001b[39m verifyLogoutSuccess(mockLogout\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m) {\n     \u001b[90m 473 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 474 |\u001b[39m       expect(mockLogout)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(mockAuthConfig)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 475 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 476 |\u001b[39m   }\n     \u001b[90m 477 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/auth-complete.test.tsx:474:26\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Complete Authentication Flow Integration \u203a Logout Flow \u203a should handle logout during active session\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    \u001b[0m \u001b[90m 500 |\u001b[39m\n     \u001b[90m 501 |\u001b[39m   \u001b[36mfunction\u001b[39m expectSessionTerminated() {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 502 |\u001b[39m     expect(mockUseAuthStore()\u001b[33m.\u001b[39mlogout)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 503 |\u001b[39m   }\n     \u001b[90m 504 |\u001b[39m\n     \u001b[90m 505 |\u001b[39m   \u001b[36mfunction\u001b[39m expectRedirectToLogin() {\u001b[0m\n\n      at expectSessionTerminated (__tests__/integration/auth-complete.test.tsx:502:39)\n      at Object.<anonymous> (__tests__/integration/auth-complete.test.tsx:198:7)\n\n  \u25cf Complete Authentication Flow Integration \u203a Token Management \u203a should validate token format and claims\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: Any<String>\n\n    Number of calls: 0\n\n    \u001b[0m \u001b[90m 517 |\u001b[39m\n     \u001b[90m 518 |\u001b[39m   \u001b[36mfunction\u001b[39m expectTokenValidated() {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 519 |\u001b[39m     expect(jwtDecode)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(expect\u001b[33m.\u001b[39many(\u001b[33mString\u001b[39m))\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 520 |\u001b[39m   }\n     \u001b[90m 521 |\u001b[39m\n     \u001b[90m 522 |\u001b[39m   \u001b[36mfunction\u001b[39m expectClaimsExtracted() {\u001b[0m\n\n      at expectTokenValidated (__tests__/integration/auth-complete.test.tsx:519:23)\n      at Object.<anonymous> (__tests__/integration/auth-complete.test.tsx:216:7)\n\n  \u25cf Complete Authentication Flow Integration \u203a Token Management \u203a should handle malformed tokens\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    \u001b[0m \u001b[90m 532 |\u001b[39m\n     \u001b[90m 533 |\u001b[39m   \u001b[36mfunction\u001b[39m expectTokenRejected() {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 534 |\u001b[39m     expect(mockAuthService\u001b[33m.\u001b[39mremoveToken)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 535 |\u001b[39m   }\n     \u001b[90m 536 |\u001b[39m\n     \u001b[90m 537 |\u001b[39m   \u001b[36mfunction\u001b[39m expectSecurityCleanup() {\u001b[0m\n\n      at expectTokenRejected (__tests__/integration/auth-complete.test.tsx:534:41)\n      at Object.<anonymous> (__tests__/integration/auth-complete.test.tsx:230:7)\n\n  \u25cf Complete Authentication Flow Integration \u203a Token Management \u203a should handle expired tokens\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"login-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogin\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLogout\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"auth-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mAuthenticated\u001b[0m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 248 |\u001b[39m       \u001b[90m// The AuthProvider should detect expired token and remove it\u001b[39m\n     \u001b[90m 249 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 250 |\u001b[39m         expect(mockAuthService\u001b[33m.\u001b[39mremoveToken)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 251 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 252 |\u001b[39m       \n     \u001b[90m 253 |\u001b[39m       \u001b[90m// Verify user remains unauthenticated\u001b[39m\u001b[0m\n\n      at __tests__/integration/auth-complete.test.tsx:250:45\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\nFAIL __tests__/integration/data-fetching-pagination.test.tsx\n  \u25cf Data Fetching - Pagination \u203a disables navigation buttons appropriately\n\n    TestingLibraryElementError: Unable to find an element by: [data-testid=\"next-page\"]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[0mLoading...\u001b[0m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</div>\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n    \u001b[0m \u001b[90m 325 |\u001b[39m     }\n     \u001b[90m 326 |\u001b[39m     \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 327 |\u001b[39m     expect(screen\u001b[33m.\u001b[39mgetByTestId(\u001b[32m'next-page'\u001b[39m))\u001b[33m.\u001b[39mtoBeDisabled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 328 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 329 |\u001b[39m\n     \u001b[90m 330 |\u001b[39m   it(\u001b[32m'jumps to first page correctly'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)\n      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38\n      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17\n      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19\n      at Object.<anonymous> (__tests__/integration/data-fetching-pagination.test.tsx:327:19)\n\nFAIL __tests__/integration/role-based-access.test.tsx\n  \u25cf Role-Based Access Control Integration \u203a Protected Route Navigation \u203a should redirect unauthorized users from admin routes\n\n    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.\n\n    Check the render method of `ProtectedComponent`.\n\n    \u001b[0m \u001b[90m 151 |\u001b[39m       \u001b[36mconst\u001b[39m { \u001b[33mProtectedComponent\u001b[39m } \u001b[33m=\u001b[39m setupUnauthorizedUserRoute()\u001b[33m;\u001b[39m\n     \u001b[90m 152 |\u001b[39m       \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 153 |\u001b[39m       render(\u001b[33m<\u001b[39m\u001b[33mProtectedComponent\u001b[39m \u001b[33m/\u001b[39m\u001b[33m>\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 154 |\u001b[39m       \u001b[36mawait\u001b[39m attemptAdminRouteAccess()\u001b[33m;\u001b[39m\n     \u001b[90m 155 |\u001b[39m       \n     \u001b[90m 156 |\u001b[39m       expectAccessDenied()\u001b[33m;\u001b[39m\u001b[0m\n\n      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)\n      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)\n      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33\n      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)\n      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)\n      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:860:10)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (__tests__/integration/role-based-access.test.tsx:153:13)\n\n  \u25cf Role-Based Access Control Integration \u203a Protected Route Navigation \u203a should allow enterprise users to access admin routes\n\n    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.\n\n    Check the render method of `ProtectedComponent`.\n\n    \u001b[0m \u001b[90m 161 |\u001b[39m       \u001b[36mconst\u001b[39m { \u001b[33mProtectedComponent\u001b[39m } \u001b[33m=\u001b[39m setupAuthorizedAdminRoute()\u001b[33m;\u001b[39m\n     \u001b[90m 162 |\u001b[39m       \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 163 |\u001b[39m       render(\u001b[33m<\u001b[39m\u001b[33mProtectedComponent\u001b[39m \u001b[33m/\u001b[39m\u001b[33m>\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 164 |\u001b[39m       \u001b[36mawait\u001b[39m verifyAdminRouteAccess()\u001b[33m;\u001b[39m\n     \u001b[90m 165 |\u001b[39m       expectAdminInterfaceRendered()\u001b[33m;\u001b[39m\n     \u001b[90m 166 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)\n      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)\n      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33\n      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)\n      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)\n      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:860:10)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (__tests__/integration/role-based-access.test.tsx:163:13)\n\nFAIL __tests__/services/apiClient.test.ts\n  \u25cf ApiClient Infrastructure Tests \u203a Authentication Management \u203a includes auth token from localStorage\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: \"Bearer test-token\"\n    Received: \"Bearer mock-token\"\n\n    \u001b[0m \u001b[90m 495 |\u001b[39m   \u001b[36mconst\u001b[39m lastCall \u001b[33m=\u001b[39m mockFetch\u001b[33m.\u001b[39mmock\u001b[33m.\u001b[39mcalls[mockFetch\u001b[33m.\u001b[39mmock\u001b[33m.\u001b[39mcalls\u001b[33m.\u001b[39mlength \u001b[33m-\u001b[39m \u001b[35m1\u001b[39m]\u001b[33m;\u001b[39m\n     \u001b[90m 496 |\u001b[39m   \u001b[36mconst\u001b[39m headers \u001b[33m=\u001b[39m lastCall[\u001b[35m1\u001b[39m]\u001b[33m.\u001b[39mheaders\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 497 |\u001b[39m   expect(headers\u001b[33m.\u001b[39m\u001b[33mAuthorization\u001b[39m)\u001b[33m.\u001b[39mtoBe(expectedAuth)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 498 |\u001b[39m }\n     \u001b[90m 499 |\u001b[39m\n     \u001b[90m 500 |\u001b[39m \u001b[36mfunction\u001b[39m expectNoAuthHeaders() {\u001b[0m\n\n      at expectAuthHeaders (__tests__/services/apiClient.test.ts:497:33)\n      at Object.<anonymous> (__tests__/services/apiClient.test.ts:68:7)\n\n  \u25cf ApiClient Infrastructure Tests \u203a Authentication Management \u203a falls back to sessionStorage when localStorage empty\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: \"Bearer session-token\"\n    Received: \"Bearer mock-token\"\n\n    \u001b[0m \u001b[90m 495 |\u001b[39m   \u001b[36mconst\u001b[39m lastCall \u001b[33m=\u001b[39m mockFetch\u001b[33m.\u001b[39mmock\u001b[33m.\u001b[39mcalls[mockFetch\u001b[33m.\u001b[39mmock\u001b[33m.\u001b[39mcalls\u001b[33m.\u001b[39mlength \u001b[33m-\u001b[39m \u001b[35m1\u001b[39m]\u001b[33m;\u001b[39m\n     \u001b[90m 496 |\u001b[39m   \u001b[36mconst\u001b[39m headers \u001b[33m=\u001b[39m lastCall[\u001b[35m1\u001b[39m]\u001b[33m.\u001b[39mheaders\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 497 |\u001b[39m   expect(headers\u001b[33m.\u001b[39m\u001b[33mAuthorization\u001b[39m)\u001b[33m.\u001b[39mtoBe(expectedAuth)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 498 |\u001b[39m }\n     \u001b[90m 499 |\u001b[39m\n     \u001b[90m 500 |\u001b[39m \u001b[36mfunction\u001b[39m expectNoAuthHeaders() {\u001b[0m\n\n      at expectAuthHeaders (__tests__/services/apiClient.test.ts:497:33)\n      at Object.<anonymous> (__tests__/services/apiClient.test.ts:76:7)\n\n  \u25cf ApiClient Infrastructure Tests \u203a Authentication Management \u203a handles missing auth tokens gracefully\n\n    expect(received).toBeUndefined()\n\n    Received: \"Bearer mock-token\"\n\n    \u001b[0m \u001b[90m 501 |\u001b[39m   \u001b[36mconst\u001b[39m lastCall \u001b[33m=\u001b[39m mockFetch\u001b[33m.\u001b[39mmock\u001b[33m.\u001b[39mcalls[mockFetch\u001b[33m.\u001b[39mmock\u001b[33m.\u001b[39mcalls\u001b[33m.\u001b[39mlength \u001b[33m-\u001b[39m \u001b[35m1\u001b[39m]\u001b[33m;\u001b[39m\n     \u001b[90m 502 |\u001b[39m   \u001b[36mconst\u001b[39m headers \u001b[33m=\u001b[39m lastCall[\u001b[35m1\u001b[39m]\u001b[33m.\u001b[39mheaders\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 503 |\u001b[39m   expect(headers\u001b[33m.\u001b[39m\u001b[33mAuthorization\u001b[39m)\u001b[33m.\u001b[39mtoBeUndefined()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 504 |\u001b[39m }\n     \u001b[90m 505 |\u001b[39m\n     \u001b[90m 506 |\u001b[39m \u001b[36mfunction\u001b[39m expectMethodCall(method\u001b[33m:\u001b[39m string\u001b[33m,\u001b[39m expectedUrl\u001b[33m:\u001b[39m string\u001b[33m,\u001b[39m data\u001b[33m?\u001b[39m\u001b[33m:\u001b[39m any) {\u001b[0m\n\n      at expectNoAuthHeaders (__tests__/services/apiClient.test.ts:503:33)\n      at Object.<anonymous> (__tests__/services/apiClient.test.ts:84:7)\n\n  \u25cf ApiClient Infrastructure Tests \u203a Retry Logic with Exponential Backoff \u203a handles intermittent network failures gracefully\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: undefined\n\n    \u001b[0m \u001b[90m 321 |\u001b[39m\n     \u001b[90m 322 |\u001b[39m     \u001b[36mfunction\u001b[39m verifyIntermittentFailureRecovery(result\u001b[33m:\u001b[39m any) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 323 |\u001b[39m       expect(result\u001b[33m.\u001b[39mdata\u001b[33m.\u001b[39mrecovered)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 324 |\u001b[39m     }\n     \u001b[90m 325 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 326 |\u001b[39m\u001b[0m\n\n      at verifyIntermittentFailureRecovery (__tests__/services/apiClient.test.ts:323:37)\n      at Object.<anonymous> (__tests__/services/apiClient.test.ts:304:7)\n\nFAIL __tests__/integration/store-persistence.test.tsx\n  \u25cf Store Persistence Integration Tests \u203a Large State Persistence \u203a handles large message history persistence efficiently\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    \u001b[0m \u001b[90m 218 |\u001b[39m       \n     \u001b[90m 219 |\u001b[39m       \u001b[90m// Verify localStorage can handle large data\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 220 |\u001b[39m       expect(mockLocalStorage\u001b[33m.\u001b[39msetItem)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 221 |\u001b[39m       \n     \u001b[90m 222 |\u001b[39m       \u001b[90m// Check performance of persistence operation\u001b[39m\n     \u001b[90m 223 |\u001b[39m       \u001b[36mconst\u001b[39m startTime \u001b[33m=\u001b[39m performance\u001b[33m.\u001b[39mnow()\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/store-persistence.test.tsx:220:40)\n\n  \u25cf Store Persistence Integration Tests \u203a Large State Persistence \u203a implements storage quota management\n\n    expect(element).toHaveTextContent()\n\n    Expected element to have text content:\n      1\n    Received:\n      0\n\n    \u001b[0m \u001b[90m 245 |\u001b[39m       \n     \u001b[90m 246 |\u001b[39m       \u001b[90m// Verify graceful handling of quota issues\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 247 |\u001b[39m       expect(screen\u001b[33m.\u001b[39mgetByTestId(\u001b[32m'messages-count'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'1'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 248 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 249 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 250 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/store-persistence.test.tsx:247:52)\n\n  \u25cf Store Persistence Integration Tests \u203a Cross-Tab State Synchronization \u203a synchronizes state changes across browser tabs\n\n    TypeError: Failed to construct 'StorageEvent': parameter 2 has member 'storageArea' that is not of type 'Storage'.\n\n    \u001b[0m \u001b[90m 260 |\u001b[39m       \n     \u001b[90m 261 |\u001b[39m       \u001b[90m// Simulate storage event from another tab\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 262 |\u001b[39m       \u001b[36mconst\u001b[39m storageEvent \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mStorageEvent\u001b[39m(\u001b[32m'storage'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m     |\u001b[39m                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 263 |\u001b[39m         key\u001b[33m:\u001b[39m \u001b[32m'auth-store'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 264 |\u001b[39m         newValue\u001b[33m:\u001b[39m \u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mstringify({\n     \u001b[90m 265 |\u001b[39m           state\u001b[33m:\u001b[39m {\u001b[0m\n\n      at Object.exports.convert (node_modules/jsdom/lib/jsdom/living/generated/Storage.js:21:9)\n      at Object.exports._convertInherit (node_modules/jsdom/lib/jsdom/living/generated/StorageEventInit.js:70:25)\n      at Object.exports.convert (node_modules/jsdom/lib/jsdom/living/generated/StorageEventInit.js:97:11)\n      at new StorageEvent (node_modules/jsdom/lib/jsdom/living/generated/StorageEvent.js:112:35)\n      at Object.<anonymous> (__tests__/integration/store-persistence.test.tsx:262:28)\n\n  \u25cf Store Persistence Integration Tests \u203a Cross-Tab State Synchronization \u203a prevents infinite sync loops between tabs\n\n    TypeError: Failed to construct 'StorageEvent': parameter 2 has member 'storageArea' that is not of type 'Storage'.\n\n    \u001b[0m \u001b[90m 299 |\u001b[39m       \u001b[90m// Simulate multiple rapid storage events\u001b[39m\n     \u001b[90m 300 |\u001b[39m       \u001b[36mfor\u001b[39m (\u001b[36mlet\u001b[39m i \u001b[33m=\u001b[39m \u001b[35m0\u001b[39m\u001b[33m;\u001b[39m i \u001b[33m<\u001b[39m \u001b[35m10\u001b[39m\u001b[33m;\u001b[39m i\u001b[33m++\u001b[39m) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 301 |\u001b[39m         \u001b[36mconst\u001b[39m storageEvent \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mStorageEvent\u001b[39m(\u001b[32m'storage'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 302 |\u001b[39m           key\u001b[33m:\u001b[39m \u001b[32m'auth-store'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 303 |\u001b[39m           newValue\u001b[33m:\u001b[39m \u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mstringify({\n     \u001b[90m 304 |\u001b[39m             state\u001b[33m:\u001b[39m { user\u001b[33m:\u001b[39m { id\u001b[33m:\u001b[39m \u001b[32m`user-${i}`\u001b[39m }\u001b[33m,\u001b[39m token\u001b[33m:\u001b[39m \u001b[32m`token-${i}`\u001b[39m }\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.exports.convert (node_modules/jsdom/lib/jsdom/living/generated/Storage.js:21:9)\n      at Object.exports._convertInherit (node_modules/jsdom/lib/jsdom/living/generated/StorageEventInit.js:70:25)\n      at Object.exports.convert (node_modules/jsdom/lib/jsdom/living/generated/StorageEventInit.js:97:11)\n      at new StorageEvent (node_modules/jsdom/lib/jsdom/living/generated/StorageEvent.js:112:35)\n      at Object.<anonymous> (__tests__/integration/store-persistence.test.tsx:301:30)\n\n  \u25cf Store Persistence Integration Tests \u203a Migration and Versioning \u203a handles legacy state format migration\n\n    expect(element).toHaveTextContent()\n\n    Expected element to have text content:\n      none\n    Received:\n      test-thread-123\n\n    \u001b[0m \u001b[90m 331 |\u001b[39m       \u001b[90m// Verify app handles legacy format gracefully\u001b[39m\n     \u001b[90m 332 |\u001b[39m       expect(screen\u001b[33m.\u001b[39mgetByTestId(\u001b[32m'messages-count'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'0'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 333 |\u001b[39m       expect(screen\u001b[33m.\u001b[39mgetByTestId(\u001b[32m'active-thread'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'none'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 334 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 335 |\u001b[39m\n     \u001b[90m 336 |\u001b[39m     it(\u001b[32m'maintains backwards compatibility with older versions'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/store-persistence.test.tsx:333:51)\n\nFAIL __tests__/integration/first-load.test.tsx\n  \u25cf First Load Integration Tests \u203a Auth State Checking \u203a should check authentication status on first load\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"/login\"\n\n    Number of calls: 0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center justify-center h-screen\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<p>\u001b[39m\n              \u001b[0mLoading...\u001b[0m\n            \u001b[36m</p>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 114 |\u001b[39m       \n     \u001b[90m 115 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 116 |\u001b[39m         expect(mockPush)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'/login'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 117 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 118 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 119 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/first-load.test.tsx:116:26\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf First Load Integration Tests \u203a Auth State Checking \u203a should redirect authenticated users to main app\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"/enterprise-demo\"\n\n    Number of calls: 0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center justify-center h-screen\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<p>\u001b[39m\n              \u001b[0mLoading...\u001b[0m\n            \u001b[36m</p>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 138 |\u001b[39m       \n     \u001b[90m 139 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 140 |\u001b[39m         expect(mockPush)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'/enterprise-demo'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 141 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 142 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 143 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/first-load.test.tsx:140:26\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf First Load Integration Tests \u203a Auth State Checking \u203a should handle auth service unavailable gracefully\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"/login\"\n\n    Number of calls: 0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center justify-center h-screen\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<p>\u001b[39m\n              \u001b[0mLoading...\u001b[0m\n            \u001b[36m</p>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 156 |\u001b[39m       \n     \u001b[90m 157 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 158 |\u001b[39m         expect(mockPush)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'/login'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 159 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 160 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 161 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/first-load.test.tsx:158:26\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\nFAIL __tests__/integration/error-handling-retry.test.tsx\n  \u25cf Error Handling - Retry Logic \u203a retries failed requests with exponential backoff\n\n    expect(element).toHaveTextContent()\n\n    Expected element to have text content:\n      Retry 1\n    Received:\n      Retry 2\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"retry-test-component\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"start-request\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mStart Request\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"loading\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLoading...\u001b[0m\n              \u001b[36m<span\u001b[39m\n                \u001b[33mdata-testid\u001b[39m=\u001b[32m\"retry-count\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[0mRetry \u001b[0m\n                \u001b[0m2\u001b[0m\n              \u001b[36m</span>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 393 |\u001b[39m     \n     \u001b[90m 394 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 395 |\u001b[39m       expect(screen\u001b[33m.\u001b[39mgetByTestId(\u001b[32m'retry-count'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'Retry 1'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 396 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 397 |\u001b[39m     \n     \u001b[90m 398 |\u001b[39m     act(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at __tests__/integration/error-handling-retry.test.tsx:395:49\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at node_modules/@testing-library/dom/dist/wait-for.js:82:9\n\n  \u25cf Error Handling - Request Cancellation \u203a cancels ongoing requests\n\n    Unable to find an element by: [data-testid=\"error\"]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div>\u001b[39m\n        \u001b[36m<div\u001b[39m\n          \u001b[33mdata-testid\u001b[39m=\u001b[32m\"cancellable-request\"\u001b[39m\n        \u001b[36m>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"start-request\"\u001b[39m\n            \u001b[33mdisabled\u001b[39m=\u001b[32m\"\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mStart Request\u001b[0m\n          \u001b[36m</button>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"cancel-request\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mCancel Request\u001b[0m\n          \u001b[36m</button>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"loading\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mLoading...\u001b[0m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</div>\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n    \u001b[0m \u001b[90m 508 |\u001b[39m     userEvent\u001b[33m.\u001b[39mclick(screen\u001b[33m.\u001b[39mgetByTestId(\u001b[32m'cancel-request'\u001b[39m))\u001b[33m;\u001b[39m\n     \u001b[90m 509 |\u001b[39m     \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 510 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 511 |\u001b[39m       expect(screen\u001b[33m.\u001b[39mgetByTestId(\u001b[32m'error'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'Request cancelled'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 512 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 513 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at Object.<anonymous> (__tests__/integration/error-handling-retry.test.tsx:510:18)\n\n  \u25cf Error Handling - Timeout Handling \u203a handles request timeouts correctly\n\n    expect(element).toHaveTextContent()\n\n    Expected element to have text content:\n      Timeout\n    Received:\n\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"timeout-component\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"fast-timeout\"\u001b[39m\n              \u001b[33mdisabled\u001b[39m=\u001b[32m\"\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mFast Timeout (100ms)\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"slow-timeout\"\u001b[39m\n              \u001b[33mdisabled\u001b[39m=\u001b[32m\"\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mSlow Timeout (10s)\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"loading\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mLoading...\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"result\"\u001b[39m\n            \u001b[36m/>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 585 |\u001b[39m     \n     \u001b[90m 586 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 587 |\u001b[39m       expect(screen\u001b[33m.\u001b[39mgetByTestId(\u001b[32m'result'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'Timeout'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 588 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 589 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 590 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/error-handling-retry.test.tsx:587:44\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at node_modules/@testing-library/dom/dist/wait-for.js:82:9\n\nFAIL __tests__/integration/comprehensive-integration.test.tsx\n  \u25cf Corpus Management Integration \u203a should upload documents to corpus and update UI\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf Corpus Management Integration \u203a should upload documents to corpus and update UI\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf Corpus Management Integration \u203a should upload documents to corpus and update UI\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Corpus Management Integration \u203a should search corpus with embeddings\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf Corpus Management Integration \u203a should search corpus with embeddings\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf Corpus Management Integration \u203a should search corpus with embeddings\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Synthetic Data Generation Flow \u203a should generate synthetic data based on user input\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf Synthetic Data Generation Flow \u203a should generate synthetic data based on user input\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf Synthetic Data Generation Flow \u203a should generate synthetic data based on user input\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Synthetic Data Generation Flow \u203a should export synthetic data in multiple formats\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf Synthetic Data Generation Flow \u203a should export synthetic data in multiple formats\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf Synthetic Data Generation Flow \u203a should export synthetic data in multiple formats\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Generation Service Integration \u203a should handle batch generation jobs\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf Generation Service Integration \u203a should handle batch generation jobs\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf Generation Service Integration \u203a should handle batch generation jobs\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Generation Service Integration \u203a should stream generation progress via WebSocket\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf Generation Service Integration \u203a should stream generation progress via WebSocket\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf Generation Service Integration \u203a should stream generation progress via WebSocket\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf LLM Cache Management Integration \u203a should clear LLM cache and update UI\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf LLM Cache Management Integration \u203a should clear LLM cache and update UI\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf LLM Cache Management Integration \u203a should clear LLM cache and update UI\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf LLM Cache Management Integration \u203a should update cache TTL settings\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf LLM Cache Management Integration \u203a should update cache TTL settings\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf LLM Cache Management Integration \u203a should update cache TTL settings\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Supply Catalog Integration \u203a should load and display supply catalog\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf Supply Catalog Integration \u203a should load and display supply catalog\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf Supply Catalog Integration \u203a should load and display supply catalog\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Supply Catalog Integration \u203a should switch between different model providers\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf Supply Catalog Integration \u203a should switch between different model providers\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf Supply Catalog Integration \u203a should switch between different model providers\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Configuration Management \u203a should load and display configuration\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf Configuration Management \u203a should load and display configuration\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf Configuration Management \u203a should load and display configuration\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Configuration Management \u203a should update nested configuration values\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf Configuration Management \u203a should update nested configuration values\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf Configuration Management \u203a should update nested configuration values\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Health Check Monitoring \u203a should fetch and display system health status\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf Health Check Monitoring \u203a should fetch and display system health status\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf Health Check Monitoring \u203a should fetch and display system health status\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf OAuth Secrets Management \u203a should handle OAuth token refresh\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf OAuth Secrets Management \u203a should handle OAuth token refresh\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf OAuth Secrets Management \u203a should handle OAuth token refresh\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf OAuth Secrets Management \u203a should manage secrets securely\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf OAuth Secrets Management \u203a should manage secrets securely\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf OAuth Secrets Management \u203a should manage secrets securely\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Security Service Integration \u203a should validate user permissions for protected resources\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf Security Service Integration \u203a should validate user permissions for protected resources\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf Security Service Integration \u203a should validate user permissions for protected resources\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Security Service Integration \u203a should handle security token rotation\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf Security Service Integration \u203a should handle security token rotation\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf Security Service Integration \u203a should handle security token rotation\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Key Manager Integration \u203a should manage API keys lifecycle\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf Key Manager Integration \u203a should manage API keys lifecycle\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf Key Manager Integration \u203a should manage API keys lifecycle\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Key Manager Integration \u203a should revoke compromised keys\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf Key Manager Integration \u203a should revoke compromised keys\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf Key Manager Integration \u203a should revoke compromised keys\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Admin Functionality Integration \u203a should manage user roles and permissions\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf Admin Functionality Integration \u203a should manage user roles and permissions\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf Admin Functionality Integration \u203a should manage user roles and permissions\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Admin Functionality Integration \u203a should access admin-only endpoints with proper auth\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf Admin Functionality Integration \u203a should access admin-only endpoints with proper auth\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf Admin Functionality Integration \u203a should access admin-only endpoints with proper auth\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Infrastructure Integration Test Suite \u203a should reference modular test architecture\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf Infrastructure Integration Test Suite \u203a should reference modular test architecture\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf Infrastructure Integration Test Suite \u203a should reference modular test architecture\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Infrastructure Integration Test Suite \u203a should maintain Enterprise reliability standards\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf Infrastructure Integration Test Suite \u203a should maintain Enterprise reliability standards\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf Infrastructure Integration Test Suite \u203a should maintain Enterprise reliability standards\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Demo Mode Functionality \u203a should enable demo mode with limited features\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf Demo Mode Functionality \u203a should enable demo mode with limited features\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf Demo Mode Functionality \u203a should enable demo mode with limited features\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Demo Mode Functionality \u203a should simulate data in demo mode\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf Demo Mode Functionality \u203a should simulate data in demo mode\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf Demo Mode Functionality \u203a should simulate data in demo mode\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Enterprise Demo Features \u203a should showcase enterprise optimization features\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf Enterprise Demo Features \u203a should showcase enterprise optimization features\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf Enterprise Demo Features \u203a should showcase enterprise optimization features\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Enterprise Demo Features \u203a should display ROI calculations\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf Enterprise Demo Features \u203a should display ROI calculations\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf Enterprise Demo Features \u203a should display ROI calculations\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf PDF and Image Processing \u203a should extract text from PDF files\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf PDF and Image Processing \u203a should extract text from PDF files\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf PDF and Image Processing \u203a should extract text from PDF files\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf PDF and Image Processing \u203a should analyze images using vision models\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf PDF and Image Processing \u203a should analyze images using vision models\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf PDF and Image Processing \u203a should analyze images using vision models\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Export and Import Functionality \u203a should export data in multiple formats\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf Export and Import Functionality \u203a should export data in multiple formats\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf Export and Import Functionality \u203a should export data in multiple formats\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Export and Import Functionality \u203a should import and validate data\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf Export and Import Functionality \u203a should import and validate data\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf Export and Import Functionality \u203a should import and validate data\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Real-time Metrics Dashboard \u203a should display live performance metrics\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf Real-time Metrics Dashboard \u203a should display live performance metrics\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf Real-time Metrics Dashboard \u203a should display live performance metrics\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Agent Tool Dispatcher Integration \u203a should dispatch tools to appropriate agents\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf Agent Tool Dispatcher Integration \u203a should dispatch tools to appropriate agents\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf Agent Tool Dispatcher Integration \u203a should dispatch tools to appropriate agents\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Collaboration Features \u203a should share threads with team members\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf Collaboration Features \u203a should share threads with team members\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf Collaboration Features \u203a should share threads with team members\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Collaboration Features \u203a should sync collaborative edits in real-time\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf Collaboration Features \u203a should sync collaborative edits in real-time\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf Collaboration Features \u203a should sync collaborative edits in real-time\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Collaboration Features \u203a should handle presence awareness\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf Collaboration Features \u203a should handle presence awareness\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf Collaboration Features \u203a should handle presence awareness\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Jupyter Notebook Support \u203a should execute notebook cells\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf Jupyter Notebook Support \u203a should execute notebook cells\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf Jupyter Notebook Support \u203a should execute notebook cells\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Jupyter Notebook Support \u203a should render notebook visualizations\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf Jupyter Notebook Support \u203a should render notebook visualizations\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf Jupyter Notebook Support \u203a should render notebook visualizations\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf State Persistence and Recovery \u203a should persist application state across sessions\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf State Persistence and Recovery \u203a should persist application state across sessions\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf State Persistence and Recovery \u203a should persist application state across sessions\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf State Persistence and Recovery \u203a should recover from corrupted state gracefully\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf State Persistence and Recovery \u203a should recover from corrupted state gracefully\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf State Persistence and Recovery \u203a should recover from corrupted state gracefully\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf State Persistence and Recovery \u203a should migrate state between versions\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf State Persistence and Recovery \u203a should migrate state between versions\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf State Persistence and Recovery \u203a should migrate state between versions\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Comprehensive Frontend Integration Tests \u203a should load all test suites\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf Comprehensive Frontend Integration Tests \u203a should load all test suites\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf Comprehensive Frontend Integration Tests \u203a should load all test suites\n\n    TypeError: Cannot read properties of undefined (reading 'cleanup')\n\n    \u001b[0m \u001b[90m 27 |\u001b[39m\n     \u001b[90m 28 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 29 |\u001b[39m   wsManager\u001b[33m.\u001b[39mcleanup()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 30 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 32 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\nFAIL __tests__/auth/context.token-management.test.tsx\n  \u25cf AuthContext - Token Management \u203a should use existing token from storage\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"mock-jwt-token-123\"\n\n    Number of calls: 0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[0mTest Content\u001b[0m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 54 |\u001b[39m   \u001b[36mconst\u001b[39m waitForTokenProcessing \u001b[33m=\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 55 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 56 |\u001b[39m       expect(jwtDecode)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(mockToken)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 57 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 58 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 59 |\u001b[39m\u001b[0m\n\n      at __tests__/auth/context.token-management.test.tsx:56:25\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf AuthContext - Token Management \u203a should handle invalid token gracefully\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"Invalid token detected\", Any<Error>, {\"action\": \"token_validation_failed\", \"component\": \"AuthContext\"}\n\n    Number of calls: 0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[0mTest Content\u001b[0m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 73 |\u001b[39m   \u001b[36mconst\u001b[39m expectInvalidTokenHandling \u001b[33m=\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 74 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 75 |\u001b[39m       expect(logger\u001b[33m.\u001b[39merror)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\n     \u001b[90m    |\u001b[39m                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 76 |\u001b[39m         \u001b[32m'Invalid token detected'\u001b[39m\u001b[33m,\u001b[39m \n     \u001b[90m 77 |\u001b[39m         expect\u001b[33m.\u001b[39many(\u001b[33mError\u001b[39m)\u001b[33m,\u001b[39m\n     \u001b[90m 78 |\u001b[39m         {\u001b[0m\n\n      at __tests__/auth/context.token-management.test.tsx:75:28\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\nFAIL __tests__/integration/auth-flow.test.tsx\n  \u25cf Authentication Flow Integration \u203a should handle login and authentication\n\n    ReferenceError: useAuthStore is not defined\n\n    \u001b[0m \u001b[90m 75 |\u001b[39m \u001b[36mexport\u001b[39m \u001b[36mconst\u001b[39m expectAuthenticatedState \u001b[33m=\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 76 |\u001b[39m   \u001b[90m// Use mock expectations when store is mocked\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 77 |\u001b[39m   \u001b[36mif\u001b[39m (\u001b[36mtypeof\u001b[39m useAuthStore\u001b[33m.\u001b[39mgetState \u001b[33m===\u001b[39m \u001b[32m'function'\u001b[39m) {\n     \u001b[90m    |\u001b[39m   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 78 |\u001b[39m     \u001b[36mconst\u001b[39m authState \u001b[33m=\u001b[39m useAuthStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m 79 |\u001b[39m     expect(authState\u001b[33m.\u001b[39misAuthenticated)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 80 |\u001b[39m     expect(authState\u001b[33m.\u001b[39muser)\u001b[33m.\u001b[39mtoEqual(mockUser)\u001b[33m;\u001b[39m\u001b[0m\n\n      at expectAuthenticatedState (__tests__/test-utils/integration-test-setup.ts:77:3)\n      at Object.<anonymous> (__tests__/integration/auth-flow.test.tsx:205:29)\n\n  \u25cf Authentication Flow Integration \u203a should handle logout and cleanup\n\n    ReferenceError: useAuthStore is not defined\n\n    \u001b[0m \u001b[90m 90 |\u001b[39m \u001b[36mexport\u001b[39m \u001b[36mconst\u001b[39m expectUnauthenticatedState \u001b[33m=\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 91 |\u001b[39m   \u001b[90m// Use mock expectations when store is mocked\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 92 |\u001b[39m   \u001b[36mif\u001b[39m (\u001b[36mtypeof\u001b[39m useAuthStore\u001b[33m.\u001b[39mgetState \u001b[33m===\u001b[39m \u001b[32m'function'\u001b[39m) {\n     \u001b[90m    |\u001b[39m   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 93 |\u001b[39m     \u001b[36mconst\u001b[39m authState \u001b[33m=\u001b[39m useAuthStore\u001b[33m.\u001b[39mgetState()\u001b[33m;\u001b[39m\n     \u001b[90m 94 |\u001b[39m     expect(authState\u001b[33m.\u001b[39misAuthenticated)\u001b[33m.\u001b[39mtoBe(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 95 |\u001b[39m     expect(authState\u001b[33m.\u001b[39muser)\u001b[33m.\u001b[39mtoBe(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at expectUnauthenticatedState (__tests__/test-utils/integration-test-setup.ts:92:3)\n      at Object.<anonymous> (__tests__/integration/auth-flow.test.tsx:218:31)\n\nFAIL __tests__/integration/data-fetching-optimistic.test.tsx\n  \u25cf Data Fetching - Optimistic Updates \u203a reverts optimistic update on server error\n\n    FetchError: invalid json response body at http://localhost:8000/api/threads reason: Unexpected end of JSON input\n\n      at node_modules/node-fetch/lib/index.js:273:32\n\n  \u25cf Data Fetching - Optimistic Updates \u203a reverts optimistic update on server error\n\n    FetchError: invalid json response body at http://localhost:8000/api/threads reason: Unexpected end of JSON input\n\n      at node_modules/node-fetch/lib/index.js:273:32\n\n  \u25cf Data Fetching - Optimistic Updates \u203a reverts optimistic update on server error\n\n    FetchError: invalid json response body at http://localhost:8000/api/threads reason: Unexpected end of JSON input\n\n      at node_modules/node-fetch/lib/index.js:273:32\n\n  \u25cf Data Fetching - Optimistic Updates \u203a reverts optimistic update on server error\n\n    FetchError: invalid json response body at http://localhost:8000/api/threads reason: Unexpected end of JSON input\n\n      at node_modules/node-fetch/lib/index.js:273:32\n\n  \u25cf Data Fetching - Optimistic Updates \u203a reverts optimistic update on server error\n\n    FetchError: invalid json response body at http://localhost:8000/api/threads reason: Unexpected end of JSON input\n\n      at node_modules/node-fetch/lib/index.js:273:32\n\n  \u25cf Data Fetching - Optimistic Updates \u203a handles multiple concurrent optimistic updates\n\n    Unable to find an element by: [data-testid=\"pending\"]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div>\u001b[39m\n        \u001b[36m<div\u001b[39m\n          \u001b[33mdata-testid\u001b[39m=\u001b[32m\"optimistic-thread-manager\"\u001b[39m\n        \u001b[36m>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"add-thread\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mAdd Thread\u001b[0m\n          \u001b[36m</button>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"thread-thread-1755824064054\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<span>\u001b[39m\n              \u001b[0mNew Thread\u001b[0m\n            \u001b[36m</span>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"update-thread-1755824064054\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mUpdate\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"delete-thread-1755824064054\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mDelete\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"thread-thread-1755824064054\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<span>\u001b[39m\n              \u001b[0mNew Thread\u001b[0m\n            \u001b[36m</span>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"update-thread-1755824064054\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mUpdate\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"delete-thread-1755824064054\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mDelete\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"thread-thread-1755824064055\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<span>\u001b[39m\n              \u001b[0mNew Thread\u001b[0m\n            \u001b[36m</span>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"update-thread-1755824064055\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mUpdate\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"delete-thread-1755824064055\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mDelete\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</div>\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n    \u001b[0m \u001b[90m 345 |\u001b[39m     \n     \u001b[90m 346 |\u001b[39m     \u001b[90m// Should handle all pending states\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 347 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 348 |\u001b[39m       \u001b[36mconst\u001b[39m pendingStates \u001b[33m=\u001b[39m screen\u001b[33m.\u001b[39mgetAllByTestId(\u001b[32m'pending'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 349 |\u001b[39m       expect(pendingStates\u001b[33m.\u001b[39mlength)\u001b[33m.\u001b[39mtoBeGreaterThan(\u001b[35m0\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 350 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at Object.<anonymous> (__tests__/integration/data-fetching-optimistic.test.tsx:347:18)\n\nFAIL __tests__/integration/error-handling-core.test.tsx\n  \u25cf Error Handling - 4xx Client Errors \u203a handles 404 Not Found errors\n\n    expect(element).toHaveTextContent()\n\n    Expected element to have text content:\n      Resource not found\n    Received:\n      Error: HTTP 404: Not Found\n\n    \u001b[0m \u001b[90m 374 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 375 |\u001b[39m     \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 376 |\u001b[39m     expect(screen\u001b[33m.\u001b[39mgetByTestId(\u001b[32m'error-message'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'Resource not found'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 377 |\u001b[39m     expect(screen\u001b[33m.\u001b[39mgetByTestId(\u001b[32m'error-status'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'404'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 378 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 379 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/error-handling-core.test.tsx:376:49)\n\n  \u25cf Error Handling - 4xx Client Errors \u203a handles 401 Unauthorized errors\n\n    expect(element).toHaveTextContent()\n\n    Expected element to have text content:\n      Unauthorized access\n    Received:\n      Error: HTTP 401: Unauthorized\n\n    \u001b[0m \u001b[90m 385 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 386 |\u001b[39m     \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 387 |\u001b[39m     expect(screen\u001b[33m.\u001b[39mgetByTestId(\u001b[32m'error-message'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'Unauthorized access'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 388 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 389 |\u001b[39m\n     \u001b[90m 390 |\u001b[39m   it(\u001b[32m'handles 403 Forbidden errors'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/error-handling-core.test.tsx:387:49)\n\n  \u25cf Error Handling - 4xx Client Errors \u203a handles 422 Validation errors with details\n\n    expect(element).toHaveTextContent()\n\n    Expected element to have text content:\n      Validation failed\n    Received:\n      Error: HTTP 422: Unprocessable Entity\n\n    \u001b[0m \u001b[90m 403 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 404 |\u001b[39m     \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 405 |\u001b[39m     expect(screen\u001b[33m.\u001b[39mgetByTestId(\u001b[32m'error-message'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'Validation failed'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 406 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 407 |\u001b[39m\n     \u001b[90m 408 |\u001b[39m   it(\u001b[32m'handles 429 Rate Limiting errors'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/error-handling-core.test.tsx:405:49)\n\n  \u25cf Error Handling - 4xx Client Errors \u203a handles 429 Rate Limiting errors\n\n    Unable to find an element by: [data-testid=\"error-status\"]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div>\u001b[39m\n        \u001b[36m<div\u001b[39m\n          \u001b[33mdata-testid\u001b[39m=\u001b[32m\"loading\"\u001b[39m\n        \u001b[36m>\u001b[39m\n          \u001b[0mLoading... \u001b[0m\n          \u001b[36m<span\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"retry-count\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mRetry \u001b[0m\n            \u001b[0m2\u001b[0m\n          \u001b[36m</span>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</div>\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n    \u001b[0m \u001b[90m 422 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 423 |\u001b[39m     \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 424 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 425 |\u001b[39m       expect(screen\u001b[33m.\u001b[39mgetByTestId(\u001b[32m'error-status'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'429'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 426 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 427 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at Object.<anonymous> (__tests__/integration/error-handling-core.test.tsx:424:18)\n\n  \u25cf Error Handling - 5xx Server Errors \u203a handles 500 Internal Server errors with retry\n\n    Unable to find an element by: [data-testid=\"error-status\"]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div>\u001b[39m\n        \u001b[36m<div\u001b[39m\n          \u001b[33mdata-testid\u001b[39m=\u001b[32m\"loading\"\u001b[39m\n        \u001b[36m>\u001b[39m\n          \u001b[0mLoading... \u001b[0m\n          \u001b[36m<span\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"retry-count\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mRetry \u001b[0m\n            \u001b[0m2\u001b[0m\n          \u001b[36m</span>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</div>\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n    \u001b[0m \u001b[90m 449 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 450 |\u001b[39m     \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 451 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 452 |\u001b[39m       expect(screen\u001b[33m.\u001b[39mgetByTestId(\u001b[32m'error-status'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'500'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 453 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 454 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at Object.<anonymous> (__tests__/integration/error-handling-core.test.tsx:451:18)\n\n  \u25cf Error Handling - 5xx Server Errors \u203a handles 502 Bad Gateway errors\n\n    Unable to find an element by: [data-testid=\"error-status\"]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div>\u001b[39m\n        \u001b[36m<div\u001b[39m\n          \u001b[33mdata-testid\u001b[39m=\u001b[32m\"loading\"\u001b[39m\n        \u001b[36m>\u001b[39m\n          \u001b[0mLoading... \u001b[0m\n          \u001b[36m<span\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"retry-count\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mRetry \u001b[0m\n            \u001b[0m1\u001b[0m\n          \u001b[36m</span>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</div>\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n    \u001b[0m \u001b[90m 457 |\u001b[39m     render(\u001b[33m<\u001b[39m\u001b[33mErrorHandlingComponent\u001b[39m url\u001b[33m=\u001b[39m{\u001b[32m`${mockApiUrl}/api/bad-gateway`\u001b[39m} \u001b[33m/\u001b[39m\u001b[33m>\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 458 |\u001b[39m     \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 459 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 460 |\u001b[39m       expect(screen\u001b[33m.\u001b[39mgetByTestId(\u001b[32m'error-status'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'502'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 461 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 462 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at Object.<anonymous> (__tests__/integration/error-handling-core.test.tsx:459:18)\n\n  \u25cf Error Handling - 5xx Server Errors \u203a handles 503 Service Unavailable errors\n\n    Unable to find an element by: [data-testid=\"error-status\"]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div>\u001b[39m\n        \u001b[36m<div\u001b[39m\n          \u001b[33mdata-testid\u001b[39m=\u001b[32m\"loading\"\u001b[39m\n        \u001b[36m>\u001b[39m\n          \u001b[0mLoading... \u001b[0m\n          \u001b[36m<span\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"retry-count\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mRetry \u001b[0m\n            \u001b[0m1\u001b[0m\n          \u001b[36m</span>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</div>\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n    \u001b[0m \u001b[90m 465 |\u001b[39m     render(\u001b[33m<\u001b[39m\u001b[33mErrorHandlingComponent\u001b[39m url\u001b[33m=\u001b[39m{\u001b[32m`${mockApiUrl}/api/service-unavailable`\u001b[39m} \u001b[33m/\u001b[39m\u001b[33m>\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 466 |\u001b[39m     \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 467 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 468 |\u001b[39m       expect(screen\u001b[33m.\u001b[39mgetByTestId(\u001b[32m'error-status'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'503'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 469 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 470 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at Object.<anonymous> (__tests__/integration/error-handling-core.test.tsx:467:18)\n\n  \u25cf Error Handling - 5xx Server Errors \u203a allows manual retry after failure\n\n    Unable to find an element by: [data-testid=\"error-display\"]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div>\u001b[39m\n        \u001b[36m<div\u001b[39m\n          \u001b[33mdata-testid\u001b[39m=\u001b[32m\"loading\"\u001b[39m\n        \u001b[36m>\u001b[39m\n          \u001b[0mLoading... \u001b[0m\n          \u001b[36m<span\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"retry-count\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mRetry \u001b[0m\n            \u001b[0m1\u001b[0m\n          \u001b[36m</span>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</div>\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n    \u001b[0m \u001b[90m 473 |\u001b[39m     render(\u001b[33m<\u001b[39m\u001b[33mErrorHandlingComponent\u001b[39m url\u001b[33m=\u001b[39m{\u001b[32m`${mockApiUrl}/api/server-error`\u001b[39m} \u001b[33m/\u001b[39m\u001b[33m>\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 474 |\u001b[39m     \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 475 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 476 |\u001b[39m       expect(screen\u001b[33m.\u001b[39mgetByTestId(\u001b[32m'error-display'\u001b[39m))\u001b[33m.\u001b[39mtoBeInTheDocument()\u001b[33m;\u001b[39m\n     \u001b[90m 477 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 478 |\u001b[39m     \u001b[0m\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at Object.<anonymous> (__tests__/integration/error-handling-core.test.tsx:475:18)\n\nFAIL __tests__/auth/login-to-chat-advanced.test.tsx\n  \u25cf Auth Login Advanced Features \u203a Remember Me Functionality \u203a stores remember me preference in cookies\n\n    ReferenceError: Invalid left-hand side in assignment\n\n    \u001b[0m \u001b[90m 49 |\u001b[39m\n     \u001b[90m 50 |\u001b[39m \u001b[36mexport\u001b[39m \u001b[36mfunction\u001b[39m setupMockAuthService() {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 51 |\u001b[39m   jest\u001b[33m.\u001b[39mmocked(authService\u001b[33m.\u001b[39mhandleLogin) \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockResolvedValue({\n     \u001b[90m    |\u001b[39m        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 52 |\u001b[39m     success\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 53 |\u001b[39m     user\u001b[33m:\u001b[39m mockUser\u001b[33m,\u001b[39m\n     \u001b[90m 54 |\u001b[39m     token\u001b[33m:\u001b[39m mockToken\u001b[0m\n\n      at setupMockAuthService (__tests__/auth/login-to-chat-utils.tsx:51:8)\n      at Object.<anonymous> (__tests__/auth/login-to-chat-advanced.test.tsx:43:25)\n\n  \u25cf Auth Login Advanced Features \u203a Remember Me Functionality \u203a extends token expiration with remember me\n\n    ReferenceError: Invalid left-hand side in assignment\n\n    \u001b[0m \u001b[90m 49 |\u001b[39m\n     \u001b[90m 50 |\u001b[39m \u001b[36mexport\u001b[39m \u001b[36mfunction\u001b[39m setupMockAuthService() {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 51 |\u001b[39m   jest\u001b[33m.\u001b[39mmocked(authService\u001b[33m.\u001b[39mhandleLogin) \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockResolvedValue({\n     \u001b[90m    |\u001b[39m        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 52 |\u001b[39m     success\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 53 |\u001b[39m     user\u001b[33m:\u001b[39m mockUser\u001b[33m,\u001b[39m\n     \u001b[90m 54 |\u001b[39m     token\u001b[33m:\u001b[39m mockToken\u001b[0m\n\n      at setupMockAuthService (__tests__/auth/login-to-chat-utils.tsx:51:8)\n      at Object.<anonymous> (__tests__/auth/login-to-chat-advanced.test.tsx:43:25)\n\n  \u25cf Auth Login Advanced Features \u203a Remember Me Functionality \u203a clears remember me on explicit logout\n\n    ReferenceError: Invalid left-hand side in assignment\n\n    \u001b[0m \u001b[90m 49 |\u001b[39m\n     \u001b[90m 50 |\u001b[39m \u001b[36mexport\u001b[39m \u001b[36mfunction\u001b[39m setupMockAuthService() {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 51 |\u001b[39m   jest\u001b[33m.\u001b[39mmocked(authService\u001b[33m.\u001b[39mhandleLogin) \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockResolvedValue({\n     \u001b[90m    |\u001b[39m        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 52 |\u001b[39m     success\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 53 |\u001b[39m     user\u001b[33m:\u001b[39m mockUser\u001b[33m,\u001b[39m\n     \u001b[90m 54 |\u001b[39m     token\u001b[33m:\u001b[39m mockToken\u001b[0m\n\n      at setupMockAuthService (__tests__/auth/login-to-chat-utils.tsx:51:8)\n      at Object.<anonymous> (__tests__/auth/login-to-chat-advanced.test.tsx:43:25)\n\n  \u25cf Auth Login Advanced Features \u203a Social Login Integration \u203a initiates Google OAuth flow\n\n    ReferenceError: Invalid left-hand side in assignment\n\n    \u001b[0m \u001b[90m 49 |\u001b[39m\n     \u001b[90m 50 |\u001b[39m \u001b[36mexport\u001b[39m \u001b[36mfunction\u001b[39m setupMockAuthService() {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 51 |\u001b[39m   jest\u001b[33m.\u001b[39mmocked(authService\u001b[33m.\u001b[39mhandleLogin) \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockResolvedValue({\n     \u001b[90m    |\u001b[39m        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 52 |\u001b[39m     success\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 53 |\u001b[39m     user\u001b[33m:\u001b[39m mockUser\u001b[33m,\u001b[39m\n     \u001b[90m 54 |\u001b[39m     token\u001b[33m:\u001b[39m mockToken\u001b[0m\n\n      at setupMockAuthService (__tests__/auth/login-to-chat-utils.tsx:51:8)\n      at Object.<anonymous> (__tests__/auth/login-to-chat-advanced.test.tsx:43:25)\n\n  \u25cf Auth Login Advanced Features \u203a Social Login Integration \u203a handles OAuth callback with authorization code\n\n    ReferenceError: Invalid left-hand side in assignment\n\n    \u001b[0m \u001b[90m 49 |\u001b[39m\n     \u001b[90m 50 |\u001b[39m \u001b[36mexport\u001b[39m \u001b[36mfunction\u001b[39m setupMockAuthService() {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 51 |\u001b[39m   jest\u001b[33m.\u001b[39mmocked(authService\u001b[33m.\u001b[39mhandleLogin) \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockResolvedValue({\n     \u001b[90m    |\u001b[39m        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 52 |\u001b[39m     success\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 53 |\u001b[39m     user\u001b[33m:\u001b[39m mockUser\u001b[33m,\u001b[39m\n     \u001b[90m 54 |\u001b[39m     token\u001b[33m:\u001b[39m mockToken\u001b[0m\n\n      at setupMockAuthService (__tests__/auth/login-to-chat-utils.tsx:51:8)\n      at Object.<anonymous> (__tests__/auth/login-to-chat-advanced.test.tsx:43:25)\n\n  \u25cf Auth Login Advanced Features \u203a Social Login Integration \u203a displays error for failed OAuth flow\n\n    ReferenceError: Invalid left-hand side in assignment\n\n    \u001b[0m \u001b[90m 49 |\u001b[39m\n     \u001b[90m 50 |\u001b[39m \u001b[36mexport\u001b[39m \u001b[36mfunction\u001b[39m setupMockAuthService() {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 51 |\u001b[39m   jest\u001b[33m.\u001b[39mmocked(authService\u001b[33m.\u001b[39mhandleLogin) \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockResolvedValue({\n     \u001b[90m    |\u001b[39m        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 52 |\u001b[39m     success\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 53 |\u001b[39m     user\u001b[33m:\u001b[39m mockUser\u001b[33m,\u001b[39m\n     \u001b[90m 54 |\u001b[39m     token\u001b[33m:\u001b[39m mockToken\u001b[0m\n\n      at setupMockAuthService (__tests__/auth/login-to-chat-utils.tsx:51:8)\n      at Object.<anonymous> (__tests__/auth/login-to-chat-advanced.test.tsx:43:25)\n\n  \u25cf Auth Login Advanced Features \u203a MFA (Multi-Factor Authentication) \u203a prompts for MFA code when required\n\n    ReferenceError: Invalid left-hand side in assignment\n\n    \u001b[0m \u001b[90m 49 |\u001b[39m\n     \u001b[90m 50 |\u001b[39m \u001b[36mexport\u001b[39m \u001b[36mfunction\u001b[39m setupMockAuthService() {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 51 |\u001b[39m   jest\u001b[33m.\u001b[39mmocked(authService\u001b[33m.\u001b[39mhandleLogin) \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockResolvedValue({\n     \u001b[90m    |\u001b[39m        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 52 |\u001b[39m     success\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 53 |\u001b[39m     user\u001b[33m:\u001b[39m mockUser\u001b[33m,\u001b[39m\n     \u001b[90m 54 |\u001b[39m     token\u001b[33m:\u001b[39m mockToken\u001b[0m\n\n      at setupMockAuthService (__tests__/auth/login-to-chat-utils.tsx:51:8)\n      at Object.<anonymous> (__tests__/auth/login-to-chat-advanced.test.tsx:43:25)\n\n  \u25cf Auth Login Advanced Features \u203a MFA (Multi-Factor Authentication) \u203a validates MFA code and completes login\n\n    ReferenceError: Invalid left-hand side in assignment\n\n    \u001b[0m \u001b[90m 49 |\u001b[39m\n     \u001b[90m 50 |\u001b[39m \u001b[36mexport\u001b[39m \u001b[36mfunction\u001b[39m setupMockAuthService() {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 51 |\u001b[39m   jest\u001b[33m.\u001b[39mmocked(authService\u001b[33m.\u001b[39mhandleLogin) \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockResolvedValue({\n     \u001b[90m    |\u001b[39m        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 52 |\u001b[39m     success\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 53 |\u001b[39m     user\u001b[33m:\u001b[39m mockUser\u001b[33m,\u001b[39m\n     \u001b[90m 54 |\u001b[39m     token\u001b[33m:\u001b[39m mockToken\u001b[0m\n\n      at setupMockAuthService (__tests__/auth/login-to-chat-utils.tsx:51:8)\n      at Object.<anonymous> (__tests__/auth/login-to-chat-advanced.test.tsx:43:25)\n\n  \u25cf Auth Login Advanced Features \u203a MFA (Multi-Factor Authentication) \u203a handles invalid MFA code gracefully\n\n    ReferenceError: Invalid left-hand side in assignment\n\n    \u001b[0m \u001b[90m 49 |\u001b[39m\n     \u001b[90m 50 |\u001b[39m \u001b[36mexport\u001b[39m \u001b[36mfunction\u001b[39m setupMockAuthService() {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 51 |\u001b[39m   jest\u001b[33m.\u001b[39mmocked(authService\u001b[33m.\u001b[39mhandleLogin) \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockResolvedValue({\n     \u001b[90m    |\u001b[39m        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 52 |\u001b[39m     success\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 53 |\u001b[39m     user\u001b[33m:\u001b[39m mockUser\u001b[33m,\u001b[39m\n     \u001b[90m 54 |\u001b[39m     token\u001b[33m:\u001b[39m mockToken\u001b[0m\n\n      at setupMockAuthService (__tests__/auth/login-to-chat-utils.tsx:51:8)\n      at Object.<anonymous> (__tests__/auth/login-to-chat-advanced.test.tsx:43:25)\n\n  \u25cf Auth Login Advanced Features \u203a MFA (Multi-Factor Authentication) \u203a handles MFA verification failure\n\n    ReferenceError: Invalid left-hand side in assignment\n\n    \u001b[0m \u001b[90m 49 |\u001b[39m\n     \u001b[90m 50 |\u001b[39m \u001b[36mexport\u001b[39m \u001b[36mfunction\u001b[39m setupMockAuthService() {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 51 |\u001b[39m   jest\u001b[33m.\u001b[39mmocked(authService\u001b[33m.\u001b[39mhandleLogin) \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockResolvedValue({\n     \u001b[90m    |\u001b[39m        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 52 |\u001b[39m     success\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 53 |\u001b[39m     user\u001b[33m:\u001b[39m mockUser\u001b[33m,\u001b[39m\n     \u001b[90m 54 |\u001b[39m     token\u001b[33m:\u001b[39m mockToken\u001b[0m\n\n      at setupMockAuthService (__tests__/auth/login-to-chat-utils.tsx:51:8)\n      at Object.<anonymous> (__tests__/auth/login-to-chat-advanced.test.tsx:43:25)\n\nFAIL __tests__/integration/thread-creation-advanced.test.tsx\n  \u25cf Thread Creation Advanced Scenarios \u203a Input Field Auto-Focus \u203a focuses message input after thread creation\n\n    TypeError: navigation_1.useRouter.mockReturnValue is not a function\n\n    \u001b[0m \u001b[90m 221 |\u001b[39m   \u001b[36mfunction\u001b[39m setupAdvancedTests()\u001b[33m:\u001b[39m \u001b[36mvoid\u001b[39m {\n     \u001b[90m 222 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 223 |\u001b[39m     (useRouter \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockReturnValue(mockRouter)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 224 |\u001b[39m     mockAuthServiceFetch()\u001b[33m;\u001b[39m\n     \u001b[90m 225 |\u001b[39m     setupDefaultMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 226 |\u001b[39m   }\u001b[0m\n\n      at setupAdvancedTests (__tests__/integration/thread-creation-advanced.test.tsx:223:30)\n      at Object.<anonymous> (__tests__/integration/thread-creation-advanced.test.tsx:72:5)\n\n  \u25cf Thread Creation Advanced Scenarios \u203a Input Field Auto-Focus \u203a positions cursor at start of input\n\n    TypeError: navigation_1.useRouter.mockReturnValue is not a function\n\n    \u001b[0m \u001b[90m 221 |\u001b[39m   \u001b[36mfunction\u001b[39m setupAdvancedTests()\u001b[33m:\u001b[39m \u001b[36mvoid\u001b[39m {\n     \u001b[90m 222 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 223 |\u001b[39m     (useRouter \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockReturnValue(mockRouter)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 224 |\u001b[39m     mockAuthServiceFetch()\u001b[33m;\u001b[39m\n     \u001b[90m 225 |\u001b[39m     setupDefaultMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 226 |\u001b[39m   }\u001b[0m\n\n      at setupAdvancedTests (__tests__/integration/thread-creation-advanced.test.tsx:223:30)\n      at Object.<anonymous> (__tests__/integration/thread-creation-advanced.test.tsx:72:5)\n\n  \u25cf Thread Creation Advanced Scenarios \u203a Input Field Auto-Focus \u203a clears any existing draft content\n\n    TypeError: navigation_1.useRouter.mockReturnValue is not a function\n\n    \u001b[0m \u001b[90m 221 |\u001b[39m   \u001b[36mfunction\u001b[39m setupAdvancedTests()\u001b[33m:\u001b[39m \u001b[36mvoid\u001b[39m {\n     \u001b[90m 222 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 223 |\u001b[39m     (useRouter \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockReturnValue(mockRouter)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 224 |\u001b[39m     mockAuthServiceFetch()\u001b[33m;\u001b[39m\n     \u001b[90m 225 |\u001b[39m     setupDefaultMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 226 |\u001b[39m   }\u001b[0m\n\n      at setupAdvancedTests (__tests__/integration/thread-creation-advanced.test.tsx:223:30)\n      at Object.<anonymous> (__tests__/integration/thread-creation-advanced.test.tsx:72:5)\n\n  \u25cf Thread Creation Advanced Scenarios \u203a Input Field Auto-Focus \u203a maintains focus after thread switch\n\n    TypeError: navigation_1.useRouter.mockReturnValue is not a function\n\n    \u001b[0m \u001b[90m 221 |\u001b[39m   \u001b[36mfunction\u001b[39m setupAdvancedTests()\u001b[33m:\u001b[39m \u001b[36mvoid\u001b[39m {\n     \u001b[90m 222 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 223 |\u001b[39m     (useRouter \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockReturnValue(mockRouter)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 224 |\u001b[39m     mockAuthServiceFetch()\u001b[33m;\u001b[39m\n     \u001b[90m 225 |\u001b[39m     setupDefaultMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 226 |\u001b[39m   }\u001b[0m\n\n      at setupAdvancedTests (__tests__/integration/thread-creation-advanced.test.tsx:223:30)\n      at Object.<anonymous> (__tests__/integration/thread-creation-advanced.test.tsx:72:5)\n\n  \u25cf Thread Creation Advanced Scenarios \u203a Duplicate Prevention \u203a prevents duplicate threads on double-click\n\n    TypeError: navigation_1.useRouter.mockReturnValue is not a function\n\n    \u001b[0m \u001b[90m 221 |\u001b[39m   \u001b[36mfunction\u001b[39m setupAdvancedTests()\u001b[33m:\u001b[39m \u001b[36mvoid\u001b[39m {\n     \u001b[90m 222 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 223 |\u001b[39m     (useRouter \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockReturnValue(mockRouter)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 224 |\u001b[39m     mockAuthServiceFetch()\u001b[33m;\u001b[39m\n     \u001b[90m 225 |\u001b[39m     setupDefaultMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 226 |\u001b[39m   }\u001b[0m\n\n      at setupAdvancedTests (__tests__/integration/thread-creation-advanced.test.tsx:223:30)\n      at Object.<anonymous> (__tests__/integration/thread-creation-advanced.test.tsx:72:5)\n\n  \u25cf Thread Creation Advanced Scenarios \u203a Duplicate Prevention \u203a prevents rapid clicking during API call\n\n    TypeError: navigation_1.useRouter.mockReturnValue is not a function\n\n    \u001b[0m \u001b[90m 221 |\u001b[39m   \u001b[36mfunction\u001b[39m setupAdvancedTests()\u001b[33m:\u001b[39m \u001b[36mvoid\u001b[39m {\n     \u001b[90m 222 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 223 |\u001b[39m     (useRouter \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockReturnValue(mockRouter)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 224 |\u001b[39m     mockAuthServiceFetch()\u001b[33m;\u001b[39m\n     \u001b[90m 225 |\u001b[39m     setupDefaultMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 226 |\u001b[39m   }\u001b[0m\n\n      at setupAdvancedTests (__tests__/integration/thread-creation-advanced.test.tsx:223:30)\n      at Object.<anonymous> (__tests__/integration/thread-creation-advanced.test.tsx:72:5)\n\n  \u25cf Thread Creation Advanced Scenarios \u203a Duplicate Prevention \u203a uses unique thread IDs for each creation\n\n    TypeError: navigation_1.useRouter.mockReturnValue is not a function\n\n    \u001b[0m \u001b[90m 221 |\u001b[39m   \u001b[36mfunction\u001b[39m setupAdvancedTests()\u001b[33m:\u001b[39m \u001b[36mvoid\u001b[39m {\n     \u001b[90m 222 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 223 |\u001b[39m     (useRouter \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockReturnValue(mockRouter)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 224 |\u001b[39m     mockAuthServiceFetch()\u001b[33m;\u001b[39m\n     \u001b[90m 225 |\u001b[39m     setupDefaultMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 226 |\u001b[39m   }\u001b[0m\n\n      at setupAdvancedTests (__tests__/integration/thread-creation-advanced.test.tsx:223:30)\n      at Object.<anonymous> (__tests__/integration/thread-creation-advanced.test.tsx:72:5)\n\n  \u25cf Thread Creation Advanced Scenarios \u203a Duplicate Prevention \u203a handles race conditions correctly\n\n    TypeError: navigation_1.useRouter.mockReturnValue is not a function\n\n    \u001b[0m \u001b[90m 221 |\u001b[39m   \u001b[36mfunction\u001b[39m setupAdvancedTests()\u001b[33m:\u001b[39m \u001b[36mvoid\u001b[39m {\n     \u001b[90m 222 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 223 |\u001b[39m     (useRouter \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockReturnValue(mockRouter)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 224 |\u001b[39m     mockAuthServiceFetch()\u001b[33m;\u001b[39m\n     \u001b[90m 225 |\u001b[39m     setupDefaultMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 226 |\u001b[39m   }\u001b[0m\n\n      at setupAdvancedTests (__tests__/integration/thread-creation-advanced.test.tsx:223:30)\n      at Object.<anonymous> (__tests__/integration/thread-creation-advanced.test.tsx:72:5)\n\n  \u25cf Thread Creation Advanced Scenarios \u203a Error Recovery and Retry \u203a allows retry after network failure\n\n    TypeError: navigation_1.useRouter.mockReturnValue is not a function\n\n    \u001b[0m \u001b[90m 221 |\u001b[39m   \u001b[36mfunction\u001b[39m setupAdvancedTests()\u001b[33m:\u001b[39m \u001b[36mvoid\u001b[39m {\n     \u001b[90m 222 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 223 |\u001b[39m     (useRouter \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockReturnValue(mockRouter)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 224 |\u001b[39m     mockAuthServiceFetch()\u001b[33m;\u001b[39m\n     \u001b[90m 225 |\u001b[39m     setupDefaultMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 226 |\u001b[39m   }\u001b[0m\n\n      at setupAdvancedTests (__tests__/integration/thread-creation-advanced.test.tsx:223:30)\n      at Object.<anonymous> (__tests__/integration/thread-creation-advanced.test.tsx:72:5)\n\n  \u25cf Thread Creation Advanced Scenarios \u203a Error Recovery and Retry \u203a handles timeout errors gracefully\n\n    TypeError: navigation_1.useRouter.mockReturnValue is not a function\n\n    \u001b[0m \u001b[90m 221 |\u001b[39m   \u001b[36mfunction\u001b[39m setupAdvancedTests()\u001b[33m:\u001b[39m \u001b[36mvoid\u001b[39m {\n     \u001b[90m 222 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 223 |\u001b[39m     (useRouter \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockReturnValue(mockRouter)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 224 |\u001b[39m     mockAuthServiceFetch()\u001b[33m;\u001b[39m\n     \u001b[90m 225 |\u001b[39m     setupDefaultMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 226 |\u001b[39m   }\u001b[0m\n\n      at setupAdvancedTests (__tests__/integration/thread-creation-advanced.test.tsx:223:30)\n      at Object.<anonymous> (__tests__/integration/thread-creation-advanced.test.tsx:72:5)\n\n  \u25cf Thread Creation Advanced Scenarios \u203a Error Recovery and Retry \u203a shows appropriate error messages\n\n    TypeError: navigation_1.useRouter.mockReturnValue is not a function\n\n    \u001b[0m \u001b[90m 221 |\u001b[39m   \u001b[36mfunction\u001b[39m setupAdvancedTests()\u001b[33m:\u001b[39m \u001b[36mvoid\u001b[39m {\n     \u001b[90m 222 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 223 |\u001b[39m     (useRouter \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockReturnValue(mockRouter)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 224 |\u001b[39m     mockAuthServiceFetch()\u001b[33m;\u001b[39m\n     \u001b[90m 225 |\u001b[39m     setupDefaultMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 226 |\u001b[39m   }\u001b[0m\n\n      at setupAdvancedTests (__tests__/integration/thread-creation-advanced.test.tsx:223:30)\n      at Object.<anonymous> (__tests__/integration/thread-creation-advanced.test.tsx:72:5)\n\n  \u25cf Thread Creation Advanced Scenarios \u203a Error Recovery and Retry \u203a preserves user context after error\n\n    TypeError: navigation_1.useRouter.mockReturnValue is not a function\n\n    \u001b[0m \u001b[90m 221 |\u001b[39m   \u001b[36mfunction\u001b[39m setupAdvancedTests()\u001b[33m:\u001b[39m \u001b[36mvoid\u001b[39m {\n     \u001b[90m 222 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 223 |\u001b[39m     (useRouter \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockReturnValue(mockRouter)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 224 |\u001b[39m     mockAuthServiceFetch()\u001b[33m;\u001b[39m\n     \u001b[90m 225 |\u001b[39m     setupDefaultMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 226 |\u001b[39m   }\u001b[0m\n\n      at setupAdvancedTests (__tests__/integration/thread-creation-advanced.test.tsx:223:30)\n      at Object.<anonymous> (__tests__/integration/thread-creation-advanced.test.tsx:72:5)\n\n  \u25cf Thread Creation Advanced Scenarios \u203a Performance Edge Cases \u203a handles creation during high CPU load\n\n    TypeError: navigation_1.useRouter.mockReturnValue is not a function\n\n    \u001b[0m \u001b[90m 221 |\u001b[39m   \u001b[36mfunction\u001b[39m setupAdvancedTests()\u001b[33m:\u001b[39m \u001b[36mvoid\u001b[39m {\n     \u001b[90m 222 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 223 |\u001b[39m     (useRouter \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockReturnValue(mockRouter)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 224 |\u001b[39m     mockAuthServiceFetch()\u001b[33m;\u001b[39m\n     \u001b[90m 225 |\u001b[39m     setupDefaultMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 226 |\u001b[39m   }\u001b[0m\n\n      at setupAdvancedTests (__tests__/integration/thread-creation-advanced.test.tsx:223:30)\n      at Object.<anonymous> (__tests__/integration/thread-creation-advanced.test.tsx:72:5)\n\n  \u25cf Thread Creation Advanced Scenarios \u203a Performance Edge Cases \u203a works with slow network conditions\n\n    TypeError: navigation_1.useRouter.mockReturnValue is not a function\n\n    \u001b[0m \u001b[90m 221 |\u001b[39m   \u001b[36mfunction\u001b[39m setupAdvancedTests()\u001b[33m:\u001b[39m \u001b[36mvoid\u001b[39m {\n     \u001b[90m 222 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 223 |\u001b[39m     (useRouter \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockReturnValue(mockRouter)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 224 |\u001b[39m     mockAuthServiceFetch()\u001b[33m;\u001b[39m\n     \u001b[90m 225 |\u001b[39m     setupDefaultMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 226 |\u001b[39m   }\u001b[0m\n\n      at setupAdvancedTests (__tests__/integration/thread-creation-advanced.test.tsx:223:30)\n      at Object.<anonymous> (__tests__/integration/thread-creation-advanced.test.tsx:72:5)\n\n  \u25cf Thread Creation Advanced Scenarios \u203a Performance Edge Cases \u203a handles memory constraints gracefully\n\n    TypeError: navigation_1.useRouter.mockReturnValue is not a function\n\n    \u001b[0m \u001b[90m 221 |\u001b[39m   \u001b[36mfunction\u001b[39m setupAdvancedTests()\u001b[33m:\u001b[39m \u001b[36mvoid\u001b[39m {\n     \u001b[90m 222 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 223 |\u001b[39m     (useRouter \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockReturnValue(mockRouter)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 224 |\u001b[39m     mockAuthServiceFetch()\u001b[33m;\u001b[39m\n     \u001b[90m 225 |\u001b[39m     setupDefaultMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 226 |\u001b[39m   }\u001b[0m\n\n      at setupAdvancedTests (__tests__/integration/thread-creation-advanced.test.tsx:223:30)\n      at Object.<anonymous> (__tests__/integration/thread-creation-advanced.test.tsx:72:5)\n\n  \u25cf Thread Creation Advanced Scenarios \u203a Mobile and Touch Specific Tests \u203a prevents accidental double-tap creation\n\n    TypeError: navigation_1.useRouter.mockReturnValue is not a function\n\n    \u001b[0m \u001b[90m 221 |\u001b[39m   \u001b[36mfunction\u001b[39m setupAdvancedTests()\u001b[33m:\u001b[39m \u001b[36mvoid\u001b[39m {\n     \u001b[90m 222 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 223 |\u001b[39m     (useRouter \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockReturnValue(mockRouter)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 224 |\u001b[39m     mockAuthServiceFetch()\u001b[33m;\u001b[39m\n     \u001b[90m 225 |\u001b[39m     setupDefaultMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 226 |\u001b[39m   }\u001b[0m\n\n      at setupAdvancedTests (__tests__/integration/thread-creation-advanced.test.tsx:223:30)\n      at Object.<anonymous> (__tests__/integration/thread-creation-advanced.test.tsx:72:5)\n\n  \u25cf Thread Creation Advanced Scenarios \u203a Mobile and Touch Specific Tests \u203a handles touch gestures correctly\n\n    TypeError: navigation_1.useRouter.mockReturnValue is not a function\n\n    \u001b[0m \u001b[90m 221 |\u001b[39m   \u001b[36mfunction\u001b[39m setupAdvancedTests()\u001b[33m:\u001b[39m \u001b[36mvoid\u001b[39m {\n     \u001b[90m 222 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 223 |\u001b[39m     (useRouter \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockReturnValue(mockRouter)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 224 |\u001b[39m     mockAuthServiceFetch()\u001b[33m;\u001b[39m\n     \u001b[90m 225 |\u001b[39m     setupDefaultMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 226 |\u001b[39m   }\u001b[0m\n\n      at setupAdvancedTests (__tests__/integration/thread-creation-advanced.test.tsx:223:30)\n      at Object.<anonymous> (__tests__/integration/thread-creation-advanced.test.tsx:72:5)\n\n  \u25cf Thread Creation Advanced Scenarios \u203a Mobile and Touch Specific Tests \u203a works with virtual keyboard open\n\n    TypeError: navigation_1.useRouter.mockReturnValue is not a function\n\n    \u001b[0m \u001b[90m 221 |\u001b[39m   \u001b[36mfunction\u001b[39m setupAdvancedTests()\u001b[33m:\u001b[39m \u001b[36mvoid\u001b[39m {\n     \u001b[90m 222 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 223 |\u001b[39m     (useRouter \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockReturnValue(mockRouter)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 224 |\u001b[39m     mockAuthServiceFetch()\u001b[33m;\u001b[39m\n     \u001b[90m 225 |\u001b[39m     setupDefaultMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 226 |\u001b[39m   }\u001b[0m\n\n      at setupAdvancedTests (__tests__/integration/thread-creation-advanced.test.tsx:223:30)\n      at Object.<anonymous> (__tests__/integration/thread-creation-advanced.test.tsx:72:5)\n\nFAIL __tests__/auth/context.auth-operations.test.tsx\n  \u25cf AuthContext - Auth Operations \u203a should handle login action\n\n    expect(received).toEqual(expected) // deep equality\n\n    - Expected  - 1\n    + Received  + 1\n\n    @@ -3,11 +3,11 @@\n          \"http://localhost:3000\",\n        ],\n        \"authorized_redirect_uris\": Array [\n          \"http://localhost:3000/auth/callback\",\n        ],\n    -   \"development_mode\": false,\n    +   \"development_mode\": true,\n        \"endpoints\": Object {\n          \"callback\": \"http://localhost:8081/auth/callback\",\n          \"dev_login\": \"http://localhost:8081/auth/dev/login\",\n          \"login\": \"http://localhost:8081/auth/login\",\n          \"logout\": \"http://localhost:8081/auth/logout\",\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div />\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 43 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n     \u001b[90m 44 |\u001b[39m       expect(result\u001b[33m.\u001b[39mcurrent)\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 45 |\u001b[39m       expect(result\u001b[33m.\u001b[39mcurrent\u001b[33m?\u001b[39m\u001b[33m.\u001b[39mauthConfig)\u001b[33m.\u001b[39mtoEqual(mockAuthConfig)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 46 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 47 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 48 |\u001b[39m\u001b[0m\n\n      at __tests__/auth/context.auth-operations.test.tsx:45:42\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf AuthContext - Auth Operations \u203a should handle logout action\n\n    expect(received).toEqual(expected) // deep equality\n\n    - Expected  - 1\n    + Received  + 1\n\n    @@ -3,11 +3,11 @@\n          \"http://localhost:3000\",\n        ],\n        \"authorized_redirect_uris\": Array [\n          \"http://localhost:3000/auth/callback\",\n        ],\n    -   \"development_mode\": false,\n    +   \"development_mode\": true,\n        \"endpoints\": Object {\n          \"callback\": \"http://localhost:8081/auth/callback\",\n          \"dev_login\": \"http://localhost:8081/auth/dev/login\",\n          \"login\": \"http://localhost:8081/auth/login\",\n          \"logout\": \"http://localhost:8081/auth/logout\",\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div />\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 43 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n     \u001b[90m 44 |\u001b[39m       expect(result\u001b[33m.\u001b[39mcurrent)\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 45 |\u001b[39m       expect(result\u001b[33m.\u001b[39mcurrent\u001b[33m?\u001b[39m\u001b[33m.\u001b[39mauthConfig)\u001b[33m.\u001b[39mtoEqual(mockAuthConfig)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 46 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 47 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 48 |\u001b[39m\u001b[0m\n\n      at __tests__/auth/context.auth-operations.test.tsx:45:42\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf AuthContext - Auth Operations \u203a should set dev logout flag in development mode\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    \u001b[0m \u001b[90m 116 |\u001b[39m     \n     \u001b[90m 117 |\u001b[39m     \u001b[90m// Check dev logout flag was set\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 118 |\u001b[39m     expect(authService\u001b[33m.\u001b[39msetDevLogoutFlag)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 119 |\u001b[39m     expect(authService\u001b[33m.\u001b[39mhandleLogout)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\n     \u001b[90m 120 |\u001b[39m       expect\u001b[33m.\u001b[39mobjectContaining({ development_mode\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m })\n     \u001b[90m 121 |\u001b[39m     )\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/auth/context.auth-operations.test.tsx:118:42)\n\nFAIL __tests__/services/webSocketService.test.ts\n  \u25cf webSocketService \u203a Connection Management \u203a should handle connection success\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"{\\\"type\\\":\\\"auth\\\",\\\"token\\\":\\\"test-token-123\\\"}\"\n\n    Number of calls: 0\n\n    \u001b[0m \u001b[90m 88 |\u001b[39m\n     \u001b[90m 89 |\u001b[39m     \u001b[36mfunction\u001b[39m expectAuthTokenSent() {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 90 |\u001b[39m       expect(mockWebSocket\u001b[33m.\u001b[39msend)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\n     \u001b[90m    |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 91 |\u001b[39m         \u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mstringify({ type\u001b[33m:\u001b[39m \u001b[32m'auth'\u001b[39m\u001b[33m,\u001b[39m token\u001b[33m:\u001b[39m \u001b[32m'test-token-123'\u001b[39m })\n     \u001b[90m 92 |\u001b[39m       )\u001b[33m;\u001b[39m\n     \u001b[90m 93 |\u001b[39m     }\u001b[0m\n\n      at expectAuthTokenSent (__tests__/services/webSocketService.test.ts:90:34)\n      at expectSuccessfulConnection (__tests__/services/webSocketService.test.ts:86:7)\n      at Object.<anonymous> (__tests__/services/webSocketService.test.ts:64:7)\n\n  \u25cf webSocketService \u203a Connection Management \u203a should handle connection errors\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    - Expected\n    + Received\n\n    - [Error: Connection failed]\n    + Object {\n    +   \"code\": 1006,\n    +   \"message\": \"WebSocket connection error\",\n    +   \"recoverable\": true,\n    +   \"timestamp\": 1755824064184,\n    +   \"type\": \"connection\",\n    + },\n\n    Number of calls: 1\n\n    \u001b[0m \u001b[90m 119 |\u001b[39m     \u001b[36mfunction\u001b[39m expectErrorHandling(statusHandler\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m\u001b[33m,\u001b[39m errorHandler\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m\u001b[33m,\u001b[39m error\u001b[33m:\u001b[39m \u001b[33mError\u001b[39m) {\n     \u001b[90m 120 |\u001b[39m       expect(statusHandler)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'CLOSED'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 121 |\u001b[39m       expect(errorHandler)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(error)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 122 |\u001b[39m     }\n     \u001b[90m 123 |\u001b[39m\n     \u001b[90m 124 |\u001b[39m     it(\u001b[32m'should disconnect WebSocket properly'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at expectErrorHandling (__tests__/services/webSocketService.test.ts:121:28)\n      at Object.<anonymous> (__tests__/services/webSocketService.test.ts:99:7)\n\n  \u25cf webSocketService \u203a Connection Management \u203a should disconnect WebSocket properly\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       webSocketService\u001b[33m.\u001b[39mdisconnect()\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m       expect(mockWebSocket\u001b[33m.\u001b[39mclose)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m\n     \u001b[90m 133 |\u001b[39m     it(\u001b[32m'should handle multiple connection attempts gracefully'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.<anonymous> (__tests__/services/webSocketService.test.ts:130:35)\n\n  \u25cf webSocketService \u203a Connection Management \u203a should handle connection state transitions\n\n    TypeError: Cannot read properties of undefined (reading 'code')\n\n    \u001b[0m \u001b[90m 746 |\u001b[39m         \n     \u001b[90m 747 |\u001b[39m         \u001b[90m// Handle authentication errors specifically\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 748 |\u001b[39m         \u001b[36mif\u001b[39m (event\u001b[33m.\u001b[39mcode \u001b[33m===\u001b[39m \u001b[35m1008\u001b[39m) {\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 749 |\u001b[39m           logger\u001b[33m.\u001b[39merror(\u001b[32m'WebSocket authentication failed'\u001b[39m\u001b[33m,\u001b[39m undefined\u001b[33m,\u001b[39m {\n     \u001b[90m 750 |\u001b[39m             component\u001b[33m:\u001b[39m \u001b[32m'WebSocketService'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 751 |\u001b[39m             action\u001b[33m:\u001b[39m \u001b[32m'auth_rejection'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.ws.onclose (services/webSocketService.ts:748:19)\n      at simulateCloseAndVerify (__tests__/services/webSocketService.test.ts:167:28)\n      at Object.<anonymous> (__tests__/services/webSocketService.test.ts:145:7)\n\n  \u25cf webSocketService \u203a Message Sending and Receiving \u203a should send queued messages after reconnection\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"{\\\"type\\\":\\\"auth\\\",\\\"token\\\":\\\"test-token-123\\\"}\"\n\n    Number of calls: 0\n\n    \u001b[0m \u001b[90m 238 |\u001b[39m\n     \u001b[90m 239 |\u001b[39m       \u001b[90m// Should send auth token and queued messages\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 240 |\u001b[39m       expect(mockWebSocket\u001b[33m.\u001b[39msend)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mstringify({ type\u001b[33m:\u001b[39m \u001b[32m'auth'\u001b[39m\u001b[33m,\u001b[39m token\u001b[33m:\u001b[39m \u001b[32m'test-token-123'\u001b[39m }))\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 241 |\u001b[39m       expect(mockWebSocket\u001b[33m.\u001b[39msend)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mstringify(message1))\u001b[33m;\u001b[39m\n     \u001b[90m 242 |\u001b[39m       expect(mockWebSocket\u001b[33m.\u001b[39msend)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mstringify(message2))\u001b[33m;\u001b[39m\n     \u001b[90m 243 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/services/webSocketService.test.ts:240:34)\n\n  \u25cf webSocketService \u203a Message Sending and Receiving \u203a should handle binary message data\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: [0, 0, 0, 0, 0, 0, 0, 0]\n\n    Number of calls: 0\n\n    \u001b[0m \u001b[90m 299 |\u001b[39m       mockWebSocket\u001b[33m.\u001b[39monmessage\u001b[33m?\u001b[39m\u001b[33m.\u001b[39m(messageEvent)\u001b[33m;\u001b[39m\n     \u001b[90m 300 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 301 |\u001b[39m       expect(onBinaryMessage)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(binaryData)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 302 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 303 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 304 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/services/webSocketService.test.ts:301:31)\n\n  \u25cf webSocketService \u203a Reconnection Logic \u203a should attempt reconnection when onReconnect is provided\n\n    TypeError: Cannot read properties of undefined (reading 'code')\n\n    \u001b[0m \u001b[90m 746 |\u001b[39m         \n     \u001b[90m 747 |\u001b[39m         \u001b[90m// Handle authentication errors specifically\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 748 |\u001b[39m         \u001b[36mif\u001b[39m (event\u001b[33m.\u001b[39mcode \u001b[33m===\u001b[39m \u001b[35m1008\u001b[39m) {\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 749 |\u001b[39m           logger\u001b[33m.\u001b[39merror(\u001b[32m'WebSocket authentication failed'\u001b[39m\u001b[33m,\u001b[39m undefined\u001b[33m,\u001b[39m {\n     \u001b[90m 750 |\u001b[39m             component\u001b[33m:\u001b[39m \u001b[32m'WebSocketService'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 751 |\u001b[39m             action\u001b[33m:\u001b[39m \u001b[32m'auth_rejection'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.ws.onclose (services/webSocketService.ts:748:19)\n      at Object.<anonymous> (__tests__/services/webSocketService.test.ts:314:28)\n\n  \u25cf webSocketService \u203a Reconnection Logic \u203a should not attempt reconnection without onReconnect\n\n    TypeError: Cannot read properties of undefined (reading 'code')\n\n    \u001b[0m \u001b[90m 746 |\u001b[39m         \n     \u001b[90m 747 |\u001b[39m         \u001b[90m// Handle authentication errors specifically\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 748 |\u001b[39m         \u001b[36mif\u001b[39m (event\u001b[33m.\u001b[39mcode \u001b[33m===\u001b[39m \u001b[35m1008\u001b[39m) {\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 749 |\u001b[39m           logger\u001b[33m.\u001b[39merror(\u001b[32m'WebSocket authentication failed'\u001b[39m\u001b[33m,\u001b[39m undefined\u001b[33m,\u001b[39m {\n     \u001b[90m 750 |\u001b[39m             component\u001b[33m:\u001b[39m \u001b[32m'WebSocketService'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 751 |\u001b[39m             action\u001b[33m:\u001b[39m \u001b[32m'auth_rejection'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.ws.onclose (services/webSocketService.ts:748:19)\n      at Object.<anonymous> (__tests__/services/webSocketService.test.ts:328:28)\n\n  \u25cf webSocketService \u203a Reconnection Logic \u203a should cancel reconnection on explicit disconnect\n\n    TypeError: Cannot read properties of undefined (reading 'code')\n\n    \u001b[0m \u001b[90m 746 |\u001b[39m         \n     \u001b[90m 747 |\u001b[39m         \u001b[90m// Handle authentication errors specifically\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 748 |\u001b[39m         \u001b[36mif\u001b[39m (event\u001b[33m.\u001b[39mcode \u001b[33m===\u001b[39m \u001b[35m1008\u001b[39m) {\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 749 |\u001b[39m           logger\u001b[33m.\u001b[39merror(\u001b[32m'WebSocket authentication failed'\u001b[39m\u001b[33m,\u001b[39m undefined\u001b[33m,\u001b[39m {\n     \u001b[90m 750 |\u001b[39m             component\u001b[33m:\u001b[39m \u001b[32m'WebSocketService'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 751 |\u001b[39m             action\u001b[33m:\u001b[39m \u001b[32m'auth_rejection'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.ws.onclose (services/webSocketService.ts:748:19)\n      at Object.<anonymous> (__tests__/services/webSocketService.test.ts:345:28)\n\n  \u25cf webSocketService \u203a Heartbeat Mechanism \u203a should send heartbeat messages at configured interval\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"{\\\"type\\\":\\\"ping\\\"}\"\n    Received: \"{\\\"type\\\":\\\"ping\\\",\\\"timestamp\\\":1755824094263}\"\n\n    Number of calls: 1\n\n    \u001b[0m \u001b[90m 367 |\u001b[39m       jest\u001b[33m.\u001b[39madvanceTimersByTime(\u001b[35m30000\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 368 |\u001b[39m       \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 369 |\u001b[39m       expect(mockWebSocket\u001b[33m.\u001b[39msend)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 370 |\u001b[39m         \u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mstringify({ type\u001b[33m:\u001b[39m \u001b[32m'ping'\u001b[39m })\n     \u001b[90m 371 |\u001b[39m       )\u001b[33m;\u001b[39m\n     \u001b[90m 372 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/services/webSocketService.test.ts:369:34)\n\n  \u25cf webSocketService \u203a Rate Limiting \u203a should reset rate limit window over time\n\n    expect(jest.fn()).toHaveBeenCalledTimes(expected)\n\n    Expected number of calls: 2\n    Received number of calls: 0\n\n    \u001b[0m \u001b[90m 426 |\u001b[39m       webSocketService\u001b[33m.\u001b[39msendMessage({ type\u001b[33m:\u001b[39m \u001b[32m'test2'\u001b[39m\u001b[33m,\u001b[39m payload\u001b[33m:\u001b[39m {} })\u001b[33m;\u001b[39m\n     \u001b[90m 427 |\u001b[39m       \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 428 |\u001b[39m       expect(mockWebSocket\u001b[33m.\u001b[39msend)\u001b[33m.\u001b[39mtoHaveBeenCalledTimes(\u001b[35m2\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 429 |\u001b[39m       \n     \u001b[90m 430 |\u001b[39m       \u001b[90m// Advance time past window\u001b[39m\n     \u001b[90m 431 |\u001b[39m       jest\u001b[33m.\u001b[39madvanceTimersByTime(\u001b[35m1100\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/services/webSocketService.test.ts:428:34)\n\n  \u25cf webSocketService \u203a Error Handling \u203a should handle WebSocket errors gracefully\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    - Expected\n    + Received\n\n    - [Error: WebSocket error]\n    + Object {\n    +   \"code\": 1006,\n    +   \"message\": \"WebSocket connection error\",\n    +   \"recoverable\": true,\n    +   \"timestamp\": 1755824064278,\n    +   \"type\": \"connection\",\n    + },\n\n    Number of calls: 1\n\n    \u001b[0m \u001b[90m 449 |\u001b[39m       mockWebSocket\u001b[33m.\u001b[39monerror\u001b[33m?\u001b[39m\u001b[33m.\u001b[39m(error \u001b[36mas\u001b[39m any)\u001b[33m;\u001b[39m\n     \u001b[90m 450 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 451 |\u001b[39m       expect(onError)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(error)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 452 |\u001b[39m       expect(onStatusChange)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'CLOSED'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 453 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 454 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/services/webSocketService.test.ts:451:23)\n\n  \u25cf webSocketService \u203a Error Handling \u203a should handle connection failure gracefully\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: Any<Error>\n    Received: {\"code\": 1000, \"message\": \"Failed to create WebSocket\", \"recoverable\": true, \"timestamp\": 1755824064281, \"type\": \"connection\"}\n\n    Number of calls: 1\n\n    \u001b[0m \u001b[90m 463 |\u001b[39m       webSocketService\u001b[33m.\u001b[39mconnect(\u001b[32m'ws://localhost:8000/ws'\u001b[39m\u001b[33m,\u001b[39m { onError })\u001b[33m;\u001b[39m\n     \u001b[90m 464 |\u001b[39m       \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 465 |\u001b[39m       expect(onError)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(expect\u001b[33m.\u001b[39many(\u001b[33mError\u001b[39m))\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 466 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 467 |\u001b[39m\n     \u001b[90m 468 |\u001b[39m     it(\u001b[32m'should handle message sending errors'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.<anonymous> (__tests__/services/webSocketService.test.ts:465:23)\n\n  \u25cf webSocketService \u203a Error Handling \u203a should handle message sending errors\n\n    expect(received).not.toThrow()\n\n    Error name:    \"Error\"\n    Error message: \"Send failed\"\n\n        \u001b[0m \u001b[90m 473 |\u001b[39m       \u001b[90m// Make send throw an error\u001b[39m\n         \u001b[90m 474 |\u001b[39m       mockWebSocket\u001b[33m.\u001b[39msend\u001b[33m.\u001b[39mmockImplementation(() \u001b[33m=>\u001b[39m {\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 475 |\u001b[39m         \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Send failed'\u001b[39m)\u001b[33m;\u001b[39m\n         \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 476 |\u001b[39m       })\u001b[33m;\u001b[39m\n         \u001b[90m 477 |\u001b[39m       \n         \u001b[90m 478 |\u001b[39m       \u001b[90m// Should not throw when sending message\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/services/webSocketService.test.ts:475:15)\n      at WebSocketService.send (services/webSocketService.ts:886:15)\n      at WebSocketService.sendMessage (services/webSocketService.ts:894:10)\n      at __tests__/services/webSocketService.test.ts:480:26\n      at Object.<anonymous> (node_modules/expect/build/index.js:1824:9)\n      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:2235:93)\n      at Object.<anonymous> (__tests__/services/webSocketService.test.ts:481:14)\n      at Object.<anonymous> (__tests__/services/webSocketService.test.ts:481:14)\n\n  \u25cf webSocketService \u203a State Management \u203a should track connection state accurately\n\n    TypeError: Cannot read properties of undefined (reading 'code')\n\n    \u001b[0m \u001b[90m 746 |\u001b[39m         \n     \u001b[90m 747 |\u001b[39m         \u001b[90m// Handle authentication errors specifically\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 748 |\u001b[39m         \u001b[36mif\u001b[39m (event\u001b[33m.\u001b[39mcode \u001b[33m===\u001b[39m \u001b[35m1008\u001b[39m) {\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 749 |\u001b[39m           logger\u001b[33m.\u001b[39merror(\u001b[32m'WebSocket authentication failed'\u001b[39m\u001b[33m,\u001b[39m undefined\u001b[33m,\u001b[39m {\n     \u001b[90m 750 |\u001b[39m             component\u001b[33m:\u001b[39m \u001b[32m'WebSocketService'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 751 |\u001b[39m             action\u001b[33m:\u001b[39m \u001b[32m'auth_rejection'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.ws.onclose (services/webSocketService.ts:748:19)\n      at Object.<anonymous> (__tests__/services/webSocketService.test.ts:496:28)\n\n  \u25cf webSocketService \u203a State Management \u203a should track reconnecting state\n\n    TypeError: Cannot read properties of undefined (reading 'code')\n\n    \u001b[0m \u001b[90m 746 |\u001b[39m         \n     \u001b[90m 747 |\u001b[39m         \u001b[90m// Handle authentication errors specifically\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 748 |\u001b[39m         \u001b[36mif\u001b[39m (event\u001b[33m.\u001b[39mcode \u001b[33m===\u001b[39m \u001b[35m1008\u001b[39m) {\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 749 |\u001b[39m           logger\u001b[33m.\u001b[39merror(\u001b[32m'WebSocket authentication failed'\u001b[39m\u001b[33m,\u001b[39m undefined\u001b[33m,\u001b[39m {\n     \u001b[90m 750 |\u001b[39m             component\u001b[33m:\u001b[39m \u001b[32m'WebSocketService'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 751 |\u001b[39m             action\u001b[33m:\u001b[39m \u001b[32m'auth_rejection'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.ws.onclose (services/webSocketService.ts:748:19)\n      at Object.<anonymous> (__tests__/services/webSocketService.test.ts:508:28)\n\nFAIL __tests__/integration/offline-mode.test.tsx\n  \u25cf Enhanced Offline Mode Tests \u203a Offline/Online Transitions \u203a should detect offline/online status changes\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/offline-mode.test.tsx:458:15)\n\n  \u25cf Enhanced Offline Mode Tests \u203a Offline/Online Transitions \u203a should detect offline/online status changes\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/offline-mode.test.tsx:477:15)\n\n  \u25cf Enhanced Offline Mode Tests \u203a Offline/Online Transitions \u203a should queue actions when offline and sync when online\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/offline-mode.test.tsx:458:15)\n\n  \u25cf Enhanced Offline Mode Tests \u203a Offline/Online Transitions \u203a should queue actions when offline and sync when online\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/offline-mode.test.tsx:477:15)\n\n  \u25cf Enhanced Offline Mode Tests \u203a Data Persistence \u203a should persist offline data in localStorage\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/offline-mode.test.tsx:458:15)\n\n  \u25cf Enhanced Offline Mode Tests \u203a Data Persistence \u203a should persist offline data in localStorage\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/offline-mode.test.tsx:477:15)\n\n  \u25cf Enhanced Offline Mode Tests \u203a Data Persistence \u203a should restore data after page refresh\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/offline-mode.test.tsx:458:15)\n\n  \u25cf Enhanced Offline Mode Tests \u203a Data Persistence \u203a should restore data after page refresh\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/offline-mode.test.tsx:477:15)\n\n  \u25cf Enhanced Offline Mode Tests \u203a Draft Message Persistence \u203a should save and restore draft messages\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/offline-mode.test.tsx:458:15)\n\n  \u25cf Enhanced Offline Mode Tests \u203a Draft Message Persistence \u203a should save and restore draft messages\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/offline-mode.test.tsx:477:15)\n\n  \u25cf Enhanced Offline Mode Tests \u203a Draft Message Persistence \u203a should clear draft after sending message\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/offline-mode.test.tsx:458:15)\n\n  \u25cf Enhanced Offline Mode Tests \u203a Draft Message Persistence \u203a should clear draft after sending message\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/offline-mode.test.tsx:477:15)\n\n  \u25cf Enhanced Offline Mode Tests \u203a Network Quality Detection \u203a should detect network connection type and quality\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/offline-mode.test.tsx:458:15)\n\n  \u25cf Enhanced Offline Mode Tests \u203a Network Quality Detection \u203a should detect network connection type and quality\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/offline-mode.test.tsx:477:15)\n\n  \u25cf Enhanced Offline Mode Tests \u203a Storage Management \u203a should handle storage quota limits gracefully\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/offline-mode.test.tsx:458:15)\n\n  \u25cf Enhanced Offline Mode Tests \u203a Storage Management \u203a should handle storage quota limits gracefully\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/offline-mode.test.tsx:477:15)\n\n  \u25cf Enhanced Offline Mode Tests \u203a Storage Management \u203a should export offline data for backup\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/offline-mode.test.tsx:458:15)\n\n  \u25cf Enhanced Offline Mode Tests \u203a Storage Management \u203a should export offline data for backup\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/offline-mode.test.tsx:477:15)\n\n  \u25cf Enhanced Offline Mode Tests \u203a Error Handling \u203a should handle localStorage failures gracefully\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/offline-mode.test.tsx:458:15)\n\n  \u25cf Enhanced Offline Mode Tests \u203a Error Handling \u203a should handle localStorage failures gracefully\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/offline-mode.test.tsx:477:15)\n\n  \u25cf Enhanced Offline Mode Tests \u203a Error Handling \u203a should handle sync failures with retry\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/offline-mode.test.tsx:458:15)\n\n  \u25cf Enhanced Offline Mode Tests \u203a Error Handling \u203a should handle sync failures with retry\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/offline-mode.test.tsx:477:15)\n\n  \u25cf Enhanced Offline Mode Tests \u203a Manual Sync Operations \u203a should allow manual sync when online\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/offline-mode.test.tsx:458:15)\n\n  \u25cf Enhanced Offline Mode Tests \u203a Manual Sync Operations \u203a should allow manual sync when online\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/offline-mode.test.tsx:477:15)\n\nFAIL __tests__/integration/thread-creation.test.tsx\n  \u25cf Thread Creation Core Integration \u203a API Call to Create Thread \u203a successfully creates thread with valid API response\n\n    TypeError: navigation_1.useRouter.mockReturnValue is not a function\n\n    \u001b[0m \u001b[90m 190 |\u001b[39m   \u001b[36mfunction\u001b[39m setupIntegrationTests()\u001b[33m:\u001b[39m \u001b[36mvoid\u001b[39m {\n     \u001b[90m 191 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 192 |\u001b[39m     (useRouter \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockReturnValue(mockRouter)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 193 |\u001b[39m     mockAuthServiceFetch()\u001b[33m;\u001b[39m\n     \u001b[90m 194 |\u001b[39m     setupDefaultMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 195 |\u001b[39m   }\u001b[0m\n\n      at setupIntegrationTests (__tests__/integration/thread-creation.test.tsx:192:30)\n      at Object.<anonymous> (__tests__/integration/thread-creation.test.tsx:62:5)\n\n  \u25cf Thread Creation Core Integration \u203a API Call to Create Thread \u203a handles API failure gracefully\n\n    TypeError: navigation_1.useRouter.mockReturnValue is not a function\n\n    \u001b[0m \u001b[90m 190 |\u001b[39m   \u001b[36mfunction\u001b[39m setupIntegrationTests()\u001b[33m:\u001b[39m \u001b[36mvoid\u001b[39m {\n     \u001b[90m 191 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 192 |\u001b[39m     (useRouter \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockReturnValue(mockRouter)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 193 |\u001b[39m     mockAuthServiceFetch()\u001b[33m;\u001b[39m\n     \u001b[90m 194 |\u001b[39m     setupDefaultMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 195 |\u001b[39m   }\u001b[0m\n\n      at setupIntegrationTests (__tests__/integration/thread-creation.test.tsx:192:30)\n      at Object.<anonymous> (__tests__/integration/thread-creation.test.tsx:62:5)\n\n  \u25cf Thread Creation Core Integration \u203a API Call to Create Thread \u203a creates thread with < 300ms response time requirement\n\n    TypeError: navigation_1.useRouter.mockReturnValue is not a function\n\n    \u001b[0m \u001b[90m 190 |\u001b[39m   \u001b[36mfunction\u001b[39m setupIntegrationTests()\u001b[33m:\u001b[39m \u001b[36mvoid\u001b[39m {\n     \u001b[90m 191 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 192 |\u001b[39m     (useRouter \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockReturnValue(mockRouter)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 193 |\u001b[39m     mockAuthServiceFetch()\u001b[33m;\u001b[39m\n     \u001b[90m 194 |\u001b[39m     setupDefaultMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 195 |\u001b[39m   }\u001b[0m\n\n      at setupIntegrationTests (__tests__/integration/thread-creation.test.tsx:192:30)\n      at Object.<anonymous> (__tests__/integration/thread-creation.test.tsx:62:5)\n\n  \u25cf Thread Creation Core Integration \u203a API Call to Create Thread \u203a includes authentication token in API request\n\n    TypeError: navigation_1.useRouter.mockReturnValue is not a function\n\n    \u001b[0m \u001b[90m 190 |\u001b[39m   \u001b[36mfunction\u001b[39m setupIntegrationTests()\u001b[33m:\u001b[39m \u001b[36mvoid\u001b[39m {\n     \u001b[90m 191 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 192 |\u001b[39m     (useRouter \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockReturnValue(mockRouter)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 193 |\u001b[39m     mockAuthServiceFetch()\u001b[33m;\u001b[39m\n     \u001b[90m 194 |\u001b[39m     setupDefaultMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 195 |\u001b[39m   }\u001b[0m\n\n      at setupIntegrationTests (__tests__/integration/thread-creation.test.tsx:192:30)\n      at Object.<anonymous> (__tests__/integration/thread-creation.test.tsx:62:5)\n\n  \u25cf Thread Creation Core Integration \u203a API Call to Create Thread \u203a generates unique thread ID for each creation\n\n    TypeError: navigation_1.useRouter.mockReturnValue is not a function\n\n    \u001b[0m \u001b[90m 190 |\u001b[39m   \u001b[36mfunction\u001b[39m setupIntegrationTests()\u001b[33m:\u001b[39m \u001b[36mvoid\u001b[39m {\n     \u001b[90m 191 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 192 |\u001b[39m     (useRouter \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockReturnValue(mockRouter)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 193 |\u001b[39m     mockAuthServiceFetch()\u001b[33m;\u001b[39m\n     \u001b[90m 194 |\u001b[39m     setupDefaultMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 195 |\u001b[39m   }\u001b[0m\n\n      at setupIntegrationTests (__tests__/integration/thread-creation.test.tsx:192:30)\n      at Object.<anonymous> (__tests__/integration/thread-creation.test.tsx:62:5)\n\n  \u25cf Thread Creation Core Integration \u203a Optimistic UI Updates \u203a shows thread immediately in sidebar\n\n    TypeError: navigation_1.useRouter.mockReturnValue is not a function\n\n    \u001b[0m \u001b[90m 190 |\u001b[39m   \u001b[36mfunction\u001b[39m setupIntegrationTests()\u001b[33m:\u001b[39m \u001b[36mvoid\u001b[39m {\n     \u001b[90m 191 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 192 |\u001b[39m     (useRouter \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockReturnValue(mockRouter)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 193 |\u001b[39m     mockAuthServiceFetch()\u001b[33m;\u001b[39m\n     \u001b[90m 194 |\u001b[39m     setupDefaultMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 195 |\u001b[39m   }\u001b[0m\n\n      at setupIntegrationTests (__tests__/integration/thread-creation.test.tsx:192:30)\n      at Object.<anonymous> (__tests__/integration/thread-creation.test.tsx:62:5)\n\n  \u25cf Thread Creation Core Integration \u203a Optimistic UI Updates \u203a shows creating state during API call\n\n    TypeError: navigation_1.useRouter.mockReturnValue is not a function\n\n    \u001b[0m \u001b[90m 190 |\u001b[39m   \u001b[36mfunction\u001b[39m setupIntegrationTests()\u001b[33m:\u001b[39m \u001b[36mvoid\u001b[39m {\n     \u001b[90m 191 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 192 |\u001b[39m     (useRouter \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockReturnValue(mockRouter)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 193 |\u001b[39m     mockAuthServiceFetch()\u001b[33m;\u001b[39m\n     \u001b[90m 194 |\u001b[39m     setupDefaultMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 195 |\u001b[39m   }\u001b[0m\n\n      at setupIntegrationTests (__tests__/integration/thread-creation.test.tsx:192:30)\n      at Object.<anonymous> (__tests__/integration/thread-creation.test.tsx:62:5)\n\n  \u25cf Thread Creation Core Integration \u203a Optimistic UI Updates \u203a reverts optimistic update on API failure\n\n    TypeError: navigation_1.useRouter.mockReturnValue is not a function\n\n    \u001b[0m \u001b[90m 190 |\u001b[39m   \u001b[36mfunction\u001b[39m setupIntegrationTests()\u001b[33m:\u001b[39m \u001b[36mvoid\u001b[39m {\n     \u001b[90m 191 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 192 |\u001b[39m     (useRouter \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockReturnValue(mockRouter)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 193 |\u001b[39m     mockAuthServiceFetch()\u001b[33m;\u001b[39m\n     \u001b[90m 194 |\u001b[39m     setupDefaultMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 195 |\u001b[39m   }\u001b[0m\n\n      at setupIntegrationTests (__tests__/integration/thread-creation.test.tsx:192:30)\n      at Object.<anonymous> (__tests__/integration/thread-creation.test.tsx:62:5)\n\n  \u25cf Thread Creation Core Integration \u203a Sidebar and Navigation Updates \u203a adds new thread to sidebar list immediately\n\n    TypeError: navigation_1.useRouter.mockReturnValue is not a function\n\n    \u001b[0m \u001b[90m 190 |\u001b[39m   \u001b[36mfunction\u001b[39m setupIntegrationTests()\u001b[33m:\u001b[39m \u001b[36mvoid\u001b[39m {\n     \u001b[90m 191 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 192 |\u001b[39m     (useRouter \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockReturnValue(mockRouter)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 193 |\u001b[39m     mockAuthServiceFetch()\u001b[33m;\u001b[39m\n     \u001b[90m 194 |\u001b[39m     setupDefaultMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 195 |\u001b[39m   }\u001b[0m\n\n      at setupIntegrationTests (__tests__/integration/thread-creation.test.tsx:192:30)\n      at Object.<anonymous> (__tests__/integration/thread-creation.test.tsx:62:5)\n\n  \u25cf Thread Creation Core Integration \u203a Sidebar and Navigation Updates \u203a highlights new thread as active\n\n    TypeError: navigation_1.useRouter.mockReturnValue is not a function\n\n    \u001b[0m \u001b[90m 190 |\u001b[39m   \u001b[36mfunction\u001b[39m setupIntegrationTests()\u001b[33m:\u001b[39m \u001b[36mvoid\u001b[39m {\n     \u001b[90m 191 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 192 |\u001b[39m     (useRouter \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockReturnValue(mockRouter)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 193 |\u001b[39m     mockAuthServiceFetch()\u001b[33m;\u001b[39m\n     \u001b[90m 194 |\u001b[39m     setupDefaultMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 195 |\u001b[39m   }\u001b[0m\n\n      at setupIntegrationTests (__tests__/integration/thread-creation.test.tsx:192:30)\n      at Object.<anonymous> (__tests__/integration/thread-creation.test.tsx:62:5)\n\n  \u25cf Thread Creation Core Integration \u203a Sidebar and Navigation Updates \u203a navigates to new thread URL immediately\n\n    TypeError: navigation_1.useRouter.mockReturnValue is not a function\n\n    \u001b[0m \u001b[90m 190 |\u001b[39m   \u001b[36mfunction\u001b[39m setupIntegrationTests()\u001b[33m:\u001b[39m \u001b[36mvoid\u001b[39m {\n     \u001b[90m 191 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 192 |\u001b[39m     (useRouter \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockReturnValue(mockRouter)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 193 |\u001b[39m     mockAuthServiceFetch()\u001b[33m;\u001b[39m\n     \u001b[90m 194 |\u001b[39m     setupDefaultMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 195 |\u001b[39m   }\u001b[0m\n\n      at setupIntegrationTests (__tests__/integration/thread-creation.test.tsx:192:30)\n      at Object.<anonymous> (__tests__/integration/thread-creation.test.tsx:62:5)\n\n  \u25cf Thread Creation Core Integration \u203a Error Handling and Analytics \u203a shows error message on API failure\n\n    TypeError: navigation_1.useRouter.mockReturnValue is not a function\n\n    \u001b[0m \u001b[90m 190 |\u001b[39m   \u001b[36mfunction\u001b[39m setupIntegrationTests()\u001b[33m:\u001b[39m \u001b[36mvoid\u001b[39m {\n     \u001b[90m 191 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 192 |\u001b[39m     (useRouter \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockReturnValue(mockRouter)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 193 |\u001b[39m     mockAuthServiceFetch()\u001b[33m;\u001b[39m\n     \u001b[90m 194 |\u001b[39m     setupDefaultMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 195 |\u001b[39m   }\u001b[0m\n\n      at setupIntegrationTests (__tests__/integration/thread-creation.test.tsx:192:30)\n      at Object.<anonymous> (__tests__/integration/thread-creation.test.tsx:62:5)\n\n  \u25cf Thread Creation Core Integration \u203a Error Handling and Analytics \u203a fires thread_creation_started event on click\n\n    TypeError: navigation_1.useRouter.mockReturnValue is not a function\n\n    \u001b[0m \u001b[90m 190 |\u001b[39m   \u001b[36mfunction\u001b[39m setupIntegrationTests()\u001b[33m:\u001b[39m \u001b[36mvoid\u001b[39m {\n     \u001b[90m 191 |\u001b[39m     jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 192 |\u001b[39m     (useRouter \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockReturnValue(mockRouter)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 193 |\u001b[39m     mockAuthServiceFetch()\u001b[33m;\u001b[39m\n     \u001b[90m 194 |\u001b[39m     setupDefaultMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 195 |\u001b[39m   }\u001b[0m\n\n      at setupIntegrationTests (__tests__/integration/thread-creation.test.tsx:192:30)\n      at Object.<anonymous> (__tests__/integration/thread-creation.test.tsx:62:5)\n\nFAIL __tests__/integration/connection-management-advanced.test.tsx\n  \u25cf Connection Management Advanced Tests \u203a Reconnection Management \u203a should handle reconnection logic\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-management-advanced.test.tsx:158:15)\n\n  \u25cf Connection Management Advanced Tests \u203a Reconnection Management \u203a should handle reconnection logic\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-management-advanced.test.tsx:163:15)\n\n  \u25cf Connection Management Advanced Tests \u203a Reconnection Management \u203a should respect maximum attempts\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-management-advanced.test.tsx:158:15)\n\n  \u25cf Connection Management Advanced Tests \u203a Reconnection Management \u203a should respect maximum attempts\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-management-advanced.test.tsx:163:15)\n\n  \u25cf Connection Management Advanced Tests \u203a Reconnection Management \u203a should reset attempt counter\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-management-advanced.test.tsx:158:15)\n\n  \u25cf Connection Management Advanced Tests \u203a Reconnection Management \u203a should reset attempt counter\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-management-advanced.test.tsx:163:15)\n\n  \u25cf Connection Management Advanced Tests \u203a Reconnection Management \u203a should cancel reconnection timers\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-management-advanced.test.tsx:158:15)\n\n  \u25cf Connection Management Advanced Tests \u203a Reconnection Management \u203a should cancel reconnection timers\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-management-advanced.test.tsx:163:15)\n\n  \u25cf Connection Management Advanced Tests \u203a State Machine \u203a should validate state transitions\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-management-advanced.test.tsx:158:15)\n\n  \u25cf Connection Management Advanced Tests \u203a State Machine \u203a should validate state transitions\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-management-advanced.test.tsx:163:15)\n\n  \u25cf Connection Management Advanced Tests \u203a State Machine \u203a should enforce valid transition paths\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-management-advanced.test.tsx:158:15)\n\n  \u25cf Connection Management Advanced Tests \u203a State Machine \u203a should enforce valid transition paths\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-management-advanced.test.tsx:163:15)\n\n  \u25cf Connection Management Advanced Tests \u203a State Machine \u203a should handle error transitions\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-management-advanced.test.tsx:158:15)\n\n  \u25cf Connection Management Advanced Tests \u203a State Machine \u203a should handle error transitions\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-management-advanced.test.tsx:163:15)\n\n  \u25cf Connection Management Advanced Tests \u203a Network Condition Simulation \u203a should simulate high latency conditions\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-management-advanced.test.tsx:158:15)\n\n  \u25cf Connection Management Advanced Tests \u203a Network Condition Simulation \u203a should simulate high latency conditions\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-management-advanced.test.tsx:163:15)\n\n  \u25cf Connection Management Advanced Tests \u203a Network Condition Simulation \u203a should simulate packet loss\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-management-advanced.test.tsx:158:15)\n\n  \u25cf Connection Management Advanced Tests \u203a Network Condition Simulation \u203a should simulate packet loss\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-management-advanced.test.tsx:163:15)\n\n  \u25cf Connection Management Advanced Tests \u203a Network Condition Simulation \u203a should categorize connection quality\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-management-advanced.test.tsx:158:15)\n\n  \u25cf Connection Management Advanced Tests \u203a Network Condition Simulation \u203a should categorize connection quality\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-management-advanced.test.tsx:163:15)\n\n  \u25cf Connection Management Advanced Tests \u203a Network Condition Simulation \u203a should simulate latency delays\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-management-advanced.test.tsx:158:15)\n\n  \u25cf Connection Management Advanced Tests \u203a Network Condition Simulation \u203a should simulate latency delays\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-management-advanced.test.tsx:163:15)\n\n  \u25cf Connection Management Advanced Tests \u203a Error Recovery Scenarios \u203a should recover from multiple failures\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-management-advanced.test.tsx:158:15)\n\n  \u25cf Connection Management Advanced Tests \u203a Error Recovery Scenarios \u203a should recover from multiple failures\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-management-advanced.test.tsx:163:15)\n\n  \u25cf Connection Management Advanced Tests \u203a Error Recovery Scenarios \u203a should handle cascading failures\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-management-advanced.test.tsx:158:15)\n\n  \u25cf Connection Management Advanced Tests \u203a Error Recovery Scenarios \u203a should handle cascading failures\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-management-advanced.test.tsx:163:15)\n\n  \u25cf Connection Management Advanced Tests \u203a Error Recovery Scenarios \u203a should maintain connection isolation during failures\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-management-advanced.test.tsx:158:15)\n\n  \u25cf Connection Management Advanced Tests \u203a Error Recovery Scenarios \u203a should maintain connection isolation during failures\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-management-advanced.test.tsx:163:15)\n\n  \u25cf Connection Management Advanced Tests \u203a Resource Management \u203a should clean up timers and resources\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-management-advanced.test.tsx:158:15)\n\n  \u25cf Connection Management Advanced Tests \u203a Resource Management \u203a should clean up timers and resources\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-management-advanced.test.tsx:163:15)\n\nFAIL __tests__/integration/websocket-messaging.test.tsx\n  \u25cf WebSocket Message Processing Tests \u203a Message Sending \u203a should handle real message sending with queue tracking\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-messaging.test.tsx:21:15)\n\n  \u25cf WebSocket Message Processing Tests \u203a Message Sending \u203a should handle real message sending with queue tracking\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-messaging.test.tsx:25:15)\n\n  \u25cf WebSocket Message Processing Tests \u203a Message Sending \u203a should queue messages when connection is not ready\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-messaging.test.tsx:21:15)\n\n  \u25cf WebSocket Message Processing Tests \u203a Message Sending \u203a should queue messages when connection is not ready\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-messaging.test.tsx:25:15)\n\n  \u25cf WebSocket Message Processing Tests \u203a Message Sending \u203a should handle message serialization correctly\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-messaging.test.tsx:21:15)\n\n  \u25cf WebSocket Message Processing Tests \u203a Message Sending \u203a should handle message serialization correctly\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-messaging.test.tsx:25:15)\n\n  \u25cf WebSocket Message Processing Tests \u203a Message Receiving \u203a should handle real message receiving with event simulation\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-messaging.test.tsx:21:15)\n\n  \u25cf WebSocket Message Processing Tests \u203a Message Receiving \u203a should handle real message receiving with event simulation\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-messaging.test.tsx:25:15)\n\n  \u25cf WebSocket Message Processing Tests \u203a Message Receiving \u203a should handle multiple incoming messages in sequence\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-messaging.test.tsx:21:15)\n\n  \u25cf WebSocket Message Processing Tests \u203a Message Receiving \u203a should handle multiple incoming messages in sequence\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-messaging.test.tsx:25:15)\n\n  \u25cf WebSocket Message Processing Tests \u203a Message Receiving \u203a should handle message parsing and validation\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-messaging.test.tsx:21:15)\n\n  \u25cf WebSocket Message Processing Tests \u203a Message Receiving \u203a should handle message parsing and validation\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-messaging.test.tsx:25:15)\n\n  \u25cf WebSocket Message Processing Tests \u203a Message Queuing \u203a should handle message queuing with real buffer behavior\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-messaging.test.tsx:21:15)\n\n  \u25cf WebSocket Message Processing Tests \u203a Message Queuing \u203a should handle message queuing with real buffer behavior\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-messaging.test.tsx:25:15)\n\n  \u25cf WebSocket Message Processing Tests \u203a Message Queuing \u203a should respect buffer size limits\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-messaging.test.tsx:21:15)\n\n  \u25cf WebSocket Message Processing Tests \u203a Message Queuing \u203a should respect buffer size limits\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-messaging.test.tsx:25:15)\n\n  \u25cf WebSocket Message Processing Tests \u203a Message Queuing \u203a should handle buffer overflow gracefully\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-messaging.test.tsx:21:15)\n\n  \u25cf WebSocket Message Processing Tests \u203a Message Queuing \u203a should handle buffer overflow gracefully\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-messaging.test.tsx:25:15)\n\n  \u25cf WebSocket Message Processing Tests \u203a Message Failure Handling \u203a should handle failed messages with real error conditions\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-messaging.test.tsx:21:15)\n\n  \u25cf WebSocket Message Processing Tests \u203a Message Failure Handling \u203a should handle failed messages with real error conditions\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-messaging.test.tsx:25:15)\n\n  \u25cf WebSocket Message Processing Tests \u203a Message Failure Handling \u203a should track failed message attempts\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-messaging.test.tsx:21:15)\n\n  \u25cf WebSocket Message Processing Tests \u203a Message Failure Handling \u203a should track failed message attempts\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-messaging.test.tsx:25:15)\n\n  \u25cf WebSocket Message Processing Tests \u203a Message Performance \u203a should measure real message round-trip latency\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-messaging.test.tsx:21:15)\n\n  \u25cf WebSocket Message Processing Tests \u203a Message Performance \u203a should measure real message round-trip latency\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-messaging.test.tsx:25:15)\n\n  \u25cf WebSocket Message Processing Tests \u203a Message Performance \u203a should handle concurrent message processing\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-messaging.test.tsx:21:15)\n\n  \u25cf WebSocket Message Processing Tests \u203a Message Performance \u203a should handle concurrent message processing\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-messaging.test.tsx:25:15)\n\n  \u25cf WebSocket Message Processing Tests \u203a Message Performance \u203a should handle message throughput testing\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-messaging.test.tsx:21:15)\n\n  \u25cf WebSocket Message Processing Tests \u203a Message Performance \u203a should handle message throughput testing\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-messaging.test.tsx:25:15)\n\nFAIL __tests__/integration/websocket-stress.test.tsx\n  \u25cf WebSocket Stress Testing \u203a Connection Stress \u203a should handle rapid connect/disconnect cycles\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-stress.test.tsx:18:15)\n\n  \u25cf WebSocket Stress Testing \u203a Connection Stress \u203a should handle rapid connect/disconnect cycles\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-stress.test.tsx:22:15)\n\n  \u25cf WebSocket Stress Testing \u203a Connection Stress \u203a should handle multiple simultaneous connection attempts\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-stress.test.tsx:18:15)\n\n  \u25cf WebSocket Stress Testing \u203a Connection Stress \u203a should handle multiple simultaneous connection attempts\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-stress.test.tsx:22:15)\n\n  \u25cf WebSocket Stress Testing \u203a Memory Management \u203a should handle memory cleanup during stress testing\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-stress.test.tsx:18:15)\n\n  \u25cf WebSocket Stress Testing \u203a Memory Management \u203a should handle memory cleanup during stress testing\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-stress.test.tsx:22:15)\n\n  \u25cf WebSocket Stress Testing \u203a Memory Management \u203a should handle repeated message sending without memory leaks\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-stress.test.tsx:18:15)\n\n  \u25cf WebSocket Stress Testing \u203a Memory Management \u203a should handle repeated message sending without memory leaks\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-stress.test.tsx:22:15)\n\n  \u25cf WebSocket Stress Testing \u203a Load Testing \u203a should handle high message volume\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-stress.test.tsx:18:15)\n\n  \u25cf WebSocket Stress Testing \u203a Load Testing \u203a should handle high message volume\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-stress.test.tsx:22:15)\n\n  \u25cf WebSocket Stress Testing \u203a Load Testing \u203a should handle concurrent message bursts\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-stress.test.tsx:18:15)\n\n  \u25cf WebSocket Stress Testing \u203a Load Testing \u203a should handle concurrent message bursts\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-stress.test.tsx:22:15)\n\n  \u25cf WebSocket Stress Testing \u203a Error Recovery Stress \u203a should handle repeated error/recovery cycles\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-stress.test.tsx:18:15)\n\n  \u25cf WebSocket Stress Testing \u203a Error Recovery Stress \u203a should handle repeated error/recovery cycles\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-stress.test.tsx:22:15)\n\n  \u25cf WebSocket Stress Testing \u203a Error Recovery Stress \u203a should maintain message queue integrity during stress\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-stress.test.tsx:18:15)\n\n  \u25cf WebSocket Stress Testing \u203a Error Recovery Stress \u203a should maintain message queue integrity during stress\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-stress.test.tsx:22:15)\n\nFAIL __tests__/integration/data-fetching-core.test.tsx\n  \u25cf Data Fetching - Core Caching \u203a implements request deduplication\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 1\n    Received: 3\n\n    \u001b[0m \u001b[90m 283 |\u001b[39m     \n     \u001b[90m 284 |\u001b[39m     \u001b[90m// With proper deduplication, should only make one request\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 285 |\u001b[39m     expect(requestCount)\u001b[33m.\u001b[39mtoBe(\u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 286 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 287 |\u001b[39m\n     \u001b[90m 288 |\u001b[39m   it(\u001b[32m'handles large datasets efficiently'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/data-fetching-core.test.tsx:285:26)\n\nFAIL __tests__/integration/websocket-resilience.test.tsx\n  \u25cf WebSocket Resilience Tests \u203a Connection Status Management \u203a should display connection status correctly\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-resilience.test.tsx:118:15)\n\n  \u25cf WebSocket Resilience Tests \u203a Connection Status Management \u203a should display connection status correctly\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-resilience.test.tsx:122:15)\n\n  \u25cf WebSocket Resilience Tests \u203a Connection Status Management \u203a should handle connection errors\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-resilience.test.tsx:118:15)\n\n  \u25cf WebSocket Resilience Tests \u203a Connection Status Management \u203a should handle connection errors\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-resilience.test.tsx:122:15)\n\n  \u25cf WebSocket Resilience Tests \u203a Connection Status Management \u203a should track reconnection attempts\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-resilience.test.tsx:118:15)\n\n  \u25cf WebSocket Resilience Tests \u203a Connection Status Management \u203a should track reconnection attempts\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-resilience.test.tsx:122:15)\n\n  \u25cf WebSocket Resilience Tests \u203a Message Queue Management \u203a should queue messages when disconnected\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-resilience.test.tsx:118:15)\n\n  \u25cf WebSocket Resilience Tests \u203a Message Queue Management \u203a should queue messages when disconnected\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-resilience.test.tsx:122:15)\n\n  \u25cf WebSocket Resilience Tests \u203a Message Queue Management \u203a should clear message queue\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-resilience.test.tsx:118:15)\n\n  \u25cf WebSocket Resilience Tests \u203a Message Queue Management \u203a should clear message queue\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-resilience.test.tsx:122:15)\n\n  \u25cf WebSocket Resilience Tests \u203a WebSocket Service Integration \u203a should handle WebSocket service errors gracefully\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-resilience.test.tsx:118:15)\n\n  \u25cf WebSocket Resilience Tests \u203a WebSocket Service Integration \u203a should handle WebSocket service errors gracefully\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-resilience.test.tsx:122:15)\n\n  \u25cf WebSocket Resilience Tests \u203a WebSocket Service Integration \u203a should clean up resources properly\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-resilience.test.tsx:118:15)\n\n  \u25cf WebSocket Resilience Tests \u203a WebSocket Service Integration \u203a should clean up resources properly\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-resilience.test.tsx:122:15)\n\n  \u25cf WebSocket Resilience Tests \u203a Resilience Patterns \u203a should recover from error state to connected state\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-resilience.test.tsx:118:15)\n\n  \u25cf WebSocket Resilience Tests \u203a Resilience Patterns \u203a should recover from error state to connected state\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-resilience.test.tsx:122:15)\n\n  \u25cf WebSocket Resilience Tests \u203a Resilience Patterns \u203a should handle rapid state changes\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-resilience.test.tsx:118:15)\n\n  \u25cf WebSocket Resilience Tests \u203a Resilience Patterns \u203a should handle rapid state changes\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-resilience.test.tsx:122:15)\n\nFAIL __tests__/integration/thread-switching.test.tsx\n  \u25cf Thread Switching and Navigation Tests \u203a Basic Thread Switching \u203a should switch threads with loading state\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/thread-switching.test.tsx:267:15)\n\n  \u25cf Thread Switching and Navigation Tests \u203a Basic Thread Switching \u203a should switch threads with loading state\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/thread-switching.test.tsx:273:15)\n\n  \u25cf Thread Switching and Navigation Tests \u203a Basic Thread Switching \u203a should load message history for selected thread\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/thread-switching.test.tsx:267:15)\n\n  \u25cf Thread Switching and Navigation Tests \u203a Basic Thread Switching \u203a should load message history for selected thread\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/thread-switching.test.tsx:273:15)\n\n  \u25cf Thread Switching and Navigation Tests \u203a Basic Thread Switching \u203a should update URL correctly on thread switch\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/thread-switching.test.tsx:267:15)\n\n  \u25cf Thread Switching and Navigation Tests \u203a Basic Thread Switching \u203a should update URL correctly on thread switch\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/thread-switching.test.tsx:273:15)\n\n  \u25cf Thread Switching and Navigation Tests \u203a Basic Thread Switching \u203a should show active thread indication\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/thread-switching.test.tsx:267:15)\n\n  \u25cf Thread Switching and Navigation Tests \u203a Basic Thread Switching \u203a should show active thread indication\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/thread-switching.test.tsx:273:15)\n\n  \u25cf Thread Switching and Navigation Tests \u203a Draft Message Preservation \u203a should preserve draft messages when switching threads\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/thread-switching.test.tsx:267:15)\n\n  \u25cf Thread Switching and Navigation Tests \u203a Draft Message Preservation \u203a should preserve draft messages when switching threads\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/thread-switching.test.tsx:273:15)\n\n  \u25cf Thread Switching and Navigation Tests \u203a Draft Message Preservation \u203a should clear draft after sending message\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/thread-switching.test.tsx:267:15)\n\n  \u25cf Thread Switching and Navigation Tests \u203a Draft Message Preservation \u203a should clear draft after sending message\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/thread-switching.test.tsx:273:15)\n\n  \u25cf Thread Switching and Navigation Tests \u203a Rapid Thread Switching \u203a should handle 10 rapid thread switches within 2 seconds\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/thread-switching.test.tsx:267:15)\n\n  \u25cf Thread Switching and Navigation Tests \u203a Rapid Thread Switching \u203a should handle 10 rapid thread switches within 2 seconds\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/thread-switching.test.tsx:273:15)\n\n  \u25cf Thread Switching and Navigation Tests \u203a Rapid Thread Switching \u203a should prevent clicks during loading state\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/thread-switching.test.tsx:267:15)\n\n  \u25cf Thread Switching and Navigation Tests \u203a Rapid Thread Switching \u203a should prevent clicks during loading state\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/thread-switching.test.tsx:273:15)\n\n  \u25cf Thread Switching and Navigation Tests \u203a Message Isolation \u203a should not mix messages between threads\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/thread-switching.test.tsx:267:15)\n\n  \u25cf Thread Switching and Navigation Tests \u203a Message Isolation \u203a should not mix messages between threads\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/thread-switching.test.tsx:273:15)\n\n  \u25cf Thread Switching and Navigation Tests \u203a Message Isolation \u203a should maintain separate message histories\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/thread-switching.test.tsx:267:15)\n\n  \u25cf Thread Switching and Navigation Tests \u203a Message Isolation \u203a should maintain separate message histories\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/thread-switching.test.tsx:273:15)\n\n  \u25cf Thread Switching and Navigation Tests \u203a WebSocket Subscription Updates \u203a should update WebSocket subscriptions on thread switch\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/thread-switching.test.tsx:267:15)\n\n  \u25cf Thread Switching and Navigation Tests \u203a WebSocket Subscription Updates \u203a should update WebSocket subscriptions on thread switch\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/thread-switching.test.tsx:273:15)\n\n  \u25cf Thread Switching and Navigation Tests \u203a Browser Navigation Integration \u203a should handle browser back/forward navigation\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/thread-switching.test.tsx:267:15)\n\n  \u25cf Thread Switching and Navigation Tests \u203a Browser Navigation Integration \u203a should handle browser back/forward navigation\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/thread-switching.test.tsx:273:15)\n\n  \u25cf Thread Switching and Navigation Tests \u203a Browser Navigation Integration \u203a should maintain thread state during navigation\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/thread-switching.test.tsx:267:15)\n\n  \u25cf Thread Switching and Navigation Tests \u203a Browser Navigation Integration \u203a should maintain thread state during navigation\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/thread-switching.test.tsx:273:15)\n\n  \u25cf Thread Switching and Navigation Tests \u203a Performance Metrics \u203a should switch threads in less than 200ms\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/thread-switching.test.tsx:267:15)\n\n  \u25cf Thread Switching and Navigation Tests \u203a Performance Metrics \u203a should switch threads in less than 200ms\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/thread-switching.test.tsx:273:15)\n\n  \u25cf Thread Switching and Navigation Tests \u203a Performance Metrics \u203a should handle concurrent rapid switches without performance degradation\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/thread-switching.test.tsx:267:15)\n\n  \u25cf Thread Switching and Navigation Tests \u203a Performance Metrics \u203a should handle concurrent rapid switches without performance degradation\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/thread-switching.test.tsx:273:15)\n\nFAIL __tests__/services/demoService.test.ts\n  \u25cf DemoService \u203a Authentication Handling \u203a should include auth header when token exists\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: StringContaining \"/api/demo/chat\", ObjectContaining {\"headers\": ObjectContaining {\"Authorization\": \"Bearer valid-token\"}}\n    Received: \"http://localhost:8081/api/demo/chat\", {\"body\": \"{\\\"message\\\":\\\"What are the cost savings for Financial Services?\\\",\\\"industry\\\":\\\"Financial Services\\\",\\\"session_id\\\":\\\"demo-session-123\\\",\\\"context\\\":{\\\"user_type\\\":\\\"enterprise_prospect\\\"}}\", \"headers\": {\"Authorization\": \"Bearer mock-token\", \"Content-Type\": \"application/json\"}, \"method\": \"POST\"}\n\n    Number of calls: 1\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mawait\u001b[39m demoService\u001b[33m.\u001b[39msendChatMessage(request)\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m       expect(fetch)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\n     \u001b[90m     |\u001b[39m                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m         expect\u001b[33m.\u001b[39mstringContaining(\u001b[32m'/api/demo/chat'\u001b[39m)\u001b[33m,\u001b[39m\n     \u001b[90m 132 |\u001b[39m         expect\u001b[33m.\u001b[39mobjectContaining({\n     \u001b[90m 133 |\u001b[39m           headers\u001b[33m:\u001b[39m expect\u001b[33m.\u001b[39mobjectContaining({\u001b[0m\n\n      at Object.<anonymous> (__tests__/services/demoService.test.ts:130:21)\n\n  \u25cf DemoService \u203a Authentication Handling \u203a should handle requests without auth token\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: StringContaining \"/api/demo/chat\", ObjectContaining {\"headers\": ObjectNotContaining {\"Authorization\": Any<String>}}\n    Received: \"http://localhost:8081/api/demo/chat\", {\"body\": \"{\\\"message\\\":\\\"What are the cost savings for Financial Services?\\\",\\\"industry\\\":\\\"Financial Services\\\",\\\"session_id\\\":\\\"demo-session-123\\\",\\\"context\\\":{\\\"user_type\\\":\\\"enterprise_prospect\\\"}}\", \"headers\": {\"Authorization\": \"Bearer mock-token\", \"Content-Type\": \"application/json\"}, \"method\": \"POST\"}\n\n    Number of calls: 1\n\n    \u001b[0m \u001b[90m 146 |\u001b[39m       \u001b[36mawait\u001b[39m demoService\u001b[33m.\u001b[39msendChatMessage(request)\u001b[33m;\u001b[39m\n     \u001b[90m 147 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 148 |\u001b[39m       expect(fetch)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\n     \u001b[90m     |\u001b[39m                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 149 |\u001b[39m         expect\u001b[33m.\u001b[39mstringContaining(\u001b[32m'/api/demo/chat'\u001b[39m)\u001b[33m,\u001b[39m\n     \u001b[90m 150 |\u001b[39m         expect\u001b[33m.\u001b[39mobjectContaining({\n     \u001b[90m 151 |\u001b[39m           headers\u001b[33m:\u001b[39m expect\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mobjectContaining({\u001b[0m\n\n      at Object.<anonymous> (__tests__/services/demoService.test.ts:148:21)\n\n  \u25cf DemoService \u203a Authentication Handling \u203a should redirect to login on 401 response\n\n    expect(received).rejects.toThrow(expected)\n\n    Expected substring: \"Unauthorized\"\n    Received message:   \"response.text is not a function\"\n\n        \u001b[0m \u001b[90m 87 |\u001b[39m       \n         \u001b[90m 88 |\u001b[39m       \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mresponse\u001b[33m.\u001b[39mok) {\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 89 |\u001b[39m         \u001b[36mconst\u001b[39m errorData \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m response\u001b[33m.\u001b[39mtext()\u001b[33m;\u001b[39m\n         \u001b[90m    |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 90 |\u001b[39m         \u001b[36mlet\u001b[39m errorMessage\u001b[33m:\u001b[39m string\u001b[33m;\u001b[39m\n         \u001b[90m 91 |\u001b[39m         \u001b[36mtry\u001b[39m {\n         \u001b[90m 92 |\u001b[39m           \u001b[36mconst\u001b[39m parsed \u001b[33m=\u001b[39m \u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mparse(errorData)\u001b[33m;\u001b[39m\u001b[0m\n\n      at DemoService.fetchWithAuth (services/demoService.ts:89:42)\n      at DemoService.sendChatMessage (services/demoService.ts:115:22)\n      at Object.<anonymous> (__tests__/services/demoService.test.ts:164:7)\n      at Object.toThrow (node_modules/expect/build/index.js:2155:20)\n      at Object.<anonymous> (__tests__/services/demoService.test.ts:164:66)\n\n  \u25cf DemoService \u203a Authentication Handling \u203a should not redirect on other error codes\n\n    expect(received).rejects.toThrow(expected)\n\n    Expected substring: \"Failed to send demo chat message: Server Error\"\n    Received message:   \"response.text is not a function\"\n\n        \u001b[0m \u001b[90m 87 |\u001b[39m       \n         \u001b[90m 88 |\u001b[39m       \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mresponse\u001b[33m.\u001b[39mok) {\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 89 |\u001b[39m         \u001b[36mconst\u001b[39m errorData \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m response\u001b[33m.\u001b[39mtext()\u001b[33m;\u001b[39m\n         \u001b[90m    |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 90 |\u001b[39m         \u001b[36mlet\u001b[39m errorMessage\u001b[33m:\u001b[39m string\u001b[33m;\u001b[39m\n         \u001b[90m 91 |\u001b[39m         \u001b[36mtry\u001b[39m {\n         \u001b[90m 92 |\u001b[39m           \u001b[36mconst\u001b[39m parsed \u001b[33m=\u001b[39m \u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mparse(errorData)\u001b[33m;\u001b[39m\u001b[0m\n\n      at DemoService.fetchWithAuth (services/demoService.ts:89:42)\n      at DemoService.sendChatMessage (services/demoService.ts:115:22)\n      at Object.<anonymous> (__tests__/services/demoService.test.ts:175:7)\n      at Object.toThrow (node_modules/expect/build/index.js:2155:20)\n      at Object.<anonymous> (__tests__/services/demoService.test.ts:175:66)\n\n  \u25cf DemoService \u203a ROI Calculation - Business Critical \u203a should handle ROI calculation server errors gracefully\n\n    expect(received).rejects.toThrow(expected)\n\n    Expected substring: \"Failed to calculate ROI: Calculation Error\"\n    Received message:   \"response.text is not a function\"\n\n        \u001b[0m \u001b[90m 87 |\u001b[39m       \n         \u001b[90m 88 |\u001b[39m       \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mresponse\u001b[33m.\u001b[39mok) {\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 89 |\u001b[39m         \u001b[36mconst\u001b[39m errorData \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m response\u001b[33m.\u001b[39mtext()\u001b[33m;\u001b[39m\n         \u001b[90m    |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 90 |\u001b[39m         \u001b[36mlet\u001b[39m errorMessage\u001b[33m:\u001b[39m string\u001b[33m;\u001b[39m\n         \u001b[90m 91 |\u001b[39m         \u001b[36mtry\u001b[39m {\n         \u001b[90m 92 |\u001b[39m           \u001b[36mconst\u001b[39m parsed \u001b[33m=\u001b[39m \u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mparse(errorData)\u001b[33m;\u001b[39m\u001b[0m\n\n      at DemoService.fetchWithAuth (services/demoService.ts:89:42)\n      at DemoService.calculateROI (services/demoService.ts:128:22)\n      at Object.<anonymous> (__tests__/services/demoService.test.ts:270:7)\n      at Object.toThrow (node_modules/expect/build/index.js:2155:20)\n      at Object.<anonymous> (__tests__/services/demoService.test.ts:270:63)\n\n  \u25cf DemoService \u203a ROI Calculation - Business Critical \u203a should handle malformed ROI input data\n\n    expect(received).rejects.toThrow(expected)\n\n    Expected substring: \"Failed to calculate ROI: Bad Request\"\n    Received message:   \"response.text is not a function\"\n\n        \u001b[0m \u001b[90m 87 |\u001b[39m       \n         \u001b[90m 88 |\u001b[39m       \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mresponse\u001b[33m.\u001b[39mok) {\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 89 |\u001b[39m         \u001b[36mconst\u001b[39m errorData \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m response\u001b[33m.\u001b[39mtext()\u001b[33m;\u001b[39m\n         \u001b[90m    |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 90 |\u001b[39m         \u001b[36mlet\u001b[39m errorMessage\u001b[33m:\u001b[39m string\u001b[33m;\u001b[39m\n         \u001b[90m 91 |\u001b[39m         \u001b[36mtry\u001b[39m {\n         \u001b[90m 92 |\u001b[39m           \u001b[36mconst\u001b[39m parsed \u001b[33m=\u001b[39m \u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mparse(errorData)\u001b[33m;\u001b[39m\u001b[0m\n\n      at DemoService.fetchWithAuth (services/demoService.ts:89:42)\n      at DemoService.calculateROI (services/demoService.ts:128:22)\n      at Object.<anonymous> (__tests__/services/demoService.test.ts:282:7)\n      at Object.toThrow (node_modules/expect/build/index.js:2155:20)\n      at Object.<anonymous> (__tests__/services/demoService.test.ts:282:70)\n\n  \u25cf DemoService \u203a Report Export - Enterprise Feature \u203a should handle export failures gracefully\n\n    expect(received).rejects.toThrow(expected)\n\n    Expected substring: \"Failed to export report: Service Unavailable\"\n    Received message:   \"response.text is not a function\"\n\n        \u001b[0m \u001b[90m 87 |\u001b[39m       \n         \u001b[90m 88 |\u001b[39m       \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mresponse\u001b[33m.\u001b[39mok) {\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 89 |\u001b[39m         \u001b[36mconst\u001b[39m errorData \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m response\u001b[33m.\u001b[39mtext()\u001b[33m;\u001b[39m\n         \u001b[90m    |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 90 |\u001b[39m         \u001b[36mlet\u001b[39m errorMessage\u001b[33m:\u001b[39m string\u001b[33m;\u001b[39m\n         \u001b[90m 91 |\u001b[39m         \u001b[36mtry\u001b[39m {\n         \u001b[90m 92 |\u001b[39m           \u001b[36mconst\u001b[39m parsed \u001b[33m=\u001b[39m \u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mparse(errorData)\u001b[33m;\u001b[39m\u001b[0m\n\n      at DemoService.fetchWithAuth (services/demoService.ts:89:42)\n      at DemoService.exportReport (services/demoService.ts:166:22)\n      at Object.<anonymous> (__tests__/services/demoService.test.ts:424:7)\n      at Object.toThrow (node_modules/expect/build/index.js:2155:20)\n      at Object.<anonymous> (__tests__/services/demoService.test.ts:424:69)\n\n  \u25cf DemoService \u203a Session Management \u203a should handle session status for non-existent session\n\n    expect(received).rejects.toThrow(expected)\n\n    Expected substring: \"Failed to get session status: Session Not Found\"\n    Received message:   \"response.text is not a function\"\n\n        \u001b[0m \u001b[90m 87 |\u001b[39m       \n         \u001b[90m 88 |\u001b[39m       \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mresponse\u001b[33m.\u001b[39mok) {\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 89 |\u001b[39m         \u001b[36mconst\u001b[39m errorData \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m response\u001b[33m.\u001b[39mtext()\u001b[33m;\u001b[39m\n         \u001b[90m    |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 90 |\u001b[39m         \u001b[36mlet\u001b[39m errorMessage\u001b[33m:\u001b[39m string\u001b[33m;\u001b[39m\n         \u001b[90m 91 |\u001b[39m         \u001b[36mtry\u001b[39m {\n         \u001b[90m 92 |\u001b[39m           \u001b[36mconst\u001b[39m parsed \u001b[33m=\u001b[39m \u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mparse(errorData)\u001b[33m;\u001b[39m\u001b[0m\n\n      at DemoService.fetchWithAuth (services/demoService.ts:89:42)\n      at DemoService.getSessionStatus (services/demoService.ts:179:22)\n      at Object.<anonymous> (__tests__/services/demoService.test.ts:466:7)\n      at Object.toThrow (node_modules/expect/build/index.js:2155:20)\n      at Object.<anonymous> (__tests__/services/demoService.test.ts:466:77)\n\nFAIL __tests__/integration/connection-performance.test.tsx\n  \u25cf Connection Performance Tests \u203a Multiple Concurrent Connections \u203a should handle multiple WebSocket connections\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-performance.test.tsx:80:15)\n\n  \u25cf Connection Performance Tests \u203a Multiple Concurrent Connections \u203a should handle multiple WebSocket connections\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-performance.test.tsx:85:15)\n\n  \u25cf Connection Performance Tests \u203a Multiple Concurrent Connections \u203a should isolate connection states\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-performance.test.tsx:80:15)\n\n  \u25cf Connection Performance Tests \u203a Multiple Concurrent Connections \u203a should isolate connection states\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-performance.test.tsx:85:15)\n\n  \u25cf Connection Performance Tests \u203a Multiple Concurrent Connections \u203a should close individual connections\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-performance.test.tsx:80:15)\n\n  \u25cf Connection Performance Tests \u203a Multiple Concurrent Connections \u203a should close individual connections\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-performance.test.tsx:85:15)\n\n  \u25cf Connection Performance Tests \u203a Multiple Concurrent Connections \u203a should close all connections\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-performance.test.tsx:80:15)\n\n  \u25cf Connection Performance Tests \u203a Multiple Concurrent Connections \u203a should close all connections\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-performance.test.tsx:85:15)\n\n  \u25cf Connection Performance Tests \u203a Performance Under Load \u203a should handle concurrent connection attempts\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-performance.test.tsx:80:15)\n\n  \u25cf Connection Performance Tests \u203a Performance Under Load \u203a should handle concurrent connection attempts\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-performance.test.tsx:85:15)\n\n  \u25cf Connection Performance Tests \u203a Performance Under Load \u203a should maintain performance with many connections\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-performance.test.tsx:80:15)\n\n  \u25cf Connection Performance Tests \u203a Performance Under Load \u203a should maintain performance with many connections\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-performance.test.tsx:85:15)\n\n  \u25cf Connection Performance Tests \u203a Performance Under Load \u203a should handle rapid state changes\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-performance.test.tsx:80:15)\n\n  \u25cf Connection Performance Tests \u203a Performance Under Load \u203a should handle rapid state changes\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-performance.test.tsx:85:15)\n\n  \u25cf Connection Performance Tests \u203a Performance Under Load \u203a should scale connection management\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-performance.test.tsx:80:15)\n\n  \u25cf Connection Performance Tests \u203a Performance Under Load \u203a should scale connection management\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-performance.test.tsx:85:15)\n\n  \u25cf Connection Performance Tests \u203a Memory Management \u203a should prevent memory leaks\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-performance.test.tsx:80:15)\n\n  \u25cf Connection Performance Tests \u203a Memory Management \u203a should prevent memory leaks\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-performance.test.tsx:85:15)\n\n  \u25cf Connection Performance Tests \u203a Memory Management \u203a should handle cleanup during active operations\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-performance.test.tsx:80:15)\n\n  \u25cf Connection Performance Tests \u203a Memory Management \u203a should handle cleanup during active operations\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-performance.test.tsx:85:15)\n\n  \u25cf Connection Performance Tests \u203a Memory Management \u203a should manage connection lifecycle efficiently\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-performance.test.tsx:80:15)\n\n  \u25cf Connection Performance Tests \u203a Memory Management \u203a should manage connection lifecycle efficiently\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-performance.test.tsx:85:15)\n\n  \u25cf Connection Performance Tests \u203a Stress Testing \u203a should handle rapid create/destroy cycles\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-performance.test.tsx:80:15)\n\n  \u25cf Connection Performance Tests \u203a Stress Testing \u203a should handle rapid create/destroy cycles\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-performance.test.tsx:85:15)\n\n  \u25cf Connection Performance Tests \u203a Stress Testing \u203a should maintain state consistency under load\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-performance.test.tsx:80:15)\n\n  \u25cf Connection Performance Tests \u203a Stress Testing \u203a should maintain state consistency under load\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-performance.test.tsx:85:15)\n\n  \u25cf Connection Performance Tests \u203a Stress Testing \u203a should handle burst connection requests\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-performance.test.tsx:80:15)\n\n  \u25cf Connection Performance Tests \u203a Stress Testing \u203a should handle burst connection requests\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-performance.test.tsx:85:15)\n\n  \u25cf Connection Performance Tests \u203a Resource Optimization \u203a should optimize connection reuse\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-performance.test.tsx:80:15)\n\n  \u25cf Connection Performance Tests \u203a Resource Optimization \u203a should optimize connection reuse\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-performance.test.tsx:85:15)\n\n  \u25cf Connection Performance Tests \u203a Resource Optimization \u203a should efficiently batch operations\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-performance.test.tsx:80:15)\n\n  \u25cf Connection Performance Tests \u203a Resource Optimization \u203a should efficiently batch operations\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-performance.test.tsx:85:15)\n\n  \u25cf Connection Performance Tests \u203a Resource Optimization \u203a should handle connection pool efficiently\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-performance.test.tsx:80:15)\n\n  \u25cf Connection Performance Tests \u203a Resource Optimization \u203a should handle connection pool efficiently\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-performance.test.tsx:85:15)\n\nFAIL __tests__/integration/api-calls-basic.test.tsx\n  \u25cf API Calls - GET Requests \u203a fetches thread list successfully\n\n    Endpoint get_threads not found\n\n    \u001b[0m \u001b[90m  7 |\u001b[39m     \u001b[36mconst\u001b[39m endpoint \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m getEndpoint(endpointName\u001b[33m,\u001b[39m method)\u001b[33m;\u001b[39m\n     \u001b[90m  8 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mendpoint) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Endpoint ${endpointName} not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 10 |\u001b[39m     }\n     \u001b[90m 11 |\u001b[39m\n     \u001b[90m 12 |\u001b[39m     \u001b[36mconst\u001b[39m url \u001b[33m=\u001b[39m getApiUrl(endpoint\u001b[33m.\u001b[39mpath)\u001b[33m;\u001b[39m\u001b[0m\n\n      at ApiClient.request (services/apiClient.ts:9:13)\n      at Object.<anonymous> (__tests__/integration/api-calls-basic.test.tsx:130:22)\n\n  \u25cf API Calls - GET Requests \u203a fetches single thread with auth token\n\n    Endpoint get_thread not found\n\n    \u001b[0m \u001b[90m  7 |\u001b[39m     \u001b[36mconst\u001b[39m endpoint \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m getEndpoint(endpointName\u001b[33m,\u001b[39m method)\u001b[33m;\u001b[39m\n     \u001b[90m  8 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mendpoint) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Endpoint ${endpointName} not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 10 |\u001b[39m     }\n     \u001b[90m 11 |\u001b[39m\n     \u001b[90m 12 |\u001b[39m     \u001b[36mconst\u001b[39m url \u001b[33m=\u001b[39m getApiUrl(endpoint\u001b[33m.\u001b[39mpath)\u001b[33m;\u001b[39m\u001b[0m\n\n      at ApiClient.request (services/apiClient.ts:9:13)\n      at Object.<anonymous> (__tests__/integration/api-calls-basic.test.tsx:141:22)\n\n  \u25cf API Calls - GET Requests \u203a handles GET request without auth token\n\n    Endpoint get_threads not found\n\n    \u001b[0m \u001b[90m  7 |\u001b[39m     \u001b[36mconst\u001b[39m endpoint \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m getEndpoint(endpointName\u001b[33m,\u001b[39m method)\u001b[33m;\u001b[39m\n     \u001b[90m  8 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mendpoint) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Endpoint ${endpointName} not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 10 |\u001b[39m     }\n     \u001b[90m 11 |\u001b[39m\n     \u001b[90m 12 |\u001b[39m     \u001b[36mconst\u001b[39m url \u001b[33m=\u001b[39m getApiUrl(endpoint\u001b[33m.\u001b[39mpath)\u001b[33m;\u001b[39m\u001b[0m\n\n      at ApiClient.request (services/apiClient.ts:9:13)\n      at Object.<anonymous> (__tests__/integration/api-calls-basic.test.tsx:151:22)\n\n  \u25cf API Calls - POST Requests \u203a creates new thread with POST request\n\n    Endpoint create_thread not found\n\n    \u001b[0m \u001b[90m  7 |\u001b[39m     \u001b[36mconst\u001b[39m endpoint \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m getEndpoint(endpointName\u001b[33m,\u001b[39m method)\u001b[33m;\u001b[39m\n     \u001b[90m  8 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mendpoint) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Endpoint ${endpointName} not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 10 |\u001b[39m     }\n     \u001b[90m 11 |\u001b[39m\n     \u001b[90m 12 |\u001b[39m     \u001b[36mconst\u001b[39m url \u001b[33m=\u001b[39m getApiUrl(endpoint\u001b[33m.\u001b[39mpath)\u001b[33m;\u001b[39m\u001b[0m\n\n      at ApiClient.request (services/apiClient.ts:9:13)\n      at Object.<anonymous> (__tests__/integration/api-calls-basic.test.tsx:169:22)\n\n  \u25cf API Calls - POST Requests \u203a creates message with POST and validates payload\n\n    Endpoint create_message not found\n\n    \u001b[0m \u001b[90m  7 |\u001b[39m     \u001b[36mconst\u001b[39m endpoint \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m getEndpoint(endpointName\u001b[33m,\u001b[39m method)\u001b[33m;\u001b[39m\n     \u001b[90m  8 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mendpoint) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Endpoint ${endpointName} not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 10 |\u001b[39m     }\n     \u001b[90m 11 |\u001b[39m\n     \u001b[90m 12 |\u001b[39m     \u001b[36mconst\u001b[39m url \u001b[33m=\u001b[39m getApiUrl(endpoint\u001b[33m.\u001b[39mpath)\u001b[33m;\u001b[39m\u001b[0m\n\n      at ApiClient.request (services/apiClient.ts:9:13)\n      at Object.<anonymous> (__tests__/integration/api-calls-basic.test.tsx:184:22)\n\n  \u25cf API Calls - POST Requests \u203a includes correct headers in POST requests\n\n    Endpoint create_thread not found\n\n    \u001b[0m \u001b[90m  7 |\u001b[39m     \u001b[36mconst\u001b[39m endpoint \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m getEndpoint(endpointName\u001b[33m,\u001b[39m method)\u001b[33m;\u001b[39m\n     \u001b[90m  8 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mendpoint) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Endpoint ${endpointName} not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 10 |\u001b[39m     }\n     \u001b[90m 11 |\u001b[39m\n     \u001b[90m 12 |\u001b[39m     \u001b[36mconst\u001b[39m url \u001b[33m=\u001b[39m getApiUrl(endpoint\u001b[33m.\u001b[39mpath)\u001b[33m;\u001b[39m\u001b[0m\n\n      at ApiClient.request (services/apiClient.ts:9:13)\n      at Object.<anonymous> (__tests__/integration/api-calls-basic.test.tsx:204:5)\n\n  \u25cf API Calls - POST Requests \u203a serializes request body correctly\n\n    Endpoint create_thread not found\n\n    \u001b[0m \u001b[90m  7 |\u001b[39m     \u001b[36mconst\u001b[39m endpoint \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m getEndpoint(endpointName\u001b[33m,\u001b[39m method)\u001b[33m;\u001b[39m\n     \u001b[90m  8 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mendpoint) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Endpoint ${endpointName} not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 10 |\u001b[39m     }\n     \u001b[90m 11 |\u001b[39m\n     \u001b[90m 12 |\u001b[39m     \u001b[36mconst\u001b[39m url \u001b[33m=\u001b[39m getApiUrl(endpoint\u001b[33m.\u001b[39mpath)\u001b[33m;\u001b[39m\u001b[0m\n\n      at ApiClient.request (services/apiClient.ts:9:13)\n      at Object.<anonymous> (__tests__/integration/api-calls-basic.test.tsx:221:5)\n\n  \u25cf API Calls - PUT Requests \u203a updates thread with PUT request\n\n    Endpoint update_thread not found\n\n    \u001b[0m \u001b[90m  7 |\u001b[39m     \u001b[36mconst\u001b[39m endpoint \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m getEndpoint(endpointName\u001b[33m,\u001b[39m method)\u001b[33m;\u001b[39m\n     \u001b[90m  8 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mendpoint) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Endpoint ${endpointName} not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 10 |\u001b[39m     }\n     \u001b[90m 11 |\u001b[39m\n     \u001b[90m 12 |\u001b[39m     \u001b[36mconst\u001b[39m url \u001b[33m=\u001b[39m getApiUrl(endpoint\u001b[33m.\u001b[39mpath)\u001b[33m;\u001b[39m\u001b[0m\n\n      at ApiClient.request (services/apiClient.ts:9:13)\n      at Object.<anonymous> (__tests__/integration/api-calls-basic.test.tsx:246:22)\n\n  \u25cf API Calls - PUT Requests \u203a handles PUT request with complex data\n\n    Endpoint update_thread not found\n\n    \u001b[0m \u001b[90m  7 |\u001b[39m     \u001b[36mconst\u001b[39m endpoint \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m getEndpoint(endpointName\u001b[33m,\u001b[39m method)\u001b[33m;\u001b[39m\n     \u001b[90m  8 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mendpoint) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Endpoint ${endpointName} not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 10 |\u001b[39m     }\n     \u001b[90m 11 |\u001b[39m\n     \u001b[90m 12 |\u001b[39m     \u001b[36mconst\u001b[39m url \u001b[33m=\u001b[39m getApiUrl(endpoint\u001b[33m.\u001b[39mpath)\u001b[33m;\u001b[39m\u001b[0m\n\n      at ApiClient.request (services/apiClient.ts:9:13)\n      at Object.<anonymous> (__tests__/integration/api-calls-basic.test.tsx:277:5)\n\n  \u25cf API Calls - DELETE Requests \u203a deletes thread with DELETE request\n\n    Endpoint delete_thread not found\n\n    \u001b[0m \u001b[90m  7 |\u001b[39m     \u001b[36mconst\u001b[39m endpoint \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m getEndpoint(endpointName\u001b[33m,\u001b[39m method)\u001b[33m;\u001b[39m\n     \u001b[90m  8 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mendpoint) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Endpoint ${endpointName} not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 10 |\u001b[39m     }\n     \u001b[90m 11 |\u001b[39m\n     \u001b[90m 12 |\u001b[39m     \u001b[36mconst\u001b[39m url \u001b[33m=\u001b[39m getApiUrl(endpoint\u001b[33m.\u001b[39mpath)\u001b[33m;\u001b[39m\u001b[0m\n\n      at ApiClient.request (services/apiClient.ts:9:13)\n      at Object.<anonymous> (__tests__/integration/api-calls-basic.test.tsx:293:22)\n\n  \u25cf API Calls - DELETE Requests \u203a includes auth header in DELETE requests\n\n    Endpoint delete_thread not found\n\n    \u001b[0m \u001b[90m  7 |\u001b[39m     \u001b[36mconst\u001b[39m endpoint \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m getEndpoint(endpointName\u001b[33m,\u001b[39m method)\u001b[33m;\u001b[39m\n     \u001b[90m  8 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mendpoint) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Endpoint ${endpointName} not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 10 |\u001b[39m     }\n     \u001b[90m 11 |\u001b[39m\n     \u001b[90m 12 |\u001b[39m     \u001b[36mconst\u001b[39m url \u001b[33m=\u001b[39m getApiUrl(endpoint\u001b[33m.\u001b[39mpath)\u001b[33m;\u001b[39m\u001b[0m\n\n      at ApiClient.request (services/apiClient.ts:9:13)\n      at Object.<anonymous> (__tests__/integration/api-calls-basic.test.tsx:312:5)\n\nFAIL __tests__/integration/error-recovery.test.tsx\n  \u25cf Error Handling and Recovery Tests \u203a API Error Handling with Exponential Backoff \u203a should handle API failures with automatic retry\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/error-recovery.test.tsx:276:15)\n\n  \u25cf Error Handling and Recovery Tests \u203a API Error Handling with Exponential Backoff \u203a should handle API failures with automatic retry\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/error-recovery.test.tsx:287:15)\n\n  \u25cf Error Handling and Recovery Tests \u203a API Error Handling with Exponential Backoff \u203a should show clear error messages for different error types\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/error-recovery.test.tsx:276:15)\n\n  \u25cf Error Handling and Recovery Tests \u203a API Error Handling with Exponential Backoff \u203a should show clear error messages for different error types\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/error-recovery.test.tsx:287:15)\n\n  \u25cf Error Handling and Recovery Tests \u203a Session Timeout Recovery \u203a should handle session timeout with warning and recovery\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/error-recovery.test.tsx:276:15)\n\n  \u25cf Error Handling and Recovery Tests \u203a Session Timeout Recovery \u203a should handle session timeout with warning and recovery\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/error-recovery.test.tsx:287:15)\n\n  \u25cf Error Handling and Recovery Tests \u203a Session Timeout Recovery \u203a should redirect to login after session expires\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/error-recovery.test.tsx:276:15)\n\n  \u25cf Error Handling and Recovery Tests \u203a Session Timeout Recovery \u203a should redirect to login after session expires\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/error-recovery.test.tsx:287:15)\n\n  \u25cf Error Handling and Recovery Tests \u203a Rate Limiting with User Feedback \u203a should handle rate limiting with clear feedback\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/error-recovery.test.tsx:276:15)\n\n  \u25cf Error Handling and Recovery Tests \u203a Rate Limiting with User Feedback \u203a should handle rate limiting with clear feedback\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/error-recovery.test.tsx:287:15)\n\n  \u25cf Error Handling and Recovery Tests \u203a Recovery Without Page Refresh \u203a should recover from errors without losing application state\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/error-recovery.test.tsx:276:15)\n\n  \u25cf Error Handling and Recovery Tests \u203a Recovery Without Page Refresh \u203a should recover from errors without losing application state\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/error-recovery.test.tsx:287:15)\n\n  \u25cf Error Handling and Recovery Tests \u203a Graceful Feature Degradation \u203a should degrade gracefully when WebSocket is unavailable\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/error-recovery.test.tsx:276:15)\n\n  \u25cf Error Handling and Recovery Tests \u203a Graceful Feature Degradation \u203a should degrade gracefully when WebSocket is unavailable\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/error-recovery.test.tsx:287:15)\n\n  \u25cf Error Handling and Recovery Tests \u203a Error Boundary Integration \u203a should catch and handle component errors gracefully\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/error-recovery.test.tsx:276:15)\n\n  \u25cf Error Handling and Recovery Tests \u203a Error Boundary Integration \u203a should catch and handle component errors gracefully\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/error-recovery.test.tsx:287:15)\n\nFAIL __tests__/integration/websocket-complete-refactored.test.tsx\n  \u25cf WebSocket Complete Integration Tests - Refactored Modular \u203a Refactored Architecture Validation \u203a should maintain function size limit (\u22648 lines)\n\n    TypeError: websocket_test_utils_1.AdvancedWebSocketTester is not a constructor\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m     stateManager \u001b[33m=\u001b[39m wsManager\u001b[33m.\u001b[39mgetStateManager()\u001b[33m;\u001b[39m\n     \u001b[90m 51 |\u001b[39m     messageBuffer \u001b[33m=\u001b[39m wsManager\u001b[33m.\u001b[39mgetMessageBuffer()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m     advancedTester \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mAdvancedWebSocketTester\u001b[39m()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m     wsManager\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/websocket-complete-refactored.test.tsx:52:22)\n\n  \u25cf WebSocket Complete Integration Tests - Refactored Modular \u203a Refactored Architecture Validation \u203a should maintain function size limit (\u22648 lines)\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-complete-refactored.test.tsx:57:15)\n\n  \u25cf WebSocket Complete Integration Tests - Refactored Modular \u203a Refactored Architecture Validation \u203a should maintain real behavior simulation\n\n    TypeError: websocket_test_utils_1.AdvancedWebSocketTester is not a constructor\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m     stateManager \u001b[33m=\u001b[39m wsManager\u001b[33m.\u001b[39mgetStateManager()\u001b[33m;\u001b[39m\n     \u001b[90m 51 |\u001b[39m     messageBuffer \u001b[33m=\u001b[39m wsManager\u001b[33m.\u001b[39mgetMessageBuffer()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m     advancedTester \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mAdvancedWebSocketTester\u001b[39m()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m     wsManager\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/websocket-complete-refactored.test.tsx:52:22)\n\n  \u25cf WebSocket Complete Integration Tests - Refactored Modular \u203a Refactored Architecture Validation \u203a should maintain real behavior simulation\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-complete-refactored.test.tsx:57:15)\n\n  \u25cf WebSocket Complete Integration Tests - Refactored Modular \u203a Refactored Architecture Validation \u203a should preserve comprehensive utilities\n\n    TypeError: websocket_test_utils_1.AdvancedWebSocketTester is not a constructor\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m     stateManager \u001b[33m=\u001b[39m wsManager\u001b[33m.\u001b[39mgetStateManager()\u001b[33m;\u001b[39m\n     \u001b[90m 51 |\u001b[39m     messageBuffer \u001b[33m=\u001b[39m wsManager\u001b[33m.\u001b[39mgetMessageBuffer()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m     advancedTester \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mAdvancedWebSocketTester\u001b[39m()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m     wsManager\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/websocket-complete-refactored.test.tsx:52:22)\n\n  \u25cf WebSocket Complete Integration Tests - Refactored Modular \u203a Refactored Architecture Validation \u203a should preserve comprehensive utilities\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-complete-refactored.test.tsx:57:15)\n\n  \u25cf WebSocket Complete Integration Tests - Refactored Modular \u203a Enhanced Testing Capabilities \u203a should handle refactored connection lifecycle\n\n    TypeError: websocket_test_utils_1.AdvancedWebSocketTester is not a constructor\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m     stateManager \u001b[33m=\u001b[39m wsManager\u001b[33m.\u001b[39mgetStateManager()\u001b[33m;\u001b[39m\n     \u001b[90m 51 |\u001b[39m     messageBuffer \u001b[33m=\u001b[39m wsManager\u001b[33m.\u001b[39mgetMessageBuffer()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m     advancedTester \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mAdvancedWebSocketTester\u001b[39m()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m     wsManager\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/websocket-complete-refactored.test.tsx:52:22)\n\n  \u25cf WebSocket Complete Integration Tests - Refactored Modular \u203a Enhanced Testing Capabilities \u203a should handle refactored connection lifecycle\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-complete-refactored.test.tsx:57:15)\n\n  \u25cf WebSocket Complete Integration Tests - Refactored Modular \u203a Enhanced Testing Capabilities \u203a should handle refactored message processing\n\n    TypeError: websocket_test_utils_1.AdvancedWebSocketTester is not a constructor\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m     stateManager \u001b[33m=\u001b[39m wsManager\u001b[33m.\u001b[39mgetStateManager()\u001b[33m;\u001b[39m\n     \u001b[90m 51 |\u001b[39m     messageBuffer \u001b[33m=\u001b[39m wsManager\u001b[33m.\u001b[39mgetMessageBuffer()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m     advancedTester \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mAdvancedWebSocketTester\u001b[39m()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m     wsManager\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/websocket-complete-refactored.test.tsx:52:22)\n\n  \u25cf WebSocket Complete Integration Tests - Refactored Modular \u203a Enhanced Testing Capabilities \u203a should handle refactored message processing\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-complete-refactored.test.tsx:57:15)\n\n  \u25cf WebSocket Complete Integration Tests - Refactored Modular \u203a Enhanced Testing Capabilities \u203a should handle refactored error scenarios\n\n    TypeError: websocket_test_utils_1.AdvancedWebSocketTester is not a constructor\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m     stateManager \u001b[33m=\u001b[39m wsManager\u001b[33m.\u001b[39mgetStateManager()\u001b[33m;\u001b[39m\n     \u001b[90m 51 |\u001b[39m     messageBuffer \u001b[33m=\u001b[39m wsManager\u001b[33m.\u001b[39mgetMessageBuffer()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m     advancedTester \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mAdvancedWebSocketTester\u001b[39m()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m     wsManager\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/websocket-complete-refactored.test.tsx:52:22)\n\n  \u25cf WebSocket Complete Integration Tests - Refactored Modular \u203a Enhanced Testing Capabilities \u203a should handle refactored error scenarios\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-complete-refactored.test.tsx:57:15)\n\n  \u25cf WebSocket Complete Integration Tests - Refactored Modular \u203a Enhanced Testing Capabilities \u203a should handle refactored performance monitoring\n\n    TypeError: websocket_test_utils_1.AdvancedWebSocketTester is not a constructor\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m     stateManager \u001b[33m=\u001b[39m wsManager\u001b[33m.\u001b[39mgetStateManager()\u001b[33m;\u001b[39m\n     \u001b[90m 51 |\u001b[39m     messageBuffer \u001b[33m=\u001b[39m wsManager\u001b[33m.\u001b[39mgetMessageBuffer()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m     advancedTester \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mAdvancedWebSocketTester\u001b[39m()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m     wsManager\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/websocket-complete-refactored.test.tsx:52:22)\n\n  \u25cf WebSocket Complete Integration Tests - Refactored Modular \u203a Enhanced Testing Capabilities \u203a should handle refactored performance monitoring\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-complete-refactored.test.tsx:57:15)\n\n  \u25cf WebSocket Complete Integration Tests - Refactored Modular \u203a Protocol and Security Features \u203a should validate message security\n\n    TypeError: websocket_test_utils_1.AdvancedWebSocketTester is not a constructor\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m     stateManager \u001b[33m=\u001b[39m wsManager\u001b[33m.\u001b[39mgetStateManager()\u001b[33m;\u001b[39m\n     \u001b[90m 51 |\u001b[39m     messageBuffer \u001b[33m=\u001b[39m wsManager\u001b[33m.\u001b[39mgetMessageBuffer()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m     advancedTester \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mAdvancedWebSocketTester\u001b[39m()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m     wsManager\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/websocket-complete-refactored.test.tsx:52:22)\n\n  \u25cf WebSocket Complete Integration Tests - Refactored Modular \u203a Protocol and Security Features \u203a should validate message security\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-complete-refactored.test.tsx:57:15)\n\n  \u25cf WebSocket Complete Integration Tests - Refactored Modular \u203a Protocol and Security Features \u203a should handle protocol negotiation\n\n    TypeError: websocket_test_utils_1.AdvancedWebSocketTester is not a constructor\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m     stateManager \u001b[33m=\u001b[39m wsManager\u001b[33m.\u001b[39mgetStateManager()\u001b[33m;\u001b[39m\n     \u001b[90m 51 |\u001b[39m     messageBuffer \u001b[33m=\u001b[39m wsManager\u001b[33m.\u001b[39mgetMessageBuffer()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m     advancedTester \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mAdvancedWebSocketTester\u001b[39m()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m     wsManager\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/websocket-complete-refactored.test.tsx:52:22)\n\n  \u25cf WebSocket Complete Integration Tests - Refactored Modular \u203a Protocol and Security Features \u203a should handle protocol negotiation\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-complete-refactored.test.tsx:57:15)\n\n  \u25cf WebSocket Complete Integration Tests - Refactored Modular \u203a Protocol and Security Features \u203a should manage connection security\n\n    TypeError: websocket_test_utils_1.AdvancedWebSocketTester is not a constructor\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m     stateManager \u001b[33m=\u001b[39m wsManager\u001b[33m.\u001b[39mgetStateManager()\u001b[33m;\u001b[39m\n     \u001b[90m 51 |\u001b[39m     messageBuffer \u001b[33m=\u001b[39m wsManager\u001b[33m.\u001b[39mgetMessageBuffer()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m     advancedTester \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mAdvancedWebSocketTester\u001b[39m()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m     wsManager\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/websocket-complete-refactored.test.tsx:52:22)\n\n  \u25cf WebSocket Complete Integration Tests - Refactored Modular \u203a Protocol and Security Features \u203a should manage connection security\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-complete-refactored.test.tsx:57:15)\n\n  \u25cf WebSocket Complete Integration Tests - Refactored Modular \u203a Resource Management \u203a should handle cleanup efficiently\n\n    TypeError: websocket_test_utils_1.AdvancedWebSocketTester is not a constructor\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m     stateManager \u001b[33m=\u001b[39m wsManager\u001b[33m.\u001b[39mgetStateManager()\u001b[33m;\u001b[39m\n     \u001b[90m 51 |\u001b[39m     messageBuffer \u001b[33m=\u001b[39m wsManager\u001b[33m.\u001b[39mgetMessageBuffer()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m     advancedTester \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mAdvancedWebSocketTester\u001b[39m()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m     wsManager\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/websocket-complete-refactored.test.tsx:52:22)\n\n  \u25cf WebSocket Complete Integration Tests - Refactored Modular \u203a Resource Management \u203a should handle cleanup efficiently\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-complete-refactored.test.tsx:57:15)\n\n  \u25cf WebSocket Complete Integration Tests - Refactored Modular \u203a Resource Management \u203a should manage memory resources\n\n    TypeError: websocket_test_utils_1.AdvancedWebSocketTester is not a constructor\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m     stateManager \u001b[33m=\u001b[39m wsManager\u001b[33m.\u001b[39mgetStateManager()\u001b[33m;\u001b[39m\n     \u001b[90m 51 |\u001b[39m     messageBuffer \u001b[33m=\u001b[39m wsManager\u001b[33m.\u001b[39mgetMessageBuffer()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m     advancedTester \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mAdvancedWebSocketTester\u001b[39m()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m     wsManager\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/websocket-complete-refactored.test.tsx:52:22)\n\n  \u25cf WebSocket Complete Integration Tests - Refactored Modular \u203a Resource Management \u203a should manage memory resources\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-complete-refactored.test.tsx:57:15)\n\n  \u25cf WebSocket Complete Integration Tests - Refactored Modular \u203a Resource Management \u203a should handle multiple cleanup calls safely\n\n    TypeError: websocket_test_utils_1.AdvancedWebSocketTester is not a constructor\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m     stateManager \u001b[33m=\u001b[39m wsManager\u001b[33m.\u001b[39mgetStateManager()\u001b[33m;\u001b[39m\n     \u001b[90m 51 |\u001b[39m     messageBuffer \u001b[33m=\u001b[39m wsManager\u001b[33m.\u001b[39mgetMessageBuffer()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m     advancedTester \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mAdvancedWebSocketTester\u001b[39m()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m     wsManager\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/websocket-complete-refactored.test.tsx:52:22)\n\n  \u25cf WebSocket Complete Integration Tests - Refactored Modular \u203a Resource Management \u203a should handle multiple cleanup calls safely\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-complete-refactored.test.tsx:57:15)\n\nFAIL __tests__/integration/connection-management-core.test.tsx\n  \u25cf Connection Management Core Tests \u203a Connection State Management \u203a should track connection status changes\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-management-core.test.tsx:191:15)\n\n  \u25cf Connection Management Core Tests \u203a Connection State Management \u203a should track connection status changes\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-management-core.test.tsx:195:15)\n\n  \u25cf Connection Management Core Tests \u203a Connection State Management \u203a should track reconnection attempts\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-management-core.test.tsx:191:15)\n\n  \u25cf Connection Management Core Tests \u203a Connection State Management \u203a should track reconnection attempts\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-management-core.test.tsx:195:15)\n\n  \u25cf Connection Management Core Tests \u203a Exponential Backoff \u203a should calculate exponential delays\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-management-core.test.tsx:191:15)\n\n  \u25cf Connection Management Core Tests \u203a Exponential Backoff \u203a should calculate exponential delays\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-management-core.test.tsx:195:15)\n\n  \u25cf Connection Management Core Tests \u203a Exponential Backoff \u203a should add jitter to delays\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-management-core.test.tsx:191:15)\n\n  \u25cf Connection Management Core Tests \u203a Exponential Backoff \u203a should add jitter to delays\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-management-core.test.tsx:195:15)\n\n  \u25cf Connection Management Core Tests \u203a Heartbeat Management \u203a should track heartbeat metrics\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-management-core.test.tsx:191:15)\n\n  \u25cf Connection Management Core Tests \u203a Heartbeat Management \u203a should track heartbeat metrics\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-management-core.test.tsx:195:15)\n\n  \u25cf Connection Management Core Tests \u203a Heartbeat Management \u203a should track missed heartbeats\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-management-core.test.tsx:191:15)\n\n  \u25cf Connection Management Core Tests \u203a Heartbeat Management \u203a should track missed heartbeats\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-management-core.test.tsx:195:15)\n\n  \u25cf Connection Management Core Tests \u203a Heartbeat Management \u203a should toggle heartbeat enabled state\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-management-core.test.tsx:191:15)\n\n  \u25cf Connection Management Core Tests \u203a Heartbeat Management \u203a should toggle heartbeat enabled state\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-management-core.test.tsx:195:15)\n\n  \u25cf Connection Management Core Tests \u203a Heartbeat Management \u203a should manage heartbeat lifecycle with React sync\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-management-core.test.tsx:191:15)\n\n  \u25cf Connection Management Core Tests \u203a Heartbeat Management \u203a should manage heartbeat lifecycle with React sync\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-management-core.test.tsx:195:15)\n\n  \u25cf Connection Management Core Tests \u203a Connection Quality Monitoring \u203a should calculate quality based on latency\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-management-core.test.tsx:191:15)\n\n  \u25cf Connection Management Core Tests \u203a Connection Quality Monitoring \u203a should calculate quality based on latency\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-management-core.test.tsx:195:15)\n\n  \u25cf Connection Management Core Tests \u203a Connection Quality Monitoring \u203a should track average latency\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-management-core.test.tsx:191:15)\n\n  \u25cf Connection Management Core Tests \u203a Connection Quality Monitoring \u203a should track average latency\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-management-core.test.tsx:195:15)\n\n  \u25cf Connection Management Core Tests \u203a Connection Quality Monitoring \u203a should limit latency history\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-management-core.test.tsx:191:15)\n\n  \u25cf Connection Management Core Tests \u203a Connection Quality Monitoring \u203a should limit latency history\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-management-core.test.tsx:195:15)\n\n  \u25cf Connection Management Core Tests \u203a Resource Cleanup \u203a should clean up connection resources\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-management-core.test.tsx:191:15)\n\n  \u25cf Connection Management Core Tests \u203a Resource Cleanup \u203a should clean up connection resources\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-management-core.test.tsx:195:15)\n\n  \u25cf Connection Management Core Tests \u203a Resource Cleanup \u203a should stop heartbeat on cleanup\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/connection-management-core.test.tsx:191:15)\n\n  \u25cf Connection Management Core Tests \u203a Resource Cleanup \u203a should stop heartbeat on cleanup\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/connection-management-core.test.tsx:195:15)\n\nFAIL __tests__/integration/critical/websocket-cors-validation.test.tsx\n  \u25cf WebSocket CORS Validation (CRITICAL SECURITY) \u203a Origin Header Validation \u203a should include proper Origin header in WebSocket connection\n\n    TypeError: Cannot redefine property: location\n        at Object.defineProperty (<anonymous>)\n\n    \u001b[0m \u001b[90m 79 |\u001b[39m     \n     \u001b[90m 80 |\u001b[39m     \u001b[90m// Mock different origin scenarios\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 81 |\u001b[39m     \u001b[33mObject\u001b[39m\u001b[33m.\u001b[39mdefineProperty(window\u001b[33m,\u001b[39m \u001b[32m'location'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 82 |\u001b[39m       value\u001b[33m:\u001b[39m {\n     \u001b[90m 83 |\u001b[39m         origin\u001b[33m:\u001b[39m \u001b[32m'http://localhost:3000'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 84 |\u001b[39m         href\u001b[33m:\u001b[39m \u001b[32m'http://localhost:3000'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/critical/websocket-cors-validation.test.tsx:81:12)\n\n  \u25cf WebSocket CORS Validation (CRITICAL SECURITY) \u203a Origin Header Validation \u203a should handle CORS validation failure gracefully\n\n    TypeError: Cannot redefine property: location\n        at Object.defineProperty (<anonymous>)\n\n    \u001b[0m \u001b[90m 79 |\u001b[39m     \n     \u001b[90m 80 |\u001b[39m     \u001b[90m// Mock different origin scenarios\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 81 |\u001b[39m     \u001b[33mObject\u001b[39m\u001b[33m.\u001b[39mdefineProperty(window\u001b[33m,\u001b[39m \u001b[32m'location'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 82 |\u001b[39m       value\u001b[33m:\u001b[39m {\n     \u001b[90m 83 |\u001b[39m         origin\u001b[33m:\u001b[39m \u001b[32m'http://localhost:3000'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 84 |\u001b[39m         href\u001b[33m:\u001b[39m \u001b[32m'http://localhost:3000'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/critical/websocket-cors-validation.test.tsx:81:12)\n\n  \u25cf WebSocket CORS Validation (CRITICAL SECURITY) \u203a Origin Header Validation \u203a should not attempt connection from invalid origins\n\n    TypeError: Cannot redefine property: location\n        at Object.defineProperty (<anonymous>)\n\n    \u001b[0m \u001b[90m 79 |\u001b[39m     \n     \u001b[90m 80 |\u001b[39m     \u001b[90m// Mock different origin scenarios\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 81 |\u001b[39m     \u001b[33mObject\u001b[39m\u001b[33m.\u001b[39mdefineProperty(window\u001b[33m,\u001b[39m \u001b[32m'location'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 82 |\u001b[39m       value\u001b[33m:\u001b[39m {\n     \u001b[90m 83 |\u001b[39m         origin\u001b[33m:\u001b[39m \u001b[32m'http://localhost:3000'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 84 |\u001b[39m         href\u001b[33m:\u001b[39m \u001b[32m'http://localhost:3000'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/critical/websocket-cors-validation.test.tsx:81:12)\n\n  \u25cf WebSocket CORS Validation (CRITICAL SECURITY) \u203a Allowed Origins Configuration \u203a should connect successfully from allowed development origin\n\n    TypeError: Cannot redefine property: location\n        at Object.defineProperty (<anonymous>)\n\n    \u001b[0m \u001b[90m 79 |\u001b[39m     \n     \u001b[90m 80 |\u001b[39m     \u001b[90m// Mock different origin scenarios\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 81 |\u001b[39m     \u001b[33mObject\u001b[39m\u001b[33m.\u001b[39mdefineProperty(window\u001b[33m,\u001b[39m \u001b[32m'location'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 82 |\u001b[39m       value\u001b[33m:\u001b[39m {\n     \u001b[90m 83 |\u001b[39m         origin\u001b[33m:\u001b[39m \u001b[32m'http://localhost:3000'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 84 |\u001b[39m         href\u001b[33m:\u001b[39m \u001b[32m'http://localhost:3000'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/critical/websocket-cors-validation.test.tsx:81:12)\n\n  \u25cf WebSocket CORS Validation (CRITICAL SECURITY) \u203a Allowed Origins Configuration \u203a should connect successfully from allowed production origin\n\n    TypeError: Cannot redefine property: location\n        at Object.defineProperty (<anonymous>)\n\n    \u001b[0m \u001b[90m 79 |\u001b[39m     \n     \u001b[90m 80 |\u001b[39m     \u001b[90m// Mock different origin scenarios\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 81 |\u001b[39m     \u001b[33mObject\u001b[39m\u001b[33m.\u001b[39mdefineProperty(window\u001b[33m,\u001b[39m \u001b[32m'location'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 82 |\u001b[39m       value\u001b[33m:\u001b[39m {\n     \u001b[90m 83 |\u001b[39m         origin\u001b[33m:\u001b[39m \u001b[32m'http://localhost:3000'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 84 |\u001b[39m         href\u001b[33m:\u001b[39m \u001b[32m'http://localhost:3000'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/critical/websocket-cors-validation.test.tsx:81:12)\n\n  \u25cf WebSocket CORS Validation (CRITICAL SECURITY) \u203a Allowed Origins Configuration \u203a should handle subdomain restrictions properly\n\n    TypeError: Cannot redefine property: location\n        at Object.defineProperty (<anonymous>)\n\n    \u001b[0m \u001b[90m 79 |\u001b[39m     \n     \u001b[90m 80 |\u001b[39m     \u001b[90m// Mock different origin scenarios\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 81 |\u001b[39m     \u001b[33mObject\u001b[39m\u001b[33m.\u001b[39mdefineProperty(window\u001b[33m,\u001b[39m \u001b[32m'location'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 82 |\u001b[39m       value\u001b[33m:\u001b[39m {\n     \u001b[90m 83 |\u001b[39m         origin\u001b[33m:\u001b[39m \u001b[32m'http://localhost:3000'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 84 |\u001b[39m         href\u001b[33m:\u001b[39m \u001b[32m'http://localhost:3000'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/critical/websocket-cors-validation.test.tsx:81:12)\n\n  \u25cf WebSocket CORS Validation (CRITICAL SECURITY) \u203a Cross-Origin Request Handling \u203a should handle mixed content scenarios (HTTP to HTTPS)\n\n    TypeError: Cannot redefine property: location\n        at Object.defineProperty (<anonymous>)\n\n    \u001b[0m \u001b[90m 79 |\u001b[39m     \n     \u001b[90m 80 |\u001b[39m     \u001b[90m// Mock different origin scenarios\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 81 |\u001b[39m     \u001b[33mObject\u001b[39m\u001b[33m.\u001b[39mdefineProperty(window\u001b[33m,\u001b[39m \u001b[32m'location'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 82 |\u001b[39m       value\u001b[33m:\u001b[39m {\n     \u001b[90m 83 |\u001b[39m         origin\u001b[33m:\u001b[39m \u001b[32m'http://localhost:3000'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 84 |\u001b[39m         href\u001b[33m:\u001b[39m \u001b[32m'http://localhost:3000'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/critical/websocket-cors-validation.test.tsx:81:12)\n\n  \u25cf WebSocket CORS Validation (CRITICAL SECURITY) \u203a Cross-Origin Request Handling \u203a should validate referrer policies\n\n    TypeError: Cannot redefine property: location\n        at Object.defineProperty (<anonymous>)\n\n    \u001b[0m \u001b[90m 79 |\u001b[39m     \n     \u001b[90m 80 |\u001b[39m     \u001b[90m// Mock different origin scenarios\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 81 |\u001b[39m     \u001b[33mObject\u001b[39m\u001b[33m.\u001b[39mdefineProperty(window\u001b[33m,\u001b[39m \u001b[32m'location'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 82 |\u001b[39m       value\u001b[33m:\u001b[39m {\n     \u001b[90m 83 |\u001b[39m         origin\u001b[33m:\u001b[39m \u001b[32m'http://localhost:3000'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 84 |\u001b[39m         href\u001b[33m:\u001b[39m \u001b[32m'http://localhost:3000'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/critical/websocket-cors-validation.test.tsx:81:12)\n\n  \u25cf WebSocket CORS Validation (CRITICAL SECURITY) \u203a Cross-Origin Request Handling \u203a should handle iframe embedding restrictions\n\n    TypeError: Cannot redefine property: location\n        at Object.defineProperty (<anonymous>)\n\n    \u001b[0m \u001b[90m 79 |\u001b[39m     \n     \u001b[90m 80 |\u001b[39m     \u001b[90m// Mock different origin scenarios\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 81 |\u001b[39m     \u001b[33mObject\u001b[39m\u001b[33m.\u001b[39mdefineProperty(window\u001b[33m,\u001b[39m \u001b[32m'location'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 82 |\u001b[39m       value\u001b[33m:\u001b[39m {\n     \u001b[90m 83 |\u001b[39m         origin\u001b[33m:\u001b[39m \u001b[32m'http://localhost:3000'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 84 |\u001b[39m         href\u001b[33m:\u001b[39m \u001b[32m'http://localhost:3000'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/critical/websocket-cors-validation.test.tsx:81:12)\n\n  \u25cf WebSocket CORS Validation (CRITICAL SECURITY) \u203a Security Headers and Validation \u203a should respect Content Security Policy for WebSocket connections\n\n    TypeError: Cannot redefine property: location\n        at Object.defineProperty (<anonymous>)\n\n    \u001b[0m \u001b[90m 79 |\u001b[39m     \n     \u001b[90m 80 |\u001b[39m     \u001b[90m// Mock different origin scenarios\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 81 |\u001b[39m     \u001b[33mObject\u001b[39m\u001b[33m.\u001b[39mdefineProperty(window\u001b[33m,\u001b[39m \u001b[32m'location'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 82 |\u001b[39m       value\u001b[33m:\u001b[39m {\n     \u001b[90m 83 |\u001b[39m         origin\u001b[33m:\u001b[39m \u001b[32m'http://localhost:3000'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 84 |\u001b[39m         href\u001b[33m:\u001b[39m \u001b[32m'http://localhost:3000'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/critical/websocket-cors-validation.test.tsx:81:12)\n\n  \u25cf WebSocket CORS Validation (CRITICAL SECURITY) \u203a Security Headers and Validation \u203a should handle Sec-Fetch-Site header validation\n\n    TypeError: Cannot redefine property: location\n        at Object.defineProperty (<anonymous>)\n\n    \u001b[0m \u001b[90m 79 |\u001b[39m     \n     \u001b[90m 80 |\u001b[39m     \u001b[90m// Mock different origin scenarios\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 81 |\u001b[39m     \u001b[33mObject\u001b[39m\u001b[33m.\u001b[39mdefineProperty(window\u001b[33m,\u001b[39m \u001b[32m'location'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 82 |\u001b[39m       value\u001b[33m:\u001b[39m {\n     \u001b[90m 83 |\u001b[39m         origin\u001b[33m:\u001b[39m \u001b[32m'http://localhost:3000'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 84 |\u001b[39m         href\u001b[33m:\u001b[39m \u001b[32m'http://localhost:3000'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/critical/websocket-cors-validation.test.tsx:81:12)\n\n  \u25cf WebSocket CORS Validation (CRITICAL SECURITY) \u203a Security Headers and Validation \u203a should validate against XSS injection in WebSocket URLs\n\n    TypeError: Cannot redefine property: location\n        at Object.defineProperty (<anonymous>)\n\n    \u001b[0m \u001b[90m 79 |\u001b[39m     \n     \u001b[90m 80 |\u001b[39m     \u001b[90m// Mock different origin scenarios\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 81 |\u001b[39m     \u001b[33mObject\u001b[39m\u001b[33m.\u001b[39mdefineProperty(window\u001b[33m,\u001b[39m \u001b[32m'location'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 82 |\u001b[39m       value\u001b[33m:\u001b[39m {\n     \u001b[90m 83 |\u001b[39m         origin\u001b[33m:\u001b[39m \u001b[32m'http://localhost:3000'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 84 |\u001b[39m         href\u001b[33m:\u001b[39m \u001b[32m'http://localhost:3000'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/critical/websocket-cors-validation.test.tsx:81:12)\n\n  \u25cf WebSocket CORS Validation (CRITICAL SECURITY) \u203a CORS Error Recovery and Fallback \u203a should provide actionable CORS error messages\n\n    TypeError: Cannot redefine property: location\n        at Object.defineProperty (<anonymous>)\n\n    \u001b[0m \u001b[90m 79 |\u001b[39m     \n     \u001b[90m 80 |\u001b[39m     \u001b[90m// Mock different origin scenarios\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 81 |\u001b[39m     \u001b[33mObject\u001b[39m\u001b[33m.\u001b[39mdefineProperty(window\u001b[33m,\u001b[39m \u001b[32m'location'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 82 |\u001b[39m       value\u001b[33m:\u001b[39m {\n     \u001b[90m 83 |\u001b[39m         origin\u001b[33m:\u001b[39m \u001b[32m'http://localhost:3000'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 84 |\u001b[39m         href\u001b[33m:\u001b[39m \u001b[32m'http://localhost:3000'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/critical/websocket-cors-validation.test.tsx:81:12)\n\n  \u25cf WebSocket CORS Validation (CRITICAL SECURITY) \u203a CORS Error Recovery and Fallback \u203a should not retry CORS-blocked connections indefinitely\n\n    TypeError: Cannot redefine property: location\n        at Object.defineProperty (<anonymous>)\n\n    \u001b[0m \u001b[90m 79 |\u001b[39m     \n     \u001b[90m 80 |\u001b[39m     \u001b[90m// Mock different origin scenarios\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 81 |\u001b[39m     \u001b[33mObject\u001b[39m\u001b[33m.\u001b[39mdefineProperty(window\u001b[33m,\u001b[39m \u001b[32m'location'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 82 |\u001b[39m       value\u001b[33m:\u001b[39m {\n     \u001b[90m 83 |\u001b[39m         origin\u001b[33m:\u001b[39m \u001b[32m'http://localhost:3000'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 84 |\u001b[39m         href\u001b[33m:\u001b[39m \u001b[32m'http://localhost:3000'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/critical/websocket-cors-validation.test.tsx:81:12)\n\n  \u25cf WebSocket CORS Validation (CRITICAL SECURITY) \u203a CORS Error Recovery and Fallback \u203a should provide fallback options for CORS issues\n\n    TypeError: Cannot redefine property: location\n        at Object.defineProperty (<anonymous>)\n\n    \u001b[0m \u001b[90m 79 |\u001b[39m     \n     \u001b[90m 80 |\u001b[39m     \u001b[90m// Mock different origin scenarios\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 81 |\u001b[39m     \u001b[33mObject\u001b[39m\u001b[33m.\u001b[39mdefineProperty(window\u001b[33m,\u001b[39m \u001b[32m'location'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 82 |\u001b[39m       value\u001b[33m:\u001b[39m {\n     \u001b[90m 83 |\u001b[39m         origin\u001b[33m:\u001b[39m \u001b[32m'http://localhost:3000'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 84 |\u001b[39m         href\u001b[33m:\u001b[39m \u001b[32m'http://localhost:3000'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/critical/websocket-cors-validation.test.tsx:81:12)\n\nFAIL __tests__/integration/advanced-features.test.tsx\n  \u25cf Demo Mode Functionality \u203a should enable demo mode with limited features\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:25:13)\n\n  \u25cf Demo Mode Functionality \u203a should enable demo mode with limited features\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Demo Mode Functionality \u203a should simulate data in demo mode\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:25:13)\n\n  \u25cf Demo Mode Functionality \u203a should simulate data in demo mode\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Enterprise Demo Features \u203a should showcase enterprise optimization features\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:25:13)\n\n  \u25cf Enterprise Demo Features \u203a should showcase enterprise optimization features\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Enterprise Demo Features \u203a should display ROI calculations\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:25:13)\n\n  \u25cf Enterprise Demo Features \u203a should display ROI calculations\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf PDF and Image Processing \u203a should extract text from PDF files\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:25:13)\n\n  \u25cf PDF and Image Processing \u203a should extract text from PDF files\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf PDF and Image Processing \u203a should analyze images using vision models\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:25:13)\n\n  \u25cf PDF and Image Processing \u203a should analyze images using vision models\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Export and Import Functionality \u203a should export data in multiple formats\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:25:13)\n\n  \u25cf Export and Import Functionality \u203a should export data in multiple formats\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Export and Import Functionality \u203a should import and validate data\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:25:13)\n\n  \u25cf Export and Import Functionality \u203a should import and validate data\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Real-time Metrics Dashboard \u203a should display live performance metrics\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:25:13)\n\n  \u25cf Real-time Metrics Dashboard \u203a should display live performance metrics\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\n  \u25cf Agent Tool Dispatcher Integration \u203a should dispatch tools to appropriate agents\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:25:13)\n\n  \u25cf Agent Tool Dispatcher Integration \u203a should dispatch tools to appropriate agents\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/advanced-features.test.tsx:29:13)\n\nFAIL __tests__/integration/critical/websocket-token-refresh-working.test.tsx\n  \u25cf WebSocket Token Refresh Implementation (Working) \u203a JWT Token Parsing \u203a should correctly parse JWT token expiry\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"refresh-triggered\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mno\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"send-message\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mSend Message\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"trigger-manual-refresh\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mManual Refresh\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 158 |\u001b[39m       \n     \u001b[90m 159 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 160 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 161 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 162 |\u001b[39m\n     \u001b[90m 163 |\u001b[39m       \u001b[90m// Verify WebSocket connection was attempted with the token\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-token-refresh-working.test.tsx:160:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at node_modules/@testing-library/dom/dist/wait-for.js:82:9\n\n  \u25cf WebSocket Token Refresh Implementation (Working) \u203a JWT Token Parsing \u203a should detect expiring tokens and setup refresh timer\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"refresh-triggered\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mno\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"send-message\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mSend Message\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"trigger-manual-refresh\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mManual Refresh\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 184 |\u001b[39m       \n     \u001b[90m 185 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 186 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 187 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 188 |\u001b[39m\n     \u001b[90m 189 |\u001b[39m       \u001b[90m// Simulate connection opening\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-token-refresh-working.test.tsx:186:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at node_modules/@testing-library/dom/dist/wait-for.js:82:9\n\n  \u25cf WebSocket Token Refresh Implementation (Working) \u203a Token Refresh Flow \u203a should queue messages during token refresh\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"refresh-triggered\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mno\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"send-message\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mSend Message\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"trigger-manual-refresh\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mManual Refresh\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 227 |\u001b[39m       \n     \u001b[90m 228 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 229 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 230 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 231 |\u001b[39m\n     \u001b[90m 232 |\u001b[39m       \u001b[90m// Simulate connection opening\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-token-refresh-working.test.tsx:229:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at node_modules/@testing-library/dom/dist/wait-for.js:82:9\n\n  \u25cf WebSocket Token Refresh Implementation (Working) \u203a Token Refresh Flow \u203a should handle token refresh on authentication failure\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"refresh-triggered\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mno\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"send-message\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mSend Message\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"trigger-manual-refresh\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mManual Refresh\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 270 |\u001b[39m       \n     \u001b[90m 271 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 272 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 273 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 274 |\u001b[39m\n     \u001b[90m 275 |\u001b[39m       \u001b[90m// Simulate connection opening first\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-token-refresh-working.test.tsx:272:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at node_modules/@testing-library/dom/dist/wait-for.js:82:9\n\n  \u25cf WebSocket Token Refresh Implementation (Working) \u203a Token Synchronization \u203a should update WebSocket when auth context token changes\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"refresh-triggered\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mno\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"send-message\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mSend Message\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"trigger-manual-refresh\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mManual Refresh\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 320 |\u001b[39m       \n     \u001b[90m 321 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 322 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 323 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 324 |\u001b[39m\n     \u001b[90m 325 |\u001b[39m       \u001b[90m// Update the token in auth context\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-token-refresh-working.test.tsx:322:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at node_modules/@testing-library/dom/dist/wait-for.js:82:9\n\n  \u25cf WebSocket Token Refresh Implementation (Working) \u203a Message Handling During Refresh \u203a should process pending messages after successful refresh\n\n    expect(received).toHaveBeenCalled()\n\n    Matcher error: received value must be a mock or spy function\n\n    Received has type:  function\n    Received has value: [Function WebSocket]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"ws-status\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOPEN\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"refresh-triggered\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mno\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"send-message\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mSend Message\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"trigger-manual-refresh\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mManual Refresh\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 361 |\u001b[39m       \n     \u001b[90m 362 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 363 |\u001b[39m         expect(global\u001b[33m.\u001b[39m\u001b[33mWebSocket\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 364 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 365 |\u001b[39m\n     \u001b[90m 366 |\u001b[39m       \u001b[90m// Simulate connection opening\u001b[39m\u001b[0m\n\n      at __tests__/integration/critical/websocket-token-refresh-working.test.tsx:363:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at node_modules/@testing-library/dom/dist/wait-for.js:82:9\n\nFAIL __tests__/integration/websocket-performance.test.tsx\n  \u25cf WebSocket Performance and Advanced Tests \u203a Performance Monitoring \u203a should measure real connection performance with timing\n\n    TypeError: websocket_test_utils_2.AdvancedWebSocketTester is not a constructor\n\n    \u001b[0m \u001b[90m 23 |\u001b[39m     \u001b[90m// Use real WebSocket simulation instead of mocks\u001b[39m\n     \u001b[90m 24 |\u001b[39m     wsManager \u001b[33m=\u001b[39m createWebSocketManager(undefined\u001b[33m,\u001b[39m \u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 25 |\u001b[39m     advancedTester \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mAdvancedWebSocketTester\u001b[39m()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 26 |\u001b[39m     wsManager\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 28 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/websocket-performance.test.tsx:25:22)\n\n  \u25cf WebSocket Performance and Advanced Tests \u203a Performance Monitoring \u203a should measure real connection performance with timing\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-performance.test.tsx:30:15)\n\n  \u25cf WebSocket Performance and Advanced Tests \u203a Performance Monitoring \u203a should track connection stability over time\n\n    TypeError: websocket_test_utils_2.AdvancedWebSocketTester is not a constructor\n\n    \u001b[0m \u001b[90m 23 |\u001b[39m     \u001b[90m// Use real WebSocket simulation instead of mocks\u001b[39m\n     \u001b[90m 24 |\u001b[39m     wsManager \u001b[33m=\u001b[39m createWebSocketManager(undefined\u001b[33m,\u001b[39m \u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 25 |\u001b[39m     advancedTester \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mAdvancedWebSocketTester\u001b[39m()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 26 |\u001b[39m     wsManager\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 28 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/websocket-performance.test.tsx:25:22)\n\n  \u25cf WebSocket Performance and Advanced Tests \u203a Performance Monitoring \u203a should track connection stability over time\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-performance.test.tsx:30:15)\n\n  \u25cf WebSocket Performance and Advanced Tests \u203a Performance Monitoring \u203a should measure message throughput performance\n\n    TypeError: websocket_test_utils_2.AdvancedWebSocketTester is not a constructor\n\n    \u001b[0m \u001b[90m 23 |\u001b[39m     \u001b[90m// Use real WebSocket simulation instead of mocks\u001b[39m\n     \u001b[90m 24 |\u001b[39m     wsManager \u001b[33m=\u001b[39m createWebSocketManager(undefined\u001b[33m,\u001b[39m \u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 25 |\u001b[39m     advancedTester \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mAdvancedWebSocketTester\u001b[39m()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 26 |\u001b[39m     wsManager\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 28 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/websocket-performance.test.tsx:25:22)\n\n  \u25cf WebSocket Performance and Advanced Tests \u203a Performance Monitoring \u203a should measure message throughput performance\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-performance.test.tsx:30:15)\n\n  \u25cf WebSocket Performance and Advanced Tests \u203a Connection Pooling \u203a should handle real concurrent connections with load testing\n\n    TypeError: websocket_test_utils_2.AdvancedWebSocketTester is not a constructor\n\n    \u001b[0m \u001b[90m 23 |\u001b[39m     \u001b[90m// Use real WebSocket simulation instead of mocks\u001b[39m\n     \u001b[90m 24 |\u001b[39m     wsManager \u001b[33m=\u001b[39m createWebSocketManager(undefined\u001b[33m,\u001b[39m \u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 25 |\u001b[39m     advancedTester \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mAdvancedWebSocketTester\u001b[39m()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 26 |\u001b[39m     wsManager\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 28 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/websocket-performance.test.tsx:25:22)\n\n  \u25cf WebSocket Performance and Advanced Tests \u203a Connection Pooling \u203a should handle real concurrent connections with load testing\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-performance.test.tsx:30:15)\n\n  \u25cf WebSocket Performance and Advanced Tests \u203a Connection Pooling \u203a should test real connection pool management\n\n    TypeError: websocket_test_utils_2.AdvancedWebSocketTester is not a constructor\n\n    \u001b[0m \u001b[90m 23 |\u001b[39m     \u001b[90m// Use real WebSocket simulation instead of mocks\u001b[39m\n     \u001b[90m 24 |\u001b[39m     wsManager \u001b[33m=\u001b[39m createWebSocketManager(undefined\u001b[33m,\u001b[39m \u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 25 |\u001b[39m     advancedTester \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mAdvancedWebSocketTester\u001b[39m()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 26 |\u001b[39m     wsManager\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 28 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/websocket-performance.test.tsx:25:22)\n\n  \u25cf WebSocket Performance and Advanced Tests \u203a Connection Pooling \u203a should test real connection pool management\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-performance.test.tsx:30:15)\n\n  \u25cf WebSocket Performance and Advanced Tests \u203a Connection Pooling \u203a should handle pool failover scenarios\n\n    TypeError: websocket_test_utils_2.AdvancedWebSocketTester is not a constructor\n\n    \u001b[0m \u001b[90m 23 |\u001b[39m     \u001b[90m// Use real WebSocket simulation instead of mocks\u001b[39m\n     \u001b[90m 24 |\u001b[39m     wsManager \u001b[33m=\u001b[39m createWebSocketManager(undefined\u001b[33m,\u001b[39m \u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 25 |\u001b[39m     advancedTester \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mAdvancedWebSocketTester\u001b[39m()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 26 |\u001b[39m     wsManager\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 28 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/websocket-performance.test.tsx:25:22)\n\n  \u25cf WebSocket Performance and Advanced Tests \u203a Connection Pooling \u203a should handle pool failover scenarios\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-performance.test.tsx:30:15)\n\n  \u25cf WebSocket Performance and Advanced Tests \u203a Broadcasting \u203a should test real multi-connection broadcasting\n\n    TypeError: websocket_test_utils_2.AdvancedWebSocketTester is not a constructor\n\n    \u001b[0m \u001b[90m 23 |\u001b[39m     \u001b[90m// Use real WebSocket simulation instead of mocks\u001b[39m\n     \u001b[90m 24 |\u001b[39m     wsManager \u001b[33m=\u001b[39m createWebSocketManager(undefined\u001b[33m,\u001b[39m \u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 25 |\u001b[39m     advancedTester \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mAdvancedWebSocketTester\u001b[39m()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 26 |\u001b[39m     wsManager\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 28 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/websocket-performance.test.tsx:25:22)\n\n  \u25cf WebSocket Performance and Advanced Tests \u203a Broadcasting \u203a should test real multi-connection broadcasting\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-performance.test.tsx:30:15)\n\n  \u25cf WebSocket Performance and Advanced Tests \u203a Broadcasting \u203a should handle selective broadcasting\n\n    TypeError: websocket_test_utils_2.AdvancedWebSocketTester is not a constructor\n\n    \u001b[0m \u001b[90m 23 |\u001b[39m     \u001b[90m// Use real WebSocket simulation instead of mocks\u001b[39m\n     \u001b[90m 24 |\u001b[39m     wsManager \u001b[33m=\u001b[39m createWebSocketManager(undefined\u001b[33m,\u001b[39m \u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 25 |\u001b[39m     advancedTester \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mAdvancedWebSocketTester\u001b[39m()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 26 |\u001b[39m     wsManager\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 28 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/websocket-performance.test.tsx:25:22)\n\n  \u25cf WebSocket Performance and Advanced Tests \u203a Broadcasting \u203a should handle selective broadcasting\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-performance.test.tsx:30:15)\n\n  \u25cf WebSocket Performance and Advanced Tests \u203a Benchmarking \u203a should benchmark real vs mock WebSocket test performance\n\n    TypeError: websocket_test_utils_2.AdvancedWebSocketTester is not a constructor\n\n    \u001b[0m \u001b[90m 23 |\u001b[39m     \u001b[90m// Use real WebSocket simulation instead of mocks\u001b[39m\n     \u001b[90m 24 |\u001b[39m     wsManager \u001b[33m=\u001b[39m createWebSocketManager(undefined\u001b[33m,\u001b[39m \u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 25 |\u001b[39m     advancedTester \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mAdvancedWebSocketTester\u001b[39m()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 26 |\u001b[39m     wsManager\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 28 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/websocket-performance.test.tsx:25:22)\n\n  \u25cf WebSocket Performance and Advanced Tests \u203a Benchmarking \u203a should benchmark real vs mock WebSocket test performance\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-performance.test.tsx:30:15)\n\n  \u25cf WebSocket Performance and Advanced Tests \u203a Benchmarking \u203a should benchmark connection establishment times\n\n    TypeError: websocket_test_utils_2.AdvancedWebSocketTester is not a constructor\n\n    \u001b[0m \u001b[90m 23 |\u001b[39m     \u001b[90m// Use real WebSocket simulation instead of mocks\u001b[39m\n     \u001b[90m 24 |\u001b[39m     wsManager \u001b[33m=\u001b[39m createWebSocketManager(undefined\u001b[33m,\u001b[39m \u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 25 |\u001b[39m     advancedTester \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mAdvancedWebSocketTester\u001b[39m()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 26 |\u001b[39m     wsManager\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 28 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/websocket-performance.test.tsx:25:22)\n\n  \u25cf WebSocket Performance and Advanced Tests \u203a Benchmarking \u203a should benchmark connection establishment times\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-performance.test.tsx:30:15)\n\n  \u25cf WebSocket Performance and Advanced Tests \u203a Benchmarking \u203a should benchmark message processing latency\n\n    TypeError: websocket_test_utils_2.AdvancedWebSocketTester is not a constructor\n\n    \u001b[0m \u001b[90m 23 |\u001b[39m     \u001b[90m// Use real WebSocket simulation instead of mocks\u001b[39m\n     \u001b[90m 24 |\u001b[39m     wsManager \u001b[33m=\u001b[39m createWebSocketManager(undefined\u001b[33m,\u001b[39m \u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 25 |\u001b[39m     advancedTester \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mAdvancedWebSocketTester\u001b[39m()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 26 |\u001b[39m     wsManager\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 28 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/websocket-performance.test.tsx:25:22)\n\n  \u25cf WebSocket Performance and Advanced Tests \u203a Benchmarking \u203a should benchmark message processing latency\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-performance.test.tsx:30:15)\n\nFAIL __tests__/integration/api-calls-advanced.test.tsx\n  \u25cf API Calls - Request Interceptors \u203a handles API spec fetching for endpoint resolution\n\n    Endpoint get_threads_v1 not found\n\n    \u001b[0m \u001b[90m  7 |\u001b[39m     \u001b[36mconst\u001b[39m endpoint \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m getEndpoint(endpointName\u001b[33m,\u001b[39m method)\u001b[33m;\u001b[39m\n     \u001b[90m  8 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mendpoint) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Endpoint ${endpointName} not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 10 |\u001b[39m     }\n     \u001b[90m 11 |\u001b[39m\n     \u001b[90m 12 |\u001b[39m     \u001b[36mconst\u001b[39m url \u001b[33m=\u001b[39m getApiUrl(endpoint\u001b[33m.\u001b[39mpath)\u001b[33m;\u001b[39m\u001b[0m\n\n      at ApiClient.request (services/apiClient.ts:9:13)\n      at Object.<anonymous> (__tests__/integration/api-calls-advanced.test.tsx:131:20)\n\n  \u25cf API Calls - Request Interceptors \u203a caches OpenAPI spec for subsequent requests\n\n    Endpoint cached_endpoint not found\n\n    \u001b[0m \u001b[90m  7 |\u001b[39m     \u001b[36mconst\u001b[39m endpoint \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m getEndpoint(endpointName\u001b[33m,\u001b[39m method)\u001b[33m;\u001b[39m\n     \u001b[90m  8 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mendpoint) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Endpoint ${endpointName} not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 10 |\u001b[39m     }\n     \u001b[90m 11 |\u001b[39m\n     \u001b[90m 12 |\u001b[39m     \u001b[36mconst\u001b[39m url \u001b[33m=\u001b[39m getApiUrl(endpoint\u001b[33m.\u001b[39mpath)\u001b[33m;\u001b[39m\u001b[0m\n\n      at ApiClient.request (services/apiClient.ts:9:13)\n      at Object.<anonymous> (__tests__/integration/api-calls-advanced.test.tsx:158:5)\n\n  \u25cf API Calls - Request Interceptors \u203a retries spec fetching on failure\n\n    expect(received).resolves.toBeDefined()\n\n    Received promise rejected instead of resolved\n    Rejected to value: [Error: Endpoint retry_test not found]\n\n    \u001b[0m \u001b[90m 209 |\u001b[39m\n     \u001b[90m 210 |\u001b[39m     \u001b[90m// Should eventually succeed after retry\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 211 |\u001b[39m     \u001b[36mawait\u001b[39m expect(\n     \u001b[90m     |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 212 |\u001b[39m       apiClient\u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m'retry_test'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'test-token'\u001b[39m)\n     \u001b[90m 213 |\u001b[39m     )\u001b[33m.\u001b[39mresolves\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\n     \u001b[90m 214 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n\n      at expect (node_modules/expect/build/index.js:2116:15)\n      at Object.<anonymous> (__tests__/integration/api-calls-advanced.test.tsx:211:11)\n\n  \u25cf API Calls - API Versioning \u203a handles version-specific endpoints in OpenAPI spec\n\n    Endpoint get_threads_v2 not found\n\n    \u001b[0m \u001b[90m  7 |\u001b[39m     \u001b[36mconst\u001b[39m endpoint \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m getEndpoint(endpointName\u001b[33m,\u001b[39m method)\u001b[33m;\u001b[39m\n     \u001b[90m  8 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mendpoint) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Endpoint ${endpointName} not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 10 |\u001b[39m     }\n     \u001b[90m 11 |\u001b[39m\n     \u001b[90m 12 |\u001b[39m     \u001b[36mconst\u001b[39m url \u001b[33m=\u001b[39m getApiUrl(endpoint\u001b[33m.\u001b[39mpath)\u001b[33m;\u001b[39m\u001b[0m\n\n      at ApiClient.request (services/apiClient.ts:9:13)\n      at Object.<anonymous> (__tests__/integration/api-calls-advanced.test.tsx:258:20)\n\n  \u25cf API Calls - API Versioning \u203a handles version migration scenarios\n\n    Endpoint get_threads_v1 not found\n\n    \u001b[0m \u001b[90m  7 |\u001b[39m     \u001b[36mconst\u001b[39m endpoint \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m getEndpoint(endpointName\u001b[33m,\u001b[39m method)\u001b[33m;\u001b[39m\n     \u001b[90m  8 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mendpoint) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Endpoint ${endpointName} not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 10 |\u001b[39m     }\n     \u001b[90m 11 |\u001b[39m\n     \u001b[90m 12 |\u001b[39m     \u001b[36mconst\u001b[39m url \u001b[33m=\u001b[39m getApiUrl(endpoint\u001b[33m.\u001b[39mpath)\u001b[33m;\u001b[39m\u001b[0m\n\n      at ApiClient.request (services/apiClient.ts:9:13)\n      at Object.<anonymous> (__tests__/integration/api-calls-advanced.test.tsx:268:24)\n\n  \u25cf API Calls - Response Interceptors \u203a parses JSON responses correctly\n\n    Endpoint get_threads_v1 not found\n\n    \u001b[0m \u001b[90m  7 |\u001b[39m     \u001b[36mconst\u001b[39m endpoint \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m getEndpoint(endpointName\u001b[33m,\u001b[39m method)\u001b[33m;\u001b[39m\n     \u001b[90m  8 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mendpoint) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Endpoint ${endpointName} not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 10 |\u001b[39m     }\n     \u001b[90m 11 |\u001b[39m\n     \u001b[90m 12 |\u001b[39m     \u001b[36mconst\u001b[39m url \u001b[33m=\u001b[39m getApiUrl(endpoint\u001b[33m.\u001b[39mpath)\u001b[33m;\u001b[39m\u001b[0m\n\n      at ApiClient.request (services/apiClient.ts:9:13)\n      at Object.<anonymous> (__tests__/integration/api-calls-advanced.test.tsx:300:22)\n\n  \u25cf API Calls - Response Interceptors \u203a handles empty response bodies\n\n    Endpoint delete_empty not found\n\n    \u001b[0m \u001b[90m  7 |\u001b[39m     \u001b[36mconst\u001b[39m endpoint \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m getEndpoint(endpointName\u001b[33m,\u001b[39m method)\u001b[33m;\u001b[39m\n     \u001b[90m  8 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mendpoint) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Endpoint ${endpointName} not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 10 |\u001b[39m     }\n     \u001b[90m 11 |\u001b[39m\n     \u001b[90m 12 |\u001b[39m     \u001b[36mconst\u001b[39m url \u001b[33m=\u001b[39m getApiUrl(endpoint\u001b[33m.\u001b[39mpath)\u001b[33m;\u001b[39m\u001b[0m\n\n      at ApiClient.request (services/apiClient.ts:9:13)\n      at Object.<anonymous> (__tests__/integration/api-calls-advanced.test.tsx:313:22)\n\n  \u25cf API Calls - Response Interceptors \u203a preserves response metadata\n\n    Endpoint metadata_test not found\n\n    \u001b[0m \u001b[90m  7 |\u001b[39m     \u001b[36mconst\u001b[39m endpoint \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m getEndpoint(endpointName\u001b[33m,\u001b[39m method)\u001b[33m;\u001b[39m\n     \u001b[90m  8 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mendpoint) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Endpoint ${endpointName} not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 10 |\u001b[39m     }\n     \u001b[90m 11 |\u001b[39m\n     \u001b[90m 12 |\u001b[39m     \u001b[36mconst\u001b[39m url \u001b[33m=\u001b[39m getApiUrl(endpoint\u001b[33m.\u001b[39mpath)\u001b[33m;\u001b[39m\u001b[0m\n\n      at ApiClient.request (services/apiClient.ts:9:13)\n      at Object.<anonymous> (__tests__/integration/api-calls-advanced.test.tsx:356:22)\n\n  \u25cf API Calls - Response Interceptors \u203a handles large response payloads efficiently\n\n    Endpoint get_large_data not found\n\n    \u001b[0m \u001b[90m  7 |\u001b[39m     \u001b[36mconst\u001b[39m endpoint \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m getEndpoint(endpointName\u001b[33m,\u001b[39m method)\u001b[33m;\u001b[39m\n     \u001b[90m  8 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mendpoint) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Endpoint ${endpointName} not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 10 |\u001b[39m     }\n     \u001b[90m 11 |\u001b[39m\n     \u001b[90m 12 |\u001b[39m     \u001b[36mconst\u001b[39m url \u001b[33m=\u001b[39m getApiUrl(endpoint\u001b[33m.\u001b[39mpath)\u001b[33m;\u001b[39m\u001b[0m\n\n      at ApiClient.request (services/apiClient.ts:9:13)\n      at Object.<anonymous> (__tests__/integration/api-calls-advanced.test.tsx:363:22)\n\n  \u25cf API Calls - Performance \u203a handles concurrent requests efficiently\n\n    Endpoint get_threads_v1 not found\n\n    \u001b[0m \u001b[90m  7 |\u001b[39m     \u001b[36mconst\u001b[39m endpoint \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m getEndpoint(endpointName\u001b[33m,\u001b[39m method)\u001b[33m;\u001b[39m\n     \u001b[90m  8 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mendpoint) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Endpoint ${endpointName} not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 10 |\u001b[39m     }\n     \u001b[90m 11 |\u001b[39m\n     \u001b[90m 12 |\u001b[39m     \u001b[36mconst\u001b[39m url \u001b[33m=\u001b[39m getApiUrl(endpoint\u001b[33m.\u001b[39mpath)\u001b[33m;\u001b[39m\u001b[0m\n\n      at ApiClient.request (services/apiClient.ts:9:13)\n          at async Promise.all (index 0)\n      at Object.<anonymous> (__tests__/integration/api-calls-advanced.test.tsx:409:23)\n\n  \u25cf API Calls - Performance \u203a implements connection pooling\n\n    Endpoint connection_test not found\n\n    \u001b[0m \u001b[90m  7 |\u001b[39m     \u001b[36mconst\u001b[39m endpoint \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m getEndpoint(endpointName\u001b[33m,\u001b[39m method)\u001b[33m;\u001b[39m\n     \u001b[90m  8 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mendpoint) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Endpoint ${endpointName} not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 10 |\u001b[39m     }\n     \u001b[90m 11 |\u001b[39m\n     \u001b[90m 12 |\u001b[39m     \u001b[36mconst\u001b[39m url \u001b[33m=\u001b[39m getApiUrl(endpoint\u001b[33m.\u001b[39mpath)\u001b[33m;\u001b[39m\u001b[0m\n\n      at ApiClient.request (services/apiClient.ts:9:13)\n          at async Promise.all (index 0)\n      at Object.<anonymous> (__tests__/integration/api-calls-advanced.test.tsx:443:5)\n\n  \u25cf API Calls - Performance \u203a optimizes payload serialization\n\n    Endpoint large_payload_test not found\n\n    \u001b[0m \u001b[90m  7 |\u001b[39m     \u001b[36mconst\u001b[39m endpoint \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m getEndpoint(endpointName\u001b[33m,\u001b[39m method)\u001b[33m;\u001b[39m\n     \u001b[90m  8 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mendpoint) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Endpoint ${endpointName} not found`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 10 |\u001b[39m     }\n     \u001b[90m 11 |\u001b[39m\n     \u001b[90m 12 |\u001b[39m     \u001b[36mconst\u001b[39m url \u001b[33m=\u001b[39m getApiUrl(endpoint\u001b[33m.\u001b[39mpath)\u001b[33m;\u001b[39m\u001b[0m\n\n      at ApiClient.request (services/apiClient.ts:9:13)\n      at Object.<anonymous> (__tests__/integration/api-calls-advanced.test.tsx:477:5)\n\nFAIL __tests__/integration/websocket-lifecycle.test.tsx\n  \u25cf WebSocket Connection Lifecycle Tests \u203a Connection Establishment \u203a should handle complete connection lifecycle with real timing\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-lifecycle.test.tsx:31:15)\n\n  \u25cf WebSocket Connection Lifecycle Tests \u203a Connection Establishment \u203a should handle complete connection lifecycle with real timing\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-lifecycle.test.tsx:35:15)\n\n  \u25cf WebSocket Connection Lifecycle Tests \u203a Connection Establishment \u203a should track real connection state transitions with history\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-lifecycle.test.tsx:31:15)\n\n  \u25cf WebSocket Connection Lifecycle Tests \u203a Connection Establishment \u203a should track real connection state transitions with history\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-lifecycle.test.tsx:35:15)\n\n  \u25cf WebSocket Connection Lifecycle Tests \u203a Connection Establishment \u203a should measure real connection performance\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-lifecycle.test.tsx:31:15)\n\n  \u25cf WebSocket Connection Lifecycle Tests \u203a Connection Establishment \u203a should measure real connection performance\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-lifecycle.test.tsx:35:15)\n\n  \u25cf WebSocket Connection Lifecycle Tests \u203a Error Handling \u203a should handle real connection errors with proper state transitions\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-lifecycle.test.tsx:31:15)\n\n  \u25cf WebSocket Connection Lifecycle Tests \u203a Error Handling \u203a should handle real connection errors with proper state transitions\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-lifecycle.test.tsx:35:15)\n\n  \u25cf WebSocket Connection Lifecycle Tests \u203a Error Handling \u203a should handle network disconnections gracefully\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-lifecycle.test.tsx:31:15)\n\n  \u25cf WebSocket Connection Lifecycle Tests \u203a Error Handling \u203a should handle network disconnections gracefully\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-lifecycle.test.tsx:35:15)\n\n  \u25cf WebSocket Connection Lifecycle Tests \u203a Reconnection Scenarios \u203a should handle real reconnection with timing simulation\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-lifecycle.test.tsx:31:15)\n\n  \u25cf WebSocket Connection Lifecycle Tests \u203a Reconnection Scenarios \u203a should handle real reconnection with timing simulation\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-lifecycle.test.tsx:35:15)\n\n  \u25cf WebSocket Connection Lifecycle Tests \u203a Reconnection Scenarios \u203a should test real WebSocket reconnection strategies\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-lifecycle.test.tsx:31:15)\n\n  \u25cf WebSocket Connection Lifecycle Tests \u203a Reconnection Scenarios \u203a should test real WebSocket reconnection strategies\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-lifecycle.test.tsx:35:15)\n\n  \u25cf WebSocket Connection Lifecycle Tests \u203a Reconnection Scenarios \u203a should handle multiple reconnection attempts\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-lifecycle.test.tsx:31:15)\n\n  \u25cf WebSocket Connection Lifecycle Tests \u203a Reconnection Scenarios \u203a should handle multiple reconnection attempts\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-lifecycle.test.tsx:35:15)\n\n  \u25cf WebSocket Connection Lifecycle Tests \u203a Performance Measurement \u203a should measure real connection performance with timing\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-lifecycle.test.tsx:31:15)\n\n  \u25cf WebSocket Connection Lifecycle Tests \u203a Performance Measurement \u203a should measure real connection performance with timing\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-lifecycle.test.tsx:35:15)\n\n  \u25cf WebSocket Connection Lifecycle Tests \u203a Performance Measurement \u203a should track connection stability metrics\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/websocket-lifecycle.test.tsx:31:15)\n\n  \u25cf WebSocket Connection Lifecycle Tests \u203a Performance Measurement \u203a should track connection stability metrics\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/websocket-lifecycle.test.tsx:35:15)\n\nFAIL __tests__/integration/corpus-management.test.tsx\n  \u25cf Corpus Management Integration \u203a should upload documents to corpus and update UI\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf Corpus Management Integration \u203a should upload documents to corpus and update UI\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\n  \u25cf Corpus Management Integration \u203a should search corpus with embeddings\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at WebSocketTestManager.setup (__tests__/helpers/websocket-test-manager.ts:65:10)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:50:13)\n\n  \u25cf Corpus Management Integration \u203a should search corpus with embeddings\n\n    TypeError: this.stateManager.clearHistory is not a function\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mserver \u001b[33m=\u001b[39m undefined\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mstateManager\u001b[33m.\u001b[39mclearHistory()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mmessageBuffer\u001b[33m.\u001b[39mflush()\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mconnectionHistory \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m     safeCleanup()\u001b[33m;\u001b[39m\u001b[0m\n\n      at WebSocketTestManager.cleanup (__tests__/helpers/websocket-test-manager.ts:130:23)\n      at Object.<anonymous> (__tests__/integration/corpus-management.test.tsx:54:13)\n\nFAIL __tests__/auth/auth-components-states.test.tsx\n  \u25cf Auth Components States \u203a Logged Out State \u203a should render login button when user is not authenticated\n\n    expect(element).toHaveAttribute(\"data-size\", \"lg\") // element.getAttribute(\"data-size\") === \"lg\"\n\n    Expected the element to have attribute:\n      data-size=\"lg\"\n    Received:\n      null\n\n    \u001b[0m \u001b[90m 74 |\u001b[39m       \u001b[36mconst\u001b[39m button \u001b[33m=\u001b[39m screen\u001b[33m.\u001b[39mgetByRole(\u001b[32m'button'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 75 |\u001b[39m       expect(button)\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'Login with Google'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 76 |\u001b[39m       expect(button)\u001b[33m.\u001b[39mtoHaveAttribute(\u001b[32m'data-size'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'lg'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 77 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 78 |\u001b[39m\n     \u001b[90m 79 |\u001b[39m     it(\u001b[32m'should call login function when login button is clicked'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.<anonymous> (__tests__/auth/auth-components-states.test.tsx:76:22)\n\n  \u25cf Auth Components States \u203a Logged In State - Development Mode \u203a should show DEV MODE badge in development mode\n\n    expect(element).toHaveAttribute(\"data-variant\", \"secondary\") // element.getAttribute(\"data-variant\") === \"secondary\"\n\n    Expected the element to have attribute:\n      data-variant=\"secondary\"\n    Received:\n      null\n\n    \u001b[0m \u001b[90m 180 |\u001b[39m       expect(badge)\u001b[33m.\u001b[39mtoBeInTheDocument()\u001b[33m;\u001b[39m\n     \u001b[90m 181 |\u001b[39m       expect(badge)\u001b[33m.\u001b[39mtoHaveClass(\u001b[32m'bg-yellow-100'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'text-yellow-800'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 182 |\u001b[39m       expect(badge)\u001b[33m.\u001b[39mtoHaveAttribute(\u001b[32m'data-variant'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'secondary'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 183 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 184 |\u001b[39m\n     \u001b[90m 185 |\u001b[39m     it(\u001b[32m'should render both logout and OAuth login buttons in dev mode'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.<anonymous> (__tests__/auth/auth-components-states.test.tsx:182:21)\n\n  \u25cf Auth Components States \u203a Logged In State - Development Mode \u203a should style logout button as outline variant in dev mode\n\n    expect(element).toHaveAttribute(\"data-variant\", \"outline\") // element.getAttribute(\"data-variant\") === \"outline\"\n\n    Expected the element to have attribute:\n      data-variant=\"outline\"\n    Received:\n      null\n\n    \u001b[0m \u001b[90m 194 |\u001b[39m\n     \u001b[90m 195 |\u001b[39m       \u001b[36mconst\u001b[39m logoutButton \u001b[33m=\u001b[39m screen\u001b[33m.\u001b[39mgetByText(\u001b[32m'Logout'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 196 |\u001b[39m       expect(logoutButton)\u001b[33m.\u001b[39mtoHaveAttribute(\u001b[32m'data-variant'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'outline'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 197 |\u001b[39m       expect(logoutButton)\u001b[33m.\u001b[39mtoHaveAttribute(\u001b[32m'data-size'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'sm'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 198 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 199 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/auth/auth-components-states.test.tsx:196:28)\n\n  \u25cf Auth Components States \u203a Logged In State - Development Mode \u203a should style OAuth login button as default variant in dev mode\n\n    expect(element).toHaveAttribute(\"data-variant\", \"default\") // element.getAttribute(\"data-variant\") === \"default\"\n\n    Expected the element to have attribute:\n      data-variant=\"default\"\n    Received:\n      null\n\n    \u001b[0m \u001b[90m 202 |\u001b[39m\n     \u001b[90m 203 |\u001b[39m       \u001b[36mconst\u001b[39m oauthButton \u001b[33m=\u001b[39m screen\u001b[33m.\u001b[39mgetByText(\u001b[32m'OAuth Login'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 204 |\u001b[39m       expect(oauthButton)\u001b[33m.\u001b[39mtoHaveAttribute(\u001b[32m'data-variant'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'default'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 205 |\u001b[39m       expect(oauthButton)\u001b[33m.\u001b[39mtoHaveAttribute(\u001b[32m'data-size'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'sm'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 206 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 207 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/auth/auth-components-states.test.tsx:204:27)\n\nFAIL __tests__/integration/logout-websocket.test.tsx (21.724 s)\n  \u25cf Logout WebSocket Disconnection Tests \u203a WebSocket Disconnection \u203a should disconnect WebSocket on logout\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mLogout\u001b[0m\n          \u001b[36m</button>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 88 |\u001b[39m       \u001b[36mawait\u001b[39m testWebSocketDisconnection()\u001b[33m;\u001b[39m\n     \u001b[90m 89 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 90 |\u001b[39m         expect(webSocketService\u001b[33m.\u001b[39mdisconnect)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 91 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 92 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 93 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/logout-websocket.test.tsx:90:45\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout WebSocket Disconnection Tests \u203a WebSocket Disconnection \u203a should clear WebSocket message queue\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mLogout\u001b[0m\n          \u001b[36m</button>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 102 |\u001b[39m       \u001b[36mawait\u001b[39m testWebSocketDisconnection()\u001b[33m;\u001b[39m\n     \u001b[90m 103 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 104 |\u001b[39m         expect(webSocketService\u001b[33m.\u001b[39mdisconnect)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 105 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 106 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 107 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/logout-websocket.test.tsx:104:45\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout WebSocket Disconnection Tests \u203a WebSocket Disconnection \u203a should handle WebSocket disconnection errors\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mLogout\u001b[0m\n          \u001b[36m</button>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 112 |\u001b[39m       \u001b[36mawait\u001b[39m testWebSocketDisconnection()\u001b[33m;\u001b[39m\n     \u001b[90m 113 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 114 |\u001b[39m         expect(mockAuthStore\u001b[33m.\u001b[39mlogout)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 115 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 116 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 117 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n\n      at __tests__/integration/logout-websocket.test.tsx:114:38\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout WebSocket Disconnection Tests \u203a WebSocket State Cleanup \u203a should ensure WebSocket connection is terminated\n\n    expect(jest.fn()).toHaveBeenCalledTimes(expected)\n\n    Expected number of calls: 1\n    Received number of calls: 0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mLogout\u001b[0m\n          \u001b[36m</button>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m       \u001b[36mawait\u001b[39m verifyWebSocketCleanup()\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m         expect(webSocketService\u001b[33m.\u001b[39mdisconnect)\u001b[33m.\u001b[39mtoHaveBeenCalledTimes(\u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/logout-websocket.test.tsx:130:45\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout WebSocket Disconnection Tests \u203a WebSocket State Cleanup \u203a should clear any pending WebSocket operations\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mLogout\u001b[0m\n          \u001b[36m</button>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 142 |\u001b[39m       \u001b[36mawait\u001b[39m verifyWebSocketCleanup()\u001b[33m;\u001b[39m\n     \u001b[90m 143 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 144 |\u001b[39m         expect(webSocketService\u001b[33m.\u001b[39mdisconnect)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 145 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 146 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 147 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/logout-websocket.test.tsx:144:45\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout WebSocket Disconnection Tests \u203a WebSocket State Cleanup \u203a should ensure clean WebSocket state for next session\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mLogout\u001b[0m\n          \u001b[36m</button>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 150 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n     \u001b[90m 151 |\u001b[39m         expect(webSocketService\u001b[33m.\u001b[39mgetState())\u001b[33m.\u001b[39mtoBe(\u001b[32m'disconnected'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 152 |\u001b[39m         expect(mockAuthStore\u001b[33m.\u001b[39mlogout)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 153 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 154 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 155 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n\n      at __tests__/integration/logout-websocket.test.tsx:152:38\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout WebSocket Disconnection Tests \u203a WebSocket Timing Requirements \u203a should complete WebSocket disconnect within 25ms\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mLogout\u001b[0m\n          \u001b[36m</button>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 163 |\u001b[39m       \u001b[36mawait\u001b[39m user\u001b[33m.\u001b[39mclick(logoutBtn)\u001b[33m;\u001b[39m\n     \u001b[90m 164 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 165 |\u001b[39m         expect(webSocketService\u001b[33m.\u001b[39mdisconnect)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 166 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 167 |\u001b[39m       \u001b[36mconst\u001b[39m endTime \u001b[33m=\u001b[39m performance\u001b[33m.\u001b[39mnow()\u001b[33m;\u001b[39m\n     \u001b[90m 168 |\u001b[39m       \u001b[36mreturn\u001b[39m endTime \u001b[33m-\u001b[39m startTime\u001b[33m;\u001b[39m\u001b[0m\n\n      at __tests__/integration/logout-websocket.test.tsx:165:45\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout WebSocket Disconnection Tests \u203a WebSocket Timing Requirements \u203a should not block logout process if WebSocket fails\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mLogout\u001b[0m\n          \u001b[36m</button>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 183 |\u001b[39m       \u001b[36mawait\u001b[39m user\u001b[33m.\u001b[39mclick(logoutBtn)\u001b[33m;\u001b[39m\n     \u001b[90m 184 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 185 |\u001b[39m         expect(mockAuthStore\u001b[33m.\u001b[39mlogout)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 186 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 187 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 188 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/logout-websocket.test.tsx:185:38\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout WebSocket Disconnection Tests \u203a WebSocket Timing Requirements \u203a should handle WebSocket timeout gracefully\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mLogout\u001b[0m\n          \u001b[36m</button>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 196 |\u001b[39m       \u001b[36mawait\u001b[39m user\u001b[33m.\u001b[39mclick(logoutBtn)\u001b[33m;\u001b[39m\n     \u001b[90m 197 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 198 |\u001b[39m         expect(mockAuthStore\u001b[33m.\u001b[39mlogout)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 199 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 200 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 201 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/logout-websocket.test.tsx:198:38\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout WebSocket Disconnection Tests \u203a WebSocket Timing Requirements \u203a should complete logout even if WebSocket is slow\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mLogout\u001b[0m\n          \u001b[36m</button>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 210 |\u001b[39m       \u001b[36mawait\u001b[39m user\u001b[33m.\u001b[39mclick(logoutBtn)\u001b[33m;\u001b[39m\n     \u001b[90m 211 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 212 |\u001b[39m         expect(mockAuthStore\u001b[33m.\u001b[39mlogout)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 213 |\u001b[39m         \u001b[36mconst\u001b[39m endTime \u001b[33m=\u001b[39m performance\u001b[33m.\u001b[39mnow()\u001b[33m;\u001b[39m\n     \u001b[90m 214 |\u001b[39m         expect(endTime \u001b[33m-\u001b[39m startTime)\u001b[33m.\u001b[39mtoBeLessThan(\u001b[35m500\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 215 |\u001b[39m       })\u001b[33m;\u001b[39m\u001b[0m\n\n      at __tests__/integration/logout-websocket.test.tsx:212:38\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout WebSocket Disconnection Tests \u203a WebSocket Error Handling \u203a should handle WebSocket disconnect errors gracefully\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mLogout\u001b[0m\n          \u001b[36m</button>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 231 |\u001b[39m       \u001b[36mawait\u001b[39m testWebSocketErrorHandling(\u001b[32m'connection'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 232 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 233 |\u001b[39m         expect(mockAuthStore\u001b[33m.\u001b[39mlogout)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 234 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 235 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 236 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/logout-websocket.test.tsx:233:38\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout WebSocket Disconnection Tests \u203a WebSocket Error Handling \u203a should handle WebSocket state check errors\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mLogout\u001b[0m\n          \u001b[36m</button>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 241 |\u001b[39m       \u001b[36mawait\u001b[39m testWebSocketErrorHandling(\u001b[32m'state'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 242 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 243 |\u001b[39m         expect(mockAuthStore\u001b[33m.\u001b[39mlogout)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 244 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 245 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 246 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/logout-websocket.test.tsx:243:38\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout WebSocket Disconnection Tests \u203a WebSocket Error Handling \u203a should continue logout process despite WebSocket errors\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mLogout\u001b[0m\n          \u001b[36m</button>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 251 |\u001b[39m       \u001b[36mawait\u001b[39m testWebSocketErrorHandling(\u001b[32m'general'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 252 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 253 |\u001b[39m         expect(mockAuthStore\u001b[33m.\u001b[39mlogout)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 254 |\u001b[39m         expect(mockAuthStore\u001b[33m.\u001b[39mreset)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m 255 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 256 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at __tests__/integration/logout-websocket.test.tsx:253:38\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout WebSocket Disconnection Tests \u203a WebSocket Error Handling \u203a should log WebSocket errors without blocking logout\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mLogout\u001b[0m\n          \u001b[36m</button>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 262 |\u001b[39m       \u001b[36mawait\u001b[39m testWebSocketErrorHandling(\u001b[32m'logging'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 263 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 264 |\u001b[39m         expect(mockAuthStore\u001b[33m.\u001b[39mlogout)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 265 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 266 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 267 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n\n      at __tests__/integration/logout-websocket.test.tsx:264:38\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout WebSocket Disconnection Tests \u203a WebSocket Security Cleanup \u203a should ensure no WebSocket connections remain active\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mLogout\u001b[0m\n          \u001b[36m</button>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 278 |\u001b[39m       \u001b[36mawait\u001b[39m verifyWebSocketSecurity()\u001b[33m;\u001b[39m\n     \u001b[90m 279 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 280 |\u001b[39m         expect(webSocketService\u001b[33m.\u001b[39mdisconnect)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 281 |\u001b[39m         expect(webSocketService\u001b[33m.\u001b[39mgetState())\u001b[33m.\u001b[39mtoBe(\u001b[32m'disconnected'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 282 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 283 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at __tests__/integration/logout-websocket.test.tsx:280:45\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout WebSocket Disconnection Tests \u203a WebSocket Security Cleanup \u203a should prevent unauthorized WebSocket access after logout\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: false\n    Received: true\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mLogout\u001b[0m\n          \u001b[36m</button>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 287 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n     \u001b[90m 288 |\u001b[39m         expect(webSocketService\u001b[33m.\u001b[39mgetState())\u001b[33m.\u001b[39mtoBe(\u001b[32m'disconnected'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 289 |\u001b[39m         expect(mockAuthStore\u001b[33m.\u001b[39misAuthenticated)\u001b[33m.\u001b[39mtoBe(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 290 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 291 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 292 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/logout-websocket.test.tsx:289:47\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout WebSocket Disconnection Tests \u203a WebSocket Security Cleanup \u203a should clear any WebSocket authentication tokens\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mLogout\u001b[0m\n          \u001b[36m</button>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 294 |\u001b[39m       \u001b[36mawait\u001b[39m verifyWebSocketSecurity()\u001b[33m;\u001b[39m\n     \u001b[90m 295 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 296 |\u001b[39m         expect(webSocketService\u001b[33m.\u001b[39mdisconnect)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 297 |\u001b[39m         expect(mockAuthStore\u001b[33m.\u001b[39mtoken)\u001b[33m.\u001b[39mtoBeNull()\u001b[33m;\u001b[39m\n     \u001b[90m 298 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 299 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at __tests__/integration/logout-websocket.test.tsx:296:45\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout WebSocket Disconnection Tests \u203a WebSocket Security Cleanup \u203a should ensure complete WebSocket session termination\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"logout-btn\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mLogout\u001b[0m\n          \u001b[36m</button>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 302 |\u001b[39m       \u001b[36mawait\u001b[39m verifyWebSocketSecurity()\u001b[33m;\u001b[39m\n     \u001b[90m 303 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 304 |\u001b[39m         expect(webSocketService\u001b[33m.\u001b[39mdisconnect)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 305 |\u001b[39m         expect(mockAuthStore\u001b[33m.\u001b[39mreset)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m 306 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 307 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at __tests__/integration/logout-websocket.test.tsx:304:45\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\nFAIL __tests__/auth/logout-state-cleanup-complete.test.tsx (21.563 s)\n  \u25cf Logout State Cleanup Complete Tests \u203a Token Removal Verification \u203a should remove JWT token from localStorage\n\n    Unable to find an element by: [data-testid=\"logout-button\"]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div />\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n    \u001b[0m \u001b[90m 139 |\u001b[39m       \u001b[36mconst\u001b[39m user \u001b[33m=\u001b[39m userEvent\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 140 |\u001b[39m       renderLogoutComponent()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 141 |\u001b[39m       \u001b[36mconst\u001b[39m logoutBtn \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m screen\u001b[33m.\u001b[39mfindByTestId(\u001b[32m'logout-button'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 142 |\u001b[39m       \u001b[36mawait\u001b[39m user\u001b[33m.\u001b[39mclick(logoutBtn)\u001b[33m;\u001b[39m\n     \u001b[90m 143 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 144 |\u001b[39m\u001b[0m\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at node_modules/@testing-library/dom/dist/query-helpers.js:86:33\n      at triggerLogout (__tests__/auth/logout-state-cleanup-complete.test.tsx:141:38)\n      at __tests__/auth/logout-state-cleanup-complete.test.tsx:147:15\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.<anonymous> (__tests__/auth/logout-state-cleanup-complete.test.tsx:146:16)\n\n  \u25cf Logout State Cleanup Complete Tests \u203a Token Removal Verification \u203a should remove auth token from localStorage\n\n    Unable to find an element by: [data-testid=\"logout-button\"]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div />\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n    \u001b[0m \u001b[90m 139 |\u001b[39m       \u001b[36mconst\u001b[39m user \u001b[33m=\u001b[39m userEvent\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 140 |\u001b[39m       renderLogoutComponent()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 141 |\u001b[39m       \u001b[36mconst\u001b[39m logoutBtn \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m screen\u001b[33m.\u001b[39mfindByTestId(\u001b[32m'logout-button'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 142 |\u001b[39m       \u001b[36mawait\u001b[39m user\u001b[33m.\u001b[39mclick(logoutBtn)\u001b[33m;\u001b[39m\n     \u001b[90m 143 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 144 |\u001b[39m\u001b[0m\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at node_modules/@testing-library/dom/dist/query-helpers.js:86:33\n      at triggerLogout (__tests__/auth/logout-state-cleanup-complete.test.tsx:141:38)\n      at __tests__/auth/logout-state-cleanup-complete.test.tsx:156:15\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.<anonymous> (__tests__/auth/logout-state-cleanup-complete.test.tsx:155:16)\n\n  \u25cf Logout State Cleanup Complete Tests \u203a Token Removal Verification \u203a should clear refresh token completely\n\n    Unable to find an element by: [data-testid=\"logout-button\"]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div />\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n    \u001b[0m \u001b[90m 139 |\u001b[39m       \u001b[36mconst\u001b[39m user \u001b[33m=\u001b[39m userEvent\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 140 |\u001b[39m       renderLogoutComponent()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 141 |\u001b[39m       \u001b[36mconst\u001b[39m logoutBtn \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m screen\u001b[33m.\u001b[39mfindByTestId(\u001b[32m'logout-button'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 142 |\u001b[39m       \u001b[36mawait\u001b[39m user\u001b[33m.\u001b[39mclick(logoutBtn)\u001b[33m;\u001b[39m\n     \u001b[90m 143 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 144 |\u001b[39m\u001b[0m\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at node_modules/@testing-library/dom/dist/query-helpers.js:86:33\n      at triggerLogout (__tests__/auth/logout-state-cleanup-complete.test.tsx:141:38)\n      at __tests__/auth/logout-state-cleanup-complete.test.tsx:165:15\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.<anonymous> (__tests__/auth/logout-state-cleanup-complete.test.tsx:164:16)\n\n  \u25cf Logout State Cleanup Complete Tests \u203a Token Removal Verification \u203a should remove session tokens from sessionStorage\n\n    Unable to find an element by: [data-testid=\"logout-button\"]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div />\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n    \u001b[0m \u001b[90m 139 |\u001b[39m       \u001b[36mconst\u001b[39m user \u001b[33m=\u001b[39m userEvent\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 140 |\u001b[39m       renderLogoutComponent()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 141 |\u001b[39m       \u001b[36mconst\u001b[39m logoutBtn \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m screen\u001b[33m.\u001b[39mfindByTestId(\u001b[32m'logout-button'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 142 |\u001b[39m       \u001b[36mawait\u001b[39m user\u001b[33m.\u001b[39mclick(logoutBtn)\u001b[33m;\u001b[39m\n     \u001b[90m 143 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 144 |\u001b[39m\u001b[0m\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at node_modules/@testing-library/dom/dist/query-helpers.js:86:33\n      at triggerLogout (__tests__/auth/logout-state-cleanup-complete.test.tsx:141:38)\n      at __tests__/auth/logout-state-cleanup-complete.test.tsx:174:15\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.<anonymous> (__tests__/auth/logout-state-cleanup-complete.test.tsx:173:16)\n\n  \u25cf Logout State Cleanup Complete Tests \u203a Memory State Cleanup \u203a should clear user object from memory\n\n    Unable to find an element by: [data-testid=\"logout-button\"]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div />\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n    \u001b[0m \u001b[90m 185 |\u001b[39m       \u001b[36mconst\u001b[39m user \u001b[33m=\u001b[39m userEvent\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 186 |\u001b[39m       renderLogoutComponent()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 187 |\u001b[39m       \u001b[36mconst\u001b[39m logoutBtn \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m screen\u001b[33m.\u001b[39mfindByTestId(\u001b[32m'logout-button'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 188 |\u001b[39m       \u001b[36mawait\u001b[39m user\u001b[33m.\u001b[39mclick(logoutBtn)\u001b[33m;\u001b[39m\n     \u001b[90m 189 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 190 |\u001b[39m\u001b[0m\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at node_modules/@testing-library/dom/dist/query-helpers.js:86:33\n      at executeMemoryCleanup (__tests__/auth/logout-state-cleanup-complete.test.tsx:187:38)\n      at __tests__/auth/logout-state-cleanup-complete.test.tsx:193:15\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.<anonymous> (__tests__/auth/logout-state-cleanup-complete.test.tsx:192:16)\n\n  \u25cf Logout State Cleanup Complete Tests \u203a Memory State Cleanup \u203a should reset authentication status\n\n    Unable to find an element by: [data-testid=\"logout-button\"]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div />\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n    \u001b[0m \u001b[90m 185 |\u001b[39m       \u001b[36mconst\u001b[39m user \u001b[33m=\u001b[39m userEvent\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 186 |\u001b[39m       renderLogoutComponent()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 187 |\u001b[39m       \u001b[36mconst\u001b[39m logoutBtn \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m screen\u001b[33m.\u001b[39mfindByTestId(\u001b[32m'logout-button'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 188 |\u001b[39m       \u001b[36mawait\u001b[39m user\u001b[33m.\u001b[39mclick(logoutBtn)\u001b[33m;\u001b[39m\n     \u001b[90m 189 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 190 |\u001b[39m\u001b[0m\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at node_modules/@testing-library/dom/dist/query-helpers.js:86:33\n      at executeMemoryCleanup (__tests__/auth/logout-state-cleanup-complete.test.tsx:187:38)\n      at __tests__/auth/logout-state-cleanup-complete.test.tsx:203:15\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.<anonymous> (__tests__/auth/logout-state-cleanup-complete.test.tsx:202:16)\n\n  \u25cf Logout State Cleanup Complete Tests \u203a Memory State Cleanup \u203a should clear token from memory\n\n    Unable to find an element by: [data-testid=\"logout-button\"]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div />\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n    \u001b[0m \u001b[90m 185 |\u001b[39m       \u001b[36mconst\u001b[39m user \u001b[33m=\u001b[39m userEvent\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 186 |\u001b[39m       renderLogoutComponent()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 187 |\u001b[39m       \u001b[36mconst\u001b[39m logoutBtn \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m screen\u001b[33m.\u001b[39mfindByTestId(\u001b[32m'logout-button'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 188 |\u001b[39m       \u001b[36mawait\u001b[39m user\u001b[33m.\u001b[39mclick(logoutBtn)\u001b[33m;\u001b[39m\n     \u001b[90m 189 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 190 |\u001b[39m\u001b[0m\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at node_modules/@testing-library/dom/dist/query-helpers.js:86:33\n      at executeMemoryCleanup (__tests__/auth/logout-state-cleanup-complete.test.tsx:187:38)\n      at __tests__/auth/logout-state-cleanup-complete.test.tsx:212:15\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.<anonymous> (__tests__/auth/logout-state-cleanup-complete.test.tsx:211:16)\n\n  \u25cf Logout State Cleanup Complete Tests \u203a Memory State Cleanup \u203a should reset all auth store state\n\n    Unable to find an element by: [data-testid=\"logout-button\"]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div />\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n    \u001b[0m \u001b[90m 185 |\u001b[39m       \u001b[36mconst\u001b[39m user \u001b[33m=\u001b[39m userEvent\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 186 |\u001b[39m       renderLogoutComponent()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 187 |\u001b[39m       \u001b[36mconst\u001b[39m logoutBtn \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m screen\u001b[33m.\u001b[39mfindByTestId(\u001b[32m'logout-button'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 188 |\u001b[39m       \u001b[36mawait\u001b[39m user\u001b[33m.\u001b[39mclick(logoutBtn)\u001b[33m;\u001b[39m\n     \u001b[90m 189 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 190 |\u001b[39m\u001b[0m\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at node_modules/@testing-library/dom/dist/query-helpers.js:86:33\n      at executeMemoryCleanup (__tests__/auth/logout-state-cleanup-complete.test.tsx:187:38)\n      at __tests__/auth/logout-state-cleanup-complete.test.tsx:221:15\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.<anonymous> (__tests__/auth/logout-state-cleanup-complete.test.tsx:220:16)\n\n  \u25cf Logout State Cleanup Complete Tests \u203a LocalStorage Complete Cleanup \u203a should remove user preferences from storage\n\n    Unable to find an element by: [data-testid=\"logout-button\"]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div />\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n    \u001b[0m \u001b[90m 232 |\u001b[39m       \u001b[36mconst\u001b[39m user \u001b[33m=\u001b[39m userEvent\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 233 |\u001b[39m       renderLogoutComponent()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 234 |\u001b[39m       \u001b[36mconst\u001b[39m logoutBtn \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m screen\u001b[33m.\u001b[39mfindByTestId(\u001b[32m'logout-button'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 235 |\u001b[39m       \u001b[36mawait\u001b[39m user\u001b[33m.\u001b[39mclick(logoutBtn)\u001b[33m;\u001b[39m\n     \u001b[90m 236 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 237 |\u001b[39m\u001b[0m\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at node_modules/@testing-library/dom/dist/query-helpers.js:86:33\n      at verifyLocalStorageCleanup (__tests__/auth/logout-state-cleanup-complete.test.tsx:234:38)\n      at __tests__/auth/logout-state-cleanup-complete.test.tsx:240:15\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.<anonymous> (__tests__/auth/logout-state-cleanup-complete.test.tsx:239:16)\n\n  \u25cf Logout State Cleanup Complete Tests \u203a LocalStorage Complete Cleanup \u203a should clear cached user data\n\n    Unable to find an element by: [data-testid=\"logout-button\"]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div />\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n    \u001b[0m \u001b[90m 232 |\u001b[39m       \u001b[36mconst\u001b[39m user \u001b[33m=\u001b[39m userEvent\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 233 |\u001b[39m       renderLogoutComponent()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 234 |\u001b[39m       \u001b[36mconst\u001b[39m logoutBtn \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m screen\u001b[33m.\u001b[39mfindByTestId(\u001b[32m'logout-button'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 235 |\u001b[39m       \u001b[36mawait\u001b[39m user\u001b[33m.\u001b[39mclick(logoutBtn)\u001b[33m;\u001b[39m\n     \u001b[90m 236 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 237 |\u001b[39m\u001b[0m\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at node_modules/@testing-library/dom/dist/query-helpers.js:86:33\n      at verifyLocalStorageCleanup (__tests__/auth/logout-state-cleanup-complete.test.tsx:234:38)\n      at __tests__/auth/logout-state-cleanup-complete.test.tsx:249:15\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.<anonymous> (__tests__/auth/logout-state-cleanup-complete.test.tsx:248:16)\n\n  \u25cf Logout State Cleanup Complete Tests \u203a LocalStorage Complete Cleanup \u203a should remove remember me settings\n\n    Unable to find an element by: [data-testid=\"logout-button\"]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div />\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n    \u001b[0m \u001b[90m 232 |\u001b[39m       \u001b[36mconst\u001b[39m user \u001b[33m=\u001b[39m userEvent\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 233 |\u001b[39m       renderLogoutComponent()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 234 |\u001b[39m       \u001b[36mconst\u001b[39m logoutBtn \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m screen\u001b[33m.\u001b[39mfindByTestId(\u001b[32m'logout-button'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 235 |\u001b[39m       \u001b[36mawait\u001b[39m user\u001b[33m.\u001b[39mclick(logoutBtn)\u001b[33m;\u001b[39m\n     \u001b[90m 236 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 237 |\u001b[39m\u001b[0m\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at node_modules/@testing-library/dom/dist/query-helpers.js:86:33\n      at verifyLocalStorageCleanup (__tests__/auth/logout-state-cleanup-complete.test.tsx:234:38)\n      at __tests__/auth/logout-state-cleanup-complete.test.tsx:258:15\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.<anonymous> (__tests__/auth/logout-state-cleanup-complete.test.tsx:257:16)\n\n  \u25cf Logout State Cleanup Complete Tests \u203a LocalStorage Complete Cleanup \u203a should preserve non-auth localStorage items\n\n    Unable to find an element by: [data-testid=\"logout-button\"]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div />\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n    \u001b[0m \u001b[90m 232 |\u001b[39m       \u001b[36mconst\u001b[39m user \u001b[33m=\u001b[39m userEvent\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 233 |\u001b[39m       renderLogoutComponent()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 234 |\u001b[39m       \u001b[36mconst\u001b[39m logoutBtn \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m screen\u001b[33m.\u001b[39mfindByTestId(\u001b[32m'logout-button'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 235 |\u001b[39m       \u001b[36mawait\u001b[39m user\u001b[33m.\u001b[39mclick(logoutBtn)\u001b[33m;\u001b[39m\n     \u001b[90m 236 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 237 |\u001b[39m\u001b[0m\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at node_modules/@testing-library/dom/dist/query-helpers.js:86:33\n      at verifyLocalStorageCleanup (__tests__/auth/logout-state-cleanup-complete.test.tsx:234:38)\n      at __tests__/auth/logout-state-cleanup-complete.test.tsx:271:15\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.<anonymous> (__tests__/auth/logout-state-cleanup-complete.test.tsx:270:16)\n\n  \u25cf Logout State Cleanup Complete Tests \u203a Memory Leak Prevention \u203a should clear all user-specific data from memory\n\n    Unable to find an element by: [data-testid=\"logout-button\"]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div />\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n    \u001b[0m \u001b[90m 280 |\u001b[39m       \u001b[36mconst\u001b[39m user \u001b[33m=\u001b[39m userEvent\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 281 |\u001b[39m       renderLogoutComponent()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 282 |\u001b[39m       \u001b[36mconst\u001b[39m logoutBtn \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m screen\u001b[33m.\u001b[39mfindByTestId(\u001b[32m'logout-button'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 283 |\u001b[39m       \u001b[36mawait\u001b[39m user\u001b[33m.\u001b[39mclick(logoutBtn)\u001b[33m;\u001b[39m\n     \u001b[90m 284 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 285 |\u001b[39m\u001b[0m\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at node_modules/@testing-library/dom/dist/query-helpers.js:86:33\n      at testMemoryLeakPrevention (__tests__/auth/logout-state-cleanup-complete.test.tsx:282:38)\n      at __tests__/auth/logout-state-cleanup-complete.test.tsx:288:15\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.<anonymous> (__tests__/auth/logout-state-cleanup-complete.test.tsx:287:16)\n\n  \u25cf Logout State Cleanup Complete Tests \u203a Memory Leak Prevention \u203a should reset error states to prevent leaks\n\n    Unable to find an element by: [data-testid=\"logout-button\"]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div />\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n    \u001b[0m \u001b[90m 280 |\u001b[39m       \u001b[36mconst\u001b[39m user \u001b[33m=\u001b[39m userEvent\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 281 |\u001b[39m       renderLogoutComponent()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 282 |\u001b[39m       \u001b[36mconst\u001b[39m logoutBtn \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m screen\u001b[33m.\u001b[39mfindByTestId(\u001b[32m'logout-button'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 283 |\u001b[39m       \u001b[36mawait\u001b[39m user\u001b[33m.\u001b[39mclick(logoutBtn)\u001b[33m;\u001b[39m\n     \u001b[90m 284 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 285 |\u001b[39m\u001b[0m\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at node_modules/@testing-library/dom/dist/query-helpers.js:86:33\n      at testMemoryLeakPrevention (__tests__/auth/logout-state-cleanup-complete.test.tsx:282:38)\n      at __tests__/auth/logout-state-cleanup-complete.test.tsx:298:15\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.<anonymous> (__tests__/auth/logout-state-cleanup-complete.test.tsx:297:16)\n\n  \u25cf Logout State Cleanup Complete Tests \u203a Memory Leak Prevention \u203a should reset loading states completely\n\n    Unable to find an element by: [data-testid=\"logout-button\"]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div />\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n    \u001b[0m \u001b[90m 280 |\u001b[39m       \u001b[36mconst\u001b[39m user \u001b[33m=\u001b[39m userEvent\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 281 |\u001b[39m       renderLogoutComponent()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 282 |\u001b[39m       \u001b[36mconst\u001b[39m logoutBtn \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m screen\u001b[33m.\u001b[39mfindByTestId(\u001b[32m'logout-button'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 283 |\u001b[39m       \u001b[36mawait\u001b[39m user\u001b[33m.\u001b[39mclick(logoutBtn)\u001b[33m;\u001b[39m\n     \u001b[90m 284 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 285 |\u001b[39m\u001b[0m\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at node_modules/@testing-library/dom/dist/query-helpers.js:86:33\n      at testMemoryLeakPrevention (__tests__/auth/logout-state-cleanup-complete.test.tsx:282:38)\n      at __tests__/auth/logout-state-cleanup-complete.test.tsx:307:15\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.<anonymous> (__tests__/auth/logout-state-cleanup-complete.test.tsx:306:16)\n\n  \u25cf Logout State Cleanup Complete Tests \u203a Memory Leak Prevention \u203a should clear cached API responses\n\n    Unable to find an element by: [data-testid=\"logout-button\"]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div />\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n    \u001b[0m \u001b[90m 280 |\u001b[39m       \u001b[36mconst\u001b[39m user \u001b[33m=\u001b[39m userEvent\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 281 |\u001b[39m       renderLogoutComponent()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 282 |\u001b[39m       \u001b[36mconst\u001b[39m logoutBtn \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m screen\u001b[33m.\u001b[39mfindByTestId(\u001b[32m'logout-button'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 283 |\u001b[39m       \u001b[36mawait\u001b[39m user\u001b[33m.\u001b[39mclick(logoutBtn)\u001b[33m;\u001b[39m\n     \u001b[90m 284 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 285 |\u001b[39m\u001b[0m\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at node_modules/@testing-library/dom/dist/query-helpers.js:86:33\n      at testMemoryLeakPrevention (__tests__/auth/logout-state-cleanup-complete.test.tsx:282:38)\n      at __tests__/auth/logout-state-cleanup-complete.test.tsx:316:15\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.<anonymous> (__tests__/auth/logout-state-cleanup-complete.test.tsx:315:16)\n\n  \u25cf Logout State Cleanup Complete Tests \u203a Performance and Timing \u203a should complete cleanup within 100ms\n\n    Unable to find an element by: [data-testid=\"logout-button\"]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div />\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n    \u001b[0m \u001b[90m 328 |\u001b[39m       \u001b[36mconst\u001b[39m user \u001b[33m=\u001b[39m userEvent\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 329 |\u001b[39m       renderLogoutComponent()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 330 |\u001b[39m       \u001b[36mconst\u001b[39m logoutBtn \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m screen\u001b[33m.\u001b[39mfindByTestId(\u001b[32m'logout-button'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 331 |\u001b[39m       \u001b[36mawait\u001b[39m user\u001b[33m.\u001b[39mclick(logoutBtn)\u001b[33m;\u001b[39m\n     \u001b[90m 332 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n     \u001b[90m 333 |\u001b[39m         expect(mockAuthStore\u001b[33m.\u001b[39mlogout)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\u001b[0m\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at node_modules/@testing-library/dom/dist/query-helpers.js:86:33\n      at measureCleanupPerformance (__tests__/auth/logout-state-cleanup-complete.test.tsx:330:38)\n      at __tests__/auth/logout-state-cleanup-complete.test.tsx:340:22\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.<anonymous> (__tests__/auth/logout-state-cleanup-complete.test.tsx:339:36)\n\n  \u25cf Logout State Cleanup Complete Tests \u203a Performance and Timing \u203a should not block UI during cleanup\n\n    Unable to find an element by: [data-testid=\"logout-button\"]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div />\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n    \u001b[0m \u001b[90m 328 |\u001b[39m       \u001b[36mconst\u001b[39m user \u001b[33m=\u001b[39m userEvent\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 329 |\u001b[39m       renderLogoutComponent()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 330 |\u001b[39m       \u001b[36mconst\u001b[39m logoutBtn \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m screen\u001b[33m.\u001b[39mfindByTestId(\u001b[32m'logout-button'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 331 |\u001b[39m       \u001b[36mawait\u001b[39m user\u001b[33m.\u001b[39mclick(logoutBtn)\u001b[33m;\u001b[39m\n     \u001b[90m 332 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n     \u001b[90m 333 |\u001b[39m         expect(mockAuthStore\u001b[33m.\u001b[39mlogout)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\u001b[0m\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at node_modules/@testing-library/dom/dist/query-helpers.js:86:33\n      at measureCleanupPerformance (__tests__/auth/logout-state-cleanup-complete.test.tsx:330:38)\n      at __tests__/auth/logout-state-cleanup-complete.test.tsx:347:22\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.<anonymous> (__tests__/auth/logout-state-cleanup-complete.test.tsx:346:36)\n\n  \u25cf Logout State Cleanup Complete Tests \u203a Performance and Timing \u203a should handle rapid logout requests efficiently\n\n    expect(received).toBeLessThan(expected)\n\n    Expected: < 75\n    Received:   223.19919999999547\n\n    \u001b[0m \u001b[90m 366 |\u001b[39m       \n     \u001b[90m 367 |\u001b[39m       \u001b[36mconst\u001b[39m endTime \u001b[33m=\u001b[39m performance\u001b[33m.\u001b[39mnow()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 368 |\u001b[39m       expect(endTime \u001b[33m-\u001b[39m startTime)\u001b[33m.\u001b[39mtoBeLessThan(\u001b[35m75\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 369 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 370 |\u001b[39m\n     \u001b[90m 371 |\u001b[39m     it(\u001b[32m'should maintain consistent cleanup time under load'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.<anonymous> (__tests__/auth/logout-state-cleanup-complete.test.tsx:368:35)\n\n  \u25cf Logout State Cleanup Complete Tests \u203a Performance and Timing \u203a should maintain consistent cleanup time under load\n\n    Unable to find an element by: [data-testid=\"logout-button\"]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div />\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n    \u001b[0m \u001b[90m 328 |\u001b[39m       \u001b[36mconst\u001b[39m user \u001b[33m=\u001b[39m userEvent\u001b[33m.\u001b[39msetup()\u001b[33m;\u001b[39m\n     \u001b[90m 329 |\u001b[39m       renderLogoutComponent()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 330 |\u001b[39m       \u001b[36mconst\u001b[39m logoutBtn \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m screen\u001b[33m.\u001b[39mfindByTestId(\u001b[32m'logout-button'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 331 |\u001b[39m       \u001b[36mawait\u001b[39m user\u001b[33m.\u001b[39mclick(logoutBtn)\u001b[33m;\u001b[39m\n     \u001b[90m 332 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n     \u001b[90m 333 |\u001b[39m         expect(mockAuthStore\u001b[33m.\u001b[39mlogout)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\u001b[0m\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at node_modules/@testing-library/dom/dist/query-helpers.js:86:33\n      at measureCleanupPerformance (__tests__/auth/logout-state-cleanup-complete.test.tsx:330:38)\n      at __tests__/auth/logout-state-cleanup-complete.test.tsx:376:24\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.<anonymous> (__tests__/auth/logout-state-cleanup-complete.test.tsx:375:38)\n\nFAIL __tests__/integration/comprehensive/performance-benchmarks/index.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module '../test-utils' from '__tests__/integration/comprehensive/performance-benchmarks/render-performance.test.tsx'\n\n    Require stack:\n      __tests__/integration/comprehensive/performance-benchmarks/render-performance.test.tsx\n      __tests__/integration/comprehensive/performance-benchmarks/index.test.tsx\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m  7 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m   \u001b[33mReact\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 10 |\u001b[39m   render\u001b[33m,\u001b[39m\n     \u001b[90m 11 |\u001b[39m   setupTestEnvironment\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/comprehensive/performance-benchmarks/render-performance.test.tsx:8:1)\n      at Object.<anonymous> (__tests__/integration/comprehensive/performance-benchmarks/index.test.tsx:9:1)\n\nFAIL __tests__/integration/comprehensive/performance-benchmarks/render-performance.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module '../test-utils' from '__tests__/integration/comprehensive/performance-benchmarks/render-performance.test.tsx'\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m  7 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m   \u001b[33mReact\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 10 |\u001b[39m   render\u001b[33m,\u001b[39m\n     \u001b[90m 11 |\u001b[39m   setupTestEnvironment\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/comprehensive/performance-benchmarks/render-performance.test.tsx:8:1)\n\nFAIL __tests__/integration/comprehensive/performance-benchmarks/interaction-latency.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module '../test-utils' from '__tests__/integration/comprehensive/performance-benchmarks/interaction-latency.test.tsx'\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m  7 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m   \u001b[33mReact\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 10 |\u001b[39m   render\u001b[33m,\u001b[39m\n     \u001b[90m 11 |\u001b[39m   setupTestEnvironment\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/comprehensive/performance-benchmarks/interaction-latency.test.tsx:8:1)\n\nFAIL __tests__/integration/comprehensive/performance-benchmarks/resource-utilization.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module '../test-utils' from '__tests__/integration/comprehensive/performance-benchmarks/resource-utilization.test.tsx'\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m  7 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m   \u001b[33mReact\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 10 |\u001b[39m   render\u001b[33m,\u001b[39m\n     \u001b[90m 11 |\u001b[39m   setupTestEnvironment\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/comprehensive/performance-benchmarks/resource-utilization.test.tsx:8:1)\n\nFAIL __tests__/integration/comprehensive/performance-benchmarks/concurrent-performance.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module '../test-utils' from '__tests__/integration/comprehensive/performance-benchmarks/concurrent-performance.test.tsx'\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m  7 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m   \u001b[33mReact\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 10 |\u001b[39m   render\u001b[33m,\u001b[39m\n     \u001b[90m 11 |\u001b[39m   act\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/comprehensive/performance-benchmarks/concurrent-performance.test.tsx:8:1)\n\nFAIL __tests__/integration/comprehensive/websocket-resilience.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './test-utils' from '__tests__/integration/comprehensive/websocket-resilience.test.tsx'\n\n    \u001b[0m \u001b[90m  7 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m  8 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 10 |\u001b[39m   \u001b[33mReact\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 11 |\u001b[39m   render\u001b[33m,\u001b[39m\n     \u001b[90m 12 |\u001b[39m   waitFor\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/comprehensive/websocket-resilience.test.tsx:9:1)\n\nFAIL __tests__/integration/comprehensive/user-journey.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './user-journey-utils' from '__tests__/integration/comprehensive/user-journey.test.tsx'\n\n    \u001b[0m \u001b[90m 4 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m 5 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 6 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 7 |\u001b[39m   \u001b[33mReact\u001b[39m\u001b[33m,\u001b[39m render\u001b[33m,\u001b[39m waitFor\u001b[33m,\u001b[39m fireEvent\u001b[33m,\u001b[39m \u001b[33mTEST_TIMEOUTS\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 8 |\u001b[39m   setupUserJourneyTest\u001b[33m,\u001b[39m teardownUserJourneyTest\u001b[33m,\u001b[39m\n     \u001b[90m 9 |\u001b[39m   createMockWebSocketServer\u001b[33m,\u001b[39m createWebSocketMessage\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/comprehensive/user-journey.test.tsx:6:1)\n\nFAIL __tests__/integration/critical/websocket-auth.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module '../../shared/unified-test-utilities' from '__tests__/integration/critical/websocket-auth.test.tsx'\n\n    \u001b[0m \u001b[90m 13 |\u001b[39m\n     \u001b[90m 14 |\u001b[39m \u001b[90m// Import unified test utilities\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 15 |\u001b[39m \u001b[36mimport\u001b[39m { renderWithProviders\u001b[33m,\u001b[39m waitForElement\u001b[33m,\u001b[39m safeAsync\u001b[33m,\u001b[39m resetAllMocks } \u001b[36mfrom\u001b[39m \u001b[32m'../../shared/unified-test-utilities'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 16 |\u001b[39m \u001b[36mimport\u001b[39m { safeAct\u001b[33m,\u001b[39m waitForCondition\u001b[33m,\u001b[39m flushPromises } \u001b[36mfrom\u001b[39m \u001b[32m'../../helpers/test-timing-utilities'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 17 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mTestProviders\u001b[39m\u001b[33m,\u001b[39m mockWebSocketContextValue } \u001b[36mfrom\u001b[39m \u001b[32m'../../setup/test-providers'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 18 |\u001b[39m \u001b[36mimport\u001b[39m { createTestUser\u001b[33m,\u001b[39m createMockToken\u001b[33m,\u001b[39m setAuthenticatedState\u001b[33m,\u001b[39m setupMockFetchForConfig } \u001b[36mfrom\u001b[39m \u001b[32m'../../helpers/test-setup-helpers'\u001b[39m\u001b[33m;\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/critical/websocket-auth.test.tsx:15:1)\n\nFAIL __tests__/integration/comprehensive/interactive-features.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './interactive-features-utils' from '__tests__/integration/comprehensive/interactive-features.test.tsx'\n\n    \u001b[0m \u001b[90m 4 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m 5 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 6 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 7 |\u001b[39m   \u001b[33mReact\u001b[39m\u001b[33m,\u001b[39m render\u001b[33m,\u001b[39m waitFor\u001b[33m,\u001b[39m fireEvent\u001b[33m,\u001b[39m \u001b[33mTEST_TIMEOUTS\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 8 |\u001b[39m   setupInteractiveTest\u001b[33m,\u001b[39m teardownInteractiveTest\u001b[33m,\u001b[39m\n     \u001b[90m 9 |\u001b[39m   waitForUserInteraction\u001b[33m,\u001b[39m getMovementDirection\u001b[33m,\u001b[39m calculateNewPosition\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/comprehensive/interactive-features.test.tsx:6:1)\n\nFAIL __tests__/integration/critical/error-recovery-refactored.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module '../../helpers/test-setup-helpers' from '__tests__/integration/critical/error-recovery-refactored.test.tsx'\n\n    \u001b[0m \u001b[90m 14 |\u001b[39m \u001b[90m// Import test utilities\u001b[39m\n     \u001b[90m 15 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mTestProviders\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'../../test-utils/providers'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 16 |\u001b[39m \u001b[36mimport\u001b[39m { setupTestEnvironment\u001b[33m,\u001b[39m cleanupTestEnvironment\u001b[33m,\u001b[39m resetTestStores\u001b[33m,\u001b[39m clearTestStorage } \u001b[36mfrom\u001b[39m \u001b[32m'../../helpers/test-setup-helpers'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 17 |\u001b[39m \u001b[36mimport\u001b[39m { createExpiredToken\u001b[33m,\u001b[39m setupRetryFetchMock } \u001b[36mfrom\u001b[39m \u001b[32m'../../helpers/test-mock-helpers'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 18 |\u001b[39m \u001b[36mimport\u001b[39m { retryWithBackoff } \u001b[36mfrom\u001b[39m \u001b[32m'../../helpers/test-async-helpers'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 19 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mConnectionRecoveryComponent\u001b[39m\u001b[33m,\u001b[39m \u001b[33mAuthStatusComponent\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'../../helpers/test-component-helpers'\u001b[39m\u001b[33m;\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/critical/error-recovery-refactored.test.tsx:16:1)\n\nFAIL __tests__/integration/comprehensive/user-journey-errors.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './user-journey-utils' from '__tests__/integration/comprehensive/user-journey-errors.test.tsx'\n\n    \u001b[0m \u001b[90m 4 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m 5 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 6 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 7 |\u001b[39m   \u001b[33mReact\u001b[39m\u001b[33m,\u001b[39m render\u001b[33m,\u001b[39m waitFor\u001b[33m,\u001b[39m fireEvent\u001b[33m,\u001b[39m \u001b[33mTEST_TIMEOUTS\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 8 |\u001b[39m   setupUserJourneyTest\u001b[33m,\u001b[39m teardownUserJourneyTest\u001b[33m,\u001b[39m\n     \u001b[90m 9 |\u001b[39m   simulateNetworkDelay\u001b[33m,\u001b[39m createValidJsonFile\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/comprehensive/user-journey-errors.test.tsx:6:1)\n\nFAIL __tests__/integration/comprehensive/user-journey-workflow.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './user-journey-utils' from '__tests__/integration/comprehensive/user-journey-workflow.test.tsx'\n\n    \u001b[0m \u001b[90m 4 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m 5 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 6 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 7 |\u001b[39m   \u001b[33mReact\u001b[39m\u001b[33m,\u001b[39m render\u001b[33m,\u001b[39m waitFor\u001b[33m,\u001b[39m fireEvent\u001b[33m,\u001b[39m \u001b[33mTEST_TIMEOUTS\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 8 |\u001b[39m   setupUserJourneyTest\u001b[33m,\u001b[39m teardownUserJourneyTest\u001b[33m,\u001b[39m\n     \u001b[90m 9 |\u001b[39m   validateFileType\u001b[33m,\u001b[39m validateFileSize\u001b[33m,\u001b[39m parseFileContent\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/comprehensive/user-journey-workflow.test.tsx:6:1)\n\nFAIL __tests__/integration/comprehensive/navigation-search.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './test-utils' from '__tests__/integration/comprehensive/navigation-search.test.tsx'\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m  7 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m   \u001b[33mReact\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 10 |\u001b[39m   render\u001b[33m,\u001b[39m\n     \u001b[90m 11 |\u001b[39m   waitFor\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/comprehensive/navigation-search.test.tsx:8:1)\n\nFAIL __tests__/integration/comprehensive/theme-preferences.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './test-utils' from '__tests__/integration/comprehensive/theme-preferences.test.tsx'\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m  7 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m   \u001b[33mReact\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 10 |\u001b[39m   render\u001b[33m,\u001b[39m\n     \u001b[90m 11 |\u001b[39m   waitFor\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/comprehensive/theme-preferences.test.tsx:8:1)\n\nFAIL __tests__/integration/comprehensive/interactive-features-scroll.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './interactive-features-utils' from '__tests__/integration/comprehensive/interactive-features-scroll-basic.test.tsx'\n\n    Require stack:\n      __tests__/integration/comprehensive/interactive-features-scroll-basic.test.tsx\n      __tests__/integration/comprehensive/interactive-features-scroll.test.tsx\n\n    \u001b[0m \u001b[90m 4 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m 5 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 6 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 7 |\u001b[39m   \u001b[33mReact\u001b[39m\u001b[33m,\u001b[39m render\u001b[33m,\u001b[39m waitFor\u001b[33m,\u001b[39m \u001b[33mTEST_TIMEOUTS\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 8 |\u001b[39m   setupInteractiveTest\u001b[33m,\u001b[39m teardownInteractiveTest\u001b[33m,\u001b[39m\n     \u001b[90m 9 |\u001b[39m   simulateNetworkDelay\u001b[33m,\u001b[39m simulateScroll\u001b[33m,\u001b[39m createScrollContainer\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/comprehensive/interactive-features-scroll-basic.test.tsx:6:1)\n      at Object.<anonymous> (__tests__/integration/comprehensive/interactive-features-scroll.test.tsx:10:1)\n\nFAIL __tests__/integration/comprehensive/memory-management.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './test-utils' from '__tests__/integration/comprehensive/memory-management.test.tsx'\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m  7 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m   \u001b[33mReact\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 10 |\u001b[39m   render\u001b[33m,\u001b[39m\n     \u001b[90m 11 |\u001b[39m   waitFor\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/comprehensive/memory-management.test.tsx:8:1)\n\nFAIL __tests__/integration/comprehensive/interactive-features-scroll-basic.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './interactive-features-utils' from '__tests__/integration/comprehensive/interactive-features-scroll-basic.test.tsx'\n\n    \u001b[0m \u001b[90m 4 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m 5 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 6 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 7 |\u001b[39m   \u001b[33mReact\u001b[39m\u001b[33m,\u001b[39m render\u001b[33m,\u001b[39m waitFor\u001b[33m,\u001b[39m \u001b[33mTEST_TIMEOUTS\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 8 |\u001b[39m   setupInteractiveTest\u001b[33m,\u001b[39m teardownInteractiveTest\u001b[33m,\u001b[39m\n     \u001b[90m 9 |\u001b[39m   simulateNetworkDelay\u001b[33m,\u001b[39m simulateScroll\u001b[33m,\u001b[39m createScrollContainer\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/comprehensive/interactive-features-scroll-basic.test.tsx:6:1)\n\nFAIL __tests__/integration/comprehensive/interactive-features-drag-drop-advanced.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './interactive-features-utils' from '__tests__/integration/comprehensive/interactive-features-drag-drop-advanced.test.tsx'\n\n    \u001b[0m \u001b[90m 4 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m 5 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 6 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 7 |\u001b[39m   \u001b[33mReact\u001b[39m\u001b[33m,\u001b[39m render\u001b[33m,\u001b[39m waitFor\u001b[33m,\u001b[39m fireEvent\u001b[33m,\u001b[39m\n     \u001b[90m 8 |\u001b[39m   setupInteractiveTest\u001b[33m,\u001b[39m teardownInteractiveTest\u001b[33m,\u001b[39m\n     \u001b[90m 9 |\u001b[39m   simulateDragStart\u001b[33m,\u001b[39m reorderItems\u001b[33m,\u001b[39m generateItems\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/comprehensive/interactive-features-drag-drop-advanced.test.tsx:6:1)\n\nFAIL __tests__/integration/comprehensive/interactive-features-scroll-advanced.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './interactive-features-utils' from '__tests__/integration/comprehensive/interactive-features-scroll-advanced.test.tsx'\n\n    \u001b[0m \u001b[90m 4 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m 5 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 6 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 7 |\u001b[39m   \u001b[33mReact\u001b[39m\u001b[33m,\u001b[39m render\u001b[33m,\u001b[39m waitFor\u001b[33m,\u001b[39m \u001b[33mTEST_TIMEOUTS\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 8 |\u001b[39m   setupInteractiveTest\u001b[33m,\u001b[39m teardownInteractiveTest\u001b[33m,\u001b[39m\n     \u001b[90m 9 |\u001b[39m   simulateNetworkDelay\u001b[33m,\u001b[39m simulateScroll\u001b[33m,\u001b[39m createScrollContainer\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/comprehensive/interactive-features-scroll-advanced.test.tsx:6:1)\n\nFAIL __tests__/integration/comprehensive/performance-memory.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './test-utils' from '__tests__/integration/comprehensive/performance-memory.test.tsx'\n\n    \u001b[0m \u001b[90m 12 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m 13 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 14 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 15 |\u001b[39m   setupTestEnvironment\u001b[33m,\u001b[39m\n     \u001b[90m 16 |\u001b[39m   cleanupTestEnvironment\u001b[33m,\u001b[39m\n     \u001b[90m 17 |\u001b[39m   createMockWebSocketServer\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/comprehensive/performance-memory.test.tsx:14:1)\n\nFAIL __tests__/integration/comprehensive/interactive-features-drag-drop.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './interactive-features-utils' from '__tests__/integration/comprehensive/interactive-features-drag-drop-basic.test.tsx'\n\n    Require stack:\n      __tests__/integration/comprehensive/interactive-features-drag-drop-basic.test.tsx\n      __tests__/integration/comprehensive/interactive-features-drag-drop.test.tsx\n\n    \u001b[0m \u001b[90m 4 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m 5 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 6 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 7 |\u001b[39m   \u001b[33mReact\u001b[39m\u001b[33m,\u001b[39m render\u001b[33m,\u001b[39m waitFor\u001b[33m,\u001b[39m fireEvent\u001b[33m,\u001b[39m\n     \u001b[90m 8 |\u001b[39m   setupInteractiveTest\u001b[33m,\u001b[39m teardownInteractiveTest\u001b[33m,\u001b[39m\n     \u001b[90m 9 |\u001b[39m   createMockDataTransfer\u001b[33m,\u001b[39m createTestFile\u001b[33m,\u001b[39m generateImagePreview\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/comprehensive/interactive-features-drag-drop-basic.test.tsx:6:1)\n      at Object.<anonymous> (__tests__/integration/comprehensive/interactive-features-drag-drop.test.tsx:10:1)\n\nFAIL __tests__/integration/comprehensive/interactive-features-drag-drop-basic.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './interactive-features-utils' from '__tests__/integration/comprehensive/interactive-features-drag-drop-basic.test.tsx'\n\n    \u001b[0m \u001b[90m 4 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m 5 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 6 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 7 |\u001b[39m   \u001b[33mReact\u001b[39m\u001b[33m,\u001b[39m render\u001b[33m,\u001b[39m waitFor\u001b[33m,\u001b[39m fireEvent\u001b[33m,\u001b[39m\n     \u001b[90m 8 |\u001b[39m   setupInteractiveTest\u001b[33m,\u001b[39m teardownInteractiveTest\u001b[33m,\u001b[39m\n     \u001b[90m 9 |\u001b[39m   createMockDataTransfer\u001b[33m,\u001b[39m createTestFile\u001b[33m,\u001b[39m generateImagePreview\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/comprehensive/interactive-features-drag-drop-basic.test.tsx:6:1)\n\nFAIL __tests__/integration/comprehensive/index.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './test-utils' from '__tests__/integration/comprehensive/index.test.tsx'\n\n    \u001b[0m \u001b[90m 34 |\u001b[39m\n     \u001b[90m 35 |\u001b[39m \u001b[90m// Import test utilities first to ensure setup\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 36 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33m*\u001b[39m \u001b[36mas\u001b[39m testUtils \u001b[36mfrom\u001b[39m \u001b[32m'./test-utils'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m \u001b[90m// Import all test modules - commented out temporarily to prevent import errors\u001b[39m\n     \u001b[90m 39 |\u001b[39m \u001b[90m// These modules need fixing to work with the current test-utils structure\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/comprehensive/index.test.tsx:36:1)\n\nFAIL __tests__/integration/comprehensive/error-recovery.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './test-utils' from '__tests__/integration/comprehensive/error-recovery.test.tsx'\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m  7 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m   \u001b[33mReact\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 10 |\u001b[39m   render\u001b[33m,\u001b[39m\n     \u001b[90m 11 |\u001b[39m   waitFor\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/comprehensive/error-recovery.test.tsx:8:1)\n\nFAIL __tests__/integration/comprehensive/i18n-tests.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './test-utils' from '__tests__/integration/comprehensive/i18n-tests.test.tsx'\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m  7 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m   \u001b[33mReact\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 10 |\u001b[39m   render\u001b[33m,\u001b[39m\n     \u001b[90m 11 |\u001b[39m   waitFor\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/comprehensive/i18n-tests.test.tsx:8:1)\n\nFAIL __tests__/integration/comprehensive/collaboration-features.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './test-utils' from '__tests__/integration/comprehensive/collaboration-features.test.tsx'\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m  7 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m   \u001b[33mReact\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 10 |\u001b[39m   render\u001b[33m,\u001b[39m\n     \u001b[90m 11 |\u001b[39m   waitFor\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/comprehensive/collaboration-features.test.tsx:8:1)\n\nFAIL __tests__/integration/advanced-integration/end-to-end-journey-refactored.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module '../../helpers/test-setup-helpers' from '__tests__/integration/advanced-integration/end-to-end-journey-refactored.test.tsx'\n\n    \u001b[0m \u001b[90m  7 |\u001b[39m \u001b[36mimport\u001b[39m { render\u001b[33m,\u001b[39m waitFor\u001b[33m,\u001b[39m fireEvent } \u001b[36mfrom\u001b[39m \u001b[32m'@testing-library/react'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m  8 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33mWS\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'jest-websocket-mock'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m \u001b[36mimport\u001b[39m { setupTestEnvironment\u001b[33m,\u001b[39m cleanupTestEnvironment } \u001b[36mfrom\u001b[39m \u001b[32m'../../helpers/test-setup-helpers'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 10 |\u001b[39m \u001b[36mimport\u001b[39m { createOptimizationWorkflowComponent\u001b[33m,\u001b[39m createTestFile\u001b[33m,\u001b[39m simulateFileInput } \u001b[36mfrom\u001b[39m \u001b[32m'../../helpers/optimization-workflow-helpers'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 11 |\u001b[39m \u001b[36mimport\u001b[39m { assertElementText\u001b[33m,\u001b[39m waitForElementText\u001b[33m,\u001b[39m assertOptimizationResults } \u001b[36mfrom\u001b[39m \u001b[32m'../../helpers/test-assertion-helpers'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 12 |\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/advanced-integration/end-to-end-journey-refactored.test.tsx:9:1)\n\nFAIL __tests__/integration/websocket-large-messages.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module '../helpers/websocket-test-utilities' from '__tests__/integration/websocket-large-messages.test.tsx'\n\n    \u001b[0m \u001b[90m  9 |\u001b[39m \u001b[36mimport\u001b[39m { jest } \u001b[36mfrom\u001b[39m \u001b[32m'@jest/globals'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 10 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mWebSocketTestManager\u001b[39m\u001b[33m,\u001b[39m createWebSocketManager } \u001b[36mfrom\u001b[39m \u001b[32m'../helpers/websocket-test-manager'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 11 |\u001b[39m \u001b[36mimport\u001b[39m { generateLargeMessage } \u001b[36mfrom\u001b[39m \u001b[32m'../helpers/websocket-test-utilities'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 12 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mMessageBuffer\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'../setup/websocket-test-utils'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 13 |\u001b[39m\n     \u001b[90m 14 |\u001b[39m describe(\u001b[32m'WebSocket Large Message Handling Tests'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/websocket-large-messages.test.tsx:11:1)\n\nFAIL __tests__/integration/comprehensive/collaboration-sync.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './real-state-utils' from '__tests__/test-utils/render-with-providers.tsx'\n\n    Require stack:\n      __tests__/test-utils/render-with-providers.tsx\n      __tests__/test-utils.tsx\n      __tests__/integration/comprehensive/collaboration-sync.test.tsx\n\n    \u001b[0m \u001b[90m 23 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mUser\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'@/types'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 24 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mWebSocketContextType\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'@/types/websocket-context-types'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 25 |\u001b[39m \u001b[36mimport\u001b[39m { createRealTestUser } \u001b[36mfrom\u001b[39m \u001b[32m'./real-state-utils'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 26 |\u001b[39m\n     \u001b[90m 27 |\u001b[39m \u001b[90m// Real Provider Configuration Types\u001b[39m\n     \u001b[90m 28 |\u001b[39m \u001b[36mexport\u001b[39m \u001b[36minterface\u001b[39m \u001b[33mRealProviderOptions\u001b[39m {\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/test-utils/render-with-providers.tsx:25:1)\n      at Object.<anonymous> (__tests__/test-utils.tsx:102:1)\n      at Object.<anonymous> (__tests__/integration/comprehensive/collaboration-sync.test.tsx:8:1)\n\nFAIL __tests__/integration/task-retry-mechanisms.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './utils/infrastructure-test-utils' from '__tests__/integration/task-retry-mechanisms.test.tsx'\n\n    \u001b[0m \u001b[90m  9 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[32m'@testing-library/jest-dom'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 10 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mTestProviders\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'../test-utils/providers'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 11 |\u001b[39m \u001b[36mimport\u001b[39m { \n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 12 |\u001b[39m   initInfrastructureTest\u001b[33m,\u001b[39m\n     \u001b[90m 13 |\u001b[39m   setupFetchMock\u001b[33m,\u001b[39m\n     \u001b[90m 14 |\u001b[39m   waitForAsyncOperation\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/task-retry-mechanisms.test.tsx:11:1)\n\nFAIL __tests__/integration/login-token-management.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './message-test-helpers' from '__tests__/utils/test-utils.tsx'\n\n    Require stack:\n      __tests__/utils/test-utils.tsx\n      __tests__/utils/index.ts\n      __tests__/integration/login-token-management.test.tsx\n\n    \u001b[0m \u001b[90m 137 |\u001b[39m\n     \u001b[90m 138 |\u001b[39m \u001b[90m// Message test helpers\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 139 |\u001b[39m \u001b[36mexport\u001b[39m \u001b[33m*\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'./message-test-helpers'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 140 |\u001b[39m\n     \u001b[90m 141 |\u001b[39m \u001b[90m// Thread test helpers  \u001b[39m\n     \u001b[90m 142 |\u001b[39m \u001b[36mexport\u001b[39m \u001b[33m*\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'./thread-test-helpers'\u001b[39m\u001b[33m;\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/utils/test-utils.tsx:139:1)\n      at Object.<anonymous> (__tests__/utils/index.ts:21:1)\n      at Object.<anonymous> (__tests__/integration/login-token-management.test.tsx:21:1)\n\nFAIL __tests__/integration/task-processing-basic.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './utils/infrastructure-test-utils' from '__tests__/integration/task-processing-basic.test.tsx'\n\n    \u001b[0m \u001b[90m  9 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[32m'@testing-library/jest-dom'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 10 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mTestProviders\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'../test-utils/providers'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 11 |\u001b[39m \u001b[36mimport\u001b[39m { \n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 12 |\u001b[39m   initInfrastructureTest\u001b[33m,\u001b[39m\n     \u001b[90m 13 |\u001b[39m   setupFetchMock\u001b[33m,\u001b[39m\n     \u001b[90m 14 |\u001b[39m   createMockTaskResponse\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/task-processing-basic.test.tsx:11:1)\n\nFAIL __tests__/integration/login-websocket-setup.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './message-test-helpers' from '__tests__/utils/test-utils.tsx'\n\n    Require stack:\n      __tests__/utils/test-utils.tsx\n      __tests__/utils/index.ts\n      __tests__/integration/login-websocket-setup.test.tsx\n\n    \u001b[0m \u001b[90m 137 |\u001b[39m\n     \u001b[90m 138 |\u001b[39m \u001b[90m// Message test helpers\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 139 |\u001b[39m \u001b[36mexport\u001b[39m \u001b[33m*\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'./message-test-helpers'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 140 |\u001b[39m\n     \u001b[90m 141 |\u001b[39m \u001b[90m// Thread test helpers  \u001b[39m\n     \u001b[90m 142 |\u001b[39m \u001b[36mexport\u001b[39m \u001b[33m*\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'./thread-test-helpers'\u001b[39m\u001b[33m;\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/utils/test-utils.tsx:139:1)\n      at Object.<anonymous> (__tests__/utils/index.ts:21:1)\n      at Object.<anonymous> (__tests__/integration/login-websocket-setup.test.tsx:21:1)\n\nFAIL __tests__/integration/login-complete.test.tsx\n  \u25cf Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @/components/MainChat mapped as:\n    C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\components\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@\\/components\\/(.*)$/\": \"C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\components\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m \u001b[90m 30 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mMockMessageInput\u001b[39m \u001b[33m=\u001b[39m () \u001b[33m=>\u001b[39m \u001b[33m<\u001b[39m\u001b[33minput\u001b[39m data\u001b[33m-\u001b[39mtestid\u001b[33m=\u001b[39m\u001b[32m\"message-input\"\u001b[39m placeholder\u001b[33m=\u001b[39m\u001b[32m\"Type message...\"\u001b[39m \u001b[33m/\u001b[39m\u001b[33m>\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 31 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 32 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@/components/MainChat'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 33 |\u001b[39m   \u001b[33mMainChat\u001b[39m\u001b[33m:\u001b[39m \u001b[33mMockChatInterface\u001b[39m\n     \u001b[90m 34 |\u001b[39m }))\u001b[33m;\u001b[39m\n     \u001b[90m 35 |\u001b[39m\u001b[0m\n\n      at createNoMappedModuleFoundError (node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.<anonymous> (__tests__/integration/login-complete.test.tsx:32:6)\n\nFAIL __tests__/integration/websocket-complete.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module '../helpers/websocket-test-utilities' from '__tests__/integration/websocket-large-messages.test.tsx'\n\n    Require stack:\n      __tests__/integration/websocket-large-messages.test.tsx\n      __tests__/integration/websocket-complete.test.tsx\n\n    \u001b[0m \u001b[90m  9 |\u001b[39m \u001b[36mimport\u001b[39m { jest } \u001b[36mfrom\u001b[39m \u001b[32m'@jest/globals'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 10 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mWebSocketTestManager\u001b[39m\u001b[33m,\u001b[39m createWebSocketManager } \u001b[36mfrom\u001b[39m \u001b[32m'../helpers/websocket-test-manager'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 11 |\u001b[39m \u001b[36mimport\u001b[39m { generateLargeMessage } \u001b[36mfrom\u001b[39m \u001b[32m'../helpers/websocket-test-utilities'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 12 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mMessageBuffer\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'../setup/websocket-test-utils'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 13 |\u001b[39m\n     \u001b[90m 14 |\u001b[39m describe(\u001b[32m'WebSocket Large Message Handling Tests'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/websocket-large-messages.test.tsx:11:1)\n      at Object.<anonymous> (__tests__/integration/websocket-complete.test.tsx:25:1)\n\nFAIL __tests__/integration/message-streaming-core.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module '../helpers/websocket-test-utilities' from '__tests__/integration/message-streaming-core.test.tsx'\n\n    \u001b[0m \u001b[90m 11 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mTestProviders\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'../setup/test-providers'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 12 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mWebSocketTestManager\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'../helpers/websocket-test-manager'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 13 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mStreamingMetrics\u001b[39m\u001b[33m,\u001b[39m \u001b[33mMessageChunk\u001b[39m\u001b[33m,\u001b[39m createMessageChunk } \u001b[36mfrom\u001b[39m \u001b[32m'../helpers/websocket-test-utilities'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 14 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mStreamBuffer\u001b[39m\u001b[33m,\u001b[39m \u001b[33mFrameRateController\u001b[39m\u001b[33m,\u001b[39m \u001b[33mStreamingPerformanceMonitor\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'../helpers/streaming-test-utilities'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 15 |\u001b[39m\n     \u001b[90m 16 |\u001b[39m \u001b[90m// Core streaming test component\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/message-streaming-core.test.tsx:13:1)\n\nFAIL __tests__/integration/integration-corpus.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './integration-shared-utilities' from '__tests__/integration/integration-corpus.test.tsx'\n\n    \u001b[0m \u001b[90m  7 |\u001b[39m \u001b[36mimport\u001b[39m { render } \u001b[36mfrom\u001b[39m \u001b[32m'@testing-library/react'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m  8 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[32m'@testing-library/jest-dom'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 10 |\u001b[39m   setupIntegrationTest\u001b[33m,\u001b[39m\n     \u001b[90m 11 |\u001b[39m   teardownIntegrationTest\u001b[33m,\u001b[39m\n     \u001b[90m 12 |\u001b[39m   createMockDocument\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/integration-corpus.test.tsx:9:1)\n\nFAIL __tests__/integration/login-complete-flow.test.tsx\n  \u25cf Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @/services/websocket mapped as:\n    C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\services\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@\\/services\\/(.*)$/\": \"C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\services\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m \u001b[90m 65 |\u001b[39m \u001b[90m// Mock implementations\u001b[39m\n     \u001b[90m 66 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@/store/authStore'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({ useAuthStore\u001b[33m:\u001b[39m mockUseAuthStore }))\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 67 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@/services/websocket'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({ useWebSocket\u001b[33m:\u001b[39m mockUseWebSocket }))\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 68 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'next/navigation'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({ useRouter\u001b[33m:\u001b[39m mockUseRouter }))\u001b[33m;\u001b[39m\n     \u001b[90m 69 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@/auth/service'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({ authService\u001b[33m:\u001b[39m mockAuthService }))\u001b[33m;\u001b[39m\n     \u001b[90m 70 |\u001b[39m\u001b[0m\n\n      at createNoMappedModuleFoundError (node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.<anonymous> (__tests__/integration/login-complete-flow.test.tsx:67:6)\n\nFAIL __tests__/integration/integration-tasks.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './integration-shared-utilities' from '__tests__/integration/integration-tasks.test.tsx'\n\n    \u001b[0m \u001b[90m  7 |\u001b[39m \u001b[36mimport\u001b[39m { render\u001b[33m,\u001b[39m screen\u001b[33m,\u001b[39m waitFor } \u001b[36mfrom\u001b[39m \u001b[32m'@testing-library/react'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m  8 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[32m'@testing-library/jest-dom'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 10 |\u001b[39m   setupIntegrationTest\u001b[33m,\u001b[39m\n     \u001b[90m 11 |\u001b[39m   teardownIntegrationTest\u001b[33m,\u001b[39m\n     \u001b[90m 12 |\u001b[39m   createTaskRetryComponent\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/integration-tasks.test.tsx:9:1)\n\nFAIL __tests__/integration/integration-health.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './integration-shared-utilities' from '__tests__/integration/integration-health.test.tsx'\n\n    \u001b[0m \u001b[90m  7 |\u001b[39m \u001b[36mimport\u001b[39m { render\u001b[33m,\u001b[39m screen\u001b[33m,\u001b[39m waitFor } \u001b[36mfrom\u001b[39m \u001b[32m'@testing-library/react'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m  8 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[32m'@testing-library/jest-dom'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 10 |\u001b[39m   setupIntegrationTest\u001b[33m,\u001b[39m\n     \u001b[90m 11 |\u001b[39m   teardownIntegrationTest\u001b[33m,\u001b[39m\n     \u001b[90m 12 |\u001b[39m   createMockHealthStatus\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/integration-health.test.tsx:9:1)\n\nFAIL __tests__/integration/integration-cache.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './integration-shared-utilities' from '__tests__/integration/integration-cache.test.tsx'\n\n    \u001b[0m \u001b[90m  7 |\u001b[39m \u001b[36mimport\u001b[39m { render\u001b[33m,\u001b[39m screen\u001b[33m,\u001b[39m fireEvent\u001b[33m,\u001b[39m waitFor } \u001b[36mfrom\u001b[39m \u001b[32m'@testing-library/react'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m  8 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[32m'@testing-library/jest-dom'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 10 |\u001b[39m   setupIntegrationTest\u001b[33m,\u001b[39m\n     \u001b[90m 11 |\u001b[39m   teardownIntegrationTest\u001b[33m,\u001b[39m\n     \u001b[90m 12 |\u001b[39m   createLLMCacheStore\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/integration-cache.test.tsx:9:1)\n\nFAIL __tests__/integration/integration-comprehensive-core.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './integration-comprehensive-helpers' from '__tests__/integration/integration-comprehensive-core.test.tsx'\n\n    \u001b[0m \u001b[90m  8 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[32m'@testing-library/jest-dom'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m  9 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mTestProviders\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'../test-utils/providers'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 10 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 11 |\u001b[39m   setupComprehensiveMocks\u001b[33m,\u001b[39m\n     \u001b[90m 12 |\u001b[39m   setupComprehensiveTestEnvironment\u001b[33m,\u001b[39m\n     \u001b[90m 13 |\u001b[39m   cleanupComprehensiveTestEnvironment\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/integration-comprehensive-core.test.tsx:10:1)\n\nFAIL __tests__/integration/integration-data-generation.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './integration-shared-utilities' from '__tests__/integration/integration-data-generation.test.tsx'\n\n    \u001b[0m \u001b[90m  7 |\u001b[39m \u001b[36mimport\u001b[39m { render\u001b[33m,\u001b[39m screen\u001b[33m,\u001b[39m fireEvent\u001b[33m,\u001b[39m waitFor } \u001b[36mfrom\u001b[39m \u001b[32m'@testing-library/react'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m  8 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[32m'@testing-library/jest-dom'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 10 |\u001b[39m   setupIntegrationTest\u001b[33m,\u001b[39m\n     \u001b[90m 11 |\u001b[39m   teardownIntegrationTest\u001b[33m,\u001b[39m\n     \u001b[90m 12 |\u001b[39m   createMockGenerationJob\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/integration-data-generation.test.tsx:9:1)\n\nFAIL __tests__/integration/error-remediation.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './utils/infrastructure-test-utils' from '__tests__/integration/error-remediation.test.tsx'\n\n    \u001b[0m \u001b[90m  9 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[32m'@testing-library/jest-dom'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 10 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mTestProviders\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'../test-utils/providers'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 11 |\u001b[39m \u001b[36mimport\u001b[39m { \n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 12 |\u001b[39m   initInfrastructureTest\u001b[33m,\u001b[39m\n     \u001b[90m 13 |\u001b[39m   setupFetchMock\u001b[33m,\u001b[39m\n     \u001b[90m 14 |\u001b[39m   \u001b[33mInfrastructureTestContext\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/error-remediation.test.tsx:11:1)\n\nFAIL __tests__/integration/first-load-performance.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './message-test-helpers' from '__tests__/utils/test-utils.tsx'\n\n    Require stack:\n      __tests__/utils/test-utils.tsx\n      __tests__/utils/index.ts\n      __tests__/integration/first-load-performance.test.tsx\n\n    \u001b[0m \u001b[90m 137 |\u001b[39m\n     \u001b[90m 138 |\u001b[39m \u001b[90m// Message test helpers\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 139 |\u001b[39m \u001b[36mexport\u001b[39m \u001b[33m*\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'./message-test-helpers'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 140 |\u001b[39m\n     \u001b[90m 141 |\u001b[39m \u001b[90m// Thread test helpers  \u001b[39m\n     \u001b[90m 142 |\u001b[39m \u001b[36mexport\u001b[39m \u001b[33m*\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'./thread-test-helpers'\u001b[39m\u001b[33m;\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/utils/test-utils.tsx:139:1)\n      at Object.<anonymous> (__tests__/utils/index.ts:21:1)\n      at Object.<anonymous> (__tests__/integration/first-load-performance.test.tsx:31:1)\n\nFAIL __tests__/integration/first-load-bundle.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './message-test-helpers' from '__tests__/utils/test-utils.tsx'\n\n    Require stack:\n      __tests__/utils/test-utils.tsx\n      __tests__/utils/index.ts\n      __tests__/integration/first-load-bundle.test.tsx\n\n    \u001b[0m \u001b[90m 137 |\u001b[39m\n     \u001b[90m 138 |\u001b[39m \u001b[90m// Message test helpers\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 139 |\u001b[39m \u001b[36mexport\u001b[39m \u001b[33m*\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'./message-test-helpers'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 140 |\u001b[39m\n     \u001b[90m 141 |\u001b[39m \u001b[90m// Thread test helpers  \u001b[39m\n     \u001b[90m 142 |\u001b[39m \u001b[36mexport\u001b[39m \u001b[33m*\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'./thread-test-helpers'\u001b[39m\u001b[33m;\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/utils/test-utils.tsx:139:1)\n      at Object.<anonymous> (__tests__/utils/index.ts:21:1)\n      at Object.<anonymous> (__tests__/integration/first-load-bundle.test.tsx:30:1)\n\nFAIL __tests__/integration/database-integration.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './utils/infrastructure-test-utils' from '__tests__/integration/database-integration.test.tsx'\n\n    \u001b[0m \u001b[90m  9 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[32m'@testing-library/jest-dom'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 10 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mTestProviders\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'../test-utils/providers'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 11 |\u001b[39m \u001b[36mimport\u001b[39m { \n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 12 |\u001b[39m   initInfrastructureTest\u001b[33m,\u001b[39m\n     \u001b[90m 13 |\u001b[39m   setupFetchMock\u001b[33m,\u001b[39m\n     \u001b[90m 14 |\u001b[39m   createMockTransactionResponse\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/database-integration.test.tsx:11:1)\n\nFAIL __tests__/integration/error-context-tracing.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './utils/infrastructure-test-utils' from '__tests__/integration/error-context-tracing.test.tsx'\n\n    \u001b[0m \u001b[90m  9 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[32m'@testing-library/jest-dom'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 10 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mTestProviders\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'../test-utils/providers'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 11 |\u001b[39m \u001b[36mimport\u001b[39m { \n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 12 |\u001b[39m   initInfrastructureTest\u001b[33m,\u001b[39m\n     \u001b[90m 13 |\u001b[39m   setupFetchMock\u001b[33m,\u001b[39m\n     \u001b[90m 14 |\u001b[39m   createMockErrorResponse\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/error-context-tracing.test.tsx:11:1)\n\nFAIL __tests__/integration/first-load-edge-cases.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './message-test-helpers' from '__tests__/utils/test-utils.tsx'\n\n    Require stack:\n      __tests__/utils/test-utils.tsx\n      __tests__/utils/index.ts\n      __tests__/integration/first-load-edge-cases.test.tsx\n\n    \u001b[0m \u001b[90m 137 |\u001b[39m\n     \u001b[90m 138 |\u001b[39m \u001b[90m// Message test helpers\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 139 |\u001b[39m \u001b[36mexport\u001b[39m \u001b[33m*\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'./message-test-helpers'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 140 |\u001b[39m\n     \u001b[90m 141 |\u001b[39m \u001b[90m// Thread test helpers  \u001b[39m\n     \u001b[90m 142 |\u001b[39m \u001b[36mexport\u001b[39m \u001b[33m*\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'./thread-test-helpers'\u001b[39m\u001b[33m;\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/utils/test-utils.tsx:139:1)\n      at Object.<anonymous> (__tests__/utils/index.ts:21:1)\n      at Object.<anonymous> (__tests__/integration/first-load-edge-cases.test.tsx:32:1)\n\nFAIL __tests__/integration/caching-integration.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './utils/infrastructure-test-utils' from '__tests__/integration/caching-integration.test.tsx'\n\n    \u001b[0m \u001b[90m  9 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[32m'@testing-library/jest-dom'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 10 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mTestProviders\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'../test-utils/providers'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 11 |\u001b[39m \u001b[36mimport\u001b[39m { \n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 12 |\u001b[39m   initInfrastructureTest\u001b[33m,\u001b[39m\n     \u001b[90m 13 |\u001b[39m   setupFetchMock\u001b[33m,\u001b[39m\n     \u001b[90m 14 |\u001b[39m   createMockCacheResponse\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/caching-integration.test.tsx:11:1)\n\nFAIL __tests__/integration/comprehensive-integration-elite.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module '../helpers/test-setup-helpers' from '__tests__/integration/comprehensive-integration-elite.test.tsx'\n\n    \u001b[0m \u001b[90m 71 |\u001b[39m\n     \u001b[90m 72 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mTestProviders\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'../test-utils/providers'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 73 |\u001b[39m \u001b[36mimport\u001b[39m { setupTestEnvironment\u001b[33m,\u001b[39m cleanupTestEnvironment\u001b[33m,\u001b[39m resetTestStores\u001b[33m,\u001b[39m clearTestStorage\u001b[33m,\u001b[39m setupMockFetch } \u001b[36mfrom\u001b[39m \u001b[32m'../helpers/test-setup-helpers'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 74 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m 75 |\u001b[39m   createMockDocument\u001b[33m,\u001b[39m\n     \u001b[90m 76 |\u001b[39m   createMockSearchResults\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/comprehensive-integration-elite.test.tsx:73:1)\n\nFAIL __tests__/integration/basic-integration-data.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './helpers/websocket-helpers' from '__tests__/integration/basic-integration-data.test.tsx'\n\n    \u001b[0m \u001b[90m 15 |\u001b[39m \u001b[36mimport\u001b[39m { createMockMessage\u001b[33m,\u001b[39m createMockThread } \u001b[36mfrom\u001b[39m \u001b[32m'./helpers/test-builders'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 16 |\u001b[39m \u001b[36mimport\u001b[39m { assertTextContent\u001b[33m,\u001b[39m assertMessageCount\u001b[33m,\u001b[39m assertThreadCount } \u001b[36mfrom\u001b[39m \u001b[32m'./helpers/test-assertions'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 17 |\u001b[39m \u001b[36mimport\u001b[39m { waitForConnection\u001b[33m,\u001b[39m sendMessage\u001b[33m,\u001b[39m sendStreamChunk\u001b[33m,\u001b[39m sendAgentStart\u001b[33m,\u001b[39m sendAgentMessage\u001b[33m,\u001b[39m sendAgentComplete } \u001b[36mfrom\u001b[39m \u001b[32m'./helpers/websocket-helpers'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 18 |\u001b[39m\n     \u001b[90m 19 |\u001b[39m describe(\u001b[32m'Data Flow Integration Tests'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 20 |\u001b[39m   \u001b[36mlet\u001b[39m server\u001b[33m:\u001b[39m \u001b[33mWS\u001b[39m\u001b[33m;\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/basic-integration-data.test.tsx:17:1)\n\nFAIL __tests__/integration/auth-flow-refactored.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './utils/auth-flow-utils' from '__tests__/integration/auth-flow-refactored.test.tsx'\n\n    \u001b[0m \u001b[90m 70 |\u001b[39m   mockNextRouter\n     \u001b[90m 71 |\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'../test-utils/integration-test-setup'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 72 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 73 |\u001b[39m   createLoginComponent\u001b[33m,\u001b[39m\n     \u001b[90m 74 |\u001b[39m   createLogoutComponent\u001b[33m,\u001b[39m\n     \u001b[90m 75 |\u001b[39m   performLoginAction\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/auth-flow-refactored.test.tsx:72:1)\n\nFAIL __tests__/auth/auth-token.test.ts\n  \u25cf Test suite failed to run\n\n    Cannot find module './auth-test-utils' from '__tests__/auth/auth-token.test.ts'\n\n    \u001b[0m \u001b[90m 11 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[32m'./auth-test-setup'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 12 |\u001b[39m \u001b[36mimport\u001b[39m { authService } \u001b[36mfrom\u001b[39m \u001b[32m'@/auth'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 13 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 14 |\u001b[39m   setupAuthTestEnvironment\u001b[33m,\u001b[39m\n     \u001b[90m 15 |\u001b[39m   resetAuthTestMocks\u001b[33m,\u001b[39m\n     \u001b[90m 16 |\u001b[39m   createMockToken\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/auth/auth-token.test.ts:13:1)\n\nFAIL __tests__/integration/analytics-clickhouse.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './utils/infrastructure-test-utils' from '__tests__/integration/analytics-clickhouse.test.tsx'\n\n    \u001b[0m \u001b[90m  9 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[32m'@testing-library/jest-dom'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 10 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mTestProviders\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'../test-utils/providers'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 11 |\u001b[39m \u001b[36mimport\u001b[39m { \n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 12 |\u001b[39m   initInfrastructureTest\u001b[33m,\u001b[39m\n     \u001b[90m 13 |\u001b[39m   setupFetchMock\u001b[33m,\u001b[39m\n     \u001b[90m 14 |\u001b[39m   createMockAnalyticsResponse\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/analytics-clickhouse.test.tsx:11:1)\n\nFAIL __tests__/integration/analytics-realtime.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './utils/infrastructure-test-utils' from '__tests__/integration/analytics-realtime.test.tsx'\n\n    \u001b[0m \u001b[90m  9 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[32m'@testing-library/jest-dom'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 10 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mTestProviders\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'../test-utils/providers'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 11 |\u001b[39m \u001b[36mimport\u001b[39m { \n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 12 |\u001b[39m   initInfrastructureTest\u001b[33m,\u001b[39m\n     \u001b[90m 13 |\u001b[39m   setupFetchMock\u001b[33m,\u001b[39m\n     \u001b[90m 14 |\u001b[39m   simulateWebSocketMessage\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/analytics-realtime.test.tsx:11:1)\n\nFAIL __tests__/auth/auth-security.test.ts\n  \u25cf Test suite failed to run\n\n    Cannot find module './auth-test-utils' from '__tests__/auth/auth-security.test.ts'\n\n    \u001b[0m \u001b[90m  9 |\u001b[39m\n     \u001b[90m 10 |\u001b[39m \u001b[36mimport\u001b[39m { authService } \u001b[36mfrom\u001b[39m \u001b[32m'@/auth'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 11 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 12 |\u001b[39m   setupAuthTestEnvironment\u001b[33m,\u001b[39m\n     \u001b[90m 13 |\u001b[39m   resetAuthTestMocks\u001b[33m,\u001b[39m\n     \u001b[90m 14 |\u001b[39m   createMockAuthConfig\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/auth/auth-security.test.ts:11:1)\n\nFAIL __tests__/auth/auth-logout.test.ts\n  \u25cf Test suite failed to run\n\n    Cannot find module './auth-test-utils' from '__tests__/auth/auth-logout.test.ts'\n\n    \u001b[0m \u001b[90m 11 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[32m'./auth-test-setup'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 12 |\u001b[39m \u001b[36mimport\u001b[39m { authService } \u001b[36mfrom\u001b[39m \u001b[32m'@/auth'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 13 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 14 |\u001b[39m   setupAuthTestEnvironment\u001b[33m,\u001b[39m\n     \u001b[90m 15 |\u001b[39m   resetAuthTestMocks\u001b[33m,\u001b[39m\n     \u001b[90m 16 |\u001b[39m   createMockAuthConfig\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/auth/auth-logout.test.ts:13:1)\n\nFAIL __tests__/services/threadService.test.ts\n  \u25cf Test suite failed to run\n\n    Cannot find module './threadService-helpers' from '__tests__/services/threadService.test.ts'\n\n    \u001b[0m \u001b[90m  7 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mThreadService\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'@/services/threadService'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m  8 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mThreadMetadata\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'@/types/registry'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 10 |\u001b[39m   createMockThread\u001b[33m,\u001b[39m\n     \u001b[90m 11 |\u001b[39m   createMockThreads\u001b[33m,\u001b[39m\n     \u001b[90m 12 |\u001b[39m   createMockMessagesResponse\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/services/threadService.test.ts:9:1)\n\nFAIL __tests__/auth/auth-login.test.ts\n  \u25cf Test suite failed to run\n\n    Cannot find module './auth-test-utils' from '__tests__/auth/auth-login.test.ts'\n\n    \u001b[0m \u001b[90m 11 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[32m'./auth-test-setup'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 12 |\u001b[39m \u001b[36mimport\u001b[39m { authService } \u001b[36mfrom\u001b[39m \u001b[32m'@/auth'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 13 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 14 |\u001b[39m   setupAuthTestEnvironment\u001b[33m,\u001b[39m\n     \u001b[90m 15 |\u001b[39m   resetAuthTestMocks\u001b[33m,\u001b[39m\n     \u001b[90m 16 |\u001b[39m   createMockAuthConfig\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/auth/auth-login.test.ts:13:1)\n\nFAIL __tests__/auth/auth-token-refresh-auto.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './auth-test-utils' from '__tests__/auth/auth-token-refresh-auto.test.tsx'\n\n    \u001b[0m \u001b[90m 15 |\u001b[39m \u001b[36mimport\u001b[39m { logger } \u001b[36mfrom\u001b[39m \u001b[32m'@/lib/logger'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 16 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[32m'@testing-library/jest-dom'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 17 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 18 |\u001b[39m   setupAuthTestEnvironment\u001b[33m,\u001b[39m\n     \u001b[90m 19 |\u001b[39m   createMockAuthConfig\u001b[33m,\u001b[39m\n     \u001b[90m 20 |\u001b[39m   createMockToken\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/auth/auth-token-refresh-auto.test.tsx:17:1)\n\nFAIL __tests__/auth/auth-session-detection.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module './auth-test-utils' from '__tests__/auth/auth-session-detection.test.tsx'\n\n    \u001b[0m \u001b[90m 15 |\u001b[39m \u001b[36mimport\u001b[39m { logger } \u001b[36mfrom\u001b[39m \u001b[32m'@/lib/logger'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 16 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[32m'@testing-library/jest-dom'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 17 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 18 |\u001b[39m   setupAuthTestEnvironment\u001b[33m,\u001b[39m\n     \u001b[90m 19 |\u001b[39m   createMockAuthConfig\u001b[33m,\u001b[39m\n     \u001b[90m 20 |\u001b[39m   createMockToken\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/auth/auth-session-detection.test.tsx:17:1)\n\nFAIL __tests__/integration/initial-state.test.tsx\n  \u25cf Test suite failed to run\n\n    Cannot find module '../helpers/initial-state-storage-helpers' from '__tests__/integration/initial-state.test.tsx'\n\n    \u001b[0m \u001b[90m 19 |\u001b[39m   \u001b[33mWebSocketConnectionComponent\u001b[39m\n     \u001b[90m 20 |\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'../helpers/initial-state-helpers'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 21 |\u001b[39m \u001b[36mimport\u001b[39m { setupStorageTestMocks\u001b[33m,\u001b[39m setupCookieTestMocks } \u001b[36mfrom\u001b[39m \u001b[32m'../helpers/initial-state-storage-helpers'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 22 |\u001b[39m \u001b[36mimport\u001b[39m { setupInitialStateMockComponents } \u001b[36mfrom\u001b[39m \u001b[32m'../helpers/initial-state-mock-components'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n     \u001b[90m 24 |\u001b[39m \u001b[90m// Setup all mocks\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (__tests__/integration/initial-state.test.tsx:21:1)\n\nFAIL __tests__/auth/logout-security.test.tsx (26.463 s)\n  \u25cf Logout Security and Multi-Tab Tests \u203a All Auth Tokens Removed \u203a should remove JWT token from localStorage\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"jwt_token\"\n\n    Number of calls: 0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body />\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m  97 |\u001b[39m       \u001b[36mawait\u001b[39m performLogoutCleanup()\u001b[33m;\u001b[39m\n     \u001b[90m  98 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  99 |\u001b[39m         expect(mockLocalStorage\u001b[33m.\u001b[39mremoveItem)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'jwt_token'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 100 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 101 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 102 |\u001b[39m\u001b[0m\n\n      at __tests__/auth/logout-security.test.tsx:99:45\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Security and Multi-Tab Tests \u203a All Auth Tokens Removed \u203a should remove auth token from localStorage\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"jwt_token\"\n\n    Number of calls: 0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body />\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m  97 |\u001b[39m       \u001b[36mawait\u001b[39m performLogoutCleanup()\u001b[33m;\u001b[39m\n     \u001b[90m  98 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  99 |\u001b[39m         expect(mockLocalStorage\u001b[33m.\u001b[39mremoveItem)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'jwt_token'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 100 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 101 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 102 |\u001b[39m\u001b[0m\n\n      at __tests__/auth/logout-security.test.tsx:99:45\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Security and Multi-Tab Tests \u203a All Auth Tokens Removed \u203a should remove refresh token from localStorage\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"jwt_token\"\n\n    Number of calls: 0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body />\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m  97 |\u001b[39m       \u001b[36mawait\u001b[39m performLogoutCleanup()\u001b[33m;\u001b[39m\n     \u001b[90m  98 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  99 |\u001b[39m         expect(mockLocalStorage\u001b[33m.\u001b[39mremoveItem)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'jwt_token'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 100 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 101 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 102 |\u001b[39m\u001b[0m\n\n      at __tests__/auth/logout-security.test.tsx:99:45\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Security and Multi-Tab Tests \u203a All Auth Tokens Removed \u203a should remove session ID from localStorage\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"jwt_token\"\n\n    Number of calls: 0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body />\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m  97 |\u001b[39m       \u001b[36mawait\u001b[39m performLogoutCleanup()\u001b[33m;\u001b[39m\n     \u001b[90m  98 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  99 |\u001b[39m         expect(mockLocalStorage\u001b[33m.\u001b[39mremoveItem)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'jwt_token'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 100 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 101 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 102 |\u001b[39m\u001b[0m\n\n      at __tests__/auth/logout-security.test.tsx:99:45\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Security and Multi-Tab Tests \u203a LocalStorage Cleared \u203a should remove user preferences from localStorage\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body />\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 134 |\u001b[39m       \u001b[36mawait\u001b[39m performLogoutCleanup()\u001b[33m;\u001b[39m\n     \u001b[90m 135 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 136 |\u001b[39m         expect(mockLocalStorage\u001b[33m.\u001b[39mremoveItem)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 137 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 138 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 139 |\u001b[39m\u001b[0m\n\n      at __tests__/auth/logout-security.test.tsx:136:45\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Security and Multi-Tab Tests \u203a LocalStorage Cleared \u203a should remove cached user data from localStorage\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body />\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 134 |\u001b[39m       \u001b[36mawait\u001b[39m performLogoutCleanup()\u001b[33m;\u001b[39m\n     \u001b[90m 135 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 136 |\u001b[39m         expect(mockLocalStorage\u001b[33m.\u001b[39mremoveItem)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 137 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 138 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 139 |\u001b[39m\u001b[0m\n\n      at __tests__/auth/logout-security.test.tsx:136:45\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Security and Multi-Tab Tests \u203a LocalStorage Cleared \u203a should remove remember me flag from localStorage\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body />\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 134 |\u001b[39m       \u001b[36mawait\u001b[39m performLogoutCleanup()\u001b[33m;\u001b[39m\n     \u001b[90m 135 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 136 |\u001b[39m         expect(mockLocalStorage\u001b[33m.\u001b[39mremoveItem)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 137 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 138 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 139 |\u001b[39m\u001b[0m\n\n      at __tests__/auth/logout-security.test.tsx:136:45\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Security and Multi-Tab Tests \u203a LocalStorage Cleared \u203a should not affect non-auth localStorage items\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body />\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 134 |\u001b[39m       \u001b[36mawait\u001b[39m performLogoutCleanup()\u001b[33m;\u001b[39m\n     \u001b[90m 135 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 136 |\u001b[39m         expect(mockLocalStorage\u001b[33m.\u001b[39mremoveItem)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 137 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 138 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 139 |\u001b[39m\u001b[0m\n\n      at __tests__/auth/logout-security.test.tsx:136:45\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Security and Multi-Tab Tests \u203a Cookies Deleted \u203a should remove auth cookies\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body />\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 171 |\u001b[39m       \u001b[36mawait\u001b[39m performLogoutCleanup()\u001b[33m;\u001b[39m\n     \u001b[90m 172 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 173 |\u001b[39m         expect(mockStore\u001b[33m.\u001b[39mlogout)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 174 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 175 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 176 |\u001b[39m\u001b[0m\n\n      at __tests__/auth/logout-security.test.tsx:173:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Security and Multi-Tab Tests \u203a Cookies Deleted \u203a should remove session cookies\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body />\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 171 |\u001b[39m       \u001b[36mawait\u001b[39m performLogoutCleanup()\u001b[33m;\u001b[39m\n     \u001b[90m 172 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 173 |\u001b[39m         expect(mockStore\u001b[33m.\u001b[39mlogout)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 174 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 175 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 176 |\u001b[39m\u001b[0m\n\n      at __tests__/auth/logout-security.test.tsx:173:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Security and Multi-Tab Tests \u203a Cookies Deleted \u203a should remove remember me cookies\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body />\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 171 |\u001b[39m       \u001b[36mawait\u001b[39m performLogoutCleanup()\u001b[33m;\u001b[39m\n     \u001b[90m 172 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 173 |\u001b[39m         expect(mockStore\u001b[33m.\u001b[39mlogout)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 174 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 175 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 176 |\u001b[39m\u001b[0m\n\n      at __tests__/auth/logout-security.test.tsx:173:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Security and Multi-Tab Tests \u203a Cookies Deleted \u203a should preserve non-auth cookies\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body />\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 171 |\u001b[39m       \u001b[36mawait\u001b[39m performLogoutCleanup()\u001b[33m;\u001b[39m\n     \u001b[90m 172 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 173 |\u001b[39m         expect(mockStore\u001b[33m.\u001b[39mlogout)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 174 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 175 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 176 |\u001b[39m\u001b[0m\n\n      at __tests__/auth/logout-security.test.tsx:173:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Security and Multi-Tab Tests \u203a Browser Back Prevention \u203a should replace history state after logout\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    \u001b[0m \u001b[90m 228 |\u001b[39m         \u001b[36mreturn\u001b[39m \u001b[36mawait\u001b[39m verifyBackPrevention()\u001b[33m;\u001b[39m\n     \u001b[90m 229 |\u001b[39m       })\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 230 |\u001b[39m       expect(mockHistory\u001b[33m.\u001b[39mreplaceState)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 231 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 232 |\u001b[39m\n     \u001b[90m 233 |\u001b[39m     it(\u001b[32m'should prevent navigation to authenticated pages'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.<anonymous> (__tests__/auth/logout-security.test.tsx:230:40)\n\n  \u25cf Logout Security and Multi-Tab Tests \u203a Browser Back Prevention \u203a should prevent navigation to authenticated pages\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: false\n    Received: true\n\n    \u001b[0m \u001b[90m 235 |\u001b[39m         \u001b[36mawait\u001b[39m verifyBackPrevention()\u001b[33m;\u001b[39m\n     \u001b[90m 236 |\u001b[39m       })\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 237 |\u001b[39m       expect(mockStore\u001b[33m.\u001b[39misAuthenticated)\u001b[33m.\u001b[39mtoBe(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 238 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 239 |\u001b[39m\n     \u001b[90m 240 |\u001b[39m     it(\u001b[32m'should clear browser navigation state'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.<anonymous> (__tests__/auth/logout-security.test.tsx:237:41)\n\n  \u25cf Logout Security and Multi-Tab Tests \u203a Browser Back Prevention \u203a should clear browser navigation state\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    \u001b[0m \u001b[90m 242 |\u001b[39m         \u001b[36mreturn\u001b[39m \u001b[36mawait\u001b[39m verifyBackPrevention()\u001b[33m;\u001b[39m\n     \u001b[90m 243 |\u001b[39m       })\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 244 |\u001b[39m       expect(mockHistory\u001b[33m.\u001b[39mreplaceState)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 245 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 246 |\u001b[39m\n     \u001b[90m 247 |\u001b[39m     it(\u001b[32m'should ensure no cached authenticated state'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.<anonymous> (__tests__/auth/logout-security.test.tsx:244:40)\n\n  \u25cf Logout Security and Multi-Tab Tests \u203a Browser Back Prevention \u203a should ensure no cached authenticated state\n\n    expect(received).toBeNull()\n\n    Received: {\"email\": \"test@example.com\", \"full_name\": \"Test User\", \"id\": \"user-123\", \"permissions\": [\"read\", \"write\"], \"role\": \"admin\"}\n\n    \u001b[0m \u001b[90m 249 |\u001b[39m         \u001b[36mawait\u001b[39m verifyBackPrevention()\u001b[33m;\u001b[39m\n     \u001b[90m 250 |\u001b[39m       })\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 251 |\u001b[39m       expect(mockStore\u001b[33m.\u001b[39muser)\u001b[33m.\u001b[39mtoBeNull()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 252 |\u001b[39m       expect(mockStore\u001b[33m.\u001b[39mtoken)\u001b[33m.\u001b[39mtoBeNull()\u001b[33m;\u001b[39m\n     \u001b[90m 253 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 254 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/auth/logout-security.test.tsx:251:30)\n\n  \u25cf Logout Security and Multi-Tab Tests \u203a Security Validation \u203a should not leave sensitive data in memory\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body />\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 259 |\u001b[39m       \u001b[36mawait\u001b[39m performLogoutCleanup()\u001b[33m;\u001b[39m\n     \u001b[90m 260 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 261 |\u001b[39m         expect(mockStore\u001b[33m.\u001b[39mlogout)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 262 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 263 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 264 |\u001b[39m\u001b[0m\n\n      at __tests__/auth/logout-security.test.tsx:261:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Security and Multi-Tab Tests \u203a Security Validation \u203a should clear all authentication artifacts\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body />\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 259 |\u001b[39m       \u001b[36mawait\u001b[39m performLogoutCleanup()\u001b[33m;\u001b[39m\n     \u001b[90m 260 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 261 |\u001b[39m         expect(mockStore\u001b[33m.\u001b[39mlogout)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 262 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 263 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 264 |\u001b[39m\u001b[0m\n\n      at __tests__/auth/logout-security.test.tsx:261:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Security and Multi-Tab Tests \u203a Security Validation \u203a should ensure complete session termination\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body />\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 259 |\u001b[39m       \u001b[36mawait\u001b[39m performLogoutCleanup()\u001b[33m;\u001b[39m\n     \u001b[90m 260 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 261 |\u001b[39m         expect(mockStore\u001b[33m.\u001b[39mlogout)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 262 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 263 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 264 |\u001b[39m\u001b[0m\n\n      at __tests__/auth/logout-security.test.tsx:261:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Security and Multi-Tab Tests \u203a Security Validation \u203a should clear permissions and role data\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body />\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 259 |\u001b[39m       \u001b[36mawait\u001b[39m performLogoutCleanup()\u001b[33m;\u001b[39m\n     \u001b[90m 260 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 261 |\u001b[39m         expect(mockStore\u001b[33m.\u001b[39mlogout)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 262 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 263 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 264 |\u001b[39m\u001b[0m\n\n      at __tests__/auth/logout-security.test.tsx:261:34\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Security and Multi-Tab Tests \u203a Clean Slate for Next Login \u203a should reset all error states\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body />\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 299 |\u001b[39m       \u001b[36mawait\u001b[39m performLogoutCleanup()\u001b[33m;\u001b[39m\n     \u001b[90m 300 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 301 |\u001b[39m         expect(mockStore\u001b[33m.\u001b[39mreset)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 302 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 303 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 304 |\u001b[39m\u001b[0m\n\n      at __tests__/auth/logout-security.test.tsx:301:33\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Security and Multi-Tab Tests \u203a Clean Slate for Next Login \u203a should reset loading states\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body />\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 299 |\u001b[39m       \u001b[36mawait\u001b[39m performLogoutCleanup()\u001b[33m;\u001b[39m\n     \u001b[90m 300 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 301 |\u001b[39m         expect(mockStore\u001b[33m.\u001b[39mreset)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 302 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 303 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 304 |\u001b[39m\u001b[0m\n\n      at __tests__/auth/logout-security.test.tsx:301:33\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Security and Multi-Tab Tests \u203a Clean Slate for Next Login \u203a should clear any cached authentication state\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body />\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 299 |\u001b[39m       \u001b[36mawait\u001b[39m performLogoutCleanup()\u001b[33m;\u001b[39m\n     \u001b[90m 300 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 301 |\u001b[39m         expect(mockStore\u001b[33m.\u001b[39mreset)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 302 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 303 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 304 |\u001b[39m\u001b[0m\n\n      at __tests__/auth/logout-security.test.tsx:301:33\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Security and Multi-Tab Tests \u203a Clean Slate for Next Login \u203a should ensure fresh authentication flow on next login\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body />\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 299 |\u001b[39m       \u001b[36mawait\u001b[39m performLogoutCleanup()\u001b[33m;\u001b[39m\n     \u001b[90m 300 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 301 |\u001b[39m         expect(mockStore\u001b[33m.\u001b[39mreset)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 302 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 303 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 304 |\u001b[39m\u001b[0m\n\n      at __tests__/auth/logout-security.test.tsx:301:33\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Security and Multi-Tab Tests \u203a No Authenticated Content Visible \u203a should set authenticated status to false\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: false\n    Received: true\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body />\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 337 |\u001b[39m       \u001b[36mawait\u001b[39m performLogoutCleanup()\u001b[33m;\u001b[39m\n     \u001b[90m 338 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 339 |\u001b[39m         expect(mockStore\u001b[33m.\u001b[39misAuthenticated)\u001b[33m.\u001b[39mtoBe(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 340 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 341 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 342 |\u001b[39m\u001b[0m\n\n      at __tests__/auth/logout-security.test.tsx:339:43\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Security and Multi-Tab Tests \u203a No Authenticated Content Visible \u203a should clear user identity information\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: false\n    Received: true\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body />\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 337 |\u001b[39m       \u001b[36mawait\u001b[39m performLogoutCleanup()\u001b[33m;\u001b[39m\n     \u001b[90m 338 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 339 |\u001b[39m         expect(mockStore\u001b[33m.\u001b[39misAuthenticated)\u001b[33m.\u001b[39mtoBe(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 340 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 341 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 342 |\u001b[39m\u001b[0m\n\n      at __tests__/auth/logout-security.test.tsx:339:43\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Security and Multi-Tab Tests \u203a No Authenticated Content Visible \u203a should clear role and permissions\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: false\n    Received: true\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body />\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 337 |\u001b[39m       \u001b[36mawait\u001b[39m performLogoutCleanup()\u001b[33m;\u001b[39m\n     \u001b[90m 338 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 339 |\u001b[39m         expect(mockStore\u001b[33m.\u001b[39misAuthenticated)\u001b[33m.\u001b[39mtoBe(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 340 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 341 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 342 |\u001b[39m\u001b[0m\n\n      at __tests__/auth/logout-security.test.tsx:339:43\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Logout Security and Multi-Tab Tests \u203a No Authenticated Content Visible \u203a should ensure no sensitive data remains in DOM\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: false\n    Received: true\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body />\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 337 |\u001b[39m       \u001b[36mawait\u001b[39m performLogoutCleanup()\u001b[33m;\u001b[39m\n     \u001b[90m 338 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 339 |\u001b[39m         expect(mockStore\u001b[33m.\u001b[39misAuthenticated)\u001b[33m.\u001b[39mtoBe(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 340 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 341 |\u001b[39m     }\u001b[33m;\u001b[39m\n     \u001b[90m 342 |\u001b[39m\u001b[0m\n\n      at __tests__/auth/logout-security.test.tsx:339:43\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n\nTest Suites: 114 failed, 49 passed, 163 total\nTests:       504 failed, 3 skipped, 503 passed, 1010 total\nSnapshots:   0 total\nTime:        30.778 s\nRan all test suites.\n"
    },
    "dev_launcher": {
      "success": false,
      "duration": 42.17086362838745,
      "output": "============================= test session starts =============================\nplatform win32 -- Python 3.12.4, pytest-8.4.1, pluggy-1.6.0 -- C:\\Users\\antho\\miniconda3\\python.exe\ncachedir: .pytest_cache\nmetadata: {'Python': '3.12.4', 'Platform': 'Windows-11-10.0.26100-SP0', 'Packages': {'pytest': '8.4.1', 'pluggy': '1.6.0'}, 'Plugins': {'anyio': '4.9.0', 'Faker': '37.5.3', 'langsmith': '0.4.15', 'asyncio': '1.1.0', 'cov': '6.2.1', 'mock': '3.14.1', 'xdist': '3.8.0', 'html': '4.1.1', 'json-report': '1.5.0', 'metadata': '3.1.1', 'timeout': '2.4.0', 'typeguard': '4.4.4'}}\nrootdir: C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\nconfigfile: pytest.ini\nplugins: anyio-4.9.0, Faker-37.5.3, langsmith-0.4.15, asyncio-1.1.0, cov-6.2.1, mock-3.14.1, xdist-3.8.0, html-4.1.1, json-report-1.5.0, metadata-3.1.1, timeout-2.4.0, typeguard-4.4.4\nasyncio: mode=Mode.AUTO, asyncio_default_fixture_loop_scope=function, asyncio_default_test_loop_scope=function\ntimeout: 300.0s\ntimeout method: thread\ntimeout func_only: False\ncollecting ... collected 22 items\n\ntests/e2e/test_dev_launcher_real_startup.py::TestDevLauncherRealStartup::test_real_dev_launcher_startup_sequence SKIPPED [  4%]\ntests/e2e/test_dev_launcher_real_startup.py::TestDevLauncherRealStartup::test_service_startup_order_validation FAILED [  9%]\ntests/e2e/test_dev_launcher_real_startup.py::TestDevLauncherRealStartup::test_health_endpoint_response_validation FAILED [ 13%]\ntests/integration/test_dev_launcher_utilities_validation.py::TestDevLauncherUtilities::test_launcher_config_creation PASSED [ 18%]\ntests/integration/test_dev_launcher_utilities_validation.py::TestDevLauncherUtilities::test_launcher_config_validation PASSED [ 22%]\ntests/integration/test_dev_launcher_utilities_validation.py::TestDevLauncherUtilities::test_launcher_creation PASSED [ 27%]\ntests/integration/test_dev_launcher_utilities_validation.py::TestDevLauncherUtilities::test_port_availability_check PASSED [ 31%]\ntests/integration/test_dev_launcher_utilities_validation.py::TestDevLauncherUtilities::test_config_to_dict PASSED [ 36%]\ntests/integration/test_dev_launcher_utilities_validation.py::TestDevLauncherUtilities::test_config_emoji_support PASSED [ 40%]\ntests/integration/test_dev_launcher_utilities_validation.py::TestDevLauncherUtilities::test_config_logging PASSED [ 45%]\ntests/integration/test_dev_launcher_utilities_validation.py::TestDevLauncherUtilities::test_project_root_detection PASSED [ 50%]\ntests/integration/test_dev_launcher_utilities_validation.py::TestDevLauncherUtilities::test_path_resolution PASSED [ 54%]\ntests/integration/test_dev_launcher_utilities_validation.py::TestDevLauncherUtilities::test_config_show_methods PASSED [ 59%]\ntests/integration/test_dev_launcher_utilities_validation.py::TestDevLauncherIntegration::test_launcher_initialization_phase PASSED [ 63%]\ntests/integration/test_dev_launcher_utilities_validation.py::TestDevLauncherIntegration::test_launcher_config_access PASSED [ 68%]\ntests/test_system_startup.py::TestSystemStartup::test_dev_launcher_help PASSED [ 72%]\ntests/test_system_startup.py::TestSystemStartup::test_dev_launcher_list_services PASSED [ 77%]\ntests/test_system_startup.py::TestSystemStartup::test_dev_launcher_minimal_mode PASSED [ 81%]\ntests/test_system_startup.py::TestSystemStartup::test_backend_import PASSED [ 86%]\ntests/test_system_startup.py::TestSystemStartup::test_npm_detection PASSED [ 90%]\ntests/test_system_startup.py::TestSystemStartup::test_redis_connectivity PASSED [ 95%]\ntests/test_system_startup.py::TestSystemStartup::test_database_initialization PASSED [100%]\n\n================================== FAILURES ===================================\n______ TestDevLauncherRealStartup.test_service_startup_order_validation _______\ntests\\e2e\\test_dev_launcher_real_startup.py:379: in test_service_startup_order_validation\n    assert startup_success, \"Service startup failed\"\nE   AssertionError: Service startup failed\nE   assert False\n----------------------------- Captured log setup ------------------------------\nDEBUG    asyncio:proactor_events.py:634 Using proactor: IocpProactor\nINFO     dev_launcher.service_config:service_config.py:350 Configuration loaded from C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\.dev_services.json\nINFO     dev_launcher.service_config:service_config.py:515 Loaded existing service configuration\n---------------------------- Captured stdout call -----------------------------\n\\n=== TESTING SERVICE STARTUP ORDER ===\\n\\U0001f50d DISCOVER | POSTGRESQL: sqlite+aiosqlite:///:memory:\\n\\U0001f50d DISCOVER | CLICKHOUSE: clickhouse://default:***@localhost:8123/netra_dev\\n\\U0001f50d DISCOVER | REDIS: redis://localhost:6379/0\\n\\U0001f50d WEBSOCKET | Discovered endpoint: backend_ws -> ws://localhost:8000/ws\\n\\u274c auth service NOT bound to port 8001\\n\\u2705 backend service bound to port 8000\\n\\u274c frontend service NOT bound to port 3000\n------------------------------ Captured log call ------------------------------\nINFO     dev_launcher.health_monitor:health_monitor.py:139 HealthMonitor initialized (check_interval: 30s)\nINFO     dev_launcher.health_monitor:health_monitor.py:141 Windows process verification enabled\nINFO     dev_launcher.process_manager:process_manager.py:58 ProcessManager initialized for win32\nINFO     dev_launcher.process_manager:process_manager.py:60 Enhanced Windows process tree management enabled\nINFO     dev_launcher.database_connector:database_connector.py:130 Discovered 3 database connections\nINFO     dev_launcher.websocket_validator:websocket_validator.py:78 Discovered 1 WebSocket endpoints\nINFO     dev_launcher.launcher:launcher.py:165 Signal handlers registered for graceful shutdown\n_____ TestDevLauncherRealStartup.test_health_endpoint_response_validation _____\ntests\\e2e\\test_dev_launcher_real_startup.py:404: in test_health_endpoint_response_validation\n    assert startup_success, \"Failed to start services for health check test\"\nE   AssertionError: Failed to start services for health check test\nE   assert False\n----------------------------- Captured log setup ------------------------------\nDEBUG    asyncio:proactor_events.py:634 Using proactor: IocpProactor\nINFO     dev_launcher.service_config:service_config.py:350 Configuration loaded from C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\.dev_services.json\nINFO     dev_launcher.service_config:service_config.py:515 Loaded existing service configuration\n---------------------------- Captured stdout call -----------------------------\n\\n=== TESTING HEALTH ENDPOINT RESPONSES ===\\n\\U0001f50d DISCOVER | POSTGRESQL: sqlite+aiosqlite:///:memory:\\n\\U0001f50d DISCOVER | CLICKHOUSE: clickhouse://default:***@localhost:8123/netra_dev\\n\\U0001f50d DISCOVER | REDIS: redis://localhost:6379/0\\n\\U0001f50d WEBSOCKET | Discovered endpoint: backend_ws -> ws://localhost:8000/ws\\n\\u274c auth service NOT bound to port 8001\\n\\u2705 backend service bound to port 8000\\n\\u274c frontend service NOT bound to port 3000\n------------------------------ Captured log call ------------------------------\nINFO     dev_launcher.health_monitor:health_monitor.py:139 HealthMonitor initialized (check_interval: 30s)\nINFO     dev_launcher.health_monitor:health_monitor.py:141 Windows process verification enabled\nINFO     dev_launcher.process_manager:process_manager.py:58 ProcessManager initialized for win32\nINFO     dev_launcher.process_manager:process_manager.py:60 Enhanced Windows process tree management enabled\nINFO     dev_launcher.database_connector:database_connector.py:130 Discovered 3 database connections\nINFO     dev_launcher.websocket_validator:websocket_validator.py:78 Discovered 1 WebSocket endpoints\nINFO     dev_launcher.launcher:launcher.py:165 Signal handlers registered for graceful shutdown\n=========================== short test summary info ===========================\nSKIPPED [1] tests\\e2e\\test_dev_launcher_real_startup.py:208: Port 8000 (backend) is in use and cannot be freed\nFAILED tests/e2e/test_dev_launcher_real_startup.py::TestDevLauncherRealStartup::test_service_startup_order_validation - AssertionError: Service startup failed\nassert False\nFAILED tests/e2e/test_dev_launcher_real_startup.py::TestDevLauncherRealStartup::test_health_endpoint_response_validation - AssertionError: Failed to start services for health check test\nassert False\n============= 2 failed, 19 passed, 1 skipped, 1 warning in 37.76s =============\n",
      "errors": "C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\_pytest\\unraisableexception.py:33: RuntimeWarning: coroutine 'DevLauncher.run' was never awaited\n  gc.collect()\nRuntimeWarning: Enable tracemalloc to get the object allocation traceback\n"
    }
  },
  "overall_success": false,
  "total_duration": 84.28619861602783
}