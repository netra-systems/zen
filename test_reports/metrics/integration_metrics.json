{
  "timestamp": "2025-08-14T06:28:18.290658",
  "level": "integration",
  "metrics": {
    "total_tests": 9,
    "passed": 5,
    "failed": 2,
    "coverage": null
  },
  "results": {
    "backend": {
      "status": "failed",
      "duration": 67.34710264205933,
      "exit_code": 2,
      "output": "Loaded test environment from C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\.env.test\n================================================================================\nNETRA AI PLATFORM - BACKEND TEST RUNNER\n================================================================================\nTest Configuration:\n  Category: integration\n  Parallel: 4\n  Coverage: enabled\n  Fail Fast: enabled\n  Environment: testing\n\nRunning command:\n  pytest integration_tests app/tests/routes -vv -n 4 -x --maxfail=1 --cov=app --cov-report=html:reports/coverage/html --cov-report=term-missing --cov-report=json:reports/coverage/coverage.json --cov-fail-under=70 -m not real_services --tb=short --asyncio-mode=auto --color=yes --strict-markers --disable-warnings -p no:warnings\n================================================================================\n\u001b[1m============================= test session starts =============================\u001b[0m\nplatform win32 -- Python 3.12.4, pytest-8.4.1, pluggy-1.6.0 -- C:\\Users\\antho\\miniconda3\\python.exe\ncachedir: .pytest_cache\nmetadata: {'Python': '3.12.4', 'Platform': 'Windows-11-10.0.26100-SP0', 'Packages': {'pytest': '8.4.1', 'pluggy': '1.6.0'}, 'Plugins': {'anyio': '4.9.0', 'Faker': '37.4.2', 'langsmith': '0.4.10', 'asyncio': '0.21.1', 'cov': '6.2.1', 'html': '4.1.1', 'json-report': '1.5.0', 'metadata': '3.1.1', 'mock': '3.14.1', 'timeout': '2.4.0', 'xdist': '3.8.0', 'typeguard': '4.4.4'}}\nrootdir: C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\nconfigfile: pytest.ini\nplugins: anyio-4.9.0, Faker-37.4.2, langsmith-0.4.10, asyncio-0.21.1, cov-6.2.1, html-4.1.1, json-report-1.5.0, metadata-3.1.1, mock-3.14.1, timeout-2.4.0, xdist-3.8.0, typeguard-4.4.4\nasyncio: mode=Mode.AUTO\ncreated: 4/4 workers\n4 workers [86 items]\n\nscheduling tests via LoadScheduling\n\nintegration_tests/test_health.py::test_ready_endpoint_clickhouse_failure \nintegration_tests/test_app.py::test_read_main \nintegration_tests/test_generation_service.py::test_save_and_get_corpus \napp/tests/routes/test_apex_optimizer_agent_route.py::test_apex_optimizer_agent[I need to reduce costs but keep quality the same. For feature X, I can accept a latency of 500ms. For feature Y, I need to maintain the current latency of 200ms.] \n[gw2]\u001b[36m [  1%] \u001b[0m\u001b[31mERROR\u001b[0m integration_tests/test_health.py::test_ready_endpoint_clickhouse_failure \n[gw3]\u001b[36m [  2%] \u001b[0m\u001b[32mPASSED\u001b[0m integration_tests/test_generation_service.py::test_save_and_get_corpus \nintegration_tests/test_generation_service.py::test_run_synthetic_data_generation_job_e2e \n[gw3]\u001b[36m [  3%] \u001b[0m\u001b[31mFAILED\u001b[0m integration_tests/test_generation_service.py::test_run_synthetic_data_generation_job_e2e \n[gw1]\u001b[36m [  4%] \u001b[0m\u001b[32mPASSED\u001b[0m app/tests/routes/test_apex_optimizer_agent_route.py::test_apex_optimizer_agent[I need to reduce costs but keep quality the same. For feature X, I can accept a latency of 500ms. For feature Y, I need to maintain the current latency of 200ms.] \napp/tests/routes/test_api_routes_21_30.py::TestAdminRoute::test_admin_endpoint_requires_authentication \n[gw1]\u001b[36m [  5%] \u001b[0m\u001b[32mPASSED\u001b[0m app/tests/routes/test_api_routes_21_30.py::TestAdminRoute::test_admin_endpoint_requires_authentication \napp/tests/routes/test_api_routes_21_30.py::TestAdminRoute::test_admin_role_verification \n[gw1]\u001b[36m [  6%] \u001b[0m\u001b[32mPASSED\u001b[0m app/tests/routes/test_api_routes_21_30.py::TestAdminRoute::test_admin_role_verification \napp/tests/routes/test_api_routes_21_30.py::TestAdminRoute::test_admin_user_management \n[gw1]\u001b[36m [  8%] \u001b[0m\u001b[32mPASSED\u001b[0m app/tests/routes/test_api_routes_21_30.py::TestAdminRoute::test_admin_user_management \napp/tests/routes/test_api_routes_21_30.py::TestAgentRoute::test_agent_message_processing \n[gw1]\u001b[36m [  9%] \u001b[0m\u001b[31mFAILED\u001b[0m app/tests/routes/test_api_routes_21_30.py::TestAgentRoute::test_agent_message_processing \n[gw0]\u001b[36m [ 10%] \u001b[0m\u001b[31mERROR\u001b[0m integration_tests/test_app.py::test_read_main Loaded .env file from C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\.env\n\n\n=================================== ERRORS ====================================\n\u001b[31m\u001b[1m__________ ERROR at setup of test_ready_endpoint_clickhouse_failure ___________\u001b[0m\n[gw2] win32 -- Python 3.12.4 C:\\Users\\antho\\miniconda3\\python.exe\nfile C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\integration_tests\\test_health.py, line 37\n  def test_ready_endpoint_clickhouse_failure(client: TestClient):\nE       fixture 'client' not found\n>       available fixtures: _session_faker, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cleanup_dependency_overrides, cov, doctest_namespace, event_loop, extra, extras, faker, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, include_metadata_in_junit_xml, json_metadata, metadata, mocker, module_mocker, monkeypatch, no_cover, package_mocker, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, testrun_uid, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory, worker_id\n>       use 'pytest --fixtures [testpath]' for help on them.\n\nC:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\integration_tests\\test_health.py:37\n\u001b[31m\u001b[1m______________________ ERROR at setup of test_read_main _______________________\u001b[0m\n[gw0] win32 -- Python 3.12.4 C:\\Users\\antho\\miniconda3\\python.exe\n\u001b[1m\u001b[31mintegration_tests\\test_app.py\u001b[0m:15: in test_client\n    \u001b[0m\u001b[94mwith\u001b[39;49;00m TestClient(app=app, base_url=\u001b[33m\"\u001b[39;49;00m\u001b[33mhttp://test\u001b[39;49;00m\u001b[33m\"\u001b[39;49;00m) \u001b[94mas\u001b[39;49;00m c:\u001b[90m\u001b[39;49;00m\n\u001b[1m\u001b[31m..\\..\\..\\..\\miniconda3\\Lib\\site-packages\\starlette\\testclient.py\u001b[0m:694: in __enter__\n    \u001b[0mportal.call(\u001b[96mself\u001b[39;49;00m.wait_startup)\u001b[90m\u001b[39;49;00m\n\u001b[1m\u001b[31m..\\..\\..\\..\\AppData\\Roaming\\Python\\Python312\\site-packages\\anyio\\from_thread.py\u001b[0m:290: in call\n    \u001b[0m\u001b[94mreturn\u001b[39;49;00m cast(T_Retval, \u001b[96mself\u001b[39;49;00m.start_task_soon(func, *args).result())\u001b[90m\u001b[39;49;00m\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\u001b[90m\u001b[39;49;00m\n\u001b[1m\u001b[31m..\\..\\..\\..\\miniconda3\\Lib\\concurrent\\futures\\_base.py\u001b[0m:454: in result\n    \u001b[0m\u001b[94mraise\u001b[39;49;00m CancelledError()\u001b[90m\u001b[39;49;00m\n\u001b[1m\u001b[31mE   concurrent.futures._base.CancelledError\u001b[0m\n---------------------------- Captured stderr setup ----------------------------\n2025-08-14 06:28:08.495 | ERROR    | app.core.unified_logging:_log:315 | Critical startup checks failed:\n2025-08-14 06:28:08.511 | ERROR    | app.core.unified_logging:_log:315 |   - database_connection: Database check failed: password=REDACTED failed for user \"test\"\n2025-08-14 06:28:08.511 | ERROR    | app.core.unified_logging:_log:315 |   - llm_providers: No LLM providers available\n2025-08-14 06:28:08.511 | CRITICAL | app.main:lifespan:172 | CRITICAL: Startup checks failed: Startup failed: 2 critical checks failed\n2025-08-14 06:28:08.573 | ERROR    | logging:callHandlers:1762 | unhandled exception during asyncio.run() shutdown\ntask: <Task finished name='anyio.from_thread.start_blocking_portal.<locals>.run_portal' coro=<start_blocking_portal.<locals>.run_portal() done, defined at C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\anyio\\_backends\\_asyncio.py:2291> exception=BaseExceptionGroup('unhandled errors in a TaskGroup', [SystemExit(1)])>\nTraceback (most recent call last):\n  File \"C:\\Users\\antho\\miniconda3\\Lib\\threading.py\", line 1030, in _bootstrap\n    self._bootstrap_inner()\n  File \"C:\\Users\\antho\\miniconda3\\Lib\\threading.py\", line 1073, in _bootstrap_inner\n    self.run()\n  File \"C:\\Users\\antho\\miniconda3\\Lib\\threading.py\", line 1010, in run\n    self._target(*self._args, **self._kwargs)\n  File \"C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\anyio\\from_thread.py\", line 481, in run_blocking_portal\n    _eventloop.run(\n  File \"C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\anyio\\_core\\_eventloop.py\", line 74, in run\n    return async_backend.run(func, args, {}, backend_options)\n  File \"C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\anyio\\_backends\\_asyncio.py\", line 2309, in run\n    with Runner(debug=debug, loop_factory=loop_factory) as runner:\n  File \"C:\\Users\\antho\\miniconda3\\Lib\\asyncio\\runners.py\", line 62, in __exit__\n    self.close()\n  File \"C:\\Users\\antho\\miniconda3\\Lib\\asyncio\\runners.py\", line 70, in close\n    _cancel_all_tasks(loop)\n  File \"C:\\Users\\antho\\miniconda3\\Lib\\asyncio\\runners.py\", line 211, in _cancel_all_tasks\n    loop.call_exception_handler({\n  File \"C:\\Users\\antho\\miniconda3\\Lib\\asyncio\\base_events.py\", line 687, in run_until_complete\n    return future.result()\n  File \"C:\\Users\\antho\\miniconda3\\Lib\\asyncio\\windows_events.py\", line 335, in run_forever\n    self._self_reading_future = None\n  File \"C:\\Users\\antho\\miniconda3\\Lib\\asyncio\\base_events.py\", line 649, in run_forever\n    sys.set_asyncgen_hooks(*old_agen_hooks)\n  File \"C:\\Users\\antho\\miniconda3\\Lib\\asyncio\\base_events.py\", line 1988, in _run_once\n    handle = None  # Needed to break cycles when an exception occurs.\n  File \"C:\\Users\\antho\\miniconda3\\Lib\\asyncio\\events.py\", line 103, in _run\n    self = None  # Needed to break cycles when an exception occurs.\n> File \"C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\anyio\\_backends\\_asyncio.py\", line 2298, in wrapper\n    return await func(*args)\n  File \"C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\anyio\\from_thread.py\", line 474, in run_portal\n    async with BlockingPortal() as portal_:\n  File \"C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\anyio\\from_thread.py\", line 168, in __aexit__\n    return await self._task_group.__aexit__(exc_type, exc_val, exc_tb)\n  File \"C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\anyio\\_backends\\_asyncio.py\", line 772, in __aexit__\n    raise BaseExceptionGroup(\nBaseExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)\n----------------------------- Captured log setup ------------------------------\n\u001b[35mDEBUG   \u001b[0m asyncio:proactor_events.py:634 Using proactor: IocpProactor\n\u001b[32mINFO    \u001b[0m app.utils.multiprocessing_cleanup:multiprocessing_cleanup.py:140 Multiprocessing configured with method: spawn\n\u001b[32mINFO    \u001b[0m app.utils.multiprocessing_cleanup:multiprocessing_cleanup.py:108 Multiprocessing resources cleaned up\n\u001b[31m\u001b[1mERROR   \u001b[0m asyncio:base_events.py:1821 unhandled exception during asyncio.run() shutdown\ntask: <Task finished name='anyio.from_thread.start_blocking_portal.<locals>.run_portal' coro=<start_blocking_portal.<locals>.run_portal() done, defined at C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\anyio\\_backends\\_asyncio.py:2291> exception=BaseExceptionGroup('unhandled errors in a TaskGroup', [SystemExit(1)])>\n  + Exception Group Traceback (most recent call last):\n  |   File \"C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\anyio\\_backends\\_asyncio.py\", line 2298, in wrapper\n  |     return await func(*args)\n  |            ^^^^^^^^^^^^^^^^^\n  |   File \"C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\anyio\\from_thread.py\", line 474, in run_portal\n  |     async with BlockingPortal() as portal_:\n  |   File \"C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\anyio\\from_thread.py\", line 168, in __aexit__\n  |     return await self._task_group.__aexit__(exc_type, exc_val, exc_tb)\n  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  |   File \"C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\anyio\\_backends\\_asyncio.py\", line 772, in __aexit__\n  |     raise BaseExceptionGroup(\n  | BaseExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)\n  +-+---------------- 1 ----------------\n    | Traceback (most recent call last):\n    |   File \"C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\app\\main.py\", line 170, in lifespan\n    |     await run_startup_checks(app)\n    |   File \"C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\app\\startup_checks\\utils.py\", line 23, in run_startup_checks\n    |     raise RuntimeError(f\"Startup failed: {results['failed_critical']} critical checks failed\")\n    | RuntimeError: Startup failed: 2 critical checks failed\n    | \n    | During handling of the above exception, another exception occurred:\n    | \n    | Traceback (most recent call last):\n    |   File \"C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\anyio\\_backends\\_asyncio.py\", line 2310, in run\n    |     return runner.run(wrapper())\n    |            ^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\asyncio\\runners.py\", line 118, in run\n    |     return self._loop.run_until_complete(task)\n    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\asyncio\\base_events.py\", line 674, in run_until_complete\n    |     self.run_forever()\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\asyncio\\windows_events.py\", line 322, in run_forever\n    |     super().run_forever()\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\asyncio\\base_events.py\", line 641, in run_forever\n    |     self._run_once()\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\asyncio\\base_events.py\", line 1987, in _run_once\n    |     handle._run()\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\asyncio\\events.py\", line 88, in _run\n    |     self._context.run(self._callback, *self._args)\n    |   File \"C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\anyio\\from_thread.py\", line 221, in _call_func\n    |     retval = await retval_or_awaitable\n    |              ^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\site-packages\\starlette\\testclient.py\", line 710, in lifespan\n    |     await self.app(scope, self.stream_receive.receive, self.stream_send.send)\n    |   File \"C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\fastapi\\applications.py\", line 1054, in __call__\n    |     await super().__call__(scope, receive, send)\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\site-packages\\starlette\\applications.py\", line 113, in __call__\n    |     await self.middleware_stack(scope, receive, send)\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\site-packages\\starlette\\middleware\\errors.py\", line 151, in __call__\n    |     await self.app(scope, receive, send)\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\site-packages\\starlette\\middleware\\sessions.py\", line 40, in __call__\n    |     await self.app(scope, receive, send)\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 103, in __call__\n    |     await self.app(scope, receive, send)\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 103, in __call__\n    |     await self.app(scope, receive, send)\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 103, in __call__\n    |     await self.app(scope, receive, send)\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 77, in __call__\n    |     await self.app(scope, receive, send)\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 49, in __call__\n    |     await self.app(scope, receive, send)\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    |     await self.middleware_stack(scope, receive, send)\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\site-packages\\starlette\\routing.py\", line 725, in app\n    |     await self.lifespan(scope, receive, send)\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\site-packages\\starlette\\routing.py\", line 694, in lifespan\n    |     async with self.lifespan_context(app) as maybe_state:\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\contextlib.py\", line 210, in __aenter__\n    |     return await anext(self.gen)\n    |            ^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\fastapi\\routing.py\", line 134, in merged_lifespan\n    |     async with original_context(app) as maybe_original_state:\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\contextlib.py\", line 210, in __aenter__\n    |     return await anext(self.gen)\n    |            ^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\fastapi\\routing.py\", line 134, in merged_lifespan\n    |     async with original_context(app) as maybe_original_state:\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\contextlib.py\", line 210, in __aenter__\n    |     return await anext(self.gen)\n    |            ^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\fastapi\\routing.py\", line 134, in merged_lifespan\n    |     async with original_context(app) as maybe_original_state:\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\contextlib.py\", line 210, in __aenter__\n    |     return await anext(self.gen)\n    |            ^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\fastapi\\routing.py\", line 134, in merged_lifespan\n    |     async with original_context(app) as maybe_original_state:\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\contextlib.py\", line 210, in __aenter__\n    |     return await anext(self.gen)\n    |            ^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\fastapi\\routing.py\", line 134, in merged_lifespan\n    |     async with original_context(app) as maybe_original_state:\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\contextlib.py\", line 210, in __aenter__\n    |     return await anext(self.gen)\n    |            ^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\fastapi\\routing.py\", line 134, in merged_lifespan\n    |     async with original_context(app) as maybe_original_state:\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\contextlib.py\", line 210, in __aenter__\n    |     return await anext(self.gen)\n    |            ^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\fastapi\\routing.py\", line 134, in merged_lifespan\n    |     async with original_context(app) as maybe_original_state:\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\contextlib.py\", line 210, in __aenter__\n    |     return await anext(self.gen)\n    |            ^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\fastapi\\routing.py\", line 134, in merged_lifespan\n    |     async with original_context(app) as maybe_original_state:\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\contextlib.py\", line 210, in __aenter__\n    |     return await anext(self.gen)\n    |            ^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\fastapi\\routing.py\", line 134, in merged_lifespan\n    |     async with original_context(app) as maybe_original_state:\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\contextlib.py\", line 210, in __aenter__\n    |     return await anext(self.gen)\n    |            ^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\fastapi\\routing.py\", line 134, in merged_lifespan\n    |     async with original_context(app) as maybe_original_state:\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\contextlib.py\", line 210, in __aenter__\n    |     return await anext(self.gen)\n    |            ^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\fastapi\\routing.py\", line 134, in merged_lifespan\n    |     async with original_context(app) as maybe_original_state:\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\contextlib.py\", line 210, in __aenter__\n    |     return await anext(self.gen)\n    |            ^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\fastapi\\routing.py\", line 134, in merged_lifespan\n    |     async with original_context(app) as maybe_original_state:\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\contextlib.py\", line 210, in __aenter__\n    |     return await anext(self.gen)\n    |            ^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\fastapi\\routing.py\", line 134, in merged_lifespan\n    |     async with original_context(app) as maybe_original_state:\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\contextlib.py\", line 210, in __aenter__\n    |     return await anext(self.gen)\n    |            ^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\fastapi\\routing.py\", line 134, in merged_lifespan\n    |     async with original_context(app) as maybe_original_state:\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\contextlib.py\", line 210, in __aenter__\n    |     return await anext(self.gen)\n    |            ^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\fastapi\\routing.py\", line 134, in merged_lifespan\n    |     async with original_context(app) as maybe_original_state:\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\contextlib.py\", line 210, in __aenter__\n    |     return await anext(self.gen)\n    |            ^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\fastapi\\routing.py\", line 134, in merged_lifespan\n    |     async with original_context(app) as maybe_original_state:\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\contextlib.py\", line 210, in __aenter__\n    |     return await anext(self.gen)\n    |            ^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\fastapi\\routing.py\", line 134, in merged_lifespan\n    |     async with original_context(app) as maybe_original_state:\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\contextlib.py\", line 210, in __aenter__\n    |     return await anext(self.gen)\n    |            ^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\app\\main.py\", line 182, in lifespan\n    |     sys.exit(1)\n    | SystemExit: 1\n    +------------------------------------\n================================== FAILURES ===================================\n\u001b[31m\u001b[1m_________________ test_run_synthetic_data_generation_job_e2e __________________\u001b[0m\n[gw3] win32 -- Python 3.12.4 C:\\Users\\antho\\miniconda3\\python.exe\n\u001b[1m\u001b[31mintegration_tests\\test_generation_service.py\u001b[0m:178: in test_run_synthetic_data_generation_job_e2e\n    \u001b[0m\u001b[94massert\u001b[39;49;00m job_status \u001b[95mis\u001b[39;49;00m \u001b[95mnot\u001b[39;49;00m \u001b[94mNone\u001b[39;49;00m\u001b[90m\u001b[39;49;00m\n\u001b[1m\u001b[31mE   assert None is not None\u001b[0m\n---------------------------- Captured stderr call -----------------------------\nC:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\integration_tests\\test_generation_service.py:153: RuntimeWarning: coroutine 'JobStore.set' was never awaited\n  job_store.set(\"test\", {})\nRuntimeWarning: Enable tracemalloc to get the object allocation traceback\n2025-08-14 06:28:07.563 | ERROR    | app.ws_manager_messaging:_validate_dict_message:69 | Message validation failed: Message missing 'type' field\n2025-08-14 06:28:07.579 | ERROR    | app.ws_manager_messaging:_validate_dict_message:69 | Message validation failed: Message missing 'type' field\n2025-08-14 06:28:07.579 | ERROR    | app.ws_manager_messaging:_validate_dict_message:69 | Message validation failed: Message missing 'type' field\n2025-08-14 06:28:07.595 | ERROR    | app.ws_manager_messaging:_validate_dict_message:69 | Message validation failed: Message missing 'type' field\n---------------------------- Captured log teardown ----------------------------\n\u001b[35mDEBUG   \u001b[0m asyncio:proactor_events.py:634 Using proactor: IocpProactor\n\u001b[31m\u001b[1m________________ TestAgentRoute.test_agent_message_processing _________________\u001b[0m\n[gw1] win32 -- Python 3.12.4 C:\\Users\\antho\\miniconda3\\python.exe\n\u001b[1m\u001b[31mapp\\tests\\routes\\test_api_routes_21_30.py\u001b[0m:66: in test_agent_message_processing\n    \u001b[0m\u001b[94mwith\u001b[39;49;00m patch(\u001b[33m'\u001b[39;49;00m\u001b[33mapp.services.agent_service.process_message\u001b[39;49;00m\u001b[33m'\u001b[39;49;00m) \u001b[94mas\u001b[39;49;00m mock_process:\u001b[90m\u001b[39;49;00m\n\u001b[1m\u001b[31m..\\..\\..\\..\\miniconda3\\Lib\\unittest\\mock.py\u001b[0m:1458: in __enter__\n    \u001b[0moriginal, local = \u001b[96mself\u001b[39;49;00m.get_original()\u001b[90m\u001b[39;49;00m\n                      ^^^^^^^^^^^^^^^^^^^\u001b[90m\u001b[39;49;00m\n\u001b[1m\u001b[31m..\\..\\..\\..\\miniconda3\\Lib\\unittest\\mock.py\u001b[0m:1431: in get_original\n    \u001b[0m\u001b[94mraise\u001b[39;49;00m \u001b[96mAttributeError\u001b[39;49;00m(\u001b[90m\u001b[39;49;00m\n\u001b[1m\u001b[31mE   AttributeError: <module 'app.services.agent_service' from 'C:\\\\Users\\\\antho\\\\OneDrive\\\\Desktop\\\\Netra\\\\netra-core-generation-1\\\\app\\\\services\\\\agent_service.py'> does not have the attribute 'process_message'\u001b[0m\n\u001b[36m\u001b[1m=========================== short test summary info ===========================\u001b[0m\n\u001b[31mFAILED\u001b[0m integration_tests/test_generation_service.py::\u001b[1mtest_run_synthetic_data_generation_job_e2e\u001b[0m - assert None is not None\n\u001b[31mFAILED\u001b[0m app/tests/routes/test_api_routes_21_30.py::\u001b[1mTestAgentRoute::test_agent_message_processing\u001b[0m - AttributeError: <module 'app.services.agent_service' from 'C:\\\\Users\\\\antho\\\\OneDrive\\\\Desktop\\\\Netra\\\\netra-core-generation-1\\\\app\\\\services\\\\agent_service.py'> does not have the attribute 'process_message'\n\u001b[31mERROR\u001b[0m integration_tests/test_health.py::\u001b[1mtest_ready_endpoint_clickhouse_failure\u001b[0m\n\u001b[31mERROR\u001b[0m integration_tests/test_app.py::\u001b[1mtest_read_main\u001b[0m - concurrent.futures._base.CancelledError\n\u001b[31m!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 4 failures !!!!!!!!!!!!!!!!!!!!!!!!!!\u001b[0m\n!!!!!!!!!!!! xdist.dsession.Interrupted: stopping after 1 failures !!!!!!!!!!!!\n\u001b[31m=================== \u001b[31m\u001b[1m2 failed\u001b[0m, \u001b[32m5 passed\u001b[0m, \u001b[31m\u001b[1m2 errors\u001b[0m\u001b[31m in 49.68s\u001b[0m\u001b[31m ====================\u001b[0m\n================================================================================\n[FAIL] TESTS FAILED with exit code 2 after 66.16s\n[Coverage] Coverage Report: reports/coverage/html/index.html\n================================================================================\n\n",
      "test_counts": {
        "total": 9,
        "passed": 5,
        "failed": 2,
        "skipped": 0,
        "errors": 2,
        "test_files": 5
      },
      "coverage": null,
      "test_details": []
    },
    "frontend": {
      "status": "skipped",
      "duration": 0,
      "exit_code": null,
      "output": "",
      "test_counts": {
        "total": 0,
        "passed": 0,
        "failed": 0,
        "skipped": 0,
        "errors": 0
      },
      "coverage": null
    },
    "e2e": {
      "status": "pending",
      "duration": 0,
      "exit_code": null,
      "output": "",
      "test_counts": {
        "total": 0,
        "passed": 0,
        "failed": 0,
        "skipped": 0,
        "errors": 0
      },
      "coverage": null
    },
    "overall": {
      "status": "failed",
      "start_time": 1755178030.9120665,
      "end_time": 1755178098.2748952
    }
  }
}