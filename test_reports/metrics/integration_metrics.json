{
  "timestamp": "2025-08-14T16:58:32.090149",
  "level": "integration",
  "metrics": {
    "total_tests": 131,
    "passed": 40,
    "failed": 89,
    "coverage": null
  },
  "results": {
    "backend": {
      "status": "failed",
      "duration": 42.14890170097351,
      "exit_code": 2,
      "output": "Loaded test environment from C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\.env.test\n================================================================================\nNETRA AI PLATFORM - BACKEND TEST RUNNER\n================================================================================\nTest Configuration:\n  Category: integration\n  Parallel: 4\n  Coverage: enabled\n  Fail Fast: enabled\n  Environment: testing\n\nRunning command:\n  pytest integration_tests app/tests/routes -vv -n 4 -x --maxfail=1 --cov=app --cov-report=html:reports/coverage/html --cov-report=term-missing --cov-report=json:reports/coverage/coverage.json --cov-fail-under=70 -m not real_services --tb=short --asyncio-mode=auto --color=yes --strict-markers --disable-warnings -p no:warnings\n================================================================================\n\u001b[1m============================= test session starts =============================\u001b[0m\nplatform win32 -- Python 3.12.4, pytest-8.4.1, pluggy-1.6.0 -- C:\\Users\\antho\\miniconda3\\python.exe\ncachedir: .pytest_cache\nmetadata: {'Python': '3.12.4', 'Platform': 'Windows-11-10.0.26100-SP0', 'Packages': {'pytest': '8.4.1', 'pluggy': '1.6.0'}, 'Plugins': {'anyio': '4.9.0', 'Faker': '37.4.2', 'langsmith': '0.4.10', 'asyncio': '0.21.1', 'cov': '6.2.1', 'html': '4.1.1', 'json-report': '1.5.0', 'metadata': '3.1.1', 'mock': '3.14.1', 'timeout': '2.4.0', 'xdist': '3.8.0', 'typeguard': '4.4.4'}}\nrootdir: C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\nconfigfile: pytest.ini\nplugins: anyio-4.9.0, Faker-37.4.2, langsmith-0.4.10, asyncio-0.21.1, cov-6.2.1, html-4.1.1, json-report-1.5.0, metadata-3.1.1, mock-3.14.1, timeout-2.4.0, xdist-3.8.0, typeguard-4.4.4\nasyncio: mode=Mode.AUTO\ncreated: 4/4 workers\n4 workers [86 items]\n\nscheduling tests via LoadScheduling\n\nintegration_tests/test_health.py::test_ready_endpoint_clickhouse_failure \nintegration_tests/test_generation_service.py::test_save_and_get_corpus \nintegration_tests/test_app.py::test_read_main \napp/tests/routes/test_apex_optimizer_agent_route.py::test_apex_optimizer_agent[I need to reduce costs but keep quality the same. For feature X, I can accept a latency of 500ms. For feature Y, I need to maintain the current latency of 200ms.] \n[gw2]\u001b[36m [  1%] \u001b[0m\u001b[31mERROR\u001b[0m integration_tests/test_health.py::test_ready_endpoint_clickhouse_failure \n[gw0]\u001b[36m [  2%] \u001b[0m\u001b[32mPASSED\u001b[0m integration_tests/test_generation_service.py::test_save_and_get_corpus \nintegration_tests/test_generation_service.py::test_run_synthetic_data_generation_job_e2e \n[gw0]\u001b[36m [  3%] \u001b[0m\u001b[31mFAILED\u001b[0m integration_tests/test_generation_service.py::test_run_synthetic_data_generation_job_e2e \n[gw3]\u001b[36m [  4%] \u001b[0m\u001b[32mPASSED\u001b[0m app/tests/routes/test_apex_optimizer_agent_route.py::test_apex_optimizer_agent[I need to reduce costs but keep quality the same. For feature X, I can accept a latency of 500ms. For feature Y, I need to maintain the current latency of 200ms.] \napp/tests/routes/test_api_routes_21_30.py::TestAdminRoute::test_admin_endpoint_requires_authentication \n[gw3]\u001b[36m [  5%] \u001b[0m\u001b[32mPASSED\u001b[0m app/tests/routes/test_api_routes_21_30.py::TestAdminRoute::test_admin_endpoint_requires_authentication \napp/tests/routes/test_api_routes_21_30.py::TestAdminRoute::test_admin_role_verification \n[gw3]\u001b[36m [  6%] \u001b[0m\u001b[32mPASSED\u001b[0m app/tests/routes/test_api_routes_21_30.py::TestAdminRoute::test_admin_role_verification \napp/tests/routes/test_api_routes_21_30.py::TestAdminRoute::test_admin_user_management \n[gw3]\u001b[36m [  8%] \u001b[0m\u001b[32mPASSED\u001b[0m app/tests/routes/test_api_routes_21_30.py::TestAdminRoute::test_admin_user_management \napp/tests/routes/test_api_routes_21_30.py::TestAgentRoute::test_agent_message_processing \n[gw3]\u001b[36m [  9%] \u001b[0m\u001b[32mPASSED\u001b[0m app/tests/routes/test_api_routes_21_30.py::TestAgentRoute::test_agent_message_processing \n[gw1]\u001b[36m [ 10%] \u001b[0m\u001b[31mERROR\u001b[0m integration_tests/test_app.py::test_read_main Loaded .env file from C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\.env\n\nINTERNALERROR> def worker_internal_error(\nINTERNALERROR>         self, node: WorkerController, formatted_error: str\nINTERNALERROR>     ) -> None:\nINTERNALERROR>         \"\"\"\nINTERNALERROR>         pytest_internalerror() was called on the worker.\nINTERNALERROR>     \nINTERNALERROR>         pytest_internalerror() arguments are an excinfo and an excrepr, which can't\nINTERNALERROR>         be serialized, so we go with a poor man's solution of raising an exception\nINTERNALERROR>         here ourselves using the formatted message.\nINTERNALERROR>         \"\"\"\nINTERNALERROR>         self._active_nodes.remove(node)\nINTERNALERROR>         try:\nINTERNALERROR> >           assert False, formatted_error\nINTERNALERROR> E           AssertionError: Traceback (most recent call last):\nINTERNALERROR> E               File \"C:\\Users\\antho\\miniconda3\\Lib\\site-packages\\coverage\\sqlitedb.py\", line 115, in _execute\nINTERNALERROR> E                 return self.con.execute(sql, parameters)    # type: ignore[arg-type]\nINTERNALERROR> E                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nINTERNALERROR> E             sqlite3.OperationalError: no such table: file\nINTERNALERROR> E             \nINTERNALERROR> E             During handling of the above exception, another exception occurred:\nINTERNALERROR> E             \nINTERNALERROR> E             Traceback (most recent call last):\nINTERNALERROR> E               File \"C:\\Users\\antho\\miniconda3\\Lib\\site-packages\\coverage\\sqlitedb.py\", line 120, in _execute\nINTERNALERROR> E                 return self.con.execute(sql, parameters)    # type: ignore[arg-type]\nINTERNALERROR> E                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nINTERNALERROR> E             sqlite3.OperationalError: no such table: file\nINTERNALERROR> E             \nINTERNALERROR> E             The above exception was the direct cause of the following exception:\nINTERNALERROR> E             \nINTERNALERROR> E             Traceback (most recent call last):\nINTERNALERROR> E               File \"C:\\Users\\antho\\miniconda3\\Lib\\site-packages\\_pytest\\main.py\", line 289, in wrap_session\nINTERNALERROR> E                 session.exitstatus = doit(config, session) or 0\nINTERNALERROR> E                                      ^^^^^^^^^^^^^^^^^^^^^\nINTERNALERROR> E               File \"C:\\Users\\antho\\miniconda3\\Lib\\site-packages\\_pytest\\main.py\", line 343, in _main\nINTERNALERROR> E                 config.hook.pytest_runtestloop(session=session)\nINTERNALERROR> E               File \"C:\\Users\\antho\\miniconda3\\Lib\\site-packages\\pluggy\\_hooks.py\", line 512, in __call__\nINTERNALERROR> E                 return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\nINTERNALERROR> E                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nINTERNALERROR> E               File \"C:\\Users\\antho\\miniconda3\\Lib\\site-packages\\pluggy\\_manager.py\", line 120, in _hookexec\nINTERNALERROR> E                 return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\nINTERNALERROR> E                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nINTERNALERROR> E               File \"C:\\Users\\antho\\miniconda3\\Lib\\site-packages\\pluggy\\_callers.py\", line 167, in _multicall\nINTERNALERROR> E                 raise exception\nINTERNALERROR> E               File \"C:\\Users\\antho\\miniconda3\\Lib\\site-packages\\pluggy\\_callers.py\", line 139, in _multicall\nINTERNALERROR> E                 teardown.throw(exception)\nINTERNALERROR> E               File \"C:\\Users\\antho\\miniconda3\\Lib\\site-packages\\_pytest\\logging.py\", line 801, in pytest_runtestloop\nINTERNALERROR> E                 return (yield)  # Run all the tests.\nINTERNALERROR> E                         ^^^^^\nINTERNALERROR> E               File \"C:\\Users\\antho\\miniconda3\\Lib\\site-packages\\pluggy\\_callers.py\", line 139, in _multicall\nINTERNALERROR> E                 teardown.throw(exception)\nINTERNALERROR> E               File \"C:\\Users\\antho\\miniconda3\\Lib\\site-packages\\_pytest\\terminal.py\", line 688, in pytest_runtestloop\nINTERNALERROR> E                 result = yield\nINTERNALERROR> E                          ^^^^^\nINTERNALERROR> E               File \"C:\\Users\\antho\\miniconda3\\Lib\\site-packages\\pluggy\\_callers.py\", line 152, in _multicall\nINTERNALERROR> E                 teardown.send(result)\nINTERNALERROR> E               File \"C:\\Users\\antho\\miniconda3\\Lib\\site-packages\\pytest_cov\\plugin.py\", line 346, in pytest_runtestloop\nINTERNALERROR> E                 self.cov_controller.finish()\nINTERNALERROR> E               File \"C:\\Users\\antho\\miniconda3\\Lib\\site-packages\\pytest_cov\\engine.py\", line 57, in ensure_topdir_wrapper\nINTERNALERROR> E                 return meth(self, *args, **kwargs)\nINTERNALERROR> E                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^\nINTERNALERROR> E               File \"C:\\Users\\antho\\miniconda3\\Lib\\site-packages\\pytest_cov\\engine.py\", line 471, in finish\nINTERNALERROR> E                 self.cov.save()\nINTERNALERROR> E               File \"C:\\Users\\antho\\miniconda3\\Lib\\site-packages\\coverage\\control.py\", line 818, in save\nINTERNALERROR> E                 data = self.get_data()\nINTERNALERROR> E                        ^^^^^^^^^^^^^^^\nINTERNALERROR> E               File \"C:\\Users\\antho\\miniconda3\\Lib\\site-packages\\coverage\\control.py\", line 899, in get_data\nINTERNALERROR> E                 self._post_save_work()\nINTERNALERROR> E               File \"C:\\Users\\antho\\miniconda3\\Lib\\site-packages\\coverage\\control.py\", line 930, in _post_save_work\nINTERNALERROR> E                 self._data.touch_files(paths, plugin_name)\nINTERNALERROR> E               File \"C:\\Users\\antho\\miniconda3\\Lib\\site-packages\\coverage\\sqldata.py\", line 620, in touch_files\nINTERNALERROR> E                 self._file_id(filename, add=True)\nINTERNALERROR> E               File \"C:\\Users\\antho\\miniconda3\\Lib\\site-packages\\coverage\\sqldata.py\", line 416, in _file_id\nINTERNALERROR> E                 self._file_map[filename] = con.execute_for_rowid(\nINTERNALERROR> E                                            ^^^^^^^^^^^^^^^^^^^^^^\nINTERNALERROR> E               File \"C:\\Users\\antho\\miniconda3\\Lib\\site-packages\\coverage\\sqlitedb.py\", line 171, in execute_for_rowid\nINTERNALERROR> E                 with self.execute(sql, parameters) as cur:\nINTERNALERROR> E               File \"C:\\Users\\antho\\miniconda3\\Lib\\contextlib.py\", line 137, in __enter__\nINTERNALERROR> E                 return next(self.gen)\nINTERNALERROR> E                        ^^^^^^^^^^^^^^\nINTERNALERROR> E               File \"C:\\Users\\antho\\miniconda3\\Lib\\site-packages\\coverage\\sqlitedb.py\", line 150, in execute\nINTERNALERROR> E                 cur = self._execute(sql, parameters)\nINTERNALERROR> E                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nINTERNALERROR> E               File \"C:\\Users\\antho\\miniconda3\\Lib\\site-packages\\coverage\\sqlitedb.py\", line 138, in _execute\nINTERNALERROR> E                 raise DataError(f\"Couldn't use data file {self.filename!r}: {msg}\") from exc\nINTERNALERROR> E             coverage.exceptions.DataError: Couldn't use data file 'C:\\\\Users\\\\antho\\\\OneDrive\\\\Desktop\\\\Netra\\\\netra-core-generation-1\\\\.coverage.Anthony.50132.XRaRdmEx.wgw1': no such table: file\nINTERNALERROR> E           assert False\nINTERNALERROR> \nINTERNALERROR> ..\\..\\..\\..\\miniconda3\\Lib\\site-packages\\xdist\\dsession.py:232: AssertionError\n\n=================================== ERRORS ====================================\n\u001b[31m\u001b[1m__________ ERROR at setup of test_ready_endpoint_clickhouse_failure ___________\u001b[0m\n[gw2] win32 -- Python 3.12.4 C:\\Users\\antho\\miniconda3\\python.exe\nfile C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\integration_tests\\test_health.py, line 37\n  def test_ready_endpoint_clickhouse_failure(client: TestClient):\nE       fixture 'client' not found\n>       available fixtures: _session_faker, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cleanup_dependency_overrides, cov, doctest_namespace, event_loop, extra, extras, faker, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, include_metadata_in_junit_xml, json_metadata, metadata, mocker, module_mocker, monkeypatch, no_cover, package_mocker, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, testrun_uid, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory, worker_id\n>       use 'pytest --fixtures [testpath]' for help on them.\n\nC:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\integration_tests\\test_health.py:37\n\u001b[31m\u001b[1m______________________ ERROR at setup of test_read_main _______________________\u001b[0m\n[gw1] win32 -- Python 3.12.4 C:\\Users\\antho\\miniconda3\\python.exe\n\u001b[1m\u001b[31mintegration_tests\\test_app.py\u001b[0m:15: in test_client\n    \u001b[0m\u001b[94mwith\u001b[39;49;00m TestClient(app=app, base_url=\u001b[33m\"\u001b[39;49;00m\u001b[33mhttp://test\u001b[39;49;00m\u001b[33m\"\u001b[39;49;00m) \u001b[94mas\u001b[39;49;00m c:\u001b[90m\u001b[39;49;00m\n\u001b[1m\u001b[31m..\\..\\..\\..\\miniconda3\\Lib\\site-packages\\starlette\\testclient.py\u001b[0m:694: in __enter__\n    \u001b[0mportal.call(\u001b[96mself\u001b[39;49;00m.wait_startup)\u001b[90m\u001b[39;49;00m\n\u001b[1m\u001b[31m..\\..\\..\\..\\AppData\\Roaming\\Python\\Python312\\site-packages\\anyio\\from_thread.py\u001b[0m:290: in call\n    \u001b[0m\u001b[94mreturn\u001b[39;49;00m cast(T_Retval, \u001b[96mself\u001b[39;49;00m.start_task_soon(func, *args).result())\u001b[90m\u001b[39;49;00m\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\u001b[90m\u001b[39;49;00m\n\u001b[1m\u001b[31m..\\..\\..\\..\\miniconda3\\Lib\\concurrent\\futures\\_base.py\u001b[0m:454: in result\n    \u001b[0m\u001b[94mraise\u001b[39;49;00m CancelledError()\u001b[90m\u001b[39;49;00m\n\u001b[1m\u001b[31mE   concurrent.futures._base.CancelledError\u001b[0m\n---------------------------- Captured stderr setup ----------------------------\n2025-08-14 16:57:28.163 | ERROR    | app.core.unified_logging:_emit_log:117 | Critical startup checks failed:\n2025-08-14 16:57:28.164 | ERROR    | app.core.unified_logging:_emit_log:117 |   - database_connection: Database check failed: password=REDACTED failed for user \"test\"\n2025-08-14 16:57:28.165 | CRITICAL | app.startup:_handle_startup_failure:222 | CRITICAL: Startup checks failed: Startup failed: 1 critical checks failed\n2025-08-14 16:57:28.181 | ERROR    | logging:handle:1028 | unhandled exception during asyncio.run() shutdown\ntask: <Task finished name='anyio.from_thread.start_blocking_portal.<locals>.run_portal' coro=<start_blocking_portal.<locals>.run_portal() done, defined at C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\anyio\\_backends\\_asyncio.py:2291> exception=BaseExceptionGroup('unhandled errors in a TaskGroup', [SystemExit(1)])>\nTraceback (most recent call last):\n  File \"C:\\Users\\antho\\miniconda3\\Lib\\threading.py\", line 1030, in _bootstrap\n    self._bootstrap_inner()\n  File \"C:\\Users\\antho\\miniconda3\\Lib\\threading.py\", line 1073, in _bootstrap_inner\n    self.run()\n  File \"C:\\Users\\antho\\miniconda3\\Lib\\threading.py\", line 1010, in run\n    self._target(*self._args, **self._kwargs)\n  File \"C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\anyio\\from_thread.py\", line 481, in run_blocking_portal\n    _eventloop.run(\n  File \"C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\anyio\\_core\\_eventloop.py\", line 74, in run\n    return async_backend.run(func, args, {}, backend_options)\n  File \"C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\anyio\\_backends\\_asyncio.py\", line 2309, in run\n    with Runner(debug=debug, loop_factory=loop_factory) as runner:\n  File \"C:\\Users\\antho\\miniconda3\\Lib\\asyncio\\runners.py\", line 62, in __exit__\n    self.close()\n  File \"C:\\Users\\antho\\miniconda3\\Lib\\asyncio\\runners.py\", line 70, in close\n    _cancel_all_tasks(loop)\n  File \"C:\\Users\\antho\\miniconda3\\Lib\\asyncio\\runners.py\", line 211, in _cancel_all_tasks\n    loop.call_exception_handler({\n  File \"C:\\Users\\antho\\miniconda3\\Lib\\asyncio\\base_events.py\", line 687, in run_until_complete\n    return future.result()\n  File \"C:\\Users\\antho\\miniconda3\\Lib\\asyncio\\windows_events.py\", line 335, in run_forever\n    self._self_reading_future = None\n  File \"C:\\Users\\antho\\miniconda3\\Lib\\asyncio\\base_events.py\", line 649, in run_forever\n    sys.set_asyncgen_hooks(*old_agen_hooks)\n  File \"C:\\Users\\antho\\miniconda3\\Lib\\asyncio\\base_events.py\", line 1988, in _run_once\n    handle = None  # Needed to break cycles when an exception occurs.\n  File \"C:\\Users\\antho\\miniconda3\\Lib\\asyncio\\events.py\", line 103, in _run\n    self = None  # Needed to break cycles when an exception occurs.\n> File \"C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\anyio\\_backends\\_asyncio.py\", line 2298, in wrapper\n    return await func(*args)\n  File \"C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\anyio\\from_thread.py\", line 474, in run_portal\n    async with BlockingPortal() as portal_:\n  File \"C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\anyio\\from_thread.py\", line 168, in __aexit__\n    return await self._task_group.__aexit__(exc_type, exc_val, exc_tb)\n  File \"C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\anyio\\_backends\\_asyncio.py\", line 772, in __aexit__\n    raise BaseExceptionGroup(\nBaseExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)\n----------------------------- Captured log setup ------------------------------\n\u001b[35mDEBUG   \u001b[0m asyncio:proactor_events.py:634 Using proactor: IocpProactor\n\u001b[32mINFO    \u001b[0m app.utils.multiprocessing_cleanup:multiprocessing_cleanup.py:140 Multiprocessing configured with method: spawn\n\u001b[32mINFO    \u001b[0m app.utils.multiprocessing_cleanup:multiprocessing_cleanup.py:108 Multiprocessing resources cleaned up\n\u001b[31m\u001b[1mERROR   \u001b[0m asyncio:base_events.py:1821 unhandled exception during asyncio.run() shutdown\ntask: <Task finished name='anyio.from_thread.start_blocking_portal.<locals>.run_portal' coro=<start_blocking_portal.<locals>.run_portal() done, defined at C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\anyio\\_backends\\_asyncio.py:2291> exception=BaseExceptionGroup('unhandled errors in a TaskGroup', [SystemExit(1)])>\n  + Exception Group Traceback (most recent call last):\n  |   File \"C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\anyio\\_backends\\_asyncio.py\", line 2298, in wrapper\n  |     return await func(*args)\n  |            ^^^^^^^^^^^^^^^^^\n  |   File \"C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\anyio\\from_thread.py\", line 474, in run_portal\n  |     async with BlockingPortal() as portal_:\n  |   File \"C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\anyio\\from_thread.py\", line 168, in __aexit__\n  |     return await self._task_group.__aexit__(exc_type, exc_val, exc_tb)\n  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  |   File \"C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\anyio\\_backends\\_asyncio.py\", line 772, in __aexit__\n  |     raise BaseExceptionGroup(\n  | BaseExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)\n  +-+---------------- 1 ----------------\n    | Traceback (most recent call last):\n    |   File \"C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\app\\startup.py\", line 215, in startup_health_checks\n    |     await run_startup_checks(app)\n    |   File \"C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\app\\startup_checks\\utils.py\", line 23, in run_startup_checks\n    |     raise RuntimeError(f\"Startup failed: {results['failed_critical']} critical checks failed\")\n    | RuntimeError: Startup failed: 1 critical checks failed\n    | \n    | During handling of the above exception, another exception occurred:\n    | \n    | Traceback (most recent call last):\n    |   File \"C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\anyio\\_backends\\_asyncio.py\", line 2310, in run\n    |     return runner.run(wrapper())\n    |            ^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\asyncio\\runners.py\", line 118, in run\n    |     return self._loop.run_until_complete(task)\n    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\asyncio\\base_events.py\", line 674, in run_until_complete\n    |     self.run_forever()\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\asyncio\\windows_events.py\", line 322, in run_forever\n    |     super().run_forever()\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\asyncio\\base_events.py\", line 641, in run_forever\n    |     self._run_once()\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\asyncio\\base_events.py\", line 1987, in _run_once\n    |     handle._run()\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\asyncio\\events.py\", line 88, in _run\n    |     self._context.run(self._callback, *self._args)\n    |   File \"C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\anyio\\from_thread.py\", line 221, in _call_func\n    |     retval = await retval_or_awaitable\n    |              ^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\site-packages\\starlette\\testclient.py\", line 710, in lifespan\n    |     await self.app(scope, self.stream_receive.receive, self.stream_send.send)\n    |   File \"C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\fastapi\\applications.py\", line 1054, in __call__\n    |     await super().__call__(scope, receive, send)\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\site-packages\\starlette\\applications.py\", line 113, in __call__\n    |     await self.middleware_stack(scope, receive, send)\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\site-packages\\starlette\\middleware\\errors.py\", line 151, in __call__\n    |     await self.app(scope, receive, send)\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\site-packages\\starlette\\middleware\\sessions.py\", line 40, in __call__\n    |     await self.app(scope, receive, send)\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 103, in __call__\n    |     await self.app(scope, receive, send)\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 103, in __call__\n    |     await self.app(scope, receive, send)\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 103, in __call__\n    |     await self.app(scope, receive, send)\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 77, in __call__\n    |     await self.app(scope, receive, send)\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 49, in __call__\n    |     await self.app(scope, receive, send)\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    |     await self.middleware_stack(scope, receive, send)\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\site-packages\\starlette\\routing.py\", line 725, in app\n    |     await self.lifespan(scope, receive, send)\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\site-packages\\starlette\\routing.py\", line 694, in lifespan\n    |     async with self.lifespan_context(app) as maybe_state:\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\contextlib.py\", line 210, in __aenter__\n    |     return await anext(self.gen)\n    |            ^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\fastapi\\routing.py\", line 134, in merged_lifespan\n    |     async with original_context(app) as maybe_original_state:\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\contextlib.py\", line 210, in __aenter__\n    |     return await anext(self.gen)\n    |            ^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\fastapi\\routing.py\", line 134, in merged_lifespan\n    |     async with original_context(app) as maybe_original_state:\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\contextlib.py\", line 210, in __aenter__\n    |     return await anext(self.gen)\n    |            ^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\fastapi\\routing.py\", line 134, in merged_lifespan\n    |     async with original_context(app) as maybe_original_state:\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\contextlib.py\", line 210, in __aenter__\n    |     return await anext(self.gen)\n    |            ^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\fastapi\\routing.py\", line 134, in merged_lifespan\n    |     async with original_context(app) as maybe_original_state:\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\contextlib.py\", line 210, in __aenter__\n    |     return await anext(self.gen)\n    |            ^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\fastapi\\routing.py\", line 134, in merged_lifespan\n    |     async with original_context(app) as maybe_original_state:\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\contextlib.py\", line 210, in __aenter__\n    |     return await anext(self.gen)\n    |            ^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\fastapi\\routing.py\", line 134, in merged_lifespan\n    |     async with original_context(app) as maybe_original_state:\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\contextlib.py\", line 210, in __aenter__\n    |     return await anext(self.gen)\n    |            ^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\fastapi\\routing.py\", line 134, in merged_lifespan\n    |     async with original_context(app) as maybe_original_state:\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\contextlib.py\", line 210, in __aenter__\n    |     return await anext(self.gen)\n    |            ^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\fastapi\\routing.py\", line 134, in merged_lifespan\n    |     async with original_context(app) as maybe_original_state:\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\contextlib.py\", line 210, in __aenter__\n    |     return await anext(self.gen)\n    |            ^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\fastapi\\routing.py\", line 134, in merged_lifespan\n    |     async with original_context(app) as maybe_original_state:\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\contextlib.py\", line 210, in __aenter__\n    |     return await anext(self.gen)\n    |            ^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\fastapi\\routing.py\", line 134, in merged_lifespan\n    |     async with original_context(app) as maybe_original_state:\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\contextlib.py\", line 210, in __aenter__\n    |     return await anext(self.gen)\n    |            ^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\fastapi\\routing.py\", line 134, in merged_lifespan\n    |     async with original_context(app) as maybe_original_state:\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\contextlib.py\", line 210, in __aenter__\n    |     return await anext(self.gen)\n    |            ^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\fastapi\\routing.py\", line 134, in merged_lifespan\n    |     async with original_context(app) as maybe_original_state:\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\contextlib.py\", line 210, in __aenter__\n    |     return await anext(self.gen)\n    |            ^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\fastapi\\routing.py\", line 134, in merged_lifespan\n    |     async with original_context(app) as maybe_original_state:\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\contextlib.py\", line 210, in __aenter__\n    |     return await anext(self.gen)\n    |            ^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\fastapi\\routing.py\", line 134, in merged_lifespan\n    |     async with original_context(app) as maybe_original_state:\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\contextlib.py\", line 210, in __aenter__\n    |     return await anext(self.gen)\n    |            ^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\fastapi\\routing.py\", line 134, in merged_lifespan\n    |     async with original_context(app) as maybe_original_state:\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\contextlib.py\", line 210, in __aenter__\n    |     return await anext(self.gen)\n    |            ^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\fastapi\\routing.py\", line 134, in merged_lifespan\n    |     async with original_context(app) as maybe_original_state:\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\contextlib.py\", line 210, in __aenter__\n    |     return await anext(self.gen)\n    |            ^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\antho\\AppData\\Roaming\\Python\\Python312\\site-packages\\fastapi\\routing.py\", line 134, in merged_lifespan\n    |     async with original_context(app) as maybe_original_state:\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\site-packages\\starlette\\routing.py\", line 571, in __aenter__\n    |     await self._router.startup()\n    |   File \"C:\\Users\\antho\\miniconda3\\Lib\\site-packages\\starlette\\routing.py\", line 671, in startup\n    |     await handler()\n    |   File \"C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\app\\core\\app_factory.py\", line 43, in startup_event\n    |     _, _startup_logger = await run_complete_startup(app)\n    |                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\app\\startup.py\", line 318, in run_complete_startup\n    |     await _run_startup_phase_three(app, logger)\n    |   File \"C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\app\\startup.py\", line 307, in _run_startup_phase_three\n    |     await startup_health_checks(app, logger)\n    |   File \"C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\app\\startup.py\", line 217, in startup_health_checks\n    |     await _handle_startup_failure(logger, e)\n    |   File \"C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\app\\startup.py\", line 225, in _handle_startup_failure\n    |     sys.exit(1)\n    | SystemExit: 1\n    +------------------------------------\n================================== FAILURES ===================================\n\u001b[31m\u001b[1m_________________ test_run_synthetic_data_generation_job_e2e __________________\u001b[0m\n[gw0] win32 -- Python 3.12.4 C:\\Users\\antho\\miniconda3\\python.exe\n\u001b[1m\u001b[31mintegration_tests\\test_generation_service.py\u001b[0m:178: in test_run_synthetic_data_generation_job_e2e\n    \u001b[0m\u001b[94massert\u001b[39;49;00m job_status \u001b[95mis\u001b[39;49;00m \u001b[95mnot\u001b[39;49;00m \u001b[94mNone\u001b[39;49;00m\u001b[90m\u001b[39;49;00m\n\u001b[1m\u001b[31mE   assert None is not None\u001b[0m\n---------------------------- Captured stderr call -----------------------------\n2025-08-14 16:57:25.292 | ERROR    | app.ws_manager_messaging:_validate_dict_message:70 | Message validation failed: Message missing 'type' field\n2025-08-14 16:57:25.298 | ERROR    | app.ws_manager_messaging:_validate_dict_message:70 | Message validation failed: Message missing 'type' field\n2025-08-14 16:57:25.298 | ERROR    | app.ws_manager_messaging:_validate_dict_message:70 | Message validation failed: Message missing 'type' field\n2025-08-14 16:57:25.298 | ERROR    | app.ws_manager_messaging:_validate_dict_message:70 | Message validation failed: Message missing 'type' field\n---------------------------- Captured log teardown ----------------------------\n\u001b[35mDEBUG   \u001b[0m asyncio:proactor_events.py:634 Using proactor: IocpProactor\n\u001b[36m\u001b[1m=========================== short test summary info ===========================\u001b[0m\n\u001b[31mFAILED\u001b[0m integration_tests/test_generation_service.py::\u001b[1mtest_run_synthetic_data_generation_job_e2e\u001b[0m - assert None is not None\n\u001b[31mERROR\u001b[0m integration_tests/test_health.py::\u001b[1mtest_ready_endpoint_clickhouse_failure\u001b[0m\n\u001b[31mERROR\u001b[0m integration_tests/test_app.py::\u001b[1mtest_read_main\u001b[0m - concurrent.futures._base.CancelledError\n\u001b[31m!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 3 failures !!!!!!!!!!!!!!!!!!!!!!!!!!\u001b[0m\n!!!!!!!!!!!! xdist.dsession.Interrupted: stopping after 1 failures !!!!!!!!!!!!\n\u001b[31m=================== \u001b[31m\u001b[1m1 failed\u001b[0m, \u001b[32m6 passed\u001b[0m, \u001b[31m\u001b[1m2 errors\u001b[0m\u001b[31m in 24.59s\u001b[0m\u001b[31m ====================\u001b[0m\n================================================================================\n[FAIL] TESTS FAILED with exit code 2 after 40.60s\n[Coverage] Coverage Report: reports/coverage/html/index.html\n================================================================================\n\n",
      "test_counts": {
        "total": 9,
        "passed": 6,
        "failed": 1,
        "skipped": 0,
        "errors": 2,
        "test_files": 5
      },
      "coverage": null,
      "test_details": []
    },
    "frontend": {
      "status": "failed",
      "duration": 56.74295139312744,
      "exit_code": 1,
      "output": "\n> netra-frontend-apex-v1@0.1.0 test\n> jest --forceExit --detectOpenHandles --testMatch **/__tests__/integration/**/*.test.[jt]s?(x)\n\n================================================================================\nNETRA AI PLATFORM - FRONTEND TEST RUNNER\n================================================================================\n\n================================================================================\nRunning Jest Tests\n--------------------------------------------------------------------------------\nRunning: npm run test -- --forceExit --detectOpenHandles --testMatch **/__tests__/integration/**/*.test.[jt]s?(x)\n--------------------------------------------------------------------------------\n\n================================================================================\n[FAIL] CHECKS FAILED with exit code 1\n================================================================================\n\nCleaning up test processes...\n\nFAIL __tests__/integration/comprehensive/index.test.tsx (13.351 s)\n  \u25cf Console\n\n    console.error\n      Error: Component error for testing\n          at createMockError (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\__tests__\\integration\\comprehensive\\test-utils.tsx:235:10)\n          at ProblematicComponent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\__tests__\\integration\\comprehensive\\performance-memory.test.tsx:541:32)\n          at Object.react_stack_bottom_frame (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:23863:20)\n          at renderWithHooks (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:5529:22)\n          at updateFunctionComponent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:8897:19)\n          at beginWork (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:10522:18)\n          at runWithFiberInDEV (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:1522:13)\n          at performUnitOfWork (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:15140:22)\n          at workLoopSync (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:14956:41)\n          at renderRootSync (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:14936:11)\n          at performWorkOnRoot (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:14462:44)\n          at performSyncWorkOnRoot (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16231:7)\n          at flushSyncWorkAcrossRoots_impl (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16079:21)\n          at processRootScheduleInMicrotask (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16116:7)\n          at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16241:11\n          at flushActQueue (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react\\cjs\\react.development.js:566:34)\n          at process.env.NODE_ENV.exports.act (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react\\cjs\\react.development.js:860:10)\n          at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\act-compat.js:47:25\n          at Object.eventWrapper (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\pure.js:107:28)\n          at fireEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\dom\\dist\\events.js:12:35)\n          at fireEvent.<computed> [as click] (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\dom\\dist\\events.js:110:36)\n          at fireEvent.<computed> [as click] (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\fire-event.js:15:52)\n          at Object.click (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\__tests__\\integration\\comprehensive\\performance-memory.test.tsx:566:17)\n          at Promise.finally.completed (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1559:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1499:10)\n          at _callCircusTest (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1009:40)\n          at _runTest (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:949:3)\n          at _runTestsForDescribeBlock (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:839:13)\n          at _runTestsForDescribeBlock (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n          at _runTestsForDescribeBlock (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n          at run (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:757:3)\n          at runAndTransformResultsToJestFormat (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1920:21)\n          at jestAdapter (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\runner.js:101:19)\n          at runTestInternal (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-runner\\build\\index.js:275:16)\n          at runTest (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-runner\\build\\index.js:343:7) {\n        [stack]: [Getter/Setter],\n        [message]: 'Component error for testing'\n      }\n      \n      The above error occurred in the <ProblematicComponent> component.\n      \n      React will try to recreate this component tree from scratch using the error boundary you provided, ErrorBoundary.\n\n    \u001b[0m \u001b[90m 121 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 122 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 123 |\u001b[39m     originalError\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 124 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 125 |\u001b[39m   \n     \u001b[90m 126 |\u001b[39m   console\u001b[33m.\u001b[39mwarn \u001b[33m=\u001b[39m (\u001b[33m...\u001b[39margs\u001b[33m:\u001b[39m any[]) \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at console.call [as error] (jest.setup.ts:123:19)\n      at defaultOnCaughtError (node_modules/react-dom/cjs/react-dom-client.development.js:8331:17)\n      at logCaughtError (node_modules/react-dom/cjs/react-dom-client.development.js:8367:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at ErrorBoundary.inst.componentDidCatch.update.callback (node_modules/react-dom/cjs/react-dom-client.development.js:8414:11)\n      at callCallback (node_modules/react-dom/cjs/react-dom-client.development.js:5363:16)\n      at commitCallbacks (node_modules/react-dom/cjs/react-dom-client.development.js:5383:11)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at commitClassCallbacks (node_modules/react-dom/cjs/react-dom-client.development.js:12067:11)\n      at commitLayoutEffectOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:12688:25)\n      at recursivelyTraverseLayoutEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13590:11)\n      at commitLayoutEffectOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:12727:11)\n      at recursivelyTraverseLayoutEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13590:11)\n      at commitLayoutEffectOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:12611:11)\n      at recursivelyTraverseLayoutEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13590:11)\n      at commitLayoutEffectOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:12693:11)\n      at flushLayoutEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15559:15)\n      at commitRoot (node_modules/react-dom/cjs/react-dom-client.development.js:15402:9)\n      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14526:15)\n      at performSyncWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16231:7)\n      at flushSyncWorkAcrossRoots_impl (node_modules/react-dom/cjs/react-dom-client.development.js:16079:21)\n      at processRootScheduleInMicrotask (node_modules/react-dom/cjs/react-dom-client.development.js:16116:7)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:16241:11\n      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:860:10)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at fireEvent (node_modules/@testing-library/dom/dist/events.js:12:35)\n      at fireEvent.<computed> [as click] (node_modules/@testing-library/dom/dist/events.js:110:36)\n      at fireEvent.<computed> [as click] (node_modules/@testing-library/react/dist/fire-event.js:15:52)\n      at Object.click (__tests__/integration/comprehensive/performance-memory.test.tsx:566:17)\n\n    console.error\n      Error: Component error for testing\n          at createMockError (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\__tests__\\integration\\comprehensive\\test-utils.tsx:235:10)\n          at ProblematicComponent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\__tests__\\integration\\comprehensive\\performance-memory.test.tsx:541:32)\n          at Object.react_stack_bottom_frame (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:23863:20)\n          at renderWithHooks (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:5529:22)\n          at updateFunctionComponent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:8897:19)\n          at beginWork (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:10522:18)\n          at runWithFiberInDEV (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:1522:13)\n          at performUnitOfWork (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:15140:22)\n          at workLoopSync (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:14956:41)\n          at renderRootSync (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:14936:11)\n          at performWorkOnRoot (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:14462:44)\n          at performSyncWorkOnRoot (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16231:7)\n          at flushSyncWorkAcrossRoots_impl (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16079:21)\n          at processRootScheduleInMicrotask (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16116:7)\n          at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16241:11\n          at flushActQueue (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react\\cjs\\react.development.js:566:34)\n          at process.env.NODE_ENV.exports.act (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react\\cjs\\react.development.js:860:10)\n          at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\act-compat.js:47:25\n          at Object.eventWrapper (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\pure.js:107:28)\n          at fireEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\dom\\dist\\events.js:12:35)\n          at fireEvent.<computed> [as click] (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\dom\\dist\\events.js:110:36)\n          at fireEvent.<computed> [as click] (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\fire-event.js:15:52)\n          at Object.click (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\__tests__\\integration\\comprehensive\\performance-memory.test.tsx:574:17) {\n        [stack]: [Getter/Setter],\n        [message]: 'Component error for testing'\n      }\n      \n      The above error occurred in the <ProblematicComponent> component.\n      \n      React will try to recreate this component tree from scratch using the error boundary you provided, ErrorBoundary.\n\n    \u001b[0m \u001b[90m 121 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 122 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 123 |\u001b[39m     originalError\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 124 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 125 |\u001b[39m   \n     \u001b[90m 126 |\u001b[39m   console\u001b[33m.\u001b[39mwarn \u001b[33m=\u001b[39m (\u001b[33m...\u001b[39margs\u001b[33m:\u001b[39m any[]) \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at console.call [as error] (jest.setup.ts:123:19)\n      at defaultOnCaughtError (node_modules/react-dom/cjs/react-dom-client.development.js:8331:17)\n      at logCaughtError (node_modules/react-dom/cjs/react-dom-client.development.js:8367:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at ErrorBoundary.inst.componentDidCatch.update.callback (node_modules/react-dom/cjs/react-dom-client.development.js:8414:11)\n      at callCallback (node_modules/react-dom/cjs/react-dom-client.development.js:5363:16)\n      at commitCallbacks (node_modules/react-dom/cjs/react-dom-client.development.js:5383:11)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at commitClassCallbacks (node_modules/react-dom/cjs/react-dom-client.development.js:12067:11)\n      at commitLayoutEffectOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:12688:25)\n      at recursivelyTraverseLayoutEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13590:11)\n      at commitLayoutEffectOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:12727:11)\n      at recursivelyTraverseLayoutEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13590:11)\n      at commitLayoutEffectOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:12611:11)\n      at recursivelyTraverseLayoutEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13590:11)\n      at commitLayoutEffectOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:12693:11)\n      at flushLayoutEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15559:15)\n      at commitRoot (node_modules/react-dom/cjs/react-dom-client.development.js:15402:9)\n      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14526:15)\n      at performSyncWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16231:7)\n      at flushSyncWorkAcrossRoots_impl (node_modules/react-dom/cjs/react-dom-client.development.js:16079:21)\n      at processRootScheduleInMicrotask (node_modules/react-dom/cjs/react-dom-client.development.js:16116:7)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:16241:11\n      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:860:10)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at fireEvent (node_modules/@testing-library/dom/dist/events.js:12:35)\n      at fireEvent.<computed> [as click] (node_modules/@testing-library/dom/dist/events.js:110:36)\n      at fireEvent.<computed> [as click] (node_modules/@testing-library/react/dist/fire-event.js:15:52)\n      at Object.click (__tests__/integration/comprehensive/performance-memory.test.tsx:574:17)\n\n  \u25cf Collaboration Features Integration Tests \u203a Real-time Cursor Synchronization \u203a should sync cursor positions in real-time\n\n    TypeError: Cannot read properties of undefined (reading 'x')\n\n    \u001b[0m \u001b[90m 88 |\u001b[39m             {\u001b[33mArray\u001b[39m\u001b[33m.\u001b[39m\u001b[36mfrom\u001b[39m(otherCursors\u001b[33m.\u001b[39mentries())\u001b[33m.\u001b[39mmap(([userId\u001b[33m,\u001b[39m pos]) \u001b[33m=>\u001b[39m (\n     \u001b[90m 89 |\u001b[39m               \u001b[33m<\u001b[39m\u001b[33mdiv\u001b[39m key\u001b[33m=\u001b[39m{userId} data\u001b[33m-\u001b[39mtestid\u001b[33m=\u001b[39m{\u001b[32m`cursor-${userId}`\u001b[39m}\u001b[33m>\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 90 |\u001b[39m                 \u001b[33mUser\u001b[39m {userId}\u001b[33m:\u001b[39m {pos\u001b[33m.\u001b[39mx}\u001b[33m,\u001b[39m {pos\u001b[33m.\u001b[39my}\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 91 |\u001b[39m               \u001b[33m<\u001b[39m\u001b[33m/\u001b[39m\u001b[33mdiv\u001b[39m\u001b[33m>\u001b[39m\n     \u001b[90m 92 |\u001b[39m             ))}\n     \u001b[90m 93 |\u001b[39m           \u001b[33m<\u001b[39m\u001b[33m/\u001b[39m\u001b[33mdiv\u001b[39m\u001b[33m>\u001b[39m\u001b[0m\n\n      at x (__tests__/integration/comprehensive/collaboration-features.test.tsx:90:37)\n          at Array.map (<anonymous>)\n      at map (__tests__/integration/comprehensive/collaboration-features.test.tsx:88:49)\n      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:860:10)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.send (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:165:5)\n      at Object.send (__tests__/integration/comprehensive/collaboration-features.test.tsx:102:14)\n\n  \u25cf Collaboration Features Integration Tests \u203a Real-time Cursor Synchronization \u203a should handle multiple cursor updates efficiently\n\n    TypeError: Cannot convert undefined or null to object\n        at Object.entries (<anonymous>)\n\n    \u001b[0m \u001b[90m 120 |\u001b[39m             \u001b[36mconst\u001b[39m message \u001b[33m=\u001b[39m \u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mparse(event\u001b[33m.\u001b[39mdata)\u001b[33m;\u001b[39m\n     \u001b[90m 121 |\u001b[39m             \u001b[36mif\u001b[39m (message\u001b[33m.\u001b[39mtype \u001b[33m===\u001b[39m \u001b[32m'multi_cursor_update'\u001b[39m) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 122 |\u001b[39m               setCursors(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m(\u001b[33mObject\u001b[39m\u001b[33m.\u001b[39mentries(message\u001b[33m.\u001b[39mcursors)))\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 123 |\u001b[39m             }\n     \u001b[90m 124 |\u001b[39m           }\u001b[33m;\u001b[39m\n     \u001b[90m 125 |\u001b[39m           \u001b[0m\n\n      at Proxy.entries (__tests__/integration/comprehensive/collaboration-features.test.tsx:122:41)\n      at node_modules/mock-socket/dist/mock-socket.js:859:16\n          at Array.forEach (<anonymous>)\n      at Proxy.dispatchEvent (node_modules/mock-socket/dist/mock-socket.js:855:13)\n      at node_modules/mock-socket/dist/mock-socket.js:2133:16\n          at Array.forEach (<anonymous>)\n      at Server.emit (node_modules/mock-socket/dist/mock-socket.js:2121:16)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:166:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.send (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:165:5)\n      at Object.send (__tests__/integration/comprehensive/collaboration-features.test.tsx:145:14)\n\n  \u25cf Collaboration Features Integration Tests \u203a Presence and Activity Status \u203a should handle presence and activity status\n\n    expect(element).toHaveTextContent()\n\n    Expected element to have text content:\n      2 users online\n    Received:\n      1 users online\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html\u001b[39m\n      \u001b[33mdata-theme\u001b[39m=\u001b[32m\"dark\"\u001b[39m\n    \u001b[36m>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"active-count\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0m1\u001b[0m\n              \u001b[0m users online\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"typing-count\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0m0\u001b[0m\n              \u001b[0m users typing\u001b[0m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 210 |\u001b[39m       \n     \u001b[90m 211 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 212 |\u001b[39m         expect(screen\u001b[33m.\u001b[39mgetByTestId(\u001b[32m'active-count'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'2 users online'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 213 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 214 |\u001b[39m       \n     \u001b[90m 215 |\u001b[39m       \u001b[90m// Simulate typing\u001b[39m\u001b[0m\n\n      at toHaveTextContent (__tests__/integration/comprehensive/collaboration-features.test.tsx:212:52)\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Collaboration Features Integration Tests \u203a Presence and Activity Status \u203a should handle user status with detailed information\n\n    TypeError: Cannot read properties of undefined (reading 'name')\n\n    \u001b[0m \u001b[90m 261 |\u001b[39m             {\u001b[33mArray\u001b[39m\u001b[33m.\u001b[39m\u001b[36mfrom\u001b[39m(users\u001b[33m.\u001b[39mentries())\u001b[33m.\u001b[39mmap(([userId\u001b[33m,\u001b[39m status]) \u001b[33m=>\u001b[39m (\n     \u001b[90m 262 |\u001b[39m               \u001b[33m<\u001b[39m\u001b[33mdiv\u001b[39m key\u001b[33m=\u001b[39m{userId} data\u001b[33m-\u001b[39mtestid\u001b[33m=\u001b[39m{\u001b[32m`user-${userId}`\u001b[39m}\u001b[33m>\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 263 |\u001b[39m                 {status\u001b[33m.\u001b[39mname} \u001b[33m-\u001b[39m {status\u001b[33m.\u001b[39mactivity} ({status\u001b[33m.\u001b[39mlastSeen})\n     \u001b[90m     |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 264 |\u001b[39m               \u001b[33m<\u001b[39m\u001b[33m/\u001b[39m\u001b[33mdiv\u001b[39m\u001b[33m>\u001b[39m\n     \u001b[90m 265 |\u001b[39m             ))}\n     \u001b[90m 266 |\u001b[39m           \u001b[33m<\u001b[39m\u001b[33m/\u001b[39m\u001b[33mdiv\u001b[39m\u001b[33m>\u001b[39m\u001b[0m\n\n      at name (__tests__/integration/comprehensive/collaboration-features.test.tsx:263:25)\n          at Array.map (<anonymous>)\n      at map (__tests__/integration/comprehensive/collaboration-features.test.tsx:261:42)\n      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:860:10)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.send (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:165:5)\n      at Object.send (__tests__/integration/comprehensive/collaboration-features.test.tsx:274:14)\n\n  \u25cf Navigation and Search Integration Tests \u203a Complex Navigation Flows \u203a should handle deep linking with state preservation\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"/chat/thread-1\"\n\n    Number of calls: 0\n\n    \u001b[0m \u001b[90m 108 |\u001b[39m       \u001b[36mconst\u001b[39m savedState \u001b[33m=\u001b[39m \u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mparse(sessionStorage\u001b[33m.\u001b[39mgetItem(\u001b[32m'nav_state'\u001b[39m) \u001b[33m||\u001b[39m \u001b[32m'{}'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 109 |\u001b[39m       expect(savedState\u001b[33m.\u001b[39m\u001b[36mfrom\u001b[39m)\u001b[33m.\u001b[39mtoBe(\u001b[32m'/'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 110 |\u001b[39m       expect(mockRouter\u001b[33m.\u001b[39mpush)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'/chat/thread-1'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 111 |\u001b[39m       \n     \u001b[90m 112 |\u001b[39m       \u001b[90m// Test navigation to another path\u001b[39m\n     \u001b[90m 113 |\u001b[39m       fireEvent\u001b[33m.\u001b[39mclick(getByText(\u001b[32m'Go to Settings'\u001b[39m))\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toHaveBeenCalledWith (__tests__/integration/comprehensive/navigation-search.test.tsx:110:31)\n\n  \u25cf Navigation and Search Integration Tests \u203a Complex Navigation Flows \u203a should handle protected route redirects\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"/auth/login\"\n\n    Number of calls: 0\n\n    \u001b[0m \u001b[90m 160 |\u001b[39m       expect(getByText(\u001b[32m'Redirecting to login...'\u001b[39m))\u001b[33m.\u001b[39mtoBeInTheDocument()\u001b[33m;\u001b[39m\n     \u001b[90m 161 |\u001b[39m       expect(sessionStorage\u001b[33m.\u001b[39mgetItem(\u001b[32m'redirect_after_login'\u001b[39m))\u001b[33m.\u001b[39mtoBe(\u001b[32m'/'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 162 |\u001b[39m       expect(mockRouter\u001b[33m.\u001b[39mpush)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'/auth/login'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 163 |\u001b[39m       \n     \u001b[90m 164 |\u001b[39m       \u001b[90m// Authenticate and rerender\u001b[39m\n     \u001b[90m 165 |\u001b[39m       act(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toHaveBeenCalledWith (__tests__/integration/comprehensive/navigation-search.test.tsx:162:31)\n\n  \u25cf Internationalization and WebSocket Resilience Tests \u203a WebSocket Resilience Integration \u203a should handle WebSocket message buffering during reconnection\n\n    expect(element).toHaveTextContent()\n\n    Expected element to have text content:\n      2 buffered\n    Received:\n      0 buffered\n\n    \u001b[0m \u001b[90m 444 |\u001b[39m       \n     \u001b[90m 445 |\u001b[39m       expect(messageBuffer\u001b[33m.\u001b[39mlength)\u001b[33m.\u001b[39mtoBe(\u001b[35m2\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 446 |\u001b[39m       expect(getByTestId(\u001b[32m'buffer-size'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'2 buffered'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 447 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 448 |\u001b[39m\n     \u001b[90m 449 |\u001b[39m     it(\u001b[32m'should implement exponential backoff for reconnection'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toHaveTextContent (__tests__/integration/comprehensive/i18n-websocket.test.tsx:446:42)\n\n  \u25cf Internationalization and WebSocket Resilience Tests \u203a WebSocket Resilience Integration \u203a should implement exponential backoff for reconnection\n\n    expect(received).toBeGreaterThanOrEqual(expected)\n\n    Expected: >= 860\n    Received:    628\n\n    \u001b[0m \u001b[90m 540 |\u001b[39m       \u001b[90m// Verify exponential backoff pattern\u001b[39m\n     \u001b[90m 541 |\u001b[39m       \u001b[36mif\u001b[39m (reconnectionDelays\u001b[33m.\u001b[39mlength \u001b[33m>=\u001b[39m \u001b[35m2\u001b[39m) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 542 |\u001b[39m         expect(reconnectionDelays[\u001b[35m1\u001b[39m])\u001b[33m.\u001b[39mtoBeGreaterThanOrEqual(reconnectionDelays[\u001b[35m0\u001b[39m])\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 543 |\u001b[39m       }\n     \u001b[90m 544 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 545 |\u001b[39m\u001b[0m\n\n      at Object.toBeGreaterThanOrEqual (__tests__/integration/comprehensive/i18n-websocket.test.tsx:542:39)\n\n  \u25cf Internationalization and WebSocket Resilience Tests \u203a WebSocket Resilience Integration \u203a should handle WebSocket heartbeat and keep-alive\n\n    expect(element).not.toHaveTextContent()\n\n    Expected element not to have text content:\n      None\n    Received:\n      None\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html\u001b[39m\n      \u001b[33mdata-theme\u001b[39m=\u001b[32m\"dark\"\u001b[39m\n      \u001b[33mdir\u001b[39m=\u001b[32m\"ltr\"\u001b[39m\n      \u001b[33mlang\u001b[39m=\u001b[32m\"zh\"\u001b[39m\n    \u001b[36m>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body\u001b[39m\n        \u001b[33mstyle\u001b[39m=\u001b[32m\"text-align: left;\"\u001b[39m\n      \u001b[36m>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"connection-health\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mhealthy\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"last-heartbeat\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mNone\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"heartbeat-interval\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0m1000\u001b[0m\n              \u001b[0mms\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"manual-heartbeat\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mSend Heartbeat\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"faster-heartbeat\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mFaster Heartbeat\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 615 |\u001b[39m       \n     \u001b[90m 616 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 617 |\u001b[39m         expect(getByTestId(\u001b[32m'last-heartbeat'\u001b[39m))\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'None'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 618 |\u001b[39m         expect(getByTestId(\u001b[32m'connection-health'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'healthy'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 619 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 620 |\u001b[39m       \u001b[0m\n\n      at toHaveTextContent (__tests__/integration/comprehensive/i18n-websocket.test.tsx:617:51)\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf End-to-End User Journey Integration Tests \u203a Complete Optimization Workflow \u203a should handle error scenarios in the workflow\n\n    expect(element).toHaveTextContent()\n\n    Expected element to have text content:\n      complete\n    Received:\n      analyze\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html\u001b[39m\n      \u001b[33mdata-theme\u001b[39m=\u001b[32m\"dark\"\u001b[39m\n      \u001b[33mdir\u001b[39m=\u001b[32m\"ltr\"\u001b[39m\n      \u001b[33mlang\u001b[39m=\u001b[32m\"zh\"\u001b[39m\n    \u001b[36m>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body\u001b[39m\n        \u001b[33mstyle\u001b[39m=\u001b[32m\"text-align: left;\"\u001b[39m\n      \u001b[36m>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"current-step\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0manalyze\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"retry-count\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0m1\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"error-messages\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mdata-testid\u001b[39m=\u001b[32m\"error-0\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[0mNetwork error. Please try again. (Attempt 1)\u001b[0m\n              \u001b[36m</div>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div>\u001b[39m\n              \u001b[36m<button\u001b[39m\n                \u001b[33mdata-testid\u001b[39m=\u001b[32m\"analyze\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[0mAnalyze\u001b[0m\n              \u001b[36m</button>\u001b[39m\n              \u001b[36m<button\u001b[39m\n                \u001b[33mdata-testid\u001b[39m=\u001b[32m\"reset\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[0mStart Over\u001b[0m\n              \u001b[36m</button>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 483 |\u001b[39m       \u001b[90m// Eventually should complete\u001b[39m\n     \u001b[90m 484 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 485 |\u001b[39m         expect(getByTestId(\u001b[32m'current-step'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'complete'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 486 |\u001b[39m       }\u001b[33m,\u001b[39m { timeout\u001b[33m:\u001b[39m \u001b[33mTEST_TIMEOUTS\u001b[39m\u001b[33m.\u001b[39m\u001b[33mMEDIUM\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 487 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 488 |\u001b[39m\u001b[0m\n\n      at toHaveTextContent (__tests__/integration/comprehensive/user-journey.test.tsx:485:45)\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf End-to-End User Journey Integration Tests \u203a Complex Multi-User Workflow \u203a should handle collaborative workflow with multiple users\n\n    expect(element).toHaveTextContent()\n\n    Expected element to have text content:\n      2 users\n    Received:\n      1 users\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html\u001b[39m\n      \u001b[33mdata-theme\u001b[39m=\u001b[32m\"dark\"\u001b[39m\n      \u001b[33mdir\u001b[39m=\u001b[32m\"ltr\"\u001b[39m\n      \u001b[33mlang\u001b[39m=\u001b[32m\"zh\"\u001b[39m\n    \u001b[36m>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body\u001b[39m\n        \u001b[33mstyle\u001b[39m=\u001b[32m\"text-align: left;\"\u001b[39m\n      \u001b[36m>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"current-step\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mplanning\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"user-count\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0m1\u001b[0m\n              \u001b[0m users\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"vote-count\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0m0\u001b[0m\n              \u001b[0m votes\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"decision-count\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0m0\u001b[0m\n              \u001b[0m decisions\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"vote-approve\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mVote Approve\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"vote-reject\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mVote Reject\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 653 |\u001b[39m       \n     \u001b[90m 654 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 655 |\u001b[39m         expect(getByTestId(\u001b[32m'user-count'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'2 users'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 656 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 657 |\u001b[39m       \n     \u001b[90m 658 |\u001b[39m       \u001b[90m// Simulate voting\u001b[39m\u001b[0m\n\n      at toHaveTextContent (__tests__/integration/comprehensive/user-journey.test.tsx:655:43)\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\nFAIL __tests__/integration/comprehensive/user-journey.test.tsx (5.734 s)\n  \u25cf End-to-End User Journey Integration Tests \u203a Complete Optimization Workflow \u203a should handle error scenarios in the workflow\n\n    expect(element).toHaveTextContent()\n\n    Expected element to have text content:\n      complete\n    Received:\n      analyze\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"current-step\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0manalyze\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"retry-count\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0m1\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"error-messages\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mdata-testid\u001b[39m=\u001b[32m\"error-0\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[0mNetwork error. Please try again. (Attempt 1)\u001b[0m\n              \u001b[36m</div>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div>\u001b[39m\n              \u001b[36m<button\u001b[39m\n                \u001b[33mdata-testid\u001b[39m=\u001b[32m\"analyze\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[0mAnalyze\u001b[0m\n              \u001b[36m</button>\u001b[39m\n              \u001b[36m<button\u001b[39m\n                \u001b[33mdata-testid\u001b[39m=\u001b[32m\"reset\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[0mStart Over\u001b[0m\n              \u001b[36m</button>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 483 |\u001b[39m       \u001b[90m// Eventually should complete\u001b[39m\n     \u001b[90m 484 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 485 |\u001b[39m         expect(getByTestId(\u001b[32m'current-step'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'complete'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 486 |\u001b[39m       }\u001b[33m,\u001b[39m { timeout\u001b[33m:\u001b[39m \u001b[33mTEST_TIMEOUTS\u001b[39m\u001b[33m.\u001b[39m\u001b[33mMEDIUM\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 487 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 488 |\u001b[39m\u001b[0m\n\n      at toHaveTextContent (__tests__/integration/comprehensive/user-journey.test.tsx:485:45)\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf End-to-End User Journey Integration Tests \u203a Complex Multi-User Workflow \u203a should handle collaborative workflow with multiple users\n\n    expect(element).toHaveTextContent()\n\n    Expected element to have text content:\n      2 users\n    Received:\n      1 users\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"current-step\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mplanning\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"user-count\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0m1\u001b[0m\n              \u001b[0m users\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"vote-count\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0m0\u001b[0m\n              \u001b[0m votes\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"decision-count\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0m0\u001b[0m\n              \u001b[0m decisions\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"vote-approve\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mVote Approve\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"vote-reject\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mVote Reject\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 653 |\u001b[39m       \n     \u001b[90m 654 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 655 |\u001b[39m         expect(getByTestId(\u001b[32m'user-count'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'2 users'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 656 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 657 |\u001b[39m       \n     \u001b[90m 658 |\u001b[39m       \u001b[90m// Simulate voting\u001b[39m\u001b[0m\n\n      at toHaveTextContent (__tests__/integration/comprehensive/user-journey.test.tsx:655:43)\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\nFAIL __tests__/integration/infrastructure.test.tsx\n  \u25cf Background Task Processing \u203a should handle task failures and retries\n\n    expect(element).toHaveTextContent()\n\n    Expected element to have text content:\n      Attempts: 3\n    Received:\n      Attempts: 1\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<button>\u001b[39m\n              \u001b[0mExecute Task\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"retry-count\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mAttempts: \u001b[0m\n              \u001b[0m1\u001b[0m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 428 |\u001b[39m     \n     \u001b[90m 429 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 430 |\u001b[39m       expect(getByTestId(\u001b[32m'retry-count'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'Attempts: 3'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 431 |\u001b[39m       expect(getByTestId(\u001b[32m'final-status'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'Success'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 432 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 433 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n\n      at toHaveTextContent (__tests__/integration/infrastructure.test.tsx:430:42)\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Background Task Processing \u203a should handle task failures and retries\n\n    Failed\n\n    \u001b[0m \u001b[90m 415 |\u001b[39m     \u001b[90m// Mock failures then success\u001b[39m\n     \u001b[90m 416 |\u001b[39m     (fetch \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 417 |\u001b[39m       \u001b[33m.\u001b[39mmockRejectedValueOnce(\u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Failed'\u001b[39m))\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 418 |\u001b[39m       \u001b[33m.\u001b[39mmockRejectedValueOnce(\u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Failed'\u001b[39m))\n     \u001b[90m 419 |\u001b[39m       \u001b[33m.\u001b[39mmockResolvedValueOnce({ ok\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 420 |\u001b[39m     \u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/infrastructure.test.tsx:417:30)\n\n  \u25cf Background Task Processing \u203a should handle task failures and retries\n\n    Failed\n\n    \u001b[0m \u001b[90m 415 |\u001b[39m     \u001b[90m// Mock failures then success\u001b[39m\n     \u001b[90m 416 |\u001b[39m     (fetch \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 417 |\u001b[39m       \u001b[33m.\u001b[39mmockRejectedValueOnce(\u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Failed'\u001b[39m))\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 418 |\u001b[39m       \u001b[33m.\u001b[39mmockRejectedValueOnce(\u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Failed'\u001b[39m))\n     \u001b[90m 419 |\u001b[39m       \u001b[33m.\u001b[39mmockResolvedValueOnce({ ok\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 420 |\u001b[39m     \u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/infrastructure.test.tsx:417:30)\n\n  \u25cf Background Task Processing \u203a should handle task failures and retries\n\n    Failed\n\n    \u001b[0m \u001b[90m 415 |\u001b[39m     \u001b[90m// Mock failures then success\u001b[39m\n     \u001b[90m 416 |\u001b[39m     (fetch \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 417 |\u001b[39m       \u001b[33m.\u001b[39mmockRejectedValueOnce(\u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Failed'\u001b[39m))\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 418 |\u001b[39m       \u001b[33m.\u001b[39mmockRejectedValueOnce(\u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Failed'\u001b[39m))\n     \u001b[90m 419 |\u001b[39m       \u001b[33m.\u001b[39mmockResolvedValueOnce({ ok\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 420 |\u001b[39m     \u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/infrastructure.test.tsx:417:30)\n\n  \u25cf Background Task Processing \u203a should handle task failures and retries\n\n    Failed\n\n    \u001b[0m \u001b[90m 415 |\u001b[39m     \u001b[90m// Mock failures then success\u001b[39m\n     \u001b[90m 416 |\u001b[39m     (fetch \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 417 |\u001b[39m       \u001b[33m.\u001b[39mmockRejectedValueOnce(\u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Failed'\u001b[39m))\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 418 |\u001b[39m       \u001b[33m.\u001b[39mmockRejectedValueOnce(\u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Failed'\u001b[39m))\n     \u001b[90m 419 |\u001b[39m       \u001b[33m.\u001b[39mmockResolvedValueOnce({ ok\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 420 |\u001b[39m     \u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/infrastructure.test.tsx:417:30)\n\n  \u25cf Error Context and Tracing \u203a should capture and display error context\n\n    expect(element).toHaveTextContent()\n\n    Expected element to have text content:\n      Error: Internal server error\n    Received:\n      Error: FailedTrace: trace-789\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<button>\u001b[39m\n              \u001b[0mTrigger Error\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"error\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div>\u001b[39m\n                \u001b[0mError: \u001b[0m\n                \u001b[0mFailed\u001b[0m\n              \u001b[36m</div>\u001b[39m\n              \u001b[36m<div>\u001b[39m\n                \u001b[0mTrace: \u001b[0m\n                \u001b[0mtrace-789\u001b[0m\n              \u001b[36m</div>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 482 |\u001b[39m     \n     \u001b[90m 483 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 484 |\u001b[39m       expect(getByTestId(\u001b[32m'error'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'Error: Internal server error'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 485 |\u001b[39m       expect(getByTestId(\u001b[32m'error'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'Trace: trace-789'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 486 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 487 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n\n      at toHaveTextContent (__tests__/integration/infrastructure.test.tsx:484:36)\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\nFAIL __tests__/integration/collaboration-state.test.tsx\n  \u25cf State Persistence and Recovery \u203a should persist application state across sessions\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"app_state\", \"{\\\"version\\\":2,\\\"timestamp\\\":1755215881571,\\\"data\\\":{\\\"user_preferences\\\":{\\\"theme\\\":\\\"dark\\\",\\\"language\\\":\\\"en\\\"},\\\"session_data\\\":{\\\"last_thread\\\":\\\"thread-123\\\"},\\\"cached_results\\\":{\\\"optimization_1\\\":{\\\"result\\\":\\\"cached\\\"}}}}\"\n\n    Number of calls: 0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<button>\u001b[39m\n              \u001b[0mSave State\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button>\u001b[39m\n              \u001b[0mLoad State\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"state\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div>\u001b[39m\n                \u001b[0mTheme: \u001b[0m\n                \u001b[0mdark\u001b[0m\n              \u001b[36m</div>\u001b[39m\n              \u001b[36m<div>\u001b[39m\n                \u001b[0mLast thread: \u001b[0m\n                \u001b[0mthread-123\u001b[0m\n              \u001b[36m</div>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 371 |\u001b[39m     \n     \u001b[90m 372 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 373 |\u001b[39m       expect(localStorageMock\u001b[33m.\u001b[39msetItem)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\n     \u001b[90m     |\u001b[39m                                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 374 |\u001b[39m         \u001b[32m'app_state'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 375 |\u001b[39m         \u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mstringify(mockPersistedState)\n     \u001b[90m 376 |\u001b[39m       )\u001b[33m;\u001b[39m\u001b[0m\n\n      at toHaveBeenCalledWith (__tests__/integration/collaboration-state.test.tsx:373:40)\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf State Persistence and Recovery \u203a should recover from corrupted state gracefully\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"app_state\"\n\n    Number of calls: 0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<button>\u001b[39m\n              \u001b[0mLoad State\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"error\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mState corrupted, using defaults\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"state\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mState loaded\u001b[0m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 434 |\u001b[39m       expect(getByTestId(\u001b[32m'error'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'State corrupted, using defaults'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 435 |\u001b[39m       expect(getByTestId(\u001b[32m'state'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'State loaded'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 436 |\u001b[39m       expect(localStorageMock\u001b[33m.\u001b[39mremoveItem)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'app_state'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 437 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 438 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 439 |\u001b[39m\u001b[0m\n\n      at toHaveBeenCalledWith (__tests__/integration/collaboration-state.test.tsx:436:43)\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf State Persistence and Recovery \u203a should migrate state between versions\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<button>\u001b[39m\n              \u001b[0mMigrate State\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"migrated\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mState migrated to v2\u001b[0m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 480 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n     \u001b[90m 481 |\u001b[39m       expect(getByTestId(\u001b[32m'migrated'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'State migrated to v2'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 482 |\u001b[39m       expect(localStorageMock\u001b[33m.\u001b[39msetItem)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 483 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 484 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 485 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at toHaveBeenCalled (__tests__/integration/collaboration-state.test.tsx:482:40)\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\nFAIL __tests__/integration/comprehensive/i18n-websocket.test.tsx\n  \u25cf Internationalization and WebSocket Resilience Tests \u203a WebSocket Resilience Integration \u203a should handle WebSocket message buffering during reconnection\n\n    expect(element).toHaveTextContent()\n\n    Expected element to have text content:\n      2 buffered\n    Received:\n      0 buffered\n\n    \u001b[0m \u001b[90m 444 |\u001b[39m       \n     \u001b[90m 445 |\u001b[39m       expect(messageBuffer\u001b[33m.\u001b[39mlength)\u001b[33m.\u001b[39mtoBe(\u001b[35m2\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 446 |\u001b[39m       expect(getByTestId(\u001b[32m'buffer-size'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'2 buffered'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 447 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 448 |\u001b[39m\n     \u001b[90m 449 |\u001b[39m     it(\u001b[32m'should implement exponential backoff for reconnection'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toHaveTextContent (__tests__/integration/comprehensive/i18n-websocket.test.tsx:446:42)\n\n  \u25cf Internationalization and WebSocket Resilience Tests \u203a WebSocket Resilience Integration \u203a should implement exponential backoff for reconnection\n\n    expect(received).toBeGreaterThanOrEqual(expected)\n\n    Expected: >= 823\n    Received:    631\n\n    \u001b[0m \u001b[90m 540 |\u001b[39m       \u001b[90m// Verify exponential backoff pattern\u001b[39m\n     \u001b[90m 541 |\u001b[39m       \u001b[36mif\u001b[39m (reconnectionDelays\u001b[33m.\u001b[39mlength \u001b[33m>=\u001b[39m \u001b[35m2\u001b[39m) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 542 |\u001b[39m         expect(reconnectionDelays[\u001b[35m1\u001b[39m])\u001b[33m.\u001b[39mtoBeGreaterThanOrEqual(reconnectionDelays[\u001b[35m0\u001b[39m])\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 543 |\u001b[39m       }\n     \u001b[90m 544 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 545 |\u001b[39m\u001b[0m\n\n      at Object.toBeGreaterThanOrEqual (__tests__/integration/comprehensive/i18n-websocket.test.tsx:542:39)\n\n  \u25cf Internationalization and WebSocket Resilience Tests \u203a WebSocket Resilience Integration \u203a should handle WebSocket heartbeat and keep-alive\n\n    expect(element).not.toHaveTextContent()\n\n    Expected element not to have text content:\n      None\n    Received:\n      None\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html\u001b[39m\n      \u001b[33mdir\u001b[39m=\u001b[32m\"ltr\"\u001b[39m\n      \u001b[33mlang\u001b[39m=\u001b[32m\"zh\"\u001b[39m\n    \u001b[36m>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body\u001b[39m\n        \u001b[33mstyle\u001b[39m=\u001b[32m\"text-align: left;\"\u001b[39m\n      \u001b[36m>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"connection-health\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mhealthy\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"last-heartbeat\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mNone\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"heartbeat-interval\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0m1000\u001b[0m\n              \u001b[0mms\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"manual-heartbeat\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mSend Heartbeat\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"faster-heartbeat\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mFaster Heartbeat\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 615 |\u001b[39m       \n     \u001b[90m 616 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 617 |\u001b[39m         expect(getByTestId(\u001b[32m'last-heartbeat'\u001b[39m))\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'None'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 618 |\u001b[39m         expect(getByTestId(\u001b[32m'connection-health'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'healthy'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 619 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 620 |\u001b[39m       \u001b[0m\n\n      at toHaveTextContent (__tests__/integration/comprehensive/i18n-websocket.test.tsx:617:51)\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\nFAIL __tests__/integration/comprehensive-integration-fixed.test.tsx\n  \u25cf Comprehensive Frontend Integration Tests \u203a 1. Corpus Management Integration \u203a should upload documents to corpus and process with embeddings\n\n    expect(received).toHaveLength(expected)\n\n    Expected length: 1\n    Received length: 0\n    Received array:  []\n\n    \u001b[0m \u001b[90m 161 |\u001b[39m       \u001b[36mawait\u001b[39m uploadDocument(file)\u001b[33m;\u001b[39m\n     \u001b[90m 162 |\u001b[39m       \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 163 |\u001b[39m       expect(useCorpusStore\u001b[33m.\u001b[39mgetState()\u001b[33m.\u001b[39mdocuments)\u001b[33m.\u001b[39mtoHaveLength(\u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 164 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 165 |\u001b[39m\n     \u001b[90m 166 |\u001b[39m     it(\u001b[32m'should search corpus with semantic similarity'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toHaveLength (__tests__/integration/comprehensive-integration-fixed.test.tsx:163:51)\n\nFAIL __tests__/integration/advanced-integration/offline-navigation.test.tsx\n  \u25cf Offline Mode and Navigation Integration \u203a Complex Navigation Flows \u203a should handle protected route redirects\n\n    TypeError: screen.getByTestId is not a function\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"protected-content\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mProtected Content\u001b[0m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 253 |\u001b[39m       \n     \u001b[90m 254 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 255 |\u001b[39m         expect(screen\u001b[33m.\u001b[39mgetByTestId(\u001b[32m'protected-content'\u001b[39m))\u001b[33m.\u001b[39mtoBeInTheDocument()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 256 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 257 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 258 |\u001b[39m\u001b[0m\n\n      at getByTestId (__tests__/integration/advanced-integration/offline-navigation.test.tsx:255:23)\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Offline Mode and Navigation Integration \u203a Complex Navigation Flows \u203a should handle navigation with query parameters\n\n    TestingLibraryElementError: Unable to find an element by: [data-testid=\"select\"]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"query-string\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0msort=date&page=1\u001b[0m\n          \u001b[36m</div>\u001b[39m\n          \u001b[36m<select>\u001b[39m\n            \u001b[36m<option\u001b[39m\n              \u001b[33mvalue\u001b[39m=\u001b[32m\"\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mAll\u001b[0m\n            \u001b[36m</option>\u001b[39m\n            \u001b[36m<option\u001b[39m\n              \u001b[33mvalue\u001b[39m=\u001b[32m\"tech\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mTech\u001b[0m\n            \u001b[36m</option>\u001b[39m\n            \u001b[36m<option\u001b[39m\n              \u001b[33mvalue\u001b[39m=\u001b[32m\"business\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mBusiness\u001b[0m\n            \u001b[36m</option>\u001b[39m\n          \u001b[36m</select>\u001b[39m\n          \u001b[36m<button>\u001b[39m\n            \u001b[0mNext Page\u001b[0m\n          \u001b[36m</button>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</div>\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n    \u001b[0m \u001b[90m 302 |\u001b[39m       \n     \u001b[90m 303 |\u001b[39m       \u001b[90m// Update category\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 304 |\u001b[39m       fireEvent\u001b[33m.\u001b[39mchange(getByTestId(\u001b[32m'select'\u001b[39m)\u001b[33m,\u001b[39m { target\u001b[33m:\u001b[39m { value\u001b[33m:\u001b[39m \u001b[32m'tech'\u001b[39m } })\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 305 |\u001b[39m       \n     \u001b[90m 306 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n     \u001b[90m 307 |\u001b[39m         expect(getByTestId(\u001b[32m'query-string'\u001b[39m))\u001b[33m.\u001b[39mtoContain(\u001b[32m'category=tech'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)\n      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38\n      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17\n      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19\n      at Object.getByTestId (__tests__/integration/advanced-integration/offline-navigation.test.tsx:304:24)\n\nFAIL __tests__/integration/comprehensive-integration.test.tsx\n  \u25cf Corpus Management Integration \u203a should upload documents to corpus and update UI\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Corpus Management Integration \u203a should upload documents to corpus and update UI\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Corpus Management Integration \u203a should upload documents to corpus and update UI\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Corpus Management Integration \u203a should upload documents to corpus and update UI\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Corpus Management Integration \u203a should upload documents to corpus and update UI\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Corpus Management Integration \u203a should upload documents to corpus and update UI\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Corpus Management Integration \u203a should search corpus with embeddings\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Corpus Management Integration \u203a should search corpus with embeddings\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Corpus Management Integration \u203a should search corpus with embeddings\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Corpus Management Integration \u203a should search corpus with embeddings\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Corpus Management Integration \u203a should search corpus with embeddings\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Corpus Management Integration \u203a should search corpus with embeddings\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Synthetic Data Generation Flow \u203a should generate synthetic data based on user input\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Synthetic Data Generation Flow \u203a should generate synthetic data based on user input\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Synthetic Data Generation Flow \u203a should generate synthetic data based on user input\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Synthetic Data Generation Flow \u203a should generate synthetic data based on user input\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Synthetic Data Generation Flow \u203a should generate synthetic data based on user input\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Synthetic Data Generation Flow \u203a should generate synthetic data based on user input\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Synthetic Data Generation Flow \u203a should export synthetic data in multiple formats\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Synthetic Data Generation Flow \u203a should export synthetic data in multiple formats\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Synthetic Data Generation Flow \u203a should export synthetic data in multiple formats\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Synthetic Data Generation Flow \u203a should export synthetic data in multiple formats\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Synthetic Data Generation Flow \u203a should export synthetic data in multiple formats\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Synthetic Data Generation Flow \u203a should export synthetic data in multiple formats\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Generation Service Integration \u203a should handle batch generation jobs\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Generation Service Integration \u203a should handle batch generation jobs\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Generation Service Integration \u203a should handle batch generation jobs\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Generation Service Integration \u203a should handle batch generation jobs\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Generation Service Integration \u203a should handle batch generation jobs\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Generation Service Integration \u203a should handle batch generation jobs\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Generation Service Integration \u203a should stream generation progress via WebSocket\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Generation Service Integration \u203a should stream generation progress via WebSocket\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Generation Service Integration \u203a should stream generation progress via WebSocket\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Generation Service Integration \u203a should stream generation progress via WebSocket\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Generation Service Integration \u203a should stream generation progress via WebSocket\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Generation Service Integration \u203a should stream generation progress via WebSocket\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf LLM Cache Management Integration \u203a should clear LLM cache and update UI\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf LLM Cache Management Integration \u203a should clear LLM cache and update UI\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf LLM Cache Management Integration \u203a should clear LLM cache and update UI\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf LLM Cache Management Integration \u203a should clear LLM cache and update UI\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf LLM Cache Management Integration \u203a should clear LLM cache and update UI\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf LLM Cache Management Integration \u203a should clear LLM cache and update UI\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf LLM Cache Management Integration \u203a should update cache TTL settings\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf LLM Cache Management Integration \u203a should update cache TTL settings\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf LLM Cache Management Integration \u203a should update cache TTL settings\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf LLM Cache Management Integration \u203a should update cache TTL settings\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf LLM Cache Management Integration \u203a should update cache TTL settings\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf LLM Cache Management Integration \u203a should update cache TTL settings\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Supply Catalog Integration \u203a should load and display supply catalog\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Supply Catalog Integration \u203a should load and display supply catalog\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Supply Catalog Integration \u203a should load and display supply catalog\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Supply Catalog Integration \u203a should load and display supply catalog\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Supply Catalog Integration \u203a should load and display supply catalog\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Supply Catalog Integration \u203a should load and display supply catalog\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Supply Catalog Integration \u203a should switch between different model providers\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Supply Catalog Integration \u203a should switch between different model providers\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Supply Catalog Integration \u203a should switch between different model providers\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Supply Catalog Integration \u203a should switch between different model providers\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Supply Catalog Integration \u203a should switch between different model providers\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Supply Catalog Integration \u203a should switch between different model providers\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Configuration Management \u203a should load and display configuration\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Configuration Management \u203a should load and display configuration\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Configuration Management \u203a should load and display configuration\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Configuration Management \u203a should load and display configuration\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Configuration Management \u203a should load and display configuration\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Configuration Management \u203a should load and display configuration\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Configuration Management \u203a should update nested configuration values\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Configuration Management \u203a should update nested configuration values\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Configuration Management \u203a should update nested configuration values\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Configuration Management \u203a should update nested configuration values\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Configuration Management \u203a should update nested configuration values\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Configuration Management \u203a should update nested configuration values\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Health Check Monitoring \u203a should fetch and display system health status\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Health Check Monitoring \u203a should fetch and display system health status\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Health Check Monitoring \u203a should fetch and display system health status\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Health Check Monitoring \u203a should fetch and display system health status\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Health Check Monitoring \u203a should fetch and display system health status\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Health Check Monitoring \u203a should fetch and display system health status\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf OAuth Secrets Management \u203a should handle OAuth token refresh\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf OAuth Secrets Management \u203a should handle OAuth token refresh\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf OAuth Secrets Management \u203a should handle OAuth token refresh\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf OAuth Secrets Management \u203a should handle OAuth token refresh\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf OAuth Secrets Management \u203a should handle OAuth token refresh\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf OAuth Secrets Management \u203a should handle OAuth token refresh\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf OAuth Secrets Management \u203a should manage secrets securely\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf OAuth Secrets Management \u203a should manage secrets securely\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf OAuth Secrets Management \u203a should manage secrets securely\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf OAuth Secrets Management \u203a should manage secrets securely\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf OAuth Secrets Management \u203a should manage secrets securely\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf OAuth Secrets Management \u203a should manage secrets securely\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Security Service Integration \u203a should validate user permissions for protected resources\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Security Service Integration \u203a should validate user permissions for protected resources\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Security Service Integration \u203a should validate user permissions for protected resources\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Security Service Integration \u203a should validate user permissions for protected resources\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Security Service Integration \u203a should validate user permissions for protected resources\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Security Service Integration \u203a should validate user permissions for protected resources\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Security Service Integration \u203a should handle security token rotation\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Security Service Integration \u203a should handle security token rotation\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Security Service Integration \u203a should handle security token rotation\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Security Service Integration \u203a should handle security token rotation\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Security Service Integration \u203a should handle security token rotation\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Security Service Integration \u203a should handle security token rotation\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Key Manager Integration \u203a should manage API keys lifecycle\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Key Manager Integration \u203a should manage API keys lifecycle\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Key Manager Integration \u203a should manage API keys lifecycle\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Key Manager Integration \u203a should manage API keys lifecycle\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Key Manager Integration \u203a should manage API keys lifecycle\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Key Manager Integration \u203a should manage API keys lifecycle\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Key Manager Integration \u203a should revoke compromised keys\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Key Manager Integration \u203a should revoke compromised keys\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Key Manager Integration \u203a should revoke compromised keys\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Key Manager Integration \u203a should revoke compromised keys\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Key Manager Integration \u203a should revoke compromised keys\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Key Manager Integration \u203a should revoke compromised keys\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Admin Functionality Integration \u203a should manage user roles and permissions\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Admin Functionality Integration \u203a should manage user roles and permissions\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Admin Functionality Integration \u203a should manage user roles and permissions\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Admin Functionality Integration \u203a should manage user roles and permissions\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Admin Functionality Integration \u203a should manage user roles and permissions\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Admin Functionality Integration \u203a should manage user roles and permissions\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Admin Functionality Integration \u203a should access admin-only endpoints with proper auth\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Admin Functionality Integration \u203a should access admin-only endpoints with proper auth\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Admin Functionality Integration \u203a should access admin-only endpoints with proper auth\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Admin Functionality Integration \u203a should access admin-only endpoints with proper auth\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Admin Functionality Integration \u203a should access admin-only endpoints with proper auth\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Admin Functionality Integration \u203a should access admin-only endpoints with proper auth\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Database Repository Pattern Integration \u203a should perform CRUD operations through repositories\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Database Repository Pattern Integration \u203a should perform CRUD operations through repositories\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Database Repository Pattern Integration \u203a should perform CRUD operations through repositories\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Database Repository Pattern Integration \u203a should perform CRUD operations through repositories\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Database Repository Pattern Integration \u203a should perform CRUD operations through repositories\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Database Repository Pattern Integration \u203a should perform CRUD operations through repositories\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Database Repository Pattern Integration \u203a should handle database transactions\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Database Repository Pattern Integration \u203a should handle database transactions\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Database Repository Pattern Integration \u203a should handle database transactions\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Database Repository Pattern Integration \u203a should handle database transactions\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Database Repository Pattern Integration \u203a should handle database transactions\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Database Repository Pattern Integration \u203a should handle database transactions\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Redis Caching Integration \u203a should cache frequently accessed data\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Redis Caching Integration \u203a should cache frequently accessed data\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Redis Caching Integration \u203a should cache frequently accessed data\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Redis Caching Integration \u203a should cache frequently accessed data\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Redis Caching Integration \u203a should cache frequently accessed data\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Redis Caching Integration \u203a should cache frequently accessed data\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Redis Caching Integration \u203a should invalidate cache on data updates\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Redis Caching Integration \u203a should invalidate cache on data updates\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Redis Caching Integration \u203a should invalidate cache on data updates\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Redis Caching Integration \u203a should invalidate cache on data updates\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Redis Caching Integration \u203a should invalidate cache on data updates\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Redis Caching Integration \u203a should invalidate cache on data updates\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf ClickHouse Analytics Integration \u203a should query analytics data from ClickHouse\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf ClickHouse Analytics Integration \u203a should query analytics data from ClickHouse\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf ClickHouse Analytics Integration \u203a should query analytics data from ClickHouse\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf ClickHouse Analytics Integration \u203a should query analytics data from ClickHouse\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf ClickHouse Analytics Integration \u203a should query analytics data from ClickHouse\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf ClickHouse Analytics Integration \u203a should query analytics data from ClickHouse\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf ClickHouse Analytics Integration \u203a should aggregate metrics in real-time\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf ClickHouse Analytics Integration \u203a should aggregate metrics in real-time\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf ClickHouse Analytics Integration \u203a should aggregate metrics in real-time\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf ClickHouse Analytics Integration \u203a should aggregate metrics in real-time\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf ClickHouse Analytics Integration \u203a should aggregate metrics in real-time\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf ClickHouse Analytics Integration \u203a should aggregate metrics in real-time\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Background Task Processing \u203a should queue and process background tasks\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Background Task Processing \u203a should queue and process background tasks\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Background Task Processing \u203a should queue and process background tasks\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Background Task Processing \u203a should queue and process background tasks\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Background Task Processing \u203a should queue and process background tasks\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Background Task Processing \u203a should queue and process background tasks\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Background Task Processing \u203a should handle task failures and retries\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Background Task Processing \u203a should handle task failures and retries\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Background Task Processing \u203a should handle task failures and retries\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Background Task Processing \u203a should handle task failures and retries\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Background Task Processing \u203a should handle task failures and retries\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Background Task Processing \u203a should handle task failures and retries\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Error Context and Tracing \u203a should capture and display error context\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Error Context and Tracing \u203a should capture and display error context\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Error Context and Tracing \u203a should capture and display error context\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Error Context and Tracing \u203a should capture and display error context\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Error Context and Tracing \u203a should capture and display error context\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Error Context and Tracing \u203a should capture and display error context\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Demo Mode Functionality \u203a should enable demo mode with limited features\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Demo Mode Functionality \u203a should enable demo mode with limited features\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Demo Mode Functionality \u203a should enable demo mode with limited features\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Demo Mode Functionality \u203a should enable demo mode with limited features\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Demo Mode Functionality \u203a should enable demo mode with limited features\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Demo Mode Functionality \u203a should enable demo mode with limited features\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Demo Mode Functionality \u203a should simulate data in demo mode\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Demo Mode Functionality \u203a should simulate data in demo mode\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Demo Mode Functionality \u203a should simulate data in demo mode\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Demo Mode Functionality \u203a should simulate data in demo mode\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Demo Mode Functionality \u203a should simulate data in demo mode\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Demo Mode Functionality \u203a should simulate data in demo mode\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Enterprise Demo Features \u203a should showcase enterprise optimization features\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Enterprise Demo Features \u203a should showcase enterprise optimization features\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Enterprise Demo Features \u203a should showcase enterprise optimization features\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Enterprise Demo Features \u203a should showcase enterprise optimization features\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Enterprise Demo Features \u203a should showcase enterprise optimization features\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Enterprise Demo Features \u203a should showcase enterprise optimization features\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Enterprise Demo Features \u203a should display ROI calculations\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Enterprise Demo Features \u203a should display ROI calculations\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Enterprise Demo Features \u203a should display ROI calculations\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Enterprise Demo Features \u203a should display ROI calculations\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Enterprise Demo Features \u203a should display ROI calculations\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Enterprise Demo Features \u203a should display ROI calculations\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf PDF and Image Processing \u203a should extract text from PDF files\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf PDF and Image Processing \u203a should extract text from PDF files\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf PDF and Image Processing \u203a should extract text from PDF files\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf PDF and Image Processing \u203a should extract text from PDF files\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf PDF and Image Processing \u203a should extract text from PDF files\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf PDF and Image Processing \u203a should extract text from PDF files\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf PDF and Image Processing \u203a should analyze images using vision models\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf PDF and Image Processing \u203a should analyze images using vision models\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf PDF and Image Processing \u203a should analyze images using vision models\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf PDF and Image Processing \u203a should analyze images using vision models\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf PDF and Image Processing \u203a should analyze images using vision models\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf PDF and Image Processing \u203a should analyze images using vision models\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Export and Import Functionality \u203a should export data in multiple formats\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Export and Import Functionality \u203a should export data in multiple formats\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Export and Import Functionality \u203a should export data in multiple formats\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Export and Import Functionality \u203a should export data in multiple formats\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Export and Import Functionality \u203a should export data in multiple formats\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Export and Import Functionality \u203a should export data in multiple formats\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Export and Import Functionality \u203a should import and validate data\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Export and Import Functionality \u203a should import and validate data\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Export and Import Functionality \u203a should import and validate data\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Export and Import Functionality \u203a should import and validate data\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Export and Import Functionality \u203a should import and validate data\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Export and Import Functionality \u203a should import and validate data\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Real-time Metrics Dashboard \u203a should display live performance metrics\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Real-time Metrics Dashboard \u203a should display live performance metrics\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Real-time Metrics Dashboard \u203a should display live performance metrics\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Real-time Metrics Dashboard \u203a should display live performance metrics\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Real-time Metrics Dashboard \u203a should display live performance metrics\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Real-time Metrics Dashboard \u203a should display live performance metrics\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Agent Tool Dispatcher Integration \u203a should dispatch tools to appropriate agents\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Agent Tool Dispatcher Integration \u203a should dispatch tools to appropriate agents\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Agent Tool Dispatcher Integration \u203a should dispatch tools to appropriate agents\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Agent Tool Dispatcher Integration \u203a should dispatch tools to appropriate agents\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Agent Tool Dispatcher Integration \u203a should dispatch tools to appropriate agents\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Agent Tool Dispatcher Integration \u203a should dispatch tools to appropriate agents\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Collaboration Features \u203a should share threads with team members\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Collaboration Features \u203a should share threads with team members\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Collaboration Features \u203a should share threads with team members\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Collaboration Features \u203a should share threads with team members\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Collaboration Features \u203a should share threads with team members\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Collaboration Features \u203a should share threads with team members\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Collaboration Features \u203a should sync collaborative edits in real-time\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Collaboration Features \u203a should sync collaborative edits in real-time\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Collaboration Features \u203a should sync collaborative edits in real-time\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Collaboration Features \u203a should sync collaborative edits in real-time\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Collaboration Features \u203a should sync collaborative edits in real-time\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Collaboration Features \u203a should sync collaborative edits in real-time\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Collaboration Features \u203a should handle presence awareness\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Collaboration Features \u203a should handle presence awareness\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Collaboration Features \u203a should handle presence awareness\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Collaboration Features \u203a should handle presence awareness\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Collaboration Features \u203a should handle presence awareness\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Collaboration Features \u203a should handle presence awareness\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Jupyter Notebook Support \u203a should execute notebook cells\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Jupyter Notebook Support \u203a should execute notebook cells\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Jupyter Notebook Support \u203a should execute notebook cells\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Jupyter Notebook Support \u203a should execute notebook cells\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Jupyter Notebook Support \u203a should execute notebook cells\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Jupyter Notebook Support \u203a should execute notebook cells\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Jupyter Notebook Support \u203a should render notebook visualizations\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Jupyter Notebook Support \u203a should render notebook visualizations\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Jupyter Notebook Support \u203a should render notebook visualizations\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Jupyter Notebook Support \u203a should render notebook visualizations\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Jupyter Notebook Support \u203a should render notebook visualizations\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Jupyter Notebook Support \u203a should render notebook visualizations\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf State Persistence and Recovery \u203a should persist application state across sessions\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf State Persistence and Recovery \u203a should persist application state across sessions\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf State Persistence and Recovery \u203a should persist application state across sessions\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf State Persistence and Recovery \u203a should persist application state across sessions\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf State Persistence and Recovery \u203a should persist application state across sessions\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf State Persistence and Recovery \u203a should persist application state across sessions\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf State Persistence and Recovery \u203a should recover from corrupted state gracefully\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf State Persistence and Recovery \u203a should recover from corrupted state gracefully\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf State Persistence and Recovery \u203a should recover from corrupted state gracefully\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf State Persistence and Recovery \u203a should recover from corrupted state gracefully\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf State Persistence and Recovery \u203a should recover from corrupted state gracefully\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf State Persistence and Recovery \u203a should recover from corrupted state gracefully\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf State Persistence and Recovery \u203a should migrate state between versions\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf State Persistence and Recovery \u203a should migrate state between versions\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf State Persistence and Recovery \u203a should migrate state between versions\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf State Persistence and Recovery \u203a should migrate state between versions\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf State Persistence and Recovery \u203a should migrate state between versions\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf State Persistence and Recovery \u203a should migrate state between versions\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Comprehensive Frontend Integration Tests \u203a should load all test suites\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Comprehensive Frontend Integration Tests \u203a should load all test suites\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Comprehensive Frontend Integration Tests \u203a should load all test suites\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Comprehensive Frontend Integration Tests \u203a should load all test suites\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Comprehensive Frontend Integration Tests \u203a should load all test suites\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Comprehensive Frontend Integration Tests \u203a should load all test suites\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\nFAIL __tests__/integration/comprehensive/collaboration-features.test.tsx\n  \u25cf Collaboration Features Integration Tests \u203a Real-time Cursor Synchronization \u203a should sync cursor positions in real-time\n\n    TypeError: Cannot read properties of undefined (reading 'x')\n\n    \u001b[0m \u001b[90m 88 |\u001b[39m             {\u001b[33mArray\u001b[39m\u001b[33m.\u001b[39m\u001b[36mfrom\u001b[39m(otherCursors\u001b[33m.\u001b[39mentries())\u001b[33m.\u001b[39mmap(([userId\u001b[33m,\u001b[39m pos]) \u001b[33m=>\u001b[39m (\n     \u001b[90m 89 |\u001b[39m               \u001b[33m<\u001b[39m\u001b[33mdiv\u001b[39m key\u001b[33m=\u001b[39m{userId} data\u001b[33m-\u001b[39mtestid\u001b[33m=\u001b[39m{\u001b[32m`cursor-${userId}`\u001b[39m}\u001b[33m>\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 90 |\u001b[39m                 \u001b[33mUser\u001b[39m {userId}\u001b[33m:\u001b[39m {pos\u001b[33m.\u001b[39mx}\u001b[33m,\u001b[39m {pos\u001b[33m.\u001b[39my}\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 91 |\u001b[39m               \u001b[33m<\u001b[39m\u001b[33m/\u001b[39m\u001b[33mdiv\u001b[39m\u001b[33m>\u001b[39m\n     \u001b[90m 92 |\u001b[39m             ))}\n     \u001b[90m 93 |\u001b[39m           \u001b[33m<\u001b[39m\u001b[33m/\u001b[39m\u001b[33mdiv\u001b[39m\u001b[33m>\u001b[39m\u001b[0m\n\n      at x (__tests__/integration/comprehensive/collaboration-features.test.tsx:90:37)\n          at Array.map (<anonymous>)\n      at map (__tests__/integration/comprehensive/collaboration-features.test.tsx:88:49)\n      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:860:10)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.send (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:165:5)\n      at Object.send (__tests__/integration/comprehensive/collaboration-features.test.tsx:102:14)\n\n  \u25cf Collaboration Features Integration Tests \u203a Real-time Cursor Synchronization \u203a should handle multiple cursor updates efficiently\n\n    TypeError: Cannot convert undefined or null to object\n        at Object.entries (<anonymous>)\n\n    \u001b[0m \u001b[90m 120 |\u001b[39m             \u001b[36mconst\u001b[39m message \u001b[33m=\u001b[39m \u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mparse(event\u001b[33m.\u001b[39mdata)\u001b[33m;\u001b[39m\n     \u001b[90m 121 |\u001b[39m             \u001b[36mif\u001b[39m (message\u001b[33m.\u001b[39mtype \u001b[33m===\u001b[39m \u001b[32m'multi_cursor_update'\u001b[39m) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 122 |\u001b[39m               setCursors(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m(\u001b[33mObject\u001b[39m\u001b[33m.\u001b[39mentries(message\u001b[33m.\u001b[39mcursors)))\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 123 |\u001b[39m             }\n     \u001b[90m 124 |\u001b[39m           }\u001b[33m;\u001b[39m\n     \u001b[90m 125 |\u001b[39m           \u001b[0m\n\n      at Proxy.entries (__tests__/integration/comprehensive/collaboration-features.test.tsx:122:41)\n      at node_modules/mock-socket/dist/mock-socket.js:859:16\n          at Array.forEach (<anonymous>)\n      at Proxy.dispatchEvent (node_modules/mock-socket/dist/mock-socket.js:855:13)\n      at node_modules/mock-socket/dist/mock-socket.js:2133:16\n          at Array.forEach (<anonymous>)\n      at Server.emit (node_modules/mock-socket/dist/mock-socket.js:2121:16)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:166:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.send (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:165:5)\n      at Object.send (__tests__/integration/comprehensive/collaboration-features.test.tsx:145:14)\n\n  \u25cf Collaboration Features Integration Tests \u203a Presence and Activity Status \u203a should handle presence and activity status\n\n    expect(element).toHaveTextContent()\n\n    Expected element to have text content:\n      2 users online\n    Received:\n      1 users online\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"active-count\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0m1\u001b[0m\n              \u001b[0m users online\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"typing-count\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0m0\u001b[0m\n              \u001b[0m users typing\u001b[0m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 210 |\u001b[39m       \n     \u001b[90m 211 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 212 |\u001b[39m         expect(screen\u001b[33m.\u001b[39mgetByTestId(\u001b[32m'active-count'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'2 users online'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 213 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 214 |\u001b[39m       \n     \u001b[90m 215 |\u001b[39m       \u001b[90m// Simulate typing\u001b[39m\u001b[0m\n\n      at toHaveTextContent (__tests__/integration/comprehensive/collaboration-features.test.tsx:212:52)\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Collaboration Features Integration Tests \u203a Presence and Activity Status \u203a should handle user status with detailed information\n\n    TypeError: Cannot read properties of undefined (reading 'name')\n\n    \u001b[0m \u001b[90m 261 |\u001b[39m             {\u001b[33mArray\u001b[39m\u001b[33m.\u001b[39m\u001b[36mfrom\u001b[39m(users\u001b[33m.\u001b[39mentries())\u001b[33m.\u001b[39mmap(([userId\u001b[33m,\u001b[39m status]) \u001b[33m=>\u001b[39m (\n     \u001b[90m 262 |\u001b[39m               \u001b[33m<\u001b[39m\u001b[33mdiv\u001b[39m key\u001b[33m=\u001b[39m{userId} data\u001b[33m-\u001b[39mtestid\u001b[33m=\u001b[39m{\u001b[32m`user-${userId}`\u001b[39m}\u001b[33m>\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 263 |\u001b[39m                 {status\u001b[33m.\u001b[39mname} \u001b[33m-\u001b[39m {status\u001b[33m.\u001b[39mactivity} ({status\u001b[33m.\u001b[39mlastSeen})\n     \u001b[90m     |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 264 |\u001b[39m               \u001b[33m<\u001b[39m\u001b[33m/\u001b[39m\u001b[33mdiv\u001b[39m\u001b[33m>\u001b[39m\n     \u001b[90m 265 |\u001b[39m             ))}\n     \u001b[90m 266 |\u001b[39m           \u001b[33m<\u001b[39m\u001b[33m/\u001b[39m\u001b[33mdiv\u001b[39m\u001b[33m>\u001b[39m\u001b[0m\n\n      at name (__tests__/integration/comprehensive/collaboration-features.test.tsx:263:25)\n          at Array.map (<anonymous>)\n      at map (__tests__/integration/comprehensive/collaboration-features.test.tsx:261:42)\n      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:860:10)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.send (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:165:5)\n      at Object.send (__tests__/integration/comprehensive/collaboration-features.test.tsx:274:14)\n\nFAIL __tests__/integration/data-generation.test.tsx\n  \u25cf Generation Service Integration \u203a should stream generation progress via WebSocket\n\n    ReferenceError: act is not defined\n\n    \u001b[0m \u001b[90m 186 |\u001b[39m     \u001b[36mawait\u001b[39m mockWs\u001b[33m.\u001b[39mconnected\u001b[33m;\u001b[39m\n     \u001b[90m 187 |\u001b[39m     \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 188 |\u001b[39m     act(() \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 189 |\u001b[39m       mockWs\u001b[33m.\u001b[39msend(\u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mstringify({ type\u001b[33m:\u001b[39m \u001b[32m'generation_progress'\u001b[39m\u001b[33m,\u001b[39m progress\u001b[33m:\u001b[39m \u001b[35m50\u001b[39m }))\u001b[33m;\u001b[39m\n     \u001b[90m 190 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 191 |\u001b[39m     \u001b[0m\n\n      at Object.act (__tests__/integration/data-generation.test.tsx:188:5)\n\nPASS __tests__/integration/advanced-integration.test.tsx\nPASS __tests__/integration/advanced-integration/index.test.tsx\nPASS __tests__/integration/basic-integration.test.tsx\nPASS __tests__/integration/advanced-integration/search-ui-interactions.test.tsx\nPASS __tests__/integration/advanced-integration/infinite-scroll-animations.test.tsx\nPASS __tests__/integration/advanced-integration/form-validation.test.tsx\nPASS __tests__/integration/critical/error-recovery.test.tsx\nPASS __tests__/integration/advanced-integration/theme-preferences.test.tsx\nPASS __tests__/integration/security-auth.test.tsx\nPASS __tests__/integration/comprehensive/navigation-search.test.tsx\nPASS __tests__/integration/comprehensive/interactive-features.test.tsx\nPASS __tests__/integration/comprehensive/theme-preferences.test.tsx\nPASS __tests__/integration/comprehensive/performance-memory.test.tsx\n  \u25cf Console\n\n    console.error\n      Error: Component error for testing\n          at createMockError (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\__tests__\\integration\\comprehensive\\test-utils.tsx:235:10)\n          at ProblematicComponent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\__tests__\\integration\\comprehensive\\performance-memory.test.tsx:541:32)\n          at Object.react_stack_bottom_frame (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:23863:20)\n          at renderWithHooks (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:5529:22)\n          at updateFunctionComponent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:8897:19)\n          at beginWork (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:10522:18)\n          at runWithFiberInDEV (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:1522:13)\n          at performUnitOfWork (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:15140:22)\n          at workLoopSync (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:14956:41)\n          at renderRootSync (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:14936:11)\n          at performWorkOnRoot (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:14462:44)\n          at performSyncWorkOnRoot (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16231:7)\n          at flushSyncWorkAcrossRoots_impl (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16079:21)\n          at processRootScheduleInMicrotask (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16116:7)\n          at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16241:11\n          at flushActQueue (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react\\cjs\\react.development.js:566:34)\n          at process.env.NODE_ENV.exports.act (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react\\cjs\\react.development.js:860:10)\n          at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\act-compat.js:47:25\n          at Object.eventWrapper (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\pure.js:107:28)\n          at fireEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\dom\\dist\\events.js:12:35)\n          at fireEvent.<computed> [as click] (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\dom\\dist\\events.js:110:36)\n          at fireEvent.<computed> [as click] (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\fire-event.js:15:52)\n          at Object.click (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\__tests__\\integration\\comprehensive\\performance-memory.test.tsx:566:17)\n          at Promise.finally.completed (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1559:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1499:10)\n          at _callCircusTest (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1009:40)\n          at _runTest (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:949:3)\n          at _runTestsForDescribeBlock (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:839:13)\n          at _runTestsForDescribeBlock (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n          at _runTestsForDescribeBlock (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n          at run (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:757:3)\n          at runAndTransformResultsToJestFormat (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1920:21)\n          at jestAdapter (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-circus\\build\\runner.js:101:19)\n          at runTestInternal (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-runner\\build\\index.js:275:16)\n          at runTest (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\jest-runner\\build\\index.js:343:7) {\n        [stack]: [Getter/Setter],\n        [message]: 'Component error for testing'\n      }\n      \n      The above error occurred in the <ProblematicComponent> component.\n      \n      React will try to recreate this component tree from scratch using the error boundary you provided, ErrorBoundary.\n\n    \u001b[0m \u001b[90m 121 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 122 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 123 |\u001b[39m     originalError\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 124 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 125 |\u001b[39m   \n     \u001b[90m 126 |\u001b[39m   console\u001b[33m.\u001b[39mwarn \u001b[33m=\u001b[39m (\u001b[33m...\u001b[39margs\u001b[33m:\u001b[39m any[]) \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at console.call [as error] (jest.setup.ts:123:19)\n      at defaultOnCaughtError (node_modules/react-dom/cjs/react-dom-client.development.js:8331:17)\n      at logCaughtError (node_modules/react-dom/cjs/react-dom-client.development.js:8367:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at ErrorBoundary.inst.componentDidCatch.update.callback (node_modules/react-dom/cjs/react-dom-client.development.js:8414:11)\n      at callCallback (node_modules/react-dom/cjs/react-dom-client.development.js:5363:16)\n      at commitCallbacks (node_modules/react-dom/cjs/react-dom-client.development.js:5383:11)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at commitClassCallbacks (node_modules/react-dom/cjs/react-dom-client.development.js:12067:11)\n      at commitLayoutEffectOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:12688:25)\n      at recursivelyTraverseLayoutEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13590:11)\n      at commitLayoutEffectOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:12727:11)\n      at recursivelyTraverseLayoutEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13590:11)\n      at commitLayoutEffectOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:12611:11)\n      at recursivelyTraverseLayoutEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13590:11)\n      at commitLayoutEffectOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:12693:11)\n      at flushLayoutEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15559:15)\n      at commitRoot (node_modules/react-dom/cjs/react-dom-client.development.js:15402:9)\n      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14526:15)\n      at performSyncWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16231:7)\n      at flushSyncWorkAcrossRoots_impl (node_modules/react-dom/cjs/react-dom-client.development.js:16079:21)\n      at processRootScheduleInMicrotask (node_modules/react-dom/cjs/react-dom-client.development.js:16116:7)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:16241:11\n      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:860:10)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at fireEvent (node_modules/@testing-library/dom/dist/events.js:12:35)\n      at fireEvent.<computed> [as click] (node_modules/@testing-library/dom/dist/events.js:110:36)\n      at fireEvent.<computed> [as click] (node_modules/@testing-library/react/dist/fire-event.js:15:52)\n      at Object.click (__tests__/integration/comprehensive/performance-memory.test.tsx:566:17)\n\n    console.error\n      Error: Component error for testing\n          at createMockError (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\__tests__\\integration\\comprehensive\\test-utils.tsx:235:10)\n          at ProblematicComponent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\__tests__\\integration\\comprehensive\\performance-memory.test.tsx:541:32)\n          at Object.react_stack_bottom_frame (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:23863:20)\n          at renderWithHooks (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:5529:22)\n          at updateFunctionComponent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:8897:19)\n          at beginWork (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:10522:18)\n          at runWithFiberInDEV (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:1522:13)\n          at performUnitOfWork (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:15140:22)\n          at workLoopSync (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:14956:41)\n          at renderRootSync (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:14936:11)\n          at performWorkOnRoot (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:14462:44)\n          at performSyncWorkOnRoot (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16231:7)\n          at flushSyncWorkAcrossRoots_impl (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16079:21)\n          at processRootScheduleInMicrotask (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16116:7)\n          at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react-dom\\cjs\\react-dom-client.development.js:16241:11\n          at flushActQueue (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react\\cjs\\react.development.js:566:34)\n          at process.env.NODE_ENV.exports.act (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\react\\cjs\\react.development.js:860:10)\n          at C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\act-compat.js:47:25\n          at Object.eventWrapper (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\pure.js:107:28)\n          at fireEvent (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\dom\\dist\\events.js:12:35)\n          at fireEvent.<computed> [as click] (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\dom\\dist\\events.js:110:36)\n          at fireEvent.<computed> [as click] (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\node_modules\\@testing-library\\react\\dist\\fire-event.js:15:52)\n          at Object.click (C:\\Users\\antho\\OneDrive\\Desktop\\Netra\\netra-core-generation-1\\frontend\\__tests__\\integration\\comprehensive\\performance-memory.test.tsx:574:17) {\n        [stack]: [Getter/Setter],\n        [message]: 'Component error for testing'\n      }\n      \n      The above error occurred in the <ProblematicComponent> component.\n      \n      React will try to recreate this component tree from scratch using the error boundary you provided, ErrorBoundary.\n\n    \u001b[0m \u001b[90m 121 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 122 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 123 |\u001b[39m     originalError\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 124 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 125 |\u001b[39m   \n     \u001b[90m 126 |\u001b[39m   console\u001b[33m.\u001b[39mwarn \u001b[33m=\u001b[39m (\u001b[33m...\u001b[39margs\u001b[33m:\u001b[39m any[]) \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at console.call [as error] (jest.setup.ts:123:19)\n      at defaultOnCaughtError (node_modules/react-dom/cjs/react-dom-client.development.js:8331:17)\n      at logCaughtError (node_modules/react-dom/cjs/react-dom-client.development.js:8367:9)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at ErrorBoundary.inst.componentDidCatch.update.callback (node_modules/react-dom/cjs/react-dom-client.development.js:8414:11)\n      at callCallback (node_modules/react-dom/cjs/react-dom-client.development.js:5363:16)\n      at commitCallbacks (node_modules/react-dom/cjs/react-dom-client.development.js:5383:11)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at commitClassCallbacks (node_modules/react-dom/cjs/react-dom-client.development.js:12067:11)\n      at commitLayoutEffectOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:12688:25)\n      at recursivelyTraverseLayoutEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13590:11)\n      at commitLayoutEffectOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:12727:11)\n      at recursivelyTraverseLayoutEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13590:11)\n      at commitLayoutEffectOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:12611:11)\n      at recursivelyTraverseLayoutEffects (node_modules/react-dom/cjs/react-dom-client.development.js:13590:11)\n      at commitLayoutEffectOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:12693:11)\n      at flushLayoutEffects (node_modules/react-dom/cjs/react-dom-client.development.js:15559:15)\n      at commitRoot (node_modules/react-dom/cjs/react-dom-client.development.js:15402:9)\n      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14526:15)\n      at performSyncWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16231:7)\n      at flushSyncWorkAcrossRoots_impl (node_modules/react-dom/cjs/react-dom-client.development.js:16079:21)\n      at processRootScheduleInMicrotask (node_modules/react-dom/cjs/react-dom-client.development.js:16116:7)\n      at node_modules/react-dom/cjs/react-dom-client.development.js:16241:11\n      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:860:10)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at Object.eventWrapper (node_modules/@testing-library/react/dist/pure.js:107:28)\n      at fireEvent (node_modules/@testing-library/dom/dist/events.js:12:35)\n      at fireEvent.<computed> [as click] (node_modules/@testing-library/dom/dist/events.js:110:36)\n      at fireEvent.<computed> [as click] (node_modules/@testing-library/react/dist/fire-event.js:15:52)\n      at Object.click (__tests__/integration/comprehensive/performance-memory.test.tsx:574:17)\n\nPASS __tests__/integration/advanced-features.test.tsx\nPASS __tests__/integration/advanced-integration/search-drag-drop.test.tsx\nPASS __tests__/integration/advanced-integration/error-handling-edge-cases.test.tsx\nPASS __tests__/integration/advanced-integration/error-i18n-websocket.test.tsx\nPASS __tests__/integration/advanced-integration/end-to-end-journey.test.tsx\nPASS __tests__/integration/system-management.test.tsx\nPASS __tests__/integration/advanced-integration/collaborative-features.test.tsx\nPASS __tests__/integration/critical/performance-monitoring.test.tsx\n  \u25cf Console\n\n    console.warn\n      Performance degradation: api_latency = 1500ms (threshold: 1000ms)\n\n    \u001b[0m \u001b[90m 131 |\u001b[39m       \u001b[36mreturn\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     }\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 133 |\u001b[39m     originalWarn\u001b[33m.\u001b[39mcall(console\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 134 |\u001b[39m   }\u001b[33m;\u001b[39m\n     \u001b[90m 135 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 136 |\u001b[39m\u001b[0m\n\n      at console.call (jest.setup.ts:133:18)\n      at warn (__tests__/integration/critical/performance-monitoring.test.tsx:79:19)\n      at Object.checkPerformance (__tests__/integration/critical/performance-monitoring.test.tsx:86:22)\n\nPASS __tests__/integration/advanced-integration/offline-mode.test.tsx\nPASS __tests__/integration/critical/message-streaming.test.tsx\nPASS __tests__/integration/advanced-integration/collaboration.test.tsx\nPASS __tests__/integration/corpus-management.test.tsx\nPASS __tests__/integration/critical/agent-provider.test.tsx\nPASS __tests__/integration/critical/file-upload.test.tsx\nPASS __tests__/integration/critical/state-sync.test.tsx\nPASS __tests__/integration/critical/websocket-auth.test.tsx\nPASS __tests__/integration/advanced-integration/navigation.test.tsx\nPASS __tests__/integration/critical/accessibility.test.tsx\nPASS __tests__/integration/critical/notifications.test.tsx\n  \u25cf Console\n\n    console.log\n      Flushed notification: { type: 'info', message: 'Offline notification 1' }\n\n      at log (__tests__/integration/critical/notifications.test.tsx:61:19)\n\n    console.log\n      Flushed notification: { type: 'warning', message: 'Offline notification 2' }\n\n      at log (__tests__/integration/critical/notifications.test.tsx:61:19)\n\nPASS __tests__/integration/critical/keyboard-shortcuts.test.tsx\nPASS __tests__/integration/critical/thread-management.test.tsx\n\nSummary of all failing tests\nFAIL __tests__/integration/comprehensive/index.test.tsx (13.351 s)\n  \u25cf Collaboration Features Integration Tests \u203a Real-time Cursor Synchronization \u203a should sync cursor positions in real-time\n\n    TypeError: Cannot read properties of undefined (reading 'x')\n\n    \u001b[0m \u001b[90m 88 |\u001b[39m             {\u001b[33mArray\u001b[39m\u001b[33m.\u001b[39m\u001b[36mfrom\u001b[39m(otherCursors\u001b[33m.\u001b[39mentries())\u001b[33m.\u001b[39mmap(([userId\u001b[33m,\u001b[39m pos]) \u001b[33m=>\u001b[39m (\n     \u001b[90m 89 |\u001b[39m               \u001b[33m<\u001b[39m\u001b[33mdiv\u001b[39m key\u001b[33m=\u001b[39m{userId} data\u001b[33m-\u001b[39mtestid\u001b[33m=\u001b[39m{\u001b[32m`cursor-${userId}`\u001b[39m}\u001b[33m>\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 90 |\u001b[39m                 \u001b[33mUser\u001b[39m {userId}\u001b[33m:\u001b[39m {pos\u001b[33m.\u001b[39mx}\u001b[33m,\u001b[39m {pos\u001b[33m.\u001b[39my}\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 91 |\u001b[39m               \u001b[33m<\u001b[39m\u001b[33m/\u001b[39m\u001b[33mdiv\u001b[39m\u001b[33m>\u001b[39m\n     \u001b[90m 92 |\u001b[39m             ))}\n     \u001b[90m 93 |\u001b[39m           \u001b[33m<\u001b[39m\u001b[33m/\u001b[39m\u001b[33mdiv\u001b[39m\u001b[33m>\u001b[39m\u001b[0m\n\n      at x (__tests__/integration/comprehensive/collaboration-features.test.tsx:90:37)\n          at Array.map (<anonymous>)\n      at map (__tests__/integration/comprehensive/collaboration-features.test.tsx:88:49)\n      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:860:10)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.send (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:165:5)\n      at Object.send (__tests__/integration/comprehensive/collaboration-features.test.tsx:102:14)\n\n  \u25cf Collaboration Features Integration Tests \u203a Real-time Cursor Synchronization \u203a should handle multiple cursor updates efficiently\n\n    TypeError: Cannot convert undefined or null to object\n        at Object.entries (<anonymous>)\n\n    \u001b[0m \u001b[90m 120 |\u001b[39m             \u001b[36mconst\u001b[39m message \u001b[33m=\u001b[39m \u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mparse(event\u001b[33m.\u001b[39mdata)\u001b[33m;\u001b[39m\n     \u001b[90m 121 |\u001b[39m             \u001b[36mif\u001b[39m (message\u001b[33m.\u001b[39mtype \u001b[33m===\u001b[39m \u001b[32m'multi_cursor_update'\u001b[39m) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 122 |\u001b[39m               setCursors(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m(\u001b[33mObject\u001b[39m\u001b[33m.\u001b[39mentries(message\u001b[33m.\u001b[39mcursors)))\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 123 |\u001b[39m             }\n     \u001b[90m 124 |\u001b[39m           }\u001b[33m;\u001b[39m\n     \u001b[90m 125 |\u001b[39m           \u001b[0m\n\n      at Proxy.entries (__tests__/integration/comprehensive/collaboration-features.test.tsx:122:41)\n      at node_modules/mock-socket/dist/mock-socket.js:859:16\n          at Array.forEach (<anonymous>)\n      at Proxy.dispatchEvent (node_modules/mock-socket/dist/mock-socket.js:855:13)\n      at node_modules/mock-socket/dist/mock-socket.js:2133:16\n          at Array.forEach (<anonymous>)\n      at Server.emit (node_modules/mock-socket/dist/mock-socket.js:2121:16)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:166:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.send (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:165:5)\n      at Object.send (__tests__/integration/comprehensive/collaboration-features.test.tsx:145:14)\n\n  \u25cf Collaboration Features Integration Tests \u203a Presence and Activity Status \u203a should handle presence and activity status\n\n    expect(element).toHaveTextContent()\n\n    Expected element to have text content:\n      2 users online\n    Received:\n      1 users online\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html\u001b[39m\n      \u001b[33mdata-theme\u001b[39m=\u001b[32m\"dark\"\u001b[39m\n    \u001b[36m>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"active-count\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0m1\u001b[0m\n              \u001b[0m users online\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"typing-count\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0m0\u001b[0m\n              \u001b[0m users typing\u001b[0m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 210 |\u001b[39m       \n     \u001b[90m 211 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 212 |\u001b[39m         expect(screen\u001b[33m.\u001b[39mgetByTestId(\u001b[32m'active-count'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'2 users online'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 213 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 214 |\u001b[39m       \n     \u001b[90m 215 |\u001b[39m       \u001b[90m// Simulate typing\u001b[39m\u001b[0m\n\n      at toHaveTextContent (__tests__/integration/comprehensive/collaboration-features.test.tsx:212:52)\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Collaboration Features Integration Tests \u203a Presence and Activity Status \u203a should handle user status with detailed information\n\n    TypeError: Cannot read properties of undefined (reading 'name')\n\n    \u001b[0m \u001b[90m 261 |\u001b[39m             {\u001b[33mArray\u001b[39m\u001b[33m.\u001b[39m\u001b[36mfrom\u001b[39m(users\u001b[33m.\u001b[39mentries())\u001b[33m.\u001b[39mmap(([userId\u001b[33m,\u001b[39m status]) \u001b[33m=>\u001b[39m (\n     \u001b[90m 262 |\u001b[39m               \u001b[33m<\u001b[39m\u001b[33mdiv\u001b[39m key\u001b[33m=\u001b[39m{userId} data\u001b[33m-\u001b[39mtestid\u001b[33m=\u001b[39m{\u001b[32m`user-${userId}`\u001b[39m}\u001b[33m>\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 263 |\u001b[39m                 {status\u001b[33m.\u001b[39mname} \u001b[33m-\u001b[39m {status\u001b[33m.\u001b[39mactivity} ({status\u001b[33m.\u001b[39mlastSeen})\n     \u001b[90m     |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 264 |\u001b[39m               \u001b[33m<\u001b[39m\u001b[33m/\u001b[39m\u001b[33mdiv\u001b[39m\u001b[33m>\u001b[39m\n     \u001b[90m 265 |\u001b[39m             ))}\n     \u001b[90m 266 |\u001b[39m           \u001b[33m<\u001b[39m\u001b[33m/\u001b[39m\u001b[33mdiv\u001b[39m\u001b[33m>\u001b[39m\u001b[0m\n\n      at name (__tests__/integration/comprehensive/collaboration-features.test.tsx:263:25)\n          at Array.map (<anonymous>)\n      at map (__tests__/integration/comprehensive/collaboration-features.test.tsx:261:42)\n      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:860:10)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.send (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:165:5)\n      at Object.send (__tests__/integration/comprehensive/collaboration-features.test.tsx:274:14)\n\n  \u25cf Navigation and Search Integration Tests \u203a Complex Navigation Flows \u203a should handle deep linking with state preservation\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"/chat/thread-1\"\n\n    Number of calls: 0\n\n    \u001b[0m \u001b[90m 108 |\u001b[39m       \u001b[36mconst\u001b[39m savedState \u001b[33m=\u001b[39m \u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mparse(sessionStorage\u001b[33m.\u001b[39mgetItem(\u001b[32m'nav_state'\u001b[39m) \u001b[33m||\u001b[39m \u001b[32m'{}'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 109 |\u001b[39m       expect(savedState\u001b[33m.\u001b[39m\u001b[36mfrom\u001b[39m)\u001b[33m.\u001b[39mtoBe(\u001b[32m'/'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 110 |\u001b[39m       expect(mockRouter\u001b[33m.\u001b[39mpush)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'/chat/thread-1'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 111 |\u001b[39m       \n     \u001b[90m 112 |\u001b[39m       \u001b[90m// Test navigation to another path\u001b[39m\n     \u001b[90m 113 |\u001b[39m       fireEvent\u001b[33m.\u001b[39mclick(getByText(\u001b[32m'Go to Settings'\u001b[39m))\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toHaveBeenCalledWith (__tests__/integration/comprehensive/navigation-search.test.tsx:110:31)\n\n  \u25cf Navigation and Search Integration Tests \u203a Complex Navigation Flows \u203a should handle protected route redirects\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"/auth/login\"\n\n    Number of calls: 0\n\n    \u001b[0m \u001b[90m 160 |\u001b[39m       expect(getByText(\u001b[32m'Redirecting to login...'\u001b[39m))\u001b[33m.\u001b[39mtoBeInTheDocument()\u001b[33m;\u001b[39m\n     \u001b[90m 161 |\u001b[39m       expect(sessionStorage\u001b[33m.\u001b[39mgetItem(\u001b[32m'redirect_after_login'\u001b[39m))\u001b[33m.\u001b[39mtoBe(\u001b[32m'/'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 162 |\u001b[39m       expect(mockRouter\u001b[33m.\u001b[39mpush)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'/auth/login'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 163 |\u001b[39m       \n     \u001b[90m 164 |\u001b[39m       \u001b[90m// Authenticate and rerender\u001b[39m\n     \u001b[90m 165 |\u001b[39m       act(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toHaveBeenCalledWith (__tests__/integration/comprehensive/navigation-search.test.tsx:162:31)\n\n  \u25cf Internationalization and WebSocket Resilience Tests \u203a WebSocket Resilience Integration \u203a should handle WebSocket message buffering during reconnection\n\n    expect(element).toHaveTextContent()\n\n    Expected element to have text content:\n      2 buffered\n    Received:\n      0 buffered\n\n    \u001b[0m \u001b[90m 444 |\u001b[39m       \n     \u001b[90m 445 |\u001b[39m       expect(messageBuffer\u001b[33m.\u001b[39mlength)\u001b[33m.\u001b[39mtoBe(\u001b[35m2\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 446 |\u001b[39m       expect(getByTestId(\u001b[32m'buffer-size'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'2 buffered'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 447 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 448 |\u001b[39m\n     \u001b[90m 449 |\u001b[39m     it(\u001b[32m'should implement exponential backoff for reconnection'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toHaveTextContent (__tests__/integration/comprehensive/i18n-websocket.test.tsx:446:42)\n\n  \u25cf Internationalization and WebSocket Resilience Tests \u203a WebSocket Resilience Integration \u203a should implement exponential backoff for reconnection\n\n    expect(received).toBeGreaterThanOrEqual(expected)\n\n    Expected: >= 860\n    Received:    628\n\n    \u001b[0m \u001b[90m 540 |\u001b[39m       \u001b[90m// Verify exponential backoff pattern\u001b[39m\n     \u001b[90m 541 |\u001b[39m       \u001b[36mif\u001b[39m (reconnectionDelays\u001b[33m.\u001b[39mlength \u001b[33m>=\u001b[39m \u001b[35m2\u001b[39m) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 542 |\u001b[39m         expect(reconnectionDelays[\u001b[35m1\u001b[39m])\u001b[33m.\u001b[39mtoBeGreaterThanOrEqual(reconnectionDelays[\u001b[35m0\u001b[39m])\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 543 |\u001b[39m       }\n     \u001b[90m 544 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 545 |\u001b[39m\u001b[0m\n\n      at Object.toBeGreaterThanOrEqual (__tests__/integration/comprehensive/i18n-websocket.test.tsx:542:39)\n\n  \u25cf Internationalization and WebSocket Resilience Tests \u203a WebSocket Resilience Integration \u203a should handle WebSocket heartbeat and keep-alive\n\n    expect(element).not.toHaveTextContent()\n\n    Expected element not to have text content:\n      None\n    Received:\n      None\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html\u001b[39m\n      \u001b[33mdata-theme\u001b[39m=\u001b[32m\"dark\"\u001b[39m\n      \u001b[33mdir\u001b[39m=\u001b[32m\"ltr\"\u001b[39m\n      \u001b[33mlang\u001b[39m=\u001b[32m\"zh\"\u001b[39m\n    \u001b[36m>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body\u001b[39m\n        \u001b[33mstyle\u001b[39m=\u001b[32m\"text-align: left;\"\u001b[39m\n      \u001b[36m>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"connection-health\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mhealthy\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"last-heartbeat\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mNone\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"heartbeat-interval\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0m1000\u001b[0m\n              \u001b[0mms\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"manual-heartbeat\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mSend Heartbeat\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"faster-heartbeat\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mFaster Heartbeat\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 615 |\u001b[39m       \n     \u001b[90m 616 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 617 |\u001b[39m         expect(getByTestId(\u001b[32m'last-heartbeat'\u001b[39m))\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'None'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 618 |\u001b[39m         expect(getByTestId(\u001b[32m'connection-health'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'healthy'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 619 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 620 |\u001b[39m       \u001b[0m\n\n      at toHaveTextContent (__tests__/integration/comprehensive/i18n-websocket.test.tsx:617:51)\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf End-to-End User Journey Integration Tests \u203a Complete Optimization Workflow \u203a should handle error scenarios in the workflow\n\n    expect(element).toHaveTextContent()\n\n    Expected element to have text content:\n      complete\n    Received:\n      analyze\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html\u001b[39m\n      \u001b[33mdata-theme\u001b[39m=\u001b[32m\"dark\"\u001b[39m\n      \u001b[33mdir\u001b[39m=\u001b[32m\"ltr\"\u001b[39m\n      \u001b[33mlang\u001b[39m=\u001b[32m\"zh\"\u001b[39m\n    \u001b[36m>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body\u001b[39m\n        \u001b[33mstyle\u001b[39m=\u001b[32m\"text-align: left;\"\u001b[39m\n      \u001b[36m>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"current-step\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0manalyze\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"retry-count\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0m1\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"error-messages\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mdata-testid\u001b[39m=\u001b[32m\"error-0\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[0mNetwork error. Please try again. (Attempt 1)\u001b[0m\n              \u001b[36m</div>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div>\u001b[39m\n              \u001b[36m<button\u001b[39m\n                \u001b[33mdata-testid\u001b[39m=\u001b[32m\"analyze\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[0mAnalyze\u001b[0m\n              \u001b[36m</button>\u001b[39m\n              \u001b[36m<button\u001b[39m\n                \u001b[33mdata-testid\u001b[39m=\u001b[32m\"reset\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[0mStart Over\u001b[0m\n              \u001b[36m</button>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 483 |\u001b[39m       \u001b[90m// Eventually should complete\u001b[39m\n     \u001b[90m 484 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 485 |\u001b[39m         expect(getByTestId(\u001b[32m'current-step'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'complete'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 486 |\u001b[39m       }\u001b[33m,\u001b[39m { timeout\u001b[33m:\u001b[39m \u001b[33mTEST_TIMEOUTS\u001b[39m\u001b[33m.\u001b[39m\u001b[33mMEDIUM\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 487 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 488 |\u001b[39m\u001b[0m\n\n      at toHaveTextContent (__tests__/integration/comprehensive/user-journey.test.tsx:485:45)\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf End-to-End User Journey Integration Tests \u203a Complex Multi-User Workflow \u203a should handle collaborative workflow with multiple users\n\n    expect(element).toHaveTextContent()\n\n    Expected element to have text content:\n      2 users\n    Received:\n      1 users\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html\u001b[39m\n      \u001b[33mdata-theme\u001b[39m=\u001b[32m\"dark\"\u001b[39m\n      \u001b[33mdir\u001b[39m=\u001b[32m\"ltr\"\u001b[39m\n      \u001b[33mlang\u001b[39m=\u001b[32m\"zh\"\u001b[39m\n    \u001b[36m>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body\u001b[39m\n        \u001b[33mstyle\u001b[39m=\u001b[32m\"text-align: left;\"\u001b[39m\n      \u001b[36m>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"current-step\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mplanning\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"user-count\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0m1\u001b[0m\n              \u001b[0m users\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"vote-count\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0m0\u001b[0m\n              \u001b[0m votes\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"decision-count\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0m0\u001b[0m\n              \u001b[0m decisions\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"vote-approve\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mVote Approve\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"vote-reject\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mVote Reject\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 653 |\u001b[39m       \n     \u001b[90m 654 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 655 |\u001b[39m         expect(getByTestId(\u001b[32m'user-count'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'2 users'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 656 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 657 |\u001b[39m       \n     \u001b[90m 658 |\u001b[39m       \u001b[90m// Simulate voting\u001b[39m\u001b[0m\n\n      at toHaveTextContent (__tests__/integration/comprehensive/user-journey.test.tsx:655:43)\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\nFAIL __tests__/integration/comprehensive/user-journey.test.tsx (5.734 s)\n  \u25cf End-to-End User Journey Integration Tests \u203a Complete Optimization Workflow \u203a should handle error scenarios in the workflow\n\n    expect(element).toHaveTextContent()\n\n    Expected element to have text content:\n      complete\n    Received:\n      analyze\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"current-step\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0manalyze\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"retry-count\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0m1\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"error-messages\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mdata-testid\u001b[39m=\u001b[32m\"error-0\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[0mNetwork error. Please try again. (Attempt 1)\u001b[0m\n              \u001b[36m</div>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div>\u001b[39m\n              \u001b[36m<button\u001b[39m\n                \u001b[33mdata-testid\u001b[39m=\u001b[32m\"analyze\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[0mAnalyze\u001b[0m\n              \u001b[36m</button>\u001b[39m\n              \u001b[36m<button\u001b[39m\n                \u001b[33mdata-testid\u001b[39m=\u001b[32m\"reset\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[0mStart Over\u001b[0m\n              \u001b[36m</button>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 483 |\u001b[39m       \u001b[90m// Eventually should complete\u001b[39m\n     \u001b[90m 484 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 485 |\u001b[39m         expect(getByTestId(\u001b[32m'current-step'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'complete'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 486 |\u001b[39m       }\u001b[33m,\u001b[39m { timeout\u001b[33m:\u001b[39m \u001b[33mTEST_TIMEOUTS\u001b[39m\u001b[33m.\u001b[39m\u001b[33mMEDIUM\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 487 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 488 |\u001b[39m\u001b[0m\n\n      at toHaveTextContent (__tests__/integration/comprehensive/user-journey.test.tsx:485:45)\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf End-to-End User Journey Integration Tests \u203a Complex Multi-User Workflow \u203a should handle collaborative workflow with multiple users\n\n    expect(element).toHaveTextContent()\n\n    Expected element to have text content:\n      2 users\n    Received:\n      1 users\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"current-step\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mplanning\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"user-count\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0m1\u001b[0m\n              \u001b[0m users\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"vote-count\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0m0\u001b[0m\n              \u001b[0m votes\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"decision-count\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0m0\u001b[0m\n              \u001b[0m decisions\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"vote-approve\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mVote Approve\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"vote-reject\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mVote Reject\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 653 |\u001b[39m       \n     \u001b[90m 654 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 655 |\u001b[39m         expect(getByTestId(\u001b[32m'user-count'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'2 users'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 656 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 657 |\u001b[39m       \n     \u001b[90m 658 |\u001b[39m       \u001b[90m// Simulate voting\u001b[39m\u001b[0m\n\n      at toHaveTextContent (__tests__/integration/comprehensive/user-journey.test.tsx:655:43)\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\nFAIL __tests__/integration/infrastructure.test.tsx\n  \u25cf Background Task Processing \u203a should handle task failures and retries\n\n    expect(element).toHaveTextContent()\n\n    Expected element to have text content:\n      Attempts: 3\n    Received:\n      Attempts: 1\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<button>\u001b[39m\n              \u001b[0mExecute Task\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"retry-count\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mAttempts: \u001b[0m\n              \u001b[0m1\u001b[0m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 428 |\u001b[39m     \n     \u001b[90m 429 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 430 |\u001b[39m       expect(getByTestId(\u001b[32m'retry-count'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'Attempts: 3'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 431 |\u001b[39m       expect(getByTestId(\u001b[32m'final-status'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'Success'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 432 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 433 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n\n      at toHaveTextContent (__tests__/integration/infrastructure.test.tsx:430:42)\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Background Task Processing \u203a should handle task failures and retries\n\n    Failed\n\n    \u001b[0m \u001b[90m 415 |\u001b[39m     \u001b[90m// Mock failures then success\u001b[39m\n     \u001b[90m 416 |\u001b[39m     (fetch \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 417 |\u001b[39m       \u001b[33m.\u001b[39mmockRejectedValueOnce(\u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Failed'\u001b[39m))\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 418 |\u001b[39m       \u001b[33m.\u001b[39mmockRejectedValueOnce(\u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Failed'\u001b[39m))\n     \u001b[90m 419 |\u001b[39m       \u001b[33m.\u001b[39mmockResolvedValueOnce({ ok\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 420 |\u001b[39m     \u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/infrastructure.test.tsx:417:30)\n\n  \u25cf Background Task Processing \u203a should handle task failures and retries\n\n    Failed\n\n    \u001b[0m \u001b[90m 415 |\u001b[39m     \u001b[90m// Mock failures then success\u001b[39m\n     \u001b[90m 416 |\u001b[39m     (fetch \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 417 |\u001b[39m       \u001b[33m.\u001b[39mmockRejectedValueOnce(\u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Failed'\u001b[39m))\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 418 |\u001b[39m       \u001b[33m.\u001b[39mmockRejectedValueOnce(\u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Failed'\u001b[39m))\n     \u001b[90m 419 |\u001b[39m       \u001b[33m.\u001b[39mmockResolvedValueOnce({ ok\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 420 |\u001b[39m     \u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/infrastructure.test.tsx:417:30)\n\n  \u25cf Background Task Processing \u203a should handle task failures and retries\n\n    Failed\n\n    \u001b[0m \u001b[90m 415 |\u001b[39m     \u001b[90m// Mock failures then success\u001b[39m\n     \u001b[90m 416 |\u001b[39m     (fetch \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 417 |\u001b[39m       \u001b[33m.\u001b[39mmockRejectedValueOnce(\u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Failed'\u001b[39m))\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 418 |\u001b[39m       \u001b[33m.\u001b[39mmockRejectedValueOnce(\u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Failed'\u001b[39m))\n     \u001b[90m 419 |\u001b[39m       \u001b[33m.\u001b[39mmockResolvedValueOnce({ ok\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 420 |\u001b[39m     \u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/infrastructure.test.tsx:417:30)\n\n  \u25cf Background Task Processing \u203a should handle task failures and retries\n\n    Failed\n\n    \u001b[0m \u001b[90m 415 |\u001b[39m     \u001b[90m// Mock failures then success\u001b[39m\n     \u001b[90m 416 |\u001b[39m     (fetch \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 417 |\u001b[39m       \u001b[33m.\u001b[39mmockRejectedValueOnce(\u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Failed'\u001b[39m))\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 418 |\u001b[39m       \u001b[33m.\u001b[39mmockRejectedValueOnce(\u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Failed'\u001b[39m))\n     \u001b[90m 419 |\u001b[39m       \u001b[33m.\u001b[39mmockResolvedValueOnce({ ok\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 420 |\u001b[39m     \u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/infrastructure.test.tsx:417:30)\n\n  \u25cf Error Context and Tracing \u203a should capture and display error context\n\n    expect(element).toHaveTextContent()\n\n    Expected element to have text content:\n      Error: Internal server error\n    Received:\n      Error: FailedTrace: trace-789\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<button>\u001b[39m\n              \u001b[0mTrigger Error\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"error\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div>\u001b[39m\n                \u001b[0mError: \u001b[0m\n                \u001b[0mFailed\u001b[0m\n              \u001b[36m</div>\u001b[39m\n              \u001b[36m<div>\u001b[39m\n                \u001b[0mTrace: \u001b[0m\n                \u001b[0mtrace-789\u001b[0m\n              \u001b[36m</div>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 482 |\u001b[39m     \n     \u001b[90m 483 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 484 |\u001b[39m       expect(getByTestId(\u001b[32m'error'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'Error: Internal server error'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 485 |\u001b[39m       expect(getByTestId(\u001b[32m'error'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'Trace: trace-789'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 486 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 487 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n\n      at toHaveTextContent (__tests__/integration/infrastructure.test.tsx:484:36)\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\nFAIL __tests__/integration/collaboration-state.test.tsx\n  \u25cf State Persistence and Recovery \u203a should persist application state across sessions\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"app_state\", \"{\\\"version\\\":2,\\\"timestamp\\\":1755215881571,\\\"data\\\":{\\\"user_preferences\\\":{\\\"theme\\\":\\\"dark\\\",\\\"language\\\":\\\"en\\\"},\\\"session_data\\\":{\\\"last_thread\\\":\\\"thread-123\\\"},\\\"cached_results\\\":{\\\"optimization_1\\\":{\\\"result\\\":\\\"cached\\\"}}}}\"\n\n    Number of calls: 0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<button>\u001b[39m\n              \u001b[0mSave State\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button>\u001b[39m\n              \u001b[0mLoad State\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"state\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div>\u001b[39m\n                \u001b[0mTheme: \u001b[0m\n                \u001b[0mdark\u001b[0m\n              \u001b[36m</div>\u001b[39m\n              \u001b[36m<div>\u001b[39m\n                \u001b[0mLast thread: \u001b[0m\n                \u001b[0mthread-123\u001b[0m\n              \u001b[36m</div>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 371 |\u001b[39m     \n     \u001b[90m 372 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 373 |\u001b[39m       expect(localStorageMock\u001b[33m.\u001b[39msetItem)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\n     \u001b[90m     |\u001b[39m                                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 374 |\u001b[39m         \u001b[32m'app_state'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 375 |\u001b[39m         \u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mstringify(mockPersistedState)\n     \u001b[90m 376 |\u001b[39m       )\u001b[33m;\u001b[39m\u001b[0m\n\n      at toHaveBeenCalledWith (__tests__/integration/collaboration-state.test.tsx:373:40)\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf State Persistence and Recovery \u203a should recover from corrupted state gracefully\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"app_state\"\n\n    Number of calls: 0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<button>\u001b[39m\n              \u001b[0mLoad State\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"error\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mState corrupted, using defaults\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"state\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mState loaded\u001b[0m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 434 |\u001b[39m       expect(getByTestId(\u001b[32m'error'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'State corrupted, using defaults'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 435 |\u001b[39m       expect(getByTestId(\u001b[32m'state'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'State loaded'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 436 |\u001b[39m       expect(localStorageMock\u001b[33m.\u001b[39mremoveItem)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'app_state'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 437 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 438 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 439 |\u001b[39m\u001b[0m\n\n      at toHaveBeenCalledWith (__tests__/integration/collaboration-state.test.tsx:436:43)\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf State Persistence and Recovery \u203a should migrate state between versions\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<button>\u001b[39m\n              \u001b[0mMigrate State\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"migrated\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mState migrated to v2\u001b[0m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 480 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n     \u001b[90m 481 |\u001b[39m       expect(getByTestId(\u001b[32m'migrated'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'State migrated to v2'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 482 |\u001b[39m       expect(localStorageMock\u001b[33m.\u001b[39msetItem)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 483 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 484 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 485 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at toHaveBeenCalled (__tests__/integration/collaboration-state.test.tsx:482:40)\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\nFAIL __tests__/integration/comprehensive/i18n-websocket.test.tsx\n  \u25cf Internationalization and WebSocket Resilience Tests \u203a WebSocket Resilience Integration \u203a should handle WebSocket message buffering during reconnection\n\n    expect(element).toHaveTextContent()\n\n    Expected element to have text content:\n      2 buffered\n    Received:\n      0 buffered\n\n    \u001b[0m \u001b[90m 444 |\u001b[39m       \n     \u001b[90m 445 |\u001b[39m       expect(messageBuffer\u001b[33m.\u001b[39mlength)\u001b[33m.\u001b[39mtoBe(\u001b[35m2\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 446 |\u001b[39m       expect(getByTestId(\u001b[32m'buffer-size'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'2 buffered'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 447 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 448 |\u001b[39m\n     \u001b[90m 449 |\u001b[39m     it(\u001b[32m'should implement exponential backoff for reconnection'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toHaveTextContent (__tests__/integration/comprehensive/i18n-websocket.test.tsx:446:42)\n\n  \u25cf Internationalization and WebSocket Resilience Tests \u203a WebSocket Resilience Integration \u203a should implement exponential backoff for reconnection\n\n    expect(received).toBeGreaterThanOrEqual(expected)\n\n    Expected: >= 823\n    Received:    631\n\n    \u001b[0m \u001b[90m 540 |\u001b[39m       \u001b[90m// Verify exponential backoff pattern\u001b[39m\n     \u001b[90m 541 |\u001b[39m       \u001b[36mif\u001b[39m (reconnectionDelays\u001b[33m.\u001b[39mlength \u001b[33m>=\u001b[39m \u001b[35m2\u001b[39m) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 542 |\u001b[39m         expect(reconnectionDelays[\u001b[35m1\u001b[39m])\u001b[33m.\u001b[39mtoBeGreaterThanOrEqual(reconnectionDelays[\u001b[35m0\u001b[39m])\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 543 |\u001b[39m       }\n     \u001b[90m 544 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 545 |\u001b[39m\u001b[0m\n\n      at Object.toBeGreaterThanOrEqual (__tests__/integration/comprehensive/i18n-websocket.test.tsx:542:39)\n\n  \u25cf Internationalization and WebSocket Resilience Tests \u203a WebSocket Resilience Integration \u203a should handle WebSocket heartbeat and keep-alive\n\n    expect(element).not.toHaveTextContent()\n\n    Expected element not to have text content:\n      None\n    Received:\n      None\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html\u001b[39m\n      \u001b[33mdir\u001b[39m=\u001b[32m\"ltr\"\u001b[39m\n      \u001b[33mlang\u001b[39m=\u001b[32m\"zh\"\u001b[39m\n    \u001b[36m>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body\u001b[39m\n        \u001b[33mstyle\u001b[39m=\u001b[32m\"text-align: left;\"\u001b[39m\n      \u001b[36m>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"connection-health\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mhealthy\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"last-heartbeat\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mNone\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"heartbeat-interval\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0m1000\u001b[0m\n              \u001b[0mms\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"manual-heartbeat\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mSend Heartbeat\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"faster-heartbeat\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mFaster Heartbeat\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 615 |\u001b[39m       \n     \u001b[90m 616 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 617 |\u001b[39m         expect(getByTestId(\u001b[32m'last-heartbeat'\u001b[39m))\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'None'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 618 |\u001b[39m         expect(getByTestId(\u001b[32m'connection-health'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'healthy'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 619 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 620 |\u001b[39m       \u001b[0m\n\n      at toHaveTextContent (__tests__/integration/comprehensive/i18n-websocket.test.tsx:617:51)\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\nFAIL __tests__/integration/comprehensive-integration-fixed.test.tsx\n  \u25cf Comprehensive Frontend Integration Tests \u203a 1. Corpus Management Integration \u203a should upload documents to corpus and process with embeddings\n\n    expect(received).toHaveLength(expected)\n\n    Expected length: 1\n    Received length: 0\n    Received array:  []\n\n    \u001b[0m \u001b[90m 161 |\u001b[39m       \u001b[36mawait\u001b[39m uploadDocument(file)\u001b[33m;\u001b[39m\n     \u001b[90m 162 |\u001b[39m       \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 163 |\u001b[39m       expect(useCorpusStore\u001b[33m.\u001b[39mgetState()\u001b[33m.\u001b[39mdocuments)\u001b[33m.\u001b[39mtoHaveLength(\u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 164 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 165 |\u001b[39m\n     \u001b[90m 166 |\u001b[39m     it(\u001b[32m'should search corpus with semantic similarity'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toHaveLength (__tests__/integration/comprehensive-integration-fixed.test.tsx:163:51)\n\nFAIL __tests__/integration/advanced-integration/offline-navigation.test.tsx\n  \u25cf Offline Mode and Navigation Integration \u203a Complex Navigation Flows \u203a should handle protected route redirects\n\n    TypeError: screen.getByTestId is not a function\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"protected-content\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mProtected Content\u001b[0m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 253 |\u001b[39m       \n     \u001b[90m 254 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 255 |\u001b[39m         expect(screen\u001b[33m.\u001b[39mgetByTestId(\u001b[32m'protected-content'\u001b[39m))\u001b[33m.\u001b[39mtoBeInTheDocument()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 256 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 257 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 258 |\u001b[39m\u001b[0m\n\n      at getByTestId (__tests__/integration/advanced-integration/offline-navigation.test.tsx:255:23)\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Offline Mode and Navigation Integration \u203a Complex Navigation Flows \u203a should handle navigation with query parameters\n\n    TestingLibraryElementError: Unable to find an element by: [data-testid=\"select\"]\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mdata-testid\u001b[39m=\u001b[32m\"query-string\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0msort=date&page=1\u001b[0m\n          \u001b[36m</div>\u001b[39m\n          \u001b[36m<select>\u001b[39m\n            \u001b[36m<option\u001b[39m\n              \u001b[33mvalue\u001b[39m=\u001b[32m\"\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mAll\u001b[0m\n            \u001b[36m</option>\u001b[39m\n            \u001b[36m<option\u001b[39m\n              \u001b[33mvalue\u001b[39m=\u001b[32m\"tech\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mTech\u001b[0m\n            \u001b[36m</option>\u001b[39m\n            \u001b[36m<option\u001b[39m\n              \u001b[33mvalue\u001b[39m=\u001b[32m\"business\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mBusiness\u001b[0m\n            \u001b[36m</option>\u001b[39m\n          \u001b[36m</select>\u001b[39m\n          \u001b[36m<button>\u001b[39m\n            \u001b[0mNext Page\u001b[0m\n          \u001b[36m</button>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</div>\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n    \u001b[0m \u001b[90m 302 |\u001b[39m       \n     \u001b[90m 303 |\u001b[39m       \u001b[90m// Update category\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 304 |\u001b[39m       fireEvent\u001b[33m.\u001b[39mchange(getByTestId(\u001b[32m'select'\u001b[39m)\u001b[33m,\u001b[39m { target\u001b[33m:\u001b[39m { value\u001b[33m:\u001b[39m \u001b[32m'tech'\u001b[39m } })\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 305 |\u001b[39m       \n     \u001b[90m 306 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n     \u001b[90m 307 |\u001b[39m         expect(getByTestId(\u001b[32m'query-string'\u001b[39m))\u001b[33m.\u001b[39mtoContain(\u001b[32m'category=tech'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)\n      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38\n      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17\n      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19\n      at Object.getByTestId (__tests__/integration/advanced-integration/offline-navigation.test.tsx:304:24)\n\nFAIL __tests__/integration/comprehensive-integration.test.tsx\n  \u25cf Corpus Management Integration \u203a should upload documents to corpus and update UI\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Corpus Management Integration \u203a should upload documents to corpus and update UI\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Corpus Management Integration \u203a should upload documents to corpus and update UI\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Corpus Management Integration \u203a should upload documents to corpus and update UI\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Corpus Management Integration \u203a should upload documents to corpus and update UI\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Corpus Management Integration \u203a should upload documents to corpus and update UI\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Corpus Management Integration \u203a should search corpus with embeddings\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Corpus Management Integration \u203a should search corpus with embeddings\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Corpus Management Integration \u203a should search corpus with embeddings\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Corpus Management Integration \u203a should search corpus with embeddings\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Corpus Management Integration \u203a should search corpus with embeddings\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Corpus Management Integration \u203a should search corpus with embeddings\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Synthetic Data Generation Flow \u203a should generate synthetic data based on user input\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Synthetic Data Generation Flow \u203a should generate synthetic data based on user input\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Synthetic Data Generation Flow \u203a should generate synthetic data based on user input\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Synthetic Data Generation Flow \u203a should generate synthetic data based on user input\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Synthetic Data Generation Flow \u203a should generate synthetic data based on user input\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Synthetic Data Generation Flow \u203a should generate synthetic data based on user input\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Synthetic Data Generation Flow \u203a should export synthetic data in multiple formats\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Synthetic Data Generation Flow \u203a should export synthetic data in multiple formats\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Synthetic Data Generation Flow \u203a should export synthetic data in multiple formats\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Synthetic Data Generation Flow \u203a should export synthetic data in multiple formats\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Synthetic Data Generation Flow \u203a should export synthetic data in multiple formats\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Synthetic Data Generation Flow \u203a should export synthetic data in multiple formats\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Generation Service Integration \u203a should handle batch generation jobs\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Generation Service Integration \u203a should handle batch generation jobs\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Generation Service Integration \u203a should handle batch generation jobs\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Generation Service Integration \u203a should handle batch generation jobs\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Generation Service Integration \u203a should handle batch generation jobs\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Generation Service Integration \u203a should handle batch generation jobs\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Generation Service Integration \u203a should stream generation progress via WebSocket\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Generation Service Integration \u203a should stream generation progress via WebSocket\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Generation Service Integration \u203a should stream generation progress via WebSocket\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Generation Service Integration \u203a should stream generation progress via WebSocket\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Generation Service Integration \u203a should stream generation progress via WebSocket\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Generation Service Integration \u203a should stream generation progress via WebSocket\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf LLM Cache Management Integration \u203a should clear LLM cache and update UI\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf LLM Cache Management Integration \u203a should clear LLM cache and update UI\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf LLM Cache Management Integration \u203a should clear LLM cache and update UI\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf LLM Cache Management Integration \u203a should clear LLM cache and update UI\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf LLM Cache Management Integration \u203a should clear LLM cache and update UI\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf LLM Cache Management Integration \u203a should clear LLM cache and update UI\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf LLM Cache Management Integration \u203a should update cache TTL settings\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf LLM Cache Management Integration \u203a should update cache TTL settings\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf LLM Cache Management Integration \u203a should update cache TTL settings\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf LLM Cache Management Integration \u203a should update cache TTL settings\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf LLM Cache Management Integration \u203a should update cache TTL settings\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf LLM Cache Management Integration \u203a should update cache TTL settings\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Supply Catalog Integration \u203a should load and display supply catalog\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Supply Catalog Integration \u203a should load and display supply catalog\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Supply Catalog Integration \u203a should load and display supply catalog\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Supply Catalog Integration \u203a should load and display supply catalog\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Supply Catalog Integration \u203a should load and display supply catalog\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Supply Catalog Integration \u203a should load and display supply catalog\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Supply Catalog Integration \u203a should switch between different model providers\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Supply Catalog Integration \u203a should switch between different model providers\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Supply Catalog Integration \u203a should switch between different model providers\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Supply Catalog Integration \u203a should switch between different model providers\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Supply Catalog Integration \u203a should switch between different model providers\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Supply Catalog Integration \u203a should switch between different model providers\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Configuration Management \u203a should load and display configuration\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Configuration Management \u203a should load and display configuration\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Configuration Management \u203a should load and display configuration\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Configuration Management \u203a should load and display configuration\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Configuration Management \u203a should load and display configuration\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Configuration Management \u203a should load and display configuration\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Configuration Management \u203a should update nested configuration values\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Configuration Management \u203a should update nested configuration values\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Configuration Management \u203a should update nested configuration values\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Configuration Management \u203a should update nested configuration values\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Configuration Management \u203a should update nested configuration values\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Configuration Management \u203a should update nested configuration values\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Health Check Monitoring \u203a should fetch and display system health status\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Health Check Monitoring \u203a should fetch and display system health status\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Health Check Monitoring \u203a should fetch and display system health status\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Health Check Monitoring \u203a should fetch and display system health status\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Health Check Monitoring \u203a should fetch and display system health status\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Health Check Monitoring \u203a should fetch and display system health status\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf OAuth Secrets Management \u203a should handle OAuth token refresh\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf OAuth Secrets Management \u203a should handle OAuth token refresh\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf OAuth Secrets Management \u203a should handle OAuth token refresh\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf OAuth Secrets Management \u203a should handle OAuth token refresh\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf OAuth Secrets Management \u203a should handle OAuth token refresh\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf OAuth Secrets Management \u203a should handle OAuth token refresh\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf OAuth Secrets Management \u203a should manage secrets securely\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf OAuth Secrets Management \u203a should manage secrets securely\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf OAuth Secrets Management \u203a should manage secrets securely\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf OAuth Secrets Management \u203a should manage secrets securely\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf OAuth Secrets Management \u203a should manage secrets securely\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf OAuth Secrets Management \u203a should manage secrets securely\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Security Service Integration \u203a should validate user permissions for protected resources\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Security Service Integration \u203a should validate user permissions for protected resources\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Security Service Integration \u203a should validate user permissions for protected resources\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Security Service Integration \u203a should validate user permissions for protected resources\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Security Service Integration \u203a should validate user permissions for protected resources\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Security Service Integration \u203a should validate user permissions for protected resources\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Security Service Integration \u203a should handle security token rotation\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Security Service Integration \u203a should handle security token rotation\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Security Service Integration \u203a should handle security token rotation\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Security Service Integration \u203a should handle security token rotation\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Security Service Integration \u203a should handle security token rotation\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Security Service Integration \u203a should handle security token rotation\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Key Manager Integration \u203a should manage API keys lifecycle\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Key Manager Integration \u203a should manage API keys lifecycle\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Key Manager Integration \u203a should manage API keys lifecycle\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Key Manager Integration \u203a should manage API keys lifecycle\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Key Manager Integration \u203a should manage API keys lifecycle\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Key Manager Integration \u203a should manage API keys lifecycle\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Key Manager Integration \u203a should revoke compromised keys\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Key Manager Integration \u203a should revoke compromised keys\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Key Manager Integration \u203a should revoke compromised keys\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Key Manager Integration \u203a should revoke compromised keys\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Key Manager Integration \u203a should revoke compromised keys\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Key Manager Integration \u203a should revoke compromised keys\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Admin Functionality Integration \u203a should manage user roles and permissions\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Admin Functionality Integration \u203a should manage user roles and permissions\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Admin Functionality Integration \u203a should manage user roles and permissions\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Admin Functionality Integration \u203a should manage user roles and permissions\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Admin Functionality Integration \u203a should manage user roles and permissions\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Admin Functionality Integration \u203a should manage user roles and permissions\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Admin Functionality Integration \u203a should access admin-only endpoints with proper auth\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Admin Functionality Integration \u203a should access admin-only endpoints with proper auth\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Admin Functionality Integration \u203a should access admin-only endpoints with proper auth\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Admin Functionality Integration \u203a should access admin-only endpoints with proper auth\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Admin Functionality Integration \u203a should access admin-only endpoints with proper auth\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Admin Functionality Integration \u203a should access admin-only endpoints with proper auth\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Database Repository Pattern Integration \u203a should perform CRUD operations through repositories\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Database Repository Pattern Integration \u203a should perform CRUD operations through repositories\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Database Repository Pattern Integration \u203a should perform CRUD operations through repositories\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Database Repository Pattern Integration \u203a should perform CRUD operations through repositories\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Database Repository Pattern Integration \u203a should perform CRUD operations through repositories\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Database Repository Pattern Integration \u203a should perform CRUD operations through repositories\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Database Repository Pattern Integration \u203a should handle database transactions\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Database Repository Pattern Integration \u203a should handle database transactions\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Database Repository Pattern Integration \u203a should handle database transactions\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Database Repository Pattern Integration \u203a should handle database transactions\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Database Repository Pattern Integration \u203a should handle database transactions\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Database Repository Pattern Integration \u203a should handle database transactions\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Redis Caching Integration \u203a should cache frequently accessed data\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Redis Caching Integration \u203a should cache frequently accessed data\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Redis Caching Integration \u203a should cache frequently accessed data\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Redis Caching Integration \u203a should cache frequently accessed data\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Redis Caching Integration \u203a should cache frequently accessed data\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Redis Caching Integration \u203a should cache frequently accessed data\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Redis Caching Integration \u203a should invalidate cache on data updates\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Redis Caching Integration \u203a should invalidate cache on data updates\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Redis Caching Integration \u203a should invalidate cache on data updates\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Redis Caching Integration \u203a should invalidate cache on data updates\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Redis Caching Integration \u203a should invalidate cache on data updates\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Redis Caching Integration \u203a should invalidate cache on data updates\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf ClickHouse Analytics Integration \u203a should query analytics data from ClickHouse\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf ClickHouse Analytics Integration \u203a should query analytics data from ClickHouse\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf ClickHouse Analytics Integration \u203a should query analytics data from ClickHouse\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf ClickHouse Analytics Integration \u203a should query analytics data from ClickHouse\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf ClickHouse Analytics Integration \u203a should query analytics data from ClickHouse\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf ClickHouse Analytics Integration \u203a should query analytics data from ClickHouse\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf ClickHouse Analytics Integration \u203a should aggregate metrics in real-time\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf ClickHouse Analytics Integration \u203a should aggregate metrics in real-time\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf ClickHouse Analytics Integration \u203a should aggregate metrics in real-time\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf ClickHouse Analytics Integration \u203a should aggregate metrics in real-time\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf ClickHouse Analytics Integration \u203a should aggregate metrics in real-time\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf ClickHouse Analytics Integration \u203a should aggregate metrics in real-time\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Background Task Processing \u203a should queue and process background tasks\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Background Task Processing \u203a should queue and process background tasks\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Background Task Processing \u203a should queue and process background tasks\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Background Task Processing \u203a should queue and process background tasks\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Background Task Processing \u203a should queue and process background tasks\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Background Task Processing \u203a should queue and process background tasks\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Background Task Processing \u203a should handle task failures and retries\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Background Task Processing \u203a should handle task failures and retries\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Background Task Processing \u203a should handle task failures and retries\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Background Task Processing \u203a should handle task failures and retries\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Background Task Processing \u203a should handle task failures and retries\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Background Task Processing \u203a should handle task failures and retries\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Error Context and Tracing \u203a should capture and display error context\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Error Context and Tracing \u203a should capture and display error context\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Error Context and Tracing \u203a should capture and display error context\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Error Context and Tracing \u203a should capture and display error context\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Error Context and Tracing \u203a should capture and display error context\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Error Context and Tracing \u203a should capture and display error context\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Demo Mode Functionality \u203a should enable demo mode with limited features\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Demo Mode Functionality \u203a should enable demo mode with limited features\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Demo Mode Functionality \u203a should enable demo mode with limited features\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Demo Mode Functionality \u203a should enable demo mode with limited features\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Demo Mode Functionality \u203a should enable demo mode with limited features\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Demo Mode Functionality \u203a should enable demo mode with limited features\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Demo Mode Functionality \u203a should simulate data in demo mode\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Demo Mode Functionality \u203a should simulate data in demo mode\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Demo Mode Functionality \u203a should simulate data in demo mode\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Demo Mode Functionality \u203a should simulate data in demo mode\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Demo Mode Functionality \u203a should simulate data in demo mode\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Demo Mode Functionality \u203a should simulate data in demo mode\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Enterprise Demo Features \u203a should showcase enterprise optimization features\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Enterprise Demo Features \u203a should showcase enterprise optimization features\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Enterprise Demo Features \u203a should showcase enterprise optimization features\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Enterprise Demo Features \u203a should showcase enterprise optimization features\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Enterprise Demo Features \u203a should showcase enterprise optimization features\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Enterprise Demo Features \u203a should showcase enterprise optimization features\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Enterprise Demo Features \u203a should display ROI calculations\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Enterprise Demo Features \u203a should display ROI calculations\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Enterprise Demo Features \u203a should display ROI calculations\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Enterprise Demo Features \u203a should display ROI calculations\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Enterprise Demo Features \u203a should display ROI calculations\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Enterprise Demo Features \u203a should display ROI calculations\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf PDF and Image Processing \u203a should extract text from PDF files\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf PDF and Image Processing \u203a should extract text from PDF files\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf PDF and Image Processing \u203a should extract text from PDF files\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf PDF and Image Processing \u203a should extract text from PDF files\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf PDF and Image Processing \u203a should extract text from PDF files\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf PDF and Image Processing \u203a should extract text from PDF files\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf PDF and Image Processing \u203a should analyze images using vision models\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf PDF and Image Processing \u203a should analyze images using vision models\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf PDF and Image Processing \u203a should analyze images using vision models\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf PDF and Image Processing \u203a should analyze images using vision models\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf PDF and Image Processing \u203a should analyze images using vision models\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf PDF and Image Processing \u203a should analyze images using vision models\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Export and Import Functionality \u203a should export data in multiple formats\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Export and Import Functionality \u203a should export data in multiple formats\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Export and Import Functionality \u203a should export data in multiple formats\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Export and Import Functionality \u203a should export data in multiple formats\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Export and Import Functionality \u203a should export data in multiple formats\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Export and Import Functionality \u203a should export data in multiple formats\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Export and Import Functionality \u203a should import and validate data\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Export and Import Functionality \u203a should import and validate data\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Export and Import Functionality \u203a should import and validate data\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Export and Import Functionality \u203a should import and validate data\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Export and Import Functionality \u203a should import and validate data\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Export and Import Functionality \u203a should import and validate data\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Real-time Metrics Dashboard \u203a should display live performance metrics\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Real-time Metrics Dashboard \u203a should display live performance metrics\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Real-time Metrics Dashboard \u203a should display live performance metrics\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Real-time Metrics Dashboard \u203a should display live performance metrics\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Real-time Metrics Dashboard \u203a should display live performance metrics\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Real-time Metrics Dashboard \u203a should display live performance metrics\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Agent Tool Dispatcher Integration \u203a should dispatch tools to appropriate agents\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Agent Tool Dispatcher Integration \u203a should dispatch tools to appropriate agents\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Agent Tool Dispatcher Integration \u203a should dispatch tools to appropriate agents\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Agent Tool Dispatcher Integration \u203a should dispatch tools to appropriate agents\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Agent Tool Dispatcher Integration \u203a should dispatch tools to appropriate agents\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Agent Tool Dispatcher Integration \u203a should dispatch tools to appropriate agents\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Collaboration Features \u203a should share threads with team members\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Collaboration Features \u203a should share threads with team members\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Collaboration Features \u203a should share threads with team members\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Collaboration Features \u203a should share threads with team members\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Collaboration Features \u203a should share threads with team members\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Collaboration Features \u203a should share threads with team members\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Collaboration Features \u203a should sync collaborative edits in real-time\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Collaboration Features \u203a should sync collaborative edits in real-time\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Collaboration Features \u203a should sync collaborative edits in real-time\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Collaboration Features \u203a should sync collaborative edits in real-time\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Collaboration Features \u203a should sync collaborative edits in real-time\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Collaboration Features \u203a should sync collaborative edits in real-time\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Collaboration Features \u203a should handle presence awareness\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Collaboration Features \u203a should handle presence awareness\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Collaboration Features \u203a should handle presence awareness\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Collaboration Features \u203a should handle presence awareness\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Collaboration Features \u203a should handle presence awareness\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Collaboration Features \u203a should handle presence awareness\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Jupyter Notebook Support \u203a should execute notebook cells\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Jupyter Notebook Support \u203a should execute notebook cells\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Jupyter Notebook Support \u203a should execute notebook cells\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Jupyter Notebook Support \u203a should execute notebook cells\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Jupyter Notebook Support \u203a should execute notebook cells\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Jupyter Notebook Support \u203a should execute notebook cells\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Jupyter Notebook Support \u203a should render notebook visualizations\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Jupyter Notebook Support \u203a should render notebook visualizations\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Jupyter Notebook Support \u203a should render notebook visualizations\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Jupyter Notebook Support \u203a should render notebook visualizations\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Jupyter Notebook Support \u203a should render notebook visualizations\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Jupyter Notebook Support \u203a should render notebook visualizations\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf State Persistence and Recovery \u203a should persist application state across sessions\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf State Persistence and Recovery \u203a should persist application state across sessions\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf State Persistence and Recovery \u203a should persist application state across sessions\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf State Persistence and Recovery \u203a should persist application state across sessions\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf State Persistence and Recovery \u203a should persist application state across sessions\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf State Persistence and Recovery \u203a should persist application state across sessions\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf State Persistence and Recovery \u203a should recover from corrupted state gracefully\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf State Persistence and Recovery \u203a should recover from corrupted state gracefully\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf State Persistence and Recovery \u203a should recover from corrupted state gracefully\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf State Persistence and Recovery \u203a should recover from corrupted state gracefully\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf State Persistence and Recovery \u203a should recover from corrupted state gracefully\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf State Persistence and Recovery \u203a should recover from corrupted state gracefully\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf State Persistence and Recovery \u203a should migrate state between versions\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf State Persistence and Recovery \u203a should migrate state between versions\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf State Persistence and Recovery \u203a should migrate state between versions\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf State Persistence and Recovery \u203a should migrate state between versions\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf State Persistence and Recovery \u203a should migrate state between versions\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf State Persistence and Recovery \u203a should migrate state between versions\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\n  \u25cf Comprehensive Frontend Integration Tests \u203a should load all test suites\n\n    A mock server is already listening on this url\n\n    \u001b[0m \u001b[90m 37 |\u001b[39m\n     \u001b[90m 38 |\u001b[39m beforeEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 39 |\u001b[39m   mockWs \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWS\u001b[39m(\u001b[32m'ws://localhost:8000/ws'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 40 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at new Server (node_modules/mock-socket/dist/mock-socket.js:1991:13)\n      at new WS (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:111:19)\n      at Object.<anonymous> (__tests__/integration/data-generation.test.tsx:39:12)\n\n  \u25cf Comprehensive Frontend Integration Tests \u203a should load all test suites\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 50 |\u001b[39m\n     \u001b[90m 51 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 52 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 53 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 54 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 55 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/corpus-management.test.tsx:52:6)\n\n  \u25cf Comprehensive Frontend Integration Tests \u203a should load all test suites\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m\n     \u001b[90m 42 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/data-generation.test.tsx:43:6)\n\n  \u25cf Comprehensive Frontend Integration Tests \u203a should load all test suites\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 21 |\u001b[39m\n     \u001b[90m 22 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 24 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 25 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 26 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/infrastructure.test.tsx:23:6)\n\n  \u25cf Comprehensive Frontend Integration Tests \u203a should load all test suites\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 29 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/advanced-features.test.tsx:27:6)\n\n  \u25cf Comprehensive Frontend Integration Tests \u203a should load all test suites\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m afterEach(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m   \u001b[33mWS\u001b[39m\u001b[33m.\u001b[39mclean()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   jest\u001b[33m.\u001b[39mclearAllMocks()\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m   localStorageMock\u001b[33m.\u001b[39mclear()\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:172:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.close (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:171:5)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:80:16\n          at Array.forEach (<anonymous>)\n      at WS.clean (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:79:18)\n      at Object.clean (__tests__/integration/collaboration-state.test.tsx:31:6)\n\nFAIL __tests__/integration/comprehensive/collaboration-features.test.tsx\n  \u25cf Collaboration Features Integration Tests \u203a Real-time Cursor Synchronization \u203a should sync cursor positions in real-time\n\n    TypeError: Cannot read properties of undefined (reading 'x')\n\n    \u001b[0m \u001b[90m 88 |\u001b[39m             {\u001b[33mArray\u001b[39m\u001b[33m.\u001b[39m\u001b[36mfrom\u001b[39m(otherCursors\u001b[33m.\u001b[39mentries())\u001b[33m.\u001b[39mmap(([userId\u001b[33m,\u001b[39m pos]) \u001b[33m=>\u001b[39m (\n     \u001b[90m 89 |\u001b[39m               \u001b[33m<\u001b[39m\u001b[33mdiv\u001b[39m key\u001b[33m=\u001b[39m{userId} data\u001b[33m-\u001b[39mtestid\u001b[33m=\u001b[39m{\u001b[32m`cursor-${userId}`\u001b[39m}\u001b[33m>\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 90 |\u001b[39m                 \u001b[33mUser\u001b[39m {userId}\u001b[33m:\u001b[39m {pos\u001b[33m.\u001b[39mx}\u001b[33m,\u001b[39m {pos\u001b[33m.\u001b[39my}\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 91 |\u001b[39m               \u001b[33m<\u001b[39m\u001b[33m/\u001b[39m\u001b[33mdiv\u001b[39m\u001b[33m>\u001b[39m\n     \u001b[90m 92 |\u001b[39m             ))}\n     \u001b[90m 93 |\u001b[39m           \u001b[33m<\u001b[39m\u001b[33m/\u001b[39m\u001b[33mdiv\u001b[39m\u001b[33m>\u001b[39m\u001b[0m\n\n      at x (__tests__/integration/comprehensive/collaboration-features.test.tsx:90:37)\n          at Array.map (<anonymous>)\n      at map (__tests__/integration/comprehensive/collaboration-features.test.tsx:88:49)\n      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:860:10)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.send (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:165:5)\n      at Object.send (__tests__/integration/comprehensive/collaboration-features.test.tsx:102:14)\n\n  \u25cf Collaboration Features Integration Tests \u203a Real-time Cursor Synchronization \u203a should handle multiple cursor updates efficiently\n\n    TypeError: Cannot convert undefined or null to object\n        at Object.entries (<anonymous>)\n\n    \u001b[0m \u001b[90m 120 |\u001b[39m             \u001b[36mconst\u001b[39m message \u001b[33m=\u001b[39m \u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mparse(event\u001b[33m.\u001b[39mdata)\u001b[33m;\u001b[39m\n     \u001b[90m 121 |\u001b[39m             \u001b[36mif\u001b[39m (message\u001b[33m.\u001b[39mtype \u001b[33m===\u001b[39m \u001b[32m'multi_cursor_update'\u001b[39m) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 122 |\u001b[39m               setCursors(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m(\u001b[33mObject\u001b[39m\u001b[33m.\u001b[39mentries(message\u001b[33m.\u001b[39mcursors)))\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 123 |\u001b[39m             }\n     \u001b[90m 124 |\u001b[39m           }\u001b[33m;\u001b[39m\n     \u001b[90m 125 |\u001b[39m           \u001b[0m\n\n      at Proxy.entries (__tests__/integration/comprehensive/collaboration-features.test.tsx:122:41)\n      at node_modules/mock-socket/dist/mock-socket.js:859:16\n          at Array.forEach (<anonymous>)\n      at Proxy.dispatchEvent (node_modules/mock-socket/dist/mock-socket.js:855:13)\n      at node_modules/mock-socket/dist/mock-socket.js:2133:16\n          at Array.forEach (<anonymous>)\n      at Server.emit (node_modules/mock-socket/dist/mock-socket.js:2121:16)\n      at node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:166:19\n      at node_modules/@testing-library/react/dist/act-compat.js:48:24\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:790:22)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.send (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:165:5)\n      at Object.send (__tests__/integration/comprehensive/collaboration-features.test.tsx:145:14)\n\n  \u25cf Collaboration Features Integration Tests \u203a Presence and Activity Status \u203a should handle presence and activity status\n\n    expect(element).toHaveTextContent()\n\n    Expected element to have text content:\n      2 users online\n    Received:\n      1 users online\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"active-count\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0m1\u001b[0m\n              \u001b[0m users online\u001b[0m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mdata-testid\u001b[39m=\u001b[32m\"typing-count\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0m0\u001b[0m\n              \u001b[0m users typing\u001b[0m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n    \u001b[0m \u001b[90m 210 |\u001b[39m       \n     \u001b[90m 211 |\u001b[39m       \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 212 |\u001b[39m         expect(screen\u001b[33m.\u001b[39mgetByTestId(\u001b[32m'active-count'\u001b[39m))\u001b[33m.\u001b[39mtoHaveTextContent(\u001b[32m'2 users online'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 213 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 214 |\u001b[39m       \n     \u001b[90m 215 |\u001b[39m       \u001b[90m// Simulate typing\u001b[39m\u001b[0m\n\n      at toHaveTextContent (__tests__/integration/comprehensive/collaboration-features.test.tsx:212:52)\n      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\n\n  \u25cf Collaboration Features Integration Tests \u203a Presence and Activity Status \u203a should handle user status with detailed information\n\n    TypeError: Cannot read properties of undefined (reading 'name')\n\n    \u001b[0m \u001b[90m 261 |\u001b[39m             {\u001b[33mArray\u001b[39m\u001b[33m.\u001b[39m\u001b[36mfrom\u001b[39m(users\u001b[33m.\u001b[39mentries())\u001b[33m.\u001b[39mmap(([userId\u001b[33m,\u001b[39m status]) \u001b[33m=>\u001b[39m (\n     \u001b[90m 262 |\u001b[39m               \u001b[33m<\u001b[39m\u001b[33mdiv\u001b[39m key\u001b[33m=\u001b[39m{userId} data\u001b[33m-\u001b[39mtestid\u001b[33m=\u001b[39m{\u001b[32m`user-${userId}`\u001b[39m}\u001b[33m>\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 263 |\u001b[39m                 {status\u001b[33m.\u001b[39mname} \u001b[33m-\u001b[39m {status\u001b[33m.\u001b[39mactivity} ({status\u001b[33m.\u001b[39mlastSeen})\n     \u001b[90m     |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 264 |\u001b[39m               \u001b[33m<\u001b[39m\u001b[33m/\u001b[39m\u001b[33mdiv\u001b[39m\u001b[33m>\u001b[39m\n     \u001b[90m 265 |\u001b[39m             ))}\n     \u001b[90m 266 |\u001b[39m           \u001b[33m<\u001b[39m\u001b[33m/\u001b[39m\u001b[33mdiv\u001b[39m\u001b[33m>\u001b[39m\u001b[0m\n\n      at name (__tests__/integration/comprehensive/collaboration-features.test.tsx:263:25)\n          at Array.map (<anonymous>)\n      at map (__tests__/integration/comprehensive/collaboration-features.test.tsx:261:42)\n      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:860:10)\n      at node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at WS.send (node_modules/jest-websocket-mock/lib/jest-websocket-mock.cjs.js:165:5)\n      at Object.send (__tests__/integration/comprehensive/collaboration-features.test.tsx:274:14)\n\nFAIL __tests__/integration/data-generation.test.tsx\n  \u25cf Generation Service Integration \u203a should stream generation progress via WebSocket\n\n    ReferenceError: act is not defined\n\n    \u001b[0m \u001b[90m 186 |\u001b[39m     \u001b[36mawait\u001b[39m mockWs\u001b[33m.\u001b[39mconnected\u001b[33m;\u001b[39m\n     \u001b[90m 187 |\u001b[39m     \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 188 |\u001b[39m     act(() \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 189 |\u001b[39m       mockWs\u001b[33m.\u001b[39msend(\u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mstringify({ type\u001b[33m:\u001b[39m \u001b[32m'generation_progress'\u001b[39m\u001b[33m,\u001b[39m progress\u001b[33m:\u001b[39m \u001b[35m50\u001b[39m }))\u001b[33m;\u001b[39m\n     \u001b[90m 190 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 191 |\u001b[39m     \u001b[0m\n\n      at Object.act (__tests__/integration/data-generation.test.tsx:188:5)\n\n\nTest Suites: 10 failed, 34 passed, 44 total\nTests:       78 failed, 266 passed, 344 total\nSnapshots:   0 total\nTime:        53.943 s\nRan all test suites.\n",
      "test_counts": {
        "total": 122,
        "passed": 34,
        "failed": 88,
        "skipped": 0,
        "errors": 0,
        "test_files": 44
      },
      "coverage": null,
      "test_details": []
    },
    "e2e": {
      "status": "pending",
      "duration": 0,
      "exit_code": null,
      "output": "",
      "test_counts": {
        "total": 0,
        "passed": 0,
        "failed": 0,
        "skipped": 0,
        "errors": 0
      },
      "coverage": null
    },
    "overall": {
      "status": "failed",
      "start_time": 1755215812.9819374,
      "end_time": 1755215912.0782838
    }
  }
}